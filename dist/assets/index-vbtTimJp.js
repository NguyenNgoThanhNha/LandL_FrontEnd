function _mergeNamespaces(_e,et){for(var tt=0;tt<et.length;tt++){const rt=et[tt];if(typeof rt!="string"&&!Array.isArray(rt)){for(const it in rt)if(it!=="default"&&!(it in _e)){const st=Object.getOwnPropertyDescriptor(rt,it);st&&Object.defineProperty(_e,it,st.get?st:{enumerable:!0,get:()=>rt[it]})}}}return Object.freeze(Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"}))}(function(){const et=document.createElement("link").relList;if(et&&et.supports&&et.supports("modulepreload"))return;for(const it of document.querySelectorAll('link[rel="modulepreload"]'))rt(it);new MutationObserver(it=>{for(const st of it)if(st.type==="childList")for(const ut of st.addedNodes)ut.tagName==="LINK"&&ut.rel==="modulepreload"&&rt(ut)}).observe(document,{childList:!0,subtree:!0});function tt(it){const st={};return it.integrity&&(st.integrity=it.integrity),it.referrerPolicy&&(st.referrerPolicy=it.referrerPolicy),it.crossOrigin==="use-credentials"?st.credentials="include":it.crossOrigin==="anonymous"?st.credentials="omit":st.credentials="same-origin",st}function rt(it){if(it.ep)return;it.ep=!0;const st=tt(it);fetch(it.href,st)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$4=Symbol.for("react.element"),n$6=Symbol.for("react.portal"),p$5=Symbol.for("react.fragment"),q$3=Symbol.for("react.strict_mode"),r$5=Symbol.for("react.profiler"),t$4=Symbol.for("react.provider"),u$3=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$3=Symbol.for("react.memo"),y$3=Symbol.for("react.lazy"),z$4=Symbol.iterator;function A$4(_e){return _e===null||typeof _e!="object"?null:(_e=z$4&&_e[z$4]||_e["@@iterator"],typeof _e=="function"?_e:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$2=Object.assign,D$3={};function E$2(_e,et,tt){this.props=_e,this.context=et,this.refs=D$3,this.updater=tt||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(_e,et){if(typeof _e!="object"&&typeof _e!="function"&&_e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,_e,et,"setState")};E$2.prototype.forceUpdate=function(_e){this.updater.enqueueForceUpdate(this,_e,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$3(_e,et,tt){this.props=_e,this.context=et,this.refs=D$3,this.updater=tt||B$2}var H$2=G$3.prototype=new F$2;H$2.constructor=G$3;C$2(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$2={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$3(_e,et,tt){var rt,it={},st=null,ut=null;if(et!=null)for(rt in et.ref!==void 0&&(ut=et.ref),et.key!==void 0&&(st=""+et.key),et)J$2.call(et,rt)&&!L$2.hasOwnProperty(rt)&&(it[rt]=et[rt]);var ht=arguments.length-2;if(ht===1)it.children=tt;else if(1<ht){for(var at=Array(ht),gt=0;gt<ht;gt++)at[gt]=arguments[gt+2];it.children=at}if(_e&&_e.defaultProps)for(rt in ht=_e.defaultProps,ht)it[rt]===void 0&&(it[rt]=ht[rt]);return{$$typeof:l$4,type:_e,key:st,ref:ut,props:it,_owner:K$2.current}}function N$2(_e,et){return{$$typeof:l$4,type:_e.type,key:et,ref:_e.ref,props:_e.props,_owner:_e._owner}}function O$3(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===l$4}function escape$1(_e){var et={"=":"=0",":":"=2"};return"$"+_e.replace(/[=:]/g,function(tt){return et[tt]})}var P$4=/\/+/g;function Q$3(_e,et){return typeof _e=="object"&&_e!==null&&_e.key!=null?escape$1(""+_e.key):et.toString(36)}function R$2(_e,et,tt,rt,it){var st=typeof _e;(st==="undefined"||st==="boolean")&&(_e=null);var ut=!1;if(_e===null)ut=!0;else switch(st){case"string":case"number":ut=!0;break;case"object":switch(_e.$$typeof){case l$4:case n$6:ut=!0}}if(ut)return ut=_e,it=it(ut),_e=rt===""?"."+Q$3(ut,0):rt,I$3(it)?(tt="",_e!=null&&(tt=_e.replace(P$4,"$&/")+"/"),R$2(it,et,tt,"",function(gt){return gt})):it!=null&&(O$3(it)&&(it=N$2(it,tt+(!it.key||ut&&ut.key===it.key?"":(""+it.key).replace(P$4,"$&/")+"/")+_e)),et.push(it)),1;if(ut=0,rt=rt===""?".":rt+":",I$3(_e))for(var ht=0;ht<_e.length;ht++){st=_e[ht];var at=rt+Q$3(st,ht);ut+=R$2(st,et,tt,at,it)}else if(at=A$4(_e),typeof at=="function")for(_e=at.call(_e),ht=0;!(st=_e.next()).done;)st=st.value,at=rt+Q$3(st,ht++),ut+=R$2(st,et,tt,at,it);else if(st==="object")throw et=String(_e),Error("Objects are not valid as a React child (found: "+(et==="[object Object]"?"object with keys {"+Object.keys(_e).join(", ")+"}":et)+"). If you meant to render a collection of children, use an array instead.");return ut}function S$3(_e,et,tt){if(_e==null)return _e;var rt=[],it=0;return R$2(_e,rt,"","",function(st){return et.call(tt,st,it++)}),rt}function T$3(_e){if(_e._status===-1){var et=_e._result;et=et(),et.then(function(tt){(_e._status===0||_e._status===-1)&&(_e._status=1,_e._result=tt)},function(tt){(_e._status===0||_e._status===-1)&&(_e._status=2,_e._result=tt)}),_e._status===-1&&(_e._status=0,_e._result=et)}if(_e._status===1)return _e._result.default;throw _e._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$2};function X$4(){throw Error("act(...) is not supported in production builds of React.")}react_production_min.Children={map:S$3,forEach:function(_e,et,tt){S$3(_e,function(){et.apply(this,arguments)},tt)},count:function(_e){var et=0;return S$3(_e,function(){et++}),et},toArray:function(_e){return S$3(_e,function(et){return et})||[]},only:function(_e){if(!O$3(_e))throw Error("React.Children.only expected to receive a single React element child.");return _e}};react_production_min.Component=E$2;react_production_min.Fragment=p$5;react_production_min.Profiler=r$5;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$3;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.act=X$4;react_production_min.cloneElement=function(_e,et,tt){if(_e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+_e+".");var rt=C$2({},_e.props),it=_e.key,st=_e.ref,ut=_e._owner;if(et!=null){if(et.ref!==void 0&&(st=et.ref,ut=K$2.current),et.key!==void 0&&(it=""+et.key),_e.type&&_e.type.defaultProps)var ht=_e.type.defaultProps;for(at in et)J$2.call(et,at)&&!L$2.hasOwnProperty(at)&&(rt[at]=et[at]===void 0&&ht!==void 0?ht[at]:et[at])}var at=arguments.length-2;if(at===1)rt.children=tt;else if(1<at){ht=Array(at);for(var gt=0;gt<at;gt++)ht[gt]=arguments[gt+2];rt.children=ht}return{$$typeof:l$4,type:_e.type,key:it,ref:st,props:rt,_owner:ut}};react_production_min.createContext=function(_e){return _e={$$typeof:u$3,_currentValue:_e,_currentValue2:_e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},_e.Provider={$$typeof:t$4,_context:_e},_e.Consumer=_e};react_production_min.createElement=M$3;react_production_min.createFactory=function(_e){var et=M$3.bind(null,_e);return et.type=_e,et};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(_e){return{$$typeof:v$5,render:_e}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(_e){return{$$typeof:y$3,_payload:{_status:-1,_result:_e},_init:T$3}};react_production_min.memo=function(_e,et){return{$$typeof:x$3,type:_e,compare:et===void 0?null:et}};react_production_min.startTransition=function(_e){var et=V$3.transition;V$3.transition={};try{_e()}finally{V$3.transition=et}};react_production_min.unstable_act=X$4;react_production_min.useCallback=function(_e,et){return U$3.current.useCallback(_e,et)};react_production_min.useContext=function(_e){return U$3.current.useContext(_e)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(_e){return U$3.current.useDeferredValue(_e)};react_production_min.useEffect=function(_e,et){return U$3.current.useEffect(_e,et)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(_e,et,tt){return U$3.current.useImperativeHandle(_e,et,tt)};react_production_min.useInsertionEffect=function(_e,et){return U$3.current.useInsertionEffect(_e,et)};react_production_min.useLayoutEffect=function(_e,et){return U$3.current.useLayoutEffect(_e,et)};react_production_min.useMemo=function(_e,et){return U$3.current.useMemo(_e,et)};react_production_min.useReducer=function(_e,et,tt){return U$3.current.useReducer(_e,et,tt)};react_production_min.useRef=function(_e){return U$3.current.useRef(_e)};react_production_min.useState=function(_e){return U$3.current.useState(_e)};react_production_min.useSyncExternalStore=function(_e,et,tt){return U$3.current.useSyncExternalStore(_e,et,tt)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.3.1";react.exports=react_production_min;var reactExports=react.exports;const React$1=getDefaultExportFromCjs(reactExports),React$2=_mergeNamespaces({__proto__:null,default:React$1},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$3=Symbol.for("react.fragment"),m$4=Object.prototype.hasOwnProperty,n$5=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$4={key:!0,ref:!0,__self:!0,__source:!0};function q$2(_e,et,tt){var rt,it={},st=null,ut=null;tt!==void 0&&(st=""+tt),et.key!==void 0&&(st=""+et.key),et.ref!==void 0&&(ut=et.ref);for(rt in et)m$4.call(et,rt)&&!p$4.hasOwnProperty(rt)&&(it[rt]=et[rt]);if(_e&&_e.defaultProps)for(rt in et=_e.defaultProps,et)it[rt]===void 0&&(it[rt]=et[rt]);return{$$typeof:k$3,type:_e,key:st,ref:ut,props:it,_owner:n$5.current}}reactJsxRuntime_production_min.Fragment=l$3;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(_e){function et(Qt,ir){var Mr=Qt.length;Qt.push(ir);e:for(;0<Mr;){var Cr=Mr-1>>>1,rn=Qt[Cr];if(0<it(rn,ir))Qt[Cr]=ir,Qt[Mr]=rn,Mr=Cr;else break e}}function tt(Qt){return Qt.length===0?null:Qt[0]}function rt(Qt){if(Qt.length===0)return null;var ir=Qt[0],Mr=Qt.pop();if(Mr!==ir){Qt[0]=Mr;e:for(var Cr=0,rn=Qt.length,fn=rn>>>1;Cr<fn;){var Dn=2*(Cr+1)-1,Yn=Qt[Dn],eo=Dn+1,Gn=Qt[eo];if(0>it(Yn,Mr))eo<rn&&0>it(Gn,Yn)?(Qt[Cr]=Gn,Qt[eo]=Mr,Cr=eo):(Qt[Cr]=Yn,Qt[Dn]=Mr,Cr=Dn);else if(eo<rn&&0>it(Gn,Mr))Qt[Cr]=Gn,Qt[eo]=Mr,Cr=eo;else break e}}return ir}function it(Qt,ir){var Mr=Qt.sortIndex-ir.sortIndex;return Mr!==0?Mr:Qt.id-ir.id}if(typeof performance=="object"&&typeof performance.now=="function"){var st=performance;_e.unstable_now=function(){return st.now()}}else{var ut=Date,ht=ut.now();_e.unstable_now=function(){return ut.now()-ht}}var at=[],gt=[],bt=1,wt=null,St=3,kt=!1,Rt=!1,It=!1,Dt=typeof setTimeout=="function"?setTimeout:null,Mt=typeof clearTimeout=="function"?clearTimeout:null,$t=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function jt(Qt){for(var ir=tt(gt);ir!==null;){if(ir.callback===null)rt(gt);else if(ir.startTime<=Qt)rt(gt),ir.sortIndex=ir.expirationTime,et(at,ir);else break;ir=tt(gt)}}function Nt(Qt){if(It=!1,jt(Qt),!Rt)if(tt(at)!==null)Rt=!0,ar(Ut);else{var ir=tt(gt);ir!==null&&hr(Nt,ir.startTime-Qt)}}function Ut(Qt,ir){Rt=!1,It&&(It=!1,Mt(tr),tr=-1),kt=!0;var Mr=St;try{for(jt(ir),wt=tt(at);wt!==null&&(!(wt.expirationTime>ir)||Qt&&!wr());){var Cr=wt.callback;if(typeof Cr=="function"){wt.callback=null,St=wt.priorityLevel;var rn=Cr(wt.expirationTime<=ir);ir=_e.unstable_now(),typeof rn=="function"?wt.callback=rn:wt===tt(at)&&rt(at),jt(ir)}else rt(at);wt=tt(at)}if(wt!==null)var fn=!0;else{var Dn=tt(gt);Dn!==null&&hr(Nt,Dn.startTime-ir),fn=!1}return fn}finally{wt=null,St=Mr,kt=!1}}var Ht=!1,Kt=null,tr=-1,mr=5,vr=-1;function wr(){return!(_e.unstable_now()-vr<mr)}function yr(){if(Kt!==null){var Qt=_e.unstable_now();vr=Qt;var ir=!0;try{ir=Kt(!0,Qt)}finally{ir?Or():(Ht=!1,Kt=null)}}else Ht=!1}var Or;if(typeof $t=="function")Or=function(){$t(yr)};else if(typeof MessageChannel<"u"){var Nr=new MessageChannel,Lr=Nr.port2;Nr.port1.onmessage=yr,Or=function(){Lr.postMessage(null)}}else Or=function(){Dt(yr,0)};function ar(Qt){Kt=Qt,Ht||(Ht=!0,Or())}function hr(Qt,ir){tr=Dt(function(){Qt(_e.unstable_now())},ir)}_e.unstable_IdlePriority=5,_e.unstable_ImmediatePriority=1,_e.unstable_LowPriority=4,_e.unstable_NormalPriority=3,_e.unstable_Profiling=null,_e.unstable_UserBlockingPriority=2,_e.unstable_cancelCallback=function(Qt){Qt.callback=null},_e.unstable_continueExecution=function(){Rt||kt||(Rt=!0,ar(Ut))},_e.unstable_forceFrameRate=function(Qt){0>Qt||125<Qt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):mr=0<Qt?Math.floor(1e3/Qt):5},_e.unstable_getCurrentPriorityLevel=function(){return St},_e.unstable_getFirstCallbackNode=function(){return tt(at)},_e.unstable_next=function(Qt){switch(St){case 1:case 2:case 3:var ir=3;break;default:ir=St}var Mr=St;St=ir;try{return Qt()}finally{St=Mr}},_e.unstable_pauseExecution=function(){},_e.unstable_requestPaint=function(){},_e.unstable_runWithPriority=function(Qt,ir){switch(Qt){case 1:case 2:case 3:case 4:case 5:break;default:Qt=3}var Mr=St;St=Qt;try{return ir()}finally{St=Mr}},_e.unstable_scheduleCallback=function(Qt,ir,Mr){var Cr=_e.unstable_now();switch(typeof Mr=="object"&&Mr!==null?(Mr=Mr.delay,Mr=typeof Mr=="number"&&0<Mr?Cr+Mr:Cr):Mr=Cr,Qt){case 1:var rn=-1;break;case 2:rn=250;break;case 5:rn=1073741823;break;case 4:rn=1e4;break;default:rn=5e3}return rn=Mr+rn,Qt={id:bt++,callback:ir,priorityLevel:Qt,startTime:Mr,expirationTime:rn,sortIndex:-1},Mr>Cr?(Qt.sortIndex=Mr,et(gt,Qt),tt(at)===null&&Qt===tt(gt)&&(It?(Mt(tr),tr=-1):It=!0,hr(Nt,Mr-Cr))):(Qt.sortIndex=rn,et(at,Qt),Rt||kt||(Rt=!0,ar(Ut))),Qt},_e.unstable_shouldYield=wr,_e.unstable_wrapCallback=function(Qt){var ir=St;return function(){var Mr=St;St=ir;try{return Qt.apply(this,arguments)}finally{St=Mr}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=reactExports,ca=schedulerExports;function p$3(_e){for(var et="https://reactjs.org/docs/error-decoder.html?invariant="+_e,tt=1;tt<arguments.length;tt++)et+="&args[]="+encodeURIComponent(arguments[tt]);return"Minified React error #"+_e+"; visit "+et+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da=new Set,ea={};function fa(_e,et){ha(_e,et),ha(_e+"Capture",et)}function ha(_e,et){for(ea[_e]=et,_e=0;_e<et.length;_e++)da.add(et[_e])}var ia=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma={};function oa(_e){return ja.call(ma,_e)?!0:ja.call(la,_e)?!1:ka$1.test(_e)?ma[_e]=!0:(la[_e]=!0,!1)}function pa(_e,et,tt,rt){if(tt!==null&&tt.type===0)return!1;switch(typeof et){case"function":case"symbol":return!0;case"boolean":return rt?!1:tt!==null?!tt.acceptsBooleans:(_e=_e.toLowerCase().slice(0,5),_e!=="data-"&&_e!=="aria-");default:return!1}}function qa(_e,et,tt,rt){if(et===null||typeof et>"u"||pa(_e,et,tt,rt))return!0;if(rt)return!1;if(tt!==null)switch(tt.type){case 3:return!et;case 4:return et===!1;case 5:return isNaN(et);case 6:return isNaN(et)||1>et}return!1}function v$4(_e,et,tt,rt,it,st,ut){this.acceptsBooleans=et===2||et===3||et===4,this.attributeName=rt,this.attributeNamespace=it,this.mustUseProperty=tt,this.propertyName=_e,this.type=et,this.sanitizeURL=st,this.removeEmptyString=ut}var z$3={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(_e){z$3[_e]=new v$4(_e,0,!1,_e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(_e){var et=_e[0];z$3[et]=new v$4(et,1,!1,_e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(_e){z$3[_e]=new v$4(_e,2,!1,_e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(_e){z$3[_e]=new v$4(_e,2,!1,_e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(_e){z$3[_e]=new v$4(_e,3,!1,_e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(_e){z$3[_e]=new v$4(_e,3,!0,_e,null,!1,!1)});["capture","download"].forEach(function(_e){z$3[_e]=new v$4(_e,4,!1,_e,null,!1,!1)});["cols","rows","size","span"].forEach(function(_e){z$3[_e]=new v$4(_e,6,!1,_e,null,!1,!1)});["rowSpan","start"].forEach(function(_e){z$3[_e]=new v$4(_e,5,!1,_e.toLowerCase(),null,!1,!1)});var ra=/[\-:]([a-z])/g;function sa(_e){return _e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(_e){var et=_e.replace(ra,sa);z$3[et]=new v$4(et,1,!1,_e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(_e){var et=_e.replace(ra,sa);z$3[et]=new v$4(et,1,!1,_e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(_e){var et=_e.replace(ra,sa);z$3[et]=new v$4(et,1,!1,_e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(_e){z$3[_e]=new v$4(_e,1,!1,_e.toLowerCase(),null,!1,!1)});z$3.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(_e){z$3[_e]=new v$4(_e,1,!1,_e.toLowerCase(),null,!0,!0)});function ta(_e,et,tt,rt){var it=z$3.hasOwnProperty(et)?z$3[et]:null;(it!==null?it.type!==0:rt||!(2<et.length)||et[0]!=="o"&&et[0]!=="O"||et[1]!=="n"&&et[1]!=="N")&&(qa(et,tt,it,rt)&&(tt=null),rt||it===null?oa(et)&&(tt===null?_e.removeAttribute(et):_e.setAttribute(et,""+tt)):it.mustUseProperty?_e[it.propertyName]=tt===null?it.type===3?!1:"":tt:(et=it.attributeName,rt=it.attributeNamespace,tt===null?_e.removeAttribute(et):(it=it.type,tt=it===3||it===4&&tt===!0?"":""+tt,rt?_e.setAttributeNS(rt,et,tt):_e.setAttribute(et,tt))))}var ua$1=aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),za=Symbol.for("react.strict_mode"),Aa=Symbol.for("react.profiler"),Ba=Symbol.for("react.provider"),Ca=Symbol.for("react.context"),Da=Symbol.for("react.forward_ref"),Ea=Symbol.for("react.suspense"),Fa=Symbol.for("react.suspense_list"),Ga=Symbol.for("react.memo"),Ha=Symbol.for("react.lazy"),Ia=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function Ka(_e){return _e===null||typeof _e!="object"?null:(_e=Ja&&_e[Ja]||_e["@@iterator"],typeof _e=="function"?_e:null)}var A$3=Object.assign,La;function Ma(_e){if(La===void 0)try{throw Error()}catch(tt){var et=tt.stack.trim().match(/\n( *(at )?)/);La=et&&et[1]||""}return`
`+La+_e}var Na=!1;function Oa(_e,et){if(!_e||Na)return"";Na=!0;var tt=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(et)if(et=function(){throw Error()},Object.defineProperty(et.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(et,[])}catch(gt){var rt=gt}Reflect.construct(_e,[],et)}else{try{et.call()}catch(gt){rt=gt}_e.call(et.prototype)}else{try{throw Error()}catch(gt){rt=gt}_e()}}catch(gt){if(gt&&rt&&typeof gt.stack=="string"){for(var it=gt.stack.split(`
`),st=rt.stack.split(`
`),ut=it.length-1,ht=st.length-1;1<=ut&&0<=ht&&it[ut]!==st[ht];)ht--;for(;1<=ut&&0<=ht;ut--,ht--)if(it[ut]!==st[ht]){if(ut!==1||ht!==1)do if(ut--,ht--,0>ht||it[ut]!==st[ht]){var at=`
`+it[ut].replace(" at new "," at ");return _e.displayName&&at.includes("<anonymous>")&&(at=at.replace("<anonymous>",_e.displayName)),at}while(1<=ut&&0<=ht);break}}}finally{Na=!1,Error.prepareStackTrace=tt}return(_e=_e?_e.displayName||_e.name:"")?Ma(_e):""}function Pa(_e){switch(_e.tag){case 5:return Ma(_e.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return _e=Oa(_e.type,!1),_e;case 11:return _e=Oa(_e.type.render,!1),_e;case 1:return _e=Oa(_e.type,!0),_e;default:return""}}function Qa(_e){if(_e==null)return null;if(typeof _e=="function")return _e.displayName||_e.name||null;if(typeof _e=="string")return _e;switch(_e){case ya:return"Fragment";case wa:return"Portal";case Aa:return"Profiler";case za:return"StrictMode";case Ea:return"Suspense";case Fa:return"SuspenseList"}if(typeof _e=="object")switch(_e.$$typeof){case Ca:return(_e.displayName||"Context")+".Consumer";case Ba:return(_e._context.displayName||"Context")+".Provider";case Da:var et=_e.render;return _e=_e.displayName,_e||(_e=et.displayName||et.name||"",_e=_e!==""?"ForwardRef("+_e+")":"ForwardRef"),_e;case Ga:return et=_e.displayName||null,et!==null?et:Qa(_e.type)||"Memo";case Ha:et=_e._payload,_e=_e._init;try{return Qa(_e(et))}catch{}}return null}function Ra(_e){var et=_e.type;switch(_e.tag){case 24:return"Cache";case 9:return(et.displayName||"Context")+".Consumer";case 10:return(et._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return _e=et.render,_e=_e.displayName||_e.name||"",et.displayName||(_e!==""?"ForwardRef("+_e+")":"ForwardRef");case 7:return"Fragment";case 5:return et;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa(et);case 8:return et===za?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof et=="function")return et.displayName||et.name||null;if(typeof et=="string")return et}return null}function Sa(_e){switch(typeof _e){case"boolean":case"number":case"string":case"undefined":return _e;case"object":return _e;default:return""}}function Ta(_e){var et=_e.type;return(_e=_e.nodeName)&&_e.toLowerCase()==="input"&&(et==="checkbox"||et==="radio")}function Ua(_e){var et=Ta(_e)?"checked":"value",tt=Object.getOwnPropertyDescriptor(_e.constructor.prototype,et),rt=""+_e[et];if(!_e.hasOwnProperty(et)&&typeof tt<"u"&&typeof tt.get=="function"&&typeof tt.set=="function"){var it=tt.get,st=tt.set;return Object.defineProperty(_e,et,{configurable:!0,get:function(){return it.call(this)},set:function(ut){rt=""+ut,st.call(this,ut)}}),Object.defineProperty(_e,et,{enumerable:tt.enumerable}),{getValue:function(){return rt},setValue:function(ut){rt=""+ut},stopTracking:function(){_e._valueTracker=null,delete _e[et]}}}}function Va(_e){_e._valueTracker||(_e._valueTracker=Ua(_e))}function Wa(_e){if(!_e)return!1;var et=_e._valueTracker;if(!et)return!0;var tt=et.getValue(),rt="";return _e&&(rt=Ta(_e)?_e.checked?"true":"false":_e.value),_e=rt,_e!==tt?(et.setValue(_e),!0):!1}function Xa(_e){if(_e=_e||(typeof document<"u"?document:void 0),typeof _e>"u")return null;try{return _e.activeElement||_e.body}catch{return _e.body}}function Ya(_e,et){var tt=et.checked;return A$3({},et,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:tt??_e._wrapperState.initialChecked})}function Za(_e,et){var tt=et.defaultValue==null?"":et.defaultValue,rt=et.checked!=null?et.checked:et.defaultChecked;tt=Sa(et.value!=null?et.value:tt),_e._wrapperState={initialChecked:rt,initialValue:tt,controlled:et.type==="checkbox"||et.type==="radio"?et.checked!=null:et.value!=null}}function ab(_e,et){et=et.checked,et!=null&&ta(_e,"checked",et,!1)}function bb(_e,et){ab(_e,et);var tt=Sa(et.value),rt=et.type;if(tt!=null)rt==="number"?(tt===0&&_e.value===""||_e.value!=tt)&&(_e.value=""+tt):_e.value!==""+tt&&(_e.value=""+tt);else if(rt==="submit"||rt==="reset"){_e.removeAttribute("value");return}et.hasOwnProperty("value")?cb(_e,et.type,tt):et.hasOwnProperty("defaultValue")&&cb(_e,et.type,Sa(et.defaultValue)),et.checked==null&&et.defaultChecked!=null&&(_e.defaultChecked=!!et.defaultChecked)}function db(_e,et,tt){if(et.hasOwnProperty("value")||et.hasOwnProperty("defaultValue")){var rt=et.type;if(!(rt!=="submit"&&rt!=="reset"||et.value!==void 0&&et.value!==null))return;et=""+_e._wrapperState.initialValue,tt||et===_e.value||(_e.value=et),_e.defaultValue=et}tt=_e.name,tt!==""&&(_e.name=""),_e.defaultChecked=!!_e._wrapperState.initialChecked,tt!==""&&(_e.name=tt)}function cb(_e,et,tt){(et!=="number"||Xa(_e.ownerDocument)!==_e)&&(tt==null?_e.defaultValue=""+_e._wrapperState.initialValue:_e.defaultValue!==""+tt&&(_e.defaultValue=""+tt))}var eb=Array.isArray;function fb(_e,et,tt,rt){if(_e=_e.options,et){et={};for(var it=0;it<tt.length;it++)et["$"+tt[it]]=!0;for(tt=0;tt<_e.length;tt++)it=et.hasOwnProperty("$"+_e[tt].value),_e[tt].selected!==it&&(_e[tt].selected=it),it&&rt&&(_e[tt].defaultSelected=!0)}else{for(tt=""+Sa(tt),et=null,it=0;it<_e.length;it++){if(_e[it].value===tt){_e[it].selected=!0,rt&&(_e[it].defaultSelected=!0);return}et!==null||_e[it].disabled||(et=_e[it])}et!==null&&(et.selected=!0)}}function gb(_e,et){if(et.dangerouslySetInnerHTML!=null)throw Error(p$3(91));return A$3({},et,{value:void 0,defaultValue:void 0,children:""+_e._wrapperState.initialValue})}function hb(_e,et){var tt=et.value;if(tt==null){if(tt=et.children,et=et.defaultValue,tt!=null){if(et!=null)throw Error(p$3(92));if(eb(tt)){if(1<tt.length)throw Error(p$3(93));tt=tt[0]}et=tt}et==null&&(et=""),tt=et}_e._wrapperState={initialValue:Sa(tt)}}function ib(_e,et){var tt=Sa(et.value),rt=Sa(et.defaultValue);tt!=null&&(tt=""+tt,tt!==_e.value&&(_e.value=tt),et.defaultValue==null&&_e.defaultValue!==tt&&(_e.defaultValue=tt)),rt!=null&&(_e.defaultValue=""+rt)}function jb(_e){var et=_e.textContent;et===_e._wrapperState.initialValue&&et!==""&&et!==null&&(_e.value=et)}function kb(_e){switch(_e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb(_e,et){return _e==null||_e==="http://www.w3.org/1999/xhtml"?kb(et):_e==="http://www.w3.org/2000/svg"&&et==="foreignObject"?"http://www.w3.org/1999/xhtml":_e}var mb,nb=function(_e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(et,tt,rt,it){MSApp.execUnsafeLocalFunction(function(){return _e(et,tt,rt,it)})}:_e}(function(_e,et){if(_e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in _e)_e.innerHTML=et;else{for(mb=mb||document.createElement("div"),mb.innerHTML="<svg>"+et.valueOf().toString()+"</svg>",et=mb.firstChild;_e.firstChild;)_e.removeChild(_e.firstChild);for(;et.firstChild;)_e.appendChild(et.firstChild)}});function ob(_e,et){if(et){var tt=_e.firstChild;if(tt&&tt===_e.lastChild&&tt.nodeType===3){tt.nodeValue=et;return}}_e.textContent=et}var pb={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb=["Webkit","ms","Moz","O"];Object.keys(pb).forEach(function(_e){qb.forEach(function(et){et=et+_e.charAt(0).toUpperCase()+_e.substring(1),pb[et]=pb[_e]})});function rb(_e,et,tt){return et==null||typeof et=="boolean"||et===""?"":tt||typeof et!="number"||et===0||pb.hasOwnProperty(_e)&&pb[_e]?(""+et).trim():et+"px"}function sb(_e,et){_e=_e.style;for(var tt in et)if(et.hasOwnProperty(tt)){var rt=tt.indexOf("--")===0,it=rb(tt,et[tt],rt);tt==="float"&&(tt="cssFloat"),rt?_e.setProperty(tt,it):_e[tt]=it}}var tb=A$3({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub(_e,et){if(et){if(tb[_e]&&(et.children!=null||et.dangerouslySetInnerHTML!=null))throw Error(p$3(137,_e));if(et.dangerouslySetInnerHTML!=null){if(et.children!=null)throw Error(p$3(60));if(typeof et.dangerouslySetInnerHTML!="object"||!("__html"in et.dangerouslySetInnerHTML))throw Error(p$3(61))}if(et.style!=null&&typeof et.style!="object")throw Error(p$3(62))}}function vb(_e,et){if(_e.indexOf("-")===-1)return typeof et.is=="string";switch(_e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb=null;function xb(_e){return _e=_e.target||_e.srcElement||window,_e.correspondingUseElement&&(_e=_e.correspondingUseElement),_e.nodeType===3?_e.parentNode:_e}var yb=null,zb=null,Ab=null;function Bb(_e){if(_e=Cb(_e)){if(typeof yb!="function")throw Error(p$3(280));var et=_e.stateNode;et&&(et=Db(et),yb(_e.stateNode,_e.type,et))}}function Eb(_e){zb?Ab?Ab.push(_e):Ab=[_e]:zb=_e}function Fb(){if(zb){var _e=zb,et=Ab;if(Ab=zb=null,Bb(_e),et)for(_e=0;_e<et.length;_e++)Bb(et[_e])}}function Gb(_e,et){return _e(et)}function Hb(){}var Ib=!1;function Jb(_e,et,tt){if(Ib)return _e(et,tt);Ib=!0;try{return Gb(_e,et,tt)}finally{Ib=!1,(zb!==null||Ab!==null)&&(Hb(),Fb())}}function Kb(_e,et){var tt=_e.stateNode;if(tt===null)return null;var rt=Db(tt);if(rt===null)return null;tt=rt[et];e:switch(et){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(rt=!rt.disabled)||(_e=_e.type,rt=!(_e==="button"||_e==="input"||_e==="select"||_e==="textarea")),_e=!rt;break e;default:_e=!1}if(_e)return null;if(tt&&typeof tt!="function")throw Error(p$3(231,et,typeof tt));return tt}var Lb=!1;if(ia)try{var Mb={};Object.defineProperty(Mb,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",Mb,Mb),window.removeEventListener("test",Mb,Mb)}catch{Lb=!1}function Nb(_e,et,tt,rt,it,st,ut,ht,at){var gt=Array.prototype.slice.call(arguments,3);try{et.apply(tt,gt)}catch(bt){this.onError(bt)}}var Ob=!1,Pb=null,Qb=!1,Rb=null,Sb={onError:function(_e){Ob=!0,Pb=_e}};function Tb(_e,et,tt,rt,it,st,ut,ht,at){Ob=!1,Pb=null,Nb.apply(Sb,arguments)}function Ub(_e,et,tt,rt,it,st,ut,ht,at){if(Tb.apply(this,arguments),Ob){if(Ob){var gt=Pb;Ob=!1,Pb=null}else throw Error(p$3(198));Qb||(Qb=!0,Rb=gt)}}function Vb(_e){var et=_e,tt=_e;if(_e.alternate)for(;et.return;)et=et.return;else{_e=et;do et=_e,et.flags&4098&&(tt=et.return),_e=et.return;while(_e)}return et.tag===3?tt:null}function Wb(_e){if(_e.tag===13){var et=_e.memoizedState;if(et===null&&(_e=_e.alternate,_e!==null&&(et=_e.memoizedState)),et!==null)return et.dehydrated}return null}function Xb(_e){if(Vb(_e)!==_e)throw Error(p$3(188))}function Yb(_e){var et=_e.alternate;if(!et){if(et=Vb(_e),et===null)throw Error(p$3(188));return et!==_e?null:_e}for(var tt=_e,rt=et;;){var it=tt.return;if(it===null)break;var st=it.alternate;if(st===null){if(rt=it.return,rt!==null){tt=rt;continue}break}if(it.child===st.child){for(st=it.child;st;){if(st===tt)return Xb(it),_e;if(st===rt)return Xb(it),et;st=st.sibling}throw Error(p$3(188))}if(tt.return!==rt.return)tt=it,rt=st;else{for(var ut=!1,ht=it.child;ht;){if(ht===tt){ut=!0,tt=it,rt=st;break}if(ht===rt){ut=!0,rt=it,tt=st;break}ht=ht.sibling}if(!ut){for(ht=st.child;ht;){if(ht===tt){ut=!0,tt=st,rt=it;break}if(ht===rt){ut=!0,rt=st,tt=it;break}ht=ht.sibling}if(!ut)throw Error(p$3(189))}}if(tt.alternate!==rt)throw Error(p$3(190))}if(tt.tag!==3)throw Error(p$3(188));return tt.stateNode.current===tt?_e:et}function Zb(_e){return _e=Yb(_e),_e!==null?$b(_e):null}function $b(_e){if(_e.tag===5||_e.tag===6)return _e;for(_e=_e.child;_e!==null;){var et=$b(_e);if(et!==null)return et;_e=_e.sibling}return null}var ac=ca.unstable_scheduleCallback,bc=ca.unstable_cancelCallback,cc=ca.unstable_shouldYield,dc=ca.unstable_requestPaint,B$1=ca.unstable_now,ec=ca.unstable_getCurrentPriorityLevel,fc=ca.unstable_ImmediatePriority,gc=ca.unstable_UserBlockingPriority,hc=ca.unstable_NormalPriority,ic=ca.unstable_LowPriority,jc=ca.unstable_IdlePriority,kc=null,lc=null;function mc(_e){if(lc&&typeof lc.onCommitFiberRoot=="function")try{lc.onCommitFiberRoot(kc,_e,void 0,(_e.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:nc,pc=Math.log,qc=Math.LN2;function nc(_e){return _e>>>=0,_e===0?32:31-(pc(_e)/qc|0)|0}var rc=64,sc=4194304;function tc(_e){switch(_e&-_e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return _e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return _e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return _e}}function uc(_e,et){var tt=_e.pendingLanes;if(tt===0)return 0;var rt=0,it=_e.suspendedLanes,st=_e.pingedLanes,ut=tt&268435455;if(ut!==0){var ht=ut&~it;ht!==0?rt=tc(ht):(st&=ut,st!==0&&(rt=tc(st)))}else ut=tt&~it,ut!==0?rt=tc(ut):st!==0&&(rt=tc(st));if(rt===0)return 0;if(et!==0&&et!==rt&&!(et&it)&&(it=rt&-rt,st=et&-et,it>=st||it===16&&(st&4194240)!==0))return et;if(rt&4&&(rt|=tt&16),et=_e.entangledLanes,et!==0)for(_e=_e.entanglements,et&=rt;0<et;)tt=31-oc(et),it=1<<tt,rt|=_e[tt],et&=~it;return rt}function vc(_e,et){switch(_e){case 1:case 2:case 4:return et+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return et+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc(_e,et){for(var tt=_e.suspendedLanes,rt=_e.pingedLanes,it=_e.expirationTimes,st=_e.pendingLanes;0<st;){var ut=31-oc(st),ht=1<<ut,at=it[ut];at===-1?(!(ht&tt)||ht&rt)&&(it[ut]=vc(ht,et)):at<=et&&(_e.expiredLanes|=ht),st&=~ht}}function xc(_e){return _e=_e.pendingLanes&-1073741825,_e!==0?_e:_e&1073741824?1073741824:0}function yc(){var _e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),_e}function zc(_e){for(var et=[],tt=0;31>tt;tt++)et.push(_e);return et}function Ac(_e,et,tt){_e.pendingLanes|=et,et!==536870912&&(_e.suspendedLanes=0,_e.pingedLanes=0),_e=_e.eventTimes,et=31-oc(et),_e[et]=tt}function Bc(_e,et){var tt=_e.pendingLanes&~et;_e.pendingLanes=et,_e.suspendedLanes=0,_e.pingedLanes=0,_e.expiredLanes&=et,_e.mutableReadLanes&=et,_e.entangledLanes&=et,et=_e.entanglements;var rt=_e.eventTimes;for(_e=_e.expirationTimes;0<tt;){var it=31-oc(tt),st=1<<it;et[it]=0,rt[it]=-1,_e[it]=-1,tt&=~st}}function Cc(_e,et){var tt=_e.entangledLanes|=et;for(_e=_e.entanglements;tt;){var rt=31-oc(tt),it=1<<rt;it&et|_e[rt]&et&&(_e[rt]|=et),tt&=~it}}var C$1=0;function Dc(_e){return _e&=-_e,1<_e?4<_e?_e&268435455?16:536870912:4:1}var Ec,Fc,Gc,Hc,Ic,Jc=!1,Kc=[],Lc=null,Mc=null,Nc=null,Oc=new Map,Pc=new Map,Qc=[],Rc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc(_e,et){switch(_e){case"focusin":case"focusout":Lc=null;break;case"dragenter":case"dragleave":Mc=null;break;case"mouseover":case"mouseout":Nc=null;break;case"pointerover":case"pointerout":Oc.delete(et.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc.delete(et.pointerId)}}function Tc(_e,et,tt,rt,it,st){return _e===null||_e.nativeEvent!==st?(_e={blockedOn:et,domEventName:tt,eventSystemFlags:rt,nativeEvent:st,targetContainers:[it]},et!==null&&(et=Cb(et),et!==null&&Fc(et)),_e):(_e.eventSystemFlags|=rt,et=_e.targetContainers,it!==null&&et.indexOf(it)===-1&&et.push(it),_e)}function Uc(_e,et,tt,rt,it){switch(et){case"focusin":return Lc=Tc(Lc,_e,et,tt,rt,it),!0;case"dragenter":return Mc=Tc(Mc,_e,et,tt,rt,it),!0;case"mouseover":return Nc=Tc(Nc,_e,et,tt,rt,it),!0;case"pointerover":var st=it.pointerId;return Oc.set(st,Tc(Oc.get(st)||null,_e,et,tt,rt,it)),!0;case"gotpointercapture":return st=it.pointerId,Pc.set(st,Tc(Pc.get(st)||null,_e,et,tt,rt,it)),!0}return!1}function Vc(_e){var et=Wc(_e.target);if(et!==null){var tt=Vb(et);if(tt!==null){if(et=tt.tag,et===13){if(et=Wb(tt),et!==null){_e.blockedOn=et,Ic(_e.priority,function(){Gc(tt)});return}}else if(et===3&&tt.stateNode.current.memoizedState.isDehydrated){_e.blockedOn=tt.tag===3?tt.stateNode.containerInfo:null;return}}}_e.blockedOn=null}function Xc(_e){if(_e.blockedOn!==null)return!1;for(var et=_e.targetContainers;0<et.length;){var tt=Yc(_e.domEventName,_e.eventSystemFlags,et[0],_e.nativeEvent);if(tt===null){tt=_e.nativeEvent;var rt=new tt.constructor(tt.type,tt);wb=rt,tt.target.dispatchEvent(rt),wb=null}else return et=Cb(tt),et!==null&&Fc(et),_e.blockedOn=tt,!1;et.shift()}return!0}function Zc(_e,et,tt){Xc(_e)&&tt.delete(et)}function $c(){Jc=!1,Lc!==null&&Xc(Lc)&&(Lc=null),Mc!==null&&Xc(Mc)&&(Mc=null),Nc!==null&&Xc(Nc)&&(Nc=null),Oc.forEach(Zc),Pc.forEach(Zc)}function ad(_e,et){_e.blockedOn===et&&(_e.blockedOn=null,Jc||(Jc=!0,ca.unstable_scheduleCallback(ca.unstable_NormalPriority,$c)))}function bd(_e){function et(it){return ad(it,_e)}if(0<Kc.length){ad(Kc[0],_e);for(var tt=1;tt<Kc.length;tt++){var rt=Kc[tt];rt.blockedOn===_e&&(rt.blockedOn=null)}}for(Lc!==null&&ad(Lc,_e),Mc!==null&&ad(Mc,_e),Nc!==null&&ad(Nc,_e),Oc.forEach(et),Pc.forEach(et),tt=0;tt<Qc.length;tt++)rt=Qc[tt],rt.blockedOn===_e&&(rt.blockedOn=null);for(;0<Qc.length&&(tt=Qc[0],tt.blockedOn===null);)Vc(tt),tt.blockedOn===null&&Qc.shift()}var cd=ua$1.ReactCurrentBatchConfig,dd=!0;function ed(_e,et,tt,rt){var it=C$1,st=cd.transition;cd.transition=null;try{C$1=1,fd(_e,et,tt,rt)}finally{C$1=it,cd.transition=st}}function gd(_e,et,tt,rt){var it=C$1,st=cd.transition;cd.transition=null;try{C$1=4,fd(_e,et,tt,rt)}finally{C$1=it,cd.transition=st}}function fd(_e,et,tt,rt){if(dd){var it=Yc(_e,et,tt,rt);if(it===null)hd(_e,et,rt,id$1,tt),Sc(_e,rt);else if(Uc(it,_e,et,tt,rt))rt.stopPropagation();else if(Sc(_e,rt),et&4&&-1<Rc.indexOf(_e)){for(;it!==null;){var st=Cb(it);if(st!==null&&Ec(st),st=Yc(_e,et,tt,rt),st===null&&hd(_e,et,rt,id$1,tt),st===it)break;it=st}it!==null&&rt.stopPropagation()}else hd(_e,et,rt,null,tt)}}var id$1=null;function Yc(_e,et,tt,rt){if(id$1=null,_e=xb(rt),_e=Wc(_e),_e!==null)if(et=Vb(_e),et===null)_e=null;else if(tt=et.tag,tt===13){if(_e=Wb(et),_e!==null)return _e;_e=null}else if(tt===3){if(et.stateNode.current.memoizedState.isDehydrated)return et.tag===3?et.stateNode.containerInfo:null;_e=null}else et!==_e&&(_e=null);return id$1=_e,null}function jd(_e){switch(_e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec()){case fc:return 1;case gc:return 4;case hc:case ic:return 16;case jc:return 536870912;default:return 16}default:return 16}}var kd=null,ld=null,md=null;function nd(){if(md)return md;var _e,et=ld,tt=et.length,rt,it="value"in kd?kd.value:kd.textContent,st=it.length;for(_e=0;_e<tt&&et[_e]===it[_e];_e++);var ut=tt-_e;for(rt=1;rt<=ut&&et[tt-rt]===it[st-rt];rt++);return md=it.slice(_e,1<rt?1-rt:void 0)}function od(_e){var et=_e.keyCode;return"charCode"in _e?(_e=_e.charCode,_e===0&&et===13&&(_e=13)):_e=et,_e===10&&(_e=13),32<=_e||_e===13?_e:0}function pd(){return!0}function qd(){return!1}function rd(_e){function et(tt,rt,it,st,ut){this._reactName=tt,this._targetInst=it,this.type=rt,this.nativeEvent=st,this.target=ut,this.currentTarget=null;for(var ht in _e)_e.hasOwnProperty(ht)&&(tt=_e[ht],this[ht]=tt?tt(st):st[ht]);return this.isDefaultPrevented=(st.defaultPrevented!=null?st.defaultPrevented:st.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return A$3(et.prototype,{preventDefault:function(){this.defaultPrevented=!0;var tt=this.nativeEvent;tt&&(tt.preventDefault?tt.preventDefault():typeof tt.returnValue!="unknown"&&(tt.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var tt=this.nativeEvent;tt&&(tt.stopPropagation?tt.stopPropagation():typeof tt.cancelBubble!="unknown"&&(tt.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),et}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(_e){return _e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=A$3({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=A$3({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(_e){return _e.relatedTarget===void 0?_e.fromElement===_e.srcElement?_e.toElement:_e.fromElement:_e.relatedTarget},movementX:function(_e){return"movementX"in _e?_e.movementX:(_e!==yd&&(yd&&_e.type==="mousemove"?(wd=_e.screenX-yd.screenX,xd=_e.screenY-yd.screenY):xd=wd=0,yd=_e),wd)},movementY:function(_e){return"movementY"in _e?_e.movementY:xd}}),Bd=rd(Ad),Cd=A$3({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=A$3({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=A$3({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=A$3({},sd,{clipboardData:function(_e){return"clipboardData"in _e?_e.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=A$3({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(_e){var et=this.nativeEvent;return et.getModifierState?et.getModifierState(_e):(_e=Od[_e])?!!et[_e]:!1}function zd(){return Pd}var Qd=A$3({},ud,{key:function(_e){if(_e.key){var et=Md[_e.key]||_e.key;if(et!=="Unidentified")return et}return _e.type==="keypress"?(_e=od(_e),_e===13?"Enter":String.fromCharCode(_e)):_e.type==="keydown"||_e.type==="keyup"?Nd[_e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(_e){return _e.type==="keypress"?od(_e):0},keyCode:function(_e){return _e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0},which:function(_e){return _e.type==="keypress"?od(_e):_e.type==="keydown"||_e.type==="keyup"?_e.keyCode:0}}),Rd=rd(Qd),Sd=A$3({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=A$3({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=A$3({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=A$3({},Ad,{deltaX:function(_e){return"deltaX"in _e?_e.deltaX:"wheelDeltaX"in _e?-_e.wheelDeltaX:0},deltaY:function(_e){return"deltaY"in _e?_e.deltaY:"wheelDeltaY"in _e?-_e.wheelDeltaY:"wheelDelta"in _e?-_e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae=ia&&"CompositionEvent"in window,be$1=null;ia&&"documentMode"in document&&(be$1=document.documentMode);var ce=ia&&"TextEvent"in window&&!be$1,de$1=ia&&(!ae||be$1&&8<be$1&&11>=be$1),ee$2=" ",fe$1=!1;function ge$1(_e,et){switch(_e){case"keyup":return $d.indexOf(et.keyCode)!==-1;case"keydown":return et.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(_e){return _e=_e.detail,typeof _e=="object"&&"data"in _e?_e.data:null}var ie=!1;function je(_e,et){switch(_e){case"compositionend":return he$1(et);case"keypress":return et.which!==32?null:(fe$1=!0,ee$2);case"textInput":return _e=et.data,_e===ee$2&&fe$1?null:_e;default:return null}}function ke(_e,et){if(ie)return _e==="compositionend"||!ae&&ge$1(_e,et)?(_e=nd(),md=ld=kd=null,ie=!1,_e):null;switch(_e){case"paste":return null;case"keypress":if(!(et.ctrlKey||et.altKey||et.metaKey)||et.ctrlKey&&et.altKey){if(et.char&&1<et.char.length)return et.char;if(et.which)return String.fromCharCode(et.which)}return null;case"compositionend":return de$1&&et.locale!=="ko"?null:et.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et==="input"?!!le$1[_e.type]:et==="textarea"}function ne$1(_e,et,tt,rt){Eb(rt),et=oe$1(et,"onChange"),0<et.length&&(tt=new td("onChange","change",null,tt,rt),_e.push({event:tt,listeners:et}))}var pe$1=null,qe=null;function re$2(_e){se$1(_e,0)}function te$1(_e){var et=ue$1(_e);if(Wa(et))return _e}function ve$1(_e,et){if(_e==="change")return et}var we=!1;if(ia){var xe$1;if(ia){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(_e){if(_e.propertyName==="value"&&te$1(qe)){var et=[];ne$1(et,qe,_e,xb(_e)),Jb(re$2,et)}}function Ce(_e,et,tt){_e==="focusin"?(Ae$1(),pe$1=et,qe=tt,pe$1.attachEvent("onpropertychange",Be)):_e==="focusout"&&Ae$1()}function De(_e){if(_e==="selectionchange"||_e==="keyup"||_e==="keydown")return te$1(qe)}function Ee$1(_e,et){if(_e==="click")return te$1(et)}function Fe(_e,et){if(_e==="input"||_e==="change")return te$1(et)}function Ge(_e,et){return _e===et&&(_e!==0||1/_e===1/et)||_e!==_e&&et!==et}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(_e,et){if(He(_e,et))return!0;if(typeof _e!="object"||_e===null||typeof et!="object"||et===null)return!1;var tt=Object.keys(_e),rt=Object.keys(et);if(tt.length!==rt.length)return!1;for(rt=0;rt<tt.length;rt++){var it=tt[rt];if(!ja.call(et,it)||!He(_e[it],et[it]))return!1}return!0}function Je(_e){for(;_e&&_e.firstChild;)_e=_e.firstChild;return _e}function Ke(_e,et){var tt=Je(_e);_e=0;for(var rt;tt;){if(tt.nodeType===3){if(rt=_e+tt.textContent.length,_e<=et&&rt>=et)return{node:tt,offset:et-_e};_e=rt}e:{for(;tt;){if(tt.nextSibling){tt=tt.nextSibling;break e}tt=tt.parentNode}tt=void 0}tt=Je(tt)}}function Le(_e,et){return _e&&et?_e===et?!0:_e&&_e.nodeType===3?!1:et&&et.nodeType===3?Le(_e,et.parentNode):"contains"in _e?_e.contains(et):_e.compareDocumentPosition?!!(_e.compareDocumentPosition(et)&16):!1:!1}function Me(){for(var _e=window,et=Xa();et instanceof _e.HTMLIFrameElement;){try{var tt=typeof et.contentWindow.location.href=="string"}catch{tt=!1}if(tt)_e=et.contentWindow;else break;et=Xa(_e.document)}return et}function Ne(_e){var et=_e&&_e.nodeName&&_e.nodeName.toLowerCase();return et&&(et==="input"&&(_e.type==="text"||_e.type==="search"||_e.type==="tel"||_e.type==="url"||_e.type==="password")||et==="textarea"||_e.contentEditable==="true")}function Oe(_e){var et=Me(),tt=_e.focusedElem,rt=_e.selectionRange;if(et!==tt&&tt&&tt.ownerDocument&&Le(tt.ownerDocument.documentElement,tt)){if(rt!==null&&Ne(tt)){if(et=rt.start,_e=rt.end,_e===void 0&&(_e=et),"selectionStart"in tt)tt.selectionStart=et,tt.selectionEnd=Math.min(_e,tt.value.length);else if(_e=(et=tt.ownerDocument||document)&&et.defaultView||window,_e.getSelection){_e=_e.getSelection();var it=tt.textContent.length,st=Math.min(rt.start,it);rt=rt.end===void 0?st:Math.min(rt.end,it),!_e.extend&&st>rt&&(it=rt,rt=st,st=it),it=Ke(tt,st);var ut=Ke(tt,rt);it&&ut&&(_e.rangeCount!==1||_e.anchorNode!==it.node||_e.anchorOffset!==it.offset||_e.focusNode!==ut.node||_e.focusOffset!==ut.offset)&&(et=et.createRange(),et.setStart(it.node,it.offset),_e.removeAllRanges(),st>rt?(_e.addRange(et),_e.extend(ut.node,ut.offset)):(et.setEnd(ut.node,ut.offset),_e.addRange(et)))}}for(et=[],_e=tt;_e=_e.parentNode;)_e.nodeType===1&&et.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof tt.focus=="function"&&tt.focus(),tt=0;tt<et.length;tt++)_e=et[tt],_e.element.scrollLeft=_e.left,_e.element.scrollTop=_e.top}}var Pe=ia&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se$1=null,Te$1=!1;function Ue(_e,et,tt){var rt=tt.window===tt?tt.document:tt.nodeType===9?tt:tt.ownerDocument;Te$1||Qe==null||Qe!==Xa(rt)||(rt=Qe,"selectionStart"in rt&&Ne(rt)?rt={start:rt.selectionStart,end:rt.selectionEnd}:(rt=(rt.ownerDocument&&rt.ownerDocument.defaultView||window).getSelection(),rt={anchorNode:rt.anchorNode,anchorOffset:rt.anchorOffset,focusNode:rt.focusNode,focusOffset:rt.focusOffset}),Se$1&&Ie$1(Se$1,rt)||(Se$1=rt,rt=oe$1(Re$1,"onSelect"),0<rt.length&&(et=new td("onSelect","select",null,et,tt),_e.push({event:et,listeners:rt}),et.target=Qe)))}function Ve(_e,et){var tt={};return tt[_e.toLowerCase()]=et.toLowerCase(),tt["Webkit"+_e]="webkit"+et,tt["Moz"+_e]="moz"+et,tt}var We={animationend:Ve("Animation","AnimationEnd"),animationiteration:Ve("Animation","AnimationIteration"),animationstart:Ve("Animation","AnimationStart"),transitionend:Ve("Transition","TransitionEnd")},Xe={},Ye={};ia&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(_e){if(Xe[_e])return Xe[_e];if(!We[_e])return _e;var et=We[_e],tt;for(tt in et)if(et.hasOwnProperty(tt)&&tt in Ye)return Xe[_e]=et[tt];return _e}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(_e,et){df.set(_e,et),fa(et,[_e])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(_e,et,tt){var rt=_e.type||"unknown-event";_e.currentTarget=tt,Ub(rt,et,void 0,_e),_e.currentTarget=null}function se$1(_e,et){et=(et&4)!==0;for(var tt=0;tt<_e.length;tt++){var rt=_e[tt],it=rt.event;rt=rt.listeners;e:{var st=void 0;if(et)for(var ut=rt.length-1;0<=ut;ut--){var ht=rt[ut],at=ht.instance,gt=ht.currentTarget;if(ht=ht.listener,at!==st&&it.isPropagationStopped())break e;nf(it,ht,gt),st=at}else for(ut=0;ut<rt.length;ut++){if(ht=rt[ut],at=ht.instance,gt=ht.currentTarget,ht=ht.listener,at!==st&&it.isPropagationStopped())break e;nf(it,ht,gt),st=at}}}if(Qb)throw _e=Rb,Qb=!1,Rb=null,_e}function D$2(_e,et){var tt=et[of];tt===void 0&&(tt=et[of]=new Set);var rt=_e+"__bubble";tt.has(rt)||(pf(et,_e,2,!1),tt.add(rt))}function qf(_e,et,tt){var rt=0;et&&(rt|=4),pf(tt,_e,rt,et)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(_e){if(!_e[rf]){_e[rf]=!0,da.forEach(function(tt){tt!=="selectionchange"&&(mf.has(tt)||qf(tt,!1,_e),qf(tt,!0,_e))});var et=_e.nodeType===9?_e:_e.ownerDocument;et===null||et[rf]||(et[rf]=!0,qf("selectionchange",!1,et))}}function pf(_e,et,tt,rt){switch(jd(et)){case 1:var it=ed;break;case 4:it=gd;break;default:it=fd}tt=it.bind(null,et,tt,_e),it=void 0,!Lb||et!=="touchstart"&&et!=="touchmove"&&et!=="wheel"||(it=!0),rt?it!==void 0?_e.addEventListener(et,tt,{capture:!0,passive:it}):_e.addEventListener(et,tt,!0):it!==void 0?_e.addEventListener(et,tt,{passive:it}):_e.addEventListener(et,tt,!1)}function hd(_e,et,tt,rt,it){var st=rt;if(!(et&1)&&!(et&2)&&rt!==null)e:for(;;){if(rt===null)return;var ut=rt.tag;if(ut===3||ut===4){var ht=rt.stateNode.containerInfo;if(ht===it||ht.nodeType===8&&ht.parentNode===it)break;if(ut===4)for(ut=rt.return;ut!==null;){var at=ut.tag;if((at===3||at===4)&&(at=ut.stateNode.containerInfo,at===it||at.nodeType===8&&at.parentNode===it))return;ut=ut.return}for(;ht!==null;){if(ut=Wc(ht),ut===null)return;if(at=ut.tag,at===5||at===6){rt=st=ut;continue e}ht=ht.parentNode}}rt=rt.return}Jb(function(){var gt=st,bt=xb(tt),wt=[];e:{var St=df.get(_e);if(St!==void 0){var kt=td,Rt=_e;switch(_e){case"keypress":if(od(tt)===0)break e;case"keydown":case"keyup":kt=Rd;break;case"focusin":Rt="focus",kt=Fd;break;case"focusout":Rt="blur",kt=Fd;break;case"beforeblur":case"afterblur":kt=Fd;break;case"click":if(tt.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=Vd;break;case $e:case af:case bf:kt=Hd;break;case cf:kt=Xd;break;case"scroll":kt=vd;break;case"wheel":kt=Zd;break;case"copy":case"cut":case"paste":kt=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=Td}var It=(et&4)!==0,Dt=!It&&_e==="scroll",Mt=It?St!==null?St+"Capture":null:St;It=[];for(var $t=gt,jt;$t!==null;){jt=$t;var Nt=jt.stateNode;if(jt.tag===5&&Nt!==null&&(jt=Nt,Mt!==null&&(Nt=Kb($t,Mt),Nt!=null&&It.push(tf($t,Nt,jt)))),Dt)break;$t=$t.return}0<It.length&&(St=new kt(St,Rt,null,tt,bt),wt.push({event:St,listeners:It}))}}if(!(et&7)){e:{if(St=_e==="mouseover"||_e==="pointerover",kt=_e==="mouseout"||_e==="pointerout",St&&tt!==wb&&(Rt=tt.relatedTarget||tt.fromElement)&&(Wc(Rt)||Rt[uf]))break e;if((kt||St)&&(St=bt.window===bt?bt:(St=bt.ownerDocument)?St.defaultView||St.parentWindow:window,kt?(Rt=tt.relatedTarget||tt.toElement,kt=gt,Rt=Rt?Wc(Rt):null,Rt!==null&&(Dt=Vb(Rt),Rt!==Dt||Rt.tag!==5&&Rt.tag!==6)&&(Rt=null)):(kt=null,Rt=gt),kt!==Rt)){if(It=Bd,Nt="onMouseLeave",Mt="onMouseEnter",$t="mouse",(_e==="pointerout"||_e==="pointerover")&&(It=Td,Nt="onPointerLeave",Mt="onPointerEnter",$t="pointer"),Dt=kt==null?St:ue$1(kt),jt=Rt==null?St:ue$1(Rt),St=new It(Nt,$t+"leave",kt,tt,bt),St.target=Dt,St.relatedTarget=jt,Nt=null,Wc(bt)===gt&&(It=new It(Mt,$t+"enter",Rt,tt,bt),It.target=jt,It.relatedTarget=Dt,Nt=It),Dt=Nt,kt&&Rt)t:{for(It=kt,Mt=Rt,$t=0,jt=It;jt;jt=vf(jt))$t++;for(jt=0,Nt=Mt;Nt;Nt=vf(Nt))jt++;for(;0<$t-jt;)It=vf(It),$t--;for(;0<jt-$t;)Mt=vf(Mt),jt--;for(;$t--;){if(It===Mt||Mt!==null&&It===Mt.alternate)break t;It=vf(It),Mt=vf(Mt)}It=null}else It=null;kt!==null&&wf(wt,St,kt,It,!1),Rt!==null&&Dt!==null&&wf(wt,Dt,Rt,It,!0)}}e:{if(St=gt?ue$1(gt):window,kt=St.nodeName&&St.nodeName.toLowerCase(),kt==="select"||kt==="input"&&St.type==="file")var Ut=ve$1;else if(me(St))if(we)Ut=Fe;else{Ut=De;var Ht=Ce}else(kt=St.nodeName)&&kt.toLowerCase()==="input"&&(St.type==="checkbox"||St.type==="radio")&&(Ut=Ee$1);if(Ut&&(Ut=Ut(_e,gt))){ne$1(wt,Ut,tt,bt);break e}Ht&&Ht(_e,St,gt),_e==="focusout"&&(Ht=St._wrapperState)&&Ht.controlled&&St.type==="number"&&cb(St,"number",St.value)}switch(Ht=gt?ue$1(gt):window,_e){case"focusin":(me(Ht)||Ht.contentEditable==="true")&&(Qe=Ht,Re$1=gt,Se$1=null);break;case"focusout":Se$1=Re$1=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue(wt,tt,bt);break;case"selectionchange":if(Pe)break;case"keydown":case"keyup":Ue(wt,tt,bt)}var Kt;if(ae)e:{switch(_e){case"compositionstart":var tr="onCompositionStart";break e;case"compositionend":tr="onCompositionEnd";break e;case"compositionupdate":tr="onCompositionUpdate";break e}tr=void 0}else ie?ge$1(_e,tt)&&(tr="onCompositionEnd"):_e==="keydown"&&tt.keyCode===229&&(tr="onCompositionStart");tr&&(de$1&&tt.locale!=="ko"&&(ie||tr!=="onCompositionStart"?tr==="onCompositionEnd"&&ie&&(Kt=nd()):(kd=bt,ld="value"in kd?kd.value:kd.textContent,ie=!0)),Ht=oe$1(gt,tr),0<Ht.length&&(tr=new Ld(tr,_e,null,tt,bt),wt.push({event:tr,listeners:Ht}),Kt?tr.data=Kt:(Kt=he$1(tt),Kt!==null&&(tr.data=Kt)))),(Kt=ce?je(_e,tt):ke(_e,tt))&&(gt=oe$1(gt,"onBeforeInput"),0<gt.length&&(bt=new Ld("onBeforeInput","beforeinput",null,tt,bt),wt.push({event:bt,listeners:gt}),bt.data=Kt))}se$1(wt,et)})}function tf(_e,et,tt){return{instance:_e,listener:et,currentTarget:tt}}function oe$1(_e,et){for(var tt=et+"Capture",rt=[];_e!==null;){var it=_e,st=it.stateNode;it.tag===5&&st!==null&&(it=st,st=Kb(_e,tt),st!=null&&rt.unshift(tf(_e,st,it)),st=Kb(_e,et),st!=null&&rt.push(tf(_e,st,it))),_e=_e.return}return rt}function vf(_e){if(_e===null)return null;do _e=_e.return;while(_e&&_e.tag!==5);return _e||null}function wf(_e,et,tt,rt,it){for(var st=et._reactName,ut=[];tt!==null&&tt!==rt;){var ht=tt,at=ht.alternate,gt=ht.stateNode;if(at!==null&&at===rt)break;ht.tag===5&&gt!==null&&(ht=gt,it?(at=Kb(tt,st),at!=null&&ut.unshift(tf(tt,at,ht))):it||(at=Kb(tt,st),at!=null&&ut.push(tf(tt,at,ht)))),tt=tt.return}ut.length!==0&&_e.push({event:et,listeners:ut})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(_e){return(typeof _e=="string"?_e:""+_e).replace(xf,`
`).replace(yf,"")}function Af(_e,et,tt){if(et=zf(et),zf(_e)!==et&&tt)throw Error(p$3(425))}function Bf(){}var Cf=null,Df=null;function Ef(_e,et){return _e==="textarea"||_e==="noscript"||typeof et.children=="string"||typeof et.children=="number"||typeof et.dangerouslySetInnerHTML=="object"&&et.dangerouslySetInnerHTML!==null&&et.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(_e){return Hf.resolve(null).then(_e).catch(If)}:Ff;function If(_e){setTimeout(function(){throw _e})}function Kf(_e,et){var tt=et,rt=0;do{var it=tt.nextSibling;if(_e.removeChild(tt),it&&it.nodeType===8)if(tt=it.data,tt==="/$"){if(rt===0){_e.removeChild(it),bd(et);return}rt--}else tt!=="$"&&tt!=="$?"&&tt!=="$!"||rt++;tt=it}while(tt);bd(et)}function Lf(_e){for(;_e!=null;_e=_e.nextSibling){var et=_e.nodeType;if(et===1||et===3)break;if(et===8){if(et=_e.data,et==="$"||et==="$!"||et==="$?")break;if(et==="/$")return null}}return _e}function Mf(_e){_e=_e.previousSibling;for(var et=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="$"||tt==="$!"||tt==="$?"){if(et===0)return _e;et--}else tt==="/$"&&et++}_e=_e.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc(_e){var et=_e[Of];if(et)return et;for(var tt=_e.parentNode;tt;){if(et=tt[uf]||tt[Of]){if(tt=et.alternate,et.child!==null||tt!==null&&tt.child!==null)for(_e=Mf(_e);_e!==null;){if(tt=_e[Of])return tt;_e=Mf(_e)}return et}_e=tt,tt=_e.parentNode}return null}function Cb(_e){return _e=_e[Of]||_e[uf],!_e||_e.tag!==5&&_e.tag!==6&&_e.tag!==13&&_e.tag!==3?null:_e}function ue$1(_e){if(_e.tag===5||_e.tag===6)return _e.stateNode;throw Error(p$3(33))}function Db(_e){return _e[Pf]||null}var Sf=[],Tf=-1;function Uf(_e){return{current:_e}}function E$1(_e){0>Tf||(_e.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(_e,et){Tf++,Sf[Tf]=_e.current,_e.current=et}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(_e,et){var tt=_e.type.contextTypes;if(!tt)return Vf;var rt=_e.stateNode;if(rt&&rt.__reactInternalMemoizedUnmaskedChildContext===et)return rt.__reactInternalMemoizedMaskedChildContext;var it={},st;for(st in tt)it[st]=et[st];return rt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=et,_e.__reactInternalMemoizedMaskedChildContext=it),it}function Zf(_e){return _e=_e.childContextTypes,_e!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(_e,et,tt){if(H$1.current!==Vf)throw Error(p$3(168));G$2(H$1,et),G$2(Wf,tt)}function bg(_e,et,tt){var rt=_e.stateNode;if(et=et.childContextTypes,typeof rt.getChildContext!="function")return tt;rt=rt.getChildContext();for(var it in rt)if(!(it in et))throw Error(p$3(108,Ra(_e)||"Unknown",it));return A$3({},tt,rt)}function cg(_e){return _e=(_e=_e.stateNode)&&_e.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$2(H$1,_e),G$2(Wf,Wf.current),!0}function dg(_e,et,tt){var rt=_e.stateNode;if(!rt)throw Error(p$3(169));tt?(_e=bg(_e,et,Xf),rt.__reactInternalMemoizedMergedChildContext=_e,E$1(Wf),E$1(H$1),G$2(H$1,_e)):E$1(Wf),G$2(Wf,tt)}var eg=null,fg=!1,gg=!1;function hg(_e){eg===null?eg=[_e]:eg.push(_e)}function ig(_e){fg=!0,hg(_e)}function jg(){if(!gg&&eg!==null){gg=!0;var _e=0,et=C$1;try{var tt=eg;for(C$1=1;_e<tt.length;_e++){var rt=tt[_e];do rt=rt(!0);while(rt!==null)}eg=null,fg=!1}catch(it){throw eg!==null&&(eg=eg.slice(_e+1)),ac(fc,jg),it}finally{C$1=et,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(_e,et){kg[lg++]=ng,kg[lg++]=mg,mg=_e,ng=et}function ug(_e,et,tt){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=_e;var rt=rg;_e=sg;var it=32-oc(rt)-1;rt&=~(1<<it),tt+=1;var st=32-oc(et)+it;if(30<st){var ut=it-it%5;st=(rt&(1<<ut)-1).toString(32),rt>>=ut,it-=ut,rg=1<<32-oc(et)+it|tt<<it|rt,sg=st+_e}else rg=1<<st|tt<<it|rt,sg=_e}function vg(_e){_e.return!==null&&(tg(_e,1),ug(_e,1,0))}function wg(_e){for(;_e===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;_e===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(_e,et){var tt=Bg(5,null,null,0);tt.elementType="DELETED",tt.stateNode=et,tt.return=_e,et=_e.deletions,et===null?(_e.deletions=[tt],_e.flags|=16):et.push(tt)}function Cg(_e,et){switch(_e.tag){case 5:var tt=_e.type;return et=et.nodeType!==1||tt.toLowerCase()!==et.nodeName.toLowerCase()?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=Lf(et.firstChild),!0):!1;case 6:return et=_e.pendingProps===""||et.nodeType!==3?null:et,et!==null?(_e.stateNode=et,xg=_e,yg=null,!0):!1;case 13:return et=et.nodeType!==8?null:et,et!==null?(tt=qg!==null?{id:rg,overflow:sg}:null,_e.memoizedState={dehydrated:et,treeContext:tt,retryLane:1073741824},tt=Bg(18,null,null,0),tt.stateNode=et,tt.return=_e,_e.child=tt,xg=_e,yg=null,!0):!1;default:return!1}}function Dg(_e){return(_e.mode&1)!==0&&(_e.flags&128)===0}function Eg(_e){if(I$2){var et=yg;if(et){var tt=et;if(!Cg(_e,et)){if(Dg(_e))throw Error(p$3(418));et=Lf(tt.nextSibling);var rt=xg;et&&Cg(_e,et)?Ag(rt,tt):(_e.flags=_e.flags&-4097|2,I$2=!1,xg=_e)}}else{if(Dg(_e))throw Error(p$3(418));_e.flags=_e.flags&-4097|2,I$2=!1,xg=_e}}}function Fg(_e){for(_e=_e.return;_e!==null&&_e.tag!==5&&_e.tag!==3&&_e.tag!==13;)_e=_e.return;xg=_e}function Gg(_e){if(_e!==xg)return!1;if(!I$2)return Fg(_e),I$2=!0,!1;var et;if((et=_e.tag!==3)&&!(et=_e.tag!==5)&&(et=_e.type,et=et!=="head"&&et!=="body"&&!Ef(_e.type,_e.memoizedProps)),et&&(et=yg)){if(Dg(_e))throw Hg(),Error(p$3(418));for(;et;)Ag(_e,et),et=Lf(et.nextSibling)}if(Fg(_e),_e.tag===13){if(_e=_e.memoizedState,_e=_e!==null?_e.dehydrated:null,!_e)throw Error(p$3(317));e:{for(_e=_e.nextSibling,et=0;_e;){if(_e.nodeType===8){var tt=_e.data;if(tt==="/$"){if(et===0){yg=Lf(_e.nextSibling);break e}et--}else tt!=="$"&&tt!=="$!"&&tt!=="$?"||et++}_e=_e.nextSibling}yg=null}}else yg=xg?Lf(_e.stateNode.nextSibling):null;return!0}function Hg(){for(var _e=yg;_e;)_e=Lf(_e.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(_e){zg===null?zg=[_e]:zg.push(_e)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(_e,et,tt){if(_e=tt.ref,_e!==null&&typeof _e!="function"&&typeof _e!="object"){if(tt._owner){if(tt=tt._owner,tt){if(tt.tag!==1)throw Error(p$3(309));var rt=tt.stateNode}if(!rt)throw Error(p$3(147,_e));var it=rt,st=""+_e;return et!==null&&et.ref!==null&&typeof et.ref=="function"&&et.ref._stringRef===st?et.ref:(et=function(ut){var ht=it.refs;ut===null?delete ht[st]:ht[st]=ut},et._stringRef=st,et)}if(typeof _e!="string")throw Error(p$3(284));if(!tt._owner)throw Error(p$3(290,_e))}return _e}function Mg(_e,et){throw _e=Object.prototype.toString.call(et),Error(p$3(31,_e==="[object Object]"?"object with keys {"+Object.keys(et).join(", ")+"}":_e))}function Ng(_e){var et=_e._init;return et(_e._payload)}function Og(_e){function et(Mt,$t){if(_e){var jt=Mt.deletions;jt===null?(Mt.deletions=[$t],Mt.flags|=16):jt.push($t)}}function tt(Mt,$t){if(!_e)return null;for(;$t!==null;)et(Mt,$t),$t=$t.sibling;return null}function rt(Mt,$t){for(Mt=new Map;$t!==null;)$t.key!==null?Mt.set($t.key,$t):Mt.set($t.index,$t),$t=$t.sibling;return Mt}function it(Mt,$t){return Mt=Pg(Mt,$t),Mt.index=0,Mt.sibling=null,Mt}function st(Mt,$t,jt){return Mt.index=jt,_e?(jt=Mt.alternate,jt!==null?(jt=jt.index,jt<$t?(Mt.flags|=2,$t):jt):(Mt.flags|=2,$t)):(Mt.flags|=1048576,$t)}function ut(Mt){return _e&&Mt.alternate===null&&(Mt.flags|=2),Mt}function ht(Mt,$t,jt,Nt){return $t===null||$t.tag!==6?($t=Qg(jt,Mt.mode,Nt),$t.return=Mt,$t):($t=it($t,jt),$t.return=Mt,$t)}function at(Mt,$t,jt,Nt){var Ut=jt.type;return Ut===ya?bt(Mt,$t,jt.props.children,Nt,jt.key):$t!==null&&($t.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Ha&&Ng(Ut)===$t.type)?(Nt=it($t,jt.props),Nt.ref=Lg(Mt,$t,jt),Nt.return=Mt,Nt):(Nt=Rg(jt.type,jt.key,jt.props,null,Mt.mode,Nt),Nt.ref=Lg(Mt,$t,jt),Nt.return=Mt,Nt)}function gt(Mt,$t,jt,Nt){return $t===null||$t.tag!==4||$t.stateNode.containerInfo!==jt.containerInfo||$t.stateNode.implementation!==jt.implementation?($t=Sg(jt,Mt.mode,Nt),$t.return=Mt,$t):($t=it($t,jt.children||[]),$t.return=Mt,$t)}function bt(Mt,$t,jt,Nt,Ut){return $t===null||$t.tag!==7?($t=Tg(jt,Mt.mode,Nt,Ut),$t.return=Mt,$t):($t=it($t,jt),$t.return=Mt,$t)}function wt(Mt,$t,jt){if(typeof $t=="string"&&$t!==""||typeof $t=="number")return $t=Qg(""+$t,Mt.mode,jt),$t.return=Mt,$t;if(typeof $t=="object"&&$t!==null){switch($t.$$typeof){case va:return jt=Rg($t.type,$t.key,$t.props,null,Mt.mode,jt),jt.ref=Lg(Mt,null,$t),jt.return=Mt,jt;case wa:return $t=Sg($t,Mt.mode,jt),$t.return=Mt,$t;case Ha:var Nt=$t._init;return wt(Mt,Nt($t._payload),jt)}if(eb($t)||Ka($t))return $t=Tg($t,Mt.mode,jt,null),$t.return=Mt,$t;Mg(Mt,$t)}return null}function St(Mt,$t,jt,Nt){var Ut=$t!==null?$t.key:null;if(typeof jt=="string"&&jt!==""||typeof jt=="number")return Ut!==null?null:ht(Mt,$t,""+jt,Nt);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case va:return jt.key===Ut?at(Mt,$t,jt,Nt):null;case wa:return jt.key===Ut?gt(Mt,$t,jt,Nt):null;case Ha:return Ut=jt._init,St(Mt,$t,Ut(jt._payload),Nt)}if(eb(jt)||Ka(jt))return Ut!==null?null:bt(Mt,$t,jt,Nt,null);Mg(Mt,jt)}return null}function kt(Mt,$t,jt,Nt,Ut){if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Mt=Mt.get(jt)||null,ht($t,Mt,""+Nt,Ut);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case va:return Mt=Mt.get(Nt.key===null?jt:Nt.key)||null,at($t,Mt,Nt,Ut);case wa:return Mt=Mt.get(Nt.key===null?jt:Nt.key)||null,gt($t,Mt,Nt,Ut);case Ha:var Ht=Nt._init;return kt(Mt,$t,jt,Ht(Nt._payload),Ut)}if(eb(Nt)||Ka(Nt))return Mt=Mt.get(jt)||null,bt($t,Mt,Nt,Ut,null);Mg($t,Nt)}return null}function Rt(Mt,$t,jt,Nt){for(var Ut=null,Ht=null,Kt=$t,tr=$t=0,mr=null;Kt!==null&&tr<jt.length;tr++){Kt.index>tr?(mr=Kt,Kt=null):mr=Kt.sibling;var vr=St(Mt,Kt,jt[tr],Nt);if(vr===null){Kt===null&&(Kt=mr);break}_e&&Kt&&vr.alternate===null&&et(Mt,Kt),$t=st(vr,$t,tr),Ht===null?Ut=vr:Ht.sibling=vr,Ht=vr,Kt=mr}if(tr===jt.length)return tt(Mt,Kt),I$2&&tg(Mt,tr),Ut;if(Kt===null){for(;tr<jt.length;tr++)Kt=wt(Mt,jt[tr],Nt),Kt!==null&&($t=st(Kt,$t,tr),Ht===null?Ut=Kt:Ht.sibling=Kt,Ht=Kt);return I$2&&tg(Mt,tr),Ut}for(Kt=rt(Mt,Kt);tr<jt.length;tr++)mr=kt(Kt,Mt,tr,jt[tr],Nt),mr!==null&&(_e&&mr.alternate!==null&&Kt.delete(mr.key===null?tr:mr.key),$t=st(mr,$t,tr),Ht===null?Ut=mr:Ht.sibling=mr,Ht=mr);return _e&&Kt.forEach(function(wr){return et(Mt,wr)}),I$2&&tg(Mt,tr),Ut}function It(Mt,$t,jt,Nt){var Ut=Ka(jt);if(typeof Ut!="function")throw Error(p$3(150));if(jt=Ut.call(jt),jt==null)throw Error(p$3(151));for(var Ht=Ut=null,Kt=$t,tr=$t=0,mr=null,vr=jt.next();Kt!==null&&!vr.done;tr++,vr=jt.next()){Kt.index>tr?(mr=Kt,Kt=null):mr=Kt.sibling;var wr=St(Mt,Kt,vr.value,Nt);if(wr===null){Kt===null&&(Kt=mr);break}_e&&Kt&&wr.alternate===null&&et(Mt,Kt),$t=st(wr,$t,tr),Ht===null?Ut=wr:Ht.sibling=wr,Ht=wr,Kt=mr}if(vr.done)return tt(Mt,Kt),I$2&&tg(Mt,tr),Ut;if(Kt===null){for(;!vr.done;tr++,vr=jt.next())vr=wt(Mt,vr.value,Nt),vr!==null&&($t=st(vr,$t,tr),Ht===null?Ut=vr:Ht.sibling=vr,Ht=vr);return I$2&&tg(Mt,tr),Ut}for(Kt=rt(Mt,Kt);!vr.done;tr++,vr=jt.next())vr=kt(Kt,Mt,tr,vr.value,Nt),vr!==null&&(_e&&vr.alternate!==null&&Kt.delete(vr.key===null?tr:vr.key),$t=st(vr,$t,tr),Ht===null?Ut=vr:Ht.sibling=vr,Ht=vr);return _e&&Kt.forEach(function(yr){return et(Mt,yr)}),I$2&&tg(Mt,tr),Ut}function Dt(Mt,$t,jt,Nt){if(typeof jt=="object"&&jt!==null&&jt.type===ya&&jt.key===null&&(jt=jt.props.children),typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case va:e:{for(var Ut=jt.key,Ht=$t;Ht!==null;){if(Ht.key===Ut){if(Ut=jt.type,Ut===ya){if(Ht.tag===7){tt(Mt,Ht.sibling),$t=it(Ht,jt.props.children),$t.return=Mt,Mt=$t;break e}}else if(Ht.elementType===Ut||typeof Ut=="object"&&Ut!==null&&Ut.$$typeof===Ha&&Ng(Ut)===Ht.type){tt(Mt,Ht.sibling),$t=it(Ht,jt.props),$t.ref=Lg(Mt,Ht,jt),$t.return=Mt,Mt=$t;break e}tt(Mt,Ht);break}else et(Mt,Ht);Ht=Ht.sibling}jt.type===ya?($t=Tg(jt.props.children,Mt.mode,Nt,jt.key),$t.return=Mt,Mt=$t):(Nt=Rg(jt.type,jt.key,jt.props,null,Mt.mode,Nt),Nt.ref=Lg(Mt,$t,jt),Nt.return=Mt,Mt=Nt)}return ut(Mt);case wa:e:{for(Ht=jt.key;$t!==null;){if($t.key===Ht)if($t.tag===4&&$t.stateNode.containerInfo===jt.containerInfo&&$t.stateNode.implementation===jt.implementation){tt(Mt,$t.sibling),$t=it($t,jt.children||[]),$t.return=Mt,Mt=$t;break e}else{tt(Mt,$t);break}else et(Mt,$t);$t=$t.sibling}$t=Sg(jt,Mt.mode,Nt),$t.return=Mt,Mt=$t}return ut(Mt);case Ha:return Ht=jt._init,Dt(Mt,$t,Ht(jt._payload),Nt)}if(eb(jt))return Rt(Mt,$t,jt,Nt);if(Ka(jt))return It(Mt,$t,jt,Nt);Mg(Mt,jt)}return typeof jt=="string"&&jt!==""||typeof jt=="number"?(jt=""+jt,$t!==null&&$t.tag===6?(tt(Mt,$t.sibling),$t=it($t,jt),$t.return=Mt,Mt=$t):(tt(Mt,$t),$t=Qg(jt,Mt.mode,Nt),$t.return=Mt,Mt=$t),ut(Mt)):tt(Mt,$t)}return Dt}var Ug=Og(!0),Vg=Og(!1),Wg=Uf(null),Xg=null,Yg=null,Zg=null;function $g(){Zg=Yg=Xg=null}function ah(_e){var et=Wg.current;E$1(Wg),_e._currentValue=et}function bh(_e,et,tt){for(;_e!==null;){var rt=_e.alternate;if((_e.childLanes&et)!==et?(_e.childLanes|=et,rt!==null&&(rt.childLanes|=et)):rt!==null&&(rt.childLanes&et)!==et&&(rt.childLanes|=et),_e===tt)break;_e=_e.return}}function ch(_e,et){Xg=_e,Zg=Yg=null,_e=_e.dependencies,_e!==null&&_e.firstContext!==null&&(_e.lanes&et&&(dh=!0),_e.firstContext=null)}function eh(_e){var et=_e._currentValue;if(Zg!==_e)if(_e={context:_e,memoizedValue:et,next:null},Yg===null){if(Xg===null)throw Error(p$3(308));Yg=_e,Xg.dependencies={lanes:0,firstContext:_e}}else Yg=Yg.next=_e;return et}var fh=null;function gh(_e){fh===null?fh=[_e]:fh.push(_e)}function hh(_e,et,tt,rt){var it=et.interleaved;return it===null?(tt.next=tt,gh(et)):(tt.next=it.next,it.next=tt),et.interleaved=tt,ih(_e,rt)}function ih(_e,et){_e.lanes|=et;var tt=_e.alternate;for(tt!==null&&(tt.lanes|=et),tt=_e,_e=_e.return;_e!==null;)_e.childLanes|=et,tt=_e.alternate,tt!==null&&(tt.childLanes|=et),tt=_e,_e=_e.return;return tt.tag===3?tt.stateNode:null}var jh=!1;function kh(_e){_e.updateQueue={baseState:_e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lh(_e,et){_e=_e.updateQueue,et.updateQueue===_e&&(et.updateQueue={baseState:_e.baseState,firstBaseUpdate:_e.firstBaseUpdate,lastBaseUpdate:_e.lastBaseUpdate,shared:_e.shared,effects:_e.effects})}function mh(_e,et){return{eventTime:_e,lane:et,tag:0,payload:null,callback:null,next:null}}function nh(_e,et,tt){var rt=_e.updateQueue;if(rt===null)return null;if(rt=rt.shared,K$1&2){var it=rt.pending;return it===null?et.next=et:(et.next=it.next,it.next=et),rt.pending=et,ih(_e,tt)}return it=rt.interleaved,it===null?(et.next=et,gh(rt)):(et.next=it.next,it.next=et),rt.interleaved=et,ih(_e,tt)}function oh(_e,et,tt){if(et=et.updateQueue,et!==null&&(et=et.shared,(tt&4194240)!==0)){var rt=et.lanes;rt&=_e.pendingLanes,tt|=rt,et.lanes=tt,Cc(_e,tt)}}function ph(_e,et){var tt=_e.updateQueue,rt=_e.alternate;if(rt!==null&&(rt=rt.updateQueue,tt===rt)){var it=null,st=null;if(tt=tt.firstBaseUpdate,tt!==null){do{var ut={eventTime:tt.eventTime,lane:tt.lane,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null};st===null?it=st=ut:st=st.next=ut,tt=tt.next}while(tt!==null);st===null?it=st=et:st=st.next=et}else it=st=et;tt={baseState:rt.baseState,firstBaseUpdate:it,lastBaseUpdate:st,shared:rt.shared,effects:rt.effects},_e.updateQueue=tt;return}_e=tt.lastBaseUpdate,_e===null?tt.firstBaseUpdate=et:_e.next=et,tt.lastBaseUpdate=et}function qh(_e,et,tt,rt){var it=_e.updateQueue;jh=!1;var st=it.firstBaseUpdate,ut=it.lastBaseUpdate,ht=it.shared.pending;if(ht!==null){it.shared.pending=null;var at=ht,gt=at.next;at.next=null,ut===null?st=gt:ut.next=gt,ut=at;var bt=_e.alternate;bt!==null&&(bt=bt.updateQueue,ht=bt.lastBaseUpdate,ht!==ut&&(ht===null?bt.firstBaseUpdate=gt:ht.next=gt,bt.lastBaseUpdate=at))}if(st!==null){var wt=it.baseState;ut=0,bt=gt=at=null,ht=st;do{var St=ht.lane,kt=ht.eventTime;if((rt&St)===St){bt!==null&&(bt=bt.next={eventTime:kt,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});e:{var Rt=_e,It=ht;switch(St=et,kt=tt,It.tag){case 1:if(Rt=It.payload,typeof Rt=="function"){wt=Rt.call(kt,wt,St);break e}wt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=It.payload,St=typeof Rt=="function"?Rt.call(kt,wt,St):Rt,St==null)break e;wt=A$3({},wt,St);break e;case 2:jh=!0}}ht.callback!==null&&ht.lane!==0&&(_e.flags|=64,St=it.effects,St===null?it.effects=[ht]:St.push(ht))}else kt={eventTime:kt,lane:St,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},bt===null?(gt=bt=kt,at=wt):bt=bt.next=kt,ut|=St;if(ht=ht.next,ht===null){if(ht=it.shared.pending,ht===null)break;St=ht,ht=St.next,St.next=null,it.lastBaseUpdate=St,it.shared.pending=null}}while(!0);if(bt===null&&(at=wt),it.baseState=at,it.firstBaseUpdate=gt,it.lastBaseUpdate=bt,et=it.shared.interleaved,et!==null){it=et;do ut|=it.lane,it=it.next;while(it!==et)}else st===null&&(it.shared.lanes=0);rh|=ut,_e.lanes=ut,_e.memoizedState=wt}}function sh(_e,et,tt){if(_e=et.effects,et.effects=null,_e!==null)for(et=0;et<_e.length;et++){var rt=_e[et],it=rt.callback;if(it!==null){if(rt.callback=null,rt=tt,typeof it!="function")throw Error(p$3(191,it));it.call(rt)}}}var th={},uh=Uf(th),vh=Uf(th),wh=Uf(th);function xh(_e){if(_e===th)throw Error(p$3(174));return _e}function yh(_e,et){switch(G$2(wh,et),G$2(vh,_e),G$2(uh,th),_e=et.nodeType,_e){case 9:case 11:et=(et=et.documentElement)?et.namespaceURI:lb(null,"");break;default:_e=_e===8?et.parentNode:et,et=_e.namespaceURI||null,_e=_e.tagName,et=lb(et,_e)}E$1(uh),G$2(uh,et)}function zh(){E$1(uh),E$1(vh),E$1(wh)}function Ah(_e){xh(wh.current);var et=xh(uh.current),tt=lb(et,_e.type);et!==tt&&(G$2(vh,_e),G$2(uh,tt))}function Bh(_e){vh.current===_e&&(E$1(uh),E$1(vh))}var L$1=Uf(0);function Ch(_e){for(var et=_e;et!==null;){if(et.tag===13){var tt=et.memoizedState;if(tt!==null&&(tt=tt.dehydrated,tt===null||tt.data==="$?"||tt.data==="$!"))return et}else if(et.tag===19&&et.memoizedProps.revealOrder!==void 0){if(et.flags&128)return et}else if(et.child!==null){et.child.return=et,et=et.child;continue}if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return null;et=et.return}et.sibling.return=et.return,et=et.sibling}return null}var Dh=[];function Eh(){for(var _e=0;_e<Dh.length;_e++)Dh[_e]._workInProgressVersionPrimary=null;Dh.length=0}var Fh=ua$1.ReactCurrentDispatcher,Gh=ua$1.ReactCurrentBatchConfig,Hh=0,M$2=null,N$1=null,O$2=null,Ih=!1,Jh=!1,Kh=0,Lh=0;function P$3(){throw Error(p$3(321))}function Mh(_e,et){if(et===null)return!1;for(var tt=0;tt<et.length&&tt<_e.length;tt++)if(!He(_e[tt],et[tt]))return!1;return!0}function Nh(_e,et,tt,rt,it,st){if(Hh=st,M$2=et,et.memoizedState=null,et.updateQueue=null,et.lanes=0,Fh.current=_e===null||_e.memoizedState===null?Oh:Ph,_e=tt(rt,it),Jh){st=0;do{if(Jh=!1,Kh=0,25<=st)throw Error(p$3(301));st+=1,O$2=N$1=null,et.updateQueue=null,Fh.current=Qh,_e=tt(rt,it)}while(Jh)}if(Fh.current=Rh,et=N$1!==null&&N$1.next!==null,Hh=0,O$2=N$1=M$2=null,Ih=!1,et)throw Error(p$3(300));return _e}function Sh(){var _e=Kh!==0;return Kh=0,_e}function Th(){var _e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return O$2===null?M$2.memoizedState=O$2=_e:O$2=O$2.next=_e,O$2}function Uh(){if(N$1===null){var _e=M$2.alternate;_e=_e!==null?_e.memoizedState:null}else _e=N$1.next;var et=O$2===null?M$2.memoizedState:O$2.next;if(et!==null)O$2=et,N$1=_e;else{if(_e===null)throw Error(p$3(310));N$1=_e,_e={memoizedState:N$1.memoizedState,baseState:N$1.baseState,baseQueue:N$1.baseQueue,queue:N$1.queue,next:null},O$2===null?M$2.memoizedState=O$2=_e:O$2=O$2.next=_e}return O$2}function Vh(_e,et){return typeof et=="function"?et(_e):et}function Wh(_e){var et=Uh(),tt=et.queue;if(tt===null)throw Error(p$3(311));tt.lastRenderedReducer=_e;var rt=N$1,it=rt.baseQueue,st=tt.pending;if(st!==null){if(it!==null){var ut=it.next;it.next=st.next,st.next=ut}rt.baseQueue=it=st,tt.pending=null}if(it!==null){st=it.next,rt=rt.baseState;var ht=ut=null,at=null,gt=st;do{var bt=gt.lane;if((Hh&bt)===bt)at!==null&&(at=at.next={lane:0,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null}),rt=gt.hasEagerState?gt.eagerState:_e(rt,gt.action);else{var wt={lane:bt,action:gt.action,hasEagerState:gt.hasEagerState,eagerState:gt.eagerState,next:null};at===null?(ht=at=wt,ut=rt):at=at.next=wt,M$2.lanes|=bt,rh|=bt}gt=gt.next}while(gt!==null&&gt!==st);at===null?ut=rt:at.next=ht,He(rt,et.memoizedState)||(dh=!0),et.memoizedState=rt,et.baseState=ut,et.baseQueue=at,tt.lastRenderedState=rt}if(_e=tt.interleaved,_e!==null){it=_e;do st=it.lane,M$2.lanes|=st,rh|=st,it=it.next;while(it!==_e)}else it===null&&(tt.lanes=0);return[et.memoizedState,tt.dispatch]}function Xh(_e){var et=Uh(),tt=et.queue;if(tt===null)throw Error(p$3(311));tt.lastRenderedReducer=_e;var rt=tt.dispatch,it=tt.pending,st=et.memoizedState;if(it!==null){tt.pending=null;var ut=it=it.next;do st=_e(st,ut.action),ut=ut.next;while(ut!==it);He(st,et.memoizedState)||(dh=!0),et.memoizedState=st,et.baseQueue===null&&(et.baseState=st),tt.lastRenderedState=st}return[st,rt]}function Yh(){}function Zh(_e,et){var tt=M$2,rt=Uh(),it=et(),st=!He(rt.memoizedState,it);if(st&&(rt.memoizedState=it,dh=!0),rt=rt.queue,$h(ai.bind(null,tt,rt,_e),[_e]),rt.getSnapshot!==et||st||O$2!==null&&O$2.memoizedState.tag&1){if(tt.flags|=2048,bi(9,ci.bind(null,tt,rt,it,et),void 0,null),Q$2===null)throw Error(p$3(349));Hh&30||di(tt,et,it)}return it}function di(_e,et,tt){_e.flags|=16384,_e={getSnapshot:et,value:tt},et=M$2.updateQueue,et===null?(et={lastEffect:null,stores:null},M$2.updateQueue=et,et.stores=[_e]):(tt=et.stores,tt===null?et.stores=[_e]:tt.push(_e))}function ci(_e,et,tt,rt){et.value=tt,et.getSnapshot=rt,ei(et)&&fi(_e)}function ai(_e,et,tt){return tt(function(){ei(et)&&fi(_e)})}function ei(_e){var et=_e.getSnapshot;_e=_e.value;try{var tt=et();return!He(_e,tt)}catch{return!0}}function fi(_e){var et=ih(_e,1);et!==null&&gi(et,_e,1,-1)}function hi(_e){var et=Th();return typeof _e=="function"&&(_e=_e()),et.memoizedState=et.baseState=_e,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vh,lastRenderedState:_e},et.queue=_e,_e=_e.dispatch=ii.bind(null,M$2,_e),[et.memoizedState,_e]}function bi(_e,et,tt,rt){return _e={tag:_e,create:et,destroy:tt,deps:rt,next:null},et=M$2.updateQueue,et===null?(et={lastEffect:null,stores:null},M$2.updateQueue=et,et.lastEffect=_e.next=_e):(tt=et.lastEffect,tt===null?et.lastEffect=_e.next=_e:(rt=tt.next,tt.next=_e,_e.next=rt,et.lastEffect=_e)),_e}function ji(){return Uh().memoizedState}function ki(_e,et,tt,rt){var it=Th();M$2.flags|=_e,it.memoizedState=bi(1|et,tt,void 0,rt===void 0?null:rt)}function li(_e,et,tt,rt){var it=Uh();rt=rt===void 0?null:rt;var st=void 0;if(N$1!==null){var ut=N$1.memoizedState;if(st=ut.destroy,rt!==null&&Mh(rt,ut.deps)){it.memoizedState=bi(et,tt,st,rt);return}}M$2.flags|=_e,it.memoizedState=bi(1|et,tt,st,rt)}function mi(_e,et){return ki(8390656,8,_e,et)}function $h(_e,et){return li(2048,8,_e,et)}function ni(_e,et){return li(4,2,_e,et)}function oi(_e,et){return li(4,4,_e,et)}function pi$2(_e,et){if(typeof et=="function")return _e=_e(),et(_e),function(){et(null)};if(et!=null)return _e=_e(),et.current=_e,function(){et.current=null}}function qi(_e,et,tt){return tt=tt!=null?tt.concat([_e]):null,li(4,4,pi$2.bind(null,et,_e),tt)}function ri(){}function si(_e,et){var tt=Uh();et=et===void 0?null:et;var rt=tt.memoizedState;return rt!==null&&et!==null&&Mh(et,rt[1])?rt[0]:(tt.memoizedState=[_e,et],_e)}function ti(_e,et){var tt=Uh();et=et===void 0?null:et;var rt=tt.memoizedState;return rt!==null&&et!==null&&Mh(et,rt[1])?rt[0]:(_e=_e(),tt.memoizedState=[_e,et],_e)}function ui(_e,et,tt){return Hh&21?(He(tt,et)||(tt=yc(),M$2.lanes|=tt,rh|=tt,_e.baseState=!0),et):(_e.baseState&&(_e.baseState=!1,dh=!0),_e.memoizedState=tt)}function vi(_e,et){var tt=C$1;C$1=tt!==0&&4>tt?tt:4,_e(!0);var rt=Gh.transition;Gh.transition={};try{_e(!1),et()}finally{C$1=tt,Gh.transition=rt}}function wi(){return Uh().memoizedState}function xi(_e,et,tt){var rt=yi(_e);if(tt={lane:rt,action:tt,hasEagerState:!1,eagerState:null,next:null},zi(_e))Ai(et,tt);else if(tt=hh(_e,et,tt,rt),tt!==null){var it=R$1();gi(tt,_e,rt,it),Bi(tt,et,rt)}}function ii(_e,et,tt){var rt=yi(_e),it={lane:rt,action:tt,hasEagerState:!1,eagerState:null,next:null};if(zi(_e))Ai(et,it);else{var st=_e.alternate;if(_e.lanes===0&&(st===null||st.lanes===0)&&(st=et.lastRenderedReducer,st!==null))try{var ut=et.lastRenderedState,ht=st(ut,tt);if(it.hasEagerState=!0,it.eagerState=ht,He(ht,ut)){var at=et.interleaved;at===null?(it.next=it,gh(et)):(it.next=at.next,at.next=it),et.interleaved=it;return}}catch{}finally{}tt=hh(_e,et,it,rt),tt!==null&&(it=R$1(),gi(tt,_e,rt,it),Bi(tt,et,rt))}}function zi(_e){var et=_e.alternate;return _e===M$2||et!==null&&et===M$2}function Ai(_e,et){Jh=Ih=!0;var tt=_e.pending;tt===null?et.next=et:(et.next=tt.next,tt.next=et),_e.pending=et}function Bi(_e,et,tt){if(tt&4194240){var rt=et.lanes;rt&=_e.pendingLanes,tt|=rt,et.lanes=tt,Cc(_e,tt)}}var Rh={readContext:eh,useCallback:P$3,useContext:P$3,useEffect:P$3,useImperativeHandle:P$3,useInsertionEffect:P$3,useLayoutEffect:P$3,useMemo:P$3,useReducer:P$3,useRef:P$3,useState:P$3,useDebugValue:P$3,useDeferredValue:P$3,useTransition:P$3,useMutableSource:P$3,useSyncExternalStore:P$3,useId:P$3,unstable_isNewReconciler:!1},Oh={readContext:eh,useCallback:function(_e,et){return Th().memoizedState=[_e,et===void 0?null:et],_e},useContext:eh,useEffect:mi,useImperativeHandle:function(_e,et,tt){return tt=tt!=null?tt.concat([_e]):null,ki(4194308,4,pi$2.bind(null,et,_e),tt)},useLayoutEffect:function(_e,et){return ki(4194308,4,_e,et)},useInsertionEffect:function(_e,et){return ki(4,2,_e,et)},useMemo:function(_e,et){var tt=Th();return et=et===void 0?null:et,_e=_e(),tt.memoizedState=[_e,et],_e},useReducer:function(_e,et,tt){var rt=Th();return et=tt!==void 0?tt(et):et,rt.memoizedState=rt.baseState=et,_e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_e,lastRenderedState:et},rt.queue=_e,_e=_e.dispatch=xi.bind(null,M$2,_e),[rt.memoizedState,_e]},useRef:function(_e){var et=Th();return _e={current:_e},et.memoizedState=_e},useState:hi,useDebugValue:ri,useDeferredValue:function(_e){return Th().memoizedState=_e},useTransition:function(){var _e=hi(!1),et=_e[0];return _e=vi.bind(null,_e[1]),Th().memoizedState=_e,[et,_e]},useMutableSource:function(){},useSyncExternalStore:function(_e,et,tt){var rt=M$2,it=Th();if(I$2){if(tt===void 0)throw Error(p$3(407));tt=tt()}else{if(tt=et(),Q$2===null)throw Error(p$3(349));Hh&30||di(rt,et,tt)}it.memoizedState=tt;var st={value:tt,getSnapshot:et};return it.queue=st,mi(ai.bind(null,rt,st,_e),[_e]),rt.flags|=2048,bi(9,ci.bind(null,rt,st,tt,et),void 0,null),tt},useId:function(){var _e=Th(),et=Q$2.identifierPrefix;if(I$2){var tt=sg,rt=rg;tt=(rt&~(1<<32-oc(rt)-1)).toString(32)+tt,et=":"+et+"R"+tt,tt=Kh++,0<tt&&(et+="H"+tt.toString(32)),et+=":"}else tt=Lh++,et=":"+et+"r"+tt.toString(32)+":";return _e.memoizedState=et},unstable_isNewReconciler:!1},Ph={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Wh,useRef:ji,useState:function(){return Wh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var et=Uh();return ui(et,N$1.memoizedState,_e)},useTransition:function(){var _e=Wh(Vh)[0],et=Uh().memoizedState;return[_e,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1},Qh={readContext:eh,useCallback:si,useContext:eh,useEffect:$h,useImperativeHandle:qi,useInsertionEffect:ni,useLayoutEffect:oi,useMemo:ti,useReducer:Xh,useRef:ji,useState:function(){return Xh(Vh)},useDebugValue:ri,useDeferredValue:function(_e){var et=Uh();return N$1===null?et.memoizedState=_e:ui(et,N$1.memoizedState,_e)},useTransition:function(){var _e=Xh(Vh)[0],et=Uh().memoizedState;return[_e,et]},useMutableSource:Yh,useSyncExternalStore:Zh,useId:wi,unstable_isNewReconciler:!1};function Ci(_e,et){if(_e&&_e.defaultProps){et=A$3({},et),_e=_e.defaultProps;for(var tt in _e)et[tt]===void 0&&(et[tt]=_e[tt]);return et}return et}function Di(_e,et,tt,rt){et=_e.memoizedState,tt=tt(rt,et),tt=tt==null?et:A$3({},et,tt),_e.memoizedState=tt,_e.lanes===0&&(_e.updateQueue.baseState=tt)}var Ei={isMounted:function(_e){return(_e=_e._reactInternals)?Vb(_e)===_e:!1},enqueueSetState:function(_e,et,tt){_e=_e._reactInternals;var rt=R$1(),it=yi(_e),st=mh(rt,it);st.payload=et,tt!=null&&(st.callback=tt),et=nh(_e,st,it),et!==null&&(gi(et,_e,it,rt),oh(et,_e,it))},enqueueReplaceState:function(_e,et,tt){_e=_e._reactInternals;var rt=R$1(),it=yi(_e),st=mh(rt,it);st.tag=1,st.payload=et,tt!=null&&(st.callback=tt),et=nh(_e,st,it),et!==null&&(gi(et,_e,it,rt),oh(et,_e,it))},enqueueForceUpdate:function(_e,et){_e=_e._reactInternals;var tt=R$1(),rt=yi(_e),it=mh(tt,rt);it.tag=2,et!=null&&(it.callback=et),et=nh(_e,it,rt),et!==null&&(gi(et,_e,rt,tt),oh(et,_e,rt))}};function Fi(_e,et,tt,rt,it,st,ut){return _e=_e.stateNode,typeof _e.shouldComponentUpdate=="function"?_e.shouldComponentUpdate(rt,st,ut):et.prototype&&et.prototype.isPureReactComponent?!Ie$1(tt,rt)||!Ie$1(it,st):!0}function Gi(_e,et,tt){var rt=!1,it=Vf,st=et.contextType;return typeof st=="object"&&st!==null?st=eh(st):(it=Zf(et)?Xf:H$1.current,rt=et.contextTypes,st=(rt=rt!=null)?Yf(_e,it):Vf),et=new et(tt,st),_e.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,et.updater=Ei,_e.stateNode=et,et._reactInternals=_e,rt&&(_e=_e.stateNode,_e.__reactInternalMemoizedUnmaskedChildContext=it,_e.__reactInternalMemoizedMaskedChildContext=st),et}function Hi(_e,et,tt,rt){_e=et.state,typeof et.componentWillReceiveProps=="function"&&et.componentWillReceiveProps(tt,rt),typeof et.UNSAFE_componentWillReceiveProps=="function"&&et.UNSAFE_componentWillReceiveProps(tt,rt),et.state!==_e&&Ei.enqueueReplaceState(et,et.state,null)}function Ii(_e,et,tt,rt){var it=_e.stateNode;it.props=tt,it.state=_e.memoizedState,it.refs={},kh(_e);var st=et.contextType;typeof st=="object"&&st!==null?it.context=eh(st):(st=Zf(et)?Xf:H$1.current,it.context=Yf(_e,st)),it.state=_e.memoizedState,st=et.getDerivedStateFromProps,typeof st=="function"&&(Di(_e,et,st,tt),it.state=_e.memoizedState),typeof et.getDerivedStateFromProps=="function"||typeof it.getSnapshotBeforeUpdate=="function"||typeof it.UNSAFE_componentWillMount!="function"&&typeof it.componentWillMount!="function"||(et=it.state,typeof it.componentWillMount=="function"&&it.componentWillMount(),typeof it.UNSAFE_componentWillMount=="function"&&it.UNSAFE_componentWillMount(),et!==it.state&&Ei.enqueueReplaceState(it,it.state,null),qh(_e,tt,it,rt),it.state=_e.memoizedState),typeof it.componentDidMount=="function"&&(_e.flags|=4194308)}function Ji(_e,et){try{var tt="",rt=et;do tt+=Pa(rt),rt=rt.return;while(rt);var it=tt}catch(st){it=`
Error generating stack: `+st.message+`
`+st.stack}return{value:_e,source:et,stack:it,digest:null}}function Ki(_e,et,tt){return{value:_e,source:null,stack:tt??null,digest:et??null}}function Li(_e,et){try{console.error(et.value)}catch(tt){setTimeout(function(){throw tt})}}var Mi=typeof WeakMap=="function"?WeakMap:Map;function Ni(_e,et,tt){tt=mh(-1,tt),tt.tag=3,tt.payload={element:null};var rt=et.value;return tt.callback=function(){Oi||(Oi=!0,Pi=rt),Li(_e,et)},tt}function Qi(_e,et,tt){tt=mh(-1,tt),tt.tag=3;var rt=_e.type.getDerivedStateFromError;if(typeof rt=="function"){var it=et.value;tt.payload=function(){return rt(it)},tt.callback=function(){Li(_e,et)}}var st=_e.stateNode;return st!==null&&typeof st.componentDidCatch=="function"&&(tt.callback=function(){Li(_e,et),typeof rt!="function"&&(Ri===null?Ri=new Set([this]):Ri.add(this));var ut=et.stack;this.componentDidCatch(et.value,{componentStack:ut!==null?ut:""})}),tt}function Si(_e,et,tt){var rt=_e.pingCache;if(rt===null){rt=_e.pingCache=new Mi;var it=new Set;rt.set(et,it)}else it=rt.get(et),it===void 0&&(it=new Set,rt.set(et,it));it.has(tt)||(it.add(tt),_e=Ti.bind(null,_e,et,tt),et.then(_e,_e))}function Ui(_e){do{var et;if((et=_e.tag===13)&&(et=_e.memoizedState,et=et!==null?et.dehydrated!==null:!0),et)return _e;_e=_e.return}while(_e!==null);return null}function Vi(_e,et,tt,rt,it){return _e.mode&1?(_e.flags|=65536,_e.lanes=it,_e):(_e===et?_e.flags|=65536:(_e.flags|=128,tt.flags|=131072,tt.flags&=-52805,tt.tag===1&&(tt.alternate===null?tt.tag=17:(et=mh(-1,1),et.tag=2,nh(tt,et,1))),tt.lanes|=1),_e)}var Wi=ua$1.ReactCurrentOwner,dh=!1;function Xi(_e,et,tt,rt){et.child=_e===null?Vg(et,null,tt,rt):Ug(et,_e.child,tt,rt)}function Yi(_e,et,tt,rt,it){tt=tt.render;var st=et.ref;return ch(et,it),rt=Nh(_e,et,tt,rt,st,it),tt=Sh(),_e!==null&&!dh?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~it,Zi(_e,et,it)):(I$2&&tt&&vg(et),et.flags|=1,Xi(_e,et,rt,it),et.child)}function $i(_e,et,tt,rt,it){if(_e===null){var st=tt.type;return typeof st=="function"&&!aj(st)&&st.defaultProps===void 0&&tt.compare===null&&tt.defaultProps===void 0?(et.tag=15,et.type=st,bj(_e,et,st,rt,it)):(_e=Rg(tt.type,null,rt,et,et.mode,it),_e.ref=et.ref,_e.return=et,et.child=_e)}if(st=_e.child,!(_e.lanes&it)){var ut=st.memoizedProps;if(tt=tt.compare,tt=tt!==null?tt:Ie$1,tt(ut,rt)&&_e.ref===et.ref)return Zi(_e,et,it)}return et.flags|=1,_e=Pg(st,rt),_e.ref=et.ref,_e.return=et,et.child=_e}function bj(_e,et,tt,rt,it){if(_e!==null){var st=_e.memoizedProps;if(Ie$1(st,rt)&&_e.ref===et.ref)if(dh=!1,et.pendingProps=rt=st,(_e.lanes&it)!==0)_e.flags&131072&&(dh=!0);else return et.lanes=_e.lanes,Zi(_e,et,it)}return cj(_e,et,tt,rt,it)}function dj(_e,et,tt){var rt=et.pendingProps,it=rt.children,st=_e!==null?_e.memoizedState:null;if(rt.mode==="hidden")if(!(et.mode&1))et.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(ej,fj),fj|=tt;else{if(!(tt&1073741824))return _e=st!==null?st.baseLanes|tt:tt,et.lanes=et.childLanes=1073741824,et.memoizedState={baseLanes:_e,cachePool:null,transitions:null},et.updateQueue=null,G$2(ej,fj),fj|=_e,null;et.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt=st!==null?st.baseLanes:tt,G$2(ej,fj),fj|=rt}else st!==null?(rt=st.baseLanes|tt,et.memoizedState=null):rt=tt,G$2(ej,fj),fj|=rt;return Xi(_e,et,it,tt),et.child}function gj(_e,et){var tt=et.ref;(_e===null&&tt!==null||_e!==null&&_e.ref!==tt)&&(et.flags|=512,et.flags|=2097152)}function cj(_e,et,tt,rt,it){var st=Zf(tt)?Xf:H$1.current;return st=Yf(et,st),ch(et,it),tt=Nh(_e,et,tt,rt,st,it),rt=Sh(),_e!==null&&!dh?(et.updateQueue=_e.updateQueue,et.flags&=-2053,_e.lanes&=~it,Zi(_e,et,it)):(I$2&&rt&&vg(et),et.flags|=1,Xi(_e,et,tt,it),et.child)}function hj(_e,et,tt,rt,it){if(Zf(tt)){var st=!0;cg(et)}else st=!1;if(ch(et,it),et.stateNode===null)ij(_e,et),Gi(et,tt,rt),Ii(et,tt,rt,it),rt=!0;else if(_e===null){var ut=et.stateNode,ht=et.memoizedProps;ut.props=ht;var at=ut.context,gt=tt.contextType;typeof gt=="object"&&gt!==null?gt=eh(gt):(gt=Zf(tt)?Xf:H$1.current,gt=Yf(et,gt));var bt=tt.getDerivedStateFromProps,wt=typeof bt=="function"||typeof ut.getSnapshotBeforeUpdate=="function";wt||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(ht!==rt||at!==gt)&&Hi(et,ut,rt,gt),jh=!1;var St=et.memoizedState;ut.state=St,qh(et,rt,ut,it),at=et.memoizedState,ht!==rt||St!==at||Wf.current||jh?(typeof bt=="function"&&(Di(et,tt,bt,rt),at=et.memoizedState),(ht=jh||Fi(et,tt,ht,rt,St,at,gt))?(wt||typeof ut.UNSAFE_componentWillMount!="function"&&typeof ut.componentWillMount!="function"||(typeof ut.componentWillMount=="function"&&ut.componentWillMount(),typeof ut.UNSAFE_componentWillMount=="function"&&ut.UNSAFE_componentWillMount()),typeof ut.componentDidMount=="function"&&(et.flags|=4194308)):(typeof ut.componentDidMount=="function"&&(et.flags|=4194308),et.memoizedProps=rt,et.memoizedState=at),ut.props=rt,ut.state=at,ut.context=gt,rt=ht):(typeof ut.componentDidMount=="function"&&(et.flags|=4194308),rt=!1)}else{ut=et.stateNode,lh(_e,et),ht=et.memoizedProps,gt=et.type===et.elementType?ht:Ci(et.type,ht),ut.props=gt,wt=et.pendingProps,St=ut.context,at=tt.contextType,typeof at=="object"&&at!==null?at=eh(at):(at=Zf(tt)?Xf:H$1.current,at=Yf(et,at));var kt=tt.getDerivedStateFromProps;(bt=typeof kt=="function"||typeof ut.getSnapshotBeforeUpdate=="function")||typeof ut.UNSAFE_componentWillReceiveProps!="function"&&typeof ut.componentWillReceiveProps!="function"||(ht!==wt||St!==at)&&Hi(et,ut,rt,at),jh=!1,St=et.memoizedState,ut.state=St,qh(et,rt,ut,it);var Rt=et.memoizedState;ht!==wt||St!==Rt||Wf.current||jh?(typeof kt=="function"&&(Di(et,tt,kt,rt),Rt=et.memoizedState),(gt=jh||Fi(et,tt,gt,rt,St,Rt,at)||!1)?(bt||typeof ut.UNSAFE_componentWillUpdate!="function"&&typeof ut.componentWillUpdate!="function"||(typeof ut.componentWillUpdate=="function"&&ut.componentWillUpdate(rt,Rt,at),typeof ut.UNSAFE_componentWillUpdate=="function"&&ut.UNSAFE_componentWillUpdate(rt,Rt,at)),typeof ut.componentDidUpdate=="function"&&(et.flags|=4),typeof ut.getSnapshotBeforeUpdate=="function"&&(et.flags|=1024)):(typeof ut.componentDidUpdate!="function"||ht===_e.memoizedProps&&St===_e.memoizedState||(et.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||ht===_e.memoizedProps&&St===_e.memoizedState||(et.flags|=1024),et.memoizedProps=rt,et.memoizedState=Rt),ut.props=rt,ut.state=Rt,ut.context=at,rt=gt):(typeof ut.componentDidUpdate!="function"||ht===_e.memoizedProps&&St===_e.memoizedState||(et.flags|=4),typeof ut.getSnapshotBeforeUpdate!="function"||ht===_e.memoizedProps&&St===_e.memoizedState||(et.flags|=1024),rt=!1)}return jj(_e,et,tt,rt,st,it)}function jj(_e,et,tt,rt,it,st){gj(_e,et);var ut=(et.flags&128)!==0;if(!rt&&!ut)return it&&dg(et,tt,!1),Zi(_e,et,st);rt=et.stateNode,Wi.current=et;var ht=ut&&typeof tt.getDerivedStateFromError!="function"?null:rt.render();return et.flags|=1,_e!==null&&ut?(et.child=Ug(et,_e.child,null,st),et.child=Ug(et,null,ht,st)):Xi(_e,et,ht,st),et.memoizedState=rt.state,it&&dg(et,tt,!0),et.child}function kj(_e){var et=_e.stateNode;et.pendingContext?ag(_e,et.pendingContext,et.pendingContext!==et.context):et.context&&ag(_e,et.context,!1),yh(_e,et.containerInfo)}function lj(_e,et,tt,rt,it){return Ig(),Jg(it),et.flags|=256,Xi(_e,et,tt,rt),et.child}var mj={dehydrated:null,treeContext:null,retryLane:0};function nj(_e){return{baseLanes:_e,cachePool:null,transitions:null}}function oj(_e,et,tt){var rt=et.pendingProps,it=L$1.current,st=!1,ut=(et.flags&128)!==0,ht;if((ht=ut)||(ht=_e!==null&&_e.memoizedState===null?!1:(it&2)!==0),ht?(st=!0,et.flags&=-129):(_e===null||_e.memoizedState!==null)&&(it|=1),G$2(L$1,it&1),_e===null)return Eg(et),_e=et.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null)?(et.mode&1?_e.data==="$!"?et.lanes=8:et.lanes=1073741824:et.lanes=1,null):(ut=rt.children,_e=rt.fallback,st?(rt=et.mode,st=et.child,ut={mode:"hidden",children:ut},!(rt&1)&&st!==null?(st.childLanes=0,st.pendingProps=ut):st=pj(ut,rt,0,null),_e=Tg(_e,rt,tt,null),st.return=et,_e.return=et,st.sibling=_e,et.child=st,et.child.memoizedState=nj(tt),et.memoizedState=mj,_e):qj(et,ut));if(it=_e.memoizedState,it!==null&&(ht=it.dehydrated,ht!==null))return rj(_e,et,ut,rt,ht,it,tt);if(st){st=rt.fallback,ut=et.mode,it=_e.child,ht=it.sibling;var at={mode:"hidden",children:rt.children};return!(ut&1)&&et.child!==it?(rt=et.child,rt.childLanes=0,rt.pendingProps=at,et.deletions=null):(rt=Pg(it,at),rt.subtreeFlags=it.subtreeFlags&14680064),ht!==null?st=Pg(ht,st):(st=Tg(st,ut,tt,null),st.flags|=2),st.return=et,rt.return=et,rt.sibling=st,et.child=rt,rt=st,st=et.child,ut=_e.child.memoizedState,ut=ut===null?nj(tt):{baseLanes:ut.baseLanes|tt,cachePool:null,transitions:ut.transitions},st.memoizedState=ut,st.childLanes=_e.childLanes&~tt,et.memoizedState=mj,rt}return st=_e.child,_e=st.sibling,rt=Pg(st,{mode:"visible",children:rt.children}),!(et.mode&1)&&(rt.lanes=tt),rt.return=et,rt.sibling=null,_e!==null&&(tt=et.deletions,tt===null?(et.deletions=[_e],et.flags|=16):tt.push(_e)),et.child=rt,et.memoizedState=null,rt}function qj(_e,et){return et=pj({mode:"visible",children:et},_e.mode,0,null),et.return=_e,_e.child=et}function sj(_e,et,tt,rt){return rt!==null&&Jg(rt),Ug(et,_e.child,null,tt),_e=qj(et,et.pendingProps.children),_e.flags|=2,et.memoizedState=null,_e}function rj(_e,et,tt,rt,it,st,ut){if(tt)return et.flags&256?(et.flags&=-257,rt=Ki(Error(p$3(422))),sj(_e,et,ut,rt)):et.memoizedState!==null?(et.child=_e.child,et.flags|=128,null):(st=rt.fallback,it=et.mode,rt=pj({mode:"visible",children:rt.children},it,0,null),st=Tg(st,it,ut,null),st.flags|=2,rt.return=et,st.return=et,rt.sibling=st,et.child=rt,et.mode&1&&Ug(et,_e.child,null,ut),et.child.memoizedState=nj(ut),et.memoizedState=mj,st);if(!(et.mode&1))return sj(_e,et,ut,null);if(it.data==="$!"){if(rt=it.nextSibling&&it.nextSibling.dataset,rt)var ht=rt.dgst;return rt=ht,st=Error(p$3(419)),rt=Ki(st,rt,void 0),sj(_e,et,ut,rt)}if(ht=(ut&_e.childLanes)!==0,dh||ht){if(rt=Q$2,rt!==null){switch(ut&-ut){case 4:it=2;break;case 16:it=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:it=32;break;case 536870912:it=268435456;break;default:it=0}it=it&(rt.suspendedLanes|ut)?0:it,it!==0&&it!==st.retryLane&&(st.retryLane=it,ih(_e,it),gi(rt,_e,it,-1))}return tj(),rt=Ki(Error(p$3(421))),sj(_e,et,ut,rt)}return it.data==="$?"?(et.flags|=128,et.child=_e.child,et=uj.bind(null,_e),it._reactRetry=et,null):(_e=st.treeContext,yg=Lf(it.nextSibling),xg=et,I$2=!0,zg=null,_e!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=_e.id,sg=_e.overflow,qg=et),et=qj(et,rt.children),et.flags|=4096,et)}function vj(_e,et,tt){_e.lanes|=et;var rt=_e.alternate;rt!==null&&(rt.lanes|=et),bh(_e.return,et,tt)}function wj(_e,et,tt,rt,it){var st=_e.memoizedState;st===null?_e.memoizedState={isBackwards:et,rendering:null,renderingStartTime:0,last:rt,tail:tt,tailMode:it}:(st.isBackwards=et,st.rendering=null,st.renderingStartTime=0,st.last=rt,st.tail=tt,st.tailMode=it)}function xj(_e,et,tt){var rt=et.pendingProps,it=rt.revealOrder,st=rt.tail;if(Xi(_e,et,rt.children,tt),rt=L$1.current,rt&2)rt=rt&1|2,et.flags|=128;else{if(_e!==null&&_e.flags&128)e:for(_e=et.child;_e!==null;){if(_e.tag===13)_e.memoizedState!==null&&vj(_e,tt,et);else if(_e.tag===19)vj(_e,tt,et);else if(_e.child!==null){_e.child.return=_e,_e=_e.child;continue}if(_e===et)break e;for(;_e.sibling===null;){if(_e.return===null||_e.return===et)break e;_e=_e.return}_e.sibling.return=_e.return,_e=_e.sibling}rt&=1}if(G$2(L$1,rt),!(et.mode&1))et.memoizedState=null;else switch(it){case"forwards":for(tt=et.child,it=null;tt!==null;)_e=tt.alternate,_e!==null&&Ch(_e)===null&&(it=tt),tt=tt.sibling;tt=it,tt===null?(it=et.child,et.child=null):(it=tt.sibling,tt.sibling=null),wj(et,!1,it,tt,st);break;case"backwards":for(tt=null,it=et.child,et.child=null;it!==null;){if(_e=it.alternate,_e!==null&&Ch(_e)===null){et.child=it;break}_e=it.sibling,it.sibling=tt,tt=it,it=_e}wj(et,!0,tt,null,st);break;case"together":wj(et,!1,null,null,void 0);break;default:et.memoizedState=null}return et.child}function ij(_e,et){!(et.mode&1)&&_e!==null&&(_e.alternate=null,et.alternate=null,et.flags|=2)}function Zi(_e,et,tt){if(_e!==null&&(et.dependencies=_e.dependencies),rh|=et.lanes,!(tt&et.childLanes))return null;if(_e!==null&&et.child!==_e.child)throw Error(p$3(153));if(et.child!==null){for(_e=et.child,tt=Pg(_e,_e.pendingProps),et.child=tt,tt.return=et;_e.sibling!==null;)_e=_e.sibling,tt=tt.sibling=Pg(_e,_e.pendingProps),tt.return=et;tt.sibling=null}return et.child}function yj(_e,et,tt){switch(et.tag){case 3:kj(et),Ig();break;case 5:Ah(et);break;case 1:Zf(et.type)&&cg(et);break;case 4:yh(et,et.stateNode.containerInfo);break;case 10:var rt=et.type._context,it=et.memoizedProps.value;G$2(Wg,rt._currentValue),rt._currentValue=it;break;case 13:if(rt=et.memoizedState,rt!==null)return rt.dehydrated!==null?(G$2(L$1,L$1.current&1),et.flags|=128,null):tt&et.child.childLanes?oj(_e,et,tt):(G$2(L$1,L$1.current&1),_e=Zi(_e,et,tt),_e!==null?_e.sibling:null);G$2(L$1,L$1.current&1);break;case 19:if(rt=(tt&et.childLanes)!==0,_e.flags&128){if(rt)return xj(_e,et,tt);et.flags|=128}if(it=et.memoizedState,it!==null&&(it.rendering=null,it.tail=null,it.lastEffect=null),G$2(L$1,L$1.current),rt)break;return null;case 22:case 23:return et.lanes=0,dj(_e,et,tt)}return Zi(_e,et,tt)}var zj,Aj,Bj,Cj;zj=function(_e,et){for(var tt=et.child;tt!==null;){if(tt.tag===5||tt.tag===6)_e.appendChild(tt.stateNode);else if(tt.tag!==4&&tt.child!==null){tt.child.return=tt,tt=tt.child;continue}if(tt===et)break;for(;tt.sibling===null;){if(tt.return===null||tt.return===et)return;tt=tt.return}tt.sibling.return=tt.return,tt=tt.sibling}};Aj=function(){};Bj=function(_e,et,tt,rt){var it=_e.memoizedProps;if(it!==rt){_e=et.stateNode,xh(uh.current);var st=null;switch(tt){case"input":it=Ya(_e,it),rt=Ya(_e,rt),st=[];break;case"select":it=A$3({},it,{value:void 0}),rt=A$3({},rt,{value:void 0}),st=[];break;case"textarea":it=gb(_e,it),rt=gb(_e,rt),st=[];break;default:typeof it.onClick!="function"&&typeof rt.onClick=="function"&&(_e.onclick=Bf)}ub(tt,rt);var ut;tt=null;for(gt in it)if(!rt.hasOwnProperty(gt)&&it.hasOwnProperty(gt)&&it[gt]!=null)if(gt==="style"){var ht=it[gt];for(ut in ht)ht.hasOwnProperty(ut)&&(tt||(tt={}),tt[ut]="")}else gt!=="dangerouslySetInnerHTML"&&gt!=="children"&&gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&gt!=="autoFocus"&&(ea.hasOwnProperty(gt)?st||(st=[]):(st=st||[]).push(gt,null));for(gt in rt){var at=rt[gt];if(ht=it!=null?it[gt]:void 0,rt.hasOwnProperty(gt)&&at!==ht&&(at!=null||ht!=null))if(gt==="style")if(ht){for(ut in ht)!ht.hasOwnProperty(ut)||at&&at.hasOwnProperty(ut)||(tt||(tt={}),tt[ut]="");for(ut in at)at.hasOwnProperty(ut)&&ht[ut]!==at[ut]&&(tt||(tt={}),tt[ut]=at[ut])}else tt||(st||(st=[]),st.push(gt,tt)),tt=at;else gt==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,ht=ht?ht.__html:void 0,at!=null&&ht!==at&&(st=st||[]).push(gt,at)):gt==="children"?typeof at!="string"&&typeof at!="number"||(st=st||[]).push(gt,""+at):gt!=="suppressContentEditableWarning"&&gt!=="suppressHydrationWarning"&&(ea.hasOwnProperty(gt)?(at!=null&&gt==="onScroll"&&D$2("scroll",_e),st||ht===at||(st=[])):(st=st||[]).push(gt,at))}tt&&(st=st||[]).push("style",tt);var gt=st;(et.updateQueue=gt)&&(et.flags|=4)}};Cj=function(_e,et,tt,rt){tt!==rt&&(et.flags|=4)};function Dj(_e,et){if(!I$2)switch(_e.tailMode){case"hidden":et=_e.tail;for(var tt=null;et!==null;)et.alternate!==null&&(tt=et),et=et.sibling;tt===null?_e.tail=null:tt.sibling=null;break;case"collapsed":tt=_e.tail;for(var rt=null;tt!==null;)tt.alternate!==null&&(rt=tt),tt=tt.sibling;rt===null?et||_e.tail===null?_e.tail=null:_e.tail.sibling=null:rt.sibling=null}}function S$2(_e){var et=_e.alternate!==null&&_e.alternate.child===_e.child,tt=0,rt=0;if(et)for(var it=_e.child;it!==null;)tt|=it.lanes|it.childLanes,rt|=it.subtreeFlags&14680064,rt|=it.flags&14680064,it.return=_e,it=it.sibling;else for(it=_e.child;it!==null;)tt|=it.lanes|it.childLanes,rt|=it.subtreeFlags,rt|=it.flags,it.return=_e,it=it.sibling;return _e.subtreeFlags|=rt,_e.childLanes=tt,et}function Ej(_e,et,tt){var rt=et.pendingProps;switch(wg(et),et.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(et),null;case 1:return Zf(et.type)&&$f(),S$2(et),null;case 3:return rt=et.stateNode,zh(),E$1(Wf),E$1(H$1),Eh(),rt.pendingContext&&(rt.context=rt.pendingContext,rt.pendingContext=null),(_e===null||_e.child===null)&&(Gg(et)?et.flags|=4:_e===null||_e.memoizedState.isDehydrated&&!(et.flags&256)||(et.flags|=1024,zg!==null&&(Fj(zg),zg=null))),Aj(_e,et),S$2(et),null;case 5:Bh(et);var it=xh(wh.current);if(tt=et.type,_e!==null&&et.stateNode!=null)Bj(_e,et,tt,rt,it),_e.ref!==et.ref&&(et.flags|=512,et.flags|=2097152);else{if(!rt){if(et.stateNode===null)throw Error(p$3(166));return S$2(et),null}if(_e=xh(uh.current),Gg(et)){rt=et.stateNode,tt=et.type;var st=et.memoizedProps;switch(rt[Of]=et,rt[Pf]=st,_e=(et.mode&1)!==0,tt){case"dialog":D$2("cancel",rt),D$2("close",rt);break;case"iframe":case"object":case"embed":D$2("load",rt);break;case"video":case"audio":for(it=0;it<lf.length;it++)D$2(lf[it],rt);break;case"source":D$2("error",rt);break;case"img":case"image":case"link":D$2("error",rt),D$2("load",rt);break;case"details":D$2("toggle",rt);break;case"input":Za(rt,st),D$2("invalid",rt);break;case"select":rt._wrapperState={wasMultiple:!!st.multiple},D$2("invalid",rt);break;case"textarea":hb(rt,st),D$2("invalid",rt)}ub(tt,st),it=null;for(var ut in st)if(st.hasOwnProperty(ut)){var ht=st[ut];ut==="children"?typeof ht=="string"?rt.textContent!==ht&&(st.suppressHydrationWarning!==!0&&Af(rt.textContent,ht,_e),it=["children",ht]):typeof ht=="number"&&rt.textContent!==""+ht&&(st.suppressHydrationWarning!==!0&&Af(rt.textContent,ht,_e),it=["children",""+ht]):ea.hasOwnProperty(ut)&&ht!=null&&ut==="onScroll"&&D$2("scroll",rt)}switch(tt){case"input":Va(rt),db(rt,st,!0);break;case"textarea":Va(rt),jb(rt);break;case"select":case"option":break;default:typeof st.onClick=="function"&&(rt.onclick=Bf)}rt=it,et.updateQueue=rt,rt!==null&&(et.flags|=4)}else{ut=it.nodeType===9?it:it.ownerDocument,_e==="http://www.w3.org/1999/xhtml"&&(_e=kb(tt)),_e==="http://www.w3.org/1999/xhtml"?tt==="script"?(_e=ut.createElement("div"),_e.innerHTML="<script><\/script>",_e=_e.removeChild(_e.firstChild)):typeof rt.is=="string"?_e=ut.createElement(tt,{is:rt.is}):(_e=ut.createElement(tt),tt==="select"&&(ut=_e,rt.multiple?ut.multiple=!0:rt.size&&(ut.size=rt.size))):_e=ut.createElementNS(_e,tt),_e[Of]=et,_e[Pf]=rt,zj(_e,et,!1,!1),et.stateNode=_e;e:{switch(ut=vb(tt,rt),tt){case"dialog":D$2("cancel",_e),D$2("close",_e),it=rt;break;case"iframe":case"object":case"embed":D$2("load",_e),it=rt;break;case"video":case"audio":for(it=0;it<lf.length;it++)D$2(lf[it],_e);it=rt;break;case"source":D$2("error",_e),it=rt;break;case"img":case"image":case"link":D$2("error",_e),D$2("load",_e),it=rt;break;case"details":D$2("toggle",_e),it=rt;break;case"input":Za(_e,rt),it=Ya(_e,rt),D$2("invalid",_e);break;case"option":it=rt;break;case"select":_e._wrapperState={wasMultiple:!!rt.multiple},it=A$3({},rt,{value:void 0}),D$2("invalid",_e);break;case"textarea":hb(_e,rt),it=gb(_e,rt),D$2("invalid",_e);break;default:it=rt}ub(tt,it),ht=it;for(st in ht)if(ht.hasOwnProperty(st)){var at=ht[st];st==="style"?sb(_e,at):st==="dangerouslySetInnerHTML"?(at=at?at.__html:void 0,at!=null&&nb(_e,at)):st==="children"?typeof at=="string"?(tt!=="textarea"||at!=="")&&ob(_e,at):typeof at=="number"&&ob(_e,""+at):st!=="suppressContentEditableWarning"&&st!=="suppressHydrationWarning"&&st!=="autoFocus"&&(ea.hasOwnProperty(st)?at!=null&&st==="onScroll"&&D$2("scroll",_e):at!=null&&ta(_e,st,at,ut))}switch(tt){case"input":Va(_e),db(_e,rt,!1);break;case"textarea":Va(_e),jb(_e);break;case"option":rt.value!=null&&_e.setAttribute("value",""+Sa(rt.value));break;case"select":_e.multiple=!!rt.multiple,st=rt.value,st!=null?fb(_e,!!rt.multiple,st,!1):rt.defaultValue!=null&&fb(_e,!!rt.multiple,rt.defaultValue,!0);break;default:typeof it.onClick=="function"&&(_e.onclick=Bf)}switch(tt){case"button":case"input":case"select":case"textarea":rt=!!rt.autoFocus;break e;case"img":rt=!0;break e;default:rt=!1}}rt&&(et.flags|=4)}et.ref!==null&&(et.flags|=512,et.flags|=2097152)}return S$2(et),null;case 6:if(_e&&et.stateNode!=null)Cj(_e,et,_e.memoizedProps,rt);else{if(typeof rt!="string"&&et.stateNode===null)throw Error(p$3(166));if(tt=xh(wh.current),xh(uh.current),Gg(et)){if(rt=et.stateNode,tt=et.memoizedProps,rt[Of]=et,(st=rt.nodeValue!==tt)&&(_e=xg,_e!==null))switch(_e.tag){case 3:Af(rt.nodeValue,tt,(_e.mode&1)!==0);break;case 5:_e.memoizedProps.suppressHydrationWarning!==!0&&Af(rt.nodeValue,tt,(_e.mode&1)!==0)}st&&(et.flags|=4)}else rt=(tt.nodeType===9?tt:tt.ownerDocument).createTextNode(rt),rt[Of]=et,et.stateNode=rt}return S$2(et),null;case 13:if(E$1(L$1),rt=et.memoizedState,_e===null||_e.memoizedState!==null&&_e.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&et.mode&1&&!(et.flags&128))Hg(),Ig(),et.flags|=98560,st=!1;else if(st=Gg(et),rt!==null&&rt.dehydrated!==null){if(_e===null){if(!st)throw Error(p$3(318));if(st=et.memoizedState,st=st!==null?st.dehydrated:null,!st)throw Error(p$3(317));st[Of]=et}else Ig(),!(et.flags&128)&&(et.memoizedState=null),et.flags|=4;S$2(et),st=!1}else zg!==null&&(Fj(zg),zg=null),st=!0;if(!st)return et.flags&65536?et:null}return et.flags&128?(et.lanes=tt,et):(rt=rt!==null,rt!==(_e!==null&&_e.memoizedState!==null)&&rt&&(et.child.flags|=8192,et.mode&1&&(_e===null||L$1.current&1?T$2===0&&(T$2=3):tj())),et.updateQueue!==null&&(et.flags|=4),S$2(et),null);case 4:return zh(),Aj(_e,et),_e===null&&sf(et.stateNode.containerInfo),S$2(et),null;case 10:return ah(et.type._context),S$2(et),null;case 17:return Zf(et.type)&&$f(),S$2(et),null;case 19:if(E$1(L$1),st=et.memoizedState,st===null)return S$2(et),null;if(rt=(et.flags&128)!==0,ut=st.rendering,ut===null)if(rt)Dj(st,!1);else{if(T$2!==0||_e!==null&&_e.flags&128)for(_e=et.child;_e!==null;){if(ut=Ch(_e),ut!==null){for(et.flags|=128,Dj(st,!1),rt=ut.updateQueue,rt!==null&&(et.updateQueue=rt,et.flags|=4),et.subtreeFlags=0,rt=tt,tt=et.child;tt!==null;)st=tt,_e=rt,st.flags&=14680066,ut=st.alternate,ut===null?(st.childLanes=0,st.lanes=_e,st.child=null,st.subtreeFlags=0,st.memoizedProps=null,st.memoizedState=null,st.updateQueue=null,st.dependencies=null,st.stateNode=null):(st.childLanes=ut.childLanes,st.lanes=ut.lanes,st.child=ut.child,st.subtreeFlags=0,st.deletions=null,st.memoizedProps=ut.memoizedProps,st.memoizedState=ut.memoizedState,st.updateQueue=ut.updateQueue,st.type=ut.type,_e=ut.dependencies,st.dependencies=_e===null?null:{lanes:_e.lanes,firstContext:_e.firstContext}),tt=tt.sibling;return G$2(L$1,L$1.current&1|2),et.child}_e=_e.sibling}st.tail!==null&&B$1()>Gj&&(et.flags|=128,rt=!0,Dj(st,!1),et.lanes=4194304)}else{if(!rt)if(_e=Ch(ut),_e!==null){if(et.flags|=128,rt=!0,tt=_e.updateQueue,tt!==null&&(et.updateQueue=tt,et.flags|=4),Dj(st,!0),st.tail===null&&st.tailMode==="hidden"&&!ut.alternate&&!I$2)return S$2(et),null}else 2*B$1()-st.renderingStartTime>Gj&&tt!==1073741824&&(et.flags|=128,rt=!0,Dj(st,!1),et.lanes=4194304);st.isBackwards?(ut.sibling=et.child,et.child=ut):(tt=st.last,tt!==null?tt.sibling=ut:et.child=ut,st.last=ut)}return st.tail!==null?(et=st.tail,st.rendering=et,st.tail=et.sibling,st.renderingStartTime=B$1(),et.sibling=null,tt=L$1.current,G$2(L$1,rt?tt&1|2:tt&1),et):(S$2(et),null);case 22:case 23:return Hj(),rt=et.memoizedState!==null,_e!==null&&_e.memoizedState!==null!==rt&&(et.flags|=8192),rt&&et.mode&1?fj&1073741824&&(S$2(et),et.subtreeFlags&6&&(et.flags|=8192)):S$2(et),null;case 24:return null;case 25:return null}throw Error(p$3(156,et.tag))}function Ij(_e,et){switch(wg(et),et.tag){case 1:return Zf(et.type)&&$f(),_e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 3:return zh(),E$1(Wf),E$1(H$1),Eh(),_e=et.flags,_e&65536&&!(_e&128)?(et.flags=_e&-65537|128,et):null;case 5:return Bh(et),null;case 13:if(E$1(L$1),_e=et.memoizedState,_e!==null&&_e.dehydrated!==null){if(et.alternate===null)throw Error(p$3(340));Ig()}return _e=et.flags,_e&65536?(et.flags=_e&-65537|128,et):null;case 19:return E$1(L$1),null;case 4:return zh(),null;case 10:return ah(et.type._context),null;case 22:case 23:return Hj(),null;case 24:return null;default:return null}}var Jj=!1,U$2=!1,Kj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Lj(_e,et){var tt=_e.ref;if(tt!==null)if(typeof tt=="function")try{tt(null)}catch(rt){W$2(_e,et,rt)}else tt.current=null}function Mj(_e,et,tt){try{tt()}catch(rt){W$2(_e,et,rt)}}var Nj=!1;function Oj(_e,et){if(Cf=dd,_e=Me(),Ne(_e)){if("selectionStart"in _e)var tt={start:_e.selectionStart,end:_e.selectionEnd};else e:{tt=(tt=_e.ownerDocument)&&tt.defaultView||window;var rt=tt.getSelection&&tt.getSelection();if(rt&&rt.rangeCount!==0){tt=rt.anchorNode;var it=rt.anchorOffset,st=rt.focusNode;rt=rt.focusOffset;try{tt.nodeType,st.nodeType}catch{tt=null;break e}var ut=0,ht=-1,at=-1,gt=0,bt=0,wt=_e,St=null;t:for(;;){for(var kt;wt!==tt||it!==0&&wt.nodeType!==3||(ht=ut+it),wt!==st||rt!==0&&wt.nodeType!==3||(at=ut+rt),wt.nodeType===3&&(ut+=wt.nodeValue.length),(kt=wt.firstChild)!==null;)St=wt,wt=kt;for(;;){if(wt===_e)break t;if(St===tt&&++gt===it&&(ht=ut),St===st&&++bt===rt&&(at=ut),(kt=wt.nextSibling)!==null)break;wt=St,St=wt.parentNode}wt=kt}tt=ht===-1||at===-1?null:{start:ht,end:at}}else tt=null}tt=tt||{start:0,end:0}}else tt=null;for(Df={focusedElem:_e,selectionRange:tt},dd=!1,V$2=et;V$2!==null;)if(et=V$2,_e=et.child,(et.subtreeFlags&1028)!==0&&_e!==null)_e.return=et,V$2=_e;else for(;V$2!==null;){et=V$2;try{var Rt=et.alternate;if(et.flags&1024)switch(et.tag){case 0:case 11:case 15:break;case 1:if(Rt!==null){var It=Rt.memoizedProps,Dt=Rt.memoizedState,Mt=et.stateNode,$t=Mt.getSnapshotBeforeUpdate(et.elementType===et.type?It:Ci(et.type,It),Dt);Mt.__reactInternalSnapshotBeforeUpdate=$t}break;case 3:var jt=et.stateNode.containerInfo;jt.nodeType===1?jt.textContent="":jt.nodeType===9&&jt.documentElement&&jt.removeChild(jt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$3(163))}}catch(Nt){W$2(et,et.return,Nt)}if(_e=et.sibling,_e!==null){_e.return=et.return,V$2=_e;break}V$2=et.return}return Rt=Nj,Nj=!1,Rt}function Pj(_e,et,tt){var rt=et.updateQueue;if(rt=rt!==null?rt.lastEffect:null,rt!==null){var it=rt=rt.next;do{if((it.tag&_e)===_e){var st=it.destroy;it.destroy=void 0,st!==void 0&&Mj(et,tt,st)}it=it.next}while(it!==rt)}}function Qj(_e,et){if(et=et.updateQueue,et=et!==null?et.lastEffect:null,et!==null){var tt=et=et.next;do{if((tt.tag&_e)===_e){var rt=tt.create;tt.destroy=rt()}tt=tt.next}while(tt!==et)}}function Rj(_e){var et=_e.ref;if(et!==null){var tt=_e.stateNode;switch(_e.tag){case 5:_e=tt;break;default:_e=tt}typeof et=="function"?et(_e):et.current=_e}}function Sj(_e){var et=_e.alternate;et!==null&&(_e.alternate=null,Sj(et)),_e.child=null,_e.deletions=null,_e.sibling=null,_e.tag===5&&(et=_e.stateNode,et!==null&&(delete et[Of],delete et[Pf],delete et[of],delete et[Qf],delete et[Rf])),_e.stateNode=null,_e.return=null,_e.dependencies=null,_e.memoizedProps=null,_e.memoizedState=null,_e.pendingProps=null,_e.stateNode=null,_e.updateQueue=null}function Tj(_e){return _e.tag===5||_e.tag===3||_e.tag===4}function Uj(_e){e:for(;;){for(;_e.sibling===null;){if(_e.return===null||Tj(_e.return))return null;_e=_e.return}for(_e.sibling.return=_e.return,_e=_e.sibling;_e.tag!==5&&_e.tag!==6&&_e.tag!==18;){if(_e.flags&2||_e.child===null||_e.tag===4)continue e;_e.child.return=_e,_e=_e.child}if(!(_e.flags&2))return _e.stateNode}}function Vj(_e,et,tt){var rt=_e.tag;if(rt===5||rt===6)_e=_e.stateNode,et?tt.nodeType===8?tt.parentNode.insertBefore(_e,et):tt.insertBefore(_e,et):(tt.nodeType===8?(et=tt.parentNode,et.insertBefore(_e,tt)):(et=tt,et.appendChild(_e)),tt=tt._reactRootContainer,tt!=null||et.onclick!==null||(et.onclick=Bf));else if(rt!==4&&(_e=_e.child,_e!==null))for(Vj(_e,et,tt),_e=_e.sibling;_e!==null;)Vj(_e,et,tt),_e=_e.sibling}function Wj(_e,et,tt){var rt=_e.tag;if(rt===5||rt===6)_e=_e.stateNode,et?tt.insertBefore(_e,et):tt.appendChild(_e);else if(rt!==4&&(_e=_e.child,_e!==null))for(Wj(_e,et,tt),_e=_e.sibling;_e!==null;)Wj(_e,et,tt),_e=_e.sibling}var X$3=null,Xj=!1;function Yj(_e,et,tt){for(tt=tt.child;tt!==null;)Zj(_e,et,tt),tt=tt.sibling}function Zj(_e,et,tt){if(lc&&typeof lc.onCommitFiberUnmount=="function")try{lc.onCommitFiberUnmount(kc,tt)}catch{}switch(tt.tag){case 5:U$2||Lj(tt,et);case 6:var rt=X$3,it=Xj;X$3=null,Yj(_e,et,tt),X$3=rt,Xj=it,X$3!==null&&(Xj?(_e=X$3,tt=tt.stateNode,_e.nodeType===8?_e.parentNode.removeChild(tt):_e.removeChild(tt)):X$3.removeChild(tt.stateNode));break;case 18:X$3!==null&&(Xj?(_e=X$3,tt=tt.stateNode,_e.nodeType===8?Kf(_e.parentNode,tt):_e.nodeType===1&&Kf(_e,tt),bd(_e)):Kf(X$3,tt.stateNode));break;case 4:rt=X$3,it=Xj,X$3=tt.stateNode.containerInfo,Xj=!0,Yj(_e,et,tt),X$3=rt,Xj=it;break;case 0:case 11:case 14:case 15:if(!U$2&&(rt=tt.updateQueue,rt!==null&&(rt=rt.lastEffect,rt!==null))){it=rt=rt.next;do{var st=it,ut=st.destroy;st=st.tag,ut!==void 0&&(st&2||st&4)&&Mj(tt,et,ut),it=it.next}while(it!==rt)}Yj(_e,et,tt);break;case 1:if(!U$2&&(Lj(tt,et),rt=tt.stateNode,typeof rt.componentWillUnmount=="function"))try{rt.props=tt.memoizedProps,rt.state=tt.memoizedState,rt.componentWillUnmount()}catch(ht){W$2(tt,et,ht)}Yj(_e,et,tt);break;case 21:Yj(_e,et,tt);break;case 22:tt.mode&1?(U$2=(rt=U$2)||tt.memoizedState!==null,Yj(_e,et,tt),U$2=rt):Yj(_e,et,tt);break;default:Yj(_e,et,tt)}}function ak(_e){var et=_e.updateQueue;if(et!==null){_e.updateQueue=null;var tt=_e.stateNode;tt===null&&(tt=_e.stateNode=new Kj),et.forEach(function(rt){var it=bk.bind(null,_e,rt);tt.has(rt)||(tt.add(rt),rt.then(it,it))})}}function ck(_e,et){var tt=et.deletions;if(tt!==null)for(var rt=0;rt<tt.length;rt++){var it=tt[rt];try{var st=_e,ut=et,ht=ut;e:for(;ht!==null;){switch(ht.tag){case 5:X$3=ht.stateNode,Xj=!1;break e;case 3:X$3=ht.stateNode.containerInfo,Xj=!0;break e;case 4:X$3=ht.stateNode.containerInfo,Xj=!0;break e}ht=ht.return}if(X$3===null)throw Error(p$3(160));Zj(st,ut,it),X$3=null,Xj=!1;var at=it.alternate;at!==null&&(at.return=null),it.return=null}catch(gt){W$2(it,et,gt)}}if(et.subtreeFlags&12854)for(et=et.child;et!==null;)dk(et,_e),et=et.sibling}function dk(_e,et){var tt=_e.alternate,rt=_e.flags;switch(_e.tag){case 0:case 11:case 14:case 15:if(ck(et,_e),ek(_e),rt&4){try{Pj(3,_e,_e.return),Qj(3,_e)}catch(It){W$2(_e,_e.return,It)}try{Pj(5,_e,_e.return)}catch(It){W$2(_e,_e.return,It)}}break;case 1:ck(et,_e),ek(_e),rt&512&&tt!==null&&Lj(tt,tt.return);break;case 5:if(ck(et,_e),ek(_e),rt&512&&tt!==null&&Lj(tt,tt.return),_e.flags&32){var it=_e.stateNode;try{ob(it,"")}catch(It){W$2(_e,_e.return,It)}}if(rt&4&&(it=_e.stateNode,it!=null)){var st=_e.memoizedProps,ut=tt!==null?tt.memoizedProps:st,ht=_e.type,at=_e.updateQueue;if(_e.updateQueue=null,at!==null)try{ht==="input"&&st.type==="radio"&&st.name!=null&&ab(it,st),vb(ht,ut);var gt=vb(ht,st);for(ut=0;ut<at.length;ut+=2){var bt=at[ut],wt=at[ut+1];bt==="style"?sb(it,wt):bt==="dangerouslySetInnerHTML"?nb(it,wt):bt==="children"?ob(it,wt):ta(it,bt,wt,gt)}switch(ht){case"input":bb(it,st);break;case"textarea":ib(it,st);break;case"select":var St=it._wrapperState.wasMultiple;it._wrapperState.wasMultiple=!!st.multiple;var kt=st.value;kt!=null?fb(it,!!st.multiple,kt,!1):St!==!!st.multiple&&(st.defaultValue!=null?fb(it,!!st.multiple,st.defaultValue,!0):fb(it,!!st.multiple,st.multiple?[]:"",!1))}it[Pf]=st}catch(It){W$2(_e,_e.return,It)}}break;case 6:if(ck(et,_e),ek(_e),rt&4){if(_e.stateNode===null)throw Error(p$3(162));it=_e.stateNode,st=_e.memoizedProps;try{it.nodeValue=st}catch(It){W$2(_e,_e.return,It)}}break;case 3:if(ck(et,_e),ek(_e),rt&4&&tt!==null&&tt.memoizedState.isDehydrated)try{bd(et.containerInfo)}catch(It){W$2(_e,_e.return,It)}break;case 4:ck(et,_e),ek(_e);break;case 13:ck(et,_e),ek(_e),it=_e.child,it.flags&8192&&(st=it.memoizedState!==null,it.stateNode.isHidden=st,!st||it.alternate!==null&&it.alternate.memoizedState!==null||(fk=B$1())),rt&4&&ak(_e);break;case 22:if(bt=tt!==null&&tt.memoizedState!==null,_e.mode&1?(U$2=(gt=U$2)||bt,ck(et,_e),U$2=gt):ck(et,_e),ek(_e),rt&8192){if(gt=_e.memoizedState!==null,(_e.stateNode.isHidden=gt)&&!bt&&_e.mode&1)for(V$2=_e,bt=_e.child;bt!==null;){for(wt=V$2=bt;V$2!==null;){switch(St=V$2,kt=St.child,St.tag){case 0:case 11:case 14:case 15:Pj(4,St,St.return);break;case 1:Lj(St,St.return);var Rt=St.stateNode;if(typeof Rt.componentWillUnmount=="function"){rt=St,tt=St.return;try{et=rt,Rt.props=et.memoizedProps,Rt.state=et.memoizedState,Rt.componentWillUnmount()}catch(It){W$2(rt,tt,It)}}break;case 5:Lj(St,St.return);break;case 22:if(St.memoizedState!==null){gk(wt);continue}}kt!==null?(kt.return=St,V$2=kt):gk(wt)}bt=bt.sibling}e:for(bt=null,wt=_e;;){if(wt.tag===5){if(bt===null){bt=wt;try{it=wt.stateNode,gt?(st=it.style,typeof st.setProperty=="function"?st.setProperty("display","none","important"):st.display="none"):(ht=wt.stateNode,at=wt.memoizedProps.style,ut=at!=null&&at.hasOwnProperty("display")?at.display:null,ht.style.display=rb("display",ut))}catch(It){W$2(_e,_e.return,It)}}}else if(wt.tag===6){if(bt===null)try{wt.stateNode.nodeValue=gt?"":wt.memoizedProps}catch(It){W$2(_e,_e.return,It)}}else if((wt.tag!==22&&wt.tag!==23||wt.memoizedState===null||wt===_e)&&wt.child!==null){wt.child.return=wt,wt=wt.child;continue}if(wt===_e)break e;for(;wt.sibling===null;){if(wt.return===null||wt.return===_e)break e;bt===wt&&(bt=null),wt=wt.return}bt===wt&&(bt=null),wt.sibling.return=wt.return,wt=wt.sibling}}break;case 19:ck(et,_e),ek(_e),rt&4&&ak(_e);break;case 21:break;default:ck(et,_e),ek(_e)}}function ek(_e){var et=_e.flags;if(et&2){try{e:{for(var tt=_e.return;tt!==null;){if(Tj(tt)){var rt=tt;break e}tt=tt.return}throw Error(p$3(160))}switch(rt.tag){case 5:var it=rt.stateNode;rt.flags&32&&(ob(it,""),rt.flags&=-33);var st=Uj(_e);Wj(_e,st,it);break;case 3:case 4:var ut=rt.stateNode.containerInfo,ht=Uj(_e);Vj(_e,ht,ut);break;default:throw Error(p$3(161))}}catch(at){W$2(_e,_e.return,at)}_e.flags&=-3}et&4096&&(_e.flags&=-4097)}function hk(_e,et,tt){V$2=_e,ik(_e)}function ik(_e,et,tt){for(var rt=(_e.mode&1)!==0;V$2!==null;){var it=V$2,st=it.child;if(it.tag===22&&rt){var ut=it.memoizedState!==null||Jj;if(!ut){var ht=it.alternate,at=ht!==null&&ht.memoizedState!==null||U$2;ht=Jj;var gt=U$2;if(Jj=ut,(U$2=at)&&!gt)for(V$2=it;V$2!==null;)ut=V$2,at=ut.child,ut.tag===22&&ut.memoizedState!==null?jk(it):at!==null?(at.return=ut,V$2=at):jk(it);for(;st!==null;)V$2=st,ik(st),st=st.sibling;V$2=it,Jj=ht,U$2=gt}kk(_e)}else it.subtreeFlags&8772&&st!==null?(st.return=it,V$2=st):kk(_e)}}function kk(_e){for(;V$2!==null;){var et=V$2;if(et.flags&8772){var tt=et.alternate;try{if(et.flags&8772)switch(et.tag){case 0:case 11:case 15:U$2||Qj(5,et);break;case 1:var rt=et.stateNode;if(et.flags&4&&!U$2)if(tt===null)rt.componentDidMount();else{var it=et.elementType===et.type?tt.memoizedProps:Ci(et.type,tt.memoizedProps);rt.componentDidUpdate(it,tt.memoizedState,rt.__reactInternalSnapshotBeforeUpdate)}var st=et.updateQueue;st!==null&&sh(et,st,rt);break;case 3:var ut=et.updateQueue;if(ut!==null){if(tt=null,et.child!==null)switch(et.child.tag){case 5:tt=et.child.stateNode;break;case 1:tt=et.child.stateNode}sh(et,ut,tt)}break;case 5:var ht=et.stateNode;if(tt===null&&et.flags&4){tt=ht;var at=et.memoizedProps;switch(et.type){case"button":case"input":case"select":case"textarea":at.autoFocus&&tt.focus();break;case"img":at.src&&(tt.src=at.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(et.memoizedState===null){var gt=et.alternate;if(gt!==null){var bt=gt.memoizedState;if(bt!==null){var wt=bt.dehydrated;wt!==null&&bd(wt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$3(163))}U$2||et.flags&512&&Rj(et)}catch(St){W$2(et,et.return,St)}}if(et===_e){V$2=null;break}if(tt=et.sibling,tt!==null){tt.return=et.return,V$2=tt;break}V$2=et.return}}function gk(_e){for(;V$2!==null;){var et=V$2;if(et===_e){V$2=null;break}var tt=et.sibling;if(tt!==null){tt.return=et.return,V$2=tt;break}V$2=et.return}}function jk(_e){for(;V$2!==null;){var et=V$2;try{switch(et.tag){case 0:case 11:case 15:var tt=et.return;try{Qj(4,et)}catch(at){W$2(et,tt,at)}break;case 1:var rt=et.stateNode;if(typeof rt.componentDidMount=="function"){var it=et.return;try{rt.componentDidMount()}catch(at){W$2(et,it,at)}}var st=et.return;try{Rj(et)}catch(at){W$2(et,st,at)}break;case 5:var ut=et.return;try{Rj(et)}catch(at){W$2(et,ut,at)}}}catch(at){W$2(et,et.return,at)}if(et===_e){V$2=null;break}var ht=et.sibling;if(ht!==null){ht.return=et.return,V$2=ht;break}V$2=et.return}}var lk=Math.ceil,mk=ua$1.ReactCurrentDispatcher,nk=ua$1.ReactCurrentOwner,ok=ua$1.ReactCurrentBatchConfig,K$1=0,Q$2=null,Y$2=null,Z$2=0,fj=0,ej=Uf(0),T$2=0,pk=null,rh=0,qk=0,rk=0,sk=null,tk=null,fk=0,Gj=1/0,uk=null,Oi=!1,Pi=null,Ri=null,vk=!1,wk=null,xk=0,yk=0,zk=null,Ak=-1,Bk=0;function R$1(){return K$1&6?B$1():Ak!==-1?Ak:Ak=B$1()}function yi(_e){return _e.mode&1?K$1&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Bk===0&&(Bk=yc()),Bk):(_e=C$1,_e!==0||(_e=window.event,_e=_e===void 0?16:jd(_e.type)),_e):1}function gi(_e,et,tt,rt){if(50<yk)throw yk=0,zk=null,Error(p$3(185));Ac(_e,tt,rt),(!(K$1&2)||_e!==Q$2)&&(_e===Q$2&&(!(K$1&2)&&(qk|=tt),T$2===4&&Ck(_e,Z$2)),Dk(_e,rt),tt===1&&K$1===0&&!(et.mode&1)&&(Gj=B$1()+500,fg&&jg()))}function Dk(_e,et){var tt=_e.callbackNode;wc(_e,et);var rt=uc(_e,_e===Q$2?Z$2:0);if(rt===0)tt!==null&&bc(tt),_e.callbackNode=null,_e.callbackPriority=0;else if(et=rt&-rt,_e.callbackPriority!==et){if(tt!=null&&bc(tt),et===1)_e.tag===0?ig(Ek.bind(null,_e)):hg(Ek.bind(null,_e)),Jf(function(){!(K$1&6)&&jg()}),tt=null;else{switch(Dc(rt)){case 1:tt=fc;break;case 4:tt=gc;break;case 16:tt=hc;break;case 536870912:tt=jc;break;default:tt=hc}tt=Fk(tt,Gk.bind(null,_e))}_e.callbackPriority=et,_e.callbackNode=tt}}function Gk(_e,et){if(Ak=-1,Bk=0,K$1&6)throw Error(p$3(327));var tt=_e.callbackNode;if(Hk()&&_e.callbackNode!==tt)return null;var rt=uc(_e,_e===Q$2?Z$2:0);if(rt===0)return null;if(rt&30||rt&_e.expiredLanes||et)et=Ik(_e,rt);else{et=rt;var it=K$1;K$1|=2;var st=Jk();(Q$2!==_e||Z$2!==et)&&(uk=null,Gj=B$1()+500,Kk(_e,et));do try{Lk();break}catch(ht){Mk(_e,ht)}while(!0);$g(),mk.current=st,K$1=it,Y$2!==null?et=0:(Q$2=null,Z$2=0,et=T$2)}if(et!==0){if(et===2&&(it=xc(_e),it!==0&&(rt=it,et=Nk(_e,it))),et===1)throw tt=pk,Kk(_e,0),Ck(_e,rt),Dk(_e,B$1()),tt;if(et===6)Ck(_e,rt);else{if(it=_e.current.alternate,!(rt&30)&&!Ok(it)&&(et=Ik(_e,rt),et===2&&(st=xc(_e),st!==0&&(rt=st,et=Nk(_e,st))),et===1))throw tt=pk,Kk(_e,0),Ck(_e,rt),Dk(_e,B$1()),tt;switch(_e.finishedWork=it,_e.finishedLanes=rt,et){case 0:case 1:throw Error(p$3(345));case 2:Pk(_e,tk,uk);break;case 3:if(Ck(_e,rt),(rt&130023424)===rt&&(et=fk+500-B$1(),10<et)){if(uc(_e,0)!==0)break;if(it=_e.suspendedLanes,(it&rt)!==rt){R$1(),_e.pingedLanes|=_e.suspendedLanes&it;break}_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),et);break}Pk(_e,tk,uk);break;case 4:if(Ck(_e,rt),(rt&4194240)===rt)break;for(et=_e.eventTimes,it=-1;0<rt;){var ut=31-oc(rt);st=1<<ut,ut=et[ut],ut>it&&(it=ut),rt&=~st}if(rt=it,rt=B$1()-rt,rt=(120>rt?120:480>rt?480:1080>rt?1080:1920>rt?1920:3e3>rt?3e3:4320>rt?4320:1960*lk(rt/1960))-rt,10<rt){_e.timeoutHandle=Ff(Pk.bind(null,_e,tk,uk),rt);break}Pk(_e,tk,uk);break;case 5:Pk(_e,tk,uk);break;default:throw Error(p$3(329))}}}return Dk(_e,B$1()),_e.callbackNode===tt?Gk.bind(null,_e):null}function Nk(_e,et){var tt=sk;return _e.current.memoizedState.isDehydrated&&(Kk(_e,et).flags|=256),_e=Ik(_e,et),_e!==2&&(et=tk,tk=tt,et!==null&&Fj(et)),_e}function Fj(_e){tk===null?tk=_e:tk.push.apply(tk,_e)}function Ok(_e){for(var et=_e;;){if(et.flags&16384){var tt=et.updateQueue;if(tt!==null&&(tt=tt.stores,tt!==null))for(var rt=0;rt<tt.length;rt++){var it=tt[rt],st=it.getSnapshot;it=it.value;try{if(!He(st(),it))return!1}catch{return!1}}}if(tt=et.child,et.subtreeFlags&16384&&tt!==null)tt.return=et,et=tt;else{if(et===_e)break;for(;et.sibling===null;){if(et.return===null||et.return===_e)return!0;et=et.return}et.sibling.return=et.return,et=et.sibling}}return!0}function Ck(_e,et){for(et&=~rk,et&=~qk,_e.suspendedLanes|=et,_e.pingedLanes&=~et,_e=_e.expirationTimes;0<et;){var tt=31-oc(et),rt=1<<tt;_e[tt]=-1,et&=~rt}}function Ek(_e){if(K$1&6)throw Error(p$3(327));Hk();var et=uc(_e,0);if(!(et&1))return Dk(_e,B$1()),null;var tt=Ik(_e,et);if(_e.tag!==0&&tt===2){var rt=xc(_e);rt!==0&&(et=rt,tt=Nk(_e,rt))}if(tt===1)throw tt=pk,Kk(_e,0),Ck(_e,et),Dk(_e,B$1()),tt;if(tt===6)throw Error(p$3(345));return _e.finishedWork=_e.current.alternate,_e.finishedLanes=et,Pk(_e,tk,uk),Dk(_e,B$1()),null}function Qk(_e,et){var tt=K$1;K$1|=1;try{return _e(et)}finally{K$1=tt,K$1===0&&(Gj=B$1()+500,fg&&jg())}}function Rk(_e){wk!==null&&wk.tag===0&&!(K$1&6)&&Hk();var et=K$1;K$1|=1;var tt=ok.transition,rt=C$1;try{if(ok.transition=null,C$1=1,_e)return _e()}finally{C$1=rt,ok.transition=tt,K$1=et,!(K$1&6)&&jg()}}function Hj(){fj=ej.current,E$1(ej)}function Kk(_e,et){_e.finishedWork=null,_e.finishedLanes=0;var tt=_e.timeoutHandle;if(tt!==-1&&(_e.timeoutHandle=-1,Gf(tt)),Y$2!==null)for(tt=Y$2.return;tt!==null;){var rt=tt;switch(wg(rt),rt.tag){case 1:rt=rt.type.childContextTypes,rt!=null&&$f();break;case 3:zh(),E$1(Wf),E$1(H$1),Eh();break;case 5:Bh(rt);break;case 4:zh();break;case 13:E$1(L$1);break;case 19:E$1(L$1);break;case 10:ah(rt.type._context);break;case 22:case 23:Hj()}tt=tt.return}if(Q$2=_e,Y$2=_e=Pg(_e.current,null),Z$2=fj=et,T$2=0,pk=null,rk=qk=rh=0,tk=sk=null,fh!==null){for(et=0;et<fh.length;et++)if(tt=fh[et],rt=tt.interleaved,rt!==null){tt.interleaved=null;var it=rt.next,st=tt.pending;if(st!==null){var ut=st.next;st.next=it,rt.next=ut}tt.pending=rt}fh=null}return _e}function Mk(_e,et){do{var tt=Y$2;try{if($g(),Fh.current=Rh,Ih){for(var rt=M$2.memoizedState;rt!==null;){var it=rt.queue;it!==null&&(it.pending=null),rt=rt.next}Ih=!1}if(Hh=0,O$2=N$1=M$2=null,Jh=!1,Kh=0,nk.current=null,tt===null||tt.return===null){T$2=1,pk=et,Y$2=null;break}e:{var st=_e,ut=tt.return,ht=tt,at=et;if(et=Z$2,ht.flags|=32768,at!==null&&typeof at=="object"&&typeof at.then=="function"){var gt=at,bt=ht,wt=bt.tag;if(!(bt.mode&1)&&(wt===0||wt===11||wt===15)){var St=bt.alternate;St?(bt.updateQueue=St.updateQueue,bt.memoizedState=St.memoizedState,bt.lanes=St.lanes):(bt.updateQueue=null,bt.memoizedState=null)}var kt=Ui(ut);if(kt!==null){kt.flags&=-257,Vi(kt,ut,ht,st,et),kt.mode&1&&Si(st,gt,et),et=kt,at=gt;var Rt=et.updateQueue;if(Rt===null){var It=new Set;It.add(at),et.updateQueue=It}else Rt.add(at);break e}else{if(!(et&1)){Si(st,gt,et),tj();break e}at=Error(p$3(426))}}else if(I$2&&ht.mode&1){var Dt=Ui(ut);if(Dt!==null){!(Dt.flags&65536)&&(Dt.flags|=256),Vi(Dt,ut,ht,st,et),Jg(Ji(at,ht));break e}}st=at=Ji(at,ht),T$2!==4&&(T$2=2),sk===null?sk=[st]:sk.push(st),st=ut;do{switch(st.tag){case 3:st.flags|=65536,et&=-et,st.lanes|=et;var Mt=Ni(st,at,et);ph(st,Mt);break e;case 1:ht=at;var $t=st.type,jt=st.stateNode;if(!(st.flags&128)&&(typeof $t.getDerivedStateFromError=="function"||jt!==null&&typeof jt.componentDidCatch=="function"&&(Ri===null||!Ri.has(jt)))){st.flags|=65536,et&=-et,st.lanes|=et;var Nt=Qi(st,ht,et);ph(st,Nt);break e}}st=st.return}while(st!==null)}Sk(tt)}catch(Ut){et=Ut,Y$2===tt&&tt!==null&&(Y$2=tt=tt.return);continue}break}while(!0)}function Jk(){var _e=mk.current;return mk.current=Rh,_e===null?Rh:_e}function tj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),Q$2===null||!(rh&268435455)&&!(qk&268435455)||Ck(Q$2,Z$2)}function Ik(_e,et){var tt=K$1;K$1|=2;var rt=Jk();(Q$2!==_e||Z$2!==et)&&(uk=null,Kk(_e,et));do try{Tk();break}catch(it){Mk(_e,it)}while(!0);if($g(),K$1=tt,mk.current=rt,Y$2!==null)throw Error(p$3(261));return Q$2=null,Z$2=0,T$2}function Tk(){for(;Y$2!==null;)Uk(Y$2)}function Lk(){for(;Y$2!==null&&!cc();)Uk(Y$2)}function Uk(_e){var et=Vk(_e.alternate,_e,fj);_e.memoizedProps=_e.pendingProps,et===null?Sk(_e):Y$2=et,nk.current=null}function Sk(_e){var et=_e;do{var tt=et.alternate;if(_e=et.return,et.flags&32768){if(tt=Ij(tt,et),tt!==null){tt.flags&=32767,Y$2=tt;return}if(_e!==null)_e.flags|=32768,_e.subtreeFlags=0,_e.deletions=null;else{T$2=6,Y$2=null;return}}else if(tt=Ej(tt,et,fj),tt!==null){Y$2=tt;return}if(et=et.sibling,et!==null){Y$2=et;return}Y$2=et=_e}while(et!==null);T$2===0&&(T$2=5)}function Pk(_e,et,tt){var rt=C$1,it=ok.transition;try{ok.transition=null,C$1=1,Wk(_e,et,tt,rt)}finally{ok.transition=it,C$1=rt}return null}function Wk(_e,et,tt,rt){do Hk();while(wk!==null);if(K$1&6)throw Error(p$3(327));tt=_e.finishedWork;var it=_e.finishedLanes;if(tt===null)return null;if(_e.finishedWork=null,_e.finishedLanes=0,tt===_e.current)throw Error(p$3(177));_e.callbackNode=null,_e.callbackPriority=0;var st=tt.lanes|tt.childLanes;if(Bc(_e,st),_e===Q$2&&(Y$2=Q$2=null,Z$2=0),!(tt.subtreeFlags&2064)&&!(tt.flags&2064)||vk||(vk=!0,Fk(hc,function(){return Hk(),null})),st=(tt.flags&15990)!==0,tt.subtreeFlags&15990||st){st=ok.transition,ok.transition=null;var ut=C$1;C$1=1;var ht=K$1;K$1|=4,nk.current=null,Oj(_e,tt),dk(tt,_e),Oe(Df),dd=!!Cf,Df=Cf=null,_e.current=tt,hk(tt),dc(),K$1=ht,C$1=ut,ok.transition=st}else _e.current=tt;if(vk&&(vk=!1,wk=_e,xk=it),st=_e.pendingLanes,st===0&&(Ri=null),mc(tt.stateNode),Dk(_e,B$1()),et!==null)for(rt=_e.onRecoverableError,tt=0;tt<et.length;tt++)it=et[tt],rt(it.value,{componentStack:it.stack,digest:it.digest});if(Oi)throw Oi=!1,_e=Pi,Pi=null,_e;return xk&1&&_e.tag!==0&&Hk(),st=_e.pendingLanes,st&1?_e===zk?yk++:(yk=0,zk=_e):yk=0,jg(),null}function Hk(){if(wk!==null){var _e=Dc(xk),et=ok.transition,tt=C$1;try{if(ok.transition=null,C$1=16>_e?16:_e,wk===null)var rt=!1;else{if(_e=wk,wk=null,xk=0,K$1&6)throw Error(p$3(331));var it=K$1;for(K$1|=4,V$2=_e.current;V$2!==null;){var st=V$2,ut=st.child;if(V$2.flags&16){var ht=st.deletions;if(ht!==null){for(var at=0;at<ht.length;at++){var gt=ht[at];for(V$2=gt;V$2!==null;){var bt=V$2;switch(bt.tag){case 0:case 11:case 15:Pj(8,bt,st)}var wt=bt.child;if(wt!==null)wt.return=bt,V$2=wt;else for(;V$2!==null;){bt=V$2;var St=bt.sibling,kt=bt.return;if(Sj(bt),bt===gt){V$2=null;break}if(St!==null){St.return=kt,V$2=St;break}V$2=kt}}}var Rt=st.alternate;if(Rt!==null){var It=Rt.child;if(It!==null){Rt.child=null;do{var Dt=It.sibling;It.sibling=null,It=Dt}while(It!==null)}}V$2=st}}if(st.subtreeFlags&2064&&ut!==null)ut.return=st,V$2=ut;else e:for(;V$2!==null;){if(st=V$2,st.flags&2048)switch(st.tag){case 0:case 11:case 15:Pj(9,st,st.return)}var Mt=st.sibling;if(Mt!==null){Mt.return=st.return,V$2=Mt;break e}V$2=st.return}}var $t=_e.current;for(V$2=$t;V$2!==null;){ut=V$2;var jt=ut.child;if(ut.subtreeFlags&2064&&jt!==null)jt.return=ut,V$2=jt;else e:for(ut=$t;V$2!==null;){if(ht=V$2,ht.flags&2048)try{switch(ht.tag){case 0:case 11:case 15:Qj(9,ht)}}catch(Ut){W$2(ht,ht.return,Ut)}if(ht===ut){V$2=null;break e}var Nt=ht.sibling;if(Nt!==null){Nt.return=ht.return,V$2=Nt;break e}V$2=ht.return}}if(K$1=it,jg(),lc&&typeof lc.onPostCommitFiberRoot=="function")try{lc.onPostCommitFiberRoot(kc,_e)}catch{}rt=!0}return rt}finally{C$1=tt,ok.transition=et}}return!1}function Xk(_e,et,tt){et=Ji(tt,et),et=Ni(_e,et,1),_e=nh(_e,et,1),et=R$1(),_e!==null&&(Ac(_e,1,et),Dk(_e,et))}function W$2(_e,et,tt){if(_e.tag===3)Xk(_e,_e,tt);else for(;et!==null;){if(et.tag===3){Xk(et,_e,tt);break}else if(et.tag===1){var rt=et.stateNode;if(typeof et.type.getDerivedStateFromError=="function"||typeof rt.componentDidCatch=="function"&&(Ri===null||!Ri.has(rt))){_e=Ji(tt,_e),_e=Qi(et,_e,1),et=nh(et,_e,1),_e=R$1(),et!==null&&(Ac(et,1,_e),Dk(et,_e));break}}et=et.return}}function Ti(_e,et,tt){var rt=_e.pingCache;rt!==null&&rt.delete(et),et=R$1(),_e.pingedLanes|=_e.suspendedLanes&tt,Q$2===_e&&(Z$2&tt)===tt&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$1()-fk?Kk(_e,0):rk|=tt),Dk(_e,et)}function Yk(_e,et){et===0&&(_e.mode&1?(et=sc,sc<<=1,!(sc&130023424)&&(sc=4194304)):et=1);var tt=R$1();_e=ih(_e,et),_e!==null&&(Ac(_e,et,tt),Dk(_e,tt))}function uj(_e){var et=_e.memoizedState,tt=0;et!==null&&(tt=et.retryLane),Yk(_e,tt)}function bk(_e,et){var tt=0;switch(_e.tag){case 13:var rt=_e.stateNode,it=_e.memoizedState;it!==null&&(tt=it.retryLane);break;case 19:rt=_e.stateNode;break;default:throw Error(p$3(314))}rt!==null&&rt.delete(et),Yk(_e,tt)}var Vk;Vk=function(_e,et,tt){if(_e!==null)if(_e.memoizedProps!==et.pendingProps||Wf.current)dh=!0;else{if(!(_e.lanes&tt)&&!(et.flags&128))return dh=!1,yj(_e,et,tt);dh=!!(_e.flags&131072)}else dh=!1,I$2&&et.flags&1048576&&ug(et,ng,et.index);switch(et.lanes=0,et.tag){case 2:var rt=et.type;ij(_e,et),_e=et.pendingProps;var it=Yf(et,H$1.current);ch(et,tt),it=Nh(null,et,rt,_e,it,tt);var st=Sh();return et.flags|=1,typeof it=="object"&&it!==null&&typeof it.render=="function"&&it.$$typeof===void 0?(et.tag=1,et.memoizedState=null,et.updateQueue=null,Zf(rt)?(st=!0,cg(et)):st=!1,et.memoizedState=it.state!==null&&it.state!==void 0?it.state:null,kh(et),it.updater=Ei,et.stateNode=it,it._reactInternals=et,Ii(et,rt,_e,tt),et=jj(null,et,rt,!0,st,tt)):(et.tag=0,I$2&&st&&vg(et),Xi(null,et,it,tt),et=et.child),et;case 16:rt=et.elementType;e:{switch(ij(_e,et),_e=et.pendingProps,it=rt._init,rt=it(rt._payload),et.type=rt,it=et.tag=Zk(rt),_e=Ci(rt,_e),it){case 0:et=cj(null,et,rt,_e,tt);break e;case 1:et=hj(null,et,rt,_e,tt);break e;case 11:et=Yi(null,et,rt,_e,tt);break e;case 14:et=$i(null,et,rt,Ci(rt.type,_e),tt);break e}throw Error(p$3(306,rt,""))}return et;case 0:return rt=et.type,it=et.pendingProps,it=et.elementType===rt?it:Ci(rt,it),cj(_e,et,rt,it,tt);case 1:return rt=et.type,it=et.pendingProps,it=et.elementType===rt?it:Ci(rt,it),hj(_e,et,rt,it,tt);case 3:e:{if(kj(et),_e===null)throw Error(p$3(387));rt=et.pendingProps,st=et.memoizedState,it=st.element,lh(_e,et),qh(et,rt,null,tt);var ut=et.memoizedState;if(rt=ut.element,st.isDehydrated)if(st={element:rt,isDehydrated:!1,cache:ut.cache,pendingSuspenseBoundaries:ut.pendingSuspenseBoundaries,transitions:ut.transitions},et.updateQueue.baseState=st,et.memoizedState=st,et.flags&256){it=Ji(Error(p$3(423)),et),et=lj(_e,et,rt,tt,it);break e}else if(rt!==it){it=Ji(Error(p$3(424)),et),et=lj(_e,et,rt,tt,it);break e}else for(yg=Lf(et.stateNode.containerInfo.firstChild),xg=et,I$2=!0,zg=null,tt=Vg(et,null,rt,tt),et.child=tt;tt;)tt.flags=tt.flags&-3|4096,tt=tt.sibling;else{if(Ig(),rt===it){et=Zi(_e,et,tt);break e}Xi(_e,et,rt,tt)}et=et.child}return et;case 5:return Ah(et),_e===null&&Eg(et),rt=et.type,it=et.pendingProps,st=_e!==null?_e.memoizedProps:null,ut=it.children,Ef(rt,it)?ut=null:st!==null&&Ef(rt,st)&&(et.flags|=32),gj(_e,et),Xi(_e,et,ut,tt),et.child;case 6:return _e===null&&Eg(et),null;case 13:return oj(_e,et,tt);case 4:return yh(et,et.stateNode.containerInfo),rt=et.pendingProps,_e===null?et.child=Ug(et,null,rt,tt):Xi(_e,et,rt,tt),et.child;case 11:return rt=et.type,it=et.pendingProps,it=et.elementType===rt?it:Ci(rt,it),Yi(_e,et,rt,it,tt);case 7:return Xi(_e,et,et.pendingProps,tt),et.child;case 8:return Xi(_e,et,et.pendingProps.children,tt),et.child;case 12:return Xi(_e,et,et.pendingProps.children,tt),et.child;case 10:e:{if(rt=et.type._context,it=et.pendingProps,st=et.memoizedProps,ut=it.value,G$2(Wg,rt._currentValue),rt._currentValue=ut,st!==null)if(He(st.value,ut)){if(st.children===it.children&&!Wf.current){et=Zi(_e,et,tt);break e}}else for(st=et.child,st!==null&&(st.return=et);st!==null;){var ht=st.dependencies;if(ht!==null){ut=st.child;for(var at=ht.firstContext;at!==null;){if(at.context===rt){if(st.tag===1){at=mh(-1,tt&-tt),at.tag=2;var gt=st.updateQueue;if(gt!==null){gt=gt.shared;var bt=gt.pending;bt===null?at.next=at:(at.next=bt.next,bt.next=at),gt.pending=at}}st.lanes|=tt,at=st.alternate,at!==null&&(at.lanes|=tt),bh(st.return,tt,et),ht.lanes|=tt;break}at=at.next}}else if(st.tag===10)ut=st.type===et.type?null:st.child;else if(st.tag===18){if(ut=st.return,ut===null)throw Error(p$3(341));ut.lanes|=tt,ht=ut.alternate,ht!==null&&(ht.lanes|=tt),bh(ut,tt,et),ut=st.sibling}else ut=st.child;if(ut!==null)ut.return=st;else for(ut=st;ut!==null;){if(ut===et){ut=null;break}if(st=ut.sibling,st!==null){st.return=ut.return,ut=st;break}ut=ut.return}st=ut}Xi(_e,et,it.children,tt),et=et.child}return et;case 9:return it=et.type,rt=et.pendingProps.children,ch(et,tt),it=eh(it),rt=rt(it),et.flags|=1,Xi(_e,et,rt,tt),et.child;case 14:return rt=et.type,it=Ci(rt,et.pendingProps),it=Ci(rt.type,it),$i(_e,et,rt,it,tt);case 15:return bj(_e,et,et.type,et.pendingProps,tt);case 17:return rt=et.type,it=et.pendingProps,it=et.elementType===rt?it:Ci(rt,it),ij(_e,et),et.tag=1,Zf(rt)?(_e=!0,cg(et)):_e=!1,ch(et,tt),Gi(et,rt,it),Ii(et,rt,it,tt),jj(null,et,rt,!0,_e,tt);case 19:return xj(_e,et,tt);case 22:return dj(_e,et,tt)}throw Error(p$3(156,et.tag))};function Fk(_e,et){return ac(_e,et)}function $k(_e,et,tt,rt){this.tag=_e,this.key=tt,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=et,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=rt,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(_e,et,tt,rt){return new $k(_e,et,tt,rt)}function aj(_e){return _e=_e.prototype,!(!_e||!_e.isReactComponent)}function Zk(_e){if(typeof _e=="function")return aj(_e)?1:0;if(_e!=null){if(_e=_e.$$typeof,_e===Da)return 11;if(_e===Ga)return 14}return 2}function Pg(_e,et){var tt=_e.alternate;return tt===null?(tt=Bg(_e.tag,et,_e.key,_e.mode),tt.elementType=_e.elementType,tt.type=_e.type,tt.stateNode=_e.stateNode,tt.alternate=_e,_e.alternate=tt):(tt.pendingProps=et,tt.type=_e.type,tt.flags=0,tt.subtreeFlags=0,tt.deletions=null),tt.flags=_e.flags&14680064,tt.childLanes=_e.childLanes,tt.lanes=_e.lanes,tt.child=_e.child,tt.memoizedProps=_e.memoizedProps,tt.memoizedState=_e.memoizedState,tt.updateQueue=_e.updateQueue,et=_e.dependencies,tt.dependencies=et===null?null:{lanes:et.lanes,firstContext:et.firstContext},tt.sibling=_e.sibling,tt.index=_e.index,tt.ref=_e.ref,tt}function Rg(_e,et,tt,rt,it,st){var ut=2;if(rt=_e,typeof _e=="function")aj(_e)&&(ut=1);else if(typeof _e=="string")ut=5;else e:switch(_e){case ya:return Tg(tt.children,it,st,et);case za:ut=8,it|=8;break;case Aa:return _e=Bg(12,tt,et,it|2),_e.elementType=Aa,_e.lanes=st,_e;case Ea:return _e=Bg(13,tt,et,it),_e.elementType=Ea,_e.lanes=st,_e;case Fa:return _e=Bg(19,tt,et,it),_e.elementType=Fa,_e.lanes=st,_e;case Ia:return pj(tt,it,st,et);default:if(typeof _e=="object"&&_e!==null)switch(_e.$$typeof){case Ba:ut=10;break e;case Ca:ut=9;break e;case Da:ut=11;break e;case Ga:ut=14;break e;case Ha:ut=16,rt=null;break e}throw Error(p$3(130,_e==null?_e:typeof _e,""))}return et=Bg(ut,tt,et,it),et.elementType=_e,et.type=rt,et.lanes=st,et}function Tg(_e,et,tt,rt){return _e=Bg(7,_e,rt,et),_e.lanes=tt,_e}function pj(_e,et,tt,rt){return _e=Bg(22,_e,rt,et),_e.elementType=Ia,_e.lanes=tt,_e.stateNode={isHidden:!1},_e}function Qg(_e,et,tt){return _e=Bg(6,_e,null,et),_e.lanes=tt,_e}function Sg(_e,et,tt){return et=Bg(4,_e.children!==null?_e.children:[],_e.key,et),et.lanes=tt,et.stateNode={containerInfo:_e.containerInfo,pendingChildren:null,implementation:_e.implementation},et}function al(_e,et,tt,rt,it){this.tag=et,this.containerInfo=_e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc(0),this.expirationTimes=zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc(0),this.identifierPrefix=rt,this.onRecoverableError=it,this.mutableSourceEagerHydrationData=null}function bl(_e,et,tt,rt,it,st,ut,ht,at){return _e=new al(_e,et,tt,ht,at),et===1?(et=1,st===!0&&(et|=8)):et=0,st=Bg(3,null,null,et),_e.current=st,st.stateNode=_e,st.memoizedState={element:rt,isDehydrated:tt,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(st),_e}function cl(_e,et,tt){var rt=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:rt==null?null:""+rt,children:_e,containerInfo:et,implementation:tt}}function dl(_e){if(!_e)return Vf;_e=_e._reactInternals;e:{if(Vb(_e)!==_e||_e.tag!==1)throw Error(p$3(170));var et=_e;do{switch(et.tag){case 3:et=et.stateNode.context;break e;case 1:if(Zf(et.type)){et=et.stateNode.__reactInternalMemoizedMergedChildContext;break e}}et=et.return}while(et!==null);throw Error(p$3(171))}if(_e.tag===1){var tt=_e.type;if(Zf(tt))return bg(_e,tt,et)}return et}function el(_e,et,tt,rt,it,st,ut,ht,at){return _e=bl(tt,rt,!0,_e,it,st,ut,ht,at),_e.context=dl(null),tt=_e.current,rt=R$1(),it=yi(tt),st=mh(rt,it),st.callback=et??null,nh(tt,st,it),_e.current.lanes=it,Ac(_e,it,rt),Dk(_e,rt),_e}function fl(_e,et,tt,rt){var it=et.current,st=R$1(),ut=yi(it);return tt=dl(tt),et.context===null?et.context=tt:et.pendingContext=tt,et=mh(st,ut),et.payload={element:_e},rt=rt===void 0?null:rt,rt!==null&&(et.callback=rt),_e=nh(it,et,ut),_e!==null&&(gi(_e,it,ut,st),oh(_e,it,ut)),ut}function gl(_e){if(_e=_e.current,!_e.child)return null;switch(_e.child.tag){case 5:return _e.child.stateNode;default:return _e.child.stateNode}}function hl(_e,et){if(_e=_e.memoizedState,_e!==null&&_e.dehydrated!==null){var tt=_e.retryLane;_e.retryLane=tt!==0&&tt<et?tt:et}}function il(_e,et){hl(_e,et),(_e=_e.alternate)&&hl(_e,et)}function jl(){return null}var kl=typeof reportError=="function"?reportError:function(_e){console.error(_e)};function ll(_e){this._internalRoot=_e}ml.prototype.render=ll.prototype.render=function(_e){var et=this._internalRoot;if(et===null)throw Error(p$3(409));fl(_e,et,null,null)};ml.prototype.unmount=ll.prototype.unmount=function(){var _e=this._internalRoot;if(_e!==null){this._internalRoot=null;var et=_e.containerInfo;Rk(function(){fl(null,_e,null,null)}),et[uf]=null}};function ml(_e){this._internalRoot=_e}ml.prototype.unstable_scheduleHydration=function(_e){if(_e){var et=Hc();_e={blockedOn:null,target:_e,priority:et};for(var tt=0;tt<Qc.length&&et!==0&&et<Qc[tt].priority;tt++);Qc.splice(tt,0,_e),tt===0&&Vc(_e)}};function nl(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11)}function ol(_e){return!(!_e||_e.nodeType!==1&&_e.nodeType!==9&&_e.nodeType!==11&&(_e.nodeType!==8||_e.nodeValue!==" react-mount-point-unstable "))}function pl(){}function ql(_e,et,tt,rt,it){if(it){if(typeof rt=="function"){var st=rt;rt=function(){var gt=gl(ut);st.call(gt)}}var ut=el(et,rt,_e,0,null,!1,!1,"",pl);return _e._reactRootContainer=ut,_e[uf]=ut.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(),ut}for(;it=_e.lastChild;)_e.removeChild(it);if(typeof rt=="function"){var ht=rt;rt=function(){var gt=gl(at);ht.call(gt)}}var at=bl(_e,0,!1,null,null,!1,!1,"",pl);return _e._reactRootContainer=at,_e[uf]=at.current,sf(_e.nodeType===8?_e.parentNode:_e),Rk(function(){fl(et,at,tt,rt)}),at}function rl(_e,et,tt,rt,it){var st=tt._reactRootContainer;if(st){var ut=st;if(typeof it=="function"){var ht=it;it=function(){var at=gl(ut);ht.call(at)}}fl(et,ut,_e,it)}else ut=ql(tt,et,_e,it,rt);return gl(ut)}Ec=function(_e){switch(_e.tag){case 3:var et=_e.stateNode;if(et.current.memoizedState.isDehydrated){var tt=tc(et.pendingLanes);tt!==0&&(Cc(et,tt|1),Dk(et,B$1()),!(K$1&6)&&(Gj=B$1()+500,jg()))}break;case 13:Rk(function(){var rt=ih(_e,1);if(rt!==null){var it=R$1();gi(rt,_e,1,it)}}),il(_e,1)}};Fc=function(_e){if(_e.tag===13){var et=ih(_e,134217728);if(et!==null){var tt=R$1();gi(et,_e,134217728,tt)}il(_e,134217728)}};Gc=function(_e){if(_e.tag===13){var et=yi(_e),tt=ih(_e,et);if(tt!==null){var rt=R$1();gi(tt,_e,et,rt)}il(_e,et)}};Hc=function(){return C$1};Ic=function(_e,et){var tt=C$1;try{return C$1=_e,et()}finally{C$1=tt}};yb=function(_e,et,tt){switch(et){case"input":if(bb(_e,tt),et=tt.name,tt.type==="radio"&&et!=null){for(tt=_e;tt.parentNode;)tt=tt.parentNode;for(tt=tt.querySelectorAll("input[name="+JSON.stringify(""+et)+'][type="radio"]'),et=0;et<tt.length;et++){var rt=tt[et];if(rt!==_e&&rt.form===_e.form){var it=Db(rt);if(!it)throw Error(p$3(90));Wa(rt),bb(rt,it)}}}break;case"textarea":ib(_e,tt);break;case"select":et=tt.value,et!=null&&fb(_e,!!tt.multiple,et,!1)}};Gb=Qk;Hb=Rk;var sl={usingClientEntryPoint:!1,Events:[Cb,ue$1,Db,Eb,Fb,Qk]},tl={findFiberByHostInstance:Wc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ul={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(_e){return _e=Zb(_e),_e===null?null:_e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||jl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{kc=vl.inject(ul),lc=vl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sl;reactDom_production_min.createPortal=function(_e,et){var tt=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nl(et))throw Error(p$3(200));return cl(_e,et,null,tt)};reactDom_production_min.createRoot=function(_e,et){if(!nl(_e))throw Error(p$3(299));var tt=!1,rt="",it=kl;return et!=null&&(et.unstable_strictMode===!0&&(tt=!0),et.identifierPrefix!==void 0&&(rt=et.identifierPrefix),et.onRecoverableError!==void 0&&(it=et.onRecoverableError)),et=bl(_e,1,!1,null,null,tt,!1,rt,it),_e[uf]=et.current,sf(_e.nodeType===8?_e.parentNode:_e),new ll(et)};reactDom_production_min.findDOMNode=function(_e){if(_e==null)return null;if(_e.nodeType===1)return _e;var et=_e._reactInternals;if(et===void 0)throw typeof _e.render=="function"?Error(p$3(188)):(_e=Object.keys(_e).join(","),Error(p$3(268,_e)));return _e=Zb(et),_e=_e===null?null:_e.stateNode,_e};reactDom_production_min.flushSync=function(_e){return Rk(_e)};reactDom_production_min.hydrate=function(_e,et,tt){if(!ol(et))throw Error(p$3(200));return rl(null,_e,et,!0,tt)};reactDom_production_min.hydrateRoot=function(_e,et,tt){if(!nl(_e))throw Error(p$3(405));var rt=tt!=null&&tt.hydratedSources||null,it=!1,st="",ut=kl;if(tt!=null&&(tt.unstable_strictMode===!0&&(it=!0),tt.identifierPrefix!==void 0&&(st=tt.identifierPrefix),tt.onRecoverableError!==void 0&&(ut=tt.onRecoverableError)),et=el(et,null,_e,1,tt??null,it,!1,st,ut),_e[uf]=et.current,sf(_e),rt)for(_e=0;_e<rt.length;_e++)tt=rt[_e],it=tt._getVersion,it=it(tt._source),et.mutableSourceEagerHydrationData==null?et.mutableSourceEagerHydrationData=[tt,it]:et.mutableSourceEagerHydrationData.push(tt,it);return new ml(et)};reactDom_production_min.render=function(_e,et,tt){if(!ol(et))throw Error(p$3(200));return rl(null,_e,et,!1,tt)};reactDom_production_min.unmountComponentAtNode=function(_e){if(!ol(_e))throw Error(p$3(40));return _e._reactRootContainer?(Rk(function(){rl(null,null,_e,!1,function(){_e._reactRootContainer=null,_e[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Qk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(_e,et,tt,rt){if(!ol(tt))throw Error(p$3(200));if(_e==null||_e._reactInternals===void 0)throw Error(p$3(38));return rl(_e,et,tt,!1,rt)};reactDom_production_min.version="18.3.1-next-f1338f8080-20240426";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(_e){console.error(_e)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var m$3=reactDomExports;client.createRoot=m$3.createRoot,client.hydrateRoot=m$3.hydrateRoot;let e$2={data:""},t$3=_e=>typeof window=="object"?((_e?_e.querySelector("#_goober"):window._goober)||Object.assign((_e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:_e||e$2,l$2=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,a$2=/\/\*[^]*?\*\/|  +/g,n$4=/\n+/g,o$2=(_e,et)=>{let tt="",rt="",it="";for(let st in _e){let ut=_e[st];st[0]=="@"?st[1]=="i"?tt=st+" "+ut+";":rt+=st[1]=="f"?o$2(ut,st):st+"{"+o$2(ut,st[1]=="k"?"":et)+"}":typeof ut=="object"?rt+=o$2(ut,et?et.replace(/([^,])+/g,ht=>st.replace(/(^:.*)|([^,])+/g,at=>/&/.test(at)?at.replace(/&/g,ht):ht?ht+" "+at:at)):st):ut!=null&&(st=/^--/.test(st)?st:st.replace(/[A-Z]/g,"-$&").toLowerCase(),it+=o$2.p?o$2.p(st,ut):st+":"+ut+";")}return tt+(et&&it?et+"{"+it+"}":it)+rt},c$3={},s$3=_e=>{if(typeof _e=="object"){let et="";for(let tt in _e)et+=tt+s$3(_e[tt]);return et}return _e},i$2=(_e,et,tt,rt,it)=>{let st=s$3(_e),ut=c$3[st]||(c$3[st]=(at=>{let gt=0,bt=11;for(;gt<at.length;)bt=101*bt+at.charCodeAt(gt++)>>>0;return"go"+bt})(st));if(!c$3[ut]){let at=st!==_e?_e:(gt=>{let bt,wt,St=[{}];for(;bt=l$2.exec(gt.replace(a$2,""));)bt[4]?St.shift():bt[3]?(wt=bt[3].replace(n$4," ").trim(),St.unshift(St[0][wt]=St[0][wt]||{})):St[0][bt[1]]=bt[2].replace(n$4," ").trim();return St[0]})(_e);c$3[ut]=o$2(it?{["@keyframes "+ut]:at}:at,tt?"":"."+ut)}let ht=tt&&c$3.g?c$3.g:null;return tt&&(c$3.g=c$3[ut]),((at,gt,bt,wt)=>{wt?gt.data=gt.data.replace(wt,at):gt.data.indexOf(at)===-1&&(gt.data=bt?at+gt.data:gt.data+at)})(c$3[ut],et,rt,ht),ut},p$2=(_e,et,tt)=>_e.reduce((rt,it,st)=>{let ut=et[st];if(ut&&ut.call){let ht=ut(tt),at=ht&&ht.props&&ht.props.className||/^go/.test(ht)&&ht;ut=at?"."+at:ht&&typeof ht=="object"?ht.props?"":o$2(ht,""):ht===!1?"":ht}return rt+it+(ut??"")},"");function u$2(_e){let et=this||{},tt=_e.call?_e(et.p):_e;return i$2(tt.unshift?tt.raw?p$2(tt,[].slice.call(arguments,1),et.p):tt.reduce((rt,it)=>Object.assign(rt,it&&it.call?it(et.p):it),{}):tt,t$3(et.target),et.g,et.o,et.k)}let d$2,f$2,g$2;u$2.bind({g:1});let h$4=u$2.bind({k:1});function m$2(_e,et,tt,rt){o$2.p=et,d$2=_e,f$2=tt,g$2=rt}function j$1(_e,et){let tt=this||{};return function(){let rt=arguments;function it(st,ut){let ht=Object.assign({},st),at=ht.className||it.className;tt.p=Object.assign({theme:f$2&&f$2()},ht),tt.o=/ *go\d+/.test(at),ht.className=u$2.apply(tt,rt)+(at?" "+at:"");let gt=_e;return _e[0]&&(gt=ht.as||_e,delete ht.as),g$2&&gt[0]&&g$2(ht),d$2(gt,ht)}return it}}var W$1=_e=>typeof _e=="function",T$1=(_e,et)=>W$1(_e)?_e(et):_e,U$1=(()=>{let _e=0;return()=>(++_e).toString()})(),b$2=(()=>{let _e;return()=>{if(_e===void 0&&typeof window<"u"){let et=matchMedia("(prefers-reduced-motion: reduce)");_e=!et||et.matches}return _e}})(),Q$1=20,S$1=new Map,X$2=1e3,$$1=_e=>{if(S$1.has(_e))return;let et=setTimeout(()=>{S$1.delete(_e),u$1({type:4,toastId:_e})},X$2);S$1.set(_e,et)},J$1=_e=>{let et=S$1.get(_e);et&&clearTimeout(et)},v$3=(_e,et)=>{switch(et.type){case 0:return{..._e,toasts:[et.toast,..._e.toasts].slice(0,Q$1)};case 1:return et.toast.id&&J$1(et.toast.id),{..._e,toasts:_e.toasts.map(st=>st.id===et.toast.id?{...st,...et.toast}:st)};case 2:let{toast:tt}=et;return _e.toasts.find(st=>st.id===tt.id)?v$3(_e,{type:1,toast:tt}):v$3(_e,{type:0,toast:tt});case 3:let{toastId:rt}=et;return rt?$$1(rt):_e.toasts.forEach(st=>{$$1(st.id)}),{..._e,toasts:_e.toasts.map(st=>st.id===rt||rt===void 0?{...st,visible:!1}:st)};case 4:return et.toastId===void 0?{..._e,toasts:[]}:{..._e,toasts:_e.toasts.filter(st=>st.id!==et.toastId)};case 5:return{..._e,pausedAt:et.time};case 6:let it=et.time-(_e.pausedAt||0);return{..._e,pausedAt:void 0,toasts:_e.toasts.map(st=>({...st,pauseDuration:st.pauseDuration+it}))}}},A$2=[],P$2={toasts:[],pausedAt:void 0},u$1=_e=>{P$2=v$3(P$2,_e),A$2.forEach(et=>{et(P$2)})},Y$1={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I$1=(_e={})=>{let[et,tt]=reactExports.useState(P$2);reactExports.useEffect(()=>(A$2.push(tt),()=>{let it=A$2.indexOf(tt);it>-1&&A$2.splice(it,1)}),[et]);let rt=et.toasts.map(it=>{var st,ut;return{..._e,..._e[it.type],...it,duration:it.duration||((st=_e[it.type])==null?void 0:st.duration)||(_e==null?void 0:_e.duration)||Y$1[it.type],style:{..._e.style,...(ut=_e[it.type])==null?void 0:ut.style,...it.style}}});return{...et,toasts:rt}},G$1=(_e,et="blank",tt)=>({createdAt:Date.now(),visible:!0,type:et,ariaProps:{role:"status","aria-live":"polite"},message:_e,pauseDuration:0,...tt,id:(tt==null?void 0:tt.id)||U$1()}),h$3=_e=>(et,tt)=>{let rt=G$1(et,_e,tt);return u$1({type:2,toast:rt}),rt.id},n$3=(_e,et)=>h$3("blank")(_e,et);n$3.error=h$3("error");n$3.success=h$3("success");n$3.loading=h$3("loading");n$3.custom=h$3("custom");n$3.dismiss=_e=>{u$1({type:3,toastId:_e})};n$3.remove=_e=>u$1({type:4,toastId:_e});n$3.promise=(_e,et,tt)=>{let rt=n$3.loading(et.loading,{...tt,...tt==null?void 0:tt.loading});return _e.then(it=>(n$3.success(T$1(et.success,it),{id:rt,...tt,...tt==null?void 0:tt.success}),it)).catch(it=>{n$3.error(T$1(et.error,it),{id:rt,...tt,...tt==null?void 0:tt.error})}),_e};var Z$1=(_e,et)=>{u$1({type:1,toast:{id:_e,height:et}})},ee$1=()=>{u$1({type:5,time:Date.now()})},D$1=_e=>{let{toasts:et,pausedAt:tt}=I$1(_e);reactExports.useEffect(()=>{if(tt)return;let st=Date.now(),ut=et.map(ht=>{if(ht.duration===1/0)return;let at=(ht.duration||0)+ht.pauseDuration-(st-ht.createdAt);if(at<0){ht.visible&&n$3.dismiss(ht.id);return}return setTimeout(()=>n$3.dismiss(ht.id),at)});return()=>{ut.forEach(ht=>ht&&clearTimeout(ht))}},[et,tt]);let rt=reactExports.useCallback(()=>{tt&&u$1({type:6,time:Date.now()})},[tt]),it=reactExports.useCallback((st,ut)=>{let{reverseOrder:ht=!1,gutter:at=8,defaultPosition:gt}=ut||{},bt=et.filter(kt=>(kt.position||gt)===(st.position||gt)&&kt.height),wt=bt.findIndex(kt=>kt.id===st.id),St=bt.filter((kt,Rt)=>Rt<wt&&kt.visible).length;return bt.filter(kt=>kt.visible).slice(...ht?[St+1]:[0,St]).reduce((kt,Rt)=>kt+(Rt.height||0)+at,0)},[et]);return{toasts:et,handlers:{updateHeight:Z$1,startPause:ee$1,endPause:rt,calculateOffset:it}}},oe=h$4`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,re$1=h$4`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,se=h$4`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,_$1=j$1("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${_e=>_e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${oe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${re$1} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${_e=>_e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${se} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,ne=h$4`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,V$1=j$1("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${_e=>_e.secondary||"#e0e0e0"};
  border-right-color: ${_e=>_e.primary||"#616161"};
  animation: ${ne} 1s linear infinite;
`,pe=h$4`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,de=h$4`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,w$3=j$1("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${_e=>_e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pe} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${de} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${_e=>_e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ue=j$1("div")`
  position: absolute;
`,le=j$1("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Te=h$4`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,fe=j$1("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Te} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,M$1=({toast:_e})=>{let{icon:et,type:tt,iconTheme:rt}=_e;return et!==void 0?typeof et=="string"?reactExports.createElement(fe,null,et):et:tt==="blank"?null:reactExports.createElement(le,null,reactExports.createElement(V$1,{...rt}),tt!=="loading"&&reactExports.createElement(ue,null,tt==="error"?reactExports.createElement(_$1,{...rt}):reactExports.createElement(w$3,{...rt})))},ye=_e=>`
0% {transform: translate3d(0,${_e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ge=_e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${_e*-150}%,-1px) scale(.6); opacity:0;}
`,he="0%{opacity:0;} 100%{opacity:1;}",xe="0%{opacity:1;} 100%{opacity:0;}",be=j$1("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Se=j$1("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ae=(_e,et)=>{let tt=_e.includes("top")?1:-1,[rt,it]=b$2()?[he,xe]:[ye(tt),ge(tt)];return{animation:et?`${h$4(rt)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${h$4(it)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},F$1=reactExports.memo(({toast:_e,position:et,style:tt,children:rt})=>{let it=_e.height?Ae(_e.position||et||"top-center",_e.visible):{opacity:0},st=reactExports.createElement(M$1,{toast:_e}),ut=reactExports.createElement(Se,{..._e.ariaProps},T$1(_e.message,_e));return reactExports.createElement(be,{className:_e.className,style:{...it,...tt,..._e.style}},typeof rt=="function"?rt({icon:st,message:ut}):reactExports.createElement(reactExports.Fragment,null,st,ut))});m$2(reactExports.createElement);var Ee=({id:_e,className:et,style:tt,onHeightUpdate:rt,children:it})=>{let st=reactExports.useCallback(ut=>{if(ut){let ht=()=>{let at=ut.getBoundingClientRect().height;rt(_e,at)};ht(),new MutationObserver(ht).observe(ut,{subtree:!0,childList:!0,characterData:!0})}},[_e,rt]);return reactExports.createElement("div",{ref:st,className:et,style:tt},it)},Re=(_e,et)=>{let tt=_e.includes("top"),rt=tt?{top:0}:{bottom:0},it=_e.includes("center")?{justifyContent:"center"}:_e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:b$2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${et*(tt?1:-1)}px)`,...rt,...it}},ve=u$2`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,O$1=16,Ie=({reverseOrder:_e,position:et="top-center",toastOptions:tt,gutter:rt,children:it,containerStyle:st,containerClassName:ut})=>{let{toasts:ht,handlers:at}=D$1(tt);return reactExports.createElement("div",{style:{position:"fixed",zIndex:9999,top:O$1,left:O$1,right:O$1,bottom:O$1,pointerEvents:"none",...st},className:ut,onMouseEnter:at.startPause,onMouseLeave:at.endPause},ht.map(gt=>{let bt=gt.position||et,wt=at.calculateOffset(gt,{reverseOrder:_e,gutter:rt,defaultPosition:et}),St=Re(bt,wt);return reactExports.createElement(Ee,{id:gt.id,key:gt.id,onHeightUpdate:at.updateHeight,className:gt.visible?ve:"",style:St},gt.type==="custom"?T$1(gt.message,gt):it?it(gt):reactExports.createElement(F$1,{toast:gt,position:bt}))}))},_t=n$3,extendStatics=function(_e,et){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(tt,rt){tt.__proto__=rt}||function(tt,rt){for(var it in rt)Object.prototype.hasOwnProperty.call(rt,it)&&(tt[it]=rt[it])},extendStatics(_e,et)};function __extends(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Class extends value "+String(et)+" is not a constructor or null");extendStatics(_e,et);function tt(){this.constructor=_e}_e.prototype=et===null?Object.create(et):(tt.prototype=et.prototype,new tt)}var __assign$2=function(){return __assign$2=Object.assign||function(et){for(var tt,rt=1,it=arguments.length;rt<it;rt++){tt=arguments[rt];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},__assign$2.apply(this,arguments)};function __rest$2(_e,et){var tt={};for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&et.indexOf(rt)<0&&(tt[rt]=_e[rt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,rt=Object.getOwnPropertySymbols(_e);it<rt.length;it++)et.indexOf(rt[it])<0&&Object.prototype.propertyIsEnumerable.call(_e,rt[it])&&(tt[rt[it]]=_e[rt[it]]);return tt}function __awaiter(_e,et,tt,rt){function it(st){return st instanceof tt?st:new tt(function(ut){ut(st)})}return new(tt||(tt=Promise))(function(st,ut){function ht(bt){try{gt(rt.next(bt))}catch(wt){ut(wt)}}function at(bt){try{gt(rt.throw(bt))}catch(wt){ut(wt)}}function gt(bt){bt.done?st(bt.value):it(bt.value).then(ht,at)}gt((rt=rt.apply(_e,[])).next())})}function __generator(_e,et){var tt={label:0,sent:function(){if(st[0]&1)throw st[1];return st[1]},trys:[],ops:[]},rt,it,st,ut;return ut={next:ht(0),throw:ht(1),return:ht(2)},typeof Symbol=="function"&&(ut[Symbol.iterator]=function(){return this}),ut;function ht(gt){return function(bt){return at([gt,bt])}}function at(gt){if(rt)throw new TypeError("Generator is already executing.");for(;ut&&(ut=0,gt[0]&&(tt=0)),tt;)try{if(rt=1,it&&(st=gt[0]&2?it.return:gt[0]?it.throw||((st=it.return)&&st.call(it),0):it.next)&&!(st=st.call(it,gt[1])).done)return st;switch(it=0,st&&(gt=[gt[0]&2,st.value]),gt[0]){case 0:case 1:st=gt;break;case 4:return tt.label++,{value:gt[1],done:!1};case 5:tt.label++,it=gt[1],gt=[0];continue;case 7:gt=tt.ops.pop(),tt.trys.pop();continue;default:if(st=tt.trys,!(st=st.length>0&&st[st.length-1])&&(gt[0]===6||gt[0]===2)){tt=0;continue}if(gt[0]===3&&(!st||gt[1]>st[0]&&gt[1]<st[3])){tt.label=gt[1];break}if(gt[0]===6&&tt.label<st[1]){tt.label=st[1],st=gt;break}if(st&&tt.label<st[2]){tt.label=st[2],tt.ops.push(gt);break}st[2]&&tt.ops.pop(),tt.trys.pop();continue}gt=et.call(_e,tt)}catch(bt){gt=[6,bt],it=0}finally{rt=st=0}if(gt[0]&5)throw gt[1];return{value:gt[0]?gt[1]:void 0,done:!0}}}typeof SuppressedError=="function"&&SuppressedError;function e$1(_e,et){var tt={};for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&et.indexOf(rt)<0&&(tt[rt]=_e[rt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function"){var it=0;for(rt=Object.getOwnPropertySymbols(_e);it<rt.length;it++)et.indexOf(rt[it])<0&&Object.prototype.propertyIsEnumerable.call(_e,rt[it])&&(tt[rt[it]]=_e[rt[it]])}return tt}var t$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i$1(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function o$1(_e,et){return _e(et={exports:{}},et.exports),et.exports}var n$2=o$1(function(_e,et){Object.defineProperty(et,"__esModule",{value:!0});var tt=function(){function rt(){var it=this;this.locked=new Map,this.addToLocked=function(st,ut){var ht=it.locked.get(st);ht===void 0?ut===void 0?it.locked.set(st,[]):it.locked.set(st,[ut]):ut!==void 0&&(ht.unshift(ut),it.locked.set(st,ht))},this.isLocked=function(st){return it.locked.has(st)},this.lock=function(st){return new Promise(function(ut,ht){it.isLocked(st)?it.addToLocked(st,ut):(it.addToLocked(st),ut())})},this.unlock=function(st){var ut=it.locked.get(st);if(ut!==void 0&&ut.length!==0){var ht=ut.pop();it.locked.set(st,ut),ht!==void 0&&setTimeout(ht,0)}else it.locked.delete(st)}}return rt.getInstance=function(){return rt.instance===void 0&&(rt.instance=new rt),rt.instance},rt}();et.default=function(){return tt.getInstance()}});i$1(n$2);var a$1=i$1(o$1(function(_e,et){var tt=t$2&&t$2.__awaiter||function(bt,wt,St,kt){return new(St||(St=Promise))(function(Rt,It){function Dt(jt){try{$t(kt.next(jt))}catch(Nt){It(Nt)}}function Mt(jt){try{$t(kt.throw(jt))}catch(Nt){It(Nt)}}function $t(jt){jt.done?Rt(jt.value):new St(function(Nt){Nt(jt.value)}).then(Dt,Mt)}$t((kt=kt.apply(bt,wt||[])).next())})},rt=t$2&&t$2.__generator||function(bt,wt){var St,kt,Rt,It,Dt={label:0,sent:function(){if(1&Rt[0])throw Rt[1];return Rt[1]},trys:[],ops:[]};return It={next:Mt(0),throw:Mt(1),return:Mt(2)},typeof Symbol=="function"&&(It[Symbol.iterator]=function(){return this}),It;function Mt($t){return function(jt){return function(Nt){if(St)throw new TypeError("Generator is already executing.");for(;Dt;)try{if(St=1,kt&&(Rt=2&Nt[0]?kt.return:Nt[0]?kt.throw||((Rt=kt.return)&&Rt.call(kt),0):kt.next)&&!(Rt=Rt.call(kt,Nt[1])).done)return Rt;switch(kt=0,Rt&&(Nt=[2&Nt[0],Rt.value]),Nt[0]){case 0:case 1:Rt=Nt;break;case 4:return Dt.label++,{value:Nt[1],done:!1};case 5:Dt.label++,kt=Nt[1],Nt=[0];continue;case 7:Nt=Dt.ops.pop(),Dt.trys.pop();continue;default:if(Rt=Dt.trys,!((Rt=Rt.length>0&&Rt[Rt.length-1])||Nt[0]!==6&&Nt[0]!==2)){Dt=0;continue}if(Nt[0]===3&&(!Rt||Nt[1]>Rt[0]&&Nt[1]<Rt[3])){Dt.label=Nt[1];break}if(Nt[0]===6&&Dt.label<Rt[1]){Dt.label=Rt[1],Rt=Nt;break}if(Rt&&Dt.label<Rt[2]){Dt.label=Rt[2],Dt.ops.push(Nt);break}Rt[2]&&Dt.ops.pop(),Dt.trys.pop();continue}Nt=wt.call(bt,Dt)}catch(Ut){Nt=[6,Ut],kt=0}finally{St=Rt=0}if(5&Nt[0])throw Nt[1];return{value:Nt[0]?Nt[1]:void 0,done:!0}}([$t,jt])}}},it=t$2;Object.defineProperty(et,"__esModule",{value:!0});var st="browser-tabs-lock-key",ut={key:function(bt){return tt(it,void 0,void 0,function(){return rt(this,function(wt){throw new Error("Unsupported")})})},getItem:function(bt){return tt(it,void 0,void 0,function(){return rt(this,function(wt){throw new Error("Unsupported")})})},clear:function(){return tt(it,void 0,void 0,function(){return rt(this,function(bt){return[2,window.localStorage.clear()]})})},removeItem:function(bt){return tt(it,void 0,void 0,function(){return rt(this,function(wt){throw new Error("Unsupported")})})},setItem:function(bt,wt){return tt(it,void 0,void 0,function(){return rt(this,function(St){throw new Error("Unsupported")})})},keySync:function(bt){return window.localStorage.key(bt)},getItemSync:function(bt){return window.localStorage.getItem(bt)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(bt){return window.localStorage.removeItem(bt)},setItemSync:function(bt,wt){return window.localStorage.setItem(bt,wt)}};function ht(bt){return new Promise(function(wt){return setTimeout(wt,bt)})}function at(bt){for(var wt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",St="",kt=0;kt<bt;kt++)St+=wt[Math.floor(Math.random()*wt.length)];return St}var gt=function(){function bt(wt){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+at(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=wt,bt.waiters===void 0&&(bt.waiters=[])}return bt.prototype.acquireLock=function(wt,St){return St===void 0&&(St=5e3),tt(this,void 0,void 0,function(){var kt,Rt,It,Dt,Mt,$t,jt;return rt(this,function(Nt){switch(Nt.label){case 0:kt=Date.now()+at(4),Rt=Date.now()+St,It=st+"-"+wt,Dt=this.storageHandler===void 0?ut:this.storageHandler,Nt.label=1;case 1:return Date.now()<Rt?[4,ht(30)]:[3,8];case 2:return Nt.sent(),Dt.getItemSync(It)!==null?[3,5]:(Mt=this.id+"-"+wt+"-"+kt,[4,ht(Math.floor(25*Math.random()))]);case 3:return Nt.sent(),Dt.setItemSync(It,JSON.stringify({id:this.id,iat:kt,timeoutKey:Mt,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,ht(30)];case 4:return Nt.sent(),($t=Dt.getItemSync(It))!==null&&(jt=JSON.parse($t)).id===this.id&&jt.iat===kt?(this.acquiredIatSet.add(kt),this.refreshLockWhileAcquired(It,kt),[2,!0]):[3,7];case 5:return bt.lockCorrector(this.storageHandler===void 0?ut:this.storageHandler),[4,this.waitForSomethingToChange(Rt)];case 6:Nt.sent(),Nt.label=7;case 7:return kt=Date.now()+at(4),[3,1];case 8:return[2,!1]}})})},bt.prototype.refreshLockWhileAcquired=function(wt,St){return tt(this,void 0,void 0,function(){var kt=this;return rt(this,function(Rt){return setTimeout(function(){return tt(kt,void 0,void 0,function(){var It,Dt,Mt;return rt(this,function($t){switch($t.label){case 0:return[4,n$2.default().lock(St)];case 1:return $t.sent(),this.acquiredIatSet.has(St)?(It=this.storageHandler===void 0?ut:this.storageHandler,(Dt=It.getItemSync(wt))===null?(n$2.default().unlock(St),[2]):((Mt=JSON.parse(Dt)).timeRefreshed=Date.now(),It.setItemSync(wt,JSON.stringify(Mt)),n$2.default().unlock(St),this.refreshLockWhileAcquired(wt,St),[2])):(n$2.default().unlock(St),[2])}})})},1e3),[2]})})},bt.prototype.waitForSomethingToChange=function(wt){return tt(this,void 0,void 0,function(){return rt(this,function(St){switch(St.label){case 0:return[4,new Promise(function(kt){var Rt=!1,It=Date.now(),Dt=!1;function Mt(){if(Dt||(window.removeEventListener("storage",Mt),bt.removeFromWaiting(Mt),clearTimeout($t),Dt=!0),!Rt){Rt=!0;var jt=50-(Date.now()-It);jt>0?setTimeout(kt,jt):kt(null)}}window.addEventListener("storage",Mt),bt.addToWaiting(Mt);var $t=setTimeout(Mt,Math.max(0,wt-Date.now()))})];case 1:return St.sent(),[2]}})})},bt.addToWaiting=function(wt){this.removeFromWaiting(wt),bt.waiters!==void 0&&bt.waiters.push(wt)},bt.removeFromWaiting=function(wt){bt.waiters!==void 0&&(bt.waiters=bt.waiters.filter(function(St){return St!==wt}))},bt.notifyWaiters=function(){bt.waiters!==void 0&&bt.waiters.slice().forEach(function(wt){return wt()})},bt.prototype.releaseLock=function(wt){return tt(this,void 0,void 0,function(){return rt(this,function(St){switch(St.label){case 0:return[4,this.releaseLock__private__(wt)];case 1:return[2,St.sent()]}})})},bt.prototype.releaseLock__private__=function(wt){return tt(this,void 0,void 0,function(){var St,kt,Rt,It;return rt(this,function(Dt){switch(Dt.label){case 0:return St=this.storageHandler===void 0?ut:this.storageHandler,kt=st+"-"+wt,(Rt=St.getItemSync(kt))===null?[2]:(It=JSON.parse(Rt)).id!==this.id?[3,2]:[4,n$2.default().lock(It.iat)];case 1:Dt.sent(),this.acquiredIatSet.delete(It.iat),St.removeItemSync(kt),n$2.default().unlock(It.iat),bt.notifyWaiters(),Dt.label=2;case 2:return[2]}})})},bt.lockCorrector=function(wt){for(var St=Date.now()-5e3,kt=wt,Rt=[],It=0;;){var Dt=kt.keySync(It);if(Dt===null)break;Rt.push(Dt),It++}for(var Mt=!1,$t=0;$t<Rt.length;$t++){var jt=Rt[$t];if(jt.includes(st)){var Nt=kt.getItemSync(jt);if(Nt!==null){var Ut=JSON.parse(Nt);(Ut.timeRefreshed===void 0&&Ut.timeAcquired<St||Ut.timeRefreshed!==void 0&&Ut.timeRefreshed<St)&&(kt.removeItemSync(jt),Mt=!0)}}}Mt&&bt.notifyWaiters()},bt.waiters=void 0,bt}();et.default=gt}));const r$4={timeoutInSeconds:60},s$2={name:"auth0-spa-js",version:"2.1.3"},c$2=()=>Date.now();let d$1=class sS extends Error{constructor(et,tt){super(tt),this.error=et,this.error_description=tt,Object.setPrototypeOf(this,sS.prototype)}static fromPayload({error:et,error_description:tt}){return new sS(et,tt)}};class u extends d$1{constructor(et,tt,rt,it=null){super(et,tt),this.state=rt,this.appState=it,Object.setPrototypeOf(this,u.prototype)}}let l$1=class vC extends d$1{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,vC.prototype)}},h$2=class _C extends l$1{constructor(et){super(),this.popup=et,Object.setPrototypeOf(this,_C.prototype)}},p$1=class bC extends d$1{constructor(et){super("cancelled","Popup closed"),this.popup=et,Object.setPrototypeOf(this,bC.prototype)}},m$1=class wC extends d$1{constructor(et,tt,rt){super(et,tt),this.mfa_token=rt,Object.setPrototypeOf(this,wC.prototype)}},f$1=class EC extends d$1{constructor(et,tt){super("missing_refresh_token",`Missing Refresh Token (audience: '${g$1(et,["default"])}', scope: '${g$1(tt)}')`),this.audience=et,this.scope=tt,Object.setPrototypeOf(this,EC.prototype)}};function g$1(_e,et=[]){return _e&&!et.includes(_e)?_e:""}const w$2=()=>window.crypto,y$2=()=>{const _e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let et="";return Array.from(w$2().getRandomValues(new Uint8Array(43))).forEach(tt=>et+=_e[tt%_e.length]),et},k$2=_e=>btoa(_e),v$2=_e=>{var{clientId:et}=_e,tt=e$1(_e,["clientId"]);return new URLSearchParams((rt=>Object.keys(rt).filter(it=>rt[it]!==void 0).reduce((it,st)=>Object.assign(Object.assign({},it),{[st]:rt[st]}),{}))(Object.assign({client_id:et},tt))).toString()},b$1=_e=>(et=>decodeURIComponent(atob(et).split("").map(tt=>"%"+("00"+tt.charCodeAt(0).toString(16)).slice(-2)).join("")))(_e.replace(/_/g,"/").replace(/-/g,"+")),_=async(_e,et)=>{const tt=await fetch(_e,et);return{ok:tt.ok,json:await tt.json()}},I=async(_e,et,tt)=>{const rt=new AbortController;let it;return et.signal=rt.signal,Promise.race([_(_e,et),new Promise((st,ut)=>{it=setTimeout(()=>{rt.abort(),ut(new Error("Timeout when executing 'fetch'"))},tt)})]).finally(()=>{clearTimeout(it)})},S=async(_e,et,tt,rt,it,st,ut)=>{return ht={auth:{audience:et,scope:tt},timeout:it,fetchUrl:_e,fetchOptions:rt,useFormData:ut},at=st,new Promise(function(gt,bt){const wt=new MessageChannel;wt.port1.onmessage=function(St){St.data.error?bt(new Error(St.data.error)):gt(St.data),wt.port1.close()},at.postMessage(ht,[wt.port2])});var ht,at},O=async(_e,et,tt,rt,it,st,ut=1e4)=>it?S(_e,et,tt,rt,ut,it,st):I(_e,rt,ut);async function T(_e,et){var{baseUrl:tt,timeout:rt,audience:it,scope:st,auth0Client:ut,useFormData:ht}=_e,at=e$1(_e,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const gt=ht?v$2(at):JSON.stringify(at);return await async function(bt,wt,St,kt,Rt,It,Dt){let Mt,$t=null;for(let tr=0;tr<3;tr++)try{Mt=await O(bt,St,kt,Rt,It,Dt,wt),$t=null;break}catch(mr){$t=mr}if($t)throw $t;const jt=Mt.json,{error:Nt,error_description:Ut}=jt,Ht=e$1(jt,["error","error_description"]),{ok:Kt}=Mt;if(!Kt){const tr=Ut||`HTTP error. Unable to fetch ${bt}`;throw Nt==="mfa_required"?new m$1(Nt,tr,Ht.mfa_token):Nt==="missing_refresh_token"?new f$1(St,kt):new d$1(Nt||"request_error",tr)}return Ht}(`${tt}/oauth/token`,rt,it||"default",st,{method:"POST",body:gt,headers:{"Content-Type":ht?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(ut||s$2))}},et,ht)}const j=(..._e)=>{return(et=_e.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(et))).join(" ");var et};class C{constructor(et,tt="@@auth0spajs@@",rt){this.prefix=tt,this.suffix=rt,this.clientId=et.clientId,this.scope=et.scope,this.audience=et.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(et){const[tt,rt,it,st]=et.split("::");return new C({clientId:rt,scope:st,audience:it},tt)}static fromCacheEntry(et){const{scope:tt,audience:rt,client_id:it}=et;return new C({scope:tt,audience:rt,clientId:it})}}let z$2=class{set(et,tt){localStorage.setItem(et,JSON.stringify(tt))}get(et){const tt=window.localStorage.getItem(et);if(tt)try{return JSON.parse(tt)}catch{return}}remove(et){localStorage.removeItem(et)}allKeys(){return Object.keys(window.localStorage).filter(et=>et.startsWith("@@auth0spajs@@"))}},P$1=class{constructor(){this.enclosedCache=function(){let et={};return{set(tt,rt){et[tt]=rt},get(tt){const rt=et[tt];if(rt)return rt},remove(tt){delete et[tt]},allKeys:()=>Object.keys(et)}}()}},x$2=class{constructor(et,tt,rt){this.cache=et,this.keyManifest=tt,this.nowProvider=rt||c$2}async setIdToken(et,tt,rt){var it;const st=this.getIdTokenCacheKey(et);await this.cache.set(st,{id_token:tt,decodedToken:rt}),await((it=this.keyManifest)===null||it===void 0?void 0:it.add(st))}async getIdToken(et){const tt=await this.cache.get(this.getIdTokenCacheKey(et.clientId));if(!tt&&et.scope&&et.audience){const rt=await this.get(et);return!rt||!rt.id_token||!rt.decodedToken?void 0:{id_token:rt.id_token,decodedToken:rt.decodedToken}}if(tt)return{id_token:tt.id_token,decodedToken:tt.decodedToken}}async get(et,tt=0){var rt;let it=await this.cache.get(et.toKey());if(!it){const ht=await this.getCacheKeys();if(!ht)return;const at=this.matchExistingCacheKey(et,ht);at&&(it=await this.cache.get(at))}if(!it)return;const st=await this.nowProvider(),ut=Math.floor(st/1e3);return it.expiresAt-tt<ut?it.body.refresh_token?(it.body={refresh_token:it.body.refresh_token},await this.cache.set(et.toKey(),it),it.body):(await this.cache.remove(et.toKey()),void await((rt=this.keyManifest)===null||rt===void 0?void 0:rt.remove(et.toKey()))):it.body}async set(et){var tt;const rt=new C({clientId:et.client_id,scope:et.scope,audience:et.audience}),it=await this.wrapCacheEntry(et);await this.cache.set(rt.toKey(),it),await((tt=this.keyManifest)===null||tt===void 0?void 0:tt.add(rt.toKey()))}async clear(et){var tt;const rt=await this.getCacheKeys();rt&&(await rt.filter(it=>!et||it.includes(et)).reduce(async(it,st)=>{await it,await this.cache.remove(st)},Promise.resolve()),await((tt=this.keyManifest)===null||tt===void 0?void 0:tt.clear()))}async wrapCacheEntry(et){const tt=await this.nowProvider();return{body:et,expiresAt:Math.floor(tt/1e3)+et.expires_in}}async getCacheKeys(){var et;return this.keyManifest?(et=await this.keyManifest.get())===null||et===void 0?void 0:et.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(et){return new C({clientId:et},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(et,tt){return tt.filter(rt=>{var it;const st=C.fromKey(rt),ut=new Set(st.scope&&st.scope.split(" ")),ht=((it=et.scope)===null||it===void 0?void 0:it.split(" "))||[],at=st.scope&&ht.reduce((gt,bt)=>gt&&ut.has(bt),!0);return st.prefix==="@@auth0spajs@@"&&st.clientId===et.clientId&&st.audience===et.audience&&at})[0]}};class Z{constructor(et,tt,rt){this.storage=et,this.clientId=tt,this.cookieDomain=rt,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(et){this.storage.save(this.storageKey,et,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}}const K=_e=>typeof _e=="number",W=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],E=_e=>{if(!_e.id_token)throw new Error("ID token is required but missing");const et=(st=>{const ut=st.split("."),[ht,at,gt]=ut;if(ut.length!==3||!ht||!at||!gt)throw new Error("ID token could not be decoded");const bt=JSON.parse(b$1(at)),wt={__raw:st},St={};return Object.keys(bt).forEach(kt=>{wt[kt]=bt[kt],W.includes(kt)||(St[kt]=bt[kt])}),{encoded:{header:ht,payload:at,signature:gt},header:JSON.parse(b$1(ht)),claims:wt,user:St}})(_e.id_token);if(!et.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(et.claims.iss!==_e.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${_e.iss}", found "${et.claims.iss}"`);if(!et.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(et.header.alg!=="RS256")throw new Error(`Signature algorithm of "${et.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!et.claims.aud||typeof et.claims.aud!="string"&&!Array.isArray(et.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(et.claims.aud)){if(!et.claims.aud.includes(_e.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${_e.aud}" but was not one of "${et.claims.aud.join(", ")}"`);if(et.claims.aud.length>1){if(!et.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(et.claims.azp!==_e.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${_e.aud}", found "${et.claims.azp}"`)}}else if(et.claims.aud!==_e.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${_e.aud}" but found "${et.claims.aud}"`);if(_e.nonce){if(!et.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(et.claims.nonce!==_e.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${_e.nonce}", found "${et.claims.nonce}"`)}if(_e.max_age&&!K(et.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(et.claims.exp==null||!K(et.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!K(et.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const tt=_e.leeway||60,rt=new Date(_e.now||Date.now()),it=new Date(0);if(it.setUTCSeconds(et.claims.exp+tt),rt>it)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${rt}) is after expiration time (${it})`);if(et.claims.nbf!=null&&K(et.claims.nbf)){const st=new Date(0);if(st.setUTCSeconds(et.claims.nbf-tt),rt<st)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${rt}) is before ${st}`)}if(et.claims.auth_time!=null&&K(et.claims.auth_time)){const st=new Date(0);if(st.setUTCSeconds(parseInt(et.claims.auth_time)+_e.max_age+tt),rt>st)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${rt}) is after last auth at ${st}`)}if(_e.organization){const st=_e.organization.trim();if(st.startsWith("org_")){const ut=st;if(!et.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(ut!==et.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${ut}", found "${et.claims.org_id}"`)}else{const ut=st.toLowerCase();if(!et.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(ut!==et.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${ut}", found "${et.claims.org_name}"`)}}return et};var R=o$1(function(_e,et){var tt=t$2&&t$2.__assign||function(){return tt=Object.assign||function(at){for(var gt,bt=1,wt=arguments.length;bt<wt;bt++)for(var St in gt=arguments[bt])Object.prototype.hasOwnProperty.call(gt,St)&&(at[St]=gt[St]);return at},tt.apply(this,arguments)};function rt(at,gt){if(!gt)return"";var bt="; "+at;return gt===!0?bt:bt+"="+gt}function it(at,gt,bt){return encodeURIComponent(at).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(gt).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(wt){if(typeof wt.expires=="number"){var St=new Date;St.setMilliseconds(St.getMilliseconds()+864e5*wt.expires),wt.expires=St}return rt("Expires",wt.expires?wt.expires.toUTCString():"")+rt("Domain",wt.domain)+rt("Path",wt.path)+rt("Secure",wt.secure)+rt("SameSite",wt.sameSite)}(bt)}function st(at){for(var gt={},bt=at?at.split("; "):[],wt=/(%[\dA-F]{2})+/gi,St=0;St<bt.length;St++){var kt=bt[St].split("="),Rt=kt.slice(1).join("=");Rt.charAt(0)==='"'&&(Rt=Rt.slice(1,-1));try{gt[kt[0].replace(wt,decodeURIComponent)]=Rt.replace(wt,decodeURIComponent)}catch{}}return gt}function ut(){return st(document.cookie)}function ht(at,gt,bt){document.cookie=it(at,gt,tt({path:"/"},bt))}et.__esModule=!0,et.encode=it,et.parse=st,et.getAll=ut,et.get=function(at){return ut()[at]},et.set=ht,et.remove=function(at,gt){ht(at,"",tt(tt({},gt),{expires:-1}))}});i$1(R),R.encode,R.parse,R.getAll;var U=R.get,L=R.set,D=R.remove;const X$1={get(_e){const et=U(_e);if(et!==void 0)return JSON.parse(et)},save(_e,et,tt){let rt={};window.location.protocol==="https:"&&(rt={secure:!0,sameSite:"none"}),tt!=null&&tt.daysUntilExpire&&(rt.expires=tt.daysUntilExpire),tt!=null&&tt.cookieDomain&&(rt.domain=tt.cookieDomain),L(_e,JSON.stringify(et),rt)},remove(_e,et){let tt={};et!=null&&et.cookieDomain&&(tt.domain=et.cookieDomain),D(_e,tt)}},N={get(_e){return X$1.get(_e)||X$1.get(`_legacy_${_e}`)},save(_e,et,tt){let rt={};window.location.protocol==="https:"&&(rt={secure:!0}),tt!=null&&tt.daysUntilExpire&&(rt.expires=tt.daysUntilExpire),tt!=null&&tt.cookieDomain&&(rt.domain=tt.cookieDomain),L(`_legacy_${_e}`,JSON.stringify(et),rt),X$1.save(_e,et,tt)},remove(_e,et){let tt={};et!=null&&et.cookieDomain&&(tt.domain=et.cookieDomain),D(_e,tt),X$1.remove(_e,et),X$1.remove(`_legacy_${_e}`,et)}},J={get(_e){if(typeof sessionStorage>"u")return;const et=sessionStorage.getItem(_e);return et!=null?JSON.parse(et):void 0},save(_e,et){sessionStorage.setItem(_e,JSON.stringify(et))},remove(_e){sessionStorage.removeItem(_e)}};function F(_e,et,tt){var rt=et===void 0?null:et,it=function(at,gt){var bt=atob(at);if(gt){for(var wt=new Uint8Array(bt.length),St=0,kt=bt.length;St<kt;++St)wt[St]=bt.charCodeAt(St);return String.fromCharCode.apply(null,new Uint16Array(wt.buffer))}return bt}(_e,tt!==void 0&&tt),st=it.indexOf(`
`,10)+1,ut=it.substring(st)+(rt?"//# sourceMappingURL="+rt:""),ht=new Blob([ut],{type:"application/javascript"});return URL.createObjectURL(ht)}var H,Y,G,V,M=(H="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",Y=null,G=!1,function(_e){return V=V||F(H,Y,G),new Worker(V,_e)});const A$1={};class B{constructor(et,tt){this.cache=et,this.clientId=tt,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(et){var tt;const rt=new Set(((tt=await this.cache.get(this.manifestKey))===null||tt===void 0?void 0:tt.keys)||[]);rt.add(et),await this.cache.set(this.manifestKey,{keys:[...rt]})}async remove(et){const tt=await this.cache.get(this.manifestKey);if(tt){const rt=new Set(tt.keys);return rt.delete(et),rt.size>0?await this.cache.set(this.manifestKey,{keys:[...rt]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(et){return`@@auth0spajs@@::${et}`}}const $={memory:()=>new P$1().enclosedCache,localstorage:()=>new z$2},q$1=_e=>$[_e],Q=_e=>{const{openUrl:et,onRedirect:tt}=_e,rt=e$1(_e,["openUrl","onRedirect"]);return Object.assign(Object.assign({},rt),{openUrl:et===!1||et?et:tt})},ee=new a$1;class te{constructor(et){let tt,rt;if(this.userCache=new P$1().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await ee.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),et),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),et.authorizationParams)}),typeof window<"u"&&(()=>{if(!w$2())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(w$2().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),et.cache&&et.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),et.cache)rt=et.cache;else{if(tt=et.cacheLocation||"memory",!q$1(tt))throw new Error(`Invalid cache location "${tt}"`);rt=q$1(tt)()}this.httpTimeoutMs=et.httpTimeoutInSeconds?1e3*et.httpTimeoutInSeconds:1e4,this.cookieStorage=et.legacySameSiteCookie===!1?X$1:N,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(ut=>`auth0.${ut}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=et.sessionCheckExpiryDays||1;const it=et.useCookiesForTransactions?this.cookieStorage:J;var st;this.scope=j("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new Z(it,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||c$2,this.cacheManager=new x$2(rt,rt.allKeys?void 0:new B(rt,this.options.clientId),this.nowProvider),this.domainUrl=(st=this.options.domain,/^https?:\/\//.test(st)?st:`https://${st}`),this.tokenIssuer=((ut,ht)=>ut?ut.startsWith("https://")?ut:`https://${ut}/`:`${ht}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&tt==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new M)}_url(et){const tt=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||s$2)));return`${this.domainUrl}${et}&auth0Client=${tt}`}_authorizeUrl(et){return this._url(`/authorize?${v$2(et)}`)}async _verifyIdToken(et,tt,rt){const it=await this.nowProvider();return E({iss:this.tokenIssuer,aud:this.options.clientId,id_token:et,nonce:tt,organization:rt,leeway:this.options.leeway,max_age:(st=this.options.authorizationParams.max_age,typeof st!="string"?st:parseInt(st,10)||void 0),now:it});var st}_processOrgHint(et){et?this.cookieStorage.save(this.orgHintCookieName,et,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(et,tt,rt){const it=k$2(y$2()),st=k$2(y$2()),ut=y$2(),ht=(bt=>{const wt=new Uint8Array(bt);return(St=>{const kt={"+":"-","/":"_","=":""};return St.replace(/[+/=]/g,Rt=>kt[Rt])})(window.btoa(String.fromCharCode(...Array.from(wt))))})(await(async bt=>await w$2().subtle.digest({name:"SHA-256"},new TextEncoder().encode(bt)))(ut)),at=((bt,wt,St,kt,Rt,It,Dt,Mt)=>Object.assign(Object.assign(Object.assign({client_id:bt.clientId},bt.authorizationParams),St),{scope:j(wt,St.scope),response_type:"code",response_mode:Mt||"query",state:kt,nonce:Rt,redirect_uri:Dt||bt.authorizationParams.redirect_uri,code_challenge:It,code_challenge_method:"S256"}))(this.options,this.scope,et,it,st,ht,et.redirect_uri||this.options.authorizationParams.redirect_uri||rt,tt==null?void 0:tt.response_mode),gt=this._authorizeUrl(at);return{nonce:st,code_verifier:ut,scope:at.scope,audience:at.audience||"default",redirect_uri:at.redirect_uri,state:it,url:gt}}async loginWithPopup(et,tt){var rt;if(et=et||{},!(tt=tt||{}).popup&&(tt.popup=(ht=>{const at=window.screenX+(window.innerWidth-400)/2,gt=window.screenY+(window.innerHeight-600)/2;return window.open(ht,"auth0:authorize:popup",`left=${at},top=${gt},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!tt.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const it=await this._prepareAuthorizeUrl(et.authorizationParams||{},{response_mode:"web_message"},window.location.origin);tt.popup.location.href=it.url;const st=await(ht=>new Promise((at,gt)=>{let bt;const wt=setInterval(()=>{ht.popup&&ht.popup.closed&&(clearInterval(wt),clearTimeout(St),window.removeEventListener("message",bt,!1),gt(new p$1(ht.popup)))},1e3),St=setTimeout(()=>{clearInterval(wt),gt(new h$2(ht.popup)),window.removeEventListener("message",bt,!1)},1e3*(ht.timeoutInSeconds||60));bt=function(kt){if(kt.data&&kt.data.type==="authorization_response"){if(clearTimeout(St),clearInterval(wt),window.removeEventListener("message",bt,!1),ht.popup.close(),kt.data.response.error)return gt(d$1.fromPayload(kt.data.response));at(kt.data.response)}},window.addEventListener("message",bt)}))(Object.assign(Object.assign({},tt),{timeoutInSeconds:tt.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(it.state!==st.state)throw new d$1("state_mismatch","Invalid state");const ut=((rt=et.authorizationParams)===null||rt===void 0?void 0:rt.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:it.audience,scope:it.scope,code_verifier:it.code_verifier,grant_type:"authorization_code",code:st.code,redirect_uri:it.redirect_uri},{nonceIn:it.nonce,organization:ut})}async getUser(){var et;const tt=await this._getIdTokenFromCache();return(et=tt==null?void 0:tt.decodedToken)===null||et===void 0?void 0:et.user}async getIdTokenClaims(){var et;const tt=await this._getIdTokenFromCache();return(et=tt==null?void 0:tt.decodedToken)===null||et===void 0?void 0:et.claims}async loginWithRedirect(et={}){var tt;const rt=Q(et),{openUrl:it,fragment:st,appState:ut}=rt,ht=e$1(rt,["openUrl","fragment","appState"]),at=((tt=ht.authorizationParams)===null||tt===void 0?void 0:tt.organization)||this.options.authorizationParams.organization,gt=await this._prepareAuthorizeUrl(ht.authorizationParams||{}),{url:bt}=gt,wt=e$1(gt,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},wt),{appState:ut}),at&&{organization:at}));const St=st?`${bt}#${st}`:bt;it?await it(St):window.location.assign(St)}async handleRedirectCallback(et=window.location.href){const tt=et.split("?").slice(1);if(tt.length===0)throw new Error("There are no query params available for parsing.");const{state:rt,code:it,error:st,error_description:ut}=(wt=>{wt.indexOf("#")>-1&&(wt=wt.substring(0,wt.indexOf("#")));const St=new URLSearchParams(wt);return{state:St.get("state"),code:St.get("code")||void 0,error:St.get("error")||void 0,error_description:St.get("error_description")||void 0}})(tt.join("")),ht=this.transactionManager.get();if(!ht)throw new d$1("missing_transaction","Invalid state");if(this.transactionManager.remove(),st)throw new u(st,ut||st,rt,ht.appState);if(!ht.code_verifier||ht.state&&ht.state!==rt)throw new d$1("state_mismatch","Invalid state");const at=ht.organization,gt=ht.nonce,bt=ht.redirect_uri;return await this._requestToken(Object.assign({audience:ht.audience,scope:ht.scope,code_verifier:ht.code_verifier,grant_type:"authorization_code",code:it},bt?{redirect_uri:bt}:{}),{nonceIn:gt,organization:at}),{appState:ht.appState}}async checkSession(et){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(et)}catch{}}async getTokenSilently(et={}){var tt;const rt=Object.assign(Object.assign({cacheMode:"on"},et),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),et.authorizationParams),{scope:j(this.scope,(tt=et.authorizationParams)===null||tt===void 0?void 0:tt.scope)})}),it=await((st,ut)=>{let ht=A$1[ut];return ht||(ht=st().finally(()=>{delete A$1[ut],ht=null}),A$1[ut]=ht),ht})(()=>this._getTokenSilently(rt),`${this.options.clientId}::${rt.authorizationParams.audience}::${rt.authorizationParams.scope}`);return et.detailedResponse?it:it==null?void 0:it.access_token}async _getTokenSilently(et){const{cacheMode:tt}=et,rt=e$1(et,["cacheMode"]);if(tt!=="off"){const it=await this._getEntryFromCache({scope:rt.authorizationParams.scope,audience:rt.authorizationParams.audience||"default",clientId:this.options.clientId});if(it)return it}if(tt!=="cache-only"){if(!await(async(it,st=3)=>{for(let ut=0;ut<st;ut++)if(await it())return!0;return!1})(()=>ee.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new l$1;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),tt!=="off"){const gt=await this._getEntryFromCache({scope:rt.authorizationParams.scope,audience:rt.authorizationParams.audience||"default",clientId:this.options.clientId});if(gt)return gt}const it=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(rt):await this._getTokenFromIFrame(rt),{id_token:st,access_token:ut,oauthTokenScope:ht,expires_in:at}=it;return Object.assign(Object.assign({id_token:st,access_token:ut},ht?{scope:ht}:null),{expires_in:at})}finally{await ee.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(et={},tt={}){var rt;const it=Object.assign(Object.assign({},et),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),et.authorizationParams),{scope:j(this.scope,(rt=et.authorizationParams)===null||rt===void 0?void 0:rt.scope)})});return tt=Object.assign(Object.assign({},r$4),tt),await this.loginWithPopup(it,tt),(await this.cacheManager.get(new C({scope:it.authorizationParams.scope,audience:it.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(et){et.clientId!==null?et.clientId=et.clientId||this.options.clientId:delete et.clientId;const tt=et.logoutParams||{},{federated:rt}=tt,it=e$1(tt,["federated"]),st=rt?"&federated":"";return this._url(`/v2/logout?${v$2(Object.assign({clientId:et.clientId},it))}`)+st}async logout(et={}){const tt=Q(et),{openUrl:rt}=tt,it=e$1(tt,["openUrl"]);et.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(et.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const st=this._buildLogoutUrl(it);rt?await rt(st):rt!==!1&&window.location.assign(st)}async _getTokenFromIFrame(et){const tt=Object.assign(Object.assign({},et.authorizationParams),{prompt:"none"}),rt=this.cookieStorage.get(this.orgHintCookieName);rt&&!tt.organization&&(tt.organization=rt);const{url:it,state:st,nonce:ut,code_verifier:ht,redirect_uri:at,scope:gt,audience:bt}=await this._prepareAuthorizeUrl(tt,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new d$1("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const wt=et.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,St=await((Rt,It,Dt=60)=>new Promise((Mt,$t)=>{const jt=window.document.createElement("iframe");jt.setAttribute("width","0"),jt.setAttribute("height","0"),jt.style.display="none";const Nt=()=>{window.document.body.contains(jt)&&(window.document.body.removeChild(jt),window.removeEventListener("message",Ut,!1))};let Ut;const Ht=setTimeout(()=>{$t(new l$1),Nt()},1e3*Dt);Ut=function(Kt){if(Kt.origin!=It||!Kt.data||Kt.data.type!=="authorization_response")return;const tr=Kt.source;tr&&tr.close(),Kt.data.response.error?$t(d$1.fromPayload(Kt.data.response)):Mt(Kt.data.response),clearTimeout(Ht),window.removeEventListener("message",Ut,!1),setTimeout(Nt,2e3)},window.addEventListener("message",Ut,!1),window.document.body.appendChild(jt),jt.setAttribute("src",Rt)}))(it,this.domainUrl,wt);if(st!==St.state)throw new d$1("state_mismatch","Invalid state");const kt=await this._requestToken(Object.assign(Object.assign({},et.authorizationParams),{code_verifier:ht,code:St.code,grant_type:"authorization_code",redirect_uri:at,timeout:et.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:ut,organization:tt.organization});return Object.assign(Object.assign({},kt),{scope:gt,oauthTokenScope:kt.scope,audience:bt})}catch(wt){throw wt.error==="login_required"&&this.logout({openUrl:!1}),wt}}async _getTokenUsingRefreshToken(et){const tt=await this.cacheManager.get(new C({scope:et.authorizationParams.scope,audience:et.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(tt&&tt.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(et);throw new f$1(et.authorizationParams.audience||"default",et.authorizationParams.scope)}const rt=et.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,it=typeof et.timeoutInSeconds=="number"?1e3*et.timeoutInSeconds:null;try{const st=await this._requestToken(Object.assign(Object.assign(Object.assign({},et.authorizationParams),{grant_type:"refresh_token",refresh_token:tt&&tt.refresh_token,redirect_uri:rt}),it&&{timeout:it}));return Object.assign(Object.assign({},st),{scope:et.authorizationParams.scope,oauthTokenScope:st.scope,audience:et.authorizationParams.audience||"default"})}catch(st){if((st.message.indexOf("Missing Refresh Token")>-1||st.message&&st.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(et);throw st}}async _saveEntryInCache(et){const{id_token:tt,decodedToken:rt}=et,it=e$1(et,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:tt,decodedToken:rt}),await this.cacheManager.setIdToken(this.options.clientId,et.id_token,et.decodedToken),await this.cacheManager.set(it)}async _getIdTokenFromCache(){const et=this.options.authorizationParams.audience||"default",tt=await this.cacheManager.getIdToken(new C({clientId:this.options.clientId,audience:et,scope:this.scope})),rt=this.userCache.get("@@user@@");return tt&&tt.id_token===(rt==null?void 0:rt.id_token)?rt:(this.userCache.set("@@user@@",tt),tt)}async _getEntryFromCache({scope:et,audience:tt,clientId:rt}){const it=await this.cacheManager.get(new C({scope:et,audience:tt,clientId:rt}),60);if(it&&it.access_token){const{access_token:st,oauthTokenScope:ut,expires_in:ht}=it,at=await this._getIdTokenFromCache();return at&&Object.assign(Object.assign({id_token:at.id_token,access_token:st},ut?{scope:ut}:null),{expires_in:ht})}}async _requestToken(et,tt){const{nonceIn:rt,organization:it}=tt||{},st=await T(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},et),this.worker),ut=await this._verifyIdToken(st.id_token,rt,it);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},st),{decodedToken:ut,scope:et.scope,audience:et.audience||"default"}),st.scope?{oauthTokenScope:st.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(it||ut.claims.org_id),Object.assign(Object.assign({},st),{decodedToken:ut})}}var initialAuthState={isAuthenticated:!1,isLoading:!0},stub=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},initialContext=__assign$2(__assign$2({},initialAuthState),{buildAuthorizeUrl:stub,buildLogoutUrl:stub,getAccessTokenSilently:stub,getAccessTokenWithPopup:stub,getIdTokenClaims:stub,loginWithRedirect:stub,loginWithPopup:stub,logout:stub,handleRedirectCallback:stub}),Auth0Context=reactExports.createContext(initialContext),OAuthError=function(_e){__extends(et,_e);function et(tt,rt){var it=_e.call(this,rt||tt)||this;return it.error=tt,it.error_description=rt,Object.setPrototypeOf(it,et.prototype),it}return et}(Error),CODE_RE=/[?&]code=[^&]+/,STATE_RE=/[?&]state=[^&]+/,ERROR_RE=/[?&]error=[^&]+/,hasAuthParams=function(_e){return _e===void 0&&(_e=window.location.search),(CODE_RE.test(_e)||ERROR_RE.test(_e))&&STATE_RE.test(_e)},normalizeErrorFn=function(_e){return function(et){return et instanceof Error?et:et!==null&&typeof et=="object"&&"error"in et&&typeof et.error=="string"?"error_description"in et&&typeof et.error_description=="string"?new OAuthError(et.error,et.error_description):new OAuthError(et.error):new Error(_e)}},loginError=normalizeErrorFn("Login failed"),tokenError=normalizeErrorFn("Get access token failed"),deprecateRedirectUri=function(_e){var et;_e!=null&&_e.redirectUri&&(console.warn("Using `redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `redirectUri` will be no longer supported in a future version"),_e.authorizationParams=_e.authorizationParams||{},_e.authorizationParams.redirect_uri=_e.redirectUri,delete _e.redirectUri),!((et=_e==null?void 0:_e.authorizationParams)===null||et===void 0)&&et.redirectUri&&(console.warn("Using `authorizationParams.redirectUri` has been deprecated, please use `authorizationParams.redirect_uri` instead as `authorizationParams.redirectUri` will be removed in a future version"),_e.authorizationParams.redirect_uri=_e.authorizationParams.redirectUri,delete _e.authorizationParams.redirectUri)},reducer=function(_e,et){switch(et.type){case"LOGIN_POPUP_STARTED":return __assign$2(__assign$2({},_e),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return __assign$2(__assign$2({},_e),{isAuthenticated:!!et.user,user:et.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return _e.user===et.user?_e:__assign$2(__assign$2({},_e),{isAuthenticated:!!et.user,user:et.user});case"LOGOUT":return __assign$2(__assign$2({},_e),{isAuthenticated:!1,user:void 0});case"ERROR":return __assign$2(__assign$2({},_e),{isLoading:!1,error:et.error})}},toAuth0ClientOptions=function(_e){return deprecateRedirectUri(_e),__assign$2(__assign$2({},_e),{auth0Client:{name:"auth0-react",version:"2.2.4"}})},defaultOnRedirectCallback=function(_e){window.history.replaceState({},document.title,(_e==null?void 0:_e.returnTo)||window.location.pathname)},Auth0Provider=function(_e){var et=_e.children,tt=_e.skipRedirectCallback,rt=_e.onRedirectCallback,it=rt===void 0?defaultOnRedirectCallback:rt,st=_e.context,ut=st===void 0?Auth0Context:st,ht=__rest$2(_e,["children","skipRedirectCallback","onRedirectCallback","context"]),at=reactExports.useState(function(){return new te(toAuth0ClientOptions(ht))})[0],gt=reactExports.useReducer(reducer,initialAuthState),bt=gt[0],wt=gt[1],St=reactExports.useRef(!1);reactExports.useEffect(function(){St.current||(St.current=!0,function(){return __awaiter(void 0,void 0,void 0,function(){var Ut,Ht,Kt;return __generator(this,function(tr){switch(tr.label){case 0:return tr.trys.push([0,7,,8]),Ut=void 0,hasAuthParams()&&!tt?[4,at.handleRedirectCallback()]:[3,3];case 1:return Ht=tr.sent().appState,[4,at.getUser()];case 2:return Ut=tr.sent(),it(Ht,Ut),[3,6];case 3:return[4,at.checkSession()];case 4:return tr.sent(),[4,at.getUser()];case 5:Ut=tr.sent(),tr.label=6;case 6:return wt({type:"INITIALISED",user:Ut}),[3,8];case 7:return Kt=tr.sent(),wt({type:"ERROR",error:loginError(Kt)}),[3,8];case 8:return[2]}})})}())},[at,it,tt]);var kt=reactExports.useCallback(function(Ut){return deprecateRedirectUri(Ut),at.loginWithRedirect(Ut)},[at]),Rt=reactExports.useCallback(function(Ut,Ht){return __awaiter(void 0,void 0,void 0,function(){var Kt,tr;return __generator(this,function(mr){switch(mr.label){case 0:wt({type:"LOGIN_POPUP_STARTED"}),mr.label=1;case 1:return mr.trys.push([1,3,,4]),[4,at.loginWithPopup(Ut,Ht)];case 2:return mr.sent(),[3,4];case 3:return Kt=mr.sent(),wt({type:"ERROR",error:loginError(Kt)}),[2];case 4:return[4,at.getUser()];case 5:return tr=mr.sent(),wt({type:"LOGIN_POPUP_COMPLETE",user:tr}),[2]}})})},[at]),It=reactExports.useCallback(function(Ut){return Ut===void 0&&(Ut={}),__awaiter(void 0,void 0,void 0,function(){return __generator(this,function(Ht){switch(Ht.label){case 0:return[4,at.logout(Ut)];case 1:return Ht.sent(),(Ut.openUrl||Ut.openUrl===!1)&&wt({type:"LOGOUT"}),[2]}})})},[at]),Dt=reactExports.useCallback(function(Ut){return __awaiter(void 0,void 0,void 0,function(){var Ht,Kt,tr,mr;return __generator(this,function(vr){switch(vr.label){case 0:return vr.trys.push([0,2,3,5]),[4,at.getTokenSilently(Ut)];case 1:return Ht=vr.sent(),[3,5];case 2:throw Kt=vr.sent(),tokenError(Kt);case 3:return tr=wt,mr={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,at.getUser()];case 4:return tr.apply(void 0,[(mr.user=vr.sent(),mr)]),[7];case 5:return[2,Ht]}})})},[at]),Mt=reactExports.useCallback(function(Ut,Ht){return __awaiter(void 0,void 0,void 0,function(){var Kt,tr,mr,vr;return __generator(this,function(wr){switch(wr.label){case 0:return wr.trys.push([0,2,3,5]),[4,at.getTokenWithPopup(Ut,Ht)];case 1:return Kt=wr.sent(),[3,5];case 2:throw tr=wr.sent(),tokenError(tr);case 3:return mr=wt,vr={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,at.getUser()];case 4:return mr.apply(void 0,[(vr.user=wr.sent(),vr)]),[7];case 5:return[2,Kt]}})})},[at]),$t=reactExports.useCallback(function(){return at.getIdTokenClaims()},[at]),jt=reactExports.useCallback(function(Ut){return __awaiter(void 0,void 0,void 0,function(){var Ht,Kt,tr;return __generator(this,function(mr){switch(mr.label){case 0:return mr.trys.push([0,2,3,5]),[4,at.handleRedirectCallback(Ut)];case 1:return[2,mr.sent()];case 2:throw Ht=mr.sent(),tokenError(Ht);case 3:return Kt=wt,tr={type:"HANDLE_REDIRECT_COMPLETE"},[4,at.getUser()];case 4:return Kt.apply(void 0,[(tr.user=mr.sent(),tr)]),[7];case 5:return[2]}})})},[at]),Nt=reactExports.useMemo(function(){return __assign$2(__assign$2({},bt),{getAccessTokenSilently:Dt,getAccessTokenWithPopup:Mt,getIdTokenClaims:$t,loginWithRedirect:kt,loginWithPopup:Rt,logout:It,handleRedirectCallback:jt})},[bt,Dt,Mt,$t,kt,Rt,It,jt]);return React$1.createElement(ut.Provider,{value:Nt},et)},useAuth0=function(_e){return _e===void 0&&(_e=Auth0Context),reactExports.useContext(_e)};/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$z(){return _extends$z=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$z.apply(this,arguments)}var Action$1;(function(_e){_e.Pop="POP",_e.Push="PUSH",_e.Replace="REPLACE"})(Action$1||(Action$1={}));const PopStateEventType="popstate";function createBrowserHistory(_e){_e===void 0&&(_e={});function et(rt,it){let{pathname:st,search:ut,hash:ht}=rt.location;return createLocation("",{pathname:st,search:ut,hash:ht},it.state&&it.state.usr||null,it.state&&it.state.key||"default")}function tt(rt,it){return typeof it=="string"?it:createPath(it)}return getUrlBasedHistory(et,tt,null,_e)}function invariant$1(_e,et){if(_e===!1||_e===null||typeof _e>"u")throw new Error(et)}function warning(_e,et){if(!_e){typeof console<"u"&&console.warn(et);try{throw new Error(et)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(_e,et){return{usr:_e.state,key:_e.key,idx:et}}function createLocation(_e,et,tt,rt){return tt===void 0&&(tt=null),_extends$z({pathname:typeof _e=="string"?_e:_e.pathname,search:"",hash:""},typeof et=="string"?parsePath(et):et,{state:tt,key:et&&et.key||rt||createKey()})}function createPath(_e){let{pathname:et="/",search:tt="",hash:rt=""}=_e;return tt&&tt!=="?"&&(et+=tt.charAt(0)==="?"?tt:"?"+tt),rt&&rt!=="#"&&(et+=rt.charAt(0)==="#"?rt:"#"+rt),et}function parsePath(_e){let et={};if(_e){let tt=_e.indexOf("#");tt>=0&&(et.hash=_e.substr(tt),_e=_e.substr(0,tt));let rt=_e.indexOf("?");rt>=0&&(et.search=_e.substr(rt),_e=_e.substr(0,rt)),_e&&(et.pathname=_e)}return et}function getUrlBasedHistory(_e,et,tt,rt){rt===void 0&&(rt={});let{window:it=document.defaultView,v5Compat:st=!1}=rt,ut=it.history,ht=Action$1.Pop,at=null,gt=bt();gt==null&&(gt=0,ut.replaceState(_extends$z({},ut.state,{idx:gt}),""));function bt(){return(ut.state||{idx:null}).idx}function wt(){ht=Action$1.Pop;let Dt=bt(),Mt=Dt==null?null:Dt-gt;gt=Dt,at&&at({action:ht,location:It.location,delta:Mt})}function St(Dt,Mt){ht=Action$1.Push;let $t=createLocation(It.location,Dt,Mt);gt=bt()+1;let jt=getHistoryState($t,gt),Nt=It.createHref($t);try{ut.pushState(jt,"",Nt)}catch(Ut){if(Ut instanceof DOMException&&Ut.name==="DataCloneError")throw Ut;it.location.assign(Nt)}st&&at&&at({action:ht,location:It.location,delta:1})}function kt(Dt,Mt){ht=Action$1.Replace;let $t=createLocation(It.location,Dt,Mt);gt=bt();let jt=getHistoryState($t,gt),Nt=It.createHref($t);ut.replaceState(jt,"",Nt),st&&at&&at({action:ht,location:It.location,delta:0})}function Rt(Dt){let Mt=it.location.origin!=="null"?it.location.origin:it.location.href,$t=typeof Dt=="string"?Dt:createPath(Dt);return $t=$t.replace(/ $/,"%20"),invariant$1(Mt,"No window.location.(origin|href) available to create URL for href: "+$t),new URL($t,Mt)}let It={get action(){return ht},get location(){return _e(it,ut)},listen(Dt){if(at)throw new Error("A history only accepts one active listener");return it.addEventListener(PopStateEventType,wt),at=Dt,()=>{it.removeEventListener(PopStateEventType,wt),at=null}},createHref(Dt){return et(it,Dt)},createURL:Rt,encodeLocation(Dt){let Mt=Rt(Dt);return{pathname:Mt.pathname,search:Mt.search,hash:Mt.hash}},push:St,replace:kt,go(Dt){return ut.go(Dt)}};return It}var ResultType;(function(_e){_e.data="data",_e.deferred="deferred",_e.redirect="redirect",_e.error="error"})(ResultType||(ResultType={}));function matchRoutes(_e,et,tt){return tt===void 0&&(tt="/"),matchRoutesImpl(_e,et,tt,!1)}function matchRoutesImpl(_e,et,tt,rt){let it=typeof et=="string"?parsePath(et):et,st=stripBasename(it.pathname||"/",tt);if(st==null)return null;let ut=flattenRoutes(_e);rankRouteBranches(ut);let ht=null;for(let at=0;ht==null&&at<ut.length;++at){let gt=decodePath(st);ht=matchRouteBranch(ut[at],gt,rt)}return ht}function flattenRoutes(_e,et,tt,rt){et===void 0&&(et=[]),tt===void 0&&(tt=[]),rt===void 0&&(rt="");let it=(st,ut,ht)=>{let at={relativePath:ht===void 0?st.path||"":ht,caseSensitive:st.caseSensitive===!0,childrenIndex:ut,route:st};at.relativePath.startsWith("/")&&(invariant$1(at.relativePath.startsWith(rt),'Absolute route path "'+at.relativePath+'" nested under path '+('"'+rt+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),at.relativePath=at.relativePath.slice(rt.length));let gt=joinPaths([rt,at.relativePath]),bt=tt.concat(at);st.children&&st.children.length>0&&(invariant$1(st.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+gt+'".')),flattenRoutes(st.children,et,bt,gt)),!(st.path==null&&!st.index)&&et.push({path:gt,score:computeScore(gt,st.index),routesMeta:bt})};return _e.forEach((st,ut)=>{var ht;if(st.path===""||!((ht=st.path)!=null&&ht.includes("?")))it(st,ut);else for(let at of explodeOptionalSegments(st.path))it(st,ut,at)}),et}function explodeOptionalSegments(_e){let et=_e.split("/");if(et.length===0)return[];let[tt,...rt]=et,it=tt.endsWith("?"),st=tt.replace(/\?$/,"");if(rt.length===0)return it?[st,""]:[st];let ut=explodeOptionalSegments(rt.join("/")),ht=[];return ht.push(...ut.map(at=>at===""?st:[st,at].join("/"))),it&&ht.push(...ut),ht.map(at=>_e.startsWith("/")&&at===""?"/":at)}function rankRouteBranches(_e){_e.sort((et,tt)=>et.score!==tt.score?tt.score-et.score:compareIndexes(et.routesMeta.map(rt=>rt.childrenIndex),tt.routesMeta.map(rt=>rt.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=_e=>_e==="*";function computeScore(_e,et){let tt=_e.split("/"),rt=tt.length;return tt.some(isSplat)&&(rt+=splatPenalty),et&&(rt+=indexRouteValue),tt.filter(it=>!isSplat(it)).reduce((it,st)=>it+(paramRe.test(st)?dynamicSegmentValue:st===""?emptySegmentValue:staticSegmentValue),rt)}function compareIndexes(_e,et){return _e.length===et.length&&_e.slice(0,-1).every((rt,it)=>rt===et[it])?_e[_e.length-1]-et[et.length-1]:0}function matchRouteBranch(_e,et,tt){let{routesMeta:rt}=_e,it={},st="/",ut=[];for(let ht=0;ht<rt.length;++ht){let at=rt[ht],gt=ht===rt.length-1,bt=st==="/"?et:et.slice(st.length)||"/",wt=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:gt},bt),St=at.route;if(!wt&&gt&&tt&&!rt[rt.length-1].route.index&&(wt=matchPath({path:at.relativePath,caseSensitive:at.caseSensitive,end:!1},bt)),!wt)return null;Object.assign(it,wt.params),ut.push({params:it,pathname:joinPaths([st,wt.pathname]),pathnameBase:normalizePathname(joinPaths([st,wt.pathnameBase])),route:St}),wt.pathnameBase!=="/"&&(st=joinPaths([st,wt.pathnameBase]))}return ut}function matchPath(_e,et){typeof _e=="string"&&(_e={path:_e,caseSensitive:!1,end:!0});let[tt,rt]=compilePath(_e.path,_e.caseSensitive,_e.end),it=et.match(tt);if(!it)return null;let st=it[0],ut=st.replace(/(.)\/+$/,"$1"),ht=it.slice(1);return{params:rt.reduce((gt,bt,wt)=>{let{paramName:St,isOptional:kt}=bt;if(St==="*"){let It=ht[wt]||"";ut=st.slice(0,st.length-It.length).replace(/(.)\/+$/,"$1")}const Rt=ht[wt];return kt&&!Rt?gt[St]=void 0:gt[St]=(Rt||"").replace(/%2F/g,"/"),gt},{}),pathname:st,pathnameBase:ut,pattern:_e}}function compilePath(_e,et,tt){et===void 0&&(et=!1),tt===void 0&&(tt=!0),warning(_e==="*"||!_e.endsWith("*")||_e.endsWith("/*"),'Route path "'+_e+'" will be treated as if it were '+('"'+_e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+_e.replace(/\*$/,"/*")+'".'));let rt=[],it="^"+_e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(ut,ht,at)=>(rt.push({paramName:ht,isOptional:at!=null}),at?"/?([^\\/]+)?":"/([^\\/]+)"));return _e.endsWith("*")?(rt.push({paramName:"*"}),it+=_e==="*"||_e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):tt?it+="\\/*$":_e!==""&&_e!=="/"&&(it+="(?:(?=\\/|$))"),[new RegExp(it,et?void 0:"i"),rt]}function decodePath(_e){try{return _e.split("/").map(et=>decodeURIComponent(et).replace(/\//g,"%2F")).join("/")}catch(et){return warning(!1,'The URL path "'+_e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+et+").")),_e}}function stripBasename(_e,et){if(et==="/")return _e;if(!_e.toLowerCase().startsWith(et.toLowerCase()))return null;let tt=et.endsWith("/")?et.length-1:et.length,rt=_e.charAt(tt);return rt&&rt!=="/"?null:_e.slice(tt)||"/"}function resolvePath(_e,et){et===void 0&&(et="/");let{pathname:tt,search:rt="",hash:it=""}=typeof _e=="string"?parsePath(_e):_e;return{pathname:tt?tt.startsWith("/")?tt:resolvePathname(tt,et):et,search:normalizeSearch(rt),hash:normalizeHash(it)}}function resolvePathname(_e,et){let tt=et.replace(/\/+$/,"").split("/");return _e.split("/").forEach(it=>{it===".."?tt.length>1&&tt.pop():it!=="."&&tt.push(it)}),tt.length>1?tt.join("/"):"/"}function getInvalidPathError(_e,et,tt,rt){return"Cannot include a '"+_e+"' character in a manually specified "+("`to."+et+"` field ["+JSON.stringify(rt)+"].  Please separate it out to the ")+("`to."+tt+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(_e){return _e.filter((et,tt)=>tt===0||et.route.path&&et.route.path.length>0)}function getResolveToMatches(_e,et){let tt=getPathContributingMatches(_e);return et?tt.map((rt,it)=>it===tt.length-1?rt.pathname:rt.pathnameBase):tt.map(rt=>rt.pathnameBase)}function resolveTo(_e,et,tt,rt){rt===void 0&&(rt=!1);let it;typeof _e=="string"?it=parsePath(_e):(it=_extends$z({},_e),invariant$1(!it.pathname||!it.pathname.includes("?"),getInvalidPathError("?","pathname","search",it)),invariant$1(!it.pathname||!it.pathname.includes("#"),getInvalidPathError("#","pathname","hash",it)),invariant$1(!it.search||!it.search.includes("#"),getInvalidPathError("#","search","hash",it)));let st=_e===""||it.pathname==="",ut=st?"/":it.pathname,ht;if(ut==null)ht=tt;else{let wt=et.length-1;if(!rt&&ut.startsWith("..")){let St=ut.split("/");for(;St[0]==="..";)St.shift(),wt-=1;it.pathname=St.join("/")}ht=wt>=0?et[wt]:"/"}let at=resolvePath(it,ht),gt=ut&&ut!=="/"&&ut.endsWith("/"),bt=(st||ut===".")&&tt.endsWith("/");return!at.pathname.endsWith("/")&&(gt||bt)&&(at.pathname+="/"),at}const joinPaths=_e=>_e.join("/").replace(/\/\/+/g,"/"),normalizePathname=_e=>_e.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=_e=>!_e||_e==="?"?"":_e.startsWith("?")?_e:"?"+_e,normalizeHash=_e=>!_e||_e==="#"?"":_e.startsWith("#")?_e:"#"+_e,redirect=function(et,tt){tt===void 0&&(tt=302);let rt=tt;typeof rt=="number"?rt={status:rt}:typeof rt.status>"u"&&(rt.status=302);let it=new Headers(rt.headers);return it.set("Location",et),new Response(null,_extends$z({},rt,{headers:it}))};function isRouteErrorResponse(_e){return _e!=null&&typeof _e.status=="number"&&typeof _e.statusText=="string"&&typeof _e.internal=="boolean"&&"data"in _e}const validMutationMethodsArr=["post","put","patch","delete"];new Set(validMutationMethodsArr);const validRequestMethodsArr=["get",...validMutationMethodsArr];new Set(validRequestMethodsArr);/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$y(){return _extends$y=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$y.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext$1=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(_e,et){let{relative:tt}=et===void 0?{}:et;useInRouterContext()||invariant$1(!1);let{basename:rt,navigator:it}=reactExports.useContext(NavigationContext$1),{hash:st,pathname:ut,search:ht}=useResolvedPath(_e,{relative:tt}),at=ut;return rt!=="/"&&(at=ut==="/"?rt:joinPaths([rt,ut])),it.createHref({pathname:at,search:ht,hash:st})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$3(_e){reactExports.useContext(NavigationContext$1).static||reactExports.useLayoutEffect(_e)}function useNavigate(){let{isDataRoute:_e}=reactExports.useContext(RouteContext);return _e?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let _e=reactExports.useContext(DataRouterContext),{basename:et,future:tt,navigator:rt}=reactExports.useContext(NavigationContext$1),{matches:it}=reactExports.useContext(RouteContext),{pathname:st}=useLocation(),ut=JSON.stringify(getResolveToMatches(it,tt.v7_relativeSplatPath)),ht=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{ht.current=!0}),reactExports.useCallback(function(gt,bt){if(bt===void 0&&(bt={}),!ht.current)return;if(typeof gt=="number"){rt.go(gt);return}let wt=resolveTo(gt,JSON.parse(ut),st,bt.relative==="path");_e==null&&et!=="/"&&(wt.pathname=wt.pathname==="/"?et:joinPaths([et,wt.pathname])),(bt.replace?rt.replace:rt.push)(wt,bt.state,bt)},[et,rt,ut,st,_e])}const OutletContext=reactExports.createContext(null);function useOutlet(_e){let et=reactExports.useContext(RouteContext).outlet;return et&&reactExports.createElement(OutletContext.Provider,{value:_e},et)}function useParams(){let{matches:_e}=reactExports.useContext(RouteContext),et=_e[_e.length-1];return et?et.params:{}}function useResolvedPath(_e,et){let{relative:tt}=et===void 0?{}:et,{future:rt}=reactExports.useContext(NavigationContext$1),{matches:it}=reactExports.useContext(RouteContext),{pathname:st}=useLocation(),ut=JSON.stringify(getResolveToMatches(it,rt.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(_e,JSON.parse(ut),st,tt==="path"),[_e,ut,st,tt])}function useRoutes(_e,et){return useRoutesImpl(_e,et)}function useRoutesImpl(_e,et,tt,rt){useInRouterContext()||invariant$1(!1);let{navigator:it}=reactExports.useContext(NavigationContext$1),{matches:st}=reactExports.useContext(RouteContext),ut=st[st.length-1],ht=ut?ut.params:{};ut&&ut.pathname;let at=ut?ut.pathnameBase:"/";ut&&ut.route;let gt=useLocation(),bt;if(et){var wt;let Dt=typeof et=="string"?parsePath(et):et;at==="/"||(wt=Dt.pathname)!=null&&wt.startsWith(at)||invariant$1(!1),bt=Dt}else bt=gt;let St=bt.pathname||"/",kt=St;if(at!=="/"){let Dt=at.replace(/^\//,"").split("/");kt="/"+St.replace(/^\//,"").split("/").slice(Dt.length).join("/")}let Rt=matchRoutes(_e,{pathname:kt}),It=_renderMatches(Rt&&Rt.map(Dt=>Object.assign({},Dt,{params:Object.assign({},ht,Dt.params),pathname:joinPaths([at,it.encodeLocation?it.encodeLocation(Dt.pathname).pathname:Dt.pathname]),pathnameBase:Dt.pathnameBase==="/"?at:joinPaths([at,it.encodeLocation?it.encodeLocation(Dt.pathnameBase).pathname:Dt.pathnameBase])})),st,tt,rt);return et&&It?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$y({pathname:"/",search:"",hash:"",state:null,key:"default"},bt),navigationType:Action$1.Pop}},It):It}function DefaultErrorComponent(){let _e=useRouteError(),et=isRouteErrorResponse(_e)?_e.status+" "+_e.statusText:_e instanceof Error?_e.message:JSON.stringify(_e),tt=_e instanceof Error?_e.stack:null,it={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},et),tt?reactExports.createElement("pre",{style:it},tt):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(et){super(et),this.state={location:et.location,revalidation:et.revalidation,error:et.error}}static getDerivedStateFromError(et){return{error:et}}static getDerivedStateFromProps(et,tt){return tt.location!==et.location||tt.revalidation!=="idle"&&et.revalidation==="idle"?{error:et.error,location:et.location,revalidation:et.revalidation}:{error:et.error!==void 0?et.error:tt.error,location:tt.location,revalidation:et.revalidation||tt.revalidation}}componentDidCatch(et,tt){console.error("React Router caught the following error during render",et,tt)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(_e){let{routeContext:et,match:tt,children:rt}=_e,it=reactExports.useContext(DataRouterContext);return it&&it.static&&it.staticContext&&(tt.route.errorElement||tt.route.ErrorBoundary)&&(it.staticContext._deepestRenderedBoundaryId=tt.route.id),reactExports.createElement(RouteContext.Provider,{value:et},rt)}function _renderMatches(_e,et,tt,rt){var it;if(et===void 0&&(et=[]),tt===void 0&&(tt=null),rt===void 0&&(rt=null),_e==null){var st;if((st=tt)!=null&&st.errors)_e=tt.matches;else return null}let ut=_e,ht=(it=tt)==null?void 0:it.errors;if(ht!=null){let bt=ut.findIndex(wt=>wt.route.id&&(ht==null?void 0:ht[wt.route.id])!==void 0);bt>=0||invariant$1(!1),ut=ut.slice(0,Math.min(ut.length,bt+1))}let at=!1,gt=-1;if(tt&&rt&&rt.v7_partialHydration)for(let bt=0;bt<ut.length;bt++){let wt=ut[bt];if((wt.route.HydrateFallback||wt.route.hydrateFallbackElement)&&(gt=bt),wt.route.id){let{loaderData:St,errors:kt}=tt,Rt=wt.route.loader&&St[wt.route.id]===void 0&&(!kt||kt[wt.route.id]===void 0);if(wt.route.lazy||Rt){at=!0,gt>=0?ut=ut.slice(0,gt+1):ut=[ut[0]];break}}}return ut.reduceRight((bt,wt,St)=>{let kt,Rt=!1,It=null,Dt=null;tt&&(kt=ht&&wt.route.id?ht[wt.route.id]:void 0,It=wt.route.errorElement||defaultErrorElement,at&&(gt<0&&St===0?(Rt=!0,Dt=null):gt===St&&(Rt=!0,Dt=wt.route.hydrateFallbackElement||null)));let Mt=et.concat(ut.slice(0,St+1)),$t=()=>{let jt;return kt?jt=It:Rt?jt=Dt:wt.route.Component?jt=reactExports.createElement(wt.route.Component,null):wt.route.element?jt=wt.route.element:jt=bt,reactExports.createElement(RenderedRoute,{match:wt,routeContext:{outlet:bt,matches:Mt,isDataRoute:tt!=null},children:jt})};return tt&&(wt.route.ErrorBoundary||wt.route.errorElement||St===0)?reactExports.createElement(RenderErrorBoundary,{location:tt.location,revalidation:tt.revalidation,component:It,error:kt,children:$t(),routeContext:{outlet:null,matches:Mt,isDataRoute:!0}}):$t()},null)}var DataRouterHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e}(DataRouterHook$1||{}),DataRouterStateHook$1=function(_e){return _e.UseBlocker="useBlocker",_e.UseLoaderData="useLoaderData",_e.UseActionData="useActionData",_e.UseRouteError="useRouteError",_e.UseNavigation="useNavigation",_e.UseRouteLoaderData="useRouteLoaderData",_e.UseMatches="useMatches",_e.UseRevalidator="useRevalidator",_e.UseNavigateStable="useNavigate",_e.UseRouteId="useRouteId",_e}(DataRouterStateHook$1||{});function useDataRouterContext(_e){let et=reactExports.useContext(DataRouterContext);return et||invariant$1(!1),et}function useDataRouterState(_e){let et=reactExports.useContext(DataRouterStateContext);return et||invariant$1(!1),et}function useRouteContext(_e){let et=reactExports.useContext(RouteContext);return et||invariant$1(!1),et}function useCurrentRouteId(_e){let et=useRouteContext(),tt=et.matches[et.matches.length-1];return tt.route.id||invariant$1(!1),tt.route.id}function useRouteError(){var _e;let et=reactExports.useContext(RouteErrorContext),tt=useDataRouterState(DataRouterStateHook$1.UseRouteError),rt=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return et!==void 0?et:(_e=tt.errors)==null?void 0:_e[rt]}function useNavigateStable(){let{router:_e}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),et=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),tt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$3(()=>{tt.current=!0}),reactExports.useCallback(function(it,st){st===void 0&&(st={}),tt.current&&(typeof it=="number"?_e.navigate(it):_e.navigate(it,_extends$y({fromRouteId:et},st)))},[_e,et])}function Navigate(_e){let{to:et,replace:tt,state:rt,relative:it}=_e;useInRouterContext()||invariant$1(!1);let{future:st,static:ut}=reactExports.useContext(NavigationContext$1),{matches:ht}=reactExports.useContext(RouteContext),{pathname:at}=useLocation(),gt=useNavigate(),bt=resolveTo(et,getResolveToMatches(ht,st.v7_relativeSplatPath),at,it==="path"),wt=JSON.stringify(bt);return reactExports.useEffect(()=>gt(JSON.parse(wt),{replace:tt,state:rt,relative:it}),[gt,wt,it,tt,rt]),null}function Outlet(_e){return useOutlet(_e.context)}function Route(_e){invariant$1(!1)}function Router(_e){let{basename:et="/",children:tt=null,location:rt,navigationType:it=Action$1.Pop,navigator:st,static:ut=!1,future:ht}=_e;useInRouterContext()&&invariant$1(!1);let at=et.replace(/^\/*/,"/"),gt=reactExports.useMemo(()=>({basename:at,navigator:st,static:ut,future:_extends$y({v7_relativeSplatPath:!1},ht)}),[at,ht,st,ut]);typeof rt=="string"&&(rt=parsePath(rt));let{pathname:bt="/",search:wt="",hash:St="",state:kt=null,key:Rt="default"}=rt,It=reactExports.useMemo(()=>{let Dt=stripBasename(bt,at);return Dt==null?null:{location:{pathname:Dt,search:wt,hash:St,state:kt,key:Rt},navigationType:it}},[at,bt,wt,St,kt,Rt,it]);return It==null?null:reactExports.createElement(NavigationContext$1.Provider,{value:gt},reactExports.createElement(LocationContext.Provider,{children:tt,value:It}))}function Routes(_e){let{children:et,location:tt}=_e;return useRoutes(createRoutesFromChildren(et),tt)}new Promise(()=>{});function createRoutesFromChildren(_e,et){et===void 0&&(et=[]);let tt=[];return reactExports.Children.forEach(_e,(rt,it)=>{if(!reactExports.isValidElement(rt))return;let st=[...et,it];if(rt.type===reactExports.Fragment){tt.push.apply(tt,createRoutesFromChildren(rt.props.children,st));return}rt.type!==Route&&invariant$1(!1),!rt.props.index||!rt.props.children||invariant$1(!1);let ut={id:rt.props.id||st.join("-"),caseSensitive:rt.props.caseSensitive,element:rt.props.element,Component:rt.props.Component,index:rt.props.index,path:rt.props.path,loader:rt.props.loader,action:rt.props.action,errorElement:rt.props.errorElement,ErrorBoundary:rt.props.ErrorBoundary,hasErrorBoundary:rt.props.ErrorBoundary!=null||rt.props.errorElement!=null,shouldRevalidate:rt.props.shouldRevalidate,handle:rt.props.handle,lazy:rt.props.lazy};rt.props.children&&(ut.children=createRoutesFromChildren(rt.props.children,st)),tt.push(ut)}),tt}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$x.apply(this,arguments)}function _objectWithoutPropertiesLoose$n(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function isModifiedEvent(_e){return!!(_e.metaKey||_e.altKey||_e.ctrlKey||_e.shiftKey)}function shouldProcessLinkClick(_e,et){return _e.button===0&&(!et||et==="_self")&&!isModifiedEvent(_e)}const _excluded$m=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}const START_TRANSITION="startTransition",startTransitionImpl=React$2[START_TRANSITION];function BrowserRouter(_e){let{basename:et,children:tt,future:rt,window:it}=_e,st=reactExports.useRef();st.current==null&&(st.current=createBrowserHistory({window:it,v5Compat:!0}));let ut=st.current,[ht,at]=reactExports.useState({action:ut.action,location:ut.location}),{v7_startTransition:gt}=rt||{},bt=reactExports.useCallback(wt=>{gt&&startTransitionImpl?startTransitionImpl(()=>at(wt)):at(wt)},[at,gt]);return reactExports.useLayoutEffect(()=>ut.listen(bt),[ut,bt]),reactExports.createElement(Router,{basename:et,children:tt,location:ht.location,navigationType:ht.action,navigator:ut,future:rt})}const isBrowser$1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(et,tt){let{onClick:rt,relative:it,reloadDocument:st,replace:ut,state:ht,target:at,to:gt,preventScrollReset:bt,unstable_viewTransition:wt}=et,St=_objectWithoutPropertiesLoose$n(et,_excluded$m),{basename:kt}=reactExports.useContext(NavigationContext$1),Rt,It=!1;if(typeof gt=="string"&&ABSOLUTE_URL_REGEX.test(gt)&&(Rt=gt,isBrowser$1))try{let jt=new URL(window.location.href),Nt=gt.startsWith("//")?new URL(jt.protocol+gt):new URL(gt),Ut=stripBasename(Nt.pathname,kt);Nt.origin===jt.origin&&Ut!=null?gt=Ut+Nt.search+Nt.hash:It=!0}catch{}let Dt=useHref(gt,{relative:it}),Mt=useLinkClickHandler(gt,{replace:ut,state:ht,target:at,preventScrollReset:bt,relative:it,unstable_viewTransition:wt});function $t(jt){rt&&rt(jt),jt.defaultPrevented||Mt(jt)}return reactExports.createElement("a",_extends$x({},St,{href:Rt||Dt,onClick:It||st?rt:$t,ref:tt,target:at}))});var DataRouterHook;(function(_e){_e.UseScrollRestoration="useScrollRestoration",_e.UseSubmit="useSubmit",_e.UseSubmitFetcher="useSubmitFetcher",_e.UseFetcher="useFetcher",_e.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(_e){_e.UseFetcher="useFetcher",_e.UseFetchers="useFetchers",_e.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(_e,et){let{target:tt,replace:rt,state:it,preventScrollReset:st,relative:ut,unstable_viewTransition:ht}=et===void 0?{}:et,at=useNavigate(),gt=useLocation(),bt=useResolvedPath(_e,{relative:ut});return reactExports.useCallback(wt=>{if(shouldProcessLinkClick(wt,tt)){wt.preventDefault();let St=rt!==void 0?rt:createPath(gt)===createPath(bt);at(_e,{replace:St,state:it,preventScrollReset:st,relative:ut,unstable_viewTransition:ht})}},[gt,at,bt,rt,it,tt,_e,st,ut,ht])}const Auth0ProviderWithNavigate=({children:_e})=>{const et=useNavigate(),tt="dev-1z7owtnvo1o7zl2m.us.auth0.com",rt="8jcCFw1kgB3UTbrKTJP0IvbixEQ72n6m",it="https://landl.ddnsking.com",st=async(ut,ht)=>{console.log("User",ht),console.log("appState",ut),et((ut==null?void 0:ut.returnTo)||"/auth-callback")};return jsxRuntimeExports.jsx(Auth0Provider,{domain:tt,clientId:rt,authorizationParams:{redirect_uri:it},onRedirectCallback:st,children:_e})};function bind(_e,et){return function(){return _e.apply(et,arguments)}}const{toString:toString$4}=Object.prototype,{getPrototypeOf}=Object,kindOf=(_e=>et=>{const tt=toString$4.call(et);return _e[tt]||(_e[tt]=tt.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=_e=>(_e=_e.toLowerCase(),et=>kindOf(et)===_e),typeOfTest=_e=>et=>typeof et===_e,{isArray:isArray$g}=Array,isUndefined$1=typeOfTest("undefined");function isBuffer$3(_e){return _e!==null&&!isUndefined$1(_e)&&_e.constructor!==null&&!isUndefined$1(_e.constructor)&&isFunction$5(_e.constructor.isBuffer)&&_e.constructor.isBuffer(_e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(_e){let et;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?et=ArrayBuffer.isView(_e):et=_e&&_e.buffer&&isArrayBuffer(_e.buffer),et}const isString$5=typeOfTest("string"),isFunction$5=typeOfTest("function"),isNumber$6=typeOfTest("number"),isObject$d=_e=>_e!==null&&typeof _e=="object",isBoolean$4=_e=>_e===!0||_e===!1,isPlainObject$3=_e=>{if(kindOf(_e)!=="object")return!1;const et=getPrototypeOf(_e);return(et===null||et===Object.prototype||Object.getPrototypeOf(et)===null)&&!(Symbol.toStringTag in _e)&&!(Symbol.iterator in _e)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=_e=>isObject$d(_e)&&isFunction$5(_e.pipe),isFormData=_e=>{let et;return _e&&(typeof FormData=="function"&&_e instanceof FormData||isFunction$5(_e.append)&&((et=kindOf(_e))==="formdata"||et==="object"&&isFunction$5(_e.toString)&&_e.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=_e=>_e.trim?_e.trim():_e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(_e,et,{allOwnKeys:tt=!1}={}){if(_e===null||typeof _e>"u")return;let rt,it;if(typeof _e!="object"&&(_e=[_e]),isArray$g(_e))for(rt=0,it=_e.length;rt<it;rt++)et.call(null,_e[rt],rt,_e);else{const st=tt?Object.getOwnPropertyNames(_e):Object.keys(_e),ut=st.length;let ht;for(rt=0;rt<ut;rt++)ht=st[rt],et.call(null,_e[ht],ht,_e)}}function findKey$1(_e,et){et=et.toLowerCase();const tt=Object.keys(_e);let rt=tt.length,it;for(;rt-- >0;)if(it=tt[rt],et===it.toLowerCase())return it;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,isContextDefined=_e=>!isUndefined$1(_e)&&_e!==_global;function merge(){const{caseless:_e}=isContextDefined(this)&&this||{},et={},tt=(rt,it)=>{const st=_e&&findKey$1(et,it)||it;isPlainObject$3(et[st])&&isPlainObject$3(rt)?et[st]=merge(et[st],rt):isPlainObject$3(rt)?et[st]=merge({},rt):isArray$g(rt)?et[st]=rt.slice():et[st]=rt};for(let rt=0,it=arguments.length;rt<it;rt++)arguments[rt]&&forEach(arguments[rt],tt);return et}const extend$1=(_e,et,tt,{allOwnKeys:rt}={})=>(forEach(et,(it,st)=>{tt&&isFunction$5(it)?_e[st]=bind(it,tt):_e[st]=it},{allOwnKeys:rt}),_e),stripBOM=_e=>(_e.charCodeAt(0)===65279&&(_e=_e.slice(1)),_e),inherits=(_e,et,tt,rt)=>{_e.prototype=Object.create(et.prototype,rt),_e.prototype.constructor=_e,Object.defineProperty(_e,"super",{value:et.prototype}),tt&&Object.assign(_e.prototype,tt)},toFlatObject=(_e,et,tt,rt)=>{let it,st,ut;const ht={};if(et=et||{},_e==null)return et;do{for(it=Object.getOwnPropertyNames(_e),st=it.length;st-- >0;)ut=it[st],(!rt||rt(ut,_e,et))&&!ht[ut]&&(et[ut]=_e[ut],ht[ut]=!0);_e=tt!==!1&&getPrototypeOf(_e)}while(_e&&(!tt||tt(_e,et))&&_e!==Object.prototype);return et},endsWith=(_e,et,tt)=>{_e=String(_e),(tt===void 0||tt>_e.length)&&(tt=_e.length),tt-=et.length;const rt=_e.indexOf(et,tt);return rt!==-1&&rt===tt},toArray$1=_e=>{if(!_e)return null;if(isArray$g(_e))return _e;let et=_e.length;if(!isNumber$6(et))return null;const tt=new Array(et);for(;et-- >0;)tt[et]=_e[et];return tt},isTypedArray$4=(_e=>et=>_e&&et instanceof _e)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(_e,et)=>{const rt=(_e&&_e[Symbol.iterator]).call(_e);let it;for(;(it=rt.next())&&!it.done;){const st=it.value;et.call(_e,st[0],st[1])}},matchAll=(_e,et)=>{let tt;const rt=[];for(;(tt=_e.exec(et))!==null;)rt.push(tt);return rt},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=_e=>_e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(tt,rt,it){return rt.toUpperCase()+it}),hasOwnProperty$b=(({hasOwnProperty:_e})=>(et,tt)=>_e.call(et,tt))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(_e,et)=>{const tt=Object.getOwnPropertyDescriptors(_e),rt={};forEach(tt,(it,st)=>{let ut;(ut=et(it,st,_e))!==!1&&(rt[st]=ut||it)}),Object.defineProperties(_e,rt)},freezeMethods=_e=>{reduceDescriptors(_e,(et,tt)=>{if(isFunction$5(_e)&&["arguments","caller","callee"].indexOf(tt)!==-1)return!1;const rt=_e[tt];if(isFunction$5(rt)){if(et.enumerable=!1,"writable"in et){et.writable=!1;return}et.set||(et.set=()=>{throw Error("Can not rewrite read-only method '"+tt+"'")})}})},toObjectSet=(_e,et)=>{const tt={},rt=it=>{it.forEach(st=>{tt[st]=!0})};return isArray$g(_e)?rt(_e):rt(String(_e).split(et)),tt},noop$4=()=>{},toFiniteNumber=(_e,et)=>_e!=null&&Number.isFinite(_e=+_e)?_e:et,ALPHA="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA,ALPHA_DIGIT:ALPHA+ALPHA.toUpperCase()+DIGIT},generateString=(_e=16,et=ALPHABET.ALPHA_DIGIT)=>{let tt="";const{length:rt}=et;for(;_e--;)tt+=et[Math.random()*rt|0];return tt};function isSpecCompliantForm(_e){return!!(_e&&isFunction$5(_e.append)&&_e[Symbol.toStringTag]==="FormData"&&_e[Symbol.iterator])}const toJSONObject=_e=>{const et=new Array(10),tt=(rt,it)=>{if(isObject$d(rt)){if(et.indexOf(rt)>=0)return;if(!("toJSON"in rt)){et[it]=rt;const st=isArray$g(rt)?[]:{};return forEach(rt,(ut,ht)=>{const at=tt(ut,it+1);!isUndefined$1(at)&&(st[ht]=at)}),et[it]=void 0,st}}return rt};return tt(_e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=_e=>_e&&(isObject$d(_e)||isFunction$5(_e))&&isFunction$5(_e.then)&&isFunction$5(_e.catch),_setImmediate=((_e,et)=>_e?setImmediate:et?((tt,rt)=>(_global.addEventListener("message",({source:it,data:st})=>{it===_global&&st===tt&&rt.length&&rt.shift()()},!1),it=>{rt.push(it),_global.postMessage(tt,"*")}))(`axios@${Math.random()}`,[]):tt=>setTimeout(tt))(typeof setImmediate=="function",isFunction$5(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process<"u"&&process.nextTick||_setImmediate,utils$1={isArray:isArray$g,isArrayBuffer,isBuffer:isBuffer$3,isFormData,isArrayBufferView,isString:isString$5,isNumber:isNumber$6,isBoolean:isBoolean$4,isObject:isObject$d,isPlainObject:isPlainObject$3,isReadableStream,isRequest,isResponse,isHeaders,isUndefined:isUndefined$1,isDate:isDate$1,isFile,isBlob,isRegExp,isFunction:isFunction$5,isStream,isURLSearchParams,isTypedArray:isTypedArray$4,isFileList,forEach,merge,extend:extend$1,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray:toArray$1,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$b,hasOwnProp:hasOwnProperty$b,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$4,toFiniteNumber,findKey:findKey$1,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError$1(_e,et,tt,rt,it){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=_e,this.name="AxiosError",et&&(this.code=et),tt&&(this.config=tt),rt&&(this.request=rt),it&&(this.response=it,this.status=it.status?it.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(_e=>{descriptors[_e]={value:_e}});Object.defineProperties(AxiosError$1,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError$1.from=(_e,et,tt,rt,it,st)=>{const ut=Object.create(prototype$1);return utils$1.toFlatObject(_e,ut,function(at){return at!==Error.prototype},ht=>ht!=="isAxiosError"),AxiosError$1.call(ut,_e.message,et,tt,rt,it),ut.cause=_e,ut.name=_e.name,st&&Object.assign(ut,st),ut};const httpAdapter=null;function isVisitable(_e){return utils$1.isPlainObject(_e)||utils$1.isArray(_e)}function removeBrackets(_e){return utils$1.endsWith(_e,"[]")?_e.slice(0,-2):_e}function renderKey(_e,et,tt){return _e?_e.concat(et).map(function(it,st){return it=removeBrackets(it),!tt&&st?"["+it+"]":it}).join(tt?".":""):et}function isFlatArray(_e){return utils$1.isArray(_e)&&!_e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(et){return/^is[A-Z]/.test(et)});function toFormData$1(_e,et,tt){if(!utils$1.isObject(_e))throw new TypeError("target must be an object");et=et||new FormData,tt=utils$1.toFlatObject(tt,{metaTokens:!0,dots:!1,indexes:!1},!1,function(It,Dt){return!utils$1.isUndefined(Dt[It])});const rt=tt.metaTokens,it=tt.visitor||bt,st=tt.dots,ut=tt.indexes,at=(tt.Blob||typeof Blob<"u"&&Blob)&&utils$1.isSpecCompliantForm(et);if(!utils$1.isFunction(it))throw new TypeError("visitor must be a function");function gt(Rt){if(Rt===null)return"";if(utils$1.isDate(Rt))return Rt.toISOString();if(!at&&utils$1.isBlob(Rt))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(Rt)||utils$1.isTypedArray(Rt)?at&&typeof Blob=="function"?new Blob([Rt]):Buffer.from(Rt):Rt}function bt(Rt,It,Dt){let Mt=Rt;if(Rt&&!Dt&&typeof Rt=="object"){if(utils$1.endsWith(It,"{}"))It=rt?It:It.slice(0,-2),Rt=JSON.stringify(Rt);else if(utils$1.isArray(Rt)&&isFlatArray(Rt)||(utils$1.isFileList(Rt)||utils$1.endsWith(It,"[]"))&&(Mt=utils$1.toArray(Rt)))return It=removeBrackets(It),Mt.forEach(function(jt,Nt){!(utils$1.isUndefined(jt)||jt===null)&&et.append(ut===!0?renderKey([It],Nt,st):ut===null?It:It+"[]",gt(jt))}),!1}return isVisitable(Rt)?!0:(et.append(renderKey(Dt,It,st),gt(Rt)),!1)}const wt=[],St=Object.assign(predicates,{defaultVisitor:bt,convertValue:gt,isVisitable});function kt(Rt,It){if(!utils$1.isUndefined(Rt)){if(wt.indexOf(Rt)!==-1)throw Error("Circular reference detected in "+It.join("."));wt.push(Rt),utils$1.forEach(Rt,function(Mt,$t){(!(utils$1.isUndefined(Mt)||Mt===null)&&it.call(et,Mt,utils$1.isString($t)?$t.trim():$t,It,St))===!0&&kt(Mt,It?It.concat($t):[$t])}),wt.pop()}}if(!utils$1.isObject(_e))throw new TypeError("data must be an object");return kt(_e),et}function encode$1(_e){const et={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(_e).replace(/[!'()~]|%20|%00/g,function(rt){return et[rt]})}function AxiosURLSearchParams(_e,et){this._pairs=[],_e&&toFormData$1(_e,this,et)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(et,tt){this._pairs.push([et,tt])};prototype.toString=function(et){const tt=et?function(rt){return et.call(this,rt,encode$1)}:encode$1;return this._pairs.map(function(it){return tt(it[0])+"="+tt(it[1])},"").join("&")};function encode(_e){return encodeURIComponent(_e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(_e,et,tt){if(!et)return _e;const rt=tt&&tt.encode||encode,it=tt&&tt.serialize;let st;if(it?st=it(et,tt):st=utils$1.isURLSearchParams(et)?et.toString():new AxiosURLSearchParams(et,tt).toString(rt),st){const ut=_e.indexOf("#");ut!==-1&&(_e=_e.slice(0,ut)),_e+=(_e.indexOf("?")===-1?"?":"&")+st}return _e}class InterceptorManager{constructor(){this.handlers=[]}use(et,tt,rt){return this.handlers.push({fulfilled:et,rejected:tt,synchronous:rt?rt.synchronous:!1,runWhen:rt?rt.runWhen:null}),this.handlers.length-1}eject(et){this.handlers[et]&&(this.handlers[et]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(et){utils$1.forEach(this.handlers,function(rt){rt!==null&&et(rt)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$2={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$1={...utils,...platform$2};function toURLEncodedForm(_e,et){return toFormData$1(_e,new platform$1.classes.URLSearchParams,Object.assign({visitor:function(tt,rt,it,st){return platform$1.isNode&&utils$1.isBuffer(tt)?(this.append(rt,tt.toString("base64")),!1):st.defaultVisitor.apply(this,arguments)}},et))}function parsePropPath(_e){return utils$1.matchAll(/\w+|\[(\w*)]/g,_e).map(et=>et[0]==="[]"?"":et[1]||et[0])}function arrayToObject(_e){const et={},tt=Object.keys(_e);let rt;const it=tt.length;let st;for(rt=0;rt<it;rt++)st=tt[rt],et[st]=_e[st];return et}function formDataToJSON(_e){function et(tt,rt,it,st){let ut=tt[st++];if(ut==="__proto__")return!0;const ht=Number.isFinite(+ut),at=st>=tt.length;return ut=!ut&&utils$1.isArray(it)?it.length:ut,at?(utils$1.hasOwnProp(it,ut)?it[ut]=[it[ut],rt]:it[ut]=rt,!ht):((!it[ut]||!utils$1.isObject(it[ut]))&&(it[ut]=[]),et(tt,rt,it[ut],st)&&utils$1.isArray(it[ut])&&(it[ut]=arrayToObject(it[ut])),!ht)}if(utils$1.isFormData(_e)&&utils$1.isFunction(_e.entries)){const tt={};return utils$1.forEachEntry(_e,(rt,it)=>{et(parsePropPath(rt),it,tt,0)}),tt}return null}function stringifySafely(_e,et,tt){if(utils$1.isString(_e))try{return(et||JSON.parse)(_e),utils$1.trim(_e)}catch(rt){if(rt.name!=="SyntaxError")throw rt}return(0,JSON.stringify)(_e)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(et,tt){const rt=tt.getContentType()||"",it=rt.indexOf("application/json")>-1,st=utils$1.isObject(et);if(st&&utils$1.isHTMLForm(et)&&(et=new FormData(et)),utils$1.isFormData(et))return it?JSON.stringify(formDataToJSON(et)):et;if(utils$1.isArrayBuffer(et)||utils$1.isBuffer(et)||utils$1.isStream(et)||utils$1.isFile(et)||utils$1.isBlob(et)||utils$1.isReadableStream(et))return et;if(utils$1.isArrayBufferView(et))return et.buffer;if(utils$1.isURLSearchParams(et))return tt.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),et.toString();let ht;if(st){if(rt.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(et,this.formSerializer).toString();if((ht=utils$1.isFileList(et))||rt.indexOf("multipart/form-data")>-1){const at=this.env&&this.env.FormData;return toFormData$1(ht?{"files[]":et}:et,at&&new at,this.formSerializer)}}return st||it?(tt.setContentType("application/json",!1),stringifySafely(et)):et}],transformResponse:[function(et){const tt=this.transitional||defaults$1.transitional,rt=tt&&tt.forcedJSONParsing,it=this.responseType==="json";if(utils$1.isResponse(et)||utils$1.isReadableStream(et))return et;if(et&&utils$1.isString(et)&&(rt&&!this.responseType||it)){const ut=!(tt&&tt.silentJSONParsing)&&it;try{return JSON.parse(et)}catch(ht){if(ut)throw ht.name==="SyntaxError"?AxiosError$1.from(ht,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):ht}}return et}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$1.classes.FormData,Blob:platform$1.classes.Blob},validateStatus:function(et){return et>=200&&et<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],_e=>{defaults$1.headers[_e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=_e=>{const et={};let tt,rt,it;return _e&&_e.split(`
`).forEach(function(ut){it=ut.indexOf(":"),tt=ut.substring(0,it).trim().toLowerCase(),rt=ut.substring(it+1).trim(),!(!tt||et[tt]&&ignoreDuplicateOf[tt])&&(tt==="set-cookie"?et[tt]?et[tt].push(rt):et[tt]=[rt]:et[tt]=et[tt]?et[tt]+", "+rt:rt)}),et},$internals=Symbol("internals");function normalizeHeader(_e){return _e&&String(_e).trim().toLowerCase()}function normalizeValue(_e){return _e===!1||_e==null?_e:utils$1.isArray(_e)?_e.map(normalizeValue):String(_e)}function parseTokens(_e){const et=Object.create(null),tt=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let rt;for(;rt=tt.exec(_e);)et[rt[1]]=rt[2];return et}const isValidHeaderName=_e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(_e.trim());function matchHeaderValue(_e,et,tt,rt,it){if(utils$1.isFunction(rt))return rt.call(this,et,tt);if(it&&(et=tt),!!utils$1.isString(et)){if(utils$1.isString(rt))return et.indexOf(rt)!==-1;if(utils$1.isRegExp(rt))return rt.test(et)}}function formatHeader(_e){return _e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(et,tt,rt)=>tt.toUpperCase()+rt)}function buildAccessors(_e,et){const tt=utils$1.toCamelCase(" "+et);["get","set","has"].forEach(rt=>{Object.defineProperty(_e,rt+tt,{value:function(it,st,ut){return this[rt].call(this,et,it,st,ut)},configurable:!0})})}let AxiosHeaders$1=class{constructor(et){et&&this.set(et)}set(et,tt,rt){const it=this;function st(ht,at,gt){const bt=normalizeHeader(at);if(!bt)throw new Error("header name must be a non-empty string");const wt=utils$1.findKey(it,bt);(!wt||it[wt]===void 0||gt===!0||gt===void 0&&it[wt]!==!1)&&(it[wt||at]=normalizeValue(ht))}const ut=(ht,at)=>utils$1.forEach(ht,(gt,bt)=>st(gt,bt,at));if(utils$1.isPlainObject(et)||et instanceof this.constructor)ut(et,tt);else if(utils$1.isString(et)&&(et=et.trim())&&!isValidHeaderName(et))ut(parseHeaders(et),tt);else if(utils$1.isHeaders(et))for(const[ht,at]of et.entries())st(at,ht,rt);else et!=null&&st(tt,et,rt);return this}get(et,tt){if(et=normalizeHeader(et),et){const rt=utils$1.findKey(this,et);if(rt){const it=this[rt];if(!tt)return it;if(tt===!0)return parseTokens(it);if(utils$1.isFunction(tt))return tt.call(this,it,rt);if(utils$1.isRegExp(tt))return tt.exec(it);throw new TypeError("parser must be boolean|regexp|function")}}}has(et,tt){if(et=normalizeHeader(et),et){const rt=utils$1.findKey(this,et);return!!(rt&&this[rt]!==void 0&&(!tt||matchHeaderValue(this,this[rt],rt,tt)))}return!1}delete(et,tt){const rt=this;let it=!1;function st(ut){if(ut=normalizeHeader(ut),ut){const ht=utils$1.findKey(rt,ut);ht&&(!tt||matchHeaderValue(rt,rt[ht],ht,tt))&&(delete rt[ht],it=!0)}}return utils$1.isArray(et)?et.forEach(st):st(et),it}clear(et){const tt=Object.keys(this);let rt=tt.length,it=!1;for(;rt--;){const st=tt[rt];(!et||matchHeaderValue(this,this[st],st,et,!0))&&(delete this[st],it=!0)}return it}normalize(et){const tt=this,rt={};return utils$1.forEach(this,(it,st)=>{const ut=utils$1.findKey(rt,st);if(ut){tt[ut]=normalizeValue(it),delete tt[st];return}const ht=et?formatHeader(st):String(st).trim();ht!==st&&delete tt[st],tt[ht]=normalizeValue(it),rt[ht]=!0}),this}concat(...et){return this.constructor.concat(this,...et)}toJSON(et){const tt=Object.create(null);return utils$1.forEach(this,(rt,it)=>{rt!=null&&rt!==!1&&(tt[it]=et&&utils$1.isArray(rt)?rt.join(", "):rt)}),tt}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([et,tt])=>et+": "+tt).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(et){return et instanceof this?et:new this(et)}static concat(et,...tt){const rt=new this(et);return tt.forEach(it=>rt.set(it)),rt}static accessor(et){const rt=(this[$internals]=this[$internals]={accessors:{}}).accessors,it=this.prototype;function st(ut){const ht=normalizeHeader(ut);rt[ht]||(buildAccessors(it,ut),rt[ht]=!0)}return utils$1.isArray(et)?et.forEach(st):st(et),this}};AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:_e},et)=>{let tt=et[0].toUpperCase()+et.slice(1);return{get:()=>_e,set(rt){this[tt]=rt}}});utils$1.freezeMethods(AxiosHeaders$1);function transformData(_e,et){const tt=this||defaults$1,rt=et||tt,it=AxiosHeaders$1.from(rt.headers);let st=rt.data;return utils$1.forEach(_e,function(ht){st=ht.call(tt,st,it.normalize(),et?et.status:void 0)}),it.normalize(),st}function isCancel$1(_e){return!!(_e&&_e.__CANCEL__)}function CanceledError$1(_e,et,tt){AxiosError$1.call(this,_e??"canceled",AxiosError$1.ERR_CANCELED,et,tt),this.name="CanceledError"}utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});function settle(_e,et,tt){const rt=tt.config.validateStatus;!tt.status||!rt||rt(tt.status)?_e(tt):et(new AxiosError$1("Request failed with status code "+tt.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(tt.status/100)-4],tt.config,tt.request,tt))}function parseProtocol(_e){const et=/^([-+\w]{1,25})(:?\/\/|:)/.exec(_e);return et&&et[1]||""}function speedometer(_e,et){_e=_e||10;const tt=new Array(_e),rt=new Array(_e);let it=0,st=0,ut;return et=et!==void 0?et:1e3,function(at){const gt=Date.now(),bt=rt[st];ut||(ut=gt),tt[it]=at,rt[it]=gt;let wt=st,St=0;for(;wt!==it;)St+=tt[wt++],wt=wt%_e;if(it=(it+1)%_e,it===st&&(st=(st+1)%_e),gt-ut<et)return;const kt=bt&&gt-bt;return kt?Math.round(St*1e3/kt):void 0}}function throttle$2(_e,et){let tt=0,rt=1e3/et,it,st;const ut=(gt,bt=Date.now())=>{tt=bt,it=null,st&&(clearTimeout(st),st=null),_e.apply(null,gt)};return[(...gt)=>{const bt=Date.now(),wt=bt-tt;wt>=rt?ut(gt,bt):(it=gt,st||(st=setTimeout(()=>{st=null,ut(it)},rt-wt)))},()=>it&&ut(it)]}const progressEventReducer=(_e,et,tt=3)=>{let rt=0;const it=speedometer(50,250);return throttle$2(st=>{const ut=st.loaded,ht=st.lengthComputable?st.total:void 0,at=ut-rt,gt=it(at),bt=ut<=ht;rt=ut;const wt={loaded:ut,total:ht,progress:ht?ut/ht:void 0,bytes:at,rate:gt||void 0,estimated:gt&&ht&&bt?(ht-ut)/gt:void 0,event:st,lengthComputable:ht!=null,[et?"download":"upload"]:!0};_e(wt)},tt)},progressEventDecorator=(_e,et)=>{const tt=_e!=null;return[rt=>et[0]({lengthComputable:tt,total:_e,loaded:rt}),et[1]]},asyncDecorator=_e=>(...et)=>utils$1.asap(()=>_e(...et)),isURLSameOrigin=platform$1.hasStandardBrowserEnv?function(){const et=platform$1.navigator&&/(msie|trident)/i.test(platform$1.navigator.userAgent),tt=document.createElement("a");let rt;function it(st){let ut=st;return et&&(tt.setAttribute("href",ut),ut=tt.href),tt.setAttribute("href",ut),{href:tt.href,protocol:tt.protocol?tt.protocol.replace(/:$/,""):"",host:tt.host,search:tt.search?tt.search.replace(/^\?/,""):"",hash:tt.hash?tt.hash.replace(/^#/,""):"",hostname:tt.hostname,port:tt.port,pathname:tt.pathname.charAt(0)==="/"?tt.pathname:"/"+tt.pathname}}return rt=it(window.location.href),function(ut){const ht=utils$1.isString(ut)?it(ut):ut;return ht.protocol===rt.protocol&&ht.host===rt.host}}():function(){return function(){return!0}}(),cookies=platform$1.hasStandardBrowserEnv?{write(_e,et,tt,rt,it,st){const ut=[_e+"="+encodeURIComponent(et)];utils$1.isNumber(tt)&&ut.push("expires="+new Date(tt).toGMTString()),utils$1.isString(rt)&&ut.push("path="+rt),utils$1.isString(it)&&ut.push("domain="+it),st===!0&&ut.push("secure"),document.cookie=ut.join("; ")},read(_e){const et=document.cookie.match(new RegExp("(^|;\\s*)("+_e+")=([^;]*)"));return et?decodeURIComponent(et[3]):null},remove(_e){this.write(_e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(_e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(_e)}function combineURLs(_e,et){return et?_e.replace(/\/?\/$/,"")+"/"+et.replace(/^\/+/,""):_e}function buildFullPath(_e,et){return _e&&!isAbsoluteURL(et)?combineURLs(_e,et):et}const headersToObject=_e=>_e instanceof AxiosHeaders$1?{..._e}:_e;function mergeConfig$1(_e,et){et=et||{};const tt={};function rt(gt,bt,wt){return utils$1.isPlainObject(gt)&&utils$1.isPlainObject(bt)?utils$1.merge.call({caseless:wt},gt,bt):utils$1.isPlainObject(bt)?utils$1.merge({},bt):utils$1.isArray(bt)?bt.slice():bt}function it(gt,bt,wt){if(utils$1.isUndefined(bt)){if(!utils$1.isUndefined(gt))return rt(void 0,gt,wt)}else return rt(gt,bt,wt)}function st(gt,bt){if(!utils$1.isUndefined(bt))return rt(void 0,bt)}function ut(gt,bt){if(utils$1.isUndefined(bt)){if(!utils$1.isUndefined(gt))return rt(void 0,gt)}else return rt(void 0,bt)}function ht(gt,bt,wt){if(wt in et)return rt(gt,bt);if(wt in _e)return rt(void 0,gt)}const at={url:st,method:st,data:st,baseURL:ut,transformRequest:ut,transformResponse:ut,paramsSerializer:ut,timeout:ut,timeoutMessage:ut,withCredentials:ut,withXSRFToken:ut,adapter:ut,responseType:ut,xsrfCookieName:ut,xsrfHeaderName:ut,onUploadProgress:ut,onDownloadProgress:ut,decompress:ut,maxContentLength:ut,maxBodyLength:ut,beforeRedirect:ut,transport:ut,httpAgent:ut,httpsAgent:ut,cancelToken:ut,socketPath:ut,responseEncoding:ut,validateStatus:ht,headers:(gt,bt)=>it(headersToObject(gt),headersToObject(bt),!0)};return utils$1.forEach(Object.keys(Object.assign({},_e,et)),function(bt){const wt=at[bt]||it,St=wt(_e[bt],et[bt],bt);utils$1.isUndefined(St)&&wt!==ht||(tt[bt]=St)}),tt}const resolveConfig=_e=>{const et=mergeConfig$1({},_e);let{data:tt,withXSRFToken:rt,xsrfHeaderName:it,xsrfCookieName:st,headers:ut,auth:ht}=et;et.headers=ut=AxiosHeaders$1.from(ut),et.url=buildURL(buildFullPath(et.baseURL,et.url),_e.params,_e.paramsSerializer),ht&&ut.set("Authorization","Basic "+btoa((ht.username||"")+":"+(ht.password?unescape(encodeURIComponent(ht.password)):"")));let at;if(utils$1.isFormData(tt)){if(platform$1.hasStandardBrowserEnv||platform$1.hasStandardBrowserWebWorkerEnv)ut.setContentType(void 0);else if((at=ut.getContentType())!==!1){const[gt,...bt]=at?at.split(";").map(wt=>wt.trim()).filter(Boolean):[];ut.setContentType([gt||"multipart/form-data",...bt].join("; "))}}if(platform$1.hasStandardBrowserEnv&&(rt&&utils$1.isFunction(rt)&&(rt=rt(et)),rt||rt!==!1&&isURLSameOrigin(et.url))){const gt=it&&st&&cookies.read(st);gt&&ut.set(it,gt)}return et},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(_e){return new Promise(function(tt,rt){const it=resolveConfig(_e);let st=it.data;const ut=AxiosHeaders$1.from(it.headers).normalize();let{responseType:ht,onUploadProgress:at,onDownloadProgress:gt}=it,bt,wt,St,kt,Rt;function It(){kt&&kt(),Rt&&Rt(),it.cancelToken&&it.cancelToken.unsubscribe(bt),it.signal&&it.signal.removeEventListener("abort",bt)}let Dt=new XMLHttpRequest;Dt.open(it.method.toUpperCase(),it.url,!0),Dt.timeout=it.timeout;function Mt(){if(!Dt)return;const jt=AxiosHeaders$1.from("getAllResponseHeaders"in Dt&&Dt.getAllResponseHeaders()),Ut={data:!ht||ht==="text"||ht==="json"?Dt.responseText:Dt.response,status:Dt.status,statusText:Dt.statusText,headers:jt,config:_e,request:Dt};settle(function(Kt){tt(Kt),It()},function(Kt){rt(Kt),It()},Ut),Dt=null}"onloadend"in Dt?Dt.onloadend=Mt:Dt.onreadystatechange=function(){!Dt||Dt.readyState!==4||Dt.status===0&&!(Dt.responseURL&&Dt.responseURL.indexOf("file:")===0)||setTimeout(Mt)},Dt.onabort=function(){Dt&&(rt(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,_e,Dt)),Dt=null)},Dt.onerror=function(){rt(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,_e,Dt)),Dt=null},Dt.ontimeout=function(){let Nt=it.timeout?"timeout of "+it.timeout+"ms exceeded":"timeout exceeded";const Ut=it.transitional||transitionalDefaults;it.timeoutErrorMessage&&(Nt=it.timeoutErrorMessage),rt(new AxiosError$1(Nt,Ut.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,_e,Dt)),Dt=null},st===void 0&&ut.setContentType(null),"setRequestHeader"in Dt&&utils$1.forEach(ut.toJSON(),function(Nt,Ut){Dt.setRequestHeader(Ut,Nt)}),utils$1.isUndefined(it.withCredentials)||(Dt.withCredentials=!!it.withCredentials),ht&&ht!=="json"&&(Dt.responseType=it.responseType),gt&&([St,Rt]=progressEventReducer(gt,!0),Dt.addEventListener("progress",St)),at&&Dt.upload&&([wt,kt]=progressEventReducer(at),Dt.upload.addEventListener("progress",wt),Dt.upload.addEventListener("loadend",kt)),(it.cancelToken||it.signal)&&(bt=jt=>{Dt&&(rt(!jt||jt.type?new CanceledError$1(null,_e,Dt):jt),Dt.abort(),Dt=null)},it.cancelToken&&it.cancelToken.subscribe(bt),it.signal&&(it.signal.aborted?bt():it.signal.addEventListener("abort",bt)));const $t=parseProtocol(it.url);if($t&&platform$1.protocols.indexOf($t)===-1){rt(new AxiosError$1("Unsupported protocol "+$t+":",AxiosError$1.ERR_BAD_REQUEST,_e));return}Dt.send(st||null)})},composeSignals=(_e,et)=>{const{length:tt}=_e=_e?_e.filter(Boolean):[];if(et||tt){let rt=new AbortController,it;const st=function(gt){if(!it){it=!0,ht();const bt=gt instanceof Error?gt:this.reason;rt.abort(bt instanceof AxiosError$1?bt:new CanceledError$1(bt instanceof Error?bt.message:bt))}};let ut=et&&setTimeout(()=>{ut=null,st(new AxiosError$1(`timeout ${et} of ms exceeded`,AxiosError$1.ETIMEDOUT))},et);const ht=()=>{_e&&(ut&&clearTimeout(ut),ut=null,_e.forEach(gt=>{gt.unsubscribe?gt.unsubscribe(st):gt.removeEventListener("abort",st)}),_e=null)};_e.forEach(gt=>gt.addEventListener("abort",st));const{signal:at}=rt;return at.unsubscribe=()=>utils$1.asap(ht),at}},streamChunk=function*(_e,et){let tt=_e.byteLength;if(tt<et){yield _e;return}let rt=0,it;for(;rt<tt;)it=rt+et,yield _e.slice(rt,it),rt=it},readBytes=async function*(_e,et){for await(const tt of readStream(_e))yield*streamChunk(tt,et)},readStream=async function*(_e){if(_e[Symbol.asyncIterator]){yield*_e;return}const et=_e.getReader();try{for(;;){const{done:tt,value:rt}=await et.read();if(tt)break;yield rt}}finally{await et.cancel()}},trackStream=(_e,et,tt,rt)=>{const it=readBytes(_e,et);let st=0,ut,ht=at=>{ut||(ut=!0,rt&&rt(at))};return new ReadableStream({async pull(at){try{const{done:gt,value:bt}=await it.next();if(gt){ht(),at.close();return}let wt=bt.byteLength;if(tt){let St=st+=wt;tt(St)}at.enqueue(new Uint8Array(bt))}catch(gt){throw ht(gt),gt}},cancel(at){return ht(at),it.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(_e=>et=>_e.encode(et))(new TextEncoder):async _e=>new Uint8Array(await new Response(_e).arrayBuffer())),test=(_e,...et)=>{try{return!!_e(...et)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let _e=!1;const et=new Request(platform$1.origin,{body:new ReadableStream,method:"POST",get duplex(){return _e=!0,"half"}}).headers.has("Content-Type");return _e&&!et}),DEFAULT_CHUNK_SIZE=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(_e=>_e.body)};isFetchSupported&&(_e=>{["text","arrayBuffer","blob","formData","stream"].forEach(et=>{!resolvers[et]&&(resolvers[et]=utils$1.isFunction(_e[et])?tt=>tt[et]():(tt,rt)=>{throw new AxiosError$1(`Response type '${et}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,rt)})})})(new Response);const getBodyLength=async _e=>{if(_e==null)return 0;if(utils$1.isBlob(_e))return _e.size;if(utils$1.isSpecCompliantForm(_e))return(await new Request(platform$1.origin,{method:"POST",body:_e}).arrayBuffer()).byteLength;if(utils$1.isArrayBufferView(_e)||utils$1.isArrayBuffer(_e))return _e.byteLength;if(utils$1.isURLSearchParams(_e)&&(_e=_e+""),utils$1.isString(_e))return(await encodeText(_e)).byteLength},resolveBodyLength=async(_e,et)=>{const tt=utils$1.toFiniteNumber(_e.getContentLength());return tt??getBodyLength(et)},fetchAdapter=isFetchSupported&&(async _e=>{let{url:et,method:tt,data:rt,signal:it,cancelToken:st,timeout:ut,onDownloadProgress:ht,onUploadProgress:at,responseType:gt,headers:bt,withCredentials:wt="same-origin",fetchOptions:St}=resolveConfig(_e);gt=gt?(gt+"").toLowerCase():"text";let kt=composeSignals([it,st&&st.toAbortSignal()],ut),Rt;const It=kt&&kt.unsubscribe&&(()=>{kt.unsubscribe()});let Dt;try{if(at&&supportsRequestStream&&tt!=="get"&&tt!=="head"&&(Dt=await resolveBodyLength(bt,rt))!==0){let Ut=new Request(et,{method:"POST",body:rt,duplex:"half"}),Ht;if(utils$1.isFormData(rt)&&(Ht=Ut.headers.get("content-type"))&&bt.setContentType(Ht),Ut.body){const[Kt,tr]=progressEventDecorator(Dt,progressEventReducer(asyncDecorator(at)));rt=trackStream(Ut.body,DEFAULT_CHUNK_SIZE,Kt,tr)}}utils$1.isString(wt)||(wt=wt?"include":"omit");const Mt="credentials"in Request.prototype;Rt=new Request(et,{...St,signal:kt,method:tt.toUpperCase(),headers:bt.normalize().toJSON(),body:rt,duplex:"half",credentials:Mt?wt:void 0});let $t=await fetch(Rt);const jt=supportsResponseStream&&(gt==="stream"||gt==="response");if(supportsResponseStream&&(ht||jt&&It)){const Ut={};["status","statusText","headers"].forEach(mr=>{Ut[mr]=$t[mr]});const Ht=utils$1.toFiniteNumber($t.headers.get("content-length")),[Kt,tr]=ht&&progressEventDecorator(Ht,progressEventReducer(asyncDecorator(ht),!0))||[];$t=new Response(trackStream($t.body,DEFAULT_CHUNK_SIZE,Kt,()=>{tr&&tr(),It&&It()}),Ut)}gt=gt||"text";let Nt=await resolvers[utils$1.findKey(resolvers,gt)||"text"]($t,_e);return!jt&&It&&It(),await new Promise((Ut,Ht)=>{settle(Ut,Ht,{data:Nt,headers:AxiosHeaders$1.from($t.headers),status:$t.status,statusText:$t.statusText,config:_e,request:Rt})})}catch(Mt){throw It&&It(),Mt&&Mt.name==="TypeError"&&/fetch/i.test(Mt.message)?Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,_e,Rt),{cause:Mt.cause||Mt}):AxiosError$1.from(Mt,Mt&&Mt.code,_e,Rt)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(_e,et)=>{if(_e){try{Object.defineProperty(_e,"name",{value:et})}catch{}Object.defineProperty(_e,"adapterName",{value:et})}});const renderReason=_e=>`- ${_e}`,isResolvedHandle=_e=>utils$1.isFunction(_e)||_e===null||_e===!1,adapters={getAdapter:_e=>{_e=utils$1.isArray(_e)?_e:[_e];const{length:et}=_e;let tt,rt;const it={};for(let st=0;st<et;st++){tt=_e[st];let ut;if(rt=tt,!isResolvedHandle(tt)&&(rt=knownAdapters[(ut=String(tt)).toLowerCase()],rt===void 0))throw new AxiosError$1(`Unknown adapter '${ut}'`);if(rt)break;it[ut||"#"+st]=rt}if(!rt){const st=Object.entries(it).map(([ht,at])=>`adapter ${ht} `+(at===!1?"is not supported by the environment":"is not available in the build"));let ut=et?st.length>1?`since :
`+st.map(renderReason).join(`
`):" "+renderReason(st[0]):"as no adapter specified";throw new AxiosError$1("There is no suitable adapter to dispatch the request "+ut,"ERR_NOT_SUPPORT")}return rt},adapters:knownAdapters};function throwIfCancellationRequested(_e){if(_e.cancelToken&&_e.cancelToken.throwIfRequested(),_e.signal&&_e.signal.aborted)throw new CanceledError$1(null,_e)}function dispatchRequest(_e){return throwIfCancellationRequested(_e),_e.headers=AxiosHeaders$1.from(_e.headers),_e.data=transformData.call(_e,_e.transformRequest),["post","put","patch"].indexOf(_e.method)!==-1&&_e.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(_e.adapter||defaults$1.adapter)(_e).then(function(rt){return throwIfCancellationRequested(_e),rt.data=transformData.call(_e,_e.transformResponse,rt),rt.headers=AxiosHeaders$1.from(rt.headers),rt},function(rt){return isCancel$1(rt)||(throwIfCancellationRequested(_e),rt&&rt.response&&(rt.response.data=transformData.call(_e,_e.transformResponse,rt.response),rt.response.headers=AxiosHeaders$1.from(rt.response.headers))),Promise.reject(rt)})}const VERSION$1="1.7.7",validators$1={};["object","boolean","number","function","string","symbol"].forEach((_e,et)=>{validators$1[_e]=function(rt){return typeof rt===_e||"a"+(et<1?"n ":" ")+_e}});const deprecatedWarnings={};validators$1.transitional=function(et,tt,rt){function it(st,ut){return"[Axios v"+VERSION$1+"] Transitional option '"+st+"'"+ut+(rt?". "+rt:"")}return(st,ut,ht)=>{if(et===!1)throw new AxiosError$1(it(ut," has been removed"+(tt?" in "+tt:"")),AxiosError$1.ERR_DEPRECATED);return tt&&!deprecatedWarnings[ut]&&(deprecatedWarnings[ut]=!0,console.warn(it(ut," has been deprecated since v"+tt+" and will be removed in the near future"))),et?et(st,ut,ht):!0}};function assertOptions(_e,et,tt){if(typeof _e!="object")throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const rt=Object.keys(_e);let it=rt.length;for(;it-- >0;){const st=rt[it],ut=et[st];if(ut){const ht=_e[st],at=ht===void 0||ut(ht,st,_e);if(at!==!0)throw new AxiosError$1("option "+st+" must be "+at,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(tt!==!0)throw new AxiosError$1("Unknown option "+st,AxiosError$1.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;let Axios$1=class{constructor(et){this.defaults=et,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(et,tt){try{return await this._request(et,tt)}catch(rt){if(rt instanceof Error){let it;Error.captureStackTrace?Error.captureStackTrace(it={}):it=new Error;const st=it.stack?it.stack.replace(/^.+\n/,""):"";try{rt.stack?st&&!String(rt.stack).endsWith(st.replace(/^.+\n.+\n/,""))&&(rt.stack+=`
`+st):rt.stack=st}catch{}}throw rt}}_request(et,tt){typeof et=="string"?(tt=tt||{},tt.url=et):tt=et||{},tt=mergeConfig$1(this.defaults,tt);const{transitional:rt,paramsSerializer:it,headers:st}=tt;rt!==void 0&&validator.assertOptions(rt,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),it!=null&&(utils$1.isFunction(it)?tt.paramsSerializer={serialize:it}:validator.assertOptions(it,{encode:validators.function,serialize:validators.function},!0)),tt.method=(tt.method||this.defaults.method||"get").toLowerCase();let ut=st&&utils$1.merge(st.common,st[tt.method]);st&&utils$1.forEach(["delete","get","head","post","put","patch","common"],Rt=>{delete st[Rt]}),tt.headers=AxiosHeaders$1.concat(ut,st);const ht=[];let at=!0;this.interceptors.request.forEach(function(It){typeof It.runWhen=="function"&&It.runWhen(tt)===!1||(at=at&&It.synchronous,ht.unshift(It.fulfilled,It.rejected))});const gt=[];this.interceptors.response.forEach(function(It){gt.push(It.fulfilled,It.rejected)});let bt,wt=0,St;if(!at){const Rt=[dispatchRequest.bind(this),void 0];for(Rt.unshift.apply(Rt,ht),Rt.push.apply(Rt,gt),St=Rt.length,bt=Promise.resolve(tt);wt<St;)bt=bt.then(Rt[wt++],Rt[wt++]);return bt}St=ht.length;let kt=tt;for(wt=0;wt<St;){const Rt=ht[wt++],It=ht[wt++];try{kt=Rt(kt)}catch(Dt){It.call(this,Dt);break}}try{bt=dispatchRequest.call(this,kt)}catch(Rt){return Promise.reject(Rt)}for(wt=0,St=gt.length;wt<St;)bt=bt.then(gt[wt++],gt[wt++]);return bt}getUri(et){et=mergeConfig$1(this.defaults,et);const tt=buildFullPath(et.baseURL,et.url);return buildURL(tt,et.params,et.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(et){Axios$1.prototype[et]=function(tt,rt){return this.request(mergeConfig$1(rt||{},{method:et,url:tt,data:(rt||{}).data}))}});utils$1.forEach(["post","put","patch"],function(et){function tt(rt){return function(st,ut,ht){return this.request(mergeConfig$1(ht||{},{method:et,headers:rt?{"Content-Type":"multipart/form-data"}:{},url:st,data:ut}))}}Axios$1.prototype[et]=tt(),Axios$1.prototype[et+"Form"]=tt(!0)});let CancelToken$1=class SC{constructor(et){if(typeof et!="function")throw new TypeError("executor must be a function.");let tt;this.promise=new Promise(function(st){tt=st});const rt=this;this.promise.then(it=>{if(!rt._listeners)return;let st=rt._listeners.length;for(;st-- >0;)rt._listeners[st](it);rt._listeners=null}),this.promise.then=it=>{let st;const ut=new Promise(ht=>{rt.subscribe(ht),st=ht}).then(it);return ut.cancel=function(){rt.unsubscribe(st)},ut},et(function(st,ut,ht){rt.reason||(rt.reason=new CanceledError$1(st,ut,ht),tt(rt.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(et){if(this.reason){et(this.reason);return}this._listeners?this._listeners.push(et):this._listeners=[et]}unsubscribe(et){if(!this._listeners)return;const tt=this._listeners.indexOf(et);tt!==-1&&this._listeners.splice(tt,1)}toAbortSignal(){const et=new AbortController,tt=rt=>{et.abort(rt)};return this.subscribe(tt),et.signal.unsubscribe=()=>this.unsubscribe(tt),et.signal}static source(){let et;return{token:new SC(function(it){et=it}),cancel:et}}};function spread$1(_e){return function(tt){return _e.apply(null,tt)}}function isAxiosError$1(_e){return utils$1.isObject(_e)&&_e.isAxiosError===!0}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode$1).forEach(([_e,et])=>{HttpStatusCode$1[et]=_e});function createInstance(_e){const et=new Axios$1(_e),tt=bind(Axios$1.prototype.request,et);return utils$1.extend(tt,Axios$1.prototype,et,{allOwnKeys:!0}),utils$1.extend(tt,et,null,{allOwnKeys:!0}),tt.create=function(it){return createInstance(mergeConfig$1(_e,it))},tt}const axios=createInstance(defaults$1);axios.Axios=Axios$1;axios.CanceledError=CanceledError$1;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel$1;axios.VERSION=VERSION$1;axios.toFormData=toFormData$1;axios.AxiosError=AxiosError$1;axios.Cancel=axios.CanceledError;axios.all=function(et){return Promise.all(et)};axios.spread=spread$1;axios.isAxiosError=isAxiosError$1;axios.mergeConfig=mergeConfig$1;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=_e=>formDataToJSON(utils$1.isHTMLForm(_e)?new FormData(_e):_e);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const{Axios,AxiosError,CanceledError,isCancel,CancelToken,VERSION,all,Cancel:Cancel$1,isAxiosError,spread,toFormData,AxiosHeaders,HttpStatusCode,formToJSON,getAdapter,mergeConfig}=axios;var ROUTES=(_e=>(_e.ROOT="/",_e.LOGIN="/login",_e.SIGN_UP="/sign-up",_e.FORGOT_PASSWORD="/forgot-password",_e.VERIFY_CODE="/verify-code",_e.SET_PASSWORD="/set-password",_e.PROFILE="/profile",_e.COST="/cost",_e.ABOUT_US="/about-us",_e.BLOG="/blog",_e.BLOG_DETAIL="/blog/:id",_e.CREATE_ORDER="/create-order",_e.MY_ORDER="/my-order",_e.ORDER_DETAIL="/order-detail",_e.ORDER_DETAIL_ID="/order-detail/:id",_e.LOGOUT="/logout",_e.PAY_OS="pay-os",_e.DASH_BOARD="/dash-board/",_e.TRUCK="truck",_e.CUSTOMER="customer",_e.ORDER="order",_e.DELETE_ACCOUT="delete-account",_e))(ROUTES||{});const BASE_URL="https://landlapi.ddnsking.com/api/",api=axios.create({baseURL:BASE_URL,withCredentials:!0,timeout:5e3,headers:{"Content-Type":"application/json"}});api.interceptors.request.use(_e=>{const et=localStorage.getItem("accessToken");return et&&_e.headers.set("Authorization",`Bearer ${et}`),_e},_e=>Promise.reject(_e));api.interceptors.response.use(_e=>_e,async _e=>{var tt;const et=_e.config;if(_e.response.status===401&&!et._retry){et._retry=!0;try{const it=(tt=(await authService.getRefresh()).result)==null?void 0:tt.data;return localStorage.setItem("accessToken",it),et.headers.Authorization=`Bearer ${it}`,axios(et)}catch(rt){handleApiError(rt),redirect(ROUTES.LOGIN)}}return Promise.reject(_e)});const handleApiError=_e=>{const{response:et}=_e;if((et==null?void 0:et.status)===401)_t.error("Please login again.");else if((et==null?void 0:et.status)===500)_t.error("Something went wrong");else return et==null?void 0:et.data},get$5=async _e=>{try{return(await api.get(_e)).data}catch(et){if(et instanceof AxiosError)return handleApiError(et);throw et}},post=async(_e,et)=>{try{return(await api.post(_e,et)).data}catch(tt){if(tt instanceof AxiosError)return handleApiError(tt);throw tt}},patch=async(_e,et)=>{try{return(await api.patch(_e,et)).data}catch(tt){if(tt instanceof AxiosError)return handleApiError(tt);throw tt}},patchFormData=async(_e,et)=>{try{const tt=localStorage.getItem("accessToken");return(await axios.create({baseURL:BASE_URL,headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${tt}`}}).patch(_e,et)).data}catch(tt){if(tt instanceof AxiosError)return handleApiError(tt);throw tt}},register=async({data:_e})=>await post("Auth/FirstStep",{..._e,typeAccount:"Customer"}),verify=async({email:_e,otp:et})=>await post("Auth/SubmitOTP",{email:_e,otp:et}),login=async({email:_e,password:et})=>await post("Auth/login",{email:_e,password:et}),forgotPassword=async({email:_e})=>await post(`Auth/Forget-Password?email=${_e}`,{}),resendOTP=async({email:_e})=>await post(`Auth/Resend-Otp?email=${_e}`,{}),updatePassword=async({email:_e,newPassword:et,confirmNewPassword:tt})=>await post(`Auth/Update-Password?email=${_e}`,{password:et,confirmPassword:tt}),loginWithGG=async({data:_e})=>await post("Auth/login-google",_e),getUserInfo=async()=>await get$5("User/GetProfile"),getRefresh=async()=>await get$5("Auth/refresh-token"),deleteAccount=async()=>await post("User/DeleteAccount",{}),updateUserInformation=async({email:_e,data:et})=>await patchFormData(`User/UpdateInfo?email=${_e}`,et),authService={register,verify,login,forgotPassword,resendOTP,updatePassword,loginWithGG,getUserInfo,getRefresh,deleteAccount,updateUserInformation},AuthContext=reactExports.createContext(void 0),AuthProvider=({children:_e})=>{const[et,tt]=reactExports.useState({}),rt=async()=>{var it;if(localStorage.getItem("accessToken")!==null){const st=await authService.getUserInfo();st.success&&tt({user:(it=st.result)==null?void 0:it.data})}};return reactExports.useEffect(()=>{rt()},[]),jsxRuntimeExports.jsx(AuthContext.Provider,{value:{auth:et,setAuth:tt},children:_e})},useAuth=()=>{const _e=reactExports.useContext(AuthContext);if(!_e)throw new Error("useAuth must be used within an AuthProvider");return _e};var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(_e,et){module.exports=et()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(et){_useWebWorker=!!et},getWebWorker=function(){return _useWebWorker},setLocationHref=function(et){locationHref=et},getLocationHref=function(){return locationHref};function createTag(_e){return document.createElement(_e)}function extendPrototype(_e,et){var tt,rt=_e.length,it;for(tt=0;tt<rt;tt+=1){it=_e[tt].prototype;for(var st in it)Object.prototype.hasOwnProperty.call(it,st)&&(et.prototype[st]=it[st])}}function getDescriptor(_e,et){return Object.getOwnPropertyDescriptor(_e,et)}function createProxyFunction(_e){function et(){}return et.prototype=_e,et}var audioControllerFactory=function(){function _e(et){this.audios=[],this.audioFactory=et,this._volume=1,this._isMuted=!1}return _e.prototype={addAudio:function(tt){this.audios.push(tt)},pause:function(){var tt,rt=this.audios.length;for(tt=0;tt<rt;tt+=1)this.audios[tt].pause()},resume:function(){var tt,rt=this.audios.length;for(tt=0;tt<rt;tt+=1)this.audios[tt].resume()},setRate:function(tt){var rt,it=this.audios.length;for(rt=0;rt<it;rt+=1)this.audios[rt].setRate(tt)},createAudio:function(tt){return this.audioFactory?this.audioFactory(tt):window.Howl?new window.Howl({src:[tt]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(tt){this.audioFactory=tt},setVolume:function(tt){this._volume=tt,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var tt,rt=this.audios.length;for(tt=0;tt<rt;tt+=1)this.audios[tt].volume(this._volume*(this._isMuted?0:1))}},function(){return new _e}}(),createTypedArray=function(){function _e(tt,rt){var it=0,st=[],ut;switch(tt){case"int16":case"uint8c":ut=1;break;default:ut=1.1;break}for(it=0;it<rt;it+=1)st.push(ut);return st}function et(tt,rt){return tt==="float32"?new Float32Array(rt):tt==="int16"?new Int16Array(rt):tt==="uint8c"?new Uint8ClampedArray(rt):_e(tt,rt)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?et:_e}();function createSizedArray(_e){return Array.apply(null,{length:_e})}function _typeof$6(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(tt){return typeof tt}:_typeof$6=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$6(_e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var _e=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],et,tt=_e.length;for(et=0;et<tt;et+=1)BMMath[_e[et]]=Math[_e[et]]})(),BMMath.random=Math.random,BMMath.abs=function(_e){var et=_typeof$6(_e);if(et==="object"&&_e.length){var tt=createSizedArray(_e.length),rt,it=_e.length;for(rt=0;rt<it;rt+=1)tt[rt]=Math.abs(_e[rt]);return tt}return Math.abs(_e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(_e){_e.style.position="absolute",_e.style.top=0,_e.style.left=0,_e.style.display="block",_e.style.transformOrigin="0 0",_e.style.webkitTransformOrigin="0 0",_e.style.backfaceVisibility="visible",_e.style.webkitBackfaceVisibility="visible",_e.style.transformStyle="preserve-3d",_e.style.webkitTransformStyle="preserve-3d",_e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(_e,et,tt,rt){this.type=_e,this.currentTime=et,this.totalTime=tt,this.direction=rt<0?-1:1}function BMCompleteEvent(_e,et){this.type=_e,this.direction=et<0?-1:1}function BMCompleteLoopEvent(_e,et,tt,rt){this.type=_e,this.currentLoop=tt,this.totalLoops=et,this.direction=rt<0?-1:1}function BMSegmentStartEvent(_e,et,tt){this.type=_e,this.firstFrame=et,this.totalFrames=tt}function BMDestroyEvent(_e,et){this.type=_e,this.target=et}function BMRenderFrameErrorEvent(_e,et){this.type="renderFrameError",this.nativeError=_e,this.currentTime=et}function BMConfigErrorEvent(_e){this.type="configError",this.nativeError=_e}var createElementID=function(){var _e=0;return function(){return _e+=1,idPrefix$1+"__lottie_element_"+_e}}();function HSVtoRGB(_e,et,tt){var rt,it,st,ut,ht,at,gt,bt;switch(ut=Math.floor(_e*6),ht=_e*6-ut,at=tt*(1-et),gt=tt*(1-ht*et),bt=tt*(1-(1-ht)*et),ut%6){case 0:rt=tt,it=bt,st=at;break;case 1:rt=gt,it=tt,st=at;break;case 2:rt=at,it=tt,st=bt;break;case 3:rt=at,it=gt,st=tt;break;case 4:rt=bt,it=at,st=tt;break;case 5:rt=tt,it=at,st=gt;break}return[rt,it,st]}function RGBtoHSV(_e,et,tt){var rt=Math.max(_e,et,tt),it=Math.min(_e,et,tt),st=rt-it,ut,ht=rt===0?0:st/rt,at=rt/255;switch(rt){case it:ut=0;break;case _e:ut=et-tt+st*(et<tt?6:0),ut/=6*st;break;case et:ut=tt-_e+st*2,ut/=6*st;break;case tt:ut=_e-et+st*4,ut/=6*st;break}return[ut,ht,at]}function addSaturationToRGB(_e,et){var tt=RGBtoHSV(_e[0]*255,_e[1]*255,_e[2]*255);return tt[1]+=et,tt[1]>1?tt[1]=1:tt[1]<=0&&(tt[1]=0),HSVtoRGB(tt[0],tt[1],tt[2])}function addBrightnessToRGB(_e,et){var tt=RGBtoHSV(_e[0]*255,_e[1]*255,_e[2]*255);return tt[2]+=et,tt[2]>1?tt[2]=1:tt[2]<0&&(tt[2]=0),HSVtoRGB(tt[0],tt[1],tt[2])}function addHueToRGB(_e,et){var tt=RGBtoHSV(_e[0]*255,_e[1]*255,_e[2]*255);return tt[0]+=et/360,tt[0]>1?tt[0]-=1:tt[0]<0&&(tt[0]+=1),HSVtoRGB(tt[0],tt[1],tt[2])}var rgbToHex=function(){var _e=[],et,tt;for(et=0;et<256;et+=1)tt=et.toString(16),_e[et]=tt.length===1?"0"+tt:tt;return function(rt,it,st){return rt<0&&(rt=0),it<0&&(it=0),st<0&&(st=0),"#"+_e[rt]+_e[it]+_e[st]}}(),setSubframeEnabled=function(et){subframeEnabled=!!et},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(et){expressionsPlugin=et},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(et){expressionsInterfaces=et},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(et){defaultCurveSegments=et},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(et){idPrefix$1=et};function createNS(_e){return document.createElementNS(svgNS,_e)}function _typeof$5(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(tt){return typeof tt}:_typeof$5=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$5(_e)}var dataManager=function(){var _e=1,et=[],tt,rt,it={onmessage:function(){},postMessage:function(kt){tt({data:kt})}},st={postMessage:function(kt){it.onmessage({data:kt})}};function ut(St){if(window.Worker&&window.Blob&&getWebWorker()){var kt=new Blob(["var _workerSelf = self; self.onmessage = ",St.toString()],{type:"text/javascript"}),Rt=URL.createObjectURL(kt);return new Worker(Rt)}return tt=St,it}function ht(){rt||(rt=ut(function(kt){function Rt(){function Dt(Lr,ar){var hr,Qt,ir=Lr.length,Mr,Cr,rn,fn;for(Qt=0;Qt<ir;Qt+=1)if(hr=Lr[Qt],"ks"in hr&&!hr.completed){if(hr.completed=!0,hr.hasMask){var Dn=hr.masksProperties;for(Cr=Dn.length,Mr=0;Mr<Cr;Mr+=1)if(Dn[Mr].pt.k.i)Ut(Dn[Mr].pt.k);else for(fn=Dn[Mr].pt.k.length,rn=0;rn<fn;rn+=1)Dn[Mr].pt.k[rn].s&&Ut(Dn[Mr].pt.k[rn].s[0]),Dn[Mr].pt.k[rn].e&&Ut(Dn[Mr].pt.k[rn].e[0])}hr.ty===0?(hr.layers=jt(hr.refId,ar),Dt(hr.layers,ar)):hr.ty===4?Nt(hr.shapes):hr.ty===5&&Or(hr)}}function Mt(Lr,ar){if(Lr){var hr=0,Qt=Lr.length;for(hr=0;hr<Qt;hr+=1)Lr[hr].t===1&&(Lr[hr].data.layers=jt(Lr[hr].data.refId,ar),Dt(Lr[hr].data.layers,ar))}}function $t(Lr,ar){for(var hr=0,Qt=ar.length;hr<Qt;){if(ar[hr].id===Lr)return ar[hr];hr+=1}return null}function jt(Lr,ar){var hr=$t(Lr,ar);return hr?hr.layers.__used?JSON.parse(JSON.stringify(hr.layers)):(hr.layers.__used=!0,hr.layers):null}function Nt(Lr){var ar,hr=Lr.length,Qt,ir;for(ar=hr-1;ar>=0;ar-=1)if(Lr[ar].ty==="sh")if(Lr[ar].ks.k.i)Ut(Lr[ar].ks.k);else for(ir=Lr[ar].ks.k.length,Qt=0;Qt<ir;Qt+=1)Lr[ar].ks.k[Qt].s&&Ut(Lr[ar].ks.k[Qt].s[0]),Lr[ar].ks.k[Qt].e&&Ut(Lr[ar].ks.k[Qt].e[0]);else Lr[ar].ty==="gr"&&Nt(Lr[ar].it)}function Ut(Lr){var ar,hr=Lr.i.length;for(ar=0;ar<hr;ar+=1)Lr.i[ar][0]+=Lr.v[ar][0],Lr.i[ar][1]+=Lr.v[ar][1],Lr.o[ar][0]+=Lr.v[ar][0],Lr.o[ar][1]+=Lr.v[ar][1]}function Ht(Lr,ar){var hr=ar?ar.split("."):[100,100,100];return Lr[0]>hr[0]?!0:hr[0]>Lr[0]?!1:Lr[1]>hr[1]?!0:hr[1]>Lr[1]?!1:Lr[2]>hr[2]?!0:hr[2]>Lr[2]?!1:null}var Kt=function(){var Lr=[4,4,14];function ar(Qt){var ir=Qt.t.d;Qt.t.d={k:[{s:ir,t:0}]}}function hr(Qt){var ir,Mr=Qt.length;for(ir=0;ir<Mr;ir+=1)Qt[ir].ty===5&&ar(Qt[ir])}return function(Qt){if(Ht(Lr,Qt.v)&&(hr(Qt.layers),Qt.assets)){var ir,Mr=Qt.assets.length;for(ir=0;ir<Mr;ir+=1)Qt.assets[ir].layers&&hr(Qt.assets[ir].layers)}}}(),tr=function(){var Lr=[4,7,99];return function(ar){if(ar.chars&&!Ht(Lr,ar.v)){var hr,Qt=ar.chars.length;for(hr=0;hr<Qt;hr+=1){var ir=ar.chars[hr];ir.data&&ir.data.shapes&&(Nt(ir.data.shapes),ir.data.ip=0,ir.data.op=99999,ir.data.st=0,ir.data.sr=1,ir.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ar.chars[hr].t||(ir.data.shapes.push({ty:"no"}),ir.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),mr=function(){var Lr=[5,7,15];function ar(Qt){var ir=Qt.t.p;typeof ir.a=="number"&&(ir.a={a:0,k:ir.a}),typeof ir.p=="number"&&(ir.p={a:0,k:ir.p}),typeof ir.r=="number"&&(ir.r={a:0,k:ir.r})}function hr(Qt){var ir,Mr=Qt.length;for(ir=0;ir<Mr;ir+=1)Qt[ir].ty===5&&ar(Qt[ir])}return function(Qt){if(Ht(Lr,Qt.v)&&(hr(Qt.layers),Qt.assets)){var ir,Mr=Qt.assets.length;for(ir=0;ir<Mr;ir+=1)Qt.assets[ir].layers&&hr(Qt.assets[ir].layers)}}}(),vr=function(){var Lr=[4,1,9];function ar(Qt){var ir,Mr=Qt.length,Cr,rn;for(ir=0;ir<Mr;ir+=1)if(Qt[ir].ty==="gr")ar(Qt[ir].it);else if(Qt[ir].ty==="fl"||Qt[ir].ty==="st")if(Qt[ir].c.k&&Qt[ir].c.k[0].i)for(rn=Qt[ir].c.k.length,Cr=0;Cr<rn;Cr+=1)Qt[ir].c.k[Cr].s&&(Qt[ir].c.k[Cr].s[0]/=255,Qt[ir].c.k[Cr].s[1]/=255,Qt[ir].c.k[Cr].s[2]/=255,Qt[ir].c.k[Cr].s[3]/=255),Qt[ir].c.k[Cr].e&&(Qt[ir].c.k[Cr].e[0]/=255,Qt[ir].c.k[Cr].e[1]/=255,Qt[ir].c.k[Cr].e[2]/=255,Qt[ir].c.k[Cr].e[3]/=255);else Qt[ir].c.k[0]/=255,Qt[ir].c.k[1]/=255,Qt[ir].c.k[2]/=255,Qt[ir].c.k[3]/=255}function hr(Qt){var ir,Mr=Qt.length;for(ir=0;ir<Mr;ir+=1)Qt[ir].ty===4&&ar(Qt[ir].shapes)}return function(Qt){if(Ht(Lr,Qt.v)&&(hr(Qt.layers),Qt.assets)){var ir,Mr=Qt.assets.length;for(ir=0;ir<Mr;ir+=1)Qt.assets[ir].layers&&hr(Qt.assets[ir].layers)}}}(),wr=function(){var Lr=[4,4,18];function ar(Qt){var ir,Mr=Qt.length,Cr,rn;for(ir=Mr-1;ir>=0;ir-=1)if(Qt[ir].ty==="sh")if(Qt[ir].ks.k.i)Qt[ir].ks.k.c=Qt[ir].closed;else for(rn=Qt[ir].ks.k.length,Cr=0;Cr<rn;Cr+=1)Qt[ir].ks.k[Cr].s&&(Qt[ir].ks.k[Cr].s[0].c=Qt[ir].closed),Qt[ir].ks.k[Cr].e&&(Qt[ir].ks.k[Cr].e[0].c=Qt[ir].closed);else Qt[ir].ty==="gr"&&ar(Qt[ir].it)}function hr(Qt){var ir,Mr,Cr=Qt.length,rn,fn,Dn,Yn;for(Mr=0;Mr<Cr;Mr+=1){if(ir=Qt[Mr],ir.hasMask){var eo=ir.masksProperties;for(fn=eo.length,rn=0;rn<fn;rn+=1)if(eo[rn].pt.k.i)eo[rn].pt.k.c=eo[rn].cl;else for(Yn=eo[rn].pt.k.length,Dn=0;Dn<Yn;Dn+=1)eo[rn].pt.k[Dn].s&&(eo[rn].pt.k[Dn].s[0].c=eo[rn].cl),eo[rn].pt.k[Dn].e&&(eo[rn].pt.k[Dn].e[0].c=eo[rn].cl)}ir.ty===4&&ar(ir.shapes)}}return function(Qt){if(Ht(Lr,Qt.v)&&(hr(Qt.layers),Qt.assets)){var ir,Mr=Qt.assets.length;for(ir=0;ir<Mr;ir+=1)Qt.assets[ir].layers&&hr(Qt.assets[ir].layers)}}}();function yr(Lr){Lr.__complete||(vr(Lr),Kt(Lr),tr(Lr),mr(Lr),wr(Lr),Dt(Lr.layers,Lr.assets),Mt(Lr.chars,Lr.assets),Lr.__complete=!0)}function Or(Lr){Lr.t.a.length===0&&"m"in Lr.t.p}var Nr={};return Nr.completeData=yr,Nr.checkColors=vr,Nr.checkChars=tr,Nr.checkPathProperties=mr,Nr.checkShapes=wr,Nr.completeLayers=Dt,Nr}if(st.dataManager||(st.dataManager=Rt()),st.assetLoader||(st.assetLoader=function(){function Dt($t){var jt=$t.getResponseHeader("content-type");return jt&&$t.responseType==="json"&&jt.indexOf("json")!==-1||$t.response&&_typeof$5($t.response)==="object"?$t.response:$t.response&&typeof $t.response=="string"?JSON.parse($t.response):$t.responseText?JSON.parse($t.responseText):null}function Mt($t,jt,Nt,Ut){var Ht,Kt=new XMLHttpRequest;try{Kt.responseType="json"}catch{}Kt.onreadystatechange=function(){if(Kt.readyState===4)if(Kt.status===200)Ht=Dt(Kt),Nt(Ht);else try{Ht=Dt(Kt),Nt(Ht)}catch(tr){Ut&&Ut(tr)}};try{Kt.open(["G","E","T"].join(""),$t,!0)}catch{Kt.open(["G","E","T"].join(""),jt+"/"+$t,!0)}Kt.send()}return{load:Mt}}()),kt.data.type==="loadAnimation")st.assetLoader.load(kt.data.path,kt.data.fullPath,function(Dt){st.dataManager.completeData(Dt),st.postMessage({id:kt.data.id,payload:Dt,status:"success"})},function(){st.postMessage({id:kt.data.id,status:"error"})});else if(kt.data.type==="complete"){var It=kt.data.animation;st.dataManager.completeData(It),st.postMessage({id:kt.data.id,payload:It,status:"success"})}else kt.data.type==="loadData"&&st.assetLoader.load(kt.data.path,kt.data.fullPath,function(Dt){st.postMessage({id:kt.data.id,payload:Dt,status:"success"})},function(){st.postMessage({id:kt.data.id,status:"error"})})}),rt.onmessage=function(St){var kt=St.data,Rt=kt.id,It=et[Rt];et[Rt]=null,kt.status==="success"?It.onComplete(kt.payload):It.onError&&It.onError()})}function at(St,kt){_e+=1;var Rt="processId_"+_e;return et[Rt]={onComplete:St,onError:kt},Rt}function gt(St,kt,Rt){ht();var It=at(kt,Rt);rt.postMessage({type:"loadAnimation",path:St,fullPath:window.location.origin+window.location.pathname,id:It})}function bt(St,kt,Rt){ht();var It=at(kt,Rt);rt.postMessage({type:"loadData",path:St,fullPath:window.location.origin+window.location.pathname,id:It})}function wt(St,kt,Rt){ht();var It=at(kt,Rt);rt.postMessage({type:"complete",animation:St,id:It})}return{loadAnimation:gt,loadData:bt,completeAnimation:wt}}(),ImagePreloader=function(){var _e=function(){var Mt=createTag("canvas");Mt.width=1,Mt.height=1;var $t=Mt.getContext("2d");return $t.fillStyle="rgba(0,0,0,0)",$t.fillRect(0,0,1,1),Mt}();function et(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function tt(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function rt(Mt,$t,jt){var Nt="";if(Mt.e)Nt=Mt.p;else if($t){var Ut=Mt.p;Ut.indexOf("images/")!==-1&&(Ut=Ut.split("/")[1]),Nt=$t+Ut}else Nt=jt,Nt+=Mt.u?Mt.u:"",Nt+=Mt.p;return Nt}function it(Mt){var $t=0,jt=setInterval((function(){var Nt=Mt.getBBox();(Nt.width||$t>500)&&(this._imageLoaded(),clearInterval(jt)),$t+=1}).bind(this),50)}function st(Mt){var $t=rt(Mt,this.assetsPath,this.path),jt=createNS("image");isSafari?this.testImageLoaded(jt):jt.addEventListener("load",this._imageLoaded,!1),jt.addEventListener("error",(function(){Nt.img=_e,this._imageLoaded()}).bind(this),!1),jt.setAttributeNS("http://www.w3.org/1999/xlink","href",$t),this._elementHelper.append?this._elementHelper.append(jt):this._elementHelper.appendChild(jt);var Nt={img:jt,assetData:Mt};return Nt}function ut(Mt){var $t=rt(Mt,this.assetsPath,this.path),jt=createTag("img");jt.crossOrigin="anonymous",jt.addEventListener("load",this._imageLoaded,!1),jt.addEventListener("error",(function(){Nt.img=_e,this._imageLoaded()}).bind(this),!1),jt.src=$t;var Nt={img:jt,assetData:Mt};return Nt}function ht(Mt){var $t={assetData:Mt},jt=rt(Mt,this.assetsPath,this.path);return dataManager.loadData(jt,(function(Nt){$t.img=Nt,this._footageLoaded()}).bind(this),(function(){$t.img={},this._footageLoaded()}).bind(this)),$t}function at(Mt,$t){this.imagesLoadedCb=$t;var jt,Nt=Mt.length;for(jt=0;jt<Nt;jt+=1)Mt[jt].layers||(!Mt[jt].t||Mt[jt].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(Mt[jt]))):Mt[jt].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(Mt[jt]))))}function gt(Mt){this.path=Mt||""}function bt(Mt){this.assetsPath=Mt||""}function wt(Mt){for(var $t=0,jt=this.images.length;$t<jt;){if(this.images[$t].assetData===Mt)return this.images[$t].img;$t+=1}return null}function St(){this.imagesLoadedCb=null,this.images.length=0}function kt(){return this.totalImages===this.loadedAssets}function Rt(){return this.totalFootages===this.loadedFootagesCount}function It(Mt,$t){Mt==="svg"?(this._elementHelper=$t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Dt(){this._imageLoaded=et.bind(this),this._footageLoaded=tt.bind(this),this.testImageLoaded=it.bind(this),this.createFootageData=ht.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Dt.prototype={loadAssets:at,setAssetsPath:bt,setPath:gt,loadedImages:kt,loadedFootages:Rt,destroy:St,getAsset:wt,createImgData:ut,createImageData:st,imageLoaded:et,footageLoaded:tt,setCacheType:It},Dt}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(et,tt){if(this._cbs[et])for(var rt=this._cbs[et],it=0;it<rt.length;it+=1)rt[it](tt)},addEventListener:function(et,tt){return this._cbs[et]||(this._cbs[et]=[]),this._cbs[et].push(tt),(function(){this.removeEventListener(et,tt)}).bind(this)},removeEventListener:function(et,tt){if(!tt)this._cbs[et]=null;else if(this._cbs[et]){for(var rt=0,it=this._cbs[et].length;rt<it;)this._cbs[et][rt]===tt&&(this._cbs[et].splice(rt,1),rt-=1,it-=1),rt+=1;this._cbs[et].length||(this._cbs[et]=null)}}};var markerParser=function(){function _e(et){for(var tt=et.split(`\r
`),rt={},it,st=0,ut=0;ut<tt.length;ut+=1)it=tt[ut].split(":"),it.length===2&&(rt[it[0]]=it[1].trim(),st+=1);if(st===0)throw new Error;return rt}return function(et){for(var tt=[],rt=0;rt<et.length;rt+=1){var it=et[rt],st={time:it.tm,duration:it.dr};try{st.payload=JSON.parse(et[rt].cm)}catch{try{st.payload=_e(et[rt].cm)}catch{st.payload={name:et[rt].cm}}}tt.push(st)}return tt}}(),ProjectInterface=function(){function _e(et){this.compositions.push(et)}return function(){function et(tt){for(var rt=0,it=this.compositions.length;rt<it;){if(this.compositions[rt].data&&this.compositions[rt].data.nm===tt)return this.compositions[rt].prepareFrame&&this.compositions[rt].data.xt&&this.compositions[rt].prepareFrame(this.currentFrame),this.compositions[rt].compInterface;rt+=1}return null}return et.compositions=[],et.currentFrame=0,et.registerComposition=_e,et}}(),renderers={},registerRenderer=function(et,tt){renderers[et]=tt};function getRenderer(_e){return renderers[_e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var _e in renderers)if(renderers[_e])return _e;return""}function _typeof$4(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(tt){return typeof tt}:_typeof$4=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$4(_e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(_e){(_e.wrapper||_e.container)&&(this.wrapper=_e.wrapper||_e.container);var et="svg";_e.animType?et=_e.animType:_e.renderer&&(et=_e.renderer);var tt=getRenderer(et);this.renderer=new tt(this,_e.rendererSettings),this.imagePreloader.setCacheType(et,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=et,_e.loop===""||_e.loop===null||_e.loop===void 0||_e.loop===!0?this.loop=!0:_e.loop===!1?this.loop=!1:this.loop=parseInt(_e.loop,10),this.autoplay="autoplay"in _e?_e.autoplay:!0,this.name=_e.name?_e.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(_e,"autoloadSegments")?_e.autoloadSegments:!0,this.assetsPath=_e.assetsPath,this.initialSegment=_e.initialSegment,_e.audioFactory&&this.audioController.setAudioFactory(_e.audioFactory),_e.animationData?this.setupAnimation(_e.animationData):_e.path&&(_e.path.lastIndexOf("\\")!==-1?this.path=_e.path.substr(0,_e.path.lastIndexOf("\\")+1):this.path=_e.path.substr(0,_e.path.lastIndexOf("/")+1),this.fileName=_e.path.substr(_e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(_e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(_e){dataManager.completeAnimation(_e,this.configAnimation)},AnimationItem.prototype.setData=function(_e,et){et&&_typeof$4(et)!=="object"&&(et=JSON.parse(et));var tt={wrapper:_e,animationData:et},rt=_e.attributes;tt.path=rt.getNamedItem("data-animation-path")?rt.getNamedItem("data-animation-path").value:rt.getNamedItem("data-bm-path")?rt.getNamedItem("data-bm-path").value:rt.getNamedItem("bm-path")?rt.getNamedItem("bm-path").value:"",tt.animType=rt.getNamedItem("data-anim-type")?rt.getNamedItem("data-anim-type").value:rt.getNamedItem("data-bm-type")?rt.getNamedItem("data-bm-type").value:rt.getNamedItem("bm-type")?rt.getNamedItem("bm-type").value:rt.getNamedItem("data-bm-renderer")?rt.getNamedItem("data-bm-renderer").value:rt.getNamedItem("bm-renderer")?rt.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var it=rt.getNamedItem("data-anim-loop")?rt.getNamedItem("data-anim-loop").value:rt.getNamedItem("data-bm-loop")?rt.getNamedItem("data-bm-loop").value:rt.getNamedItem("bm-loop")?rt.getNamedItem("bm-loop").value:"";it==="false"?tt.loop=!1:it==="true"?tt.loop=!0:it!==""&&(tt.loop=parseInt(it,10));var st=rt.getNamedItem("data-anim-autoplay")?rt.getNamedItem("data-anim-autoplay").value:rt.getNamedItem("data-bm-autoplay")?rt.getNamedItem("data-bm-autoplay").value:rt.getNamedItem("bm-autoplay")?rt.getNamedItem("bm-autoplay").value:!0;tt.autoplay=st!=="false",tt.name=rt.getNamedItem("data-name")?rt.getNamedItem("data-name").value:rt.getNamedItem("data-bm-name")?rt.getNamedItem("data-bm-name").value:rt.getNamedItem("bm-name")?rt.getNamedItem("bm-name").value:"";var ut=rt.getNamedItem("data-anim-prerender")?rt.getNamedItem("data-anim-prerender").value:rt.getNamedItem("data-bm-prerender")?rt.getNamedItem("data-bm-prerender").value:rt.getNamedItem("bm-prerender")?rt.getNamedItem("bm-prerender").value:"";ut==="false"&&(tt.prerender=!1),tt.path?this.setParams(tt):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(_e){_e.op>this.animationData.op&&(this.animationData.op=_e.op,this.totalFrames=Math.floor(_e.op-this.animationData.ip));var et=this.animationData.layers,tt,rt=et.length,it=_e.layers,st,ut=it.length;for(st=0;st<ut;st+=1)for(tt=0;tt<rt;){if(et[tt].id===it[st].id){et[tt]=it[st];break}tt+=1}if((_e.chars||_e.fonts)&&(this.renderer.globalData.fontManager.addChars(_e.chars),this.renderer.globalData.fontManager.addFonts(_e.fonts,this.renderer.globalData.defs)),_e.assets)for(rt=_e.assets.length,tt=0;tt<rt;tt+=1)this.animationData.assets.push(_e.assets[tt]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(_e){this.animationData=_e;var et=getExpressionsPlugin();et&&et.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var _e=this.animationData.segments;if(!_e||_e.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var et=_e.shift();this.timeCompleted=et.time*this.frameRate;var tt=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(tt,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var _e=this.animationData.segments;_e||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(_e){if(this.renderer)try{this.animationData=_e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(_e),_e.assets||(_e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(_e.assets),this.markers=markerParser(_e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(et){this.triggerConfigError(et)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var _e=getExpressionsPlugin();_e&&_e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(_e,et){var tt=typeof _e=="number"?_e:void 0,rt=typeof et=="number"?et:void 0;this.renderer.updateContainerSize(tt,rt)},AnimationItem.prototype.setSubframe=function(_e){this.isSubframeEnabled=!!_e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(_e){this.triggerRenderFrameError(_e)}},AnimationItem.prototype.play=function(_e){_e&&this.name!==_e||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(_e){_e&&this.name!==_e||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(_e){_e&&this.name!==_e||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(_e){_e&&this.name!==_e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(_e){for(var et,tt=0;tt<this.markers.length;tt+=1)if(et=this.markers[tt],et.payload&&et.payload.name===_e)return et;return null},AnimationItem.prototype.goToAndStop=function(_e,et,tt){if(!(tt&&this.name!==tt)){var rt=Number(_e);if(isNaN(rt)){var it=this.getMarkerData(_e);it&&this.goToAndStop(it.time,!0)}else et?this.setCurrentRawFrameValue(_e):this.setCurrentRawFrameValue(_e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(_e,et,tt){if(!(tt&&this.name!==tt)){var rt=Number(_e);if(isNaN(rt)){var it=this.getMarkerData(_e);it&&(it.duration?this.playSegments([it.time,it.time+it.duration],!0):this.goToAndStop(it.time,!0))}else this.goToAndStop(rt,et,tt);this.play()}},AnimationItem.prototype.advanceTime=function(_e){if(!(this.isPaused===!0||this.isLoaded===!1)){var et=this.currentRawFrame+_e*this.frameModifier,tt=!1;et>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(et>this.totalFrames?et%this.totalFrames:0)||(tt=!0,et=this.totalFrames-1):et>=this.totalFrames?(this.playCount+=1,this.checkSegments(et%this.totalFrames)||(this.setCurrentRawFrameValue(et%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(et):et<0?this.checkSegments(et%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+et%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(tt=!0,et=0)):this.setCurrentRawFrameValue(et),tt&&(this.setCurrentRawFrameValue(et),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(_e,et){this.playCount=0,_e[1]<_e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=_e[0]-_e[1],this.timeCompleted=this.totalFrames,this.firstFrame=_e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-et)):_e[1]>_e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=_e[1]-_e[0],this.timeCompleted=this.totalFrames,this.firstFrame=_e[0],this.setCurrentRawFrameValue(.001+et)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(_e,et){var tt=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<_e?tt=_e:this.currentRawFrame+this.firstFrame>et&&(tt=et-_e)),this.firstFrame=_e,this.totalFrames=et-_e,this.timeCompleted=this.totalFrames,tt!==-1&&this.goToAndStop(tt,!0)},AnimationItem.prototype.playSegments=function(_e,et){if(et&&(this.segments.length=0),_typeof$4(_e[0])==="object"){var tt,rt=_e.length;for(tt=0;tt<rt;tt+=1)this.segments.push(_e[tt])}else this.segments.push(_e);this.segments.length&&et&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(_e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),_e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(_e){return this.segments.length?(this.adjustSegment(this.segments.shift(),_e),!0):!1},AnimationItem.prototype.destroy=function(_e){_e&&this.name!==_e||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(_e){this.currentRawFrame=_e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(_e){this.playSpeed=_e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(_e){this.playDirection=_e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(_e){this.loop=_e},AnimationItem.prototype.setVolume=function(_e,et){et&&this.name!==et||this.audioController.setVolume(_e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(_e){_e&&this.name!==_e||this.audioController.mute()},AnimationItem.prototype.unmute=function(_e){_e&&this.name!==_e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(_e){var et="";if(_e.e)et=_e.p;else if(this.assetsPath){var tt=_e.p;tt.indexOf("images/")!==-1&&(tt=tt.split("/")[1]),et=this.assetsPath+tt}else et=this.path,et+=_e.u?_e.u:"",et+=_e.p;return et},AnimationItem.prototype.getAssetData=function(_e){for(var et=0,tt=this.assets.length;et<tt;){if(_e===this.assets[et].id)return this.assets[et];et+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(_e){return _e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(_e,et,tt){try{var rt=this.renderer.getElementByPath(_e);rt.updateDocumentData(et,tt)}catch{}},AnimationItem.prototype.trigger=function(_e){if(this._cbs&&this._cbs[_e])switch(_e){case"enterFrame":this.triggerEvent(_e,new BMEnterFrameEvent(_e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(_e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(_e,new BMCompleteLoopEvent(_e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(_e,new BMCompleteEvent(_e,this.frameMult));break;case"segmentStart":this.triggerEvent(_e,new BMSegmentStartEvent(_e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(_e,new BMDestroyEvent(_e,this));break;default:this.triggerEvent(_e)}_e==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(_e,this.currentFrame,this.totalFrames,this.frameMult)),_e==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(_e,this.loop,this.playCount,this.frameMult)),_e==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(_e,this.frameMult)),_e==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(_e,this.firstFrame,this.totalFrames)),_e==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(_e,this))},AnimationItem.prototype.triggerRenderFrameError=function(_e){var et=new BMRenderFrameErrorEvent(_e,this.currentFrame);this.triggerEvent("error",et),this.onError&&this.onError.call(this,et)},AnimationItem.prototype.triggerConfigError=function(_e){var et=new BMConfigErrorEvent(_e,this.currentFrame);this.triggerEvent("error",et),this.onError&&this.onError.call(this,et)};var animationManager=function(){var _e={},et=[],tt=0,rt=0,it=0,st=!0,ut=!1;function ht(ar){for(var hr=0,Qt=ar.target;hr<rt;)et[hr].animation===Qt&&(et.splice(hr,1),hr-=1,rt-=1,Qt.isPaused||wt()),hr+=1}function at(ar,hr){if(!ar)return null;for(var Qt=0;Qt<rt;){if(et[Qt].elem===ar&&et[Qt].elem!==null)return et[Qt].animation;Qt+=1}var ir=new AnimationItem;return St(ir,ar),ir.setData(ar,hr),ir}function gt(){var ar,hr=et.length,Qt=[];for(ar=0;ar<hr;ar+=1)Qt.push(et[ar].animation);return Qt}function bt(){it+=1,vr()}function wt(){it-=1}function St(ar,hr){ar.addEventListener("destroy",ht),ar.addEventListener("_active",bt),ar.addEventListener("_idle",wt),et.push({elem:hr,animation:ar}),rt+=1}function kt(ar){var hr=new AnimationItem;return St(hr,null),hr.setParams(ar),hr}function Rt(ar,hr){var Qt;for(Qt=0;Qt<rt;Qt+=1)et[Qt].animation.setSpeed(ar,hr)}function It(ar,hr){var Qt;for(Qt=0;Qt<rt;Qt+=1)et[Qt].animation.setDirection(ar,hr)}function Dt(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.play(ar)}function Mt(ar){var hr=ar-tt,Qt;for(Qt=0;Qt<rt;Qt+=1)et[Qt].animation.advanceTime(hr);tt=ar,it&&!ut?window.requestAnimationFrame(Mt):st=!0}function $t(ar){tt=ar,window.requestAnimationFrame(Mt)}function jt(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.pause(ar)}function Nt(ar,hr,Qt){var ir;for(ir=0;ir<rt;ir+=1)et[ir].animation.goToAndStop(ar,hr,Qt)}function Ut(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.stop(ar)}function Ht(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.togglePause(ar)}function Kt(ar){var hr;for(hr=rt-1;hr>=0;hr-=1)et[hr].animation.destroy(ar)}function tr(ar,hr,Qt){var ir=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),Mr,Cr=ir.length;for(Mr=0;Mr<Cr;Mr+=1)Qt&&ir[Mr].setAttribute("data-bm-type",Qt),at(ir[Mr],ar);if(hr&&Cr===0){Qt||(Qt="svg");var rn=document.getElementsByTagName("body")[0];rn.innerText="";var fn=createTag("div");fn.style.width="100%",fn.style.height="100%",fn.setAttribute("data-bm-type",Qt),rn.appendChild(fn),at(fn,ar)}}function mr(){var ar;for(ar=0;ar<rt;ar+=1)et[ar].animation.resize()}function vr(){!ut&&it&&st&&(window.requestAnimationFrame($t),st=!1)}function wr(){ut=!0}function yr(){ut=!1,vr()}function Or(ar,hr){var Qt;for(Qt=0;Qt<rt;Qt+=1)et[Qt].animation.setVolume(ar,hr)}function Nr(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.mute(ar)}function Lr(ar){var hr;for(hr=0;hr<rt;hr+=1)et[hr].animation.unmute(ar)}return _e.registerAnimation=at,_e.loadAnimation=kt,_e.setSpeed=Rt,_e.setDirection=It,_e.play=Dt,_e.pause=jt,_e.stop=Ut,_e.togglePause=Ht,_e.searchAnimations=tr,_e.resize=mr,_e.goToAndStop=Nt,_e.destroy=Kt,_e.freeze=wr,_e.unfreeze=yr,_e.setVolume=Or,_e.mute=Nr,_e.unmute=Lr,_e.getRegisteredAnimations=gt,_e}(),BezierFactory=function(){var _e={};_e.getBezierEasing=tt;var et={};function tt($t,jt,Nt,Ut,Ht){var Kt=Ht||("bez_"+$t+"_"+jt+"_"+Nt+"_"+Ut).replace(/\./g,"p");if(et[Kt])return et[Kt];var tr=new Mt([$t,jt,Nt,Ut]);return et[Kt]=tr,tr}var rt=4,it=.001,st=1e-7,ut=10,ht=11,at=1/(ht-1),gt=typeof Float32Array=="function";function bt($t,jt){return 1-3*jt+3*$t}function wt($t,jt){return 3*jt-6*$t}function St($t){return 3*$t}function kt($t,jt,Nt){return((bt(jt,Nt)*$t+wt(jt,Nt))*$t+St(jt))*$t}function Rt($t,jt,Nt){return 3*bt(jt,Nt)*$t*$t+2*wt(jt,Nt)*$t+St(jt)}function It($t,jt,Nt,Ut,Ht){var Kt,tr,mr=0;do tr=jt+(Nt-jt)/2,Kt=kt(tr,Ut,Ht)-$t,Kt>0?Nt=tr:jt=tr;while(Math.abs(Kt)>st&&++mr<ut);return tr}function Dt($t,jt,Nt,Ut){for(var Ht=0;Ht<rt;++Ht){var Kt=Rt(jt,Nt,Ut);if(Kt===0)return jt;var tr=kt(jt,Nt,Ut)-$t;jt-=tr/Kt}return jt}function Mt($t){this._p=$t,this._mSampleValues=gt?new Float32Array(ht):new Array(ht),this._precomputed=!1,this.get=this.get.bind(this)}return Mt.prototype={get:function(jt){var Nt=this._p[0],Ut=this._p[1],Ht=this._p[2],Kt=this._p[3];return this._precomputed||this._precompute(),Nt===Ut&&Ht===Kt?jt:jt===0?0:jt===1?1:kt(this._getTForX(jt),Ut,Kt)},_precompute:function(){var jt=this._p[0],Nt=this._p[1],Ut=this._p[2],Ht=this._p[3];this._precomputed=!0,(jt!==Nt||Ut!==Ht)&&this._calcSampleValues()},_calcSampleValues:function(){for(var jt=this._p[0],Nt=this._p[2],Ut=0;Ut<ht;++Ut)this._mSampleValues[Ut]=kt(Ut*at,jt,Nt)},_getTForX:function(jt){for(var Nt=this._p[0],Ut=this._p[2],Ht=this._mSampleValues,Kt=0,tr=1,mr=ht-1;tr!==mr&&Ht[tr]<=jt;++tr)Kt+=at;--tr;var vr=(jt-Ht[tr])/(Ht[tr+1]-Ht[tr]),wr=Kt+vr*at,yr=Rt(wr,Nt,Ut);return yr>=it?Dt(jt,wr,Nt,Ut):yr===0?wr:It(jt,Kt,Kt+at,Nt,Ut)}},_e}(),pooling=function(){function _e(et){return et.concat(createSizedArray(et.length))}return{double:_e}}(),poolFactory=function(){return function(_e,et,tt){var rt=0,it=_e,st=createSizedArray(it),ut={newElement:ht,release:at};function ht(){var gt;return rt?(rt-=1,gt=st[rt]):gt=et(),gt}function at(gt){rt===it&&(st=pooling.double(st),it*=2),tt&&tt(gt),st[rt]=gt,rt+=1}return ut}}(),bezierLengthPool=function(){function _e(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,_e)}(),segmentsLengthPool=function(){function _e(){return{lengths:[],totalLength:0}}function et(tt){var rt,it=tt.lengths.length;for(rt=0;rt<it;rt+=1)bezierLengthPool.release(tt.lengths[rt]);tt.lengths.length=0}return poolFactory(8,_e,et)}();function bezFunction(){var _e=Math;function et(St,kt,Rt,It,Dt,Mt){var $t=St*It+kt*Dt+Rt*Mt-Dt*It-Mt*St-Rt*kt;return $t>-.001&&$t<.001}function tt(St,kt,Rt,It,Dt,Mt,$t,jt,Nt){if(Rt===0&&Mt===0&&Nt===0)return et(St,kt,It,Dt,$t,jt);var Ut=_e.sqrt(_e.pow(It-St,2)+_e.pow(Dt-kt,2)+_e.pow(Mt-Rt,2)),Ht=_e.sqrt(_e.pow($t-St,2)+_e.pow(jt-kt,2)+_e.pow(Nt-Rt,2)),Kt=_e.sqrt(_e.pow($t-It,2)+_e.pow(jt-Dt,2)+_e.pow(Nt-Mt,2)),tr;return Ut>Ht?Ut>Kt?tr=Ut-Ht-Kt:tr=Kt-Ht-Ut:Kt>Ht?tr=Kt-Ht-Ut:tr=Ht-Ut-Kt,tr>-1e-4&&tr<1e-4}var rt=function(){return function(St,kt,Rt,It){var Dt=getDefaultCurveSegments(),Mt,$t,jt,Nt,Ut,Ht=0,Kt,tr=[],mr=[],vr=bezierLengthPool.newElement();for(jt=Rt.length,Mt=0;Mt<Dt;Mt+=1){for(Ut=Mt/(Dt-1),Kt=0,$t=0;$t<jt;$t+=1)Nt=bmPow(1-Ut,3)*St[$t]+3*bmPow(1-Ut,2)*Ut*Rt[$t]+3*(1-Ut)*bmPow(Ut,2)*It[$t]+bmPow(Ut,3)*kt[$t],tr[$t]=Nt,mr[$t]!==null&&(Kt+=bmPow(tr[$t]-mr[$t],2)),mr[$t]=tr[$t];Kt&&(Kt=bmSqrt(Kt),Ht+=Kt),vr.percents[Mt]=Ut,vr.lengths[Mt]=Ht}return vr.addedLength=Ht,vr}}();function it(St){var kt=segmentsLengthPool.newElement(),Rt=St.c,It=St.v,Dt=St.o,Mt=St.i,$t,jt=St._length,Nt=kt.lengths,Ut=0;for($t=0;$t<jt-1;$t+=1)Nt[$t]=rt(It[$t],It[$t+1],Dt[$t],Mt[$t+1]),Ut+=Nt[$t].addedLength;return Rt&&jt&&(Nt[$t]=rt(It[$t],It[0],Dt[$t],Mt[0]),Ut+=Nt[$t].addedLength),kt.totalLength=Ut,kt}function st(St){this.segmentLength=0,this.points=new Array(St)}function ut(St,kt){this.partialLength=St,this.point=kt}var ht=function(){var St={};return function(kt,Rt,It,Dt){var Mt=(kt[0]+"_"+kt[1]+"_"+Rt[0]+"_"+Rt[1]+"_"+It[0]+"_"+It[1]+"_"+Dt[0]+"_"+Dt[1]).replace(/\./g,"p");if(!St[Mt]){var $t=getDefaultCurveSegments(),jt,Nt,Ut,Ht,Kt,tr=0,mr,vr,wr=null;kt.length===2&&(kt[0]!==Rt[0]||kt[1]!==Rt[1])&&et(kt[0],kt[1],Rt[0],Rt[1],kt[0]+It[0],kt[1]+It[1])&&et(kt[0],kt[1],Rt[0],Rt[1],Rt[0]+Dt[0],Rt[1]+Dt[1])&&($t=2);var yr=new st($t);for(Ut=It.length,jt=0;jt<$t;jt+=1){for(vr=createSizedArray(Ut),Kt=jt/($t-1),mr=0,Nt=0;Nt<Ut;Nt+=1)Ht=bmPow(1-Kt,3)*kt[Nt]+3*bmPow(1-Kt,2)*Kt*(kt[Nt]+It[Nt])+3*(1-Kt)*bmPow(Kt,2)*(Rt[Nt]+Dt[Nt])+bmPow(Kt,3)*Rt[Nt],vr[Nt]=Ht,wr!==null&&(mr+=bmPow(vr[Nt]-wr[Nt],2));mr=bmSqrt(mr),tr+=mr,yr.points[jt]=new ut(mr,vr),wr=vr}yr.segmentLength=tr,St[Mt]=yr}return St[Mt]}}();function at(St,kt){var Rt=kt.percents,It=kt.lengths,Dt=Rt.length,Mt=bmFloor((Dt-1)*St),$t=St*kt.addedLength,jt=0;if(Mt===Dt-1||Mt===0||$t===It[Mt])return Rt[Mt];for(var Nt=It[Mt]>$t?-1:1,Ut=!0;Ut;)if(It[Mt]<=$t&&It[Mt+1]>$t?(jt=($t-It[Mt])/(It[Mt+1]-It[Mt]),Ut=!1):Mt+=Nt,Mt<0||Mt>=Dt-1){if(Mt===Dt-1)return Rt[Mt];Ut=!1}return Rt[Mt]+(Rt[Mt+1]-Rt[Mt])*jt}function gt(St,kt,Rt,It,Dt,Mt){var $t=at(Dt,Mt),jt=1-$t,Nt=_e.round((jt*jt*jt*St[0]+($t*jt*jt+jt*$t*jt+jt*jt*$t)*Rt[0]+($t*$t*jt+jt*$t*$t+$t*jt*$t)*It[0]+$t*$t*$t*kt[0])*1e3)/1e3,Ut=_e.round((jt*jt*jt*St[1]+($t*jt*jt+jt*$t*jt+jt*jt*$t)*Rt[1]+($t*$t*jt+jt*$t*$t+$t*jt*$t)*It[1]+$t*$t*$t*kt[1])*1e3)/1e3;return[Nt,Ut]}var bt=createTypedArray("float32",8);function wt(St,kt,Rt,It,Dt,Mt,$t){Dt<0?Dt=0:Dt>1&&(Dt=1);var jt=at(Dt,$t);Mt=Mt>1?1:Mt;var Nt=at(Mt,$t),Ut,Ht=St.length,Kt=1-jt,tr=1-Nt,mr=Kt*Kt*Kt,vr=jt*Kt*Kt*3,wr=jt*jt*Kt*3,yr=jt*jt*jt,Or=Kt*Kt*tr,Nr=jt*Kt*tr+Kt*jt*tr+Kt*Kt*Nt,Lr=jt*jt*tr+Kt*jt*Nt+jt*Kt*Nt,ar=jt*jt*Nt,hr=Kt*tr*tr,Qt=jt*tr*tr+Kt*Nt*tr+Kt*tr*Nt,ir=jt*Nt*tr+Kt*Nt*Nt+jt*tr*Nt,Mr=jt*Nt*Nt,Cr=tr*tr*tr,rn=Nt*tr*tr+tr*Nt*tr+tr*tr*Nt,fn=Nt*Nt*tr+tr*Nt*Nt+Nt*tr*Nt,Dn=Nt*Nt*Nt;for(Ut=0;Ut<Ht;Ut+=1)bt[Ut*4]=_e.round((mr*St[Ut]+vr*Rt[Ut]+wr*It[Ut]+yr*kt[Ut])*1e3)/1e3,bt[Ut*4+1]=_e.round((Or*St[Ut]+Nr*Rt[Ut]+Lr*It[Ut]+ar*kt[Ut])*1e3)/1e3,bt[Ut*4+2]=_e.round((hr*St[Ut]+Qt*Rt[Ut]+ir*It[Ut]+Mr*kt[Ut])*1e3)/1e3,bt[Ut*4+3]=_e.round((Cr*St[Ut]+rn*Rt[Ut]+fn*It[Ut]+Dn*kt[Ut])*1e3)/1e3;return bt}return{getSegmentsLength:it,getNewSegment:wt,getPointInSegment:gt,buildBezierData:ht,pointOnLine2D:et,pointOnLine3D:tt}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(_e,et){var tt=this.offsetTime,rt;this.propType==="multidimensional"&&(rt=createTypedArray("float32",this.pv.length));for(var it=et.lastIndex,st=it,ut=this.keyframes.length-1,ht=!0,at,gt,bt;ht;){if(at=this.keyframes[st],gt=this.keyframes[st+1],st===ut-1&&_e>=gt.t-tt){at.h&&(at=gt),it=0;break}if(gt.t-tt>_e){it=st;break}st<ut-1?st+=1:(it=0,ht=!1)}bt=this.keyframesMetadata[st]||{};var wt,St,kt,Rt,It,Dt,Mt=gt.t-tt,$t=at.t-tt,jt;if(at.to){bt.bezierData||(bt.bezierData=bez.buildBezierData(at.s,gt.s||at.e,at.to,at.ti));var Nt=bt.bezierData;if(_e>=Mt||_e<$t){var Ut=_e>=Mt?Nt.points.length-1:0;for(St=Nt.points[Ut].point.length,wt=0;wt<St;wt+=1)rt[wt]=Nt.points[Ut].point[wt]}else{bt.__fnct?Dt=bt.__fnct:(Dt=BezierFactory.getBezierEasing(at.o.x,at.o.y,at.i.x,at.i.y,at.n).get,bt.__fnct=Dt),kt=Dt((_e-$t)/(Mt-$t));var Ht=Nt.segmentLength*kt,Kt,tr=et.lastFrame<_e&&et._lastKeyframeIndex===st?et._lastAddedLength:0;for(It=et.lastFrame<_e&&et._lastKeyframeIndex===st?et._lastPoint:0,ht=!0,Rt=Nt.points.length;ht;){if(tr+=Nt.points[It].partialLength,Ht===0||kt===0||It===Nt.points.length-1){for(St=Nt.points[It].point.length,wt=0;wt<St;wt+=1)rt[wt]=Nt.points[It].point[wt];break}else if(Ht>=tr&&Ht<tr+Nt.points[It+1].partialLength){for(Kt=(Ht-tr)/Nt.points[It+1].partialLength,St=Nt.points[It].point.length,wt=0;wt<St;wt+=1)rt[wt]=Nt.points[It].point[wt]+(Nt.points[It+1].point[wt]-Nt.points[It].point[wt])*Kt;break}It<Rt-1?It+=1:ht=!1}et._lastPoint=It,et._lastAddedLength=tr-Nt.points[It].partialLength,et._lastKeyframeIndex=st}}else{var mr,vr,wr,yr,Or;if(ut=at.s.length,jt=gt.s||at.e,this.sh&&at.h!==1)if(_e>=Mt)rt[0]=jt[0],rt[1]=jt[1],rt[2]=jt[2];else if(_e<=$t)rt[0]=at.s[0],rt[1]=at.s[1],rt[2]=at.s[2];else{var Nr=createQuaternion(at.s),Lr=createQuaternion(jt),ar=(_e-$t)/(Mt-$t);quaternionToEuler(rt,slerp(Nr,Lr,ar))}else for(st=0;st<ut;st+=1)at.h!==1&&(_e>=Mt?kt=1:_e<$t?kt=0:(at.o.x.constructor===Array?(bt.__fnct||(bt.__fnct=[]),bt.__fnct[st]?Dt=bt.__fnct[st]:(mr=at.o.x[st]===void 0?at.o.x[0]:at.o.x[st],vr=at.o.y[st]===void 0?at.o.y[0]:at.o.y[st],wr=at.i.x[st]===void 0?at.i.x[0]:at.i.x[st],yr=at.i.y[st]===void 0?at.i.y[0]:at.i.y[st],Dt=BezierFactory.getBezierEasing(mr,vr,wr,yr).get,bt.__fnct[st]=Dt)):bt.__fnct?Dt=bt.__fnct:(mr=at.o.x,vr=at.o.y,wr=at.i.x,yr=at.i.y,Dt=BezierFactory.getBezierEasing(mr,vr,wr,yr).get,at.keyframeMetadata=Dt),kt=Dt((_e-$t)/(Mt-$t)))),jt=gt.s||at.e,Or=at.h===1?at.s[st]:at.s[st]+(jt[st]-at.s[st])*kt,this.propType==="multidimensional"?rt[st]=Or:rt=Or}return et.lastIndex=it,rt}function slerp(_e,et,tt){var rt=[],it=_e[0],st=_e[1],ut=_e[2],ht=_e[3],at=et[0],gt=et[1],bt=et[2],wt=et[3],St,kt,Rt,It,Dt;return kt=it*at+st*gt+ut*bt+ht*wt,kt<0&&(kt=-kt,at=-at,gt=-gt,bt=-bt,wt=-wt),1-kt>1e-6?(St=Math.acos(kt),Rt=Math.sin(St),It=Math.sin((1-tt)*St)/Rt,Dt=Math.sin(tt*St)/Rt):(It=1-tt,Dt=tt),rt[0]=It*it+Dt*at,rt[1]=It*st+Dt*gt,rt[2]=It*ut+Dt*bt,rt[3]=It*ht+Dt*wt,rt}function quaternionToEuler(_e,et){var tt=et[0],rt=et[1],it=et[2],st=et[3],ut=Math.atan2(2*rt*st-2*tt*it,1-2*rt*rt-2*it*it),ht=Math.asin(2*tt*rt+2*it*st),at=Math.atan2(2*tt*st-2*rt*it,1-2*tt*tt-2*it*it);_e[0]=ut/degToRads,_e[1]=ht/degToRads,_e[2]=at/degToRads}function createQuaternion(_e){var et=_e[0]*degToRads,tt=_e[1]*degToRads,rt=_e[2]*degToRads,it=Math.cos(et/2),st=Math.cos(tt/2),ut=Math.cos(rt/2),ht=Math.sin(et/2),at=Math.sin(tt/2),gt=Math.sin(rt/2),bt=it*st*ut-ht*at*gt,wt=ht*at*ut+it*st*gt,St=ht*st*ut+it*at*gt,kt=it*at*ut-ht*st*gt;return[wt,St,kt,bt]}function getValueAtCurrentTime(){var _e=this.comp.renderedFrame-this.offsetTime,et=this.keyframes[0].t-this.offsetTime,tt=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(_e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=tt&&_e>=tt||this._caching.lastFrame<et&&_e<et))){this._caching.lastFrame>=_e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var rt=this.interpolateValue(_e,this._caching);this.pv=rt}return this._caching.lastFrame=_e,this.pv}function setVValue(_e){var et;if(this.propType==="unidimensional")et=_e*this.mult,mathAbs(this.v-et)>1e-5&&(this.v=et,this._mdf=!0);else for(var tt=0,rt=this.v.length;tt<rt;)et=_e[tt]*this.mult,mathAbs(this.v[tt]-et)>1e-5&&(this.v[tt]=et,this._mdf=!0),tt+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var _e,et=this.effectsSequence.length,tt=this.kf?this.pv:this.data.k;for(_e=0;_e<et;_e+=1)tt=this.effectsSequence[_e](tt);this.setVValue(tt),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(_e){this.effectsSequence.push(_e),this.container.addDynamicProperty(this)}function ValueProperty(_e,et,tt,rt){this.propType="unidimensional",this.mult=tt||1,this.data=et,this.v=tt?et.k*tt:et.k,this.pv=et.k,this._mdf=!1,this.elem=_e,this.container=rt,this.comp=_e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(_e,et,tt,rt){this.propType="multidimensional",this.mult=tt||1,this.data=et,this._mdf=!1,this.elem=_e,this.container=rt,this.comp=_e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var it,st=et.k.length;for(this.v=createTypedArray("float32",st),this.pv=createTypedArray("float32",st),this.vel=createTypedArray("float32",st),it=0;it<st;it+=1)this.v[it]=et.k[it]*this.mult,this.pv[it]=et.k[it];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(_e,et,tt,rt){this.propType="unidimensional",this.keyframes=et.k,this.keyframesMetadata=[],this.offsetTime=_e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=et,this.mult=tt||1,this.elem=_e,this.container=rt,this.comp=_e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(_e,et,tt,rt){this.propType="multidimensional";var it,st=et.k.length,ut,ht,at,gt;for(it=0;it<st-1;it+=1)et.k[it].to&&et.k[it].s&&et.k[it+1]&&et.k[it+1].s&&(ut=et.k[it].s,ht=et.k[it+1].s,at=et.k[it].to,gt=et.k[it].ti,(ut.length===2&&!(ut[0]===ht[0]&&ut[1]===ht[1])&&bez.pointOnLine2D(ut[0],ut[1],ht[0],ht[1],ut[0]+at[0],ut[1]+at[1])&&bez.pointOnLine2D(ut[0],ut[1],ht[0],ht[1],ht[0]+gt[0],ht[1]+gt[1])||ut.length===3&&!(ut[0]===ht[0]&&ut[1]===ht[1]&&ut[2]===ht[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],ht[0],ht[1],ht[2],ut[0]+at[0],ut[1]+at[1],ut[2]+at[2])&&bez.pointOnLine3D(ut[0],ut[1],ut[2],ht[0],ht[1],ht[2],ht[0]+gt[0],ht[1]+gt[1],ht[2]+gt[2]))&&(et.k[it].to=null,et.k[it].ti=null),ut[0]===ht[0]&&ut[1]===ht[1]&&at[0]===0&&at[1]===0&&gt[0]===0&&gt[1]===0&&(ut.length===2||ut[2]===ht[2]&&at[2]===0&&gt[2]===0)&&(et.k[it].to=null,et.k[it].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=et,this.keyframes=et.k,this.keyframesMetadata=[],this.offsetTime=_e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=tt||1,this.elem=_e,this.container=rt,this.comp=_e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var bt=et.k[0].s.length;for(this.v=createTypedArray("float32",bt),this.pv=createTypedArray("float32",bt),it=0;it<bt;it+=1)this.v[it]=initFrame,this.pv[it]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",bt)},this.addEffect=addEffect}var PropertyFactory=function(){function _e(tt,rt,it,st,ut){rt.sid&&(rt=tt.globalData.slotManager.getProp(rt));var ht;if(!rt.k.length)ht=new ValueProperty(tt,rt,st,ut);else if(typeof rt.k[0]=="number")ht=new MultiDimensionalProperty(tt,rt,st,ut);else switch(it){case 0:ht=new KeyframedValueProperty(tt,rt,st,ut);break;case 1:ht=new KeyframedMultidimensionalProperty(tt,rt,st,ut);break}return ht.effectsSequence.length&&ut.addDynamicProperty(ht),ht}var et={getProp:_e};return et}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(et){this.dynamicProperties.indexOf(et)===-1&&(this.dynamicProperties.push(et),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var et,tt=this.dynamicProperties.length;for(et=0;et<tt;et+=1)this.dynamicProperties[et].getValue(),this.dynamicProperties[et]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(et){this.container=et,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function _e(){return createTypedArray("float32",2)}return poolFactory(8,_e)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(_e,et){this.c=_e,this.setLength(et);for(var tt=0;tt<et;)this.v[tt]=pointPool.newElement(),this.o[tt]=pointPool.newElement(),this.i[tt]=pointPool.newElement(),tt+=1},ShapePath.prototype.setLength=function(_e){for(;this._maxLength<_e;)this.doubleArrayLength();this._length=_e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(_e,et,tt,rt,it){var st;switch(this._length=Math.max(this._length,rt+1),this._length>=this._maxLength&&this.doubleArrayLength(),tt){case"v":st=this.v;break;case"i":st=this.i;break;case"o":st=this.o;break;default:st=[];break}(!st[rt]||st[rt]&&!it)&&(st[rt]=pointPool.newElement()),st[rt][0]=_e,st[rt][1]=et},ShapePath.prototype.setTripleAt=function(_e,et,tt,rt,it,st,ut,ht){this.setXYAt(_e,et,"v",ut,ht),this.setXYAt(tt,rt,"o",ut,ht),this.setXYAt(it,st,"i",ut,ht)},ShapePath.prototype.reverse=function(){var _e=new ShapePath;_e.setPathData(this.c,this._length);var et=this.v,tt=this.o,rt=this.i,it=0;this.c&&(_e.setTripleAt(et[0][0],et[0][1],rt[0][0],rt[0][1],tt[0][0],tt[0][1],0,!1),it=1);var st=this._length-1,ut=this._length,ht;for(ht=it;ht<ut;ht+=1)_e.setTripleAt(et[st][0],et[st][1],rt[st][0],rt[st][1],tt[st][0],tt[st][1],ht,!1),st-=1;return _e},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function _e(){return new ShapePath}function et(it){var st=it._length,ut;for(ut=0;ut<st;ut+=1)pointPool.release(it.v[ut]),pointPool.release(it.i[ut]),pointPool.release(it.o[ut]),it.v[ut]=null,it.i[ut]=null,it.o[ut]=null;it._length=0,it.c=!1}function tt(it){var st=rt.newElement(),ut,ht=it._length===void 0?it.v.length:it._length;for(st.setLength(ht),st.c=it.c,ut=0;ut<ht;ut+=1)st.setTripleAt(it.v[ut][0],it.v[ut][1],it.o[ut][0],it.o[ut][1],it.i[ut][0],it.i[ut][1],ut);return st}var rt=poolFactory(4,_e,et);return rt.clone=tt,rt}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(_e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=_e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var _e;for(_e=0;_e<this._length;_e+=1)shapePool.release(this.shapes[_e]);this._length=0};var shapeCollectionPool=function(){var _e={newShapeCollection:it,release:st},et=0,tt=4,rt=createSizedArray(tt);function it(){var ut;return et?(et-=1,ut=rt[et]):ut=new ShapeCollection,ut}function st(ut){var ht,at=ut._length;for(ht=0;ht<at;ht+=1)shapePool.release(ut.shapes[ht]);ut._length=0,et===tt&&(rt=pooling.double(rt),tt*=2),rt[et]=ut,et+=1}return _e}(),ShapePropertyFactory=function(){var _e=-999999;function et(Mt,$t,jt){var Nt=jt.lastIndex,Ut,Ht,Kt,tr,mr,vr,wr,yr,Or,Nr=this.keyframes;if(Mt<Nr[0].t-this.offsetTime)Ut=Nr[0].s[0],Kt=!0,Nt=0;else if(Mt>=Nr[Nr.length-1].t-this.offsetTime)Ut=Nr[Nr.length-1].s?Nr[Nr.length-1].s[0]:Nr[Nr.length-2].e[0],Kt=!0;else{for(var Lr=Nt,ar=Nr.length-1,hr=!0,Qt,ir,Mr;hr&&(Qt=Nr[Lr],ir=Nr[Lr+1],!(ir.t-this.offsetTime>Mt));)Lr<ar-1?Lr+=1:hr=!1;if(Mr=this.keyframesMetadata[Lr]||{},Kt=Qt.h===1,Nt=Lr,!Kt){if(Mt>=ir.t-this.offsetTime)yr=1;else if(Mt<Qt.t-this.offsetTime)yr=0;else{var Cr;Mr.__fnct?Cr=Mr.__fnct:(Cr=BezierFactory.getBezierEasing(Qt.o.x,Qt.o.y,Qt.i.x,Qt.i.y).get,Mr.__fnct=Cr),yr=Cr((Mt-(Qt.t-this.offsetTime))/(ir.t-this.offsetTime-(Qt.t-this.offsetTime)))}Ht=ir.s?ir.s[0]:Qt.e[0]}Ut=Qt.s[0]}for(vr=$t._length,wr=Ut.i[0].length,jt.lastIndex=Nt,tr=0;tr<vr;tr+=1)for(mr=0;mr<wr;mr+=1)Or=Kt?Ut.i[tr][mr]:Ut.i[tr][mr]+(Ht.i[tr][mr]-Ut.i[tr][mr])*yr,$t.i[tr][mr]=Or,Or=Kt?Ut.o[tr][mr]:Ut.o[tr][mr]+(Ht.o[tr][mr]-Ut.o[tr][mr])*yr,$t.o[tr][mr]=Or,Or=Kt?Ut.v[tr][mr]:Ut.v[tr][mr]+(Ht.v[tr][mr]-Ut.v[tr][mr])*yr,$t.v[tr][mr]=Or}function tt(){var Mt=this.comp.renderedFrame-this.offsetTime,$t=this.keyframes[0].t-this.offsetTime,jt=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Nt=this._caching.lastFrame;return Nt!==_e&&(Nt<$t&&Mt<$t||Nt>jt&&Mt>jt)||(this._caching.lastIndex=Nt<Mt?this._caching.lastIndex:0,this.interpolateShape(Mt,this.pv,this._caching)),this._caching.lastFrame=Mt,this.pv}function rt(){this.paths=this.localShapeCollection}function it(Mt,$t){if(Mt._length!==$t._length||Mt.c!==$t.c)return!1;var jt,Nt=Mt._length;for(jt=0;jt<Nt;jt+=1)if(Mt.v[jt][0]!==$t.v[jt][0]||Mt.v[jt][1]!==$t.v[jt][1]||Mt.o[jt][0]!==$t.o[jt][0]||Mt.o[jt][1]!==$t.o[jt][1]||Mt.i[jt][0]!==$t.i[jt][0]||Mt.i[jt][1]!==$t.i[jt][1])return!1;return!0}function st(Mt){it(this.v,Mt)||(this.v=shapePool.clone(Mt),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function ut(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var Mt;this.kf?Mt=this.pv:this.data.ks?Mt=this.data.ks.k:Mt=this.data.pt.k;var $t,jt=this.effectsSequence.length;for($t=0;$t<jt;$t+=1)Mt=this.effectsSequence[$t](Mt);this.setVValue(Mt),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function ht(Mt,$t,jt){this.propType="shape",this.comp=Mt.comp,this.container=Mt,this.elem=Mt,this.data=$t,this.k=!1,this.kf=!1,this._mdf=!1;var Nt=jt===3?$t.pt.k:$t.ks.k;this.v=shapePool.clone(Nt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=rt,this.effectsSequence=[]}function at(Mt){this.effectsSequence.push(Mt),this.container.addDynamicProperty(this)}ht.prototype.interpolateShape=et,ht.prototype.getValue=ut,ht.prototype.setVValue=st,ht.prototype.addEffect=at;function gt(Mt,$t,jt){this.propType="shape",this.comp=Mt.comp,this.elem=Mt,this.container=Mt,this.offsetTime=Mt.data.st,this.keyframes=jt===3?$t.pt.k:$t.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Nt=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Nt),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=_e,this.reset=rt,this._caching={lastFrame:_e,lastIndex:0},this.effectsSequence=[tt.bind(this)]}gt.prototype.getValue=ut,gt.prototype.interpolateShape=et,gt.prototype.setVValue=st,gt.prototype.addEffect=at;var bt=function(){var Mt=roundCorner;function $t(jt,Nt){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Nt.d,this.elem=jt,this.comp=jt.comp,this.frameId=-1,this.initDynamicPropertyContainer(jt),this.p=PropertyFactory.getProp(jt,Nt.p,1,0,this),this.s=PropertyFactory.getProp(jt,Nt.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return $t.prototype={reset:rt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Nt=this.p.v[0],Ut=this.p.v[1],Ht=this.s.v[0]/2,Kt=this.s.v[1]/2,tr=this.d!==3,mr=this.v;mr.v[0][0]=Nt,mr.v[0][1]=Ut-Kt,mr.v[1][0]=tr?Nt+Ht:Nt-Ht,mr.v[1][1]=Ut,mr.v[2][0]=Nt,mr.v[2][1]=Ut+Kt,mr.v[3][0]=tr?Nt-Ht:Nt+Ht,mr.v[3][1]=Ut,mr.i[0][0]=tr?Nt-Ht*Mt:Nt+Ht*Mt,mr.i[0][1]=Ut-Kt,mr.i[1][0]=tr?Nt+Ht:Nt-Ht,mr.i[1][1]=Ut-Kt*Mt,mr.i[2][0]=tr?Nt+Ht*Mt:Nt-Ht*Mt,mr.i[2][1]=Ut+Kt,mr.i[3][0]=tr?Nt-Ht:Nt+Ht,mr.i[3][1]=Ut+Kt*Mt,mr.o[0][0]=tr?Nt+Ht*Mt:Nt-Ht*Mt,mr.o[0][1]=Ut-Kt,mr.o[1][0]=tr?Nt+Ht:Nt-Ht,mr.o[1][1]=Ut+Kt*Mt,mr.o[2][0]=tr?Nt-Ht*Mt:Nt+Ht*Mt,mr.o[2][1]=Ut+Kt,mr.o[3][0]=tr?Nt-Ht:Nt+Ht,mr.o[3][1]=Ut-Kt*Mt}},extendPrototype([DynamicPropertyContainer],$t),$t}(),wt=function(){function Mt($t,jt){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=$t,this.comp=$t.comp,this.data=jt,this.frameId=-1,this.d=jt.d,this.initDynamicPropertyContainer($t),jt.sy===1?(this.ir=PropertyFactory.getProp($t,jt.ir,0,0,this),this.is=PropertyFactory.getProp($t,jt.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp($t,jt.pt,0,0,this),this.p=PropertyFactory.getProp($t,jt.p,1,0,this),this.r=PropertyFactory.getProp($t,jt.r,0,degToRads,this),this.or=PropertyFactory.getProp($t,jt.or,0,0,this),this.os=PropertyFactory.getProp($t,jt.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return Mt.prototype={reset:rt,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var jt=Math.floor(this.pt.v)*2,Nt=Math.PI*2/jt,Ut=!0,Ht=this.or.v,Kt=this.ir.v,tr=this.os.v,mr=this.is.v,vr=2*Math.PI*Ht/(jt*2),wr=2*Math.PI*Kt/(jt*2),yr,Or,Nr,Lr,ar=-Math.PI/2;ar+=this.r.v;var hr=this.data.d===3?-1:1;for(this.v._length=0,yr=0;yr<jt;yr+=1){Or=Ut?Ht:Kt,Nr=Ut?tr:mr,Lr=Ut?vr:wr;var Qt=Or*Math.cos(ar),ir=Or*Math.sin(ar),Mr=Qt===0&&ir===0?0:ir/Math.sqrt(Qt*Qt+ir*ir),Cr=Qt===0&&ir===0?0:-Qt/Math.sqrt(Qt*Qt+ir*ir);Qt+=+this.p.v[0],ir+=+this.p.v[1],this.v.setTripleAt(Qt,ir,Qt-Mr*Lr*Nr*hr,ir-Cr*Lr*Nr*hr,Qt+Mr*Lr*Nr*hr,ir+Cr*Lr*Nr*hr,yr,!0),Ut=!Ut,ar+=Nt*hr}},convertPolygonToPath:function(){var jt=Math.floor(this.pt.v),Nt=Math.PI*2/jt,Ut=this.or.v,Ht=this.os.v,Kt=2*Math.PI*Ut/(jt*4),tr,mr=-Math.PI*.5,vr=this.data.d===3?-1:1;for(mr+=this.r.v,this.v._length=0,tr=0;tr<jt;tr+=1){var wr=Ut*Math.cos(mr),yr=Ut*Math.sin(mr),Or=wr===0&&yr===0?0:yr/Math.sqrt(wr*wr+yr*yr),Nr=wr===0&&yr===0?0:-wr/Math.sqrt(wr*wr+yr*yr);wr+=+this.p.v[0],yr+=+this.p.v[1],this.v.setTripleAt(wr,yr,wr-Or*Kt*Ht*vr,yr-Nr*Kt*Ht*vr,wr+Or*Kt*Ht*vr,yr+Nr*Kt*Ht*vr,tr,!0),mr+=Nt*vr}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],Mt),Mt}(),St=function(){function Mt($t,jt){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=$t,this.comp=$t.comp,this.frameId=-1,this.d=jt.d,this.initDynamicPropertyContainer($t),this.p=PropertyFactory.getProp($t,jt.p,1,0,this),this.s=PropertyFactory.getProp($t,jt.s,1,0,this),this.r=PropertyFactory.getProp($t,jt.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return Mt.prototype={convertRectToPath:function(){var jt=this.p.v[0],Nt=this.p.v[1],Ut=this.s.v[0]/2,Ht=this.s.v[1]/2,Kt=bmMin(Ut,Ht,this.r.v),tr=Kt*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(jt+Ut,Nt-Ht+Kt,jt+Ut,Nt-Ht+Kt,jt+Ut,Nt-Ht+tr,0,!0),this.v.setTripleAt(jt+Ut,Nt+Ht-Kt,jt+Ut,Nt+Ht-tr,jt+Ut,Nt+Ht-Kt,1,!0),Kt!==0?(this.v.setTripleAt(jt+Ut-Kt,Nt+Ht,jt+Ut-Kt,Nt+Ht,jt+Ut-tr,Nt+Ht,2,!0),this.v.setTripleAt(jt-Ut+Kt,Nt+Ht,jt-Ut+tr,Nt+Ht,jt-Ut+Kt,Nt+Ht,3,!0),this.v.setTripleAt(jt-Ut,Nt+Ht-Kt,jt-Ut,Nt+Ht-Kt,jt-Ut,Nt+Ht-tr,4,!0),this.v.setTripleAt(jt-Ut,Nt-Ht+Kt,jt-Ut,Nt-Ht+tr,jt-Ut,Nt-Ht+Kt,5,!0),this.v.setTripleAt(jt-Ut+Kt,Nt-Ht,jt-Ut+Kt,Nt-Ht,jt-Ut+tr,Nt-Ht,6,!0),this.v.setTripleAt(jt+Ut-Kt,Nt-Ht,jt+Ut-tr,Nt-Ht,jt+Ut-Kt,Nt-Ht,7,!0)):(this.v.setTripleAt(jt-Ut,Nt+Ht,jt-Ut+tr,Nt+Ht,jt-Ut,Nt+Ht,2),this.v.setTripleAt(jt-Ut,Nt-Ht,jt-Ut,Nt-Ht+tr,jt-Ut,Nt-Ht,3))):(this.v.setTripleAt(jt+Ut,Nt-Ht+Kt,jt+Ut,Nt-Ht+tr,jt+Ut,Nt-Ht+Kt,0,!0),Kt!==0?(this.v.setTripleAt(jt+Ut-Kt,Nt-Ht,jt+Ut-Kt,Nt-Ht,jt+Ut-tr,Nt-Ht,1,!0),this.v.setTripleAt(jt-Ut+Kt,Nt-Ht,jt-Ut+tr,Nt-Ht,jt-Ut+Kt,Nt-Ht,2,!0),this.v.setTripleAt(jt-Ut,Nt-Ht+Kt,jt-Ut,Nt-Ht+Kt,jt-Ut,Nt-Ht+tr,3,!0),this.v.setTripleAt(jt-Ut,Nt+Ht-Kt,jt-Ut,Nt+Ht-tr,jt-Ut,Nt+Ht-Kt,4,!0),this.v.setTripleAt(jt-Ut+Kt,Nt+Ht,jt-Ut+Kt,Nt+Ht,jt-Ut+tr,Nt+Ht,5,!0),this.v.setTripleAt(jt+Ut-Kt,Nt+Ht,jt+Ut-tr,Nt+Ht,jt+Ut-Kt,Nt+Ht,6,!0),this.v.setTripleAt(jt+Ut,Nt+Ht-Kt,jt+Ut,Nt+Ht-Kt,jt+Ut,Nt+Ht-tr,7,!0)):(this.v.setTripleAt(jt-Ut,Nt-Ht,jt-Ut+tr,Nt-Ht,jt-Ut,Nt-Ht,1,!0),this.v.setTripleAt(jt-Ut,Nt+Ht,jt-Ut,Nt+Ht-tr,jt-Ut,Nt+Ht,2,!0),this.v.setTripleAt(jt+Ut,Nt+Ht,jt+Ut-tr,Nt+Ht,jt+Ut,Nt+Ht,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:rt},extendPrototype([DynamicPropertyContainer],Mt),Mt}();function kt(Mt,$t,jt){var Nt;if(jt===3||jt===4){var Ut=jt===3?$t.pt:$t.ks,Ht=Ut.k;Ht.length?Nt=new gt(Mt,$t,jt):Nt=new ht(Mt,$t,jt)}else jt===5?Nt=new St(Mt,$t):jt===6?Nt=new bt(Mt,$t):jt===7&&(Nt=new wt(Mt,$t));return Nt.k&&Mt.addDynamicProperty(Nt),Nt}function Rt(){return ht}function It(){return gt}var Dt={};return Dt.getShapeProp=kt,Dt.getConstructorFunction=Rt,Dt.getKeyframedConstructorFunction=It,Dt}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var _e=Math.cos,et=Math.sin,tt=Math.tan,rt=Math.round;function it(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function st(Qt){if(Qt===0)return this;var ir=_e(Qt),Mr=et(Qt);return this._t(ir,-Mr,0,0,Mr,ir,0,0,0,0,1,0,0,0,0,1)}function ut(Qt){if(Qt===0)return this;var ir=_e(Qt),Mr=et(Qt);return this._t(1,0,0,0,0,ir,-Mr,0,0,Mr,ir,0,0,0,0,1)}function ht(Qt){if(Qt===0)return this;var ir=_e(Qt),Mr=et(Qt);return this._t(ir,0,Mr,0,0,1,0,0,-Mr,0,ir,0,0,0,0,1)}function at(Qt){if(Qt===0)return this;var ir=_e(Qt),Mr=et(Qt);return this._t(ir,-Mr,0,0,Mr,ir,0,0,0,0,1,0,0,0,0,1)}function gt(Qt,ir){return this._t(1,ir,Qt,1,0,0)}function bt(Qt,ir){return this.shear(tt(Qt),tt(ir))}function wt(Qt,ir){var Mr=_e(ir),Cr=et(ir);return this._t(Mr,Cr,0,0,-Cr,Mr,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,tt(Qt),1,0,0,0,0,1,0,0,0,0,1)._t(Mr,-Cr,0,0,Cr,Mr,0,0,0,0,1,0,0,0,0,1)}function St(Qt,ir,Mr){return!Mr&&Mr!==0&&(Mr=1),Qt===1&&ir===1&&Mr===1?this:this._t(Qt,0,0,0,0,ir,0,0,0,0,Mr,0,0,0,0,1)}function kt(Qt,ir,Mr,Cr,rn,fn,Dn,Yn,eo,Gn,lo,mn,Hn,Rn,dn,qn){return this.props[0]=Qt,this.props[1]=ir,this.props[2]=Mr,this.props[3]=Cr,this.props[4]=rn,this.props[5]=fn,this.props[6]=Dn,this.props[7]=Yn,this.props[8]=eo,this.props[9]=Gn,this.props[10]=lo,this.props[11]=mn,this.props[12]=Hn,this.props[13]=Rn,this.props[14]=dn,this.props[15]=qn,this}function Rt(Qt,ir,Mr){return Mr=Mr||0,Qt!==0||ir!==0||Mr!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,Qt,ir,Mr,1):this}function It(Qt,ir,Mr,Cr,rn,fn,Dn,Yn,eo,Gn,lo,mn,Hn,Rn,dn,qn){var On=this.props;if(Qt===1&&ir===0&&Mr===0&&Cr===0&&rn===0&&fn===1&&Dn===0&&Yn===0&&eo===0&&Gn===0&&lo===1&&mn===0)return On[12]=On[12]*Qt+On[15]*Hn,On[13]=On[13]*fn+On[15]*Rn,On[14]=On[14]*lo+On[15]*dn,On[15]*=qn,this._identityCalculated=!1,this;var xo=On[0],Io=On[1],$o=On[2],Zr=On[3],pn=On[4],sn=On[5],wn=On[6],Xn=On[7],Fn=On[8],ro=On[9],No=On[10],co=On[11],Ao=On[12],vo=On[13],Fo=On[14],ds=On[15];return On[0]=xo*Qt+Io*rn+$o*eo+Zr*Hn,On[1]=xo*ir+Io*fn+$o*Gn+Zr*Rn,On[2]=xo*Mr+Io*Dn+$o*lo+Zr*dn,On[3]=xo*Cr+Io*Yn+$o*mn+Zr*qn,On[4]=pn*Qt+sn*rn+wn*eo+Xn*Hn,On[5]=pn*ir+sn*fn+wn*Gn+Xn*Rn,On[6]=pn*Mr+sn*Dn+wn*lo+Xn*dn,On[7]=pn*Cr+sn*Yn+wn*mn+Xn*qn,On[8]=Fn*Qt+ro*rn+No*eo+co*Hn,On[9]=Fn*ir+ro*fn+No*Gn+co*Rn,On[10]=Fn*Mr+ro*Dn+No*lo+co*dn,On[11]=Fn*Cr+ro*Yn+No*mn+co*qn,On[12]=Ao*Qt+vo*rn+Fo*eo+ds*Hn,On[13]=Ao*ir+vo*fn+Fo*Gn+ds*Rn,On[14]=Ao*Mr+vo*Dn+Fo*lo+ds*dn,On[15]=Ao*Cr+vo*Yn+Fo*mn+ds*qn,this._identityCalculated=!1,this}function Dt(Qt){var ir=Qt.props;return this.transform(ir[0],ir[1],ir[2],ir[3],ir[4],ir[5],ir[6],ir[7],ir[8],ir[9],ir[10],ir[11],ir[12],ir[13],ir[14],ir[15])}function Mt(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function $t(Qt){for(var ir=0;ir<16;){if(Qt.props[ir]!==this.props[ir])return!1;ir+=1}return!0}function jt(Qt){var ir;for(ir=0;ir<16;ir+=1)Qt.props[ir]=this.props[ir];return Qt}function Nt(Qt){var ir;for(ir=0;ir<16;ir+=1)this.props[ir]=Qt[ir]}function Ut(Qt,ir,Mr){return{x:Qt*this.props[0]+ir*this.props[4]+Mr*this.props[8]+this.props[12],y:Qt*this.props[1]+ir*this.props[5]+Mr*this.props[9]+this.props[13],z:Qt*this.props[2]+ir*this.props[6]+Mr*this.props[10]+this.props[14]}}function Ht(Qt,ir,Mr){return Qt*this.props[0]+ir*this.props[4]+Mr*this.props[8]+this.props[12]}function Kt(Qt,ir,Mr){return Qt*this.props[1]+ir*this.props[5]+Mr*this.props[9]+this.props[13]}function tr(Qt,ir,Mr){return Qt*this.props[2]+ir*this.props[6]+Mr*this.props[10]+this.props[14]}function mr(){var Qt=this.props[0]*this.props[5]-this.props[1]*this.props[4],ir=this.props[5]/Qt,Mr=-this.props[1]/Qt,Cr=-this.props[4]/Qt,rn=this.props[0]/Qt,fn=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/Qt,Dn=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/Qt,Yn=new Matrix;return Yn.props[0]=ir,Yn.props[1]=Mr,Yn.props[4]=Cr,Yn.props[5]=rn,Yn.props[12]=fn,Yn.props[13]=Dn,Yn}function vr(Qt){var ir=this.getInverseMatrix();return ir.applyToPointArray(Qt[0],Qt[1],Qt[2]||0)}function wr(Qt){var ir,Mr=Qt.length,Cr=[];for(ir=0;ir<Mr;ir+=1)Cr[ir]=vr(Qt[ir]);return Cr}function yr(Qt,ir,Mr){var Cr=createTypedArray("float32",6);if(this.isIdentity())Cr[0]=Qt[0],Cr[1]=Qt[1],Cr[2]=ir[0],Cr[3]=ir[1],Cr[4]=Mr[0],Cr[5]=Mr[1];else{var rn=this.props[0],fn=this.props[1],Dn=this.props[4],Yn=this.props[5],eo=this.props[12],Gn=this.props[13];Cr[0]=Qt[0]*rn+Qt[1]*Dn+eo,Cr[1]=Qt[0]*fn+Qt[1]*Yn+Gn,Cr[2]=ir[0]*rn+ir[1]*Dn+eo,Cr[3]=ir[0]*fn+ir[1]*Yn+Gn,Cr[4]=Mr[0]*rn+Mr[1]*Dn+eo,Cr[5]=Mr[0]*fn+Mr[1]*Yn+Gn}return Cr}function Or(Qt,ir,Mr){var Cr;return this.isIdentity()?Cr=[Qt,ir,Mr]:Cr=[Qt*this.props[0]+ir*this.props[4]+Mr*this.props[8]+this.props[12],Qt*this.props[1]+ir*this.props[5]+Mr*this.props[9]+this.props[13],Qt*this.props[2]+ir*this.props[6]+Mr*this.props[10]+this.props[14]],Cr}function Nr(Qt,ir){if(this.isIdentity())return Qt+","+ir;var Mr=this.props;return Math.round((Qt*Mr[0]+ir*Mr[4]+Mr[12])*100)/100+","+Math.round((Qt*Mr[1]+ir*Mr[5]+Mr[13])*100)/100}function Lr(){for(var Qt=0,ir=this.props,Mr="matrix3d(",Cr=1e4;Qt<16;)Mr+=rt(ir[Qt]*Cr)/Cr,Mr+=Qt===15?")":",",Qt+=1;return Mr}function ar(Qt){var ir=1e4;return Qt<1e-6&&Qt>0||Qt>-1e-6&&Qt<0?rt(Qt*ir)/ir:Qt}function hr(){var Qt=this.props,ir=ar(Qt[0]),Mr=ar(Qt[1]),Cr=ar(Qt[4]),rn=ar(Qt[5]),fn=ar(Qt[12]),Dn=ar(Qt[13]);return"matrix("+ir+","+Mr+","+Cr+","+rn+","+fn+","+Dn+")"}return function(){this.reset=it,this.rotate=st,this.rotateX=ut,this.rotateY=ht,this.rotateZ=at,this.skew=bt,this.skewFromAxis=wt,this.shear=gt,this.scale=St,this.setTransform=kt,this.translate=Rt,this.transform=It,this.multiply=Dt,this.applyToPoint=Ut,this.applyToX=Ht,this.applyToY=Kt,this.applyToZ=tr,this.applyToPointArray=Or,this.applyToTriplePoints=yr,this.applyToPointStringified=Nr,this.toCSS=Lr,this.to2dCSS=hr,this.clone=jt,this.cloneFromProps=Nt,this.equals=$t,this.inversePoints=wr,this.inversePoint=vr,this.getInverseMatrix=mr,this._t=this.transform,this.isIdentity=Mt,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(tt){return typeof tt}:_typeof$3=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$3(_e)}var lottie={};function setLocation(_e){setLocationHref(_e)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(_e){setSubframeEnabled(_e)}function setPrefix(_e){setIdPrefix(_e)}function loadAnimation(_e){return animationManager.loadAnimation(_e)}function setQuality(_e){if(typeof _e=="string")switch(_e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(_e)&&_e>1&&setDefaultCurveSegments(_e)}function inBrowser(){return typeof navigator<"u"}function installPlugin(_e,et){_e==="expressions"&&setExpressionsPlugin(et)}function getFactory(_e){switch(_e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(_e){for(var et=queryString.split("&"),tt=0;tt<et.length;tt+=1){var rt=et[tt].split("=");if(decodeURIComponent(rt[0])==_e)return decodeURIComponent(rt[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(_e){}var ShapeModifiers=function(){var _e={},et={};_e.registerModifier=tt,_e.getModifier=rt;function tt(it,st){et[it]||(et[it]=st)}function rt(it,st,ut){return new et[it](st,ut)}return _e}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(_e){if(!this.closed){_e.sh.container.addDynamicProperty(_e.sh);var et={shape:_e.sh,data:_e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(et),this.addShapeToModifier(et),this._isAnimated&&_e.setAsAnimated()}},ShapeModifier.prototype.init=function(_e,et){this.shapes=[],this.elem=_e,this.initDynamicPropertyContainer(_e),this.initModifierProperties(_e,et),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(_e,et){this.s=PropertyFactory.getProp(_e,et.s,0,.01,this),this.e=PropertyFactory.getProp(_e,et.e,0,.01,this),this.o=PropertyFactory.getProp(_e,et.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=et.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(_e){_e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(_e,et,tt,rt,it){var st=[];et<=1?st.push({s:_e,e:et}):_e>=1?st.push({s:_e-1,e:et-1}):(st.push({s:_e,e:1}),st.push({s:0,e:et-1}));var ut=[],ht,at=st.length,gt;for(ht=0;ht<at;ht+=1)if(gt=st[ht],!(gt.e*it<rt||gt.s*it>rt+tt)){var bt,wt;gt.s*it<=rt?bt=0:bt=(gt.s*it-rt)/tt,gt.e*it>=rt+tt?wt=1:wt=(gt.e*it-rt)/tt,ut.push([bt,wt])}return ut.length||ut.push([0,0]),ut},TrimModifier.prototype.releasePathsData=function(_e){var et,tt=_e.length;for(et=0;et<tt;et+=1)segmentsLengthPool.release(_e[et]);return _e.length=0,_e},TrimModifier.prototype.processShapes=function(_e){var et,tt;if(this._mdf||_e){var rt=this.o.v%360/360;if(rt<0&&(rt+=1),this.s.v>1?et=1+rt:this.s.v<0?et=0+rt:et=this.s.v+rt,this.e.v>1?tt=1+rt:this.e.v<0?tt=0+rt:tt=this.e.v+rt,et>tt){var it=et;et=tt,tt=it}et=Math.round(et*1e4)*1e-4,tt=Math.round(tt*1e4)*1e-4,this.sValue=et,this.eValue=tt}else et=this.sValue,tt=this.eValue;var st,ut,ht=this.shapes.length,at,gt,bt,wt,St,kt=0;if(tt===et)for(ut=0;ut<ht;ut+=1)this.shapes[ut].localShapeCollection.releaseShapes(),this.shapes[ut].shape._mdf=!0,this.shapes[ut].shape.paths=this.shapes[ut].localShapeCollection,this._mdf&&(this.shapes[ut].pathsData.length=0);else if(tt===1&&et===0||tt===0&&et===1){if(this._mdf)for(ut=0;ut<ht;ut+=1)this.shapes[ut].pathsData.length=0,this.shapes[ut].shape._mdf=!0}else{var Rt=[],It,Dt;for(ut=0;ut<ht;ut+=1)if(It=this.shapes[ut],!It.shape._mdf&&!this._mdf&&!_e&&this.m!==2)It.shape.paths=It.localShapeCollection;else{if(st=It.shape.paths,gt=st._length,St=0,!It.shape._mdf&&It.pathsData.length)St=It.totalShapeLength;else{for(bt=this.releasePathsData(It.pathsData),at=0;at<gt;at+=1)wt=bez.getSegmentsLength(st.shapes[at]),bt.push(wt),St+=wt.totalLength;It.totalShapeLength=St,It.pathsData=bt}kt+=St,It.shape._mdf=!0}var Mt=et,$t=tt,jt=0,Nt;for(ut=ht-1;ut>=0;ut-=1)if(It=this.shapes[ut],It.shape._mdf){for(Dt=It.localShapeCollection,Dt.releaseShapes(),this.m===2&&ht>1?(Nt=this.calculateShapeEdges(et,tt,It.totalShapeLength,jt,kt),jt+=It.totalShapeLength):Nt=[[Mt,$t]],gt=Nt.length,at=0;at<gt;at+=1){Mt=Nt[at][0],$t=Nt[at][1],Rt.length=0,$t<=1?Rt.push({s:It.totalShapeLength*Mt,e:It.totalShapeLength*$t}):Mt>=1?Rt.push({s:It.totalShapeLength*(Mt-1),e:It.totalShapeLength*($t-1)}):(Rt.push({s:It.totalShapeLength*Mt,e:It.totalShapeLength}),Rt.push({s:0,e:It.totalShapeLength*($t-1)}));var Ut=this.addShapes(It,Rt[0]);if(Rt[0].s!==Rt[0].e){if(Rt.length>1){var Ht=It.shape.paths.shapes[It.shape.paths._length-1];if(Ht.c){var Kt=Ut.pop();this.addPaths(Ut,Dt),Ut=this.addShapes(It,Rt[1],Kt)}else this.addPaths(Ut,Dt),Ut=this.addShapes(It,Rt[1])}this.addPaths(Ut,Dt)}}It.shape.paths=Dt}}},TrimModifier.prototype.addPaths=function(_e,et){var tt,rt=_e.length;for(tt=0;tt<rt;tt+=1)et.addShape(_e[tt])},TrimModifier.prototype.addSegment=function(_e,et,tt,rt,it,st,ut){it.setXYAt(et[0],et[1],"o",st),it.setXYAt(tt[0],tt[1],"i",st+1),ut&&it.setXYAt(_e[0],_e[1],"v",st),it.setXYAt(rt[0],rt[1],"v",st+1)},TrimModifier.prototype.addSegmentFromArray=function(_e,et,tt,rt){et.setXYAt(_e[1],_e[5],"o",tt),et.setXYAt(_e[2],_e[6],"i",tt+1),rt&&et.setXYAt(_e[0],_e[4],"v",tt),et.setXYAt(_e[3],_e[7],"v",tt+1)},TrimModifier.prototype.addShapes=function(_e,et,tt){var rt=_e.pathsData,it=_e.shape.paths.shapes,st,ut=_e.shape.paths._length,ht,at,gt=0,bt,wt,St,kt,Rt=[],It,Dt=!0;for(tt?(wt=tt._length,It=tt._length):(tt=shapePool.newElement(),wt=0,It=0),Rt.push(tt),st=0;st<ut;st+=1){for(St=rt[st].lengths,tt.c=it[st].c,at=it[st].c?St.length:St.length+1,ht=1;ht<at;ht+=1)if(bt=St[ht-1],gt+bt.addedLength<et.s)gt+=bt.addedLength,tt.c=!1;else if(gt>et.e){tt.c=!1;break}else et.s<=gt&&et.e>=gt+bt.addedLength?(this.addSegment(it[st].v[ht-1],it[st].o[ht-1],it[st].i[ht],it[st].v[ht],tt,wt,Dt),Dt=!1):(kt=bez.getNewSegment(it[st].v[ht-1],it[st].v[ht],it[st].o[ht-1],it[st].i[ht],(et.s-gt)/bt.addedLength,(et.e-gt)/bt.addedLength,St[ht-1]),this.addSegmentFromArray(kt,tt,wt,Dt),Dt=!1,tt.c=!1),gt+=bt.addedLength,wt+=1;if(it[st].c&&St.length){if(bt=St[ht-1],gt<=et.e){var Mt=St[ht-1].addedLength;et.s<=gt&&et.e>=gt+Mt?(this.addSegment(it[st].v[ht-1],it[st].o[ht-1],it[st].i[0],it[st].v[0],tt,wt,Dt),Dt=!1):(kt=bez.getNewSegment(it[st].v[ht-1],it[st].v[0],it[st].o[ht-1],it[st].i[0],(et.s-gt)/Mt,(et.e-gt)/Mt,St[ht-1]),this.addSegmentFromArray(kt,tt,wt,Dt),Dt=!1,tt.c=!1)}else tt.c=!1;gt+=bt.addedLength,wt+=1}if(tt._length&&(tt.setXYAt(tt.v[It][0],tt.v[It][1],"i",It),tt.setXYAt(tt.v[tt._length-1][0],tt.v[tt._length-1][1],"o",tt._length-1)),gt>et.e)break;st<ut-1&&(tt=shapePool.newElement(),Dt=!0,Rt.push(tt),wt=0)}return Rt};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(_e,et){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_e,et.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(_e,et){var tt=et/100,rt=[0,0],it=_e._length,st=0;for(st=0;st<it;st+=1)rt[0]+=_e.v[st][0],rt[1]+=_e.v[st][1];rt[0]/=it,rt[1]/=it;var ut=shapePool.newElement();ut.c=_e.c;var ht,at,gt,bt,wt,St;for(st=0;st<it;st+=1)ht=_e.v[st][0]+(rt[0]-_e.v[st][0])*tt,at=_e.v[st][1]+(rt[1]-_e.v[st][1])*tt,gt=_e.o[st][0]+(rt[0]-_e.o[st][0])*-tt,bt=_e.o[st][1]+(rt[1]-_e.o[st][1])*-tt,wt=_e.i[st][0]+(rt[0]-_e.i[st][0])*-tt,St=_e.i[st][1]+(rt[1]-_e.i[st][1])*-tt,ut.setTripleAt(ht,at,gt,bt,wt,St,st);return ut},PuckerAndBloatModifier.prototype.processShapes=function(_e){var et,tt,rt=this.shapes.length,it,st,ut=this.amount.v;if(ut!==0){var ht,at;for(tt=0;tt<rt;tt+=1){if(ht=this.shapes[tt],at=ht.localShapeCollection,!(!ht.shape._mdf&&!this._mdf&&!_e))for(at.releaseShapes(),ht.shape._mdf=!0,et=ht.shape.paths.shapes,st=ht.shape.paths._length,it=0;it<st;it+=1)at.addShape(this.processPath(et[it],ut));ht.shape.paths=ht.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var _e=[0,0];function et(at){var gt=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||gt,this.a&&at.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&at.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&at.skewFromAxis(-this.sk.v,this.sa.v),this.r?at.rotate(-this.r.v):at.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?at.translate(this.px.v,this.py.v,-this.pz.v):at.translate(this.px.v,this.py.v,0):at.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function tt(at){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||at){var gt;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var bt,wt;if(gt=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(bt=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/gt,0),wt=this.p.getValueAtTime(this.p.keyframes[0].t/gt,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(bt=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/gt,0),wt=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/gt,0)):(bt=this.p.pv,wt=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/gt,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){bt=[],wt=[];var St=this.px,kt=this.py;St._caching.lastFrame+St.offsetTime<=St.keyframes[0].t?(bt[0]=St.getValueAtTime((St.keyframes[0].t+.01)/gt,0),bt[1]=kt.getValueAtTime((kt.keyframes[0].t+.01)/gt,0),wt[0]=St.getValueAtTime(St.keyframes[0].t/gt,0),wt[1]=kt.getValueAtTime(kt.keyframes[0].t/gt,0)):St._caching.lastFrame+St.offsetTime>=St.keyframes[St.keyframes.length-1].t?(bt[0]=St.getValueAtTime(St.keyframes[St.keyframes.length-1].t/gt,0),bt[1]=kt.getValueAtTime(kt.keyframes[kt.keyframes.length-1].t/gt,0),wt[0]=St.getValueAtTime((St.keyframes[St.keyframes.length-1].t-.01)/gt,0),wt[1]=kt.getValueAtTime((kt.keyframes[kt.keyframes.length-1].t-.01)/gt,0)):(bt=[St.pv,kt.pv],wt[0]=St.getValueAtTime((St._caching.lastFrame+St.offsetTime-.01)/gt,St.offsetTime),wt[1]=kt.getValueAtTime((kt._caching.lastFrame+kt.offsetTime-.01)/gt,kt.offsetTime))}else wt=_e,bt=wt;this.v.rotate(-Math.atan2(bt[1]-wt[1],bt[0]-wt[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function rt(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function it(){}function st(at){this._addDynamicProperty(at),this.elem.addDynamicProperty(at),this._isDirty=!0}function ut(at,gt,bt){if(this.elem=at,this.frameId=-1,this.propType="transform",this.data=gt,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(bt||at),gt.p&&gt.p.s?(this.px=PropertyFactory.getProp(at,gt.p.x,0,0,this),this.py=PropertyFactory.getProp(at,gt.p.y,0,0,this),gt.p.z&&(this.pz=PropertyFactory.getProp(at,gt.p.z,0,0,this))):this.p=PropertyFactory.getProp(at,gt.p||{k:[0,0,0]},1,0,this),gt.rx){if(this.rx=PropertyFactory.getProp(at,gt.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(at,gt.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(at,gt.rz,0,degToRads,this),gt.or.k[0].ti){var wt,St=gt.or.k.length;for(wt=0;wt<St;wt+=1)gt.or.k[wt].to=null,gt.or.k[wt].ti=null}this.or=PropertyFactory.getProp(at,gt.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(at,gt.r||{k:0},0,degToRads,this);gt.sk&&(this.sk=PropertyFactory.getProp(at,gt.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(at,gt.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(at,gt.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(at,gt.s||{k:[100,100,100]},1,.01,this),gt.o?this.o=PropertyFactory.getProp(at,gt.o,0,.01,at):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}ut.prototype={applyToMatrix:et,getValue:tt,precalculateMatrix:rt,autoOrient:it},extendPrototype([DynamicPropertyContainer],ut),ut.prototype.addDynamicProperty=st,ut.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function ht(at,gt,bt){return new ut(at,gt,bt)}return{getTransformProperty:ht}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(_e,et){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(_e,et.c,0,null,this),this.o=PropertyFactory.getProp(_e,et.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(_e,et.tr,this),this.so=PropertyFactory.getProp(_e,et.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(_e,et.tr.eo,0,.01,this),this.data=et,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(_e,et,tt,rt,it,st){var ut=st?-1:1,ht=rt.s.v[0]+(1-rt.s.v[0])*(1-it),at=rt.s.v[1]+(1-rt.s.v[1])*(1-it);_e.translate(rt.p.v[0]*ut*it,rt.p.v[1]*ut*it,rt.p.v[2]),et.translate(-rt.a.v[0],-rt.a.v[1],rt.a.v[2]),et.rotate(-rt.r.v*ut*it),et.translate(rt.a.v[0],rt.a.v[1],rt.a.v[2]),tt.translate(-rt.a.v[0],-rt.a.v[1],rt.a.v[2]),tt.scale(st?1/ht:ht,st?1/at:at),tt.translate(rt.a.v[0],rt.a.v[1],rt.a.v[2])},RepeaterModifier.prototype.init=function(_e,et,tt,rt){for(this.elem=_e,this.arr=et,this.pos=tt,this.elemsData=rt,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(_e),this.initModifierProperties(_e,et[tt]);tt>0;)tt-=1,this._elements.unshift(et[tt]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(_e){var et,tt=_e.length;for(et=0;et<tt;et+=1)_e[et]._processed=!1,_e[et].ty==="gr"&&this.resetElements(_e[et].it)},RepeaterModifier.prototype.cloneElements=function(_e){var et=JSON.parse(JSON.stringify(_e));return this.resetElements(et),et},RepeaterModifier.prototype.changeGroupRender=function(_e,et){var tt,rt=_e.length;for(tt=0;tt<rt;tt+=1)_e[tt]._render=et,_e[tt].ty==="gr"&&this.changeGroupRender(_e[tt].it,et)},RepeaterModifier.prototype.processShapes=function(_e){var et,tt,rt,it,st,ut=!1;if(this._mdf||_e){var ht=Math.ceil(this.c.v);if(this._groups.length<ht){for(;this._groups.length<ht;){var at={it:this.cloneElements(this._elements),ty:"gr"};at.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,at),this._groups.splice(0,0,at),this._currentCopies+=1}this.elem.reloadShapes(),ut=!0}st=0;var gt;for(rt=0;rt<=this._groups.length-1;rt+=1){if(gt=st<ht,this._groups[rt]._render=gt,this.changeGroupRender(this._groups[rt].it,gt),!gt){var bt=this.elemsData[rt].it,wt=bt[bt.length-1];wt.transform.op.v!==0?(wt.transform.op._mdf=!0,wt.transform.op.v=0):wt.transform.op._mdf=!1}st+=1}this._currentCopies=ht;var St=this.o.v,kt=St%1,Rt=St>0?Math.floor(St):Math.ceil(St),It=this.pMatrix.props,Dt=this.rMatrix.props,Mt=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var $t=0;if(St>0){for(;$t<Rt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),$t+=1;kt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,kt,!1),$t+=kt)}else if(St<0){for(;$t>Rt;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),$t-=1;kt&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-kt,!0),$t-=kt)}rt=this.data.m===1?0:this._currentCopies-1,it=this.data.m===1?1:-1,st=this._currentCopies;for(var jt,Nt;st;){if(et=this.elemsData[rt].it,tt=et[et.length-1].transform.mProps.v.props,Nt=tt.length,et[et.length-1].transform.mProps._mdf=!0,et[et.length-1].transform.op._mdf=!0,et[et.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(rt/(this._currentCopies-1)),$t!==0){for((rt!==0&&it===1||rt!==this._currentCopies-1&&it===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Dt[0],Dt[1],Dt[2],Dt[3],Dt[4],Dt[5],Dt[6],Dt[7],Dt[8],Dt[9],Dt[10],Dt[11],Dt[12],Dt[13],Dt[14],Dt[15]),this.matrix.transform(Mt[0],Mt[1],Mt[2],Mt[3],Mt[4],Mt[5],Mt[6],Mt[7],Mt[8],Mt[9],Mt[10],Mt[11],Mt[12],Mt[13],Mt[14],Mt[15]),this.matrix.transform(It[0],It[1],It[2],It[3],It[4],It[5],It[6],It[7],It[8],It[9],It[10],It[11],It[12],It[13],It[14],It[15]),jt=0;jt<Nt;jt+=1)tt[jt]=this.matrix.props[jt];this.matrix.reset()}else for(this.matrix.reset(),jt=0;jt<Nt;jt+=1)tt[jt]=this.matrix.props[jt];$t+=1,st-=1,rt+=it}}else for(st=this._currentCopies,rt=0,it=1;st;)et=this.elemsData[rt].it,tt=et[et.length-1].transform.mProps.v.props,et[et.length-1].transform.mProps._mdf=!1,et[et.length-1].transform.op._mdf=!1,st-=1,rt+=it;return ut},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(_e,et){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(_e,et.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(_e,et){var tt=shapePool.newElement();tt.c=_e.c;var rt,it=_e._length,st,ut,ht,at,gt,bt,wt=0,St,kt,Rt,It,Dt,Mt;for(rt=0;rt<it;rt+=1)st=_e.v[rt],ht=_e.o[rt],ut=_e.i[rt],st[0]===ht[0]&&st[1]===ht[1]&&st[0]===ut[0]&&st[1]===ut[1]?(rt===0||rt===it-1)&&!_e.c?(tt.setTripleAt(st[0],st[1],ht[0],ht[1],ut[0],ut[1],wt),wt+=1):(rt===0?at=_e.v[it-1]:at=_e.v[rt-1],gt=Math.sqrt(Math.pow(st[0]-at[0],2)+Math.pow(st[1]-at[1],2)),bt=gt?Math.min(gt/2,et)/gt:0,Dt=st[0]+(at[0]-st[0])*bt,St=Dt,Mt=st[1]-(st[1]-at[1])*bt,kt=Mt,Rt=St-(St-st[0])*roundCorner,It=kt-(kt-st[1])*roundCorner,tt.setTripleAt(St,kt,Rt,It,Dt,Mt,wt),wt+=1,rt===it-1?at=_e.v[0]:at=_e.v[rt+1],gt=Math.sqrt(Math.pow(st[0]-at[0],2)+Math.pow(st[1]-at[1],2)),bt=gt?Math.min(gt/2,et)/gt:0,Rt=st[0]+(at[0]-st[0])*bt,St=Rt,It=st[1]+(at[1]-st[1])*bt,kt=It,Dt=St-(St-st[0])*roundCorner,Mt=kt-(kt-st[1])*roundCorner,tt.setTripleAt(St,kt,Rt,It,Dt,Mt,wt),wt+=1):(tt.setTripleAt(_e.v[rt][0],_e.v[rt][1],_e.o[rt][0],_e.o[rt][1],_e.i[rt][0],_e.i[rt][1],wt),wt+=1);return tt},RoundCornersModifier.prototype.processShapes=function(_e){var et,tt,rt=this.shapes.length,it,st,ut=this.rd.v;if(ut!==0){var ht,at;for(tt=0;tt<rt;tt+=1){if(ht=this.shapes[tt],at=ht.localShapeCollection,!(!ht.shape._mdf&&!this._mdf&&!_e))for(at.releaseShapes(),ht.shape._mdf=!0,et=ht.shape.paths.shapes,st=ht.shape.paths._length,it=0;it<st;it+=1)at.addShape(this.processPath(et[it],ut));ht.shape.paths=ht.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(_e,et){return Math.abs(_e-et)*1e5<=Math.min(Math.abs(_e),Math.abs(et))}function floatZero(_e){return Math.abs(_e)<=1e-5}function lerp(_e,et,tt){return _e*(1-tt)+et*tt}function lerpPoint(_e,et,tt){return[lerp(_e[0],et[0],tt),lerp(_e[1],et[1],tt)]}function quadRoots(_e,et,tt){if(_e===0)return[];var rt=et*et-4*_e*tt;if(rt<0)return[];var it=-et/(2*_e);if(rt===0)return[it];var st=Math.sqrt(rt)/(2*_e);return[it-st,it+st]}function polynomialCoefficients(_e,et,tt,rt){return[-_e+3*et-3*tt+rt,3*_e-6*et+3*tt,-3*_e+3*et,_e]}function singlePoint(_e){return new PolynomialBezier(_e,_e,_e,_e,!1)}function PolynomialBezier(_e,et,tt,rt,it){it&&pointEqual(_e,et)&&(et=lerpPoint(_e,rt,1/3)),it&&pointEqual(tt,rt)&&(tt=lerpPoint(_e,rt,2/3));var st=polynomialCoefficients(_e[0],et[0],tt[0],rt[0]),ut=polynomialCoefficients(_e[1],et[1],tt[1],rt[1]);this.a=[st[0],ut[0]],this.b=[st[1],ut[1]],this.c=[st[2],ut[2]],this.d=[st[3],ut[3]],this.points=[_e,et,tt,rt]}PolynomialBezier.prototype.point=function(_e){return[((this.a[0]*_e+this.b[0])*_e+this.c[0])*_e+this.d[0],((this.a[1]*_e+this.b[1])*_e+this.c[1])*_e+this.d[1]]},PolynomialBezier.prototype.derivative=function(_e){return[(3*_e*this.a[0]+2*this.b[0])*_e+this.c[0],(3*_e*this.a[1]+2*this.b[1])*_e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(_e){var et=this.derivative(_e);return Math.atan2(et[1],et[0])},PolynomialBezier.prototype.normalAngle=function(_e){var et=this.derivative(_e);return Math.atan2(et[0],et[1])},PolynomialBezier.prototype.inflectionPoints=function(){var _e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(_e))return[];var et=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/_e,tt=et*et-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/_e;if(tt<0)return[];var rt=Math.sqrt(tt);return floatZero(rt)?rt>0&&rt<1?[et]:[]:[et-rt,et+rt].filter(function(it){return it>0&&it<1})},PolynomialBezier.prototype.split=function(_e){if(_e<=0)return[singlePoint(this.points[0]),this];if(_e>=1)return[this,singlePoint(this.points[this.points.length-1])];var et=lerpPoint(this.points[0],this.points[1],_e),tt=lerpPoint(this.points[1],this.points[2],_e),rt=lerpPoint(this.points[2],this.points[3],_e),it=lerpPoint(et,tt,_e),st=lerpPoint(tt,rt,_e),ut=lerpPoint(it,st,_e);return[new PolynomialBezier(this.points[0],et,it,ut,!0),new PolynomialBezier(ut,st,rt,this.points[3],!0)]};function extrema(_e,et){var tt=_e.points[0][et],rt=_e.points[_e.points.length-1][et];if(tt>rt){var it=rt;rt=tt,tt=it}for(var st=quadRoots(3*_e.a[et],2*_e.b[et],_e.c[et]),ut=0;ut<st.length;ut+=1)if(st[ut]>0&&st[ut]<1){var ht=_e.point(st[ut])[et];ht<tt?tt=ht:ht>rt&&(rt=ht)}return{min:tt,max:rt}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var _e=this.bounds();return{left:_e.x.min,right:_e.x.max,top:_e.y.min,bottom:_e.y.max,width:_e.x.max-_e.x.min,height:_e.y.max-_e.y.min,cx:(_e.x.max+_e.x.min)/2,cy:(_e.y.max+_e.y.min)/2}};function intersectData(_e,et,tt){var rt=_e.boundingBox();return{cx:rt.cx,cy:rt.cy,width:rt.width,height:rt.height,bez:_e,t:(et+tt)/2,t1:et,t2:tt}}function splitData(_e){var et=_e.bez.split(.5);return[intersectData(et[0],_e.t1,_e.t),intersectData(et[1],_e.t,_e.t2)]}function boxIntersect(_e,et){return Math.abs(_e.cx-et.cx)*2<_e.width+et.width&&Math.abs(_e.cy-et.cy)*2<_e.height+et.height}function intersectsImpl(_e,et,tt,rt,it,st){if(boxIntersect(_e,et)){if(tt>=st||_e.width<=rt&&_e.height<=rt&&et.width<=rt&&et.height<=rt){it.push([_e.t,et.t]);return}var ut=splitData(_e),ht=splitData(et);intersectsImpl(ut[0],ht[0],tt+1,rt,it,st),intersectsImpl(ut[0],ht[1],tt+1,rt,it,st),intersectsImpl(ut[1],ht[0],tt+1,rt,it,st),intersectsImpl(ut[1],ht[1],tt+1,rt,it,st)}}PolynomialBezier.prototype.intersections=function(_e,et,tt){et===void 0&&(et=2),tt===void 0&&(tt=7);var rt=[];return intersectsImpl(intersectData(this,0,1),intersectData(_e,0,1),0,et,rt,tt),rt},PolynomialBezier.shapeSegment=function(_e,et){var tt=(et+1)%_e.length();return new PolynomialBezier(_e.v[et],_e.o[et],_e.i[tt],_e.v[tt],!0)},PolynomialBezier.shapeSegmentInverted=function(_e,et){var tt=(et+1)%_e.length();return new PolynomialBezier(_e.v[tt],_e.i[tt],_e.o[et],_e.v[et],!0)};function crossProduct(_e,et){return[_e[1]*et[2]-_e[2]*et[1],_e[2]*et[0]-_e[0]*et[2],_e[0]*et[1]-_e[1]*et[0]]}function lineIntersection(_e,et,tt,rt){var it=[_e[0],_e[1],1],st=[et[0],et[1],1],ut=[tt[0],tt[1],1],ht=[rt[0],rt[1],1],at=crossProduct(crossProduct(it,st),crossProduct(ut,ht));return floatZero(at[2])?null:[at[0]/at[2],at[1]/at[2]]}function polarOffset(_e,et,tt){return[_e[0]+Math.cos(et)*tt,_e[1]-Math.sin(et)*tt]}function pointDistance(_e,et){return Math.hypot(_e[0]-et[0],_e[1]-et[1])}function pointEqual(_e,et){return floatEqual(_e[0],et[0])&&floatEqual(_e[1],et[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(_e,et){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(_e,et.s,0,null,this),this.frequency=PropertyFactory.getProp(_e,et.r,0,null,this),this.pointsType=PropertyFactory.getProp(_e,et.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(_e,et,tt,rt,it,st,ut){var ht=tt-Math.PI/2,at=tt+Math.PI/2,gt=et[0]+Math.cos(tt)*rt*it,bt=et[1]-Math.sin(tt)*rt*it;_e.setTripleAt(gt,bt,gt+Math.cos(ht)*st,bt-Math.sin(ht)*st,gt+Math.cos(at)*ut,bt-Math.sin(at)*ut,_e.length())}function getPerpendicularVector(_e,et){var tt=[et[0]-_e[0],et[1]-_e[1]],rt=-Math.PI*.5,it=[Math.cos(rt)*tt[0]-Math.sin(rt)*tt[1],Math.sin(rt)*tt[0]+Math.cos(rt)*tt[1]];return it}function getProjectingAngle(_e,et){var tt=et===0?_e.length()-1:et-1,rt=(et+1)%_e.length(),it=_e.v[tt],st=_e.v[rt],ut=getPerpendicularVector(it,st);return Math.atan2(0,1)-Math.atan2(ut[1],ut[0])}function zigZagCorner(_e,et,tt,rt,it,st,ut){var ht=getProjectingAngle(et,tt),at=et.v[tt%et._length],gt=et.v[tt===0?et._length-1:tt-1],bt=et.v[(tt+1)%et._length],wt=st===2?Math.sqrt(Math.pow(at[0]-gt[0],2)+Math.pow(at[1]-gt[1],2)):0,St=st===2?Math.sqrt(Math.pow(at[0]-bt[0],2)+Math.pow(at[1]-bt[1],2)):0;setPoint(_e,et.v[tt%et._length],ht,ut,rt,St/((it+1)*2),wt/((it+1)*2))}function zigZagSegment(_e,et,tt,rt,it,st){for(var ut=0;ut<rt;ut+=1){var ht=(ut+1)/(rt+1),at=it===2?Math.sqrt(Math.pow(et.points[3][0]-et.points[0][0],2)+Math.pow(et.points[3][1]-et.points[0][1],2)):0,gt=et.normalAngle(ht),bt=et.point(ht);setPoint(_e,bt,gt,st,tt,at/((rt+1)*2),at/((rt+1)*2)),st=-st}return st}ZigZagModifier.prototype.processPath=function(_e,et,tt,rt){var it=_e._length,st=shapePool.newElement();if(st.c=_e.c,_e.c||(it-=1),it===0)return st;var ut=-1,ht=PolynomialBezier.shapeSegment(_e,0);zigZagCorner(st,_e,0,et,tt,rt,ut);for(var at=0;at<it;at+=1)ut=zigZagSegment(st,ht,et,tt,rt,-ut),at===it-1&&!_e.c?ht=null:ht=PolynomialBezier.shapeSegment(_e,(at+1)%it),zigZagCorner(st,_e,at+1,et,tt,rt,ut);return st},ZigZagModifier.prototype.processShapes=function(_e){var et,tt,rt=this.shapes.length,it,st,ut=this.amplitude.v,ht=Math.max(0,Math.round(this.frequency.v)),at=this.pointsType.v;if(ut!==0){var gt,bt;for(tt=0;tt<rt;tt+=1){if(gt=this.shapes[tt],bt=gt.localShapeCollection,!(!gt.shape._mdf&&!this._mdf&&!_e))for(bt.releaseShapes(),gt.shape._mdf=!0,et=gt.shape.paths.shapes,st=gt.shape.paths._length,it=0;it<st;it+=1)bt.addShape(this.processPath(et[it],ut,ht,at));gt.shape.paths=gt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(_e,et,tt){var rt=Math.atan2(et[0]-_e[0],et[1]-_e[1]);return[polarOffset(_e,rt,tt),polarOffset(et,rt,tt)]}function offsetSegment(_e,et){var tt,rt,it,st,ut,ht,at;at=linearOffset(_e.points[0],_e.points[1],et),tt=at[0],rt=at[1],at=linearOffset(_e.points[1],_e.points[2],et),it=at[0],st=at[1],at=linearOffset(_e.points[2],_e.points[3],et),ut=at[0],ht=at[1];var gt=lineIntersection(tt,rt,it,st);gt===null&&(gt=rt);var bt=lineIntersection(ut,ht,it,st);return bt===null&&(bt=ut),new PolynomialBezier(tt,gt,bt,ht)}function joinLines(_e,et,tt,rt,it){var st=et.points[3],ut=tt.points[0];if(rt===3||pointEqual(st,ut))return st;if(rt===2){var ht=-et.tangentAngle(1),at=-tt.tangentAngle(0)+Math.PI,gt=lineIntersection(st,polarOffset(st,ht+Math.PI/2,100),ut,polarOffset(ut,ht+Math.PI/2,100)),bt=gt?pointDistance(gt,st):pointDistance(st,ut)/2,wt=polarOffset(st,ht,2*bt*roundCorner);return _e.setXYAt(wt[0],wt[1],"o",_e.length()-1),wt=polarOffset(ut,at,2*bt*roundCorner),_e.setTripleAt(ut[0],ut[1],ut[0],ut[1],wt[0],wt[1],_e.length()),ut}var St=pointEqual(st,et.points[2])?et.points[0]:et.points[2],kt=pointEqual(ut,tt.points[1])?tt.points[3]:tt.points[1],Rt=lineIntersection(St,st,ut,kt);return Rt&&pointDistance(Rt,st)<it?(_e.setTripleAt(Rt[0],Rt[1],Rt[0],Rt[1],Rt[0],Rt[1],_e.length()),Rt):st}function getIntersection(_e,et){var tt=_e.intersections(et);return tt.length&&floatEqual(tt[0][0],1)&&tt.shift(),tt.length?tt[0]:null}function pruneSegmentIntersection(_e,et){var tt=_e.slice(),rt=et.slice(),it=getIntersection(_e[_e.length-1],et[0]);return it&&(tt[_e.length-1]=_e[_e.length-1].split(it[0])[0],rt[0]=et[0].split(it[1])[1]),_e.length>1&&et.length>1&&(it=getIntersection(_e[0],et[et.length-1]),it)?[[_e[0].split(it[0])[0]],[et[et.length-1].split(it[1])[1]]]:[tt,rt]}function pruneIntersections(_e){for(var et,tt=1;tt<_e.length;tt+=1)et=pruneSegmentIntersection(_e[tt-1],_e[tt]),_e[tt-1]=et[0],_e[tt]=et[1];return _e.length>1&&(et=pruneSegmentIntersection(_e[_e.length-1],_e[0]),_e[_e.length-1]=et[0],_e[0]=et[1]),_e}function offsetSegmentSplit(_e,et){var tt=_e.inflectionPoints(),rt,it,st,ut;if(tt.length===0)return[offsetSegment(_e,et)];if(tt.length===1||floatEqual(tt[1],1))return st=_e.split(tt[0]),rt=st[0],it=st[1],[offsetSegment(rt,et),offsetSegment(it,et)];st=_e.split(tt[0]),rt=st[0];var ht=(tt[1]-tt[0])/(1-tt[0]);return st=st[1].split(ht),ut=st[0],it=st[1],[offsetSegment(rt,et),offsetSegment(ut,et),offsetSegment(it,et)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(_e,et){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(_e,et.a,0,null,this),this.miterLimit=PropertyFactory.getProp(_e,et.ml,0,null,this),this.lineJoin=et.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(_e,et,tt,rt){var it=shapePool.newElement();it.c=_e.c;var st=_e.length();_e.c||(st-=1);var ut,ht,at,gt=[];for(ut=0;ut<st;ut+=1)at=PolynomialBezier.shapeSegment(_e,ut),gt.push(offsetSegmentSplit(at,et));if(!_e.c)for(ut=st-1;ut>=0;ut-=1)at=PolynomialBezier.shapeSegmentInverted(_e,ut),gt.push(offsetSegmentSplit(at,et));gt=pruneIntersections(gt);var bt=null,wt=null;for(ut=0;ut<gt.length;ut+=1){var St=gt[ut];for(wt&&(bt=joinLines(it,wt,St[0],tt,rt)),wt=St[St.length-1],ht=0;ht<St.length;ht+=1)at=St[ht],bt&&pointEqual(at.points[0],bt)?it.setXYAt(at.points[1][0],at.points[1][1],"o",it.length()-1):it.setTripleAt(at.points[0][0],at.points[0][1],at.points[1][0],at.points[1][1],at.points[0][0],at.points[0][1],it.length()),it.setTripleAt(at.points[3][0],at.points[3][1],at.points[3][0],at.points[3][1],at.points[2][0],at.points[2][1],it.length()),bt=at.points[3]}return gt.length&&joinLines(it,wt,gt[0][0],tt,rt),it},OffsetPathModifier.prototype.processShapes=function(_e){var et,tt,rt=this.shapes.length,it,st,ut=this.amount.v,ht=this.miterLimit.v,at=this.lineJoin;if(ut!==0){var gt,bt;for(tt=0;tt<rt;tt+=1){if(gt=this.shapes[tt],bt=gt.localShapeCollection,!(!gt.shape._mdf&&!this._mdf&&!_e))for(bt.releaseShapes(),gt.shape._mdf=!0,et=gt.shape.paths.shapes,st=gt.shape.paths._length,it=0;it<st;it+=1)bt.addShape(this.processPath(et[it],ut,at,ht));gt.shape.paths=gt.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(_e){for(var et=_e.fStyle?_e.fStyle.split(" "):[],tt="normal",rt="normal",it=et.length,st,ut=0;ut<it;ut+=1)switch(st=et[ut].toLowerCase(),st){case"italic":rt="italic";break;case"bold":tt="700";break;case"black":tt="900";break;case"medium":tt="500";break;case"regular":case"normal":tt="400";break;case"light":case"thin":tt="200";break}return{style:rt,weight:_e.fWeight||tt}}var FontManager=function(){var _e=5e3,et={w:0,size:0,shapes:[],data:{shapes:[]}},tt=[];tt=tt.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var rt=127988,it=917631,st=917601,ut=917626,ht=65039,at=8205,gt=127462,bt=127487,wt=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function St(ar){var hr=ar.split(","),Qt,ir=hr.length,Mr=[];for(Qt=0;Qt<ir;Qt+=1)hr[Qt]!=="sans-serif"&&hr[Qt]!=="monospace"&&Mr.push(hr[Qt]);return Mr.join(",")}function kt(ar,hr){var Qt=createTag("span");Qt.setAttribute("aria-hidden",!0),Qt.style.fontFamily=hr;var ir=createTag("span");ir.innerText="giItT1WQy@!-/#",Qt.style.position="absolute",Qt.style.left="-10000px",Qt.style.top="-10000px",Qt.style.fontSize="300px",Qt.style.fontVariant="normal",Qt.style.fontStyle="normal",Qt.style.fontWeight="normal",Qt.style.letterSpacing="0",Qt.appendChild(ir),document.body.appendChild(Qt);var Mr=ir.offsetWidth;return ir.style.fontFamily=St(ar)+", "+hr,{node:ir,w:Mr,parent:Qt}}function Rt(){var ar,hr=this.fonts.length,Qt,ir,Mr=hr;for(ar=0;ar<hr;ar+=1)this.fonts[ar].loaded?Mr-=1:this.fonts[ar].fOrigin==="n"||this.fonts[ar].origin===0?this.fonts[ar].loaded=!0:(Qt=this.fonts[ar].monoCase.node,ir=this.fonts[ar].monoCase.w,Qt.offsetWidth!==ir?(Mr-=1,this.fonts[ar].loaded=!0):(Qt=this.fonts[ar].sansCase.node,ir=this.fonts[ar].sansCase.w,Qt.offsetWidth!==ir&&(Mr-=1,this.fonts[ar].loaded=!0)),this.fonts[ar].loaded&&(this.fonts[ar].sansCase.parent.parentNode.removeChild(this.fonts[ar].sansCase.parent),this.fonts[ar].monoCase.parent.parentNode.removeChild(this.fonts[ar].monoCase.parent)));Mr!==0&&Date.now()-this.initTime<_e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function It(ar,hr){var Qt=document.body&&hr?"svg":"canvas",ir,Mr=getFontProperties(ar);if(Qt==="svg"){var Cr=createNS("text");Cr.style.fontSize="100px",Cr.setAttribute("font-family",ar.fFamily),Cr.setAttribute("font-style",Mr.style),Cr.setAttribute("font-weight",Mr.weight),Cr.textContent="1",ar.fClass?(Cr.style.fontFamily="inherit",Cr.setAttribute("class",ar.fClass)):Cr.style.fontFamily=ar.fFamily,hr.appendChild(Cr),ir=Cr}else{var rn=new OffscreenCanvas(500,500).getContext("2d");rn.font=Mr.style+" "+Mr.weight+" 100px "+ar.fFamily,ir=rn}function fn(Dn){return Qt==="svg"?(ir.textContent=Dn,ir.getComputedTextLength()):ir.measureText(Dn).width}return{measureText:fn}}function Dt(ar,hr){if(!ar){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ar.list;return}if(!document.body){this.isLoaded=!0,ar.list.forEach(function(lo){lo.helper=It(lo),lo.cache={}}),this.fonts=ar.list;return}var Qt=ar.list,ir,Mr=Qt.length,Cr=Mr;for(ir=0;ir<Mr;ir+=1){var rn=!0,fn,Dn;if(Qt[ir].loaded=!1,Qt[ir].monoCase=kt(Qt[ir].fFamily,"monospace"),Qt[ir].sansCase=kt(Qt[ir].fFamily,"sans-serif"),!Qt[ir].fPath)Qt[ir].loaded=!0,Cr-=1;else if(Qt[ir].fOrigin==="p"||Qt[ir].origin===3){if(fn=document.querySelectorAll('style[f-forigin="p"][f-family="'+Qt[ir].fFamily+'"], style[f-origin="3"][f-family="'+Qt[ir].fFamily+'"]'),fn.length>0&&(rn=!1),rn){var Yn=createTag("style");Yn.setAttribute("f-forigin",Qt[ir].fOrigin),Yn.setAttribute("f-origin",Qt[ir].origin),Yn.setAttribute("f-family",Qt[ir].fFamily),Yn.type="text/css",Yn.innerText="@font-face {font-family: "+Qt[ir].fFamily+"; font-style: normal; src: url('"+Qt[ir].fPath+"');}",hr.appendChild(Yn)}}else if(Qt[ir].fOrigin==="g"||Qt[ir].origin===1){for(fn=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Dn=0;Dn<fn.length;Dn+=1)fn[Dn].href.indexOf(Qt[ir].fPath)!==-1&&(rn=!1);if(rn){var eo=createTag("link");eo.setAttribute("f-forigin",Qt[ir].fOrigin),eo.setAttribute("f-origin",Qt[ir].origin),eo.type="text/css",eo.rel="stylesheet",eo.href=Qt[ir].fPath,document.body.appendChild(eo)}}else if(Qt[ir].fOrigin==="t"||Qt[ir].origin===2){for(fn=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Dn=0;Dn<fn.length;Dn+=1)Qt[ir].fPath===fn[Dn].src&&(rn=!1);if(rn){var Gn=createTag("link");Gn.setAttribute("f-forigin",Qt[ir].fOrigin),Gn.setAttribute("f-origin",Qt[ir].origin),Gn.setAttribute("rel","stylesheet"),Gn.setAttribute("href",Qt[ir].fPath),hr.appendChild(Gn)}}Qt[ir].helper=It(Qt[ir],hr),Qt[ir].cache={},this.fonts.push(Qt[ir])}Cr===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function Mt(ar){if(ar){this.chars||(this.chars=[]);var hr,Qt=ar.length,ir,Mr=this.chars.length,Cr;for(hr=0;hr<Qt;hr+=1){for(ir=0,Cr=!1;ir<Mr;)this.chars[ir].style===ar[hr].style&&this.chars[ir].fFamily===ar[hr].fFamily&&this.chars[ir].ch===ar[hr].ch&&(Cr=!0),ir+=1;Cr||(this.chars.push(ar[hr]),Mr+=1)}}}function $t(ar,hr,Qt){for(var ir=0,Mr=this.chars.length;ir<Mr;){if(this.chars[ir].ch===ar&&this.chars[ir].style===hr&&this.chars[ir].fFamily===Qt)return this.chars[ir];ir+=1}return(typeof ar=="string"&&ar.charCodeAt(0)!==13||!ar)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ar,hr,Qt)),et}function jt(ar,hr,Qt){var ir=this.getFontByName(hr),Mr=ar;if(!ir.cache[Mr]){var Cr=ir.helper;if(ar===" "){var rn=Cr.measureText("|"+ar+"|"),fn=Cr.measureText("||");ir.cache[Mr]=(rn-fn)/100}else ir.cache[Mr]=Cr.measureText(ar)/100}return ir.cache[Mr]*Qt}function Nt(ar){for(var hr=0,Qt=this.fonts.length;hr<Qt;){if(this.fonts[hr].fName===ar)return this.fonts[hr];hr+=1}return this.fonts[0]}function Ut(ar){var hr=0,Qt=ar.charCodeAt(0);if(Qt>=55296&&Qt<=56319){var ir=ar.charCodeAt(1);ir>=56320&&ir<=57343&&(hr=(Qt-55296)*1024+ir-56320+65536)}return hr}function Ht(ar,hr){var Qt=ar.toString(16)+hr.toString(16);return wt.indexOf(Qt)!==-1}function Kt(ar){return ar===at}function tr(ar){return ar===ht}function mr(ar){var hr=Ut(ar);return hr>=gt&&hr<=bt}function vr(ar){return mr(ar.substr(0,2))&&mr(ar.substr(2,2))}function wr(ar){return tt.indexOf(ar)!==-1}function yr(ar,hr){var Qt=Ut(ar.substr(hr,2));if(Qt!==rt)return!1;var ir=0;for(hr+=2;ir<5;){if(Qt=Ut(ar.substr(hr,2)),Qt<st||Qt>ut)return!1;ir+=1,hr+=2}return Ut(ar.substr(hr,2))===it}function Or(){this.isLoaded=!0}var Nr=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};Nr.isModifier=Ht,Nr.isZeroWidthJoiner=Kt,Nr.isFlagEmoji=vr,Nr.isRegionalCode=mr,Nr.isCombinedCharacter=wr,Nr.isRegionalFlag=yr,Nr.isVariationSelector=tr,Nr.BLACK_FLAG_CODE_POINT=rt;var Lr={addChars:Mt,addFonts:Dt,getCharData:$t,getFontByName:Nt,measureText:jt,checkLoadedFonts:Rt,setIsLoaded:Or};return Nr.prototype=Lr,Nr}();function SlotManager(_e){this.animationData=_e}SlotManager.prototype.getProp=function(_e){return this.animationData.slots&&this.animationData.slots[_e.sid]?Object.assign(_e,this.animationData.slots[_e.sid].p):_e};function slotFactory(_e){return new SlotManager(_e)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(et){this.renderableComponents.indexOf(et)===-1&&this.renderableComponents.push(et)},removeRenderableComponent:function(et){this.renderableComponents.indexOf(et)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(et),1)},prepareRenderableFrame:function(et){this.checkLayerLimits(et)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(et){this.data.ip-this.data.st<=et&&this.data.op-this.data.st>et?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var et,tt=this.renderableComponents.length;for(et=0;et<tt;et+=1)this.renderableComponents[et].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var _e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(et){return _e[et]||""}}();function SliderEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,0,0,tt)}function AngleEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,0,0,tt)}function ColorEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,1,0,tt)}function PointEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,1,0,tt)}function LayerIndexEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,0,0,tt)}function MaskIndexEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,0,0,tt)}function CheckboxEffect(_e,et,tt){this.p=PropertyFactory.getProp(et,_e.v,0,0,tt)}function NoValueEffect(){this.p={}}function EffectsManager(_e,et){var tt=_e.ef||[];this.effectElements=[];var rt,it=tt.length,st;for(rt=0;rt<it;rt+=1)st=new GroupEffect(tt[rt],et),this.effectElements.push(st)}function GroupEffect(_e,et){this.init(_e,et)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(_e,et){this.data=_e,this.effectElements=[],this.initDynamicPropertyContainer(et);var tt,rt=this.data.ef.length,it,st=this.data.ef;for(tt=0;tt<rt;tt+=1){switch(it=null,st[tt].ty){case 0:it=new SliderEffect(st[tt],et,this);break;case 1:it=new AngleEffect(st[tt],et,this);break;case 2:it=new ColorEffect(st[tt],et,this);break;case 3:it=new PointEffect(st[tt],et,this);break;case 4:case 7:it=new CheckboxEffect(st[tt],et,this);break;case 10:it=new LayerIndexEffect(st[tt],et,this);break;case 11:it=new MaskIndexEffect(st[tt],et,this);break;case 5:it=new EffectsManager(st[tt],et);break;default:it=new NoValueEffect(st[tt]);break}it&&this.effectElements.push(it)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var et=0,tt=this.data.masksProperties.length;et<tt;){if(this.data.masksProperties[et].mode!=="n"&&this.data.masksProperties[et].cl!==!1)return!0;et+=1}return!1},initExpressions:function(){var et=getExpressionInterfaces();if(et){var tt=et("layer"),rt=et("effects"),it=et("shape"),st=et("text"),ut=et("comp");this.layerInterface=tt(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var ht=rt.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(ht),this.data.ty===0||this.data.xt?this.compInterface=ut(this):this.data.ty===4?(this.layerInterface.shapeInterface=it(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=st(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var et=getBlendMode(this.data.bm),tt=this.baseElement||this.layerElement;tt.style["mix-blend-mode"]=et},initBaseData:function(et,tt,rt){this.globalData=tt,this.comp=rt,this.data=et,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(et,tt){var rt,it=this.dynamicProperties.length;for(rt=0;rt<it;rt+=1)(tt||this._isParent&&this.dynamicProperties[rt].propType==="transform")&&(this.dynamicProperties[rt].getValue(),this.dynamicProperties[rt]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(et){this.dynamicProperties.indexOf(et)===-1&&this.dynamicProperties.push(et)}};function FootageElement(_e,et,tt){this.initFrame(),this.initRenderable(),this.assetData=et.getAssetData(_e.refId),this.footageData=et.imageLoader.getAsset(this.assetData),this.initBaseData(_e,et,tt)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var _e=getExpressionInterfaces();if(_e){var et=_e("footage");this.layerInterface=et(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(_e,et,tt){this.initFrame(),this.initRenderable(),this.assetData=et.getAssetData(_e.refId),this.initBaseData(_e,et,tt),this._isPlaying=!1,this._canPlay=!1;var rt=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(rt),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=_e.tm?PropertyFactory.getProp(this,_e.tm,0,et.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,_e.au&&_e.au.lv?_e.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(_e){if(this.prepareRenderableFrame(_e,!0),this.prepareProperties(_e,!0),this.tm._placeholder)this._currentTime=_e/this.data.sr;else{var et=this.tm.v;this._currentTime=et}this._volume=this.lv.v[0];var tt=this._volume*this._volumeMultiplier;this._previousVolume!==tt&&(this._previousVolume=tt,this.audio.volume(tt))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(_e){this.audio.rate(_e)},AudioElement.prototype.volume=function(_e){this._volumeMultiplier=_e,this._previousVolume=_e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(_e){var et,tt=this.layers.length,rt;for(this.completeLayers=!0,et=tt-1;et>=0;et-=1)this.elements[et]||(rt=this.layers[et],rt.ip-rt.st<=_e-this.layers[et].st&&rt.op-rt.st>_e-this.layers[et].st&&this.buildItem(et)),this.completeLayers=this.elements[et]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(_e){switch(_e.ty){case 2:return this.createImage(_e);case 0:return this.createComp(_e);case 1:return this.createSolid(_e);case 3:return this.createNull(_e);case 4:return this.createShape(_e);case 5:return this.createText(_e);case 6:return this.createAudio(_e);case 13:return this.createCamera(_e);case 15:return this.createFootage(_e);default:return this.createNull(_e)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(_e){return new AudioElement(_e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(_e){return new FootageElement(_e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var _e,et=this.layers.length;for(_e=0;_e<et;_e+=1)this.buildItem(_e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(_e){this.completeLayers=!1;var et,tt=_e.length,rt,it=this.layers.length;for(et=0;et<tt;et+=1)for(rt=0;rt<it;){if(this.layers[rt].id===_e[et].id){this.layers[rt]=_e[et];break}rt+=1}},BaseRenderer.prototype.setProjectInterface=function(_e){this.globalData.projectInterface=_e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(_e,et,tt){for(var rt=this.elements,it=this.layers,st=0,ut=it.length;st<ut;)it[st].ind==et&&(!rt[st]||rt[st]===!0?(this.buildItem(st),this.addPendingElement(_e)):(tt.push(rt[st]),rt[st].setAsParent(),it[st].parent!==void 0?this.buildElementParenting(_e,it[st].parent,tt):_e.setHierarchy(tt))),st+=1},BaseRenderer.prototype.addPendingElement=function(_e){this.pendingElements.push(_e)},BaseRenderer.prototype.searchExtraCompositions=function(_e){var et,tt=_e.length;for(et=0;et<tt;et+=1)if(_e[et].xt){var rt=this.createComp(_e[et]);rt.initExpressions(),this.globalData.projectInterface.registerComposition(rt)}},BaseRenderer.prototype.getElementById=function(_e){var et,tt=this.elements.length;for(et=0;et<tt;et+=1)if(this.elements[et].data.ind===_e)return this.elements[et];return null},BaseRenderer.prototype.getElementByPath=function(_e){var et=_e.shift(),tt;if(typeof et=="number")tt=this.elements[et];else{var rt,it=this.elements.length;for(rt=0;rt<it;rt+=1)if(this.elements[rt].data.nm===et){tt=this.elements[rt];break}}return _e.length===0?tt:tt.getElementByPath(_e)},BaseRenderer.prototype.setupGlobalData=function(_e,et){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(_e),this.globalData.fontManager.addChars(_e.chars),this.globalData.fontManager.addFonts(_e.fonts,et),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=_e.fr,this.globalData.nm=_e.nm,this.globalData.compSize={w:_e.w,h:_e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var et=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:et,localMat:et,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var et,tt=this.finalTransform.mat,rt=0,it=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;rt<it;){if(this.hierarchy[rt].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}rt+=1}if(this.finalTransform._matMdf)for(et=this.finalTransform.mProp.v.props,tt.cloneFromProps(et),rt=0;rt<it;rt+=1)tt.multiply(this.hierarchy[rt].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var et=0,tt=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;et<tt;)this.localTransforms[et]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[et]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),et+=1;if(this.finalTransform._localMatMdf){var rt=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(rt),et=1;et<tt;et+=1){var it=this.localTransforms[et].matrix;rt.multiply(it)}rt.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var st=this.finalTransform.localOpacity;for(et=0;et<tt;et+=1)st*=this.localTransforms[et].opacity*.01;this.finalTransform.localOpacity=st}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var et=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(et.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var tt=0,rt=et.length;for(tt=0;tt<rt;tt+=1)this.localTransforms.push(et[tt])}}},globalToLocal:function(et){var tt=[];tt.push(this.finalTransform);for(var rt=!0,it=this.comp;rt;)it.finalTransform?(it.data.hasMask&&tt.splice(0,0,it.finalTransform),it=it.comp):rt=!1;var st,ut=tt.length,ht;for(st=0;st<ut;st+=1)ht=tt[st].mat.applyToPointArray(0,0,0),et=[et[0]-ht[0],et[1]-ht[1],0];return et},mHelper:new Matrix};function MaskElement(_e,et,tt){this.data=_e,this.element=et,this.globalData=tt,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var rt=this.globalData.defs,it,st=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(st),this.solidPath="";var ut,ht=this.masksProperties,at=0,gt=[],bt,wt,St=createElementID(),kt,Rt,It,Dt,Mt="clipPath",$t="clip-path";for(it=0;it<st;it+=1)if((ht[it].mode!=="a"&&ht[it].mode!=="n"||ht[it].inv||ht[it].o.k!==100||ht[it].o.x)&&(Mt="mask",$t="mask"),(ht[it].mode==="s"||ht[it].mode==="i")&&at===0?(kt=createNS("rect"),kt.setAttribute("fill","#ffffff"),kt.setAttribute("width",this.element.comp.data.w||0),kt.setAttribute("height",this.element.comp.data.h||0),gt.push(kt)):kt=null,ut=createNS("path"),ht[it].mode==="n")this.viewData[it]={op:PropertyFactory.getProp(this.element,ht[it].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ht[it],3),elem:ut,lastPath:""},rt.appendChild(ut);else{at+=1,ut.setAttribute("fill",ht[it].mode==="s"?"#000000":"#ffffff"),ut.setAttribute("clip-rule","nonzero");var jt;if(ht[it].x.k!==0?(Mt="mask",$t="mask",Dt=PropertyFactory.getProp(this.element,ht[it].x,0,null,this.element),jt=createElementID(),Rt=createNS("filter"),Rt.setAttribute("id",jt),It=createNS("feMorphology"),It.setAttribute("operator","erode"),It.setAttribute("in","SourceGraphic"),It.setAttribute("radius","0"),Rt.appendChild(It),rt.appendChild(Rt),ut.setAttribute("stroke",ht[it].mode==="s"?"#000000":"#ffffff")):(It=null,Dt=null),this.storedData[it]={elem:ut,x:Dt,expan:It,lastPath:"",lastOperator:"",filterId:jt,lastRadius:0},ht[it].mode==="i"){wt=gt.length;var Nt=createNS("g");for(bt=0;bt<wt;bt+=1)Nt.appendChild(gt[bt]);var Ut=createNS("mask");Ut.setAttribute("mask-type","alpha"),Ut.setAttribute("id",St+"_"+at),Ut.appendChild(ut),rt.appendChild(Ut),Nt.setAttribute("mask","url("+getLocationHref()+"#"+St+"_"+at+")"),gt.length=0,gt.push(Nt)}else gt.push(ut);ht[it].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[it]={elem:ut,lastPath:"",op:PropertyFactory.getProp(this.element,ht[it].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,ht[it],3),invRect:kt},this.viewData[it].prop.k||this.drawPath(ht[it],this.viewData[it].prop.v,this.viewData[it])}for(this.maskElement=createNS(Mt),st=gt.length,it=0;it<st;it+=1)this.maskElement.appendChild(gt[it]);at>0&&(this.maskElement.setAttribute("id",St),this.element.maskedElement.setAttribute($t,"url("+getLocationHref()+"#"+St+")"),rt.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(_e){return this.viewData[_e].prop},MaskElement.prototype.renderFrame=function(_e){var et=this.element.finalTransform.mat,tt,rt=this.masksProperties.length;for(tt=0;tt<rt;tt+=1)if((this.viewData[tt].prop._mdf||_e)&&this.drawPath(this.masksProperties[tt],this.viewData[tt].prop.v,this.viewData[tt]),(this.viewData[tt].op._mdf||_e)&&this.viewData[tt].elem.setAttribute("fill-opacity",this.viewData[tt].op.v),this.masksProperties[tt].mode!=="n"&&(this.viewData[tt].invRect&&(this.element.finalTransform.mProp._mdf||_e)&&this.viewData[tt].invRect.setAttribute("transform",et.getInverseMatrix().to2dCSS()),this.storedData[tt].x&&(this.storedData[tt].x._mdf||_e))){var it=this.storedData[tt].expan;this.storedData[tt].x.v<0?(this.storedData[tt].lastOperator!=="erode"&&(this.storedData[tt].lastOperator="erode",this.storedData[tt].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[tt].filterId+")")),it.setAttribute("radius",-this.storedData[tt].x.v)):(this.storedData[tt].lastOperator!=="dilate"&&(this.storedData[tt].lastOperator="dilate",this.storedData[tt].elem.setAttribute("filter",null)),this.storedData[tt].elem.setAttribute("stroke-width",this.storedData[tt].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var _e="M0,0 ";return _e+=" h"+this.globalData.compSize.w,_e+=" v"+this.globalData.compSize.h,_e+=" h-"+this.globalData.compSize.w,_e+=" v-"+this.globalData.compSize.h+" ",_e},MaskElement.prototype.drawPath=function(_e,et,tt){var rt=" M"+et.v[0][0]+","+et.v[0][1],it,st;for(st=et._length,it=1;it<st;it+=1)rt+=" C"+et.o[it-1][0]+","+et.o[it-1][1]+" "+et.i[it][0]+","+et.i[it][1]+" "+et.v[it][0]+","+et.v[it][1];if(et.c&&st>1&&(rt+=" C"+et.o[it-1][0]+","+et.o[it-1][1]+" "+et.i[0][0]+","+et.i[0][1]+" "+et.v[0][0]+","+et.v[0][1]),tt.lastPath!==rt){var ut="";tt.elem&&(et.c&&(ut=_e.inv?this.solidPath+rt:rt),tt.elem.setAttribute("d",ut)),tt.lastPath=rt}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var _e={};_e.createFilter=et,_e.createAlphaToLuminanceFilter=tt;function et(rt,it){var st=createNS("filter");return st.setAttribute("id",rt),it!==!0&&(st.setAttribute("filterUnits","objectBoundingBox"),st.setAttribute("x","0%"),st.setAttribute("y","0%"),st.setAttribute("width","100%"),st.setAttribute("height","100%")),st}function tt(){var rt=createNS("feColorMatrix");return rt.setAttribute("type","matrix"),rt.setAttribute("color-interpolation-filters","sRGB"),rt.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),rt}return _e}(),featureSupport=function(){var _e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(_e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(_e.svgLumaHidden=!1),_e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(_e){var et,tt="SourceGraphic",rt=_e.data.ef?_e.data.ef.length:0,it=createElementID(),st=filtersFactory.createFilter(it,!0),ut=0;this.filters=[];var ht;for(et=0;et<rt;et+=1){ht=null;var at=_e.data.ef[et].ty;if(registeredEffects$1[at]){var gt=registeredEffects$1[at].effect;ht=new gt(st,_e.effectsManager.effectElements[et],_e,idPrefix+ut,tt),tt=idPrefix+ut,registeredEffects$1[at].countsAsEffect&&(ut+=1)}ht&&this.filters.push(ht)}ut&&(_e.globalData.defs.appendChild(st),_e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+it+")")),this.filters.length&&_e.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(_e){var et,tt=this.filters.length;for(et=0;et<tt;et+=1)this.filters[et].renderFrame(_e)},SVGEffects.prototype.getEffects=function(_e){var et,tt=this.filters.length,rt=[];for(et=0;et<tt;et+=1)this.filters[et].type===_e&&rt.push(this.filters[et]);return rt};function registerEffect$1(_e,et,tt){registeredEffects$1[_e]={effect:et,countsAsEffect:tt}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var et=null;if(this.data.td){this.matteMasks={};var tt=createNS("g");tt.setAttribute("id",this.layerId),tt.appendChild(this.layerElement),et=tt,this.globalData.defs.appendChild(tt)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),et=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var rt=createNS("clipPath"),it=createNS("path");it.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var st=createElementID();if(rt.setAttribute("id",st),rt.appendChild(it),this.globalData.defs.appendChild(rt),this.checkMasks()){var ut=createNS("g");ut.setAttribute("clip-path","url("+getLocationHref()+"#"+st+")"),ut.appendChild(this.layerElement),this.transformedElement=ut,et?et.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+st+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(et){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[et]){var tt=this.layerId+"_"+et,rt,it,st,ut;if(et===1||et===3){var ht=createNS("mask");ht.setAttribute("id",tt),ht.setAttribute("mask-type",et===3?"luminance":"alpha"),st=createNS("use"),st.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),ht.appendChild(st),this.globalData.defs.appendChild(ht),!featureSupport.maskType&&et===1&&(ht.setAttribute("mask-type","luminance"),rt=createElementID(),it=filtersFactory.createFilter(rt),this.globalData.defs.appendChild(it),it.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),ut.appendChild(st),ht.appendChild(ut),ut.setAttribute("filter","url("+getLocationHref()+"#"+rt+")"))}else if(et===2){var at=createNS("mask");at.setAttribute("id",tt),at.setAttribute("mask-type","alpha");var gt=createNS("g");at.appendChild(gt),rt=createElementID(),it=filtersFactory.createFilter(rt);var bt=createNS("feComponentTransfer");bt.setAttribute("in","SourceGraphic"),it.appendChild(bt);var wt=createNS("feFuncA");wt.setAttribute("type","table"),wt.setAttribute("tableValues","1.0 0.0"),bt.appendChild(wt),this.globalData.defs.appendChild(it);var St=createNS("rect");St.setAttribute("width",this.comp.data.w),St.setAttribute("height",this.comp.data.h),St.setAttribute("x","0"),St.setAttribute("y","0"),St.setAttribute("fill","#ffffff"),St.setAttribute("opacity","0"),gt.setAttribute("filter","url("+getLocationHref()+"#"+rt+")"),gt.appendChild(St),st=createNS("use"),st.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),gt.appendChild(st),featureSupport.maskType||(at.setAttribute("mask-type","luminance"),it.appendChild(filtersFactory.createAlphaToLuminanceFilter()),ut=createNS("g"),gt.appendChild(St),ut.appendChild(this.layerElement),gt.appendChild(ut)),this.globalData.defs.appendChild(at)}this.matteMasks[et]=tt}return this.matteMasks[et]},setMatte:function(et){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+et+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(et){this.hierarchy=et},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var _e={initElement:function(tt,rt,it){this.initFrame(),this.initBaseData(tt,rt,it),this.initTransform(tt,rt,it),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var tt=this.baseElement||this.layerElement;tt.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var tt=this.baseElement||this.layerElement;tt.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(tt){this._mdf=!1,this.prepareRenderableFrame(tt),this.prepareProperties(tt,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(_e)],RenderableDOMElement)})();function IImageElement(_e,et,tt){this.assetData=et.getAssetData(_e.refId),this.assetData&&this.assetData.sid&&(this.assetData=et.slotManager.getProp(this.assetData)),this.initElement(_e,et,tt),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var _e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(_e,et){this.elem=_e,this.pos=et}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(et){var tt,rt=this.shapeModifiers.length;for(tt=0;tt<rt;tt+=1)this.shapeModifiers[tt].addShape(et)},isShapeInAnimatedModifiers:function(et){for(var tt=0,rt=this.shapeModifiers.length;tt<rt;)if(this.shapeModifiers[tt].isAnimatedWithShape(et))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var et,tt=this.shapes.length;for(et=0;et<tt;et+=1)this.shapes[et].sh.reset();tt=this.shapeModifiers.length;var rt;for(et=tt-1;et>=0&&(rt=this.shapeModifiers[et].processShapes(this._isFirstFrame),!rt);et-=1);}},searchProcessedElement:function(et){for(var tt=this.processedElements,rt=0,it=tt.length;rt<it;){if(tt[rt].elem===et)return tt[rt].pos;rt+=1}return 0},addProcessedElement:function(et,tt){for(var rt=this.processedElements,it=rt.length;it;)if(it-=1,rt[it].elem===et){rt[it].pos=tt;return}rt.push(new ProcessedElement(et,tt))},prepareFrame:function(et){this.prepareRenderableFrame(et),this.prepareProperties(et,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(_e,et,tt){this.caches=[],this.styles=[],this.transformers=_e,this.lStr="",this.sh=tt,this.lvl=et,this._isAnimated=!!tt.k;for(var rt=0,it=_e.length;rt<it;){if(_e[rt].mProps.dynamicProperties.length){this._isAnimated=!0;break}rt+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(_e,et){this.data=_e,this.type=_e.ty,this.d="",this.lvl=et,this._mdf=!1,this.closed=_e.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(_e,et,tt,rt){this.elem=_e,this.frameId=-1,this.dataProps=createSizedArray(et.length),this.renderer=tt,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",et.length?et.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(rt);var it,st=et.length||0,ut;for(it=0;it<st;it+=1)ut=PropertyFactory.getProp(_e,et[it].v,0,0,this),this.k=ut.k||this.k,this.dataProps[it]={n:et[it].n,p:ut};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(_e){if(!(this.elem.globalData.frameId===this.frameId&&!_e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||_e,this._mdf)){var et=0,tt=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),et=0;et<tt;et+=1)this.dataProps[et].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[et].p.v:this.dashArray[et]=this.dataProps[et].p.v:this.dashoffset[0]=this.dataProps[et].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(_e,et,tt){this.initDynamicPropertyContainer(_e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_e,et.o,0,.01,this),this.w=PropertyFactory.getProp(_e,et.w,0,null,this),this.d=new DashProperty(_e,et.d||{},"svg",this),this.c=PropertyFactory.getProp(_e,et.c,1,255,this),this.style=tt,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(_e,et,tt){this.initDynamicPropertyContainer(_e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(_e,et.o,0,.01,this),this.c=PropertyFactory.getProp(_e,et.c,1,255,this),this.style=tt}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(_e,et,tt){this.initDynamicPropertyContainer(_e),this.getValue=this.iterateDynamicProperties,this.style=tt}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(_e,et,tt){this.data=et,this.c=createTypedArray("uint8c",et.p*4);var rt=et.k.k[0].s?et.k.k[0].s.length-et.p*4:et.k.k.length-et.p*4;this.o=createTypedArray("float32",rt),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=rt,this.initDynamicPropertyContainer(tt),this.prop=PropertyFactory.getProp(_e,et.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(_e,et){for(var tt=0,rt=this.o.length/2,it;tt<rt;){if(it=Math.abs(_e[tt*4]-_e[et*4+tt*2]),it>.01)return!1;tt+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var _e=0,et=this.data.k.k.length;_e<et;){if(!this.comparePoints(this.data.k.k[_e].s,this.data.p))return!1;_e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(_e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||_e){var et,tt=this.data.p*4,rt,it;for(et=0;et<tt;et+=1)rt=et%4===0?100:255,it=Math.round(this.prop.v[et]*rt),this.c[et]!==it&&(this.c[et]=it,this._cmdf=!_e);if(this.o.length)for(tt=this.prop.v.length,et=this.data.p*4;et<tt;et+=1)rt=et%2===0?100:1,it=et%2===0?Math.round(this.prop.v[et]*100):this.prop.v[et],this.o[et-this.data.p*4]!==it&&(this.o[et-this.data.p*4]=it,this._omdf=!_e);this._mdf=!_e}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(_e,et,tt){this.initDynamicPropertyContainer(_e),this.getValue=this.iterateDynamicProperties,this.initGradientData(_e,et,tt)}SVGGradientFillStyleData.prototype.initGradientData=function(_e,et,tt){this.o=PropertyFactory.getProp(_e,et.o,0,.01,this),this.s=PropertyFactory.getProp(_e,et.s,1,null,this),this.e=PropertyFactory.getProp(_e,et.e,1,null,this),this.h=PropertyFactory.getProp(_e,et.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(_e,et.a||{k:0},0,degToRads,this),this.g=new GradientProperty(_e,et.g,this),this.style=tt,this.stops=[],this.setGradientData(tt.pElem,et),this.setGradientOpacity(et,tt),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(_e,et){var tt=createElementID(),rt=createNS(et.t===1?"linearGradient":"radialGradient");rt.setAttribute("id",tt),rt.setAttribute("spreadMethod","pad"),rt.setAttribute("gradientUnits","userSpaceOnUse");var it=[],st,ut,ht;for(ht=et.g.p*4,ut=0;ut<ht;ut+=4)st=createNS("stop"),rt.appendChild(st),it.push(st);_e.setAttribute(et.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+tt+")"),this.gf=rt,this.cst=it},SVGGradientFillStyleData.prototype.setGradientOpacity=function(_e,et){if(this.g._hasOpacity&&!this.g._collapsable){var tt,rt,it,st=createNS("mask"),ut=createNS("path");st.appendChild(ut);var ht=createElementID(),at=createElementID();st.setAttribute("id",at);var gt=createNS(_e.t===1?"linearGradient":"radialGradient");gt.setAttribute("id",ht),gt.setAttribute("spreadMethod","pad"),gt.setAttribute("gradientUnits","userSpaceOnUse"),it=_e.g.k.k[0].s?_e.g.k.k[0].s.length:_e.g.k.k.length;var bt=this.stops;for(rt=_e.g.p*4;rt<it;rt+=2)tt=createNS("stop"),tt.setAttribute("stop-color","rgb(255,255,255)"),gt.appendChild(tt),bt.push(tt);ut.setAttribute(_e.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+ht+")"),_e.ty==="gs"&&(ut.setAttribute("stroke-linecap",lineCapEnum[_e.lc||2]),ut.setAttribute("stroke-linejoin",lineJoinEnum[_e.lj||2]),_e.lj===1&&ut.setAttribute("stroke-miterlimit",_e.ml)),this.of=gt,this.ms=st,this.ost=bt,this.maskId=at,et.msElem=ut}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(_e,et,tt){this.initDynamicPropertyContainer(_e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(_e,et.w,0,null,this),this.d=new DashProperty(_e,et.d||{},"svg",this),this.initGradientData(_e,et,tt),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(_e,et,tt){this.transform={mProps:_e,op:et,container:tt},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(et,tt,rt,it){if(tt===0)return"";var st=et.o,ut=et.i,ht=et.v,at,gt=" M"+it.applyToPointStringified(ht[0][0],ht[0][1]);for(at=1;at<tt;at+=1)gt+=" C"+it.applyToPointStringified(st[at-1][0],st[at-1][1])+" "+it.applyToPointStringified(ut[at][0],ut[at][1])+" "+it.applyToPointStringified(ht[at][0],ht[at][1]);return rt&&tt&&(gt+=" C"+it.applyToPointStringified(st[at-1][0],st[at-1][1])+" "+it.applyToPointStringified(ut[0][0],ut[0][1])+" "+it.applyToPointStringified(ht[0][0],ht[0][1]),gt+="z"),gt},SVGElementsRenderer=function(){var _e=new Matrix,et=new Matrix,tt={createRenderFunction:rt};function rt(wt){switch(wt.ty){case"fl":return ht;case"gf":return gt;case"gs":return at;case"st":return bt;case"sh":case"el":case"rc":case"sr":return ut;case"tr":return it;case"no":return st;default:return null}}function it(wt,St,kt){(kt||St.transform.op._mdf)&&St.transform.container.setAttribute("opacity",St.transform.op.v),(kt||St.transform.mProps._mdf)&&St.transform.container.setAttribute("transform",St.transform.mProps.v.to2dCSS())}function st(){}function ut(wt,St,kt){var Rt,It,Dt,Mt,$t,jt,Nt=St.styles.length,Ut=St.lvl,Ht,Kt,tr,mr;for(jt=0;jt<Nt;jt+=1){if(Mt=St.sh._mdf||kt,St.styles[jt].lvl<Ut){for(Kt=et.reset(),tr=Ut-St.styles[jt].lvl,mr=St.transformers.length-1;!Mt&&tr>0;)Mt=St.transformers[mr].mProps._mdf||Mt,tr-=1,mr-=1;if(Mt)for(tr=Ut-St.styles[jt].lvl,mr=St.transformers.length-1;tr>0;)Kt.multiply(St.transformers[mr].mProps.v),tr-=1,mr-=1}else Kt=_e;if(Ht=St.sh.paths,It=Ht._length,Mt){for(Dt="",Rt=0;Rt<It;Rt+=1)$t=Ht.shapes[Rt],$t&&$t._length&&(Dt+=buildShapeString($t,$t._length,$t.c,Kt));St.caches[jt]=Dt}else Dt=St.caches[jt];St.styles[jt].d+=wt.hd===!0?"":Dt,St.styles[jt]._mdf=Mt||St.styles[jt]._mdf}}function ht(wt,St,kt){var Rt=St.style;(St.c._mdf||kt)&&Rt.pElem.setAttribute("fill","rgb("+bmFloor(St.c.v[0])+","+bmFloor(St.c.v[1])+","+bmFloor(St.c.v[2])+")"),(St.o._mdf||kt)&&Rt.pElem.setAttribute("fill-opacity",St.o.v)}function at(wt,St,kt){gt(wt,St,kt),bt(wt,St,kt)}function gt(wt,St,kt){var Rt=St.gf,It=St.g._hasOpacity,Dt=St.s.v,Mt=St.e.v;if(St.o._mdf||kt){var $t=wt.ty==="gf"?"fill-opacity":"stroke-opacity";St.style.pElem.setAttribute($t,St.o.v)}if(St.s._mdf||kt){var jt=wt.t===1?"x1":"cx",Nt=jt==="x1"?"y1":"cy";Rt.setAttribute(jt,Dt[0]),Rt.setAttribute(Nt,Dt[1]),It&&!St.g._collapsable&&(St.of.setAttribute(jt,Dt[0]),St.of.setAttribute(Nt,Dt[1]))}var Ut,Ht,Kt,tr;if(St.g._cmdf||kt){Ut=St.cst;var mr=St.g.c;for(Kt=Ut.length,Ht=0;Ht<Kt;Ht+=1)tr=Ut[Ht],tr.setAttribute("offset",mr[Ht*4]+"%"),tr.setAttribute("stop-color","rgb("+mr[Ht*4+1]+","+mr[Ht*4+2]+","+mr[Ht*4+3]+")")}if(It&&(St.g._omdf||kt)){var vr=St.g.o;for(St.g._collapsable?Ut=St.cst:Ut=St.ost,Kt=Ut.length,Ht=0;Ht<Kt;Ht+=1)tr=Ut[Ht],St.g._collapsable||tr.setAttribute("offset",vr[Ht*2]+"%"),tr.setAttribute("stop-opacity",vr[Ht*2+1])}if(wt.t===1)(St.e._mdf||kt)&&(Rt.setAttribute("x2",Mt[0]),Rt.setAttribute("y2",Mt[1]),It&&!St.g._collapsable&&(St.of.setAttribute("x2",Mt[0]),St.of.setAttribute("y2",Mt[1])));else{var wr;if((St.s._mdf||St.e._mdf||kt)&&(wr=Math.sqrt(Math.pow(Dt[0]-Mt[0],2)+Math.pow(Dt[1]-Mt[1],2)),Rt.setAttribute("r",wr),It&&!St.g._collapsable&&St.of.setAttribute("r",wr)),St.e._mdf||St.h._mdf||St.a._mdf||kt){wr||(wr=Math.sqrt(Math.pow(Dt[0]-Mt[0],2)+Math.pow(Dt[1]-Mt[1],2)));var yr=Math.atan2(Mt[1]-Dt[1],Mt[0]-Dt[0]),Or=St.h.v;Or>=1?Or=.99:Or<=-1&&(Or=-.99);var Nr=wr*Or,Lr=Math.cos(yr+St.a.v)*Nr+Dt[0],ar=Math.sin(yr+St.a.v)*Nr+Dt[1];Rt.setAttribute("fx",Lr),Rt.setAttribute("fy",ar),It&&!St.g._collapsable&&(St.of.setAttribute("fx",Lr),St.of.setAttribute("fy",ar))}}}function bt(wt,St,kt){var Rt=St.style,It=St.d;It&&(It._mdf||kt)&&It.dashStr&&(Rt.pElem.setAttribute("stroke-dasharray",It.dashStr),Rt.pElem.setAttribute("stroke-dashoffset",It.dashoffset[0])),St.c&&(St.c._mdf||kt)&&Rt.pElem.setAttribute("stroke","rgb("+bmFloor(St.c.v[0])+","+bmFloor(St.c.v[1])+","+bmFloor(St.c.v[2])+")"),(St.o._mdf||kt)&&Rt.pElem.setAttribute("stroke-opacity",St.o.v),(St.w._mdf||kt)&&(Rt.pElem.setAttribute("stroke-width",St.w.v),Rt.msElem&&Rt.msElem.setAttribute("stroke-width",St.w.v))}return tt}();function SVGShapeElement(_e,et,tt){this.shapes=[],this.shapesData=_e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(_e,et,tt),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var _e,et=this.shapes.length,tt,rt,it=this.stylesList.length,st,ut=[],ht=!1;for(rt=0;rt<it;rt+=1){for(st=this.stylesList[rt],ht=!1,ut.length=0,_e=0;_e<et;_e+=1)tt=this.shapes[_e],tt.styles.indexOf(st)!==-1&&(ut.push(tt),ht=tt._isAnimated||ht);ut.length>1&&ht&&this.setShapesAsAnimated(ut)}},SVGShapeElement.prototype.setShapesAsAnimated=function(_e){var et,tt=_e.length;for(et=0;et<tt;et+=1)_e[et].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(_e,et){var tt,rt=new SVGStyleData(_e,et),it=rt.pElem;if(_e.ty==="st")tt=new SVGStrokeStyleData(this,_e,rt);else if(_e.ty==="fl")tt=new SVGFillStyleData(this,_e,rt);else if(_e.ty==="gf"||_e.ty==="gs"){var st=_e.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;tt=new st(this,_e,rt),this.globalData.defs.appendChild(tt.gf),tt.maskId&&(this.globalData.defs.appendChild(tt.ms),this.globalData.defs.appendChild(tt.of),it.setAttribute("mask","url("+getLocationHref()+"#"+tt.maskId+")"))}else _e.ty==="no"&&(tt=new SVGNoStyleData(this,_e,rt));return(_e.ty==="st"||_e.ty==="gs")&&(it.setAttribute("stroke-linecap",lineCapEnum[_e.lc||2]),it.setAttribute("stroke-linejoin",lineJoinEnum[_e.lj||2]),it.setAttribute("fill-opacity","0"),_e.lj===1&&it.setAttribute("stroke-miterlimit",_e.ml)),_e.r===2&&it.setAttribute("fill-rule","evenodd"),_e.ln&&it.setAttribute("id",_e.ln),_e.cl&&it.setAttribute("class",_e.cl),_e.bm&&(it.style["mix-blend-mode"]=getBlendMode(_e.bm)),this.stylesList.push(rt),this.addToAnimatedContents(_e,tt),tt},SVGShapeElement.prototype.createGroupElement=function(_e){var et=new ShapeGroupData;return _e.ln&&et.gr.setAttribute("id",_e.ln),_e.cl&&et.gr.setAttribute("class",_e.cl),_e.bm&&(et.gr.style["mix-blend-mode"]=getBlendMode(_e.bm)),et},SVGShapeElement.prototype.createTransformElement=function(_e,et){var tt=TransformPropertyFactory.getTransformProperty(this,_e,this),rt=new SVGTransformData(tt,tt.o,et);return this.addToAnimatedContents(_e,rt),rt},SVGShapeElement.prototype.createShapeElement=function(_e,et,tt){var rt=4;_e.ty==="rc"?rt=5:_e.ty==="el"?rt=6:_e.ty==="sr"&&(rt=7);var it=ShapePropertyFactory.getShapeProp(this,_e,rt,this),st=new SVGShapeData(et,tt,it);return this.shapes.push(st),this.addShapeToModifiers(st),this.addToAnimatedContents(_e,st),st},SVGShapeElement.prototype.addToAnimatedContents=function(_e,et){for(var tt=0,rt=this.animatedContents.length;tt<rt;){if(this.animatedContents[tt].element===et)return;tt+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(_e),element:et,data:_e})},SVGShapeElement.prototype.setElementStyles=function(_e){var et=_e.styles,tt,rt=this.stylesList.length;for(tt=0;tt<rt;tt+=1)this.stylesList[tt].closed||et.push(this.stylesList[tt])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _e,et=this.itemsData.length;for(_e=0;_e<et;_e+=1)this.prevViewData[_e]=this.itemsData[_e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),et=this.dynamicProperties.length,_e=0;_e<et;_e+=1)this.dynamicProperties[_e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(_e,et,tt,rt,it,st,ut){var ht=[].concat(st),at,gt=_e.length-1,bt,wt,St=[],kt=[],Rt,It,Dt;for(at=gt;at>=0;at-=1){if(Dt=this.searchProcessedElement(_e[at]),Dt?et[at]=tt[Dt-1]:_e[at]._render=ut,_e[at].ty==="fl"||_e[at].ty==="st"||_e[at].ty==="gf"||_e[at].ty==="gs"||_e[at].ty==="no")Dt?et[at].style.closed=!1:et[at]=this.createStyleElement(_e[at],it),_e[at]._render&&et[at].style.pElem.parentNode!==rt&&rt.appendChild(et[at].style.pElem),St.push(et[at].style);else if(_e[at].ty==="gr"){if(!Dt)et[at]=this.createGroupElement(_e[at]);else for(wt=et[at].it.length,bt=0;bt<wt;bt+=1)et[at].prevViewData[bt]=et[at].it[bt];this.searchShapes(_e[at].it,et[at].it,et[at].prevViewData,et[at].gr,it+1,ht,ut),_e[at]._render&&et[at].gr.parentNode!==rt&&rt.appendChild(et[at].gr)}else _e[at].ty==="tr"?(Dt||(et[at]=this.createTransformElement(_e[at],rt)),Rt=et[at].transform,ht.push(Rt)):_e[at].ty==="sh"||_e[at].ty==="rc"||_e[at].ty==="el"||_e[at].ty==="sr"?(Dt||(et[at]=this.createShapeElement(_e[at],ht,it)),this.setElementStyles(et[at])):_e[at].ty==="tm"||_e[at].ty==="rd"||_e[at].ty==="ms"||_e[at].ty==="pb"||_e[at].ty==="zz"||_e[at].ty==="op"?(Dt?(It=et[at],It.closed=!1):(It=ShapeModifiers.getModifier(_e[at].ty),It.init(this,_e[at]),et[at]=It,this.shapeModifiers.push(It)),kt.push(It)):_e[at].ty==="rp"&&(Dt?(It=et[at],It.closed=!0):(It=ShapeModifiers.getModifier(_e[at].ty),et[at]=It,It.init(this,_e,at,et),this.shapeModifiers.push(It),ut=!1),kt.push(It));this.addProcessedElement(_e[at],at+1)}for(gt=St.length,at=0;at<gt;at+=1)St[at].closed=!0;for(gt=kt.length,at=0;at<gt;at+=1)kt[at].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var _e,et=this.stylesList.length;for(_e=0;_e<et;_e+=1)this.stylesList[_e].reset();for(this.renderShape(),_e=0;_e<et;_e+=1)(this.stylesList[_e]._mdf||this._isFirstFrame)&&(this.stylesList[_e].msElem&&(this.stylesList[_e].msElem.setAttribute("d",this.stylesList[_e].d),this.stylesList[_e].d="M0 0"+this.stylesList[_e].d),this.stylesList[_e].pElem.setAttribute("d",this.stylesList[_e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var _e,et=this.animatedContents.length,tt;for(_e=0;_e<et;_e+=1)tt=this.animatedContents[_e],(this._isFirstFrame||tt.element._isAnimated)&&tt.data!==!0&&tt.fn(tt.data,tt.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(_e,et,tt,rt,it,st){this.o=_e,this.sw=et,this.sc=tt,this.fc=rt,this.m=it,this.p=st,this._mdf={o:!0,sw:!!et,sc:!!tt,fc:!!rt,m:!0,p:!0}}LetterProps.prototype.update=function(_e,et,tt,rt,it,st){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var ut=!1;return this.o!==_e&&(this.o=_e,this._mdf.o=!0,ut=!0),this.sw!==et&&(this.sw=et,this._mdf.sw=!0,ut=!0),this.sc!==tt&&(this.sc=tt,this._mdf.sc=!0,ut=!0),this.fc!==rt&&(this.fc=rt,this._mdf.fc=!0,ut=!0),this.m!==it&&(this.m=it,this._mdf.m=!0,ut=!0),st.length&&(this.p[0]!==st[0]||this.p[1]!==st[1]||this.p[4]!==st[4]||this.p[5]!==st[5]||this.p[12]!==st[12]||this.p[13]!==st[13])&&(this.p=st,this._mdf.p=!0,ut=!0),ut};function TextProperty(_e,et){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,et.d&&et.d.sid&&(et.d=_e.globalData.slotManager.getProp(et.d)),this.data=et,this.elem=_e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(_e,et){for(var tt in et)Object.prototype.hasOwnProperty.call(et,tt)&&(_e[tt]=et[tt]);return _e},TextProperty.prototype.setCurrentData=function(_e){_e.__complete||this.completeTextData(_e),this.currentData=_e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(_e){this.effectsSequence.push(_e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(_e){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!_e)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var et=this.currentData,tt=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var rt,it=this.effectsSequence.length,st=_e||this.data.d.k[this.keysIndex].s;for(rt=0;rt<it;rt+=1)tt!==this.keysIndex?st=this.effectsSequence[rt](st,st.t):st=this.effectsSequence[rt](this.currentData,st.t);et!==st&&this.setCurrentData(st),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var _e=this.data.d.k,et=this.elem.comp.renderedFrame,tt=0,rt=_e.length;tt<=rt-1&&!(tt===rt-1||_e[tt+1].t>et);)tt+=1;return this.keysIndex!==tt&&(this.keysIndex=tt),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(_e){for(var et=[],tt=0,rt=_e.length,it,st,ut=!1,ht=!1,at="";tt<rt;)ut=ht,ht=!1,it=_e.charCodeAt(tt),at=_e.charAt(tt),FontManager.isCombinedCharacter(it)?ut=!0:it>=55296&&it<=56319?FontManager.isRegionalFlag(_e,tt)?at=_e.substr(tt,14):(st=_e.charCodeAt(tt+1),st>=56320&&st<=57343&&(FontManager.isModifier(it,st)?(at=_e.substr(tt,2),ut=!0):FontManager.isFlagEmoji(_e.substr(tt,4))?at=_e.substr(tt,4):at=_e.substr(tt,2))):it>56319?(st=_e.charCodeAt(tt+1),FontManager.isVariationSelector(it)&&(ut=!0)):FontManager.isZeroWidthJoiner(it)&&(ut=!0,ht=!0),ut?(et[et.length-1]+=at,ut=!1):et.push(at),tt+=at.length;return et},TextProperty.prototype.completeTextData=function(_e){_e.__complete=!0;var et=this.elem.globalData.fontManager,tt=this.data,rt=[],it,st,ut,ht=0,at,gt=tt.m.g,bt=0,wt=0,St=0,kt=[],Rt=0,It=0,Dt,Mt,$t=et.getFontByName(_e.f),jt,Nt=0,Ut=getFontProperties($t);_e.fWeight=Ut.weight,_e.fStyle=Ut.style,_e.finalSize=_e.s,_e.finalText=this.buildFinalText(_e.t),st=_e.finalText.length,_e.finalLineHeight=_e.lh;var Ht=_e.tr/1e3*_e.finalSize,Kt;if(_e.sz)for(var tr=!0,mr=_e.sz[0],vr=_e.sz[1],wr,yr;tr;){yr=this.buildFinalText(_e.t),wr=0,Rt=0,st=yr.length,Ht=_e.tr/1e3*_e.finalSize;var Or=-1;for(it=0;it<st;it+=1)Kt=yr[it].charCodeAt(0),ut=!1,yr[it]===" "?Or=it:(Kt===13||Kt===3)&&(Rt=0,ut=!0,wr+=_e.finalLineHeight||_e.finalSize*1.2),et.chars?(jt=et.getCharData(yr[it],$t.fStyle,$t.fFamily),Nt=ut?0:jt.w*_e.finalSize/100):Nt=et.measureText(yr[it],_e.f,_e.finalSize),Rt+Nt>mr&&yr[it]!==" "?(Or===-1?st+=1:it=Or,wr+=_e.finalLineHeight||_e.finalSize*1.2,yr.splice(it,Or===it?1:0,"\r"),Or=-1,Rt=0):(Rt+=Nt,Rt+=Ht);wr+=$t.ascent*_e.finalSize/100,this.canResize&&_e.finalSize>this.minimumFontSize&&vr<wr?(_e.finalSize-=1,_e.finalLineHeight=_e.finalSize*_e.lh/_e.s):(_e.finalText=yr,st=_e.finalText.length,tr=!1)}Rt=-Ht,Nt=0;var Nr=0,Lr;for(it=0;it<st;it+=1)if(ut=!1,Lr=_e.finalText[it],Kt=Lr.charCodeAt(0),Kt===13||Kt===3?(Nr=0,kt.push(Rt),It=Rt>It?Rt:It,Rt=-2*Ht,at="",ut=!0,St+=1):at=Lr,et.chars?(jt=et.getCharData(Lr,$t.fStyle,et.getFontByName(_e.f).fFamily),Nt=ut?0:jt.w*_e.finalSize/100):Nt=et.measureText(at,_e.f,_e.finalSize),Lr===" "?Nr+=Nt+Ht:(Rt+=Nt+Ht+Nr,Nr=0),rt.push({l:Nt,an:Nt,add:bt,n:ut,anIndexes:[],val:at,line:St,animatorJustifyOffset:0}),gt==2){if(bt+=Nt,at===""||at===" "||it===st-1){for((at===""||at===" ")&&(bt-=Nt);wt<=it;)rt[wt].an=bt,rt[wt].ind=ht,rt[wt].extra=Nt,wt+=1;ht+=1,bt=0}}else if(gt==3){if(bt+=Nt,at===""||it===st-1){for(at===""&&(bt-=Nt);wt<=it;)rt[wt].an=bt,rt[wt].ind=ht,rt[wt].extra=Nt,wt+=1;bt=0,ht+=1}}else rt[ht].ind=ht,rt[ht].extra=0,ht+=1;if(_e.l=rt,It=Rt>It?Rt:It,kt.push(Rt),_e.sz)_e.boxWidth=_e.sz[0],_e.justifyOffset=0;else switch(_e.boxWidth=It,_e.j){case 1:_e.justifyOffset=-_e.boxWidth;break;case 2:_e.justifyOffset=-_e.boxWidth/2;break;default:_e.justifyOffset=0}_e.lineWidths=kt;var ar=tt.a,hr,Qt;Mt=ar.length;var ir,Mr,Cr=[];for(Dt=0;Dt<Mt;Dt+=1){for(hr=ar[Dt],hr.a.sc&&(_e.strokeColorAnim=!0),hr.a.sw&&(_e.strokeWidthAnim=!0),(hr.a.fc||hr.a.fh||hr.a.fs||hr.a.fb)&&(_e.fillColorAnim=!0),Mr=0,ir=hr.s.b,it=0;it<st;it+=1)Qt=rt[it],Qt.anIndexes[Dt]=Mr,(ir==1&&Qt.val!==""||ir==2&&Qt.val!==""&&Qt.val!==" "||ir==3&&(Qt.n||Qt.val==" "||it==st-1)||ir==4&&(Qt.n||it==st-1))&&(hr.s.rn===1&&Cr.push(Mr),Mr+=1);tt.a[Dt].s.totalChars=Mr;var rn=-1,fn;if(hr.s.rn===1)for(it=0;it<st;it+=1)Qt=rt[it],rn!=Qt.anIndexes[Dt]&&(rn=Qt.anIndexes[Dt],fn=Cr.splice(Math.floor(Math.random()*Cr.length),1)[0]),Qt.anIndexes[Dt]=fn}_e.yOffset=_e.finalLineHeight||_e.finalSize*1.2,_e.ls=_e.ls||0,_e.ascent=$t.ascent*_e.finalSize/100},TextProperty.prototype.updateDocumentData=function(_e,et){et=et===void 0?this.keysIndex:et;var tt=this.copyData({},this.data.d.k[et].s);tt=this.copyData(tt,_e),this.data.d.k[et].s=tt,this.recalculate(et),this.setCurrentData(tt),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(_e){var et=this.data.d.k[_e].s;et.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(et)},TextProperty.prototype.canResizeFont=function(_e){this.canResize=_e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(_e){this.minimumFontSize=Math.floor(_e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var _e=Math.max,et=Math.min,tt=Math.floor;function rt(st,ut){this._currentTextLength=-1,this.k=!1,this.data=ut,this.elem=st,this.comp=st.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(st),this.s=PropertyFactory.getProp(st,ut.s||{k:0},0,0,this),"e"in ut?this.e=PropertyFactory.getProp(st,ut.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(st,ut.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(st,ut.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(st,ut.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(st,ut.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(st,ut.a,0,.01,this),this.dynamicProperties.length||this.getValue()}rt.prototype={getMult:function(ut){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var ht=0,at=0,gt=1,bt=1;this.ne.v>0?ht=this.ne.v/100:at=-this.ne.v/100,this.xe.v>0?gt=1-this.xe.v/100:bt=1+this.xe.v/100;var wt=BezierFactory.getBezierEasing(ht,at,gt,bt).get,St=0,kt=this.finalS,Rt=this.finalE,It=this.data.sh;if(It===2)Rt===kt?St=ut>=Rt?1:0:St=_e(0,et(.5/(Rt-kt)+(ut-kt)/(Rt-kt),1)),St=wt(St);else if(It===3)Rt===kt?St=ut>=Rt?0:1:St=1-_e(0,et(.5/(Rt-kt)+(ut-kt)/(Rt-kt),1)),St=wt(St);else if(It===4)Rt===kt?St=0:(St=_e(0,et(.5/(Rt-kt)+(ut-kt)/(Rt-kt),1)),St<.5?St*=2:St=1-2*(St-.5)),St=wt(St);else if(It===5){if(Rt===kt)St=0;else{var Dt=Rt-kt;ut=et(_e(0,ut+.5-kt),Rt-kt);var Mt=-Dt/2+ut,$t=Dt/2;St=Math.sqrt(1-Mt*Mt/($t*$t))}St=wt(St)}else It===6?(Rt===kt?St=0:(ut=et(_e(0,ut+.5-kt),Rt-kt),St=(1+Math.cos(Math.PI+Math.PI*2*ut/(Rt-kt)))/2),St=wt(St)):(ut>=tt(kt)&&(ut-kt<0?St=_e(0,et(et(Rt,1)-(kt-ut),1)):St=_e(0,et(Rt-ut,1))),St=wt(St));if(this.sm.v!==100){var jt=this.sm.v*.01;jt===0&&(jt=1e-8);var Nt=.5-jt*.5;St<Nt?St=0:(St=(St-Nt)/jt,St>1&&(St=1))}return St*this.a.v},getValue:function(ut){this.iterateDynamicProperties(),this._mdf=ut||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,ut&&this.data.r===2&&(this.e.v=this._currentTextLength);var ht=this.data.r===2?1:100/this.data.totalChars,at=this.o.v/ht,gt=this.s.v/ht+at,bt=this.e.v/ht+at;if(gt>bt){var wt=gt;gt=bt,bt=wt}this.finalS=gt,this.finalE=bt}},extendPrototype([DynamicPropertyContainer],rt);function it(st,ut,ht){return new rt(st,ut)}return{getTextSelectorProp:it}}();function TextAnimatorDataProperty(_e,et,tt){var rt={propType:!1},it=PropertyFactory.getProp,st=et.a;this.a={r:st.r?it(_e,st.r,0,degToRads,tt):rt,rx:st.rx?it(_e,st.rx,0,degToRads,tt):rt,ry:st.ry?it(_e,st.ry,0,degToRads,tt):rt,sk:st.sk?it(_e,st.sk,0,degToRads,tt):rt,sa:st.sa?it(_e,st.sa,0,degToRads,tt):rt,s:st.s?it(_e,st.s,1,.01,tt):rt,a:st.a?it(_e,st.a,1,0,tt):rt,o:st.o?it(_e,st.o,0,.01,tt):rt,p:st.p?it(_e,st.p,1,0,tt):rt,sw:st.sw?it(_e,st.sw,0,0,tt):rt,sc:st.sc?it(_e,st.sc,1,0,tt):rt,fc:st.fc?it(_e,st.fc,1,0,tt):rt,fh:st.fh?it(_e,st.fh,0,0,tt):rt,fs:st.fs?it(_e,st.fs,0,.01,tt):rt,fb:st.fb?it(_e,st.fb,0,.01,tt):rt,t:st.t?it(_e,st.t,0,0,tt):rt},this.s=TextSelectorProp.getTextSelectorProp(_e,et.s,tt),this.s.t=et.s.t}function TextAnimatorProperty(_e,et,tt){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=_e,this._renderType=et,this._elem=tt,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(tt)}TextAnimatorProperty.prototype.searchProperties=function(){var _e,et=this._textData.a.length,tt,rt=PropertyFactory.getProp;for(_e=0;_e<et;_e+=1)tt=this._textData.a[_e],this._animatorsData[_e]=new TextAnimatorDataProperty(this._elem,tt,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:rt(this._elem,this._textData.p.a,0,0,this),f:rt(this._elem,this._textData.p.f,0,0,this),l:rt(this._elem,this._textData.p.l,0,0,this),r:rt(this._elem,this._textData.p.r,0,0,this),p:rt(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=rt(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(_e,et){if(this.lettersChangedFlag=et,!(!this._mdf&&!this._isFirstFrame&&!et&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var tt=this._moreOptions.alignment.v,rt=this._animatorsData,it=this._textData,st=this.mHelper,ut=this._renderType,ht=this.renderedLetters.length,at,gt,bt,wt,St=_e.l,kt,Rt,It,Dt,Mt,$t,jt,Nt,Ut,Ht,Kt,tr,mr,vr,wr;if(this._hasMaskedPath){if(wr=this._pathData.m,!this._pathData.n||this._pathData._mdf){var yr=wr.v;this._pathData.r.v&&(yr=yr.reverse()),kt={tLength:0,segments:[]},wt=yr._length-1;var Or;for(tr=0,bt=0;bt<wt;bt+=1)Or=bez.buildBezierData(yr.v[bt],yr.v[bt+1],[yr.o[bt][0]-yr.v[bt][0],yr.o[bt][1]-yr.v[bt][1]],[yr.i[bt+1][0]-yr.v[bt+1][0],yr.i[bt+1][1]-yr.v[bt+1][1]]),kt.tLength+=Or.segmentLength,kt.segments.push(Or),tr+=Or.segmentLength;bt=wt,wr.v.c&&(Or=bez.buildBezierData(yr.v[bt],yr.v[0],[yr.o[bt][0]-yr.v[bt][0],yr.o[bt][1]-yr.v[bt][1]],[yr.i[0][0]-yr.v[0][0],yr.i[0][1]-yr.v[0][1]]),kt.tLength+=Or.segmentLength,kt.segments.push(Or),tr+=Or.segmentLength),this._pathData.pi=kt}if(kt=this._pathData.pi,Rt=this._pathData.f.v,jt=0,$t=1,Dt=0,Mt=!0,Ht=kt.segments,Rt<0&&wr.v.c)for(kt.tLength<Math.abs(Rt)&&(Rt=-Math.abs(Rt)%kt.tLength),jt=Ht.length-1,Ut=Ht[jt].points,$t=Ut.length-1;Rt<0;)Rt+=Ut[$t].partialLength,$t-=1,$t<0&&(jt-=1,Ut=Ht[jt].points,$t=Ut.length-1);Ut=Ht[jt].points,Nt=Ut[$t-1],It=Ut[$t],Kt=It.partialLength}wt=St.length,at=0,gt=0;var Nr=_e.finalSize*1.2*.714,Lr=!0,ar,hr,Qt,ir,Mr;ir=rt.length;var Cr,rn=-1,fn,Dn,Yn,eo=Rt,Gn=jt,lo=$t,mn=-1,Hn,Rn,dn,qn,On,xo,Io,$o,Zr="",pn=this.defaultPropsArray,sn;if(_e.j===2||_e.j===1){var wn=0,Xn=0,Fn=_e.j===2?-.5:-1,ro=0,No=!0;for(bt=0;bt<wt;bt+=1)if(St[bt].n){for(wn&&(wn+=Xn);ro<bt;)St[ro].animatorJustifyOffset=wn,ro+=1;wn=0,No=!0}else{for(Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.t.propType&&(No&&_e.j===2&&(Xn+=ar.t.v*Fn),hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),Cr.length?wn+=ar.t.v*Cr[0]*Fn:wn+=ar.t.v*Cr*Fn);No=!1}for(wn&&(wn+=Xn);ro<bt;)St[ro].animatorJustifyOffset=wn,ro+=1}for(bt=0;bt<wt;bt+=1){if(st.reset(),Hn=1,St[bt].n)at=0,gt+=_e.yOffset,gt+=Lr?1:0,Rt=eo,Lr=!1,this._hasMaskedPath&&(jt=Gn,$t=lo,Ut=Ht[jt].points,Nt=Ut[$t-1],It=Ut[$t],Kt=It.partialLength,Dt=0),Zr="",$o="",xo="",sn="",pn=this.defaultPropsArray;else{if(this._hasMaskedPath){if(mn!==St[bt].line){switch(_e.j){case 1:Rt+=tr-_e.lineWidths[St[bt].line];break;case 2:Rt+=(tr-_e.lineWidths[St[bt].line])/2;break}mn=St[bt].line}rn!==St[bt].ind&&(St[rn]&&(Rt+=St[rn].extra),Rt+=St[bt].an/2,rn=St[bt].ind),Rt+=tt[0]*St[bt].an*.005;var co=0;for(Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.p.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),Cr.length?co+=ar.p.v[0]*Cr[0]:co+=ar.p.v[0]*Cr),ar.a.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),Cr.length?co+=ar.a.v[0]*Cr[0]:co+=ar.a.v[0]*Cr);for(Mt=!0,this._pathData.a.v&&(Rt=St[0].an*.5+(tr-this._pathData.f.v-St[0].an*.5-St[St.length-1].an*.5)*rn/(wt-1),Rt+=this._pathData.f.v);Mt;)Dt+Kt>=Rt+co||!Ut?(mr=(Rt+co-Dt)/It.partialLength,Dn=Nt.point[0]+(It.point[0]-Nt.point[0])*mr,Yn=Nt.point[1]+(It.point[1]-Nt.point[1])*mr,st.translate(-tt[0]*St[bt].an*.005,-(tt[1]*Nr)*.01),Mt=!1):Ut&&(Dt+=It.partialLength,$t+=1,$t>=Ut.length&&($t=0,jt+=1,Ht[jt]?Ut=Ht[jt].points:wr.v.c?($t=0,jt=0,Ut=Ht[jt].points):(Dt-=It.partialLength,Ut=null)),Ut&&(Nt=It,It=Ut[$t],Kt=It.partialLength));fn=St[bt].an/2-St[bt].add,st.translate(-fn,0,0)}else fn=St[bt].an/2-St[bt].add,st.translate(-fn,0,0),st.translate(-tt[0]*St[bt].an*.005,-tt[1]*Nr*.01,0);for(Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.t.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),(at!==0||_e.j!==0)&&(this._hasMaskedPath?Cr.length?Rt+=ar.t.v*Cr[0]:Rt+=ar.t.v*Cr:Cr.length?at+=ar.t.v*Cr[0]:at+=ar.t.v*Cr));for(_e.strokeWidthAnim&&(dn=_e.sw||0),_e.strokeColorAnim&&(_e.sc?Rn=[_e.sc[0],_e.sc[1],_e.sc[2]]:Rn=[0,0,0]),_e.fillColorAnim&&_e.fc&&(qn=[_e.fc[0],_e.fc[1],_e.fc[2]]),Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.a.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),Cr.length?st.translate(-ar.a.v[0]*Cr[0],-ar.a.v[1]*Cr[1],ar.a.v[2]*Cr[2]):st.translate(-ar.a.v[0]*Cr,-ar.a.v[1]*Cr,ar.a.v[2]*Cr));for(Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.s.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),Cr.length?st.scale(1+(ar.s.v[0]-1)*Cr[0],1+(ar.s.v[1]-1)*Cr[1],1):st.scale(1+(ar.s.v[0]-1)*Cr,1+(ar.s.v[1]-1)*Cr,1));for(Qt=0;Qt<ir;Qt+=1){if(ar=rt[Qt].a,hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),ar.sk.propType&&(Cr.length?st.skewFromAxis(-ar.sk.v*Cr[0],ar.sa.v*Cr[1]):st.skewFromAxis(-ar.sk.v*Cr,ar.sa.v*Cr)),ar.r.propType&&(Cr.length?st.rotateZ(-ar.r.v*Cr[2]):st.rotateZ(-ar.r.v*Cr)),ar.ry.propType&&(Cr.length?st.rotateY(ar.ry.v*Cr[1]):st.rotateY(ar.ry.v*Cr)),ar.rx.propType&&(Cr.length?st.rotateX(ar.rx.v*Cr[0]):st.rotateX(ar.rx.v*Cr)),ar.o.propType&&(Cr.length?Hn+=(ar.o.v*Cr[0]-Hn)*Cr[0]:Hn+=(ar.o.v*Cr-Hn)*Cr),_e.strokeWidthAnim&&ar.sw.propType&&(Cr.length?dn+=ar.sw.v*Cr[0]:dn+=ar.sw.v*Cr),_e.strokeColorAnim&&ar.sc.propType)for(On=0;On<3;On+=1)Cr.length?Rn[On]+=(ar.sc.v[On]-Rn[On])*Cr[0]:Rn[On]+=(ar.sc.v[On]-Rn[On])*Cr;if(_e.fillColorAnim&&_e.fc){if(ar.fc.propType)for(On=0;On<3;On+=1)Cr.length?qn[On]+=(ar.fc.v[On]-qn[On])*Cr[0]:qn[On]+=(ar.fc.v[On]-qn[On])*Cr;ar.fh.propType&&(Cr.length?qn=addHueToRGB(qn,ar.fh.v*Cr[0]):qn=addHueToRGB(qn,ar.fh.v*Cr)),ar.fs.propType&&(Cr.length?qn=addSaturationToRGB(qn,ar.fs.v*Cr[0]):qn=addSaturationToRGB(qn,ar.fs.v*Cr)),ar.fb.propType&&(Cr.length?qn=addBrightnessToRGB(qn,ar.fb.v*Cr[0]):qn=addBrightnessToRGB(qn,ar.fb.v*Cr))}}for(Qt=0;Qt<ir;Qt+=1)ar=rt[Qt].a,ar.p.propType&&(hr=rt[Qt].s,Cr=hr.getMult(St[bt].anIndexes[Qt],it.a[Qt].s.totalChars),this._hasMaskedPath?Cr.length?st.translate(0,ar.p.v[1]*Cr[0],-ar.p.v[2]*Cr[1]):st.translate(0,ar.p.v[1]*Cr,-ar.p.v[2]*Cr):Cr.length?st.translate(ar.p.v[0]*Cr[0],ar.p.v[1]*Cr[1],-ar.p.v[2]*Cr[2]):st.translate(ar.p.v[0]*Cr,ar.p.v[1]*Cr,-ar.p.v[2]*Cr));if(_e.strokeWidthAnim&&(xo=dn<0?0:dn),_e.strokeColorAnim&&(Io="rgb("+Math.round(Rn[0]*255)+","+Math.round(Rn[1]*255)+","+Math.round(Rn[2]*255)+")"),_e.fillColorAnim&&_e.fc&&($o="rgb("+Math.round(qn[0]*255)+","+Math.round(qn[1]*255)+","+Math.round(qn[2]*255)+")"),this._hasMaskedPath){if(st.translate(0,-_e.ls),st.translate(0,tt[1]*Nr*.01+gt,0),this._pathData.p.v){vr=(It.point[1]-Nt.point[1])/(It.point[0]-Nt.point[0]);var Ao=Math.atan(vr)*180/Math.PI;It.point[0]<Nt.point[0]&&(Ao+=180),st.rotate(-Ao*Math.PI/180)}st.translate(Dn,Yn,0),Rt-=tt[0]*St[bt].an*.005,St[bt+1]&&rn!==St[bt+1].ind&&(Rt+=St[bt].an/2,Rt+=_e.tr*.001*_e.finalSize)}else{switch(st.translate(at,gt,0),_e.ps&&st.translate(_e.ps[0],_e.ps[1]+_e.ascent,0),_e.j){case 1:st.translate(St[bt].animatorJustifyOffset+_e.justifyOffset+(_e.boxWidth-_e.lineWidths[St[bt].line]),0,0);break;case 2:st.translate(St[bt].animatorJustifyOffset+_e.justifyOffset+(_e.boxWidth-_e.lineWidths[St[bt].line])/2,0,0);break}st.translate(0,-_e.ls),st.translate(fn,0,0),st.translate(tt[0]*St[bt].an*.005,tt[1]*Nr*.01,0),at+=St[bt].l+_e.tr*.001*_e.finalSize}ut==="html"?Zr=st.toCSS():ut==="svg"?Zr=st.to2dCSS():pn=[st.props[0],st.props[1],st.props[2],st.props[3],st.props[4],st.props[5],st.props[6],st.props[7],st.props[8],st.props[9],st.props[10],st.props[11],st.props[12],st.props[13],st.props[14],st.props[15]],sn=Hn}ht<=bt?(Mr=new LetterProps(sn,xo,Io,$o,Zr,pn),this.renderedLetters.push(Mr),ht+=1,this.lettersChangedFlag=!0):(Mr=this.renderedLetters[bt],this.lettersChangedFlag=Mr.update(sn,xo,Io,$o,Zr,pn)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(_e,et,tt){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(_e,et,tt),this.textProperty=new TextProperty(this,_e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(_e.t,this.renderType,this),this.initTransform(_e,et,tt),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(_e){this._mdf=!1,this.prepareRenderableFrame(_e),this.prepareProperties(_e,this.isInRange)},ITextElement.prototype.createPathShape=function(_e,et){var tt,rt=et.length,it,st="";for(tt=0;tt<rt;tt+=1)et[tt].ty==="sh"&&(it=et[tt].ks.k,st+=buildShapeString(it,it.i.length,!0,_e));return st},ITextElement.prototype.updateDocumentData=function(_e,et){this.textProperty.updateDocumentData(_e,et)},ITextElement.prototype.canResizeFont=function(_e){this.textProperty.canResizeFont(_e)},ITextElement.prototype.setMinimumFontSize=function(_e){this.textProperty.setMinimumFontSize(_e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(_e,et,tt,rt,it){switch(_e.ps&&et.translate(_e.ps[0],_e.ps[1]+_e.ascent,0),et.translate(0,-_e.ls,0),_e.j){case 1:et.translate(_e.justifyOffset+(_e.boxWidth-_e.lineWidths[tt]),0,0);break;case 2:et.translate(_e.justifyOffset+(_e.boxWidth-_e.lineWidths[tt])/2,0,0);break}et.translate(rt,it,0)},ITextElement.prototype.buildColor=function(_e){return"rgb("+Math.round(_e[0]*255)+","+Math.round(_e[1]*255)+","+Math.round(_e[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(_e,et,tt){this.textSpans=[],this.renderType="svg",this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(_e){for(var et=0,tt=_e.length,rt=[],it="";et<tt;)_e[et]==="\r"||_e[et]===""?(rt.push(it),it=""):it+=_e[et],et+=1;return rt.push(it),rt},SVGTextLottieElement.prototype.buildShapeData=function(_e,et){if(_e.shapes&&_e.shapes.length){var tt=_e.shapes[0];if(tt.it){var rt=tt.it[tt.it.length-1];rt.s&&(rt.s.k[0]=et,rt.s.k[1]=et)}}return _e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var _e,et,tt=this.textProperty.currentData;this.renderedLetters=createSizedArray(tt?tt.l.length:0),tt.fc?this.layerElement.setAttribute("fill",this.buildColor(tt.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),tt.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(tt.sc)),this.layerElement.setAttribute("stroke-width",tt.sw)),this.layerElement.setAttribute("font-size",tt.finalSize);var rt=this.globalData.fontManager.getFontByName(tt.f);if(rt.fClass)this.layerElement.setAttribute("class",rt.fClass);else{this.layerElement.setAttribute("font-family",rt.fFamily);var it=tt.fWeight,st=tt.fStyle;this.layerElement.setAttribute("font-style",st),this.layerElement.setAttribute("font-weight",it)}this.layerElement.setAttribute("aria-label",tt.t);var ut=tt.l||[],ht=!!this.globalData.fontManager.chars;et=ut.length;var at,gt=this.mHelper,bt="",wt=this.data.singleShape,St=0,kt=0,Rt=!0,It=tt.tr*.001*tt.finalSize;if(wt&&!ht&&!tt.sz){var Dt=this.textContainer,Mt="start";switch(tt.j){case 1:Mt="end";break;case 2:Mt="middle";break;default:Mt="start";break}Dt.setAttribute("text-anchor",Mt),Dt.setAttribute("letter-spacing",It);var $t=this.buildTextContents(tt.finalText);for(et=$t.length,kt=tt.ps?tt.ps[1]+tt.ascent:0,_e=0;_e<et;_e+=1)at=this.textSpans[_e].span||createNS("tspan"),at.textContent=$t[_e],at.setAttribute("x",0),at.setAttribute("y",kt),at.style.display="inherit",Dt.appendChild(at),this.textSpans[_e]||(this.textSpans[_e]={span:null,glyph:null}),this.textSpans[_e].span=at,kt+=tt.finalLineHeight;this.layerElement.appendChild(Dt)}else{var jt=this.textSpans.length,Nt;for(_e=0;_e<et;_e+=1){if(this.textSpans[_e]||(this.textSpans[_e]={span:null,childSpan:null,glyph:null}),!ht||!wt||_e===0){if(at=jt>_e?this.textSpans[_e].span:createNS(ht?"g":"text"),jt<=_e){if(at.setAttribute("stroke-linecap","butt"),at.setAttribute("stroke-linejoin","round"),at.setAttribute("stroke-miterlimit","4"),this.textSpans[_e].span=at,ht){var Ut=createNS("g");at.appendChild(Ut),this.textSpans[_e].childSpan=Ut}this.textSpans[_e].span=at,this.layerElement.appendChild(at)}at.style.display="inherit"}if(gt.reset(),wt&&(ut[_e].n&&(St=-It,kt+=tt.yOffset,kt+=Rt?1:0,Rt=!1),this.applyTextPropertiesToMatrix(tt,gt,ut[_e].line,St,kt),St+=ut[_e].l||0,St+=It),ht){Nt=this.globalData.fontManager.getCharData(tt.finalText[_e],rt.fStyle,this.globalData.fontManager.getFontByName(tt.f).fFamily);var Ht;if(Nt.t===1)Ht=new SVGCompElement(Nt.data,this.globalData,this);else{var Kt=emptyShapeData;Nt.data&&Nt.data.shapes&&(Kt=this.buildShapeData(Nt.data,tt.finalSize)),Ht=new SVGShapeElement(Kt,this.globalData,this)}if(this.textSpans[_e].glyph){var tr=this.textSpans[_e].glyph;this.textSpans[_e].childSpan.removeChild(tr.layerElement),tr.destroy()}this.textSpans[_e].glyph=Ht,Ht._debug=!0,Ht.prepareFrame(0),Ht.renderFrame(),this.textSpans[_e].childSpan.appendChild(Ht.layerElement),Nt.t===1&&this.textSpans[_e].childSpan.setAttribute("transform","scale("+tt.finalSize/100+","+tt.finalSize/100+")")}else wt&&at.setAttribute("transform","translate("+gt.props[12]+","+gt.props[13]+")"),at.textContent=ut[_e].val,at.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}wt&&at&&at.setAttribute("d",bt)}for(;_e<this.textSpans.length;)this.textSpans[_e].span.style.display="none",_e+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var _e=this.layerElement.getBBox();this.bbox={top:_e.y,left:_e.x,width:_e.width,height:_e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var _e,et=this.textSpans.length,tt;for(this.renderedFrame=this.comp.renderedFrame,_e=0;_e<et;_e+=1)tt=this.textSpans[_e].glyph,tt&&(tt.prepareFrame(this.comp.renderedFrame-this.data.st),tt._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var _e,et,tt=this.textAnimator.renderedLetters,rt=this.textProperty.currentData.l;et=rt.length;var it,st,ut;for(_e=0;_e<et;_e+=1)rt[_e].n||(it=tt[_e],st=this.textSpans[_e].span,ut=this.textSpans[_e].glyph,ut&&ut.renderFrame(),it._mdf.m&&st.setAttribute("transform",it.m),it._mdf.o&&st.setAttribute("opacity",it.o),it._mdf.sw&&st.setAttribute("stroke-width",it.sw),it._mdf.sc&&st.setAttribute("stroke",it.sc),it._mdf.fc&&st.setAttribute("fill",it.fc))}};function ISolidElement(_e,et,tt){this.initElement(_e,et,tt)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var _e=createNS("rect");_e.setAttribute("width",this.data.sw),_e.setAttribute("height",this.data.sh),_e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(_e)};function NullElement(_e,et,tt){this.initFrame(),this.initBaseData(_e,et,tt),this.initFrame(),this.initTransform(_e,et,tt),this.initHierarchy()}NullElement.prototype.prepareFrame=function(_e){this.prepareProperties(_e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(_e){return new NullElement(_e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(_e){return new SVGShapeElement(_e,this.globalData,this)},SVGRendererBase.prototype.createText=function(_e){return new SVGTextLottieElement(_e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(_e){return new IImageElement(_e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(_e){return new ISolidElement(_e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(_e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+_e.w+" "+_e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",_e.w),this.svgElement.setAttribute("height",_e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var et=this.globalData.defs;this.setupGlobalData(_e,et),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=_e;var tt=createNS("clipPath"),rt=createNS("rect");rt.setAttribute("width",_e.w),rt.setAttribute("height",_e.h),rt.setAttribute("x",0),rt.setAttribute("y",0);var it=createElementID();tt.setAttribute("id",it),tt.appendChild(rt),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+it+")"),et.appendChild(tt),this.layers=_e.layers,this.elements=createSizedArray(_e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var _e,et=this.layers?this.layers.length:0;for(_e=0;_e<et;_e+=1)this.elements[_e]&&this.elements[_e].destroy&&this.elements[_e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(_e){var et=0,tt=this.layers.length;for(et=0;et<tt;et+=1)if(this.layers[et].ind===_e)return et;return-1},SVGRendererBase.prototype.buildItem=function(_e){var et=this.elements;if(!(et[_e]||this.layers[_e].ty===99)){et[_e]=!0;var tt=this.createItem(this.layers[_e]);if(et[_e]=tt,getExpressionsPlugin()&&(this.layers[_e].ty===0&&this.globalData.projectInterface.registerComposition(tt),tt.initExpressions()),this.appendElementInPos(tt,_e),this.layers[_e].tt){var rt="tp"in this.layers[_e]?this.findIndexByInd(this.layers[_e].tp):_e-1;if(rt===-1)return;if(!this.elements[rt]||this.elements[rt]===!0)this.buildItem(rt),this.addPendingElement(tt);else{var it=et[rt],st=it.getMatte(this.layers[_e].tt);tt.setMatte(st)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _e=this.pendingElements.pop();if(_e.checkParenting(),_e.data.tt)for(var et=0,tt=this.elements.length;et<tt;){if(this.elements[et]===_e){var rt="tp"in _e.data?this.findIndexByInd(_e.data.tp):et-1,it=this.elements[rt],st=it.getMatte(this.layers[et].tt);_e.setMatte(st);break}et+=1}}},SVGRendererBase.prototype.renderFrame=function(_e){if(!(this.renderedFrame===_e||this.destroyed)){_e===null?_e=this.renderedFrame:this.renderedFrame=_e,this.globalData.frameNum=_e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=_e,this.globalData._mdf=!1;var et,tt=this.layers.length;for(this.completeLayers||this.checkLayers(_e),et=tt-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].prepareFrame(_e-this.layers[et].st);if(this.globalData._mdf)for(et=0;et<tt;et+=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(_e,et){var tt=_e.getBaseElement();if(tt){for(var rt=0,it;rt<et;)this.elements[rt]&&this.elements[rt]!==!0&&this.elements[rt].getBaseElement()&&(it=this.elements[rt].getBaseElement()),rt+=1;it?this.layerElement.insertBefore(tt,it):this.layerElement.appendChild(tt)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(_e,et,tt){this.initFrame(),this.initBaseData(_e,et,tt),this.initTransform(_e,et,tt),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!et.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(_e){if(this._mdf=!1,this.prepareRenderableFrame(_e),this.prepareProperties(_e,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=_e/this.data.sr;else{var et=this.tm.v;et===this.data.op&&(et=this.data.op-1),this.renderedFrame=et}var tt,rt=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),tt=rt-1;tt>=0;tt-=1)(this.completeLayers||this.elements[tt])&&(this.elements[tt].prepareFrame(this.renderedFrame-this.layers[tt].st),this.elements[tt]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var _e,et=this.layers.length;for(_e=0;_e<et;_e+=1)(this.completeLayers||this.elements[_e])&&this.elements[_e].renderFrame()},ICompElement.prototype.setElements=function(_e){this.elements=_e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var _e,et=this.layers.length;for(_e=0;_e<et;_e+=1)this.elements[_e]&&this.elements[_e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(_e,et,tt){this.layers=_e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_e,et,tt),this.tm=_e.tm?PropertyFactory.getProp(this,_e.tm,0,et.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(_e){return new SVGCompElement(_e,this.globalData,this)};function SVGRenderer(_e,et){this.animationItem=_e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var tt="";if(et&&et.title){var rt=createNS("title"),it=createElementID();rt.setAttribute("id",it),rt.textContent=et.title,this.svgElement.appendChild(rt),tt+=it}if(et&&et.description){var st=createNS("desc"),ut=createElementID();st.setAttribute("id",ut),st.textContent=et.description,this.svgElement.appendChild(st),tt+=" "+ut}tt&&this.svgElement.setAttribute("aria-labelledby",tt);var ht=createNS("defs");this.svgElement.appendChild(ht);var at=createNS("g");this.svgElement.appendChild(at),this.layerElement=at,this.renderConfig={preserveAspectRatio:et&&et.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:et&&et.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:et&&et.contentVisibility||"visible",progressiveLoad:et&&et.progressiveLoad||!1,hideOnTransparent:!(et&&et.hideOnTransparent===!1),viewBoxOnly:et&&et.viewBoxOnly||!1,viewBoxSize:et&&et.viewBoxSize||!1,className:et&&et.className||"",id:et&&et.id||"",focusable:et&&et.focusable,filterSize:{width:et&&et.filterSize&&et.filterSize.width||"100%",height:et&&et.filterSize&&et.filterSize.height||"100%",x:et&&et.filterSize&&et.filterSize.x||"0%",y:et&&et.filterSize&&et.filterSize.y||"0%"},width:et&&et.width,height:et&&et.height,runExpressions:!et||et.runExpressions===void 0||et.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:ht,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(_e){return new SVGCompElement(_e,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(et){var tt,rt=et.length,it="_";for(tt=0;tt<rt;tt+=1)it+=et[tt].transform.key+"_";var st=this.sequences[it];return st||(st={transforms:[].concat(et),finalTransform:new Matrix,_mdf:!1},this.sequences[it]=st,this.sequenceList.push(st)),st},processSequence:function(et,tt){for(var rt=0,it=et.transforms.length,st=tt;rt<it&&!tt;){if(et.transforms[rt].transform.mProps._mdf){st=!0;break}rt+=1}if(st)for(et.finalTransform.reset(),rt=it-1;rt>=0;rt-=1)et.finalTransform.multiply(et.transforms[rt].transform.mProps.v);et._mdf=st},processSequences:function(et){var tt,rt=this.sequenceList.length;for(tt=0;tt<rt;tt+=1)this.processSequence(this.sequenceList[tt],et)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var et="__lottie_element_luma_buffer",tt=null,rt=null,it=null;function st(){var at=createNS("svg"),gt=createNS("filter"),bt=createNS("feColorMatrix");return gt.setAttribute("id",et),bt.setAttribute("type","matrix"),bt.setAttribute("color-interpolation-filters","sRGB"),bt.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),gt.appendChild(bt),at.appendChild(gt),at.setAttribute("id",et+"_svg"),featureSupport.svgLumaHidden&&(at.style.display="none"),at}function ut(){tt||(it=st(),document.body.appendChild(it),tt=createTag("canvas"),rt=tt.getContext("2d"),rt.filter="url(#"+et+")",rt.fillStyle="rgba(0,0,0,0)",rt.fillRect(0,0,1,1))}function ht(at){return tt||ut(),tt.width=at.width,tt.height=at.height,rt.filter="url(#"+et+")",tt}return{load:ut,get:ht}};function createCanvas(_e,et){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(_e,et);var tt=createTag("canvas");return tt.width=_e,tt.height=et,tt}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(_e){var et,tt=_e.data.ef?_e.data.ef.length:0;this.filters=[];var rt;for(et=0;et<tt;et+=1){rt=null;var it=_e.data.ef[et].ty;if(registeredEffects[it]){var st=registeredEffects[it].effect;rt=new st(_e.effectsManager.effectElements[et],_e)}rt&&this.filters.push(rt)}this.filters.length&&_e.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(_e){var et,tt=this.filters.length;for(et=0;et<tt;et+=1)this.filters[et].renderFrame(_e)},CVEffects.prototype.getEffects=function(_e){var et,tt=this.filters.length,rt=[];for(et=0;et<tt;et+=1)this.filters[et].type===_e&&rt.push(this.filters[et]);return rt};function registerEffect(_e,et){registeredEffects[_e]={effect:et}}function CVMaskElement(_e,et){this.data=_e,this.element=et,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var tt,rt=this.masksProperties.length,it=!1;for(tt=0;tt<rt;tt+=1)this.masksProperties[tt].mode!=="n"&&(it=!0),this.viewData[tt]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[tt],3);this.hasMasks=it,it&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var _e=this.element.finalTransform.mat,et=this.element.canvasContext,tt,rt=this.masksProperties.length,it,st,ut;for(et.beginPath(),tt=0;tt<rt;tt+=1)if(this.masksProperties[tt].mode!=="n"){this.masksProperties[tt].inv&&(et.moveTo(0,0),et.lineTo(this.element.globalData.compSize.w,0),et.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),et.lineTo(0,this.element.globalData.compSize.h),et.lineTo(0,0)),ut=this.viewData[tt].v,it=_e.applyToPointArray(ut.v[0][0],ut.v[0][1],0),et.moveTo(it[0],it[1]);var ht,at=ut._length;for(ht=1;ht<at;ht+=1)st=_e.applyToTriplePoints(ut.o[ht-1],ut.i[ht],ut.v[ht]),et.bezierCurveTo(st[0],st[1],st[2],st[3],st[4],st[5]);st=_e.applyToTriplePoints(ut.o[ht-1],ut.i[0],ut.v[0]),et.bezierCurveTo(st[0],st[1],st[2],st[3],st[4],st[5])}this.element.globalData.renderer.save(!0),et.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var et=this.globalData.canvasContext,tt=assetLoader.createCanvas(et.canvas.width,et.canvas.height);this.buffers.push(tt);var rt=assetLoader.createCanvas(et.canvas.width,et.canvas.height);this.buffers.push(rt),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var et=this.globalData;if(et.blendMode!==this.data.bm){et.blendMode=this.data.bm;var tt=getBlendMode(this.data.bm);et.canvasContext.globalCompositeOperation=tt}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(et){et.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var et=this.buffers[0],tt=et.getContext("2d");this.clearCanvas(tt),tt.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var et=this.buffers[1],tt=et.getContext("2d");this.clearCanvas(tt),tt.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var rt=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(rt.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var it=assetLoader.getLumaCanvas(this.canvasContext.canvas),st=it.getContext("2d");st.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(it,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(et,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(et){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!et)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var tt=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(tt),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(tt),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(_e,et,tt,rt){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var it=4;et.ty==="rc"?it=5:et.ty==="el"?it=6:et.ty==="sr"&&(it=7),this.sh=ShapePropertyFactory.getShapeProp(_e,et,it,_e);var st,ut=tt.length,ht;for(st=0;st<ut;st+=1)tt[st].closed||(ht={transforms:rt.addTransformSequence(tt[st].transforms),trNodes:[]},this.styledShapes.push(ht),tt[st].elements.push(ht))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(_e,et,tt){this.shapes=[],this.shapesData=_e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(_e,et){var tt={data:_e,type:_e.ty,preTransforms:this.transformsManager.addTransformSequence(et),transforms:[],elements:[],closed:_e.hd===!0},rt={};if(_e.ty==="fl"||_e.ty==="st"?(rt.c=PropertyFactory.getProp(this,_e.c,1,255,this),rt.c.k||(tt.co="rgb("+bmFloor(rt.c.v[0])+","+bmFloor(rt.c.v[1])+","+bmFloor(rt.c.v[2])+")")):(_e.ty==="gf"||_e.ty==="gs")&&(rt.s=PropertyFactory.getProp(this,_e.s,1,null,this),rt.e=PropertyFactory.getProp(this,_e.e,1,null,this),rt.h=PropertyFactory.getProp(this,_e.h||{k:0},0,.01,this),rt.a=PropertyFactory.getProp(this,_e.a||{k:0},0,degToRads,this),rt.g=new GradientProperty(this,_e.g,this)),rt.o=PropertyFactory.getProp(this,_e.o,0,.01,this),_e.ty==="st"||_e.ty==="gs"){if(tt.lc=lineCapEnum[_e.lc||2],tt.lj=lineJoinEnum[_e.lj||2],_e.lj==1&&(tt.ml=_e.ml),rt.w=PropertyFactory.getProp(this,_e.w,0,null,this),rt.w.k||(tt.wi=rt.w.v),_e.d){var it=new DashProperty(this,_e.d,"canvas",this);rt.d=it,rt.d.k||(tt.da=rt.d.dashArray,tt.do=rt.d.dashoffset[0])}}else tt.r=_e.r===2?"evenodd":"nonzero";return this.stylesList.push(tt),rt.style=tt,rt},CVShapeElement.prototype.createGroupElement=function(){var _e={it:[],prevViewData:[]};return _e},CVShapeElement.prototype.createTransformElement=function(_e){var et={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,_e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,_e,this)}};return et},CVShapeElement.prototype.createShapeElement=function(_e){var et=new CVShapeData(this,_e,this.stylesList,this.transformsManager);return this.shapes.push(et),this.addShapeToModifiers(et),et},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var _e,et=this.itemsData.length;for(_e=0;_e<et;_e+=1)this.prevViewData[_e]=this.itemsData[_e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),et=this.dynamicProperties.length,_e=0;_e<et;_e+=1)this.dynamicProperties[_e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(_e){var et,tt=this.stylesList.length;for(et=0;et<tt;et+=1)this.stylesList[et].closed||this.stylesList[et].transforms.push(_e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var _e,et=this.stylesList.length;for(_e=0;_e<et;_e+=1)this.stylesList[_e].closed||this.stylesList[_e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(_e){var et,tt=_e.length;for(et=0;et<tt;et+=1)_e[et].closed=!0},CVShapeElement.prototype.searchShapes=function(_e,et,tt,rt,it){var st,ut=_e.length-1,ht,at,gt=[],bt=[],wt,St,kt,Rt=[].concat(it);for(st=ut;st>=0;st-=1){if(wt=this.searchProcessedElement(_e[st]),wt?et[st]=tt[wt-1]:_e[st]._shouldRender=rt,_e[st].ty==="fl"||_e[st].ty==="st"||_e[st].ty==="gf"||_e[st].ty==="gs")wt?et[st].style.closed=!1:et[st]=this.createStyleElement(_e[st],Rt),gt.push(et[st].style);else if(_e[st].ty==="gr"){if(!wt)et[st]=this.createGroupElement(_e[st]);else for(at=et[st].it.length,ht=0;ht<at;ht+=1)et[st].prevViewData[ht]=et[st].it[ht];this.searchShapes(_e[st].it,et[st].it,et[st].prevViewData,rt,Rt)}else _e[st].ty==="tr"?(wt||(kt=this.createTransformElement(_e[st]),et[st]=kt),Rt.push(et[st]),this.addTransformToStyleList(et[st])):_e[st].ty==="sh"||_e[st].ty==="rc"||_e[st].ty==="el"||_e[st].ty==="sr"?wt||(et[st]=this.createShapeElement(_e[st])):_e[st].ty==="tm"||_e[st].ty==="rd"||_e[st].ty==="pb"||_e[st].ty==="zz"||_e[st].ty==="op"?(wt?(St=et[st],St.closed=!1):(St=ShapeModifiers.getModifier(_e[st].ty),St.init(this,_e[st]),et[st]=St,this.shapeModifiers.push(St)),bt.push(St)):_e[st].ty==="rp"&&(wt?(St=et[st],St.closed=!0):(St=ShapeModifiers.getModifier(_e[st].ty),et[st]=St,St.init(this,_e,st,et),this.shapeModifiers.push(St),rt=!1),bt.push(St));this.addProcessedElement(_e[st],st+1)}for(this.removeTransformFromStyleList(),this.closeStyles(gt),ut=bt.length,st=0;st<ut;st+=1)bt[st].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(_e,et){(_e._opMdf||et.op._mdf||this._isFirstFrame)&&(et.opacity=_e.opacity,et.opacity*=et.op.v,et._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var _e,et=this.stylesList.length,tt,rt,it,st,ut,ht,at=this.globalData.renderer,gt=this.globalData.canvasContext,bt,wt;for(_e=0;_e<et;_e+=1)if(wt=this.stylesList[_e],bt=wt.type,!((bt==="st"||bt==="gs")&&wt.wi===0||!wt.data._shouldRender||wt.coOp===0||this.globalData.currentGlobalAlpha===0)){for(at.save(),ut=wt.elements,bt==="st"||bt==="gs"?(at.ctxStrokeStyle(bt==="st"?wt.co:wt.grd),at.ctxLineWidth(wt.wi),at.ctxLineCap(wt.lc),at.ctxLineJoin(wt.lj),at.ctxMiterLimit(wt.ml||0)):at.ctxFillStyle(bt==="fl"?wt.co:wt.grd),at.ctxOpacity(wt.coOp),bt!=="st"&&bt!=="gs"&&gt.beginPath(),at.ctxTransform(wt.preTransforms.finalTransform.props),rt=ut.length,tt=0;tt<rt;tt+=1){for((bt==="st"||bt==="gs")&&(gt.beginPath(),wt.da&&(gt.setLineDash(wt.da),gt.lineDashOffset=wt.do)),ht=ut[tt].trNodes,st=ht.length,it=0;it<st;it+=1)ht[it].t==="m"?gt.moveTo(ht[it].p[0],ht[it].p[1]):ht[it].t==="c"?gt.bezierCurveTo(ht[it].pts[0],ht[it].pts[1],ht[it].pts[2],ht[it].pts[3],ht[it].pts[4],ht[it].pts[5]):gt.closePath();(bt==="st"||bt==="gs")&&(at.ctxStroke(),wt.da&&gt.setLineDash(this.dashResetter))}bt!=="st"&&bt!=="gs"&&this.globalData.renderer.ctxFill(wt.r),at.restore()}},CVShapeElement.prototype.renderShape=function(_e,et,tt,rt){var it,st=et.length-1,ut;for(ut=_e,it=st;it>=0;it-=1)et[it].ty==="tr"?(ut=tt[it].transform,this.renderShapeTransform(_e,ut)):et[it].ty==="sh"||et[it].ty==="el"||et[it].ty==="rc"||et[it].ty==="sr"?this.renderPath(et[it],tt[it]):et[it].ty==="fl"?this.renderFill(et[it],tt[it],ut):et[it].ty==="st"?this.renderStroke(et[it],tt[it],ut):et[it].ty==="gf"||et[it].ty==="gs"?this.renderGradientFill(et[it],tt[it],ut):et[it].ty==="gr"?this.renderShape(ut,et[it].it,tt[it].it):et[it].ty;rt&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(_e,et){if(this._isFirstFrame||et._mdf||_e.transforms._mdf){var tt=_e.trNodes,rt=et.paths,it,st,ut,ht=rt._length;tt.length=0;var at=_e.transforms.finalTransform;for(ut=0;ut<ht;ut+=1){var gt=rt.shapes[ut];if(gt&&gt.v){for(st=gt._length,it=1;it<st;it+=1)it===1&&tt.push({t:"m",p:at.applyToPointArray(gt.v[0][0],gt.v[0][1],0)}),tt.push({t:"c",pts:at.applyToTriplePoints(gt.o[it-1],gt.i[it],gt.v[it])});st===1&&tt.push({t:"m",p:at.applyToPointArray(gt.v[0][0],gt.v[0][1],0)}),gt.c&&st&&(tt.push({t:"c",pts:at.applyToTriplePoints(gt.o[it-1],gt.i[0],gt.v[0])}),tt.push({t:"z"}))}}_e.trNodes=tt}},CVShapeElement.prototype.renderPath=function(_e,et){if(_e.hd!==!0&&_e._shouldRender){var tt,rt=et.styledShapes.length;for(tt=0;tt<rt;tt+=1)this.renderStyledShape(et.styledShapes[tt],et.sh)}},CVShapeElement.prototype.renderFill=function(_e,et,tt){var rt=et.style;(et.c._mdf||this._isFirstFrame)&&(rt.co="rgb("+bmFloor(et.c.v[0])+","+bmFloor(et.c.v[1])+","+bmFloor(et.c.v[2])+")"),(et.o._mdf||tt._opMdf||this._isFirstFrame)&&(rt.coOp=et.o.v*tt.opacity)},CVShapeElement.prototype.renderGradientFill=function(_e,et,tt){var rt=et.style,it;if(!rt.grd||et.g._mdf||et.s._mdf||et.e._mdf||_e.t!==1&&(et.h._mdf||et.a._mdf)){var st=this.globalData.canvasContext,ut=et.s.v,ht=et.e.v;if(_e.t===1)it=st.createLinearGradient(ut[0],ut[1],ht[0],ht[1]);else{var at=Math.sqrt(Math.pow(ut[0]-ht[0],2)+Math.pow(ut[1]-ht[1],2)),gt=Math.atan2(ht[1]-ut[1],ht[0]-ut[0]),bt=et.h.v;bt>=1?bt=.99:bt<=-1&&(bt=-.99);var wt=at*bt,St=Math.cos(gt+et.a.v)*wt+ut[0],kt=Math.sin(gt+et.a.v)*wt+ut[1];it=st.createRadialGradient(St,kt,0,ut[0],ut[1],at)}var Rt,It=_e.g.p,Dt=et.g.c,Mt=1;for(Rt=0;Rt<It;Rt+=1)et.g._hasOpacity&&et.g._collapsable&&(Mt=et.g.o[Rt*2+1]),it.addColorStop(Dt[Rt*4]/100,"rgba("+Dt[Rt*4+1]+","+Dt[Rt*4+2]+","+Dt[Rt*4+3]+","+Mt+")");rt.grd=it}rt.coOp=et.o.v*tt.opacity},CVShapeElement.prototype.renderStroke=function(_e,et,tt){var rt=et.style,it=et.d;it&&(it._mdf||this._isFirstFrame)&&(rt.da=it.dashArray,rt.do=it.dashoffset[0]),(et.c._mdf||this._isFirstFrame)&&(rt.co="rgb("+bmFloor(et.c.v[0])+","+bmFloor(et.c.v[1])+","+bmFloor(et.c.v[2])+")"),(et.o._mdf||tt._opMdf||this._isFirstFrame)&&(rt.coOp=et.o.v*tt.opacity),(et.w._mdf||this._isFirstFrame)&&(rt.wi=et.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(_e,et,tt){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var _e=this.textProperty.currentData;this.renderedLetters=createSizedArray(_e.l?_e.l.length:0);var et=!1;_e.fc?(et=!0,this.values.fill=this.buildColor(_e.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=et;var tt=!1;_e.sc&&(tt=!0,this.values.stroke=this.buildColor(_e.sc),this.values.sWidth=_e.sw);var rt=this.globalData.fontManager.getFontByName(_e.f),it,st,ut=_e.l,ht=this.mHelper;this.stroke=tt,this.values.fValue=_e.finalSize+"px "+this.globalData.fontManager.getFontByName(_e.f).fFamily,st=_e.finalText.length;var at,gt,bt,wt,St,kt,Rt,It,Dt,Mt,$t=this.data.singleShape,jt=_e.tr*.001*_e.finalSize,Nt=0,Ut=0,Ht=!0,Kt=0;for(it=0;it<st;it+=1){at=this.globalData.fontManager.getCharData(_e.finalText[it],rt.fStyle,this.globalData.fontManager.getFontByName(_e.f).fFamily),gt=at&&at.data||{},ht.reset(),$t&&ut[it].n&&(Nt=-jt,Ut+=_e.yOffset,Ut+=Ht?1:0,Ht=!1),St=gt.shapes?gt.shapes[0].it:[],Rt=St.length,ht.scale(_e.finalSize/100,_e.finalSize/100),$t&&this.applyTextPropertiesToMatrix(_e,ht,ut[it].line,Nt,Ut),Dt=createSizedArray(Rt-1);var tr=0;for(kt=0;kt<Rt;kt+=1)if(St[kt].ty==="sh"){for(wt=St[kt].ks.k.i.length,It=St[kt].ks.k,Mt=[],bt=1;bt<wt;bt+=1)bt===1&&Mt.push(ht.applyToX(It.v[0][0],It.v[0][1],0),ht.applyToY(It.v[0][0],It.v[0][1],0)),Mt.push(ht.applyToX(It.o[bt-1][0],It.o[bt-1][1],0),ht.applyToY(It.o[bt-1][0],It.o[bt-1][1],0),ht.applyToX(It.i[bt][0],It.i[bt][1],0),ht.applyToY(It.i[bt][0],It.i[bt][1],0),ht.applyToX(It.v[bt][0],It.v[bt][1],0),ht.applyToY(It.v[bt][0],It.v[bt][1],0));Mt.push(ht.applyToX(It.o[bt-1][0],It.o[bt-1][1],0),ht.applyToY(It.o[bt-1][0],It.o[bt-1][1],0),ht.applyToX(It.i[0][0],It.i[0][1],0),ht.applyToY(It.i[0][0],It.i[0][1],0),ht.applyToX(It.v[0][0],It.v[0][1],0),ht.applyToY(It.v[0][0],It.v[0][1],0)),Dt[tr]=Mt,tr+=1}$t&&(Nt+=ut[it].l,Nt+=jt),this.textSpans[Kt]?this.textSpans[Kt].elem=Dt:this.textSpans[Kt]={elem:Dt},Kt+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var _e=this.canvasContext;_e.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var et,tt,rt,it,st,ut,ht=this.textAnimator.renderedLetters,at=this.textProperty.currentData.l;tt=at.length;var gt,bt=null,wt=null,St=null,kt,Rt,It=this.globalData.renderer;for(et=0;et<tt;et+=1)if(!at[et].n){if(gt=ht[et],gt&&(It.save(),It.ctxTransform(gt.p),It.ctxOpacity(gt.o)),this.fill){for(gt&&gt.fc?bt!==gt.fc&&(It.ctxFillStyle(gt.fc),bt=gt.fc):bt!==this.values.fill&&(bt=this.values.fill,It.ctxFillStyle(this.values.fill)),kt=this.textSpans[et].elem,it=kt.length,this.globalData.canvasContext.beginPath(),rt=0;rt<it;rt+=1)for(Rt=kt[rt],ut=Rt.length,this.globalData.canvasContext.moveTo(Rt[0],Rt[1]),st=2;st<ut;st+=6)this.globalData.canvasContext.bezierCurveTo(Rt[st],Rt[st+1],Rt[st+2],Rt[st+3],Rt[st+4],Rt[st+5]);this.globalData.canvasContext.closePath(),It.ctxFill()}if(this.stroke){for(gt&&gt.sw?St!==gt.sw&&(St=gt.sw,It.ctxLineWidth(gt.sw)):St!==this.values.sWidth&&(St=this.values.sWidth,It.ctxLineWidth(this.values.sWidth)),gt&&gt.sc?wt!==gt.sc&&(wt=gt.sc,It.ctxStrokeStyle(gt.sc)):wt!==this.values.stroke&&(wt=this.values.stroke,It.ctxStrokeStyle(this.values.stroke)),kt=this.textSpans[et].elem,it=kt.length,this.globalData.canvasContext.beginPath(),rt=0;rt<it;rt+=1)for(Rt=kt[rt],ut=Rt.length,this.globalData.canvasContext.moveTo(Rt[0],Rt[1]),st=2;st<ut;st+=6)this.globalData.canvasContext.bezierCurveTo(Rt[st],Rt[st+1],Rt[st+2],Rt[st+3],Rt[st+4],Rt[st+5]);this.globalData.canvasContext.closePath(),It.ctxStroke()}gt&&this.globalData.renderer.restore()}};function CVImageElement(_e,et,tt){this.assetData=et.getAssetData(_e.refId),this.img=et.imageLoader.getAsset(this.assetData),this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var _e=createTag("canvas");_e.width=this.assetData.w,_e.height=this.assetData.h;var et=_e.getContext("2d"),tt=this.img.width,rt=this.img.height,it=tt/rt,st=this.assetData.w/this.assetData.h,ut,ht,at=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;it>st&&at==="xMidYMid slice"||it<st&&at!=="xMidYMid slice"?(ht=rt,ut=ht*st):(ut=tt,ht=ut/st),et.drawImage(this.img,(tt-ut)/2,(rt-ht)/2,ut,ht,0,0,this.assetData.w,this.assetData.h),this.img=_e}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(_e,et,tt){this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(_e){return new CVShapeElement(_e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(_e){return new CVTextElement(_e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(_e){return new CVImageElement(_e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(_e){return new CVSolidElement(_e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(_e){_e[0]===1&&_e[1]===0&&_e[4]===0&&_e[5]===1&&_e[12]===0&&_e[13]===0||this.canvasContext.transform(_e[0],_e[1],_e[4],_e[5],_e[12],_e[13])},CanvasRendererBase.prototype.ctxOpacity=function(_e){this.canvasContext.globalAlpha*=_e<0?0:_e},CanvasRendererBase.prototype.ctxFillStyle=function(_e){this.canvasContext.fillStyle=_e},CanvasRendererBase.prototype.ctxStrokeStyle=function(_e){this.canvasContext.strokeStyle=_e},CanvasRendererBase.prototype.ctxLineWidth=function(_e){this.canvasContext.lineWidth=_e},CanvasRendererBase.prototype.ctxLineCap=function(_e){this.canvasContext.lineCap=_e},CanvasRendererBase.prototype.ctxLineJoin=function(_e){this.canvasContext.lineJoin=_e},CanvasRendererBase.prototype.ctxMiterLimit=function(_e){this.canvasContext.miterLimit=_e},CanvasRendererBase.prototype.ctxFill=function(_e){this.canvasContext.fill(_e)},CanvasRendererBase.prototype.ctxFillRect=function(_e,et,tt,rt){this.canvasContext.fillRect(_e,et,tt,rt)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(_e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}_e&&(this.globalData.blendMode="source-over"),this.contextData.restore(_e)},CanvasRendererBase.prototype.configAnimation=function(_e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var et=this.animationItem.container.style;et.width="100%",et.height="100%";var tt="0px 0px 0px";et.transformOrigin=tt,et.mozTransformOrigin=tt,et.webkitTransformOrigin=tt,et["-webkit-transform"]=tt,et.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=_e,this.layers=_e.layers,this.transformCanvas={w:_e.w,h:_e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(_e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(_e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(_e,et){this.reset();var tt,rt;_e?(tt=_e,rt=et,this.canvasContext.canvas.width=tt,this.canvasContext.canvas.height=rt):(this.animationItem.wrapper&&this.animationItem.container?(tt=this.animationItem.wrapper.offsetWidth,rt=this.animationItem.wrapper.offsetHeight):(tt=this.canvasContext.canvas.width,rt=this.canvasContext.canvas.height),this.canvasContext.canvas.width=tt*this.renderConfig.dpr,this.canvasContext.canvas.height=rt*this.renderConfig.dpr);var it,st;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var ut=this.renderConfig.preserveAspectRatio.split(" "),ht=ut[1]||"meet",at=ut[0]||"xMidYMid",gt=at.substr(0,4),bt=at.substr(4);it=tt/rt,st=this.transformCanvas.w/this.transformCanvas.h,st>it&&ht==="meet"||st<it&&ht==="slice"?(this.transformCanvas.sx=tt/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=tt/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=rt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=rt/(this.transformCanvas.h/this.renderConfig.dpr)),gt==="xMid"&&(st<it&&ht==="meet"||st>it&&ht==="slice")?this.transformCanvas.tx=(tt-this.transformCanvas.w*(rt/this.transformCanvas.h))/2*this.renderConfig.dpr:gt==="xMax"&&(st<it&&ht==="meet"||st>it&&ht==="slice")?this.transformCanvas.tx=(tt-this.transformCanvas.w*(rt/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,bt==="YMid"&&(st>it&&ht==="meet"||st<it&&ht==="slice")?this.transformCanvas.ty=(rt-this.transformCanvas.h*(tt/this.transformCanvas.w))/2*this.renderConfig.dpr:bt==="YMax"&&(st>it&&ht==="meet"||st<it&&ht==="slice")?this.transformCanvas.ty=(rt-this.transformCanvas.h*(tt/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=tt/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=rt/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var _e,et=this.layers?this.layers.length:0;for(_e=et-1;_e>=0;_e-=1)this.elements[_e]&&this.elements[_e].destroy&&this.elements[_e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(_e,et){if(!(this.renderedFrame===_e&&this.renderConfig.clearCanvas===!0&&!et||this.destroyed||_e===-1)){this.renderedFrame=_e,this.globalData.frameNum=_e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||et,this.globalData.projectInterface.currentFrame=_e;var tt,rt=this.layers.length;for(this.completeLayers||this.checkLayers(_e),tt=rt-1;tt>=0;tt-=1)(this.completeLayers||this.elements[tt])&&this.elements[tt].prepareFrame(_e-this.layers[tt].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),tt=rt-1;tt>=0;tt-=1)(this.completeLayers||this.elements[tt])&&this.elements[tt].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(_e){var et=this.elements;if(!(et[_e]||this.layers[_e].ty===99)){var tt=this.createItem(this.layers[_e],this,this.globalData);et[_e]=tt,tt.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _e=this.pendingElements.pop();_e.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var _e,et=15;for(_e=0;_e<et;_e+=1){var tt=new CanvasContext;this.stack[_e]=tt}this._length=et,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var _e=this._length*2,et=0;for(et=this._length;et<_e;et+=1)this.stack[et]=new CanvasContext;this._length=_e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(_e){this.cArrPos-=1;var et=this.stack[this.cArrPos],tt=et.transform,rt,it=this.cTr.props;for(rt=0;rt<16;rt+=1)it[rt]=tt[rt];if(_e){this.nativeContext.restore();var st=this.stack[this.cArrPos+1];this.appliedFillStyle=st.fillStyle,this.appliedStrokeStyle=st.strokeStyle,this.appliedLineWidth=st.lineWidth,this.appliedLineCap=st.lineCap,this.appliedLineJoin=st.lineJoin,this.appliedMiterLimit=st.miterLimit}this.nativeContext.setTransform(tt[0],tt[1],tt[4],tt[5],tt[12],tt[13]),(_e||et.opacity!==-1&&this.currentOpacity!==et.opacity)&&(this.nativeContext.globalAlpha=et.opacity,this.currentOpacity=et.opacity),this.currentFillStyle=et.fillStyle,this.currentStrokeStyle=et.strokeStyle,this.currentLineWidth=et.lineWidth,this.currentLineCap=et.lineCap,this.currentLineJoin=et.lineJoin,this.currentMiterLimit=et.miterLimit},CVContextData.prototype.save=function(_e){_e&&this.nativeContext.save();var et=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var tt=this.stack[this.cArrPos],rt;for(rt=0;rt<16;rt+=1)tt.transform[rt]=et[rt];this.cArrPos+=1;var it=this.stack[this.cArrPos];it.opacity=tt.opacity,it.fillStyle=tt.fillStyle,it.strokeStyle=tt.strokeStyle,it.lineWidth=tt.lineWidth,it.lineCap=tt.lineCap,it.lineJoin=tt.lineJoin,it.miterLimit=tt.miterLimit},CVContextData.prototype.setOpacity=function(_e){this.stack[this.cArrPos].opacity=_e},CVContextData.prototype.setContext=function(_e){this.nativeContext=_e},CVContextData.prototype.fillStyle=function(_e){this.stack[this.cArrPos].fillStyle!==_e&&(this.currentFillStyle=_e,this.stack[this.cArrPos].fillStyle=_e)},CVContextData.prototype.strokeStyle=function(_e){this.stack[this.cArrPos].strokeStyle!==_e&&(this.currentStrokeStyle=_e,this.stack[this.cArrPos].strokeStyle=_e)},CVContextData.prototype.lineWidth=function(_e){this.stack[this.cArrPos].lineWidth!==_e&&(this.currentLineWidth=_e,this.stack[this.cArrPos].lineWidth=_e)},CVContextData.prototype.lineCap=function(_e){this.stack[this.cArrPos].lineCap!==_e&&(this.currentLineCap=_e,this.stack[this.cArrPos].lineCap=_e)},CVContextData.prototype.lineJoin=function(_e){this.stack[this.cArrPos].lineJoin!==_e&&(this.currentLineJoin=_e,this.stack[this.cArrPos].lineJoin=_e)},CVContextData.prototype.miterLimit=function(_e){this.stack[this.cArrPos].miterLimit!==_e&&(this.currentMiterLimit=_e,this.stack[this.cArrPos].miterLimit=_e)},CVContextData.prototype.transform=function(_e){this.transformMat.cloneFromProps(_e);var et=this.cTr;this.transformMat.multiply(et),et.cloneFromProps(this.transformMat.props);var tt=et.props;this.nativeContext.setTransform(tt[0],tt[1],tt[4],tt[5],tt[12],tt[13])},CVContextData.prototype.opacity=function(_e){var et=this.stack[this.cArrPos].opacity;et*=_e<0?0:_e,this.stack[this.cArrPos].opacity!==et&&(this.currentOpacity!==_e&&(this.nativeContext.globalAlpha=_e,this.currentOpacity=_e),this.stack[this.cArrPos].opacity=et)},CVContextData.prototype.fill=function(_e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(_e)},CVContextData.prototype.fillRect=function(_e,et,tt,rt){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(_e,et,tt,rt)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(_e,et,tt){this.completeLayers=!1,this.layers=_e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(_e,et,tt),this.tm=_e.tm?PropertyFactory.getProp(this,_e.tm,0,et.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var _e=this.canvasContext;_e.beginPath(),_e.moveTo(0,0),_e.lineTo(this.data.w,0),_e.lineTo(this.data.w,this.data.h),_e.lineTo(0,this.data.h),_e.lineTo(0,0),_e.clip();var et,tt=this.layers.length;for(et=tt-1;et>=0;et-=1)(this.completeLayers||this.elements[et])&&this.elements[et].renderFrame()},CVCompElement.prototype.destroy=function(){var _e,et=this.layers.length;for(_e=et-1;_e>=0;_e-=1)this.elements[_e]&&this.elements[_e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(_e){return new CVCompElement(_e,this.globalData,this)};function CanvasRenderer(_e,et){this.animationItem=_e,this.renderConfig={clearCanvas:et&&et.clearCanvas!==void 0?et.clearCanvas:!0,context:et&&et.context||null,progressiveLoad:et&&et.progressiveLoad||!1,preserveAspectRatio:et&&et.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:et&&et.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:et&&et.contentVisibility||"visible",className:et&&et.className||"",id:et&&et.id||"",runExpressions:!et||et.runExpressions===void 0||et.runExpressions},this.renderConfig.dpr=et&&et.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=et&&et.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(_e){return new CVCompElement(_e,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var et=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var tt=this.finalTransform.mat.toCSS();et.transform=tt,et.webkitTransform=tt}this.finalTransform._opMdf&&(et.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(_e,et,tt){this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var _e;this.data.hasMask?(_e=createNS("rect"),_e.setAttribute("width",this.data.sw),_e.setAttribute("height",this.data.sh),_e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(_e=createTag("div"),_e.style.width=this.data.sw+"px",_e.style.height=this.data.sh+"px",_e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(_e)};function HShapeElement(_e,et,tt){this.shapes=[],this.shapesData=_e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(_e,et,tt),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var _e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),_e=this.svgElement;else{_e=createNS("svg");var et=this.comp.data?this.comp.data:this.globalData.compSize;_e.setAttribute("width",et.w),_e.setAttribute("height",et.h),_e.appendChild(this.shapesContainer),this.layerElement.appendChild(_e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=_e},HShapeElement.prototype.getTransformedPoint=function(_e,et){var tt,rt=_e.length;for(tt=0;tt<rt;tt+=1)et=_e[tt].mProps.v.applyToPointArray(et[0],et[1],0);return et},HShapeElement.prototype.calculateShapeBoundingBox=function(_e,et){var tt=_e.sh.v,rt=_e.transformers,it,st=tt._length,ut,ht,at,gt;if(!(st<=1)){for(it=0;it<st-1;it+=1)ut=this.getTransformedPoint(rt,tt.v[it]),ht=this.getTransformedPoint(rt,tt.o[it]),at=this.getTransformedPoint(rt,tt.i[it+1]),gt=this.getTransformedPoint(rt,tt.v[it+1]),this.checkBounds(ut,ht,at,gt,et);tt.c&&(ut=this.getTransformedPoint(rt,tt.v[it]),ht=this.getTransformedPoint(rt,tt.o[it]),at=this.getTransformedPoint(rt,tt.i[0]),gt=this.getTransformedPoint(rt,tt.v[0]),this.checkBounds(ut,ht,at,gt,et))}},HShapeElement.prototype.checkBounds=function(_e,et,tt,rt,it){this.getBoundsOfCurve(_e,et,tt,rt);var st=this.shapeBoundingBox;it.x=bmMin(st.left,it.x),it.xMax=bmMax(st.right,it.xMax),it.y=bmMin(st.top,it.y),it.yMax=bmMax(st.bottom,it.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(_e,et,tt,rt){for(var it=[[_e[0],rt[0]],[_e[1],rt[1]]],st,ut,ht,at,gt,bt,wt,St=0;St<2;++St)ut=6*_e[St]-12*et[St]+6*tt[St],st=-3*_e[St]+9*et[St]-9*tt[St]+3*rt[St],ht=3*et[St]-3*_e[St],ut|=0,st|=0,ht|=0,st===0&&ut===0||(st===0?(at=-ht/ut,at>0&&at<1&&it[St].push(this.calculateF(at,_e,et,tt,rt,St))):(gt=ut*ut-4*ht*st,gt>=0&&(bt=(-ut+bmSqrt(gt))/(2*st),bt>0&&bt<1&&it[St].push(this.calculateF(bt,_e,et,tt,rt,St)),wt=(-ut-bmSqrt(gt))/(2*st),wt>0&&wt<1&&it[St].push(this.calculateF(wt,_e,et,tt,rt,St)))));this.shapeBoundingBox.left=bmMin.apply(null,it[0]),this.shapeBoundingBox.top=bmMin.apply(null,it[1]),this.shapeBoundingBox.right=bmMax.apply(null,it[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,it[1])},HShapeElement.prototype.calculateF=function(_e,et,tt,rt,it,st){return bmPow(1-_e,3)*et[st]+3*bmPow(1-_e,2)*_e*tt[st]+3*(1-_e)*bmPow(_e,2)*rt[st]+bmPow(_e,3)*it[st]},HShapeElement.prototype.calculateBoundingBox=function(_e,et){var tt,rt=_e.length;for(tt=0;tt<rt;tt+=1)_e[tt]&&_e[tt].sh?this.calculateShapeBoundingBox(_e[tt],et):_e[tt]&&_e[tt].it?this.calculateBoundingBox(_e[tt].it,et):_e[tt]&&_e[tt].style&&_e[tt].w&&this.expandStrokeBoundingBox(_e[tt].w,et)},HShapeElement.prototype.expandStrokeBoundingBox=function(_e,et){var tt=0;if(_e.keyframes){for(var rt=0;rt<_e.keyframes.length;rt+=1){var it=_e.keyframes[rt].s;it>tt&&(tt=it)}tt*=_e.mult}else tt=_e.v*_e.mult;et.x-=tt,et.xMax+=tt,et.y-=tt,et.yMax+=tt},HShapeElement.prototype.currentBoxContains=function(_e){return this.currentBBox.x<=_e.x&&this.currentBBox.y<=_e.y&&this.currentBBox.width+this.currentBBox.x>=_e.x+_e.width&&this.currentBBox.height+this.currentBBox.y>=_e.y+_e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var _e=this.tempBoundingBox,et=999999;if(_e.x=et,_e.xMax=-et,_e.y=et,_e.yMax=-et,this.calculateBoundingBox(this.itemsData,_e),_e.width=_e.xMax<_e.x?0:_e.xMax-_e.x,_e.height=_e.yMax<_e.y?0:_e.yMax-_e.y,this.currentBoxContains(_e))return;var tt=!1;if(this.currentBBox.w!==_e.width&&(this.currentBBox.w=_e.width,this.shapeCont.setAttribute("width",_e.width),tt=!0),this.currentBBox.h!==_e.height&&(this.currentBBox.h=_e.height,this.shapeCont.setAttribute("height",_e.height),tt=!0),tt||this.currentBBox.x!==_e.x||this.currentBBox.y!==_e.y){this.currentBBox.w=_e.width,this.currentBBox.h=_e.height,this.currentBBox.x=_e.x,this.currentBBox.y=_e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var rt=this.shapeCont.style,it="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";rt.transform=it,rt.webkitTransform=it}}};function HTextElement(_e,et,tt){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var _e=createNS("g");this.maskedElement.appendChild(_e),this.innerElem=_e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var _e=this.textProperty.currentData;this.renderedLetters=createSizedArray(_e.l?_e.l.length:0);var et=this.innerElem.style,tt=_e.fc?this.buildColor(_e.fc):"rgba(0,0,0,0)";et.fill=tt,et.color=tt,_e.sc&&(et.stroke=this.buildColor(_e.sc),et.strokeWidth=_e.sw+"px");var rt=this.globalData.fontManager.getFontByName(_e.f);if(!this.globalData.fontManager.chars)if(et.fontSize=_e.finalSize+"px",et.lineHeight=_e.finalSize+"px",rt.fClass)this.innerElem.className=rt.fClass;else{et.fontFamily=rt.fFamily;var it=_e.fWeight,st=_e.fStyle;et.fontStyle=st,et.fontWeight=it}var ut,ht,at=_e.l;ht=at.length;var gt,bt,wt,St=this.mHelper,kt,Rt="",It=0;for(ut=0;ut<ht;ut+=1){if(this.globalData.fontManager.chars?(this.textPaths[It]?gt=this.textPaths[It]:(gt=createNS("path"),gt.setAttribute("stroke-linecap",lineCapEnum[1]),gt.setAttribute("stroke-linejoin",lineJoinEnum[2]),gt.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[It]?(bt=this.textSpans[It],wt=bt.children[0]):(bt=createTag("div"),bt.style.lineHeight=0,wt=createNS("svg"),wt.appendChild(gt),styleDiv(bt)))):this.isMasked?gt=this.textPaths[It]?this.textPaths[It]:createNS("text"):this.textSpans[It]?(bt=this.textSpans[It],gt=this.textPaths[It]):(bt=createTag("span"),styleDiv(bt),gt=createTag("span"),styleDiv(gt),bt.appendChild(gt)),this.globalData.fontManager.chars){var Dt=this.globalData.fontManager.getCharData(_e.finalText[ut],rt.fStyle,this.globalData.fontManager.getFontByName(_e.f).fFamily),Mt;if(Dt?Mt=Dt.data:Mt=null,St.reset(),Mt&&Mt.shapes&&Mt.shapes.length&&(kt=Mt.shapes[0].it,St.scale(_e.finalSize/100,_e.finalSize/100),Rt=this.createPathShape(St,kt),gt.setAttribute("d",Rt)),this.isMasked)this.innerElem.appendChild(gt);else{if(this.innerElem.appendChild(bt),Mt&&Mt.shapes){document.body.appendChild(wt);var $t=wt.getBBox();wt.setAttribute("width",$t.width+2),wt.setAttribute("height",$t.height+2),wt.setAttribute("viewBox",$t.x-1+" "+($t.y-1)+" "+($t.width+2)+" "+($t.height+2));var jt=wt.style,Nt="translate("+($t.x-1)+"px,"+($t.y-1)+"px)";jt.transform=Nt,jt.webkitTransform=Nt,at[ut].yOffset=$t.y-1}else wt.setAttribute("width",1),wt.setAttribute("height",1);bt.appendChild(wt)}}else if(gt.textContent=at[ut].val,gt.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(gt);else{this.innerElem.appendChild(bt);var Ut=gt.style,Ht="translate3d(0,"+-_e.finalSize/1.2+"px,0)";Ut.transform=Ht,Ut.webkitTransform=Ht}this.isMasked?this.textSpans[It]=gt:this.textSpans[It]=bt,this.textSpans[It].style.display="block",this.textPaths[It]=gt,It+=1}for(;It<this.textSpans.length;)this.textSpans[It].style.display="none",It+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var _e;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),_e=this.svgElement.style;var et="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";_e.transform=et,_e.webkitTransform=et}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var tt,rt,it=0,st=this.textAnimator.renderedLetters,ut=this.textProperty.currentData.l;rt=ut.length;var ht,at,gt;for(tt=0;tt<rt;tt+=1)ut[tt].n?it+=1:(at=this.textSpans[tt],gt=this.textPaths[tt],ht=st[it],it+=1,ht._mdf.m&&(this.isMasked?at.setAttribute("transform",ht.m):(at.style.webkitTransform=ht.m,at.style.transform=ht.m)),at.style.opacity=ht.o,ht.sw&&ht._mdf.sw&&gt.setAttribute("stroke-width",ht.sw),ht.sc&&ht._mdf.sc&&gt.setAttribute("stroke",ht.sc),ht.fc&&ht._mdf.fc&&(gt.setAttribute("fill",ht.fc),gt.style.color=ht.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var bt=this.innerElem.getBBox();this.currentBBox.w!==bt.width&&(this.currentBBox.w=bt.width,this.svgElement.setAttribute("width",bt.width)),this.currentBBox.h!==bt.height&&(this.currentBBox.h=bt.height,this.svgElement.setAttribute("height",bt.height));var wt=1;if(this.currentBBox.w!==bt.width+wt*2||this.currentBBox.h!==bt.height+wt*2||this.currentBBox.x!==bt.x-wt||this.currentBBox.y!==bt.y-wt){this.currentBBox.w=bt.width+wt*2,this.currentBBox.h=bt.height+wt*2,this.currentBBox.x=bt.x-wt,this.currentBBox.y=bt.y-wt,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),_e=this.svgElement.style;var St="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";_e.transform=St,_e.webkitTransform=St}}}};function HCameraElement(_e,et,tt){this.initFrame(),this.initBaseData(_e,et,tt),this.initHierarchy();var rt=PropertyFactory.getProp;if(this.pe=rt(this,_e.pe,0,0,this),_e.ks.p.s?(this.px=rt(this,_e.ks.p.x,1,0,this),this.py=rt(this,_e.ks.p.y,1,0,this),this.pz=rt(this,_e.ks.p.z,1,0,this)):this.p=rt(this,_e.ks.p,1,0,this),_e.ks.a&&(this.a=rt(this,_e.ks.a,1,0,this)),_e.ks.or.k.length&&_e.ks.or.k[0].to){var it,st=_e.ks.or.k.length;for(it=0;it<st;it+=1)_e.ks.or.k[it].to=null,_e.ks.or.k[it].ti=null}this.or=rt(this,_e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=rt(this,_e.ks.rx,0,degToRads,this),this.ry=rt(this,_e.ks.ry,0,degToRads,this),this.rz=rt(this,_e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var _e,et=this.comp.threeDElements.length,tt,rt,it;for(_e=0;_e<et;_e+=1)if(tt=this.comp.threeDElements[_e],tt.type==="3d"){rt=tt.perspectiveElem.style,it=tt.container.style;var st=this.pe.v+"px",ut="0px 0px 0px",ht="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";rt.perspective=st,rt.webkitPerspective=st,it.transformOrigin=ut,it.mozTransformOrigin=ut,it.webkitTransformOrigin=ut,rt.transform=ht,rt.webkitTransform=ht}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var _e=this._isFirstFrame,et,tt;if(this.hierarchy)for(tt=this.hierarchy.length,et=0;et<tt;et+=1)_e=this.hierarchy[et].finalTransform.mProp._mdf||_e;if(_e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(tt=this.hierarchy.length-1,et=tt;et>=0;et-=1){var rt=this.hierarchy[et].finalTransform.mProp;this.mat.translate(-rt.p.v[0],-rt.p.v[1],rt.p.v[2]),this.mat.rotateX(-rt.or.v[0]).rotateY(-rt.or.v[1]).rotateZ(rt.or.v[2]),this.mat.rotateX(-rt.rx.v).rotateY(-rt.ry.v).rotateZ(rt.rz.v),this.mat.scale(1/rt.s.v[0],1/rt.s.v[1],1/rt.s.v[2]),this.mat.translate(rt.a.v[0],rt.a.v[1],rt.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var it;this.p?it=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:it=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var st=Math.sqrt(Math.pow(it[0],2)+Math.pow(it[1],2)+Math.pow(it[2],2)),ut=[it[0]/st,it[1]/st,it[2]/st],ht=Math.sqrt(ut[2]*ut[2]+ut[0]*ut[0]),at=Math.atan2(ut[1],ht),gt=Math.atan2(ut[0],-ut[2]);this.mat.rotateY(gt).rotateX(-at)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var bt=!this._prevMat.equals(this.mat);if((bt||this.pe._mdf)&&this.comp.threeDElements){tt=this.comp.threeDElements.length;var wt,St,kt;for(et=0;et<tt;et+=1)if(wt=this.comp.threeDElements[et],wt.type==="3d"){if(bt){var Rt=this.mat.toCSS();kt=wt.container.style,kt.transform=Rt,kt.webkitTransform=Rt}this.pe._mdf&&(St=wt.perspectiveElem.style,St.perspective=this.pe.v+"px",St.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(_e){this.prepareProperties(_e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(_e,et,tt){this.assetData=et.getAssetData(_e.refId),this.initElement(_e,et,tt)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var _e=this.globalData.getAssetsPath(this.assetData),et=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",_e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(et),et.crossOrigin="anonymous",et.src=_e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(_e,et){this.animationItem=_e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:et&&et.className||"",imagePreserveAspectRatio:et&&et.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(et&&et.hideOnTransparent===!1),filterSize:{width:et&&et.filterSize&&et.filterSize.width||"400%",height:et&&et.filterSize&&et.filterSize.height||"400%",x:et&&et.filterSize&&et.filterSize.x||"-100%",y:et&&et.filterSize&&et.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var _e=this.pendingElements.pop();_e.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(_e,et){var tt=_e.getBaseElement();if(tt){var rt=this.layers[et];if(!rt.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(tt,et);else{for(var it=0,st,ut,ht;it<et;)this.elements[it]&&this.elements[it]!==!0&&this.elements[it].getBaseElement&&(ut=this.elements[it],ht=this.layers[it].ddd?this.getThreeDContainerByPos(it):ut.getBaseElement(),st=ht||st),it+=1;st?(!rt.ddd||!this.supports3d)&&this.layerElement.insertBefore(tt,st):(!rt.ddd||!this.supports3d)&&this.layerElement.appendChild(tt)}else this.addTo3dContainer(tt,et)}},HybridRendererBase.prototype.createShape=function(_e){return this.supports3d?new HShapeElement(_e,this.globalData,this):new SVGShapeElement(_e,this.globalData,this)},HybridRendererBase.prototype.createText=function(_e){return this.supports3d?new HTextElement(_e,this.globalData,this):new SVGTextLottieElement(_e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(_e){return this.camera=new HCameraElement(_e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(_e){return this.supports3d?new HImageElement(_e,this.globalData,this):new IImageElement(_e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(_e){return this.supports3d?new HSolidElement(_e,this.globalData,this):new ISolidElement(_e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(_e){for(var et=0,tt=this.threeDElements.length;et<tt;){if(this.threeDElements[et].startPos<=_e&&this.threeDElements[et].endPos>=_e)return this.threeDElements[et].perspectiveElem;et+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(_e,et){var tt=createTag("div"),rt,it;styleDiv(tt);var st=createTag("div");if(styleDiv(st),et==="3d"){rt=tt.style,rt.width=this.globalData.compSize.w+"px",rt.height=this.globalData.compSize.h+"px";var ut="50% 50%";rt.webkitTransformOrigin=ut,rt.mozTransformOrigin=ut,rt.transformOrigin=ut,it=st.style;var ht="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";it.transform=ht,it.webkitTransform=ht}tt.appendChild(st);var at={container:st,perspectiveElem:tt,startPos:_e,endPos:_e,type:et};return this.threeDElements.push(at),at},HybridRendererBase.prototype.build3dContainers=function(){var _e,et=this.layers.length,tt,rt="";for(_e=0;_e<et;_e+=1)this.layers[_e].ddd&&this.layers[_e].ty!==3?(rt!=="3d"&&(rt="3d",tt=this.createThreeDContainer(_e,"3d")),tt.endPos=Math.max(tt.endPos,_e)):(rt!=="2d"&&(rt="2d",tt=this.createThreeDContainer(_e,"2d")),tt.endPos=Math.max(tt.endPos,_e));for(et=this.threeDElements.length,_e=et-1;_e>=0;_e-=1)this.resizerElem.appendChild(this.threeDElements[_e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(_e,et){for(var tt=0,rt=this.threeDElements.length;tt<rt;){if(et<=this.threeDElements[tt].endPos){for(var it=this.threeDElements[tt].startPos,st;it<et;)this.elements[it]&&this.elements[it].getBaseElement&&(st=this.elements[it].getBaseElement()),it+=1;st?this.threeDElements[tt].container.insertBefore(_e,st):this.threeDElements[tt].container.appendChild(_e);break}tt+=1}},HybridRendererBase.prototype.configAnimation=function(_e){var et=createTag("div"),tt=this.animationItem.wrapper,rt=et.style;rt.width=_e.w+"px",rt.height=_e.h+"px",this.resizerElem=et,styleDiv(et),rt.transformStyle="flat",rt.mozTransformStyle="flat",rt.webkitTransformStyle="flat",this.renderConfig.className&&et.setAttribute("class",this.renderConfig.className),tt.appendChild(et),rt.overflow="hidden";var it=createNS("svg");it.setAttribute("width","1"),it.setAttribute("height","1"),styleDiv(it),this.resizerElem.appendChild(it);var st=createNS("defs");it.appendChild(st),this.data=_e,this.setupGlobalData(_e,it),this.globalData.defs=st,this.layers=_e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var _e,et=this.layers?this.layers.length:0;for(_e=0;_e<et;_e+=1)this.elements[_e]&&this.elements[_e].destroy&&this.elements[_e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var _e=this.animationItem.wrapper.offsetWidth,et=this.animationItem.wrapper.offsetHeight,tt=_e/et,rt=this.globalData.compSize.w/this.globalData.compSize.h,it,st,ut,ht;rt>tt?(it=_e/this.globalData.compSize.w,st=_e/this.globalData.compSize.w,ut=0,ht=(et-this.globalData.compSize.h*(_e/this.globalData.compSize.w))/2):(it=et/this.globalData.compSize.h,st=et/this.globalData.compSize.h,ut=(_e-this.globalData.compSize.w*(et/this.globalData.compSize.h))/2,ht=0);var at=this.resizerElem.style;at.webkitTransform="matrix3d("+it+",0,0,0,0,"+st+",0,0,0,0,1,0,"+ut+","+ht+",0,1)",at.transform=at.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var _e=this.globalData.compSize.w,et=this.globalData.compSize.h,tt,rt=this.threeDElements.length;for(tt=0;tt<rt;tt+=1){var it=this.threeDElements[tt].perspectiveElem.style;it.webkitPerspective=Math.sqrt(Math.pow(_e,2)+Math.pow(et,2))+"px",it.perspective=it.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(_e){var et,tt=_e.length,rt=createTag("div");for(et=0;et<tt;et+=1)if(_e[et].xt){var it=this.createComp(_e[et],rt,this.globalData.comp,null);it.initExpressions(),this.globalData.projectInterface.registerComposition(it)}};function HCompElement(_e,et,tt){this.layers=_e.layers,this.supports3d=!_e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(_e,et,tt),this.tm=_e.tm?PropertyFactory.getProp(this,_e.tm,0,et.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(_e,et){for(var tt=0,rt;tt<et;)this.elements[tt]&&this.elements[tt].getBaseElement&&(rt=this.elements[tt].getBaseElement()),tt+=1;rt?this.layerElement.insertBefore(_e,rt):this.layerElement.appendChild(_e)},HCompElement.prototype.createComp=function(_e){return this.supports3d?new HCompElement(_e,this.globalData,this):new SVGCompElement(_e,this.globalData,this)};function HybridRenderer(_e,et){this.animationItem=_e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:et&&et.className||"",imagePreserveAspectRatio:et&&et.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(et&&et.hideOnTransparent===!1),filterSize:{width:et&&et.filterSize&&et.filterSize.width||"400%",height:et&&et.filterSize&&et.filterSize.height||"400%",x:et&&et.filterSize&&et.filterSize.x||"-100%",y:et&&et.filterSize&&et.filterSize.y||"-100%"},runExpressions:!et||et.runExpressions===void 0||et.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(_e){return this.supports3d?new HCompElement(_e,this.globalData,this):new SVGCompElement(_e,this.globalData,this)};var CompExpressionInterface=function(){return function(_e){function et(tt){for(var rt=0,it=_e.layers.length;rt<it;){if(_e.layers[rt].nm===tt||_e.layers[rt].ind===tt)return _e.elements[rt].layerInterface;rt+=1}return null}return Object.defineProperty(et,"_name",{value:_e.data.nm}),et.layer=et,et.pixelAspect=1,et.height=_e.data.h||_e.globalData.compSize.h,et.width=_e.data.w||_e.globalData.compSize.w,et.pixelAspect=1,et.frameDuration=1/_e.globalData.frameRate,et.displayStartTime=0,et.numLayers=_e.layers.length,et}}();function _typeof$2(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(tt){return typeof tt}:_typeof$2=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$2(_e)}function seedRandom(_e,et){var tt=this,rt=256,it=6,st=52,ut="random",ht=et.pow(rt,it),at=et.pow(2,st),gt=at*2,bt=rt-1,wt;function St(jt,Nt,Ut){var Ht=[];Nt=Nt===!0?{entropy:!0}:Nt||{};var Kt=Dt(It(Nt.entropy?[jt,$t(_e)]:jt===null?Mt():jt,3),Ht),tr=new kt(Ht),mr=function(){for(var wr=tr.g(it),yr=ht,Or=0;wr<at;)wr=(wr+Or)*rt,yr*=rt,Or=tr.g(1);for(;wr>=gt;)wr/=2,yr/=2,Or>>>=1;return(wr+Or)/yr};return mr.int32=function(){return tr.g(4)|0},mr.quick=function(){return tr.g(4)/4294967296},mr.double=mr,Dt($t(tr.S),_e),(Nt.pass||Ut||function(vr,wr,yr,Or){return Or&&(Or.S&&Rt(Or,tr),vr.state=function(){return Rt(tr,{})}),yr?(et[ut]=vr,wr):vr})(mr,Kt,"global"in Nt?Nt.global:this==et,Nt.state)}et["seed"+ut]=St;function kt(jt){var Nt,Ut=jt.length,Ht=this,Kt=0,tr=Ht.i=Ht.j=0,mr=Ht.S=[];for(Ut||(jt=[Ut++]);Kt<rt;)mr[Kt]=Kt++;for(Kt=0;Kt<rt;Kt++)mr[Kt]=mr[tr=bt&tr+jt[Kt%Ut]+(Nt=mr[Kt])],mr[tr]=Nt;Ht.g=function(vr){for(var wr,yr=0,Or=Ht.i,Nr=Ht.j,Lr=Ht.S;vr--;)wr=Lr[Or=bt&Or+1],yr=yr*rt+Lr[bt&(Lr[Or]=Lr[Nr=bt&Nr+wr])+(Lr[Nr]=wr)];return Ht.i=Or,Ht.j=Nr,yr}}function Rt(jt,Nt){return Nt.i=jt.i,Nt.j=jt.j,Nt.S=jt.S.slice(),Nt}function It(jt,Nt){var Ut=[],Ht=_typeof$2(jt),Kt;if(Nt&&Ht=="object")for(Kt in jt)try{Ut.push(It(jt[Kt],Nt-1))}catch{}return Ut.length?Ut:Ht=="string"?jt:jt+"\0"}function Dt(jt,Nt){for(var Ut=jt+"",Ht,Kt=0;Kt<Ut.length;)Nt[bt&Kt]=bt&(Ht^=Nt[bt&Kt]*19)+Ut.charCodeAt(Kt++);return $t(Nt)}function Mt(){try{var jt=new Uint8Array(rt);return(tt.crypto||tt.msCrypto).getRandomValues(jt),$t(jt)}catch{var Nt=tt.navigator,Ut=Nt&&Nt.plugins;return[+new Date,tt,Ut,tt.screen,$t(_e)]}}function $t(jt){return String.fromCharCode.apply(0,jt)}Dt(et.random(),_e)}function initialize$2(_e){seedRandom([],_e)}var propTypes={SHAPE:"shape"};function _typeof$1(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(tt){return typeof tt}:_typeof$1=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof$1(_e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(_e){return _e.constructor===Array||_e.constructor===Float32Array}function isNumerable(_e,et){return _e==="number"||et instanceof Number||_e==="boolean"||_e==="string"}function $bm_neg(_e){var et=_typeof$1(_e);if(et==="number"||_e instanceof Number||et==="boolean")return-_e;if($bm_isInstanceOfArray(_e)){var tt,rt=_e.length,it=[];for(tt=0;tt<rt;tt+=1)it[tt]=-_e[tt];return it}return _e.propType?_e.v:-_e}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(_e,et){var tt=_typeof$1(_e),rt=_typeof$1(et);if(isNumerable(tt,_e)&&isNumerable(rt,et)||tt==="string"||rt==="string")return _e+et;if($bm_isInstanceOfArray(_e)&&isNumerable(rt,et))return _e=_e.slice(0),_e[0]+=et,_e;if(isNumerable(tt,_e)&&$bm_isInstanceOfArray(et))return et=et.slice(0),et[0]=_e+et[0],et;if($bm_isInstanceOfArray(_e)&&$bm_isInstanceOfArray(et)){for(var it=0,st=_e.length,ut=et.length,ht=[];it<st||it<ut;)(typeof _e[it]=="number"||_e[it]instanceof Number)&&(typeof et[it]=="number"||et[it]instanceof Number)?ht[it]=_e[it]+et[it]:ht[it]=et[it]===void 0?_e[it]:_e[it]||et[it],it+=1;return ht}return 0}var add=sum;function sub(_e,et){var tt=_typeof$1(_e),rt=_typeof$1(et);if(isNumerable(tt,_e)&&isNumerable(rt,et))return tt==="string"&&(_e=parseInt(_e,10)),rt==="string"&&(et=parseInt(et,10)),_e-et;if($bm_isInstanceOfArray(_e)&&isNumerable(rt,et))return _e=_e.slice(0),_e[0]-=et,_e;if(isNumerable(tt,_e)&&$bm_isInstanceOfArray(et))return et=et.slice(0),et[0]=_e-et[0],et;if($bm_isInstanceOfArray(_e)&&$bm_isInstanceOfArray(et)){for(var it=0,st=_e.length,ut=et.length,ht=[];it<st||it<ut;)(typeof _e[it]=="number"||_e[it]instanceof Number)&&(typeof et[it]=="number"||et[it]instanceof Number)?ht[it]=_e[it]-et[it]:ht[it]=et[it]===void 0?_e[it]:_e[it]||et[it],it+=1;return ht}return 0}function mul(_e,et){var tt=_typeof$1(_e),rt=_typeof$1(et),it;if(isNumerable(tt,_e)&&isNumerable(rt,et))return _e*et;var st,ut;if($bm_isInstanceOfArray(_e)&&isNumerable(rt,et)){for(ut=_e.length,it=createTypedArray("float32",ut),st=0;st<ut;st+=1)it[st]=_e[st]*et;return it}if(isNumerable(tt,_e)&&$bm_isInstanceOfArray(et)){for(ut=et.length,it=createTypedArray("float32",ut),st=0;st<ut;st+=1)it[st]=_e*et[st];return it}return 0}function div(_e,et){var tt=_typeof$1(_e),rt=_typeof$1(et),it;if(isNumerable(tt,_e)&&isNumerable(rt,et))return _e/et;var st,ut;if($bm_isInstanceOfArray(_e)&&isNumerable(rt,et)){for(ut=_e.length,it=createTypedArray("float32",ut),st=0;st<ut;st+=1)it[st]=_e[st]/et;return it}if(isNumerable(tt,_e)&&$bm_isInstanceOfArray(et)){for(ut=et.length,it=createTypedArray("float32",ut),st=0;st<ut;st+=1)it[st]=_e/et[st];return it}return 0}function mod(_e,et){return typeof _e=="string"&&(_e=parseInt(_e,10)),typeof et=="string"&&(et=parseInt(et,10)),_e%et}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(_e,et,tt){if(et>tt){var rt=tt;tt=et,et=rt}return Math.min(Math.max(_e,et),tt)}function radiansToDegrees(_e){return _e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(_e){return _e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(_e,et){if(typeof _e=="number"||_e instanceof Number)return et=et||0,Math.abs(_e-et);et||(et=helperLengthArray);var tt,rt=Math.min(_e.length,et.length),it=0;for(tt=0;tt<rt;tt+=1)it+=Math.pow(et[tt]-_e[tt],2);return Math.sqrt(it)}function normalize(_e){return div(_e,length(_e))}function rgbToHsl(_e){var et=_e[0],tt=_e[1],rt=_e[2],it=Math.max(et,tt,rt),st=Math.min(et,tt,rt),ut,ht,at=(it+st)/2;if(it===st)ut=0,ht=0;else{var gt=it-st;switch(ht=at>.5?gt/(2-it-st):gt/(it+st),it){case et:ut=(tt-rt)/gt+(tt<rt?6:0);break;case tt:ut=(rt-et)/gt+2;break;case rt:ut=(et-tt)/gt+4;break}ut/=6}return[ut,ht,at,_e[3]]}function hue2rgb(_e,et,tt){return tt<0&&(tt+=1),tt>1&&(tt-=1),tt<1/6?_e+(et-_e)*6*tt:tt<1/2?et:tt<2/3?_e+(et-_e)*(2/3-tt)*6:_e}function hslToRgb(_e){var et=_e[0],tt=_e[1],rt=_e[2],it,st,ut;if(tt===0)it=rt,ut=rt,st=rt;else{var ht=rt<.5?rt*(1+tt):rt+tt-rt*tt,at=2*rt-ht;it=hue2rgb(at,ht,et+1/3),st=hue2rgb(at,ht,et),ut=hue2rgb(at,ht,et-1/3)}return[it,st,ut,_e[3]]}function linear(_e,et,tt,rt,it){if((rt===void 0||it===void 0)&&(rt=et,it=tt,et=0,tt=1),tt<et){var st=tt;tt=et,et=st}if(_e<=et)return rt;if(_e>=tt)return it;var ut=tt===et?0:(_e-et)/(tt-et);if(!rt.length)return rt+(it-rt)*ut;var ht,at=rt.length,gt=createTypedArray("float32",at);for(ht=0;ht<at;ht+=1)gt[ht]=rt[ht]+(it[ht]-rt[ht])*ut;return gt}function random(_e,et){if(et===void 0&&(_e===void 0?(_e=0,et=1):(et=_e,_e=void 0)),et.length){var tt,rt=et.length;_e||(_e=createTypedArray("float32",rt));var it=createTypedArray("float32",rt),st=BMMath.random();for(tt=0;tt<rt;tt+=1)it[tt]=_e[tt]+st*(et[tt]-_e[tt]);return it}_e===void 0&&(_e=0);var ut=BMMath.random();return _e+ut*(et-_e)}function createPath(_e,et,tt,rt){var it,st=_e.length,ut=shapePool.newElement();ut.setPathData(!!rt,st);var ht=[0,0],at,gt;for(it=0;it<st;it+=1)at=et&&et[it]?et[it]:ht,gt=tt&&tt[it]?tt[it]:ht,ut.setTripleAt(_e[it][0],_e[it][1],gt[0]+_e[it][0],gt[1]+_e[it][1],at[0]+_e[it][0],at[1]+_e[it][1],it,!0);return ut}function initiateExpression(elem,data,property){function noOp(_e){return _e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function _e(et,tt){var rt,it,st=this.pv.length?this.pv.length:1,ut=createTypedArray("float32",st);et=5;var ht=Math.floor(time*et);for(rt=0,it=0;rt<ht;){for(it=0;it<st;it+=1)ut[it]+=-tt+tt*2*BMMath.random();rt+=1}var at=time*et,gt=at-Math.floor(at),bt=createTypedArray("float32",st);if(st>1){for(it=0;it<st;it+=1)bt[it]=this.pv[it]+ut[it]+(-tt+tt*2*BMMath.random())*gt;return bt}return this.pv+ut[0]+(-tt+tt*2*BMMath.random())*gt}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(_e,et){return loopIn(_e,et,!0)}function loopOutDuration(_e,et){return loopOut(_e,et,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(_e,et){var tt=[et[0]-_e[0],et[1]-_e[1],et[2]-_e[2]],rt=Math.atan2(tt[0],Math.sqrt(tt[1]*tt[1]+tt[2]*tt[2]))/degToRads,it=-Math.atan2(tt[1],tt[2])/degToRads;return[it,rt,0]}function easeOut(_e,et,tt,rt,it){return applyEase(easeOutBez,_e,et,tt,rt,it)}function easeIn(_e,et,tt,rt,it){return applyEase(easeInBez,_e,et,tt,rt,it)}function ease(_e,et,tt,rt,it){return applyEase(easeInOutBez,_e,et,tt,rt,it)}function applyEase(_e,et,tt,rt,it,st){it===void 0?(it=tt,st=rt):et=(et-tt)/(rt-tt),et>1?et=1:et<0&&(et=0);var ut=_e(et);if($bm_isInstanceOfArray(it)){var ht,at=it.length,gt=createTypedArray("float32",at);for(ht=0;ht<at;ht+=1)gt[ht]=(st[ht]-it[ht])*ut+it[ht];return gt}return(st-it)*ut+it}function nearestKey(_e){var et,tt=data.k.length,rt,it;if(!data.k.length||typeof data.k[0]=="number")rt=0,it=0;else if(rt=-1,_e*=elem.comp.globalData.frameRate,_e<data.k[0].t)rt=1,it=data.k[0].t;else{for(et=0;et<tt-1;et+=1)if(_e===data.k[et].t){rt=et+1,it=data.k[et].t;break}else if(_e>data.k[et].t&&_e<data.k[et+1].t){_e-data.k[et].t>data.k[et+1].t-_e?(rt=et+2,it=data.k[et+1].t):(rt=et+1,it=data.k[et].t);break}rt===-1&&(rt=et+1,it=data.k[et].t)}var st={};return st.index=rt,st.time=it/elem.comp.globalData.frameRate,st}function key(_e){var et,tt,rt;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+_e);_e-=1,et={time:data.k[_e].t/elem.comp.globalData.frameRate,value:[]};var it=Object.prototype.hasOwnProperty.call(data.k[_e],"s")?data.k[_e].s:data.k[_e-1].e;for(rt=it.length,tt=0;tt<rt;tt+=1)et[tt]=it[tt],et.value[tt]=it[tt];return et}function framesToTime(_e,et){return et||(et=elem.comp.globalData.frameRate),_e/et}function timeToFrames(_e,et){return!_e&&_e!==0&&(_e=time),et||(et=elem.comp.globalData.frameRate),_e*et}function seedRandom(_e){BMMath.seedrandom(randSeed+_e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(_e,et){return typeof value=="string"?et===void 0?value.substring(_e):value.substring(_e,et):""}function substr(_e,et){return typeof value=="string"?et===void 0?value.substr(_e):value.substr(_e,et):""}function posterizeTime(_e){time=_e===0?0:Math.floor(time*_e)/_e,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(_e){return value=_e,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var _e={};_e.initExpressions=et,_e.resetFrame=ExpressionManager.resetFrame;function et(tt){var rt=0,it=[];function st(){rt+=1}function ut(){rt-=1,rt===0&&at()}function ht(gt){it.indexOf(gt)===-1&&it.push(gt)}function at(){var gt,bt=it.length;for(gt=0;gt<bt;gt+=1)it[gt].release();it.length=0}tt.renderer.compInterface=CompExpressionInterface(tt.renderer),tt.renderer.globalData.projectInterface.registerComposition(tt.renderer),tt.renderer.globalData.pushExpression=st,tt.renderer.globalData.popExpression=ut,tt.renderer.globalData.registerExpressionProperty=ht}return _e}(),MaskManagerInterface=function(){function _e(tt,rt){this._mask=tt,this._data=rt}Object.defineProperty(_e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(_e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var et=function(rt){var it=createSizedArray(rt.viewData.length),st,ut=rt.viewData.length;for(st=0;st<ut;st+=1)it[st]=new _e(rt.viewData[st],rt.masksProperties[st]);var ht=function(gt){for(st=0;st<ut;){if(rt.masksProperties[st].nm===gt)return it[st];st+=1}return null};return ht};return et}(),ExpressionPropertyInterface=function(){var _e={pv:0,v:0,mult:1},et={pv:[0,0,0],v:[0,0,0],mult:1};function tt(ut,ht,at){Object.defineProperty(ut,"velocity",{get:function(){return ht.getVelocityAtTime(ht.comp.currentFrame)}}),ut.numKeys=ht.keyframes?ht.keyframes.length:0,ut.key=function(gt){if(!ut.numKeys)return 0;var bt="";"s"in ht.keyframes[gt-1]?bt=ht.keyframes[gt-1].s:"e"in ht.keyframes[gt-2]?bt=ht.keyframes[gt-2].e:bt=ht.keyframes[gt-2].s;var wt=at==="unidimensional"?new Number(bt):Object.assign({},bt);return wt.time=ht.keyframes[gt-1].t/ht.elem.comp.globalData.frameRate,wt.value=at==="unidimensional"?bt[0]:bt,wt},ut.valueAtTime=ht.getValueAtTime,ut.speedAtTime=ht.getSpeedAtTime,ut.velocityAtTime=ht.getVelocityAtTime,ut.propertyGroup=ht.propertyGroup}function rt(ut){(!ut||!("pv"in ut))&&(ut=_e);var ht=1/ut.mult,at=ut.pv*ht,gt=new Number(at);return gt.value=at,tt(gt,ut,"unidimensional"),function(){return ut.k&&ut.getValue(),at=ut.v*ht,gt.value!==at&&(gt=new Number(at),gt.value=at,tt(gt,ut,"unidimensional")),gt}}function it(ut){(!ut||!("pv"in ut))&&(ut=et);var ht=1/ut.mult,at=ut.data&&ut.data.l||ut.pv.length,gt=createTypedArray("float32",at),bt=createTypedArray("float32",at);return gt.value=bt,tt(gt,ut,"multidimensional"),function(){ut.k&&ut.getValue();for(var wt=0;wt<at;wt+=1)bt[wt]=ut.v[wt]*ht,gt[wt]=bt[wt];return gt}}function st(){return _e}return function(ut){return ut?ut.propType==="unidimensional"?rt(ut):it(ut):st}}(),TransformExpressionInterface=function(){return function(_e){function et(ut){switch(ut){case"scale":case"Scale":case"ADBE Scale":case 6:return et.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return et.rotation;case"ADBE Rotate X":return et.xRotation;case"ADBE Rotate Y":return et.yRotation;case"position":case"Position":case"ADBE Position":case 2:return et.position;case"ADBE Position_0":return et.xPosition;case"ADBE Position_1":return et.yPosition;case"ADBE Position_2":return et.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return et.anchorPoint;case"opacity":case"Opacity":case 11:return et.opacity;default:return null}}Object.defineProperty(et,"rotation",{get:ExpressionPropertyInterface(_e.r||_e.rz)}),Object.defineProperty(et,"zRotation",{get:ExpressionPropertyInterface(_e.rz||_e.r)}),Object.defineProperty(et,"xRotation",{get:ExpressionPropertyInterface(_e.rx)}),Object.defineProperty(et,"yRotation",{get:ExpressionPropertyInterface(_e.ry)}),Object.defineProperty(et,"scale",{get:ExpressionPropertyInterface(_e.s)});var tt,rt,it,st;return _e.p?st=ExpressionPropertyInterface(_e.p):(tt=ExpressionPropertyInterface(_e.px),rt=ExpressionPropertyInterface(_e.py),_e.pz&&(it=ExpressionPropertyInterface(_e.pz))),Object.defineProperty(et,"position",{get:function(){return _e.p?st():[tt(),rt(),it?it():0]}}),Object.defineProperty(et,"xPosition",{get:ExpressionPropertyInterface(_e.px)}),Object.defineProperty(et,"yPosition",{get:ExpressionPropertyInterface(_e.py)}),Object.defineProperty(et,"zPosition",{get:ExpressionPropertyInterface(_e.pz)}),Object.defineProperty(et,"anchorPoint",{get:ExpressionPropertyInterface(_e.a)}),Object.defineProperty(et,"opacity",{get:ExpressionPropertyInterface(_e.o)}),Object.defineProperty(et,"skew",{get:ExpressionPropertyInterface(_e.sk)}),Object.defineProperty(et,"skewAxis",{get:ExpressionPropertyInterface(_e.sa)}),Object.defineProperty(et,"orientation",{get:ExpressionPropertyInterface(_e.or)}),et}}(),LayerExpressionInterface=function(){function _e(gt){var bt=new Matrix;if(gt!==void 0){var wt=this._elem.finalTransform.mProp.getValueAtTime(gt);wt.clone(bt)}else{var St=this._elem.finalTransform.mProp;St.applyToMatrix(bt)}return bt}function et(gt,bt){var wt=this.getMatrix(bt);return wt.props[12]=0,wt.props[13]=0,wt.props[14]=0,this.applyPoint(wt,gt)}function tt(gt,bt){var wt=this.getMatrix(bt);return this.applyPoint(wt,gt)}function rt(gt,bt){var wt=this.getMatrix(bt);return wt.props[12]=0,wt.props[13]=0,wt.props[14]=0,this.invertPoint(wt,gt)}function it(gt,bt){var wt=this.getMatrix(bt);return this.invertPoint(wt,gt)}function st(gt,bt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var wt,St=this._elem.hierarchy.length;for(wt=0;wt<St;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(gt)}return gt.applyToPointArray(bt[0],bt[1],bt[2]||0)}function ut(gt,bt){if(this._elem.hierarchy&&this._elem.hierarchy.length){var wt,St=this._elem.hierarchy.length;for(wt=0;wt<St;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(gt)}return gt.inversePoint(bt)}function ht(gt){var bt=new Matrix;if(bt.reset(),this._elem.finalTransform.mProp.applyToMatrix(bt),this._elem.hierarchy&&this._elem.hierarchy.length){var wt,St=this._elem.hierarchy.length;for(wt=0;wt<St;wt+=1)this._elem.hierarchy[wt].finalTransform.mProp.applyToMatrix(bt);return bt.inversePoint(gt)}return bt.inversePoint(gt)}function at(){return[1,1,1,1]}return function(gt){var bt;function wt(It){kt.mask=new MaskManagerInterface(It,gt)}function St(It){kt.effect=It}function kt(It){switch(It){case"ADBE Root Vectors Group":case"Contents":case 2:return kt.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return bt;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return kt.effect;case"ADBE Text Properties":return kt.textInterface;default:return null}}kt.getMatrix=_e,kt.invertPoint=ut,kt.applyPoint=st,kt.toWorld=tt,kt.toWorldVec=et,kt.fromWorld=it,kt.fromWorldVec=rt,kt.toComp=tt,kt.fromComp=ht,kt.sampleImage=at,kt.sourceRectAtTime=gt.sourceRectAtTime.bind(gt),kt._elem=gt,bt=TransformExpressionInterface(gt.finalTransform.mProp);var Rt=getDescriptor(bt,"anchorPoint");return Object.defineProperties(kt,{hasParent:{get:function(){return gt.hierarchy.length}},parent:{get:function(){return gt.hierarchy[0].layerInterface}},rotation:getDescriptor(bt,"rotation"),scale:getDescriptor(bt,"scale"),position:getDescriptor(bt,"position"),opacity:getDescriptor(bt,"opacity"),anchorPoint:Rt,anchor_point:Rt,transform:{get:function(){return bt}},active:{get:function(){return gt.isInRange}}}),kt.startTime=gt.data.st,kt.index=gt.data.ind,kt.source=gt.data.refId,kt.height=gt.data.ty===0?gt.data.h:100,kt.width=gt.data.ty===0?gt.data.w:100,kt.inPoint=gt.data.ip/gt.comp.globalData.frameRate,kt.outPoint=gt.data.op/gt.comp.globalData.frameRate,kt._name=gt.data.nm,kt.registerMaskInterface=wt,kt.registerEffectsInterface=St,kt}}(),propertyGroupFactory=function(){return function(_e,et){return function(tt){return tt=tt===void 0?1:tt,tt<=0?_e:et(tt-1)}}}(),PropertyInterface=function(){return function(_e,et){var tt={_name:_e};function rt(it){return it=it===void 0?1:it,it<=0?tt:et(it-1)}return rt}}(),EffectsExpressionInterface=function(){var _e={createEffectsInterface:et};function et(it,st){if(it.effectsManager){var ut=[],ht=it.data.ef,at,gt=it.effectsManager.effectElements.length;for(at=0;at<gt;at+=1)ut.push(tt(ht[at],it.effectsManager.effectElements[at],st,it));var bt=it.data.ef||[],wt=function(kt){for(at=0,gt=bt.length;at<gt;){if(kt===bt[at].nm||kt===bt[at].mn||kt===bt[at].ix)return ut[at];at+=1}return null};return Object.defineProperty(wt,"numProperties",{get:function(){return bt.length}}),wt}return null}function tt(it,st,ut,ht){function at(kt){for(var Rt=it.ef,It=0,Dt=Rt.length;It<Dt;){if(kt===Rt[It].nm||kt===Rt[It].mn||kt===Rt[It].ix)return Rt[It].ty===5?bt[It]:bt[It]();It+=1}throw new Error}var gt=propertyGroupFactory(at,ut),bt=[],wt,St=it.ef.length;for(wt=0;wt<St;wt+=1)it.ef[wt].ty===5?bt.push(tt(it.ef[wt],st.effectElements[wt],st.effectElements[wt].propertyGroup,ht)):bt.push(rt(st.effectElements[wt],it.ef[wt].ty,ht,gt));return it.mn==="ADBE Color Control"&&Object.defineProperty(at,"color",{get:function(){return bt[0]()}}),Object.defineProperties(at,{numProperties:{get:function(){return it.np}},_name:{value:it.nm},propertyGroup:{value:gt}}),at.enabled=it.en!==0,at.active=at.enabled,at}function rt(it,st,ut,ht){var at=ExpressionPropertyInterface(it.p);function gt(){return st===10?ut.comp.compInterface(it.p.v):at()}return it.p.setGroupProperty&&it.p.setGroupProperty(PropertyInterface("",ht)),gt}return _e}(),ShapePathInterface=function(){return function(et,tt,rt){var it=tt.sh;function st(ht){return ht==="Shape"||ht==="shape"||ht==="Path"||ht==="path"||ht==="ADBE Vector Shape"||ht===2?st.path:null}var ut=propertyGroupFactory(st,rt);return it.setGroupProperty(PropertyInterface("Path",ut)),Object.defineProperties(st,{path:{get:function(){return it.k&&it.getValue(),it}},shape:{get:function(){return it.k&&it.getValue(),it}},_name:{value:et.nm},ix:{value:et.ix},propertyIndex:{value:et.ix},mn:{value:et.mn},propertyGroup:{value:rt}}),st}}(),ShapeExpressionInterface=function(){function _e(Rt,It,Dt){var Mt=[],$t,jt=Rt?Rt.length:0;for($t=0;$t<jt;$t+=1)Rt[$t].ty==="gr"?Mt.push(tt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="fl"?Mt.push(rt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="st"?Mt.push(ut(Rt[$t],It[$t],Dt)):Rt[$t].ty==="tm"?Mt.push(ht(Rt[$t],It[$t],Dt)):Rt[$t].ty==="tr"||(Rt[$t].ty==="el"?Mt.push(gt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="sr"?Mt.push(bt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="sh"?Mt.push(ShapePathInterface(Rt[$t],It[$t],Dt)):Rt[$t].ty==="rc"?Mt.push(wt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="rd"?Mt.push(St(Rt[$t],It[$t],Dt)):Rt[$t].ty==="rp"?Mt.push(kt(Rt[$t],It[$t],Dt)):Rt[$t].ty==="gf"?Mt.push(it(Rt[$t],It[$t],Dt)):Mt.push(st(Rt[$t],It[$t])));return Mt}function et(Rt,It,Dt){var Mt,$t=function(Ut){for(var Ht=0,Kt=Mt.length;Ht<Kt;){if(Mt[Ht]._name===Ut||Mt[Ht].mn===Ut||Mt[Ht].propertyIndex===Ut||Mt[Ht].ix===Ut||Mt[Ht].ind===Ut)return Mt[Ht];Ht+=1}return typeof Ut=="number"?Mt[Ut-1]:null};$t.propertyGroup=propertyGroupFactory($t,Dt),Mt=_e(Rt.it,It.it,$t.propertyGroup),$t.numProperties=Mt.length;var jt=at(Rt.it[Rt.it.length-1],It.it[It.it.length-1],$t.propertyGroup);return $t.transform=jt,$t.propertyIndex=Rt.cix,$t._name=Rt.nm,$t}function tt(Rt,It,Dt){var Mt=function(Ut){switch(Ut){case"ADBE Vectors Group":case"Contents":case 2:return Mt.content;default:return Mt.transform}};Mt.propertyGroup=propertyGroupFactory(Mt,Dt);var $t=et(Rt,It,Mt.propertyGroup),jt=at(Rt.it[Rt.it.length-1],It.it[It.it.length-1],Mt.propertyGroup);return Mt.content=$t,Mt.transform=jt,Object.defineProperty(Mt,"_name",{get:function(){return Rt.nm}}),Mt.numProperties=Rt.np,Mt.propertyIndex=Rt.ix,Mt.nm=Rt.nm,Mt.mn=Rt.mn,Mt}function rt(Rt,It,Dt){function Mt($t){return $t==="Color"||$t==="color"?Mt.color:$t==="Opacity"||$t==="opacity"?Mt.opacity:null}return Object.defineProperties(Mt,{color:{get:ExpressionPropertyInterface(It.c)},opacity:{get:ExpressionPropertyInterface(It.o)},_name:{value:Rt.nm},mn:{value:Rt.mn}}),It.c.setGroupProperty(PropertyInterface("Color",Dt)),It.o.setGroupProperty(PropertyInterface("Opacity",Dt)),Mt}function it(Rt,It,Dt){function Mt($t){return $t==="Start Point"||$t==="start point"?Mt.startPoint:$t==="End Point"||$t==="end point"?Mt.endPoint:$t==="Opacity"||$t==="opacity"?Mt.opacity:null}return Object.defineProperties(Mt,{startPoint:{get:ExpressionPropertyInterface(It.s)},endPoint:{get:ExpressionPropertyInterface(It.e)},opacity:{get:ExpressionPropertyInterface(It.o)},type:{get:function(){return"a"}},_name:{value:Rt.nm},mn:{value:Rt.mn}}),It.s.setGroupProperty(PropertyInterface("Start Point",Dt)),It.e.setGroupProperty(PropertyInterface("End Point",Dt)),It.o.setGroupProperty(PropertyInterface("Opacity",Dt)),Mt}function st(){function Rt(){return null}return Rt}function ut(Rt,It,Dt){var Mt=propertyGroupFactory(Kt,Dt),$t=propertyGroupFactory(Ht,Mt);function jt(tr){Object.defineProperty(Ht,Rt.d[tr].nm,{get:ExpressionPropertyInterface(It.d.dataProps[tr].p)})}var Nt,Ut=Rt.d?Rt.d.length:0,Ht={};for(Nt=0;Nt<Ut;Nt+=1)jt(Nt),It.d.dataProps[Nt].p.setGroupProperty($t);function Kt(tr){return tr==="Color"||tr==="color"?Kt.color:tr==="Opacity"||tr==="opacity"?Kt.opacity:tr==="Stroke Width"||tr==="stroke width"?Kt.strokeWidth:null}return Object.defineProperties(Kt,{color:{get:ExpressionPropertyInterface(It.c)},opacity:{get:ExpressionPropertyInterface(It.o)},strokeWidth:{get:ExpressionPropertyInterface(It.w)},dash:{get:function(){return Ht}},_name:{value:Rt.nm},mn:{value:Rt.mn}}),It.c.setGroupProperty(PropertyInterface("Color",Mt)),It.o.setGroupProperty(PropertyInterface("Opacity",Mt)),It.w.setGroupProperty(PropertyInterface("Stroke Width",Mt)),Kt}function ht(Rt,It,Dt){function Mt(jt){return jt===Rt.e.ix||jt==="End"||jt==="end"?Mt.end:jt===Rt.s.ix?Mt.start:jt===Rt.o.ix?Mt.offset:null}var $t=propertyGroupFactory(Mt,Dt);return Mt.propertyIndex=Rt.ix,It.s.setGroupProperty(PropertyInterface("Start",$t)),It.e.setGroupProperty(PropertyInterface("End",$t)),It.o.setGroupProperty(PropertyInterface("Offset",$t)),Mt.propertyIndex=Rt.ix,Mt.propertyGroup=Dt,Object.defineProperties(Mt,{start:{get:ExpressionPropertyInterface(It.s)},end:{get:ExpressionPropertyInterface(It.e)},offset:{get:ExpressionPropertyInterface(It.o)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}function at(Rt,It,Dt){function Mt(jt){return Rt.a.ix===jt||jt==="Anchor Point"?Mt.anchorPoint:Rt.o.ix===jt||jt==="Opacity"?Mt.opacity:Rt.p.ix===jt||jt==="Position"?Mt.position:Rt.r.ix===jt||jt==="Rotation"||jt==="ADBE Vector Rotation"?Mt.rotation:Rt.s.ix===jt||jt==="Scale"?Mt.scale:Rt.sk&&Rt.sk.ix===jt||jt==="Skew"?Mt.skew:Rt.sa&&Rt.sa.ix===jt||jt==="Skew Axis"?Mt.skewAxis:null}var $t=propertyGroupFactory(Mt,Dt);return It.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",$t)),It.transform.mProps.p.setGroupProperty(PropertyInterface("Position",$t)),It.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",$t)),It.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",$t)),It.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",$t)),It.transform.mProps.sk&&(It.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",$t)),It.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",$t))),It.transform.op.setGroupProperty(PropertyInterface("Opacity",$t)),Object.defineProperties(Mt,{opacity:{get:ExpressionPropertyInterface(It.transform.mProps.o)},position:{get:ExpressionPropertyInterface(It.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(It.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(It.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(It.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(It.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(It.transform.mProps.sa)},_name:{value:Rt.nm}}),Mt.ty="tr",Mt.mn=Rt.mn,Mt.propertyGroup=Dt,Mt}function gt(Rt,It,Dt){function Mt(Nt){return Rt.p.ix===Nt?Mt.position:Rt.s.ix===Nt?Mt.size:null}var $t=propertyGroupFactory(Mt,Dt);Mt.propertyIndex=Rt.ix;var jt=It.sh.ty==="tm"?It.sh.prop:It.sh;return jt.s.setGroupProperty(PropertyInterface("Size",$t)),jt.p.setGroupProperty(PropertyInterface("Position",$t)),Object.defineProperties(Mt,{size:{get:ExpressionPropertyInterface(jt.s)},position:{get:ExpressionPropertyInterface(jt.p)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}function bt(Rt,It,Dt){function Mt(Nt){return Rt.p.ix===Nt?Mt.position:Rt.r.ix===Nt?Mt.rotation:Rt.pt.ix===Nt?Mt.points:Rt.or.ix===Nt||Nt==="ADBE Vector Star Outer Radius"?Mt.outerRadius:Rt.os.ix===Nt?Mt.outerRoundness:Rt.ir&&(Rt.ir.ix===Nt||Nt==="ADBE Vector Star Inner Radius")?Mt.innerRadius:Rt.is&&Rt.is.ix===Nt?Mt.innerRoundness:null}var $t=propertyGroupFactory(Mt,Dt),jt=It.sh.ty==="tm"?It.sh.prop:It.sh;return Mt.propertyIndex=Rt.ix,jt.or.setGroupProperty(PropertyInterface("Outer Radius",$t)),jt.os.setGroupProperty(PropertyInterface("Outer Roundness",$t)),jt.pt.setGroupProperty(PropertyInterface("Points",$t)),jt.p.setGroupProperty(PropertyInterface("Position",$t)),jt.r.setGroupProperty(PropertyInterface("Rotation",$t)),Rt.ir&&(jt.ir.setGroupProperty(PropertyInterface("Inner Radius",$t)),jt.is.setGroupProperty(PropertyInterface("Inner Roundness",$t))),Object.defineProperties(Mt,{position:{get:ExpressionPropertyInterface(jt.p)},rotation:{get:ExpressionPropertyInterface(jt.r)},points:{get:ExpressionPropertyInterface(jt.pt)},outerRadius:{get:ExpressionPropertyInterface(jt.or)},outerRoundness:{get:ExpressionPropertyInterface(jt.os)},innerRadius:{get:ExpressionPropertyInterface(jt.ir)},innerRoundness:{get:ExpressionPropertyInterface(jt.is)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}function wt(Rt,It,Dt){function Mt(Nt){return Rt.p.ix===Nt?Mt.position:Rt.r.ix===Nt?Mt.roundness:Rt.s.ix===Nt||Nt==="Size"||Nt==="ADBE Vector Rect Size"?Mt.size:null}var $t=propertyGroupFactory(Mt,Dt),jt=It.sh.ty==="tm"?It.sh.prop:It.sh;return Mt.propertyIndex=Rt.ix,jt.p.setGroupProperty(PropertyInterface("Position",$t)),jt.s.setGroupProperty(PropertyInterface("Size",$t)),jt.r.setGroupProperty(PropertyInterface("Rotation",$t)),Object.defineProperties(Mt,{position:{get:ExpressionPropertyInterface(jt.p)},roundness:{get:ExpressionPropertyInterface(jt.r)},size:{get:ExpressionPropertyInterface(jt.s)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}function St(Rt,It,Dt){function Mt(Nt){return Rt.r.ix===Nt||Nt==="Round Corners 1"?Mt.radius:null}var $t=propertyGroupFactory(Mt,Dt),jt=It;return Mt.propertyIndex=Rt.ix,jt.rd.setGroupProperty(PropertyInterface("Radius",$t)),Object.defineProperties(Mt,{radius:{get:ExpressionPropertyInterface(jt.rd)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}function kt(Rt,It,Dt){function Mt(Nt){return Rt.c.ix===Nt||Nt==="Copies"?Mt.copies:Rt.o.ix===Nt||Nt==="Offset"?Mt.offset:null}var $t=propertyGroupFactory(Mt,Dt),jt=It;return Mt.propertyIndex=Rt.ix,jt.c.setGroupProperty(PropertyInterface("Copies",$t)),jt.o.setGroupProperty(PropertyInterface("Offset",$t)),Object.defineProperties(Mt,{copies:{get:ExpressionPropertyInterface(jt.c)},offset:{get:ExpressionPropertyInterface(jt.o)},_name:{value:Rt.nm}}),Mt.mn=Rt.mn,Mt}return function(Rt,It,Dt){var Mt;function $t(Nt){if(typeof Nt=="number")return Nt=Nt===void 0?1:Nt,Nt===0?Dt:Mt[Nt-1];for(var Ut=0,Ht=Mt.length;Ut<Ht;){if(Mt[Ut]._name===Nt)return Mt[Ut];Ut+=1}return null}function jt(){return Dt}return $t.propertyGroup=propertyGroupFactory($t,jt),Mt=_e(Rt,It,$t.propertyGroup),$t.numProperties=Mt.length,$t._name="Contents",$t}}(),TextExpressionInterface=function(){return function(_e){var et;function tt(rt){switch(rt){case"ADBE Text Document":return tt.sourceText;default:return null}}return Object.defineProperty(tt,"sourceText",{get:function(){_e.textProperty.getValue();var it=_e.textProperty.currentData.t;return(!et||it!==et.value)&&(et=new String(it),et.value=it||new String(it),Object.defineProperty(et,"style",{get:function(){return{fillColor:_e.textProperty.currentData.fc}}})),et}}),tt}}();function _typeof(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(tt){return typeof tt}:_typeof=function(tt){return tt&&typeof Symbol=="function"&&tt.constructor===Symbol&&tt!==Symbol.prototype?"symbol":typeof tt},_typeof(_e)}var FootageInterface=function(){var _e=function(rt){var it="",st=rt.getFootageData();function ut(){return it="",st=rt.getFootageData(),ht}function ht(at){if(st[at])return it=at,st=st[at],_typeof(st)==="object"?ht:st;var gt=at.indexOf(it);if(gt!==-1){var bt=parseInt(at.substr(gt+it.length),10);return st=st[bt],_typeof(st)==="object"?ht:st}return""}return ut},et=function(rt){function it(st){return st==="Outline"?it.outlineInterface():null}return it._name="Outline",it.outlineInterface=_e(rt),it};return function(tt){function rt(it){return it==="Data"?rt.dataInterface:null}return rt._name="Data",rt.dataInterface=et(tt),rt}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(_e){return interfaces[_e]||null}var expressionHelpers=function(){function _e(ut,ht,at){ht.x&&(at.k=!0,at.x=!0,at.initiateExpression=ExpressionManager.initiateExpression,at.effectsSequence.push(at.initiateExpression(ut,ht,at).bind(at)))}function et(ut){return ut*=this.elem.globalData.frameRate,ut-=this.offsetTime,ut!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<ut?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(ut,this._cachingAtTime),this._cachingAtTime.lastFrame=ut),this._cachingAtTime.value}function tt(ut){var ht=-.01,at=this.getValueAtTime(ut),gt=this.getValueAtTime(ut+ht),bt=0;if(at.length){var wt;for(wt=0;wt<at.length;wt+=1)bt+=Math.pow(gt[wt]-at[wt],2);bt=Math.sqrt(bt)*100}else bt=0;return bt}function rt(ut){if(this.vel!==void 0)return this.vel;var ht=-.001,at=this.getValueAtTime(ut),gt=this.getValueAtTime(ut+ht),bt;if(at.length){bt=createTypedArray("float32",at.length);var wt;for(wt=0;wt<at.length;wt+=1)bt[wt]=(gt[wt]-at[wt])/ht}else bt=(gt-at)/ht;return bt}function it(){return this.pv}function st(ut){this.propertyGroup=ut}return{searchExpressions:_e,getSpeedAtTime:tt,getVelocityAtTime:rt,getValueAtTime:et,getStaticValueAtTime:it,setGroupProperty:st}}();function addPropertyDecorator(){function _e(St,kt,Rt){if(!this.k||!this.keyframes)return this.pv;St=St?St.toLowerCase():"";var It=this.comp.renderedFrame,Dt=this.keyframes,Mt=Dt[Dt.length-1].t;if(It<=Mt)return this.pv;var $t,jt;Rt?(kt?$t=Math.abs(Mt-this.elem.comp.globalData.frameRate*kt):$t=Math.max(0,Mt-this.elem.data.ip),jt=Mt-$t):((!kt||kt>Dt.length-1)&&(kt=Dt.length-1),jt=Dt[Dt.length-1-kt].t,$t=Mt-jt);var Nt,Ut,Ht;if(St==="pingpong"){var Kt=Math.floor((It-jt)/$t);if(Kt%2!==0)return this.getValueAtTime(($t-(It-jt)%$t+jt)/this.comp.globalData.frameRate,0)}else if(St==="offset"){var tr=this.getValueAtTime(jt/this.comp.globalData.frameRate,0),mr=this.getValueAtTime(Mt/this.comp.globalData.frameRate,0),vr=this.getValueAtTime(((It-jt)%$t+jt)/this.comp.globalData.frameRate,0),wr=Math.floor((It-jt)/$t);if(this.pv.length){for(Ht=new Array(tr.length),Ut=Ht.length,Nt=0;Nt<Ut;Nt+=1)Ht[Nt]=(mr[Nt]-tr[Nt])*wr+vr[Nt];return Ht}return(mr-tr)*wr+vr}else if(St==="continue"){var yr=this.getValueAtTime(Mt/this.comp.globalData.frameRate,0),Or=this.getValueAtTime((Mt-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ht=new Array(yr.length),Ut=Ht.length,Nt=0;Nt<Ut;Nt+=1)Ht[Nt]=yr[Nt]+(yr[Nt]-Or[Nt])*((It-Mt)/this.comp.globalData.frameRate)/5e-4;return Ht}return yr+(yr-Or)*((It-Mt)/.001)}return this.getValueAtTime(((It-jt)%$t+jt)/this.comp.globalData.frameRate,0)}function et(St,kt,Rt){if(!this.k)return this.pv;St=St?St.toLowerCase():"";var It=this.comp.renderedFrame,Dt=this.keyframes,Mt=Dt[0].t;if(It>=Mt)return this.pv;var $t,jt;Rt?(kt?$t=Math.abs(this.elem.comp.globalData.frameRate*kt):$t=Math.max(0,this.elem.data.op-Mt),jt=Mt+$t):((!kt||kt>Dt.length-1)&&(kt=Dt.length-1),jt=Dt[kt].t,$t=jt-Mt);var Nt,Ut,Ht;if(St==="pingpong"){var Kt=Math.floor((Mt-It)/$t);if(Kt%2===0)return this.getValueAtTime(((Mt-It)%$t+Mt)/this.comp.globalData.frameRate,0)}else if(St==="offset"){var tr=this.getValueAtTime(Mt/this.comp.globalData.frameRate,0),mr=this.getValueAtTime(jt/this.comp.globalData.frameRate,0),vr=this.getValueAtTime(($t-(Mt-It)%$t+Mt)/this.comp.globalData.frameRate,0),wr=Math.floor((Mt-It)/$t)+1;if(this.pv.length){for(Ht=new Array(tr.length),Ut=Ht.length,Nt=0;Nt<Ut;Nt+=1)Ht[Nt]=vr[Nt]-(mr[Nt]-tr[Nt])*wr;return Ht}return vr-(mr-tr)*wr}else if(St==="continue"){var yr=this.getValueAtTime(Mt/this.comp.globalData.frameRate,0),Or=this.getValueAtTime((Mt+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(Ht=new Array(yr.length),Ut=Ht.length,Nt=0;Nt<Ut;Nt+=1)Ht[Nt]=yr[Nt]+(yr[Nt]-Or[Nt])*(Mt-It)/.001;return Ht}return yr+(yr-Or)*(Mt-It)/.001}return this.getValueAtTime(($t-((Mt-It)%$t+Mt))/this.comp.globalData.frameRate,0)}function tt(St,kt){if(!this.k)return this.pv;if(St=(St||.4)*.5,kt=Math.floor(kt||5),kt<=1)return this.pv;var Rt=this.comp.renderedFrame/this.comp.globalData.frameRate,It=Rt-St,Dt=Rt+St,Mt=kt>1?(Dt-It)/(kt-1):1,$t=0,jt=0,Nt;this.pv.length?Nt=createTypedArray("float32",this.pv.length):Nt=0;for(var Ut;$t<kt;){if(Ut=this.getValueAtTime(It+$t*Mt),this.pv.length)for(jt=0;jt<this.pv.length;jt+=1)Nt[jt]+=Ut[jt];else Nt+=Ut;$t+=1}if(this.pv.length)for(jt=0;jt<this.pv.length;jt+=1)Nt[jt]/=kt;else Nt/=kt;return Nt}function rt(St){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var kt=this._transformCachingAtTime.v;if(kt.cloneFromProps(this.pre.props),this.appliedTransformations<1){var Rt=this.a.getValueAtTime(St);kt.translate(-Rt[0]*this.a.mult,-Rt[1]*this.a.mult,Rt[2]*this.a.mult)}if(this.appliedTransformations<2){var It=this.s.getValueAtTime(St);kt.scale(It[0]*this.s.mult,It[1]*this.s.mult,It[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Dt=this.sk.getValueAtTime(St),Mt=this.sa.getValueAtTime(St);kt.skewFromAxis(-Dt*this.sk.mult,Mt*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var $t=this.r.getValueAtTime(St);kt.rotate(-$t*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var jt=this.rz.getValueAtTime(St),Nt=this.ry.getValueAtTime(St),Ut=this.rx.getValueAtTime(St),Ht=this.or.getValueAtTime(St);kt.rotateZ(-jt*this.rz.mult).rotateY(Nt*this.ry.mult).rotateX(Ut*this.rx.mult).rotateZ(-Ht[2]*this.or.mult).rotateY(Ht[1]*this.or.mult).rotateX(Ht[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var Kt=this.px.getValueAtTime(St),tr=this.py.getValueAtTime(St);if(this.data.p.z){var mr=this.pz.getValueAtTime(St);kt.translate(Kt*this.px.mult,tr*this.py.mult,-mr*this.pz.mult)}else kt.translate(Kt*this.px.mult,tr*this.py.mult,0)}else{var vr=this.p.getValueAtTime(St);kt.translate(vr[0]*this.p.mult,vr[1]*this.p.mult,-vr[2]*this.p.mult)}return kt}function it(){return this.v.clone(new Matrix)}var st=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(St,kt,Rt){var It=st(St,kt,Rt);return It.dynamicProperties.length?It.getValueAtTime=rt.bind(It):It.getValueAtTime=it.bind(It),It.setGroupProperty=expressionHelpers.setGroupProperty,It};var ut=PropertyFactory.getProp;PropertyFactory.getProp=function(St,kt,Rt,It,Dt){var Mt=ut(St,kt,Rt,It,Dt);Mt.kf?Mt.getValueAtTime=expressionHelpers.getValueAtTime.bind(Mt):Mt.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(Mt),Mt.setGroupProperty=expressionHelpers.setGroupProperty,Mt.loopOut=_e,Mt.loopIn=et,Mt.smooth=tt,Mt.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(Mt),Mt.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(Mt),Mt.numKeys=kt.a===1?kt.k.length:0,Mt.propertyIndex=kt.ix;var $t=0;return Rt!==0&&($t=createTypedArray("float32",kt.a===1?kt.k[0].s.length:kt.k.length)),Mt._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:$t},expressionHelpers.searchExpressions(St,kt,Mt),Mt.k&&Dt.addDynamicProperty(Mt),Mt};function ht(St){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),St*=this.elem.globalData.frameRate,St-=this.offsetTime,St!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<St?this._caching.lastIndex:0,this._cachingAtTime.lastTime=St,this.interpolateShape(St,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var at=ShapePropertyFactory.getConstructorFunction(),gt=ShapePropertyFactory.getKeyframedConstructorFunction();function bt(){}bt.prototype={vertices:function(kt,Rt){this.k&&this.getValue();var It=this.v;Rt!==void 0&&(It=this.getValueAtTime(Rt,0));var Dt,Mt=It._length,$t=It[kt],jt=It.v,Nt=createSizedArray(Mt);for(Dt=0;Dt<Mt;Dt+=1)kt==="i"||kt==="o"?Nt[Dt]=[$t[Dt][0]-jt[Dt][0],$t[Dt][1]-jt[Dt][1]]:Nt[Dt]=[$t[Dt][0],$t[Dt][1]];return Nt},points:function(kt){return this.vertices("v",kt)},inTangents:function(kt){return this.vertices("i",kt)},outTangents:function(kt){return this.vertices("o",kt)},isClosed:function(){return this.v.c},pointOnPath:function(kt,Rt){var It=this.v;Rt!==void 0&&(It=this.getValueAtTime(Rt,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(It));for(var Dt=this._segmentsLength,Mt=Dt.lengths,$t=Dt.totalLength*kt,jt=0,Nt=Mt.length,Ut=0,Ht;jt<Nt;){if(Ut+Mt[jt].addedLength>$t){var Kt=jt,tr=It.c&&jt===Nt-1?0:jt+1,mr=($t-Ut)/Mt[jt].addedLength;Ht=bez.getPointInSegment(It.v[Kt],It.v[tr],It.o[Kt],It.i[tr],mr,Mt[jt]);break}else Ut+=Mt[jt].addedLength;jt+=1}return Ht||(Ht=It.c?[It.v[0][0],It.v[0][1]]:[It.v[It._length-1][0],It.v[It._length-1][1]]),Ht},vectorOnPath:function(kt,Rt,It){kt==1?kt=this.v.c:kt==0&&(kt=.999);var Dt=this.pointOnPath(kt,Rt),Mt=this.pointOnPath(kt+.001,Rt),$t=Mt[0]-Dt[0],jt=Mt[1]-Dt[1],Nt=Math.sqrt(Math.pow($t,2)+Math.pow(jt,2));if(Nt===0)return[0,0];var Ut=It==="tangent"?[$t/Nt,jt/Nt]:[-jt/Nt,$t/Nt];return Ut},tangentOnPath:function(kt,Rt){return this.vectorOnPath(kt,Rt,"tangent")},normalOnPath:function(kt,Rt){return this.vectorOnPath(kt,Rt,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([bt],at),extendPrototype([bt],gt),gt.prototype.getValueAtTime=ht,gt.prototype.initiateExpression=ExpressionManager.initiateExpression;var wt=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(St,kt,Rt,It,Dt){var Mt=wt(St,kt,Rt,It,Dt);return Mt.propertyIndex=kt.ix,Mt.lock=!1,Rt===3?expressionHelpers.searchExpressions(St,kt.pt,Mt):Rt===4&&expressionHelpers.searchExpressions(St,kt.ks,Mt),Mt.k&&St.addDynamicProperty(Mt),Mt}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function _e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(et,tt){var rt=this.calculateExpression(tt);if(et.t!==rt){var it={};return this.copyData(it,et),it.t=rt.toString(),it.__complete=!1,it}return et},TextProperty.prototype.searchProperty=function(){var et=this.searchKeyframes(),tt=this.searchExpressions();return this.kf=et||tt,this.kf},TextProperty.prototype.searchExpressions=_e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function _e(et,tt){var rt=createNS("feMerge");rt.setAttribute("result",et);var it,st;for(st=0;st<tt.length;st+=1)it=createNS("feMergeNode"),it.setAttribute("in",tt[st]),rt.appendChild(it),rt.appendChild(it);return rt}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(_e,et,tt,rt,it){this.filterManager=et;var st=createNS("feColorMatrix");st.setAttribute("type","matrix"),st.setAttribute("color-interpolation-filters","linearRGB"),st.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=st,st.setAttribute("result",rt+"_tint_1"),_e.appendChild(st),st=createNS("feColorMatrix"),st.setAttribute("type","matrix"),st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),st.setAttribute("result",rt+"_tint_2"),_e.appendChild(st),this.matrixFilter=st;var ut=this.createMergeNode(rt,[it,rt+"_tint_1",rt+"_tint_2"]);_e.appendChild(ut)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){var et=this.filterManager.effectElements[0].p.v,tt=this.filterManager.effectElements[1].p.v,rt=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+rt+" 0"),this.matrixFilter.setAttribute("values",tt[0]-et[0]+" 0 0 0 "+et[0]+" "+(tt[1]-et[1])+" 0 0 0 "+et[1]+" "+(tt[2]-et[2])+" 0 0 0 "+et[2]+" 0 0 0 1 0")}};function SVGFillFilter(_e,et,tt,rt){this.filterManager=et;var it=createNS("feColorMatrix");it.setAttribute("type","matrix"),it.setAttribute("color-interpolation-filters","sRGB"),it.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),it.setAttribute("result",rt),_e.appendChild(it),this.matrixFilter=it}SVGFillFilter.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){var et=this.filterManager.effectElements[2].p.v,tt=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+et[0]+" 0 0 0 0 "+et[1]+" 0 0 0 0 "+et[2]+" 0 0 0 "+tt+" 0")}};function SVGStrokeEffect(_e,et,tt){this.initialized=!1,this.filterManager=et,this.elem=tt,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var _e=this.elem.layerElement.children||this.elem.layerElement.childNodes,et,tt,rt,it;for(this.filterManager.effectElements[1].p.v===1?(it=this.elem.maskManager.masksProperties.length,rt=0):(rt=this.filterManager.effectElements[0].p.v-1,it=rt+1),tt=createNS("g"),tt.setAttribute("fill","none"),tt.setAttribute("stroke-linecap","round"),tt.setAttribute("stroke-dashoffset",1),rt;rt<it;rt+=1)et=createNS("path"),tt.appendChild(et),this.paths.push({p:et,m:rt});if(this.filterManager.effectElements[10].p.v===3){var st=createNS("mask"),ut=createElementID();st.setAttribute("id",ut),st.setAttribute("mask-type","alpha"),st.appendChild(tt),this.elem.globalData.defs.appendChild(st);var ht=createNS("g");for(ht.setAttribute("mask","url("+getLocationHref()+"#"+ut+")");_e[0];)ht.appendChild(_e[0]);this.elem.layerElement.appendChild(ht),this.masker=st,tt.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(_e=this.elem.layerElement.children||this.elem.layerElement.childNodes;_e.length;)this.elem.layerElement.removeChild(_e[0]);this.elem.layerElement.appendChild(tt),this.elem.layerElement.removeAttribute("mask"),tt.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=tt},SVGStrokeEffect.prototype.renderFrame=function(_e){this.initialized||this.initialize();var et,tt=this.paths.length,rt,it;for(et=0;et<tt;et+=1)if(this.paths[et].m!==-1&&(rt=this.elem.maskManager.viewData[this.paths[et].m],it=this.paths[et].p,(_e||this.filterManager._mdf||rt.prop._mdf)&&it.setAttribute("d",rt.lastPath),_e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||rt.prop._mdf)){var st;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var ut=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,ht=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,at=it.getTotalLength();st="0 0 0 "+at*ut+" ";var gt=at*(ht-ut),bt=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,wt=Math.floor(gt/bt),St;for(St=0;St<wt;St+=1)st+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";st+="0 "+at*10+" 0 0"}else st="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;it.setAttribute("stroke-dasharray",st)}if((_e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(_e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(_e||this.filterManager.effectElements[3].p._mdf)){var kt=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(kt[0]*255)+","+bmFloor(kt[1]*255)+","+bmFloor(kt[2]*255)+")")}};function SVGTritoneFilter(_e,et,tt,rt){this.filterManager=et;var it=createNS("feColorMatrix");it.setAttribute("type","matrix"),it.setAttribute("color-interpolation-filters","linearRGB"),it.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),_e.appendChild(it);var st=createNS("feComponentTransfer");st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("result",rt),this.matrixFilter=st;var ut=createNS("feFuncR");ut.setAttribute("type","table"),st.appendChild(ut),this.feFuncR=ut;var ht=createNS("feFuncG");ht.setAttribute("type","table"),st.appendChild(ht),this.feFuncG=ht;var at=createNS("feFuncB");at.setAttribute("type","table"),st.appendChild(at),this.feFuncB=at,_e.appendChild(st)}SVGTritoneFilter.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){var et=this.filterManager.effectElements[0].p.v,tt=this.filterManager.effectElements[1].p.v,rt=this.filterManager.effectElements[2].p.v,it=rt[0]+" "+tt[0]+" "+et[0],st=rt[1]+" "+tt[1]+" "+et[1],ut=rt[2]+" "+tt[2]+" "+et[2];this.feFuncR.setAttribute("tableValues",it),this.feFuncG.setAttribute("tableValues",st),this.feFuncB.setAttribute("tableValues",ut)}};function SVGProLevelsFilter(_e,et,tt,rt){this.filterManager=et;var it=this.filterManager.effectElements,st=createNS("feComponentTransfer");(it[10].p.k||it[10].p.v!==0||it[11].p.k||it[11].p.v!==1||it[12].p.k||it[12].p.v!==1||it[13].p.k||it[13].p.v!==0||it[14].p.k||it[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",st)),(it[17].p.k||it[17].p.v!==0||it[18].p.k||it[18].p.v!==1||it[19].p.k||it[19].p.v!==1||it[20].p.k||it[20].p.v!==0||it[21].p.k||it[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",st)),(it[24].p.k||it[24].p.v!==0||it[25].p.k||it[25].p.v!==1||it[26].p.k||it[26].p.v!==1||it[27].p.k||it[27].p.v!==0||it[28].p.k||it[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",st)),(it[31].p.k||it[31].p.v!==0||it[32].p.k||it[32].p.v!==1||it[33].p.k||it[33].p.v!==1||it[34].p.k||it[34].p.v!==0||it[35].p.k||it[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",st)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(st.setAttribute("color-interpolation-filters","sRGB"),_e.appendChild(st)),(it[3].p.k||it[3].p.v!==0||it[4].p.k||it[4].p.v!==1||it[5].p.k||it[5].p.v!==1||it[6].p.k||it[6].p.v!==0||it[7].p.k||it[7].p.v!==1)&&(st=createNS("feComponentTransfer"),st.setAttribute("color-interpolation-filters","sRGB"),st.setAttribute("result",rt),_e.appendChild(st),this.feFuncRComposed=this.createFeFunc("feFuncR",st),this.feFuncGComposed=this.createFeFunc("feFuncG",st),this.feFuncBComposed=this.createFeFunc("feFuncB",st))}SVGProLevelsFilter.prototype.createFeFunc=function(_e,et){var tt=createNS(_e);return tt.setAttribute("type","table"),et.appendChild(tt),tt},SVGProLevelsFilter.prototype.getTableValue=function(_e,et,tt,rt,it){for(var st=0,ut=256,ht,at=Math.min(_e,et),gt=Math.max(_e,et),bt=Array.call(null,{length:ut}),wt,St=0,kt=it-rt,Rt=et-_e;st<=256;)ht=st/256,ht<=at?wt=Rt<0?it:rt:ht>=gt?wt=Rt<0?rt:it:wt=rt+kt*Math.pow((ht-_e)/Rt,1/tt),bt[St]=wt,St+=1,st+=256/(ut-1);return bt.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){var et,tt=this.filterManager.effectElements;this.feFuncRComposed&&(_e||tt[3].p._mdf||tt[4].p._mdf||tt[5].p._mdf||tt[6].p._mdf||tt[7].p._mdf)&&(et=this.getTableValue(tt[3].p.v,tt[4].p.v,tt[5].p.v,tt[6].p.v,tt[7].p.v),this.feFuncRComposed.setAttribute("tableValues",et),this.feFuncGComposed.setAttribute("tableValues",et),this.feFuncBComposed.setAttribute("tableValues",et)),this.feFuncR&&(_e||tt[10].p._mdf||tt[11].p._mdf||tt[12].p._mdf||tt[13].p._mdf||tt[14].p._mdf)&&(et=this.getTableValue(tt[10].p.v,tt[11].p.v,tt[12].p.v,tt[13].p.v,tt[14].p.v),this.feFuncR.setAttribute("tableValues",et)),this.feFuncG&&(_e||tt[17].p._mdf||tt[18].p._mdf||tt[19].p._mdf||tt[20].p._mdf||tt[21].p._mdf)&&(et=this.getTableValue(tt[17].p.v,tt[18].p.v,tt[19].p.v,tt[20].p.v,tt[21].p.v),this.feFuncG.setAttribute("tableValues",et)),this.feFuncB&&(_e||tt[24].p._mdf||tt[25].p._mdf||tt[26].p._mdf||tt[27].p._mdf||tt[28].p._mdf)&&(et=this.getTableValue(tt[24].p.v,tt[25].p.v,tt[26].p.v,tt[27].p.v,tt[28].p.v),this.feFuncB.setAttribute("tableValues",et)),this.feFuncA&&(_e||tt[31].p._mdf||tt[32].p._mdf||tt[33].p._mdf||tt[34].p._mdf||tt[35].p._mdf)&&(et=this.getTableValue(tt[31].p.v,tt[32].p.v,tt[33].p.v,tt[34].p.v,tt[35].p.v),this.feFuncA.setAttribute("tableValues",et))}};function SVGDropShadowEffect(_e,et,tt,rt,it){var st=et.container.globalData.renderConfig.filterSize,ut=et.data.fs||st;_e.setAttribute("x",ut.x||st.x),_e.setAttribute("y",ut.y||st.y),_e.setAttribute("width",ut.width||st.width),_e.setAttribute("height",ut.height||st.height),this.filterManager=et;var ht=createNS("feGaussianBlur");ht.setAttribute("in","SourceAlpha"),ht.setAttribute("result",rt+"_drop_shadow_1"),ht.setAttribute("stdDeviation","0"),this.feGaussianBlur=ht,_e.appendChild(ht);var at=createNS("feOffset");at.setAttribute("dx","25"),at.setAttribute("dy","0"),at.setAttribute("in",rt+"_drop_shadow_1"),at.setAttribute("result",rt+"_drop_shadow_2"),this.feOffset=at,_e.appendChild(at);var gt=createNS("feFlood");gt.setAttribute("flood-color","#00ff00"),gt.setAttribute("flood-opacity","1"),gt.setAttribute("result",rt+"_drop_shadow_3"),this.feFlood=gt,_e.appendChild(gt);var bt=createNS("feComposite");bt.setAttribute("in",rt+"_drop_shadow_3"),bt.setAttribute("in2",rt+"_drop_shadow_2"),bt.setAttribute("operator","in"),bt.setAttribute("result",rt+"_drop_shadow_4"),_e.appendChild(bt);var wt=this.createMergeNode(rt,[rt+"_drop_shadow_4",it]);_e.appendChild(wt)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){if((_e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),_e||this.filterManager.effectElements[0].p._mdf){var et=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(et[0]*255),Math.round(et[1]*255),Math.round(et[2]*255)))}if((_e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),_e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var tt=this.filterManager.effectElements[3].p.v,rt=(this.filterManager.effectElements[2].p.v-90)*degToRads,it=tt*Math.cos(rt),st=tt*Math.sin(rt);this.feOffset.setAttribute("dx",it),this.feOffset.setAttribute("dy",st)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(_e,et,tt){this.initialized=!1,this.filterManager=et,this.filterElem=_e,this.elem=tt,tt.matteElement=createNS("g"),tt.matteElement.appendChild(tt.layerElement),tt.matteElement.appendChild(tt.transformedElement),tt.baseElement=tt.matteElement}SVGMatte3Effect.prototype.findSymbol=function(_e){for(var et=0,tt=_svgMatteSymbols.length;et<tt;){if(_svgMatteSymbols[et]===_e)return _svgMatteSymbols[et];et+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(_e,et){var tt=_e.layerElement.parentNode;if(tt){for(var rt=tt.children,it=0,st=rt.length;it<st&&rt[it]!==_e.layerElement;)it+=1;var ut;it<=st-2&&(ut=rt[it+1]);var ht=createNS("use");ht.setAttribute("href","#"+et),ut?tt.insertBefore(ht,ut):tt.appendChild(ht)}},SVGMatte3Effect.prototype.setElementAsMask=function(_e,et){if(!this.findSymbol(et)){var tt=createElementID(),rt=createNS("mask");rt.setAttribute("id",et.layerId),rt.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(et);var it=_e.globalData.defs;it.appendChild(rt);var st=createNS("symbol");st.setAttribute("id",tt),this.replaceInParent(et,tt),st.appendChild(et.layerElement),it.appendChild(st);var ut=createNS("use");ut.setAttribute("href","#"+tt),rt.appendChild(ut),et.data.hd=!1,et.show()}_e.setMatte(et.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var _e=this.filterManager.effectElements[0].p.v,et=this.elem.comp.elements,tt=0,rt=et.length;tt<rt;)et[tt]&&et[tt].data.ind===_e&&this.setElementAsMask(this.elem,et[tt]),tt+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(_e,et,tt,rt){_e.setAttribute("x","-100%"),_e.setAttribute("y","-100%"),_e.setAttribute("width","300%"),_e.setAttribute("height","300%"),this.filterManager=et;var it=createNS("feGaussianBlur");it.setAttribute("result",rt),_e.appendChild(it),this.feGaussianBlur=it}SVGGaussianBlurEffect.prototype.renderFrame=function(_e){if(_e||this.filterManager._mdf){var et=.3,tt=this.filterManager.effectElements[0].p.v*et,rt=this.filterManager.effectElements[1].p.v,it=rt==3?0:tt,st=rt==2?0:tt;this.feGaussianBlur.setAttribute("stdDeviation",it+" "+st);var ut=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",ut)}};function TransformEffect(){}TransformEffect.prototype.init=function(_e){this.effectsManager=_e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(_e){if(this._opMdf=!1,this._mdf=!1,_e||this.effectsManager._mdf){var et=this.effectsManager.effectElements,tt=et[0].p.v,rt=et[1].p.v,it=et[2].p.v===1,st=et[3].p.v,ut=it?st:et[4].p.v,ht=et[5].p.v,at=et[6].p.v,gt=et[7].p.v;this.matrix.reset(),this.matrix.translate(-tt[0],-tt[1],tt[2]),this.matrix.scale(ut*.01,st*.01,1),this.matrix.rotate(-gt*degToRads),this.matrix.skewFromAxis(-ht*degToRads,(at+90)*degToRads),this.matrix.translate(rt[0],rt[1],0),this._mdf=!0,this.opacity!==et[8].p.v&&(this.opacity=et[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(_e,et){this.init(et)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(_e){this.init(_e)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function _iterableToArrayLimit$e(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function ownKeys$F(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread2$1(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$F(Object(tt),!0).forEach(function(rt){_defineProperty$I(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$F(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$I(_e,et,tt){return et=_toPropertyKey$H(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _objectWithoutPropertiesLoose$m(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _objectWithoutProperties$m(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$m(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _slicedToArray$e(_e,et){return _arrayWithHoles$f(_e)||_iterableToArrayLimit$e(_e,et)||_unsupportedIterableToArray$n(_e,et)||_nonIterableRest$f()}function _arrayWithHoles$f(_e){if(Array.isArray(_e))return _e}function _unsupportedIterableToArray$n(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$n(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$n(_e,et)}}function _arrayLikeToArray$n(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _nonIterableRest$f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toPrimitive$H(_e,et){if(typeof _e!="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(typeof rt!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _toPropertyKey$H(_e){var et=_toPrimitive$H(_e,"string");return typeof et=="symbol"?et:String(et)}var _excluded$1$1=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],useLottie=function _e(et,tt){var rt=et.animationData,it=et.loop,st=et.autoplay,ut=et.initialSegment,ht=et.onComplete,at=et.onLoopComplete,gt=et.onEnterFrame,bt=et.onSegmentStart,wt=et.onConfigReady,St=et.onDataReady,kt=et.onDataFailed,Rt=et.onLoadedImages,It=et.onDOMLoaded,Dt=et.onDestroy;et.lottieRef,et.renderer,et.name,et.assetsPath,et.rendererSettings;var Mt=_objectWithoutProperties$m(et,_excluded$1$1),$t=reactExports.useState(!1),jt=_slicedToArray$e($t,2),Nt=jt[0],Ut=jt[1],Ht=reactExports.useRef(),Kt=reactExports.useRef(null),tr=function(){var rn;(rn=Ht.current)===null||rn===void 0||rn.play()},mr=function(){var rn;(rn=Ht.current)===null||rn===void 0||rn.stop()},vr=function(){var rn;(rn=Ht.current)===null||rn===void 0||rn.pause()},wr=function(rn){var fn;(fn=Ht.current)===null||fn===void 0||fn.setSpeed(rn)},yr=function(rn,fn){var Dn;(Dn=Ht.current)===null||Dn===void 0||Dn.goToAndPlay(rn,fn)},Or=function(rn,fn){var Dn;(Dn=Ht.current)===null||Dn===void 0||Dn.goToAndStop(rn,fn)},Nr=function(rn){var fn;(fn=Ht.current)===null||fn===void 0||fn.setDirection(rn)},Lr=function(rn,fn){var Dn;(Dn=Ht.current)===null||Dn===void 0||Dn.playSegments(rn,fn)},ar=function(rn){var fn;(fn=Ht.current)===null||fn===void 0||fn.setSubframe(rn)},hr=function(rn){var fn;return(fn=Ht.current)===null||fn===void 0?void 0:fn.getDuration(rn)},Qt=function(){var rn;(rn=Ht.current)===null||rn===void 0||rn.destroy(),Ht.current=void 0},ir=function(){var rn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fn;if(Kt.current){(fn=Ht.current)===null||fn===void 0||fn.destroy();var Dn=_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},et),rn),{},{container:Kt.current});return Ht.current=lottie.loadAnimation(Dn),Ut(!!Ht.current),function(){var Yn;(Yn=Ht.current)===null||Yn===void 0||Yn.destroy(),Ht.current=void 0}}};reactExports.useEffect(function(){var Cr=ir();return function(){return Cr==null?void 0:Cr()}},[rt,it]),reactExports.useEffect(function(){Ht.current&&(Ht.current.autoplay=!!st)},[st]),reactExports.useEffect(function(){if(Ht.current){if(!ut){Ht.current.resetSegments(!0);return}!Array.isArray(ut)||!ut.length||((Ht.current.currentRawFrame<ut[0]||Ht.current.currentRawFrame>ut[1])&&(Ht.current.currentRawFrame=ut[0]),Ht.current.setSegment(ut[0],ut[1]))}},[ut]),reactExports.useEffect(function(){var Cr=[{name:"complete",handler:ht},{name:"loopComplete",handler:at},{name:"enterFrame",handler:gt},{name:"segmentStart",handler:bt},{name:"config_ready",handler:wt},{name:"data_ready",handler:St},{name:"data_failed",handler:kt},{name:"loaded_images",handler:Rt},{name:"DOMLoaded",handler:It},{name:"destroy",handler:Dt}],rn=Cr.filter(function(Dn){return Dn.handler!=null});if(rn.length){var fn=rn.map(function(Dn){var Yn;return(Yn=Ht.current)===null||Yn===void 0||Yn.addEventListener(Dn.name,Dn.handler),function(){var eo;(eo=Ht.current)===null||eo===void 0||eo.removeEventListener(Dn.name,Dn.handler)}});return function(){fn.forEach(function(Dn){return Dn()})}}},[ht,at,gt,bt,wt,St,kt,Rt,It,Dt]);var Mr=React$1.createElement("div",_objectSpread2$1({style:tt,ref:Kt},Mt));return{View:Mr,play:tr,stop:mr,pause:vr,setSpeed:wr,goToAndStop:Or,goToAndPlay:yr,setDirection:Nr,playSegments:Lr,setSubframe:ar,getDuration:hr,destroy:Qt,animationContainerRef:Kt,animationLoaded:Nt,animationItem:Ht.current}};function getContainerVisibility(_e){var et=_e.getBoundingClientRect(),tt=et.top,rt=et.height,it=window.innerHeight-tt,st=window.innerHeight+rt;return it/st}function getContainerCursorPosition(_e,et,tt){var rt=_e.getBoundingClientRect(),it=rt.top,st=rt.left,ut=rt.width,ht=rt.height,at=(et-st)/ut,gt=(tt-it)/ht;return{x:at,y:gt}}var useInitInteractivity=function _e(et){var tt=et.wrapperRef,rt=et.animationItem,it=et.mode,st=et.actions;reactExports.useEffect(function(){var ut=tt.current;if(!(!ut||!rt||!st.length)){rt.stop();var ht=function(){var bt=null,wt=function(){var kt=getContainerVisibility(ut),Rt=st.find(function(Dt){var Mt=Dt.visibility;return Mt&&kt>=Mt[0]&&kt<=Mt[1]});if(Rt){if(Rt.type==="seek"&&Rt.visibility&&Rt.frames.length===2){var It=Rt.frames[0]+Math.ceil((kt-Rt.visibility[0])/(Rt.visibility[1]-Rt.visibility[0])*Rt.frames[1]);//! goToAndStop must be relative to the start of the current segment
rt.goToAndStop(It-rt.firstFrame-1,!0)}Rt.type==="loop"&&(bt===null||bt!==Rt.frames||rt.isPaused)&&(rt.playSegments(Rt.frames,!0),bt=Rt.frames),Rt.type==="play"&&rt.isPaused&&(rt.resetSegments(!0),rt.play()),Rt.type==="stop"&&rt.goToAndStop(Rt.frames[0]-rt.firstFrame-1,!0)}};return document.addEventListener("scroll",wt),function(){document.removeEventListener("scroll",wt)}},at=function(){var bt=function(Rt,It){var Dt=Rt,Mt=It;if(Dt!==-1&&Mt!==-1){var $t=getContainerCursorPosition(ut,Dt,Mt);Dt=$t.x,Mt=$t.y}var jt=st.find(function(Ht){var Kt=Ht.position;return Kt&&Array.isArray(Kt.x)&&Array.isArray(Kt.y)?Dt>=Kt.x[0]&&Dt<=Kt.x[1]&&Mt>=Kt.y[0]&&Mt<=Kt.y[1]:Kt&&!Number.isNaN(Kt.x)&&!Number.isNaN(Kt.y)?Dt===Kt.x&&Mt===Kt.y:!1});if(jt){if(jt.type==="seek"&&jt.position&&Array.isArray(jt.position.x)&&Array.isArray(jt.position.y)&&jt.frames.length===2){var Nt=(Dt-jt.position.x[0])/(jt.position.x[1]-jt.position.x[0]),Ut=(Mt-jt.position.y[0])/(jt.position.y[1]-jt.position.y[0]);rt.playSegments(jt.frames,!0),rt.goToAndStop(Math.ceil((Nt+Ut)/2*(jt.frames[1]-jt.frames[0])),!0)}jt.type==="loop"&&rt.playSegments(jt.frames,!0),jt.type==="play"&&(rt.isPaused&&rt.resetSegments(!1),rt.playSegments(jt.frames)),jt.type==="stop"&&rt.goToAndStop(jt.frames[0],!0)}},wt=function(Rt){bt(Rt.clientX,Rt.clientY)},St=function(){bt(-1,-1)};return ut.addEventListener("mousemove",wt),ut.addEventListener("mouseout",St),function(){ut.removeEventListener("mousemove",wt),ut.removeEventListener("mouseout",St)}};switch(it){case"scroll":return ht();case"cursor":return at()}}},[it,rt])},useLottieInteractivity=function _e(et){var tt=et.actions,rt=et.mode,it=et.lottieObj,st=it.animationItem,ut=it.View,ht=it.animationContainerRef;return useInitInteractivity({actions:tt,animationItem:st,mode:rt,wrapperRef:ht}),ut},_excluded$l=["style","interactivity"],Lottie=function _e(et){var tt,rt,it,st=et.style,ut=et.interactivity,ht=_objectWithoutProperties$m(et,_excluded$l),at=useLottie(ht,st),gt=at.View,bt=at.play,wt=at.stop,St=at.pause,kt=at.setSpeed,Rt=at.goToAndStop,It=at.goToAndPlay,Dt=at.setDirection,Mt=at.playSegments,$t=at.setSubframe,jt=at.getDuration,Nt=at.destroy,Ut=at.animationContainerRef,Ht=at.animationLoaded,Kt=at.animationItem;return reactExports.useEffect(function(){et.lottieRef&&(et.lottieRef.current={play:bt,stop:wt,pause:St,setSpeed:kt,goToAndPlay:It,goToAndStop:Rt,setDirection:Dt,playSegments:Mt,setSubframe:$t,getDuration:jt,destroy:Nt,animationContainerRef:Ut,animationLoaded:Ht,animationItem:Kt})},[(tt=et.lottieRef)===null||tt===void 0?void 0:tt.current]),useLottieInteractivity({lottieObj:{View:gt,play:bt,stop:wt,pause:St,setSpeed:kt,goToAndStop:Rt,goToAndPlay:It,setDirection:Dt,playSegments:Mt,setSubframe:$t,getDuration:jt,destroy:Nt,animationContainerRef:Ut,animationLoaded:Ht,animationItem:Kt},actions:(rt=ut==null?void 0:ut.actions)!==null&&rt!==void 0?rt:[],mode:(it=ut==null?void 0:ut.mode)!==null&&it!==void 0?it:"scroll"})};const v$1="5.9.6",fr=30,ip=0,op=180,w$1=1080,h$1=1080,nm="8SUFPWH 2",ddd=0,assets=[{id:"comp_0",nm:"Pre-comp 1",fr:30,layers:[{ddd:0,ind:1,ty:4,nm:"Shape Layer 10",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[174.5,460,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:27,s:[0]},{t:32.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:30.75,s:[0]},{t:36,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:27,op:36,st:27,ct:1,bm:0},{ddd:0,ind:2,ty:4,nm:"Shape Layer 9",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[274.5,852,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:24,s:[0]},{t:29.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:27.75,s:[0]},{t:33,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:24,op:33,st:24,ct:1,bm:0},{ddd:0,ind:3,ty:4,nm:"Shape Layer 8",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[216.5,732,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:18,s:[0]},{t:23.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21.75,s:[0]},{t:27,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:18,op:27,st:18,ct:1,bm:0},{ddd:0,ind:4,ty:4,nm:"Shape Layer 7",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210.5,578,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:21,s:[0]},{t:26.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:24.75,s:[0]},{t:30,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:21,op:30,st:21,ct:1,bm:0},{ddd:0,ind:5,ty:4,nm:"Shape Layer 6",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[250.5,663,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:15,s:[0]},{t:20.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:18.75,s:[0]},{t:24,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:15,op:24,st:15,ct:1,bm:0},{ddd:0,ind:6,ty:4,nm:"Shape Layer 5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[174.5,460,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:12,s:[0]},{t:17.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:15.75,s:[0]},{t:21,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:12,op:21,st:12,ct:1,bm:0},{ddd:0,ind:7,ty:4,nm:"Shape Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[274.5,852,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9,s:[0]},{t:14.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:12.75,s:[0]},{t:18,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:9,op:18,st:9,ct:1,bm:0},{ddd:0,ind:8,ty:4,nm:"Shape Layer 4",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[214.5,814,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3,s:[0]},{t:8.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6.75,s:[0]},{t:12,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:3,op:12,st:3,ct:1,bm:0},{ddd:0,ind:9,ty:4,nm:"Shape Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[210.5,578,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{t:11.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:9.75,s:[0]},{t:15,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:6,op:15,st:6,ct:1,bm:0},{ddd:0,ind:10,ty:4,nm:"Shape Layer 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[250.5,663,0],ix:2,l:2},a:{a:0,k:[-289.5,123,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-210.5,120.5],[-375.5,120.5]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078491211,.658823529412,.325490196078,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-216.5,128],[-381.5,128]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156877705,.16862745098,.450980422076,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:12,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:5.25,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:3.75,s:[0]},{t:9,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:3,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:9,st:0,ct:1,bm:0}]},{id:"comp_1",nm:"clock",fr:30,layers:[{ddd:0,ind:1,ty:4,nm:"Layer 6",parent:2,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:0,s:[0]},{t:179,s:[720]}],ix:10},p:{a:0,k:[101.292,-76.686,0],ix:2,l:2},a:{a:0,k:[101.292,-76.686,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[111.484,-101.882],[179.189,-140.732],[125.187,-85.576]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-6.429],[6.429,0],[0,6.429],[-6.429,0]],o:[[0,6.429],[-6.429,0],[0,-6.429],[6.429,0]],v:[[112.926,-76.529],[101.285,-64.889],[89.645,-76.529],[101.285,-88.169]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 5",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.41],y:[1.014]},o:{x:[.254],y:[.049]},t:1,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:6,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:10,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:16,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:20,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:26,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:30,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:36,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:40,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:46,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:50,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:56,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:60,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:66,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:70,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:76,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.322],y:[0]},t:80,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:86,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:90,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:96,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:100,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:106,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:110,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:116,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:120,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:126,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:130,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:136,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:140,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:146,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:150,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:156,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:160,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:166,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:170,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:176,s:[2]},{t:180,s:[0]}],ix:10},p:{a:1,k:[{i:{x:.667,y:.985},o:{x:.333,y:.018},t:0,s:[632.437,616.886,0],to:[0,1.167,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:5,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:10,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:15,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.277,y:0},t:20,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:25,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:30,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:35,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.281,y:0},t:40,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:45,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:50,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:55,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.277,y:0},t:60,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:65,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:70,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:75,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.276,y:0},t:80,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:85,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:90,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:95,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.277,y:0},t:100,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:105,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:110,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:115,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.281,y:0},t:120,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:125,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:130,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:135,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.277,y:0},t:140,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:145,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:150,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:155,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.277,y:0},t:160,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:165,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{i:{x:.667,y:.985},o:{x:.269,y:0},t:170,s:[632.437,616.886,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.985},o:{x:.333,y:.015},t:175,s:[632.437,623.886,0],to:[0,0,0],ti:[0,1.167,0]},{t:180,s:[632.437,616.886,0]}],ix:2,l:2},a:{a:0,k:[92.437,76.886,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[171.409,17.961]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0]],o:[[0,0]],v:[[186.969,33.521]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-77.608],[77.608,0],[0,77.608],[-77.608,0]],o:[[0,77.608],[-77.608,0],[0,-77.608],[77.608,0]],v:[[241.807,-79.131],[101.285,61.39],[-39.236,-79.131],[101.285,-219.653]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-17.06,-157.27],[-1.5,-141.71]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[204.713,-172.83],[189.153,-157.27]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-35.671,-76.529],[-13.666,-76.529]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:3,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[217.447,-76.529],[239.452,-76.529]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[97.171,-218.194],[97.171,-196.189]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:2,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-19.473,-203.969],[3.036,-221.652],[-14.647,-244.161],[-37.156,-226.478]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 11",np:3,cix:2,bm:0,ix:11,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[-15.622,-263.312],[-46.5,-239.156],[-63.515,-260.792],[-32.637,-284.949]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 12",np:2,cix:2,bm:0,ix:12,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[-7.429,-253.019],[-47.131,-221.931],[-72.129,-253.861],[-63.515,-260.792],[-32.637,-284.949],[-15.622,-263.312]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 13",np:3,cix:2,bm:0,ix:13,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[209.472,-214.063],[185.04,-228.977],[199.954,-253.409],[224.386,-238.495]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 14",np:3,cix:2,bm:0,ix:14,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[255.988,-269.824],[240.864,-245.037],[207.463,-265.414],[222.589,-290.201]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 15",np:2,cix:2,bm:0,ix:15,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[255.988,-269.824],[240.864,-245.037],[234.772,-235.165],[191.709,-261.422],[212.925,-296.082],[222.589,-290.201]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 16",np:3,cix:2,bm:0,ix:16,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[111.484,-250.854],[82.859,-250.854],[82.859,-279.478],[111.484,-279.478]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 17",np:3,cix:2,bm:0,ix:17,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[134.152,-322.76],[134.152,-282.008],[59.791,-282.008],[59.791,-322.76]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 18",np:2,cix:2,bm:0,ix:18,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[134.152,-322.76],[134.152,-292.932],[69.034,-292.932],[69.034,-322.76]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 19",np:2,cix:2,bm:0,ix:19,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[134.152,-322.76],[134.152,-282.008],[59.791,-282.008],[59.791,-322.76]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 20",np:3,cix:2,bm:0,ix:20,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[171.409,17.961],[186.969,33.521]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 21",np:2,cix:2,bm:0,ix:21,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-77.608],[77.608,0],[0,77.608],[-77.608,0]],o:[[0,77.608],[-77.608,0],[0,-77.608],[77.608,0]],v:[[241.807,-79.131],[101.285,61.39],[-39.236,-79.131],[101.285,-219.653]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 22",np:3,cix:2,bm:0,ix:22,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-94.947],[70.37,-21.216],[17.435,0],[0,94.738],[-85.495,9.874],[-6.722,0]],o:[[0,77.303],[-15.965,5.041],[-94.948,0],[0,-88.226],[6.512,-.63],[94.738,0]],v:[[273.003,-79.089],[151.377,84.969],[101.383,92.532],[-70.448,-79.089],[81.426,-249.869],[101.383,-250.919]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 23",np:2,cix:2,bm:0,ix:23,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-94.947],[70.37,-21.216],[6.932,0],[0,94.948],[-70.58,21.216],[-6.722,0]],o:[[0,77.303],[-6.512,.841],[-94.947,0],[0,-77.513],[6.512,-.63],[94.738,0]],v:[[273.003,-79.089],[151.377,84.969],[131.211,86.229],[-40.619,-85.601],[81.426,-249.869],[101.383,-250.919]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 24",np:2,cix:2,bm:0,ix:24,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-94.947],[70.37,-21.216],[17.435,0],[0,94.738],[-85.495,9.874],[-6.722,0]],o:[[0,77.303],[-15.965,5.041],[-94.948,0],[0,-88.226],[6.512,-.63],[94.738,0]],v:[[273.003,-79.089],[151.377,84.969],[101.383,92.532],[-70.448,-79.089],[81.426,-249.869],[101.383,-250.919]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 25",np:3,cix:2,bm:0,ix:25,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0}]}],layers=[{ddd:0,ind:1,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:132,op:168,st:132,bm:0},{ddd:0,ind:2,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:101,op:137,st:101,bm:0},{ddd:0,ind:3,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:72,op:108,st:72,bm:0},{ddd:0,ind:4,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:42,op:78,st:42,bm:0},{ddd:0,ind:5,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:15,op:51,st:15,bm:0},{ddd:0,ind:6,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:0,op:20,st:-16,bm:0},{ddd:0,ind:7,ty:0,nm:"Pre-comp 1",refId:"comp_0",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:164,op:180,st:164,bm:0},{ddd:0,ind:8,ty:4,nm:"car",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.667,y:.979},o:{x:.333,y:.025},t:0,s:[622.786,684.604,0],to:[0,.917,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:5,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:10,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:15,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:20,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:25,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:30,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:35,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:40,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:45,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:50,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:55,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:60,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:65,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:70,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:75,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.276,y:0},t:80,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:85,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:90,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:95,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:100,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:105,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:110,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:115,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:120,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:125,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:130,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:135,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:140,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:145,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:150,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:155,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:160,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:165,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:170,s:[622.786,684.604,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:175,s:[622.786,690.104,0],to:[0,0,0],ti:[0,.917,0]},{t:180,s:[622.786,684.604,0]}],ix:2,l:2},a:{a:0,k:[82.786,144.604,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.84,-12.394],[0,0],[0,0],[11.974,0],[0,0],[-.84,9.872],[.21,3.15],[34.87,0],[6.932,-33.611],[.209,-3.151],[-2.941,-8.403],[0,0],[-.63,9.872],[.21,3.15],[34.871,0],[6.722,-33.611],[.21,-3.151],[-2.94,-8.403],[0,0],[-.841,11.974],[0,0],[0,0],[-11.974,0],[0,0],[0,0],[0,0],[-13.024,-.84],[0,0],[-3.362,-5.882],[0,0],[-7.562,-3.781],[0,0]],o:[[0,0],[0,0],[-.841,11.974],[0,0],[4.41,-8.403],[.21,-3.151],[-2.31,-33.611],[-34.661,0],[-.84,3.15],[-.631,9.872],[0,0],[3.991,-8.403],[.21,-3.151],[-2.1,-33.4],[-34.87,0],[-.84,3.15],[-.63,9.872],[0,0],[-12.184,0],[0,0],[0,0],[.84,-12.394],[0,0],[0,0],[0,0],[.84,-13.025],[0,0],[7.352,.421],[0,0],[4.412,6.931],[0,0],[0,0]],v:[[412.694,186.85],[407.653,262.892],[406.603,277.805],[383.285,299.653],[359.549,299.653],[367.53,272.345],[367.53,262.892],[303.042,203.654],[230.99,262.892],[229.521,272.345],[233.302,299.653],[-40.199,299.653],[-32.847,272.345],[-32.847,262.892],[-97.126,203.654],[-169.177,262.892],[-170.647,272.345],[-166.867,299.653],[-226.734,299.653],[-247.109,277.805],[-246.059,262.892],[-241.018,186.85],[-217.701,164.583],[87.309,164.583],[87.519,161.221],[97.812,12.499],[123.439,-10.399],[208.094,-7.038],[225.319,2.835],[287.497,101.775],[305.353,118.159],[400.931,164.583]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[11.974,0],[0,0],[-.84,9.872],[.21,3.15]],o:[[0,0],[-.841,11.974],[0,0],[4.41,-8.403],[.21,-3.151],[0,0]],v:[[407.653,262.892],[406.603,277.805],[383.285,299.653],[359.549,299.653],[367.53,272.345],[367.53,262.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.209,-3.151],[-2.941,-8.403],[0,0],[-.63,9.872],[.21,3.15],[0,0]],o:[[-.631,9.872],[0,0],[3.991,-8.403],[.21,-3.151],[0,0],[-.84,3.15]],v:[[229.521,272.345],[233.302,299.653],[-40.199,299.653],[-32.847,272.345],[-32.847,262.892],[230.99,262.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.21,-3.151],[-2.94,-8.403],[0,0],[-.841,11.974],[0,0],[0,0]],o:[[-.63,9.872],[0,0],[-12.184,0],[0,0],[0,0],[-.84,3.15]],v:[[-170.647,272.345],[-166.867,299.653],[-226.734,299.653],[-247.109,277.805],[-246.059,262.892],[-169.177,262.892]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[5.249,0],[0,0],[-.252,3.695],[0,0],[-3.705,0],[0,0],[-1.086,-1.979],[0,0]],o:[[0,0],[-3.705,0],[0,0],[.252,-3.695],[0,0],[2.33,0],[0,0],[2.446,4.458]],v:[[246.237,116.16],[133.53,116.16],[127.279,109.469],[131.982,40.602],[139.148,33.911],[209.357,33.911],[214.854,37.095],[252.647,105.963]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[5.252,0],[0,0],[-.21,3.571],[0,0],[-3.781,0],[0,0],[0,0],[-3.781,0],[0,0],[0,0]],o:[[0,0],[-3.781,0],[0,0],[.21,-3.781],[0,0],[0,0],[-.209,3.571],[0,0],[0,0],[2.521,4.41]],v:[[246.339,116.208],[133.536,116.208],[127.235,109.486],[132.066,40.585],[139.209,33.863],[148.662,33.863],[145.09,87.219],[151.392,93.941],[246.13,93.941],[252.642,105.915]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[5.249,0],[0,0],[-.252,3.695],[0,0],[-3.705,0],[0,0],[-1.086,-1.979],[0,0]],o:[[0,0],[-3.705,0],[0,0],[.252,-3.695],[0,0],[2.33,0],[0,0],[2.446,4.458]],v:[[246.237,116.16],[133.53,116.16],[127.279,109.469],[131.982,40.602],[139.148,33.911],[209.357,33.911],[214.854,37.095],[252.647,105.963]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:3,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.84,-12.394],[0,0],[0,0],[11.974,0],[0,0],[-.84,9.872],[.21,3.15],[34.87,0],[6.932,-33.611],[.209,-3.151],[-2.941,-8.403],[0,0],[-.63,9.872],[.21,3.15],[34.871,0],[6.722,-33.611],[.21,-3.151],[-2.94,-8.403],[0,0],[-.841,11.974],[0,0],[0,0],[-11.974,0],[0,0],[0,0],[0,0],[-13.024,-.84],[0,0],[-3.362,-5.882],[0,0],[-7.562,-3.781],[0,0]],o:[[0,0],[0,0],[-.841,11.974],[0,0],[4.41,-8.403],[.21,-3.151],[-2.31,-33.611],[-34.661,0],[-.84,3.15],[-.631,9.872],[0,0],[3.991,-8.403],[.21,-3.151],[-2.1,-33.4],[-34.87,0],[-.84,3.15],[-.63,9.872],[0,0],[-12.184,0],[0,0],[0,0],[.84,-12.394],[0,0],[0,0],[0,0],[.84,-13.025],[0,0],[7.352,.421],[0,0],[4.412,6.931],[0,0],[0,0]],v:[[412.694,186.85],[407.653,262.892],[406.603,277.805],[383.285,299.653],[359.549,299.653],[367.53,272.345],[367.53,262.892],[303.042,203.654],[230.99,262.892],[229.521,272.345],[233.302,299.653],[-40.199,299.653],[-32.847,272.345],[-32.847,262.892],[-97.126,203.654],[-169.177,262.892],[-170.647,272.345],[-166.867,299.653],[-226.734,299.653],[-247.109,277.805],[-246.059,262.892],[-241.018,186.85],[-217.701,164.583],[87.309,164.583],[87.519,161.221],[97.812,12.499],[123.439,-10.399],[208.094,-7.038],[225.319,2.835],[287.497,101.775],[305.353,118.159],[400.931,164.583]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:3,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0},{ddd:0,ind:9,ty:4,nm:"Layer 3",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[837.536,873.21,0],ix:2,l:2},a:{a:0,k:[297.536,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.854,-27.145],[3.184,-6.032],[20.164,0],[6.629,17.344],[-.481,7.039],[-26.97,0]],o:[[-.481,7.039],[-8.746,17.344],[-19.911,0],[-2.109,-6.032],[1.854,-27.145],[27.222,0]],v:[[348.949,283.944],[343.324,303.55],[296.182,333.21],[253.091,303.55],[250.396,283.944],[302.894,234.93]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.478,-6.998],[7.017,0],[-.478,6.998],[-7.017,0]],o:[[-.478,6.998],[-7.017,0],[.478,-6.998],[7.017,0]],v:[[310.543,284.07],[296.972,296.741],[285.132,284.07],[298.703,271.399]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.854,-27.145],[3.184,-6.032],[20.164,0],[6.629,17.344],[-.481,7.039],[-26.97,0]],o:[[-.481,7.039],[-8.746,17.344],[-19.911,0],[-2.109,-6.032],[1.854,-27.145],[27.222,0]],v:[[348.949,283.944],[343.324,303.55],[296.182,333.21],[253.091,303.55],[250.396,283.944],[302.894,234.93]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.21,-6.302],[3.36,0],[.421,-6.932],[0,0],[-.21,3.781],[-7.141,0]],o:[[-2.1,-2.1],[-6.932,0],[0,0],[-2.31,-2.31],[.419,-6.932],[6.512,0]],v:[[310.567,282.066],[301.955,278.706],[288.51,291.309],[288.51,292.57],[285.15,283.327],[298.803,270.724]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.478,-6.998],[7.017,0],[-.478,6.998],[-7.017,0]],o:[[-.478,6.998],[-7.017,0],[.478,-6.998],[7.017,0]],v:[[310.543,284.07],[296.972,296.741],[285.132,284.07],[298.703,271.399]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:3,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-6.722,-16.385],[12.604,0],[1.891,-27.308],[-2.1,-6.091],[-.419,-.84],[2.521,6.722],[-.63,7.143],[-27.308,0]],o:[[-8.193,-7.982],[-27.098,0],[-.421,6.932],[.21,.84],[-5.252,-4.831],[-2.1,-6.091],[1.891,-27.097],[19.536,0]],v:[[341.119,260.579],[309.189,247.974],[256.674,297.129],[259.405,316.665],[260.455,319.185],[248.902,301.75],[246.171,282.004],[298.686,233.061]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:2,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.21,-6.302],[3.36,0],[.421,-6.932],[0,0],[-.21,3.781],[-7.141,0]],o:[[-2.1,-2.1],[-6.932,0],[0,0],[-2.31,-2.31],[.419,-6.932],[6.512,0]],v:[[310.567,282.066],[301.955,278.706],[288.51,291.309],[288.51,292.57],[285.15,283.327],[298.803,270.724]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 7",np:2,cix:2,bm:0,ix:7,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.478,-6.998],[7.017,0],[-.478,6.998],[-7.017,0]],o:[[-.478,6.998],[-7.017,0],[.478,-6.998],[7.017,0]],v:[[310.543,284.07],[296.972,296.741],[285.132,284.07],[298.703,271.399]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 8",np:3,cix:2,bm:0,ix:8,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-6.722,-16.385],[12.604,0],[1.891,-27.308],[-2.1,-6.091],[-.419,-.84],[2.521,6.722],[-.63,7.143],[-27.308,0]],o:[[-8.193,-7.982],[-27.097,0],[-.421,6.932],[.21,.84],[-5.252,-4.831],[-2.1,-6.091],[1.891,-27.097],[19.536,0]],v:[[345.393,263.992],[313.463,251.388],[260.948,300.543],[263.679,320.078],[264.729,322.599],[253.176,305.164],[250.445,285.418],[302.96,236.474]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 9",np:2,cix:2,bm:0,ix:9,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.854,-27.145],[2.932,-6.032],[20.165,0],[6.377,17.344],[-.481,7.039],[-27.22,0]],o:[[-.481,7.039],[-8.998,17.344],[-20.164,0],[-2.108,-6.032],[1.854,-27.145],[27.222,0]],v:[[348.948,282.828],[343.577,302.434],[296.181,332.094],[253.09,302.434],[250.397,282.828],[302.893,233.815]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 10",np:3,cix:2,bm:0,ix:10,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0},{ddd:0,ind:10,ty:4,nm:"Layer 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[435.903,864.864,0],ix:2,l:2},a:{a:0,k:[-104.097,324.864,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.478,-6.998],[7.017,0],[-.478,6.998],[-7.017,0]],o:[[-.478,6.998],[-7.017,0],[.478,-6.998],[7.017,0]],v:[[-91.401,275.724],[-104.972,288.395],[-116.812,275.724],[-103.241,263.053]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.854,-27.145],[2.932,-6.032],[20.165,0],[6.377,17.344],[-.481,7.039],[-27.22,0]],o:[[-.481,7.039],[-8.998,17.344],[-20.164,0],[-2.108,-6.032],[1.854,-27.145],[27.222,0]],v:[[-54.822,275.597],[-60.194,295.204],[-107.589,324.864],[-150.68,295.204],[-153.373,275.597],[-100.877,226.584]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-.21,-6.302],[3.36,0],[.421,-6.932],[0,0],[-.21,3.781],[-7.141,0]],o:[[-2.1,-2.1],[-6.932,0],[0,0],[-2.31,-2.31],[.419,-6.932],[6.512,0]],v:[[-91.377,273.72],[-99.989,270.36],[-113.434,282.963],[-113.434,284.223],[-116.794,274.98],[-103.141,262.377]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:2,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[.478,-6.998],[7.017,0],[-.478,6.998],[-7.017,0]],o:[[-.478,6.998],[-7.017,0],[.478,-6.998],[7.017,0]],v:[[-91.401,275.724],[-104.972,288.395],[-116.812,275.724],[-103.241,263.053]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:3,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[-6.722,-16.385],[12.604,0],[1.891,-27.308],[-2.1,-6.091],[-.419,-.84],[2.521,6.722],[-.63,7.143],[-27.308,0]],o:[[-8.193,-7.982],[-27.097,0],[-.421,6.932],[.21,.84],[-5.252,-4.831],[-2.1,-6.091],[1.891,-27.097],[19.536,0]],v:[[-56.551,255.646],[-88.481,243.042],[-140.996,292.197],[-138.265,311.732],[-137.215,314.253],[-148.768,296.817],[-151.499,277.071],[-98.984,228.128]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:2,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[1.854,-27.145],[2.932,-6.032],[20.165,0],[6.377,17.344],[-.481,7.039],[-27.22,0]],o:[[-.481,7.039],[-8.998,17.344],[-20.164,0],[-2.108,-6.032],[1.854,-27.145],[27.222,0]],v:[[-54.822,275.597],[-60.194,295.204],[-107.589,324.864],[-150.68,295.204],[-153.373,275.597],[-100.877,226.584]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 6",np:3,cix:2,bm:0,ix:6,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0},{ddd:0,ind:11,ty:4,nm:"Layer 8",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.41],y:[1.014]},o:{x:[.254],y:[.049]},t:0,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:5,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:9,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:15,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:19,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:25,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:29,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:35,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:39,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:45,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:49,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:55,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:59,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:65,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:69,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:75,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.322],y:[0]},t:79,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:85,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:89,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:95,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:99,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:105,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:109,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:115,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:119,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:125,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:129,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:135,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:139,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:145,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:149,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:155,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:159,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:165,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:169,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:175,s:[2]},{t:179,s:[0]}],ix:10},p:{a:1,k:[{i:{x:.667,y:.979},o:{x:.333,y:.025},t:-1,s:[481.779,744.238,0],to:[0,.75,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:4,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:9,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:14,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:19,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:24,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:29,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:34,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:39,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:44,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:49,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:54,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:59,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:64,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:69,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:74,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.276,y:0},t:79,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:84,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:89,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:94,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:99,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:104,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:109,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:114,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:119,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:124,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:129,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:134,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:139,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:144,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:149,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:154,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:159,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:164,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:169,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:174,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{t:179,s:[481.779,744.238,0]}],ix:2,l:2},a:{a:0,k:[-58.221,204.238,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[87.522,161.146],[87.311,164.507],[-168.124,164.507],[-193.961,-119.917],[60.004,-143.023],[61.683,-124.748]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[89.201,179.24],[-141.921,200.008],[-170.324,-110.218],[60.799,-130.986]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[89.201,179.631],[-134.724,200.008],[-164.552,202.739],[-193.961,-119.917],[60.004,-143.023],[61.683,-124.748]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.482,195.266],[-219.293,218.238],[-248.499,-104.419],[5.275,-127.391]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.338,186.2],[-236.436,209.171],[-265.643,-113.486],[-11.868,-136.457]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:3,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1}],ip:0,op:179,st:-1,ct:1,bm:0},{ddd:0,ind:12,ty:4,nm:"Layer 7",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[.41],y:[1.014]},o:{x:[.254],y:[.049]},t:180,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:185,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:189,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:195,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:199,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:205,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:209,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:215,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:219,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:225,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:229,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:235,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:239,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:245,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:249,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:255,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.322],y:[0]},t:259,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:265,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:269,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:275,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:279,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:285,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:289,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:295,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.314],y:[0]},t:299,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:305,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:309,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:315,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:319,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:325,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:329,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:335,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.303],y:[0]},t:339,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:345,s:[2]},{i:{x:[.41],y:[1.016]},o:{x:[.296],y:[0]},t:349,s:[0]},{i:{x:[.831],y:[.979]},o:{x:[.678],y:[.013]},t:355,s:[2]},{t:359,s:[0]}],ix:10},p:{a:1,k:[{i:{x:.667,y:.979},o:{x:.333,y:.025},t:179,s:[481.779,744.238,0],to:[0,.75,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:184,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:189,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:194,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:199,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:204,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:209,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:214,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:219,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:224,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:229,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:234,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:239,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:244,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:249,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:254,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.276,y:0},t:259,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:264,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:269,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:274,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:279,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:284,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:289,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:294,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.281,y:0},t:299,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:304,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:309,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:314,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:319,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:324,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:329,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:334,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.277,y:0},t:339,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:344,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{i:{x:.667,y:.979},o:{x:.269,y:0},t:349,s:[481.779,744.238,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:.979},o:{x:.333,y:.021},t:354,s:[481.779,748.738,0],to:[0,0,0],ti:[0,.75,0]},{t:359,s:[481.779,744.238,0]}],ix:2,l:2},a:{a:0,k:[-58.221,204.238,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[87.522,161.146],[87.311,164.507],[-168.124,164.507],[-193.961,-119.917],[60.004,-143.023],[61.683,-124.748]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[89.201,179.24],[-141.921,200.008],[-170.324,-110.218],[60.799,-130.986]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[89.201,179.631],[-134.724,200.008],[-164.552,202.739],[-193.961,-119.917],[60.004,-143.023],[61.683,-124.748]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 3",np:3,cix:2,bm:0,ix:3,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[34.482,195.266],[-219.293,218.238],[-248.499,-104.419],[5.275,-127.391]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 4",np:2,cix:2,bm:0,ix:4,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[17.338,186.2],[-236.436,209.171],[-265.643,-113.486],[-11.868,-136.457]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 5",np:3,cix:2,bm:0,ix:5,mn:"ADBE Vector Group",hd:!1}],ip:179,op:180,st:179,ct:1,bm:0},{ddd:0,ind:13,ty:0,nm:"clock",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:0,op:178,st:-2,bm:0},{ddd:0,ind:14,ty:0,nm:"clock",refId:"comp_1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[540,540,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,w:1080,h:1080,ip:178,op:180,st:178,bm:0},{ddd:0,ind:15,ty:4,nm:"Layer 4",sr:1,ks:{o:{a:0,k:50,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[540,540,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,-89.366],[89.366,0],[0,89.366],[-89.366,0]],o:[[0,89.366],[-89.366,0],[0,-89.366],[89.366,0]],v:[[57.714,-196.189],[-104.097,-34.378],[-265.908,-196.189],[-104.097,-358]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.996078431606,.658823549747,.32549020648,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:180,st:0,ct:1,bm:0},{ddd:0,ind:16,ty:4,nm:"Layer 19",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[557.987,873.21,0],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:173,op:180,st:173,ct:1,bm:0},{ddd:0,ind:17,ty:4,nm:"Shape Layer 8",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:143,op:173,st:143,ct:1,bm:0},{ddd:0,ind:18,ty:4,nm:"Layer 18",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:143,s:[1389.987,873.21,0],to:[-138.667,0,0],ti:[138.667,0,0]},{t:173,s:[557.987,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:143,op:173,st:143,ct:1,bm:0},{ddd:0,ind:19,ty:4,nm:"Shape Layer 7",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:140,op:170,st:140,ct:1,bm:0},{ddd:0,ind:20,ty:4,nm:"Layer 17",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:140,s:[557.987,873.21,0],to:[-138.167,0,0],ti:[138.167,0,0]},{t:170,s:[-271.013,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:140,op:170,st:140,ct:1,bm:0},{ddd:0,ind:21,ty:4,nm:"Layer 16",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[557.987,873.21,0],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:123,op:140,st:123,ct:1,bm:0},{ddd:0,ind:22,ty:4,nm:"Shape Layer 6",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:93,op:123,st:93,ct:1,bm:0},{ddd:0,ind:23,ty:4,nm:"Layer 15",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:93,s:[1389.987,873.21,0],to:[-138.667,0,0],ti:[138.667,0,0]},{t:123,s:[557.987,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:93,op:123,st:93,ct:1,bm:0},{ddd:0,ind:24,ty:4,nm:"Shape Layer 5",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:120,st:90,ct:1,bm:0},{ddd:0,ind:25,ty:4,nm:"Layer 14",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:90,s:[557.987,873.21,0],to:[-138.167,0,0],ti:[138.167,0,0]},{t:120,s:[-271.013,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:90,op:120,st:90,ct:1,bm:0},{ddd:0,ind:26,ty:4,nm:"Layer 13",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[557.987,873.21,0],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:83,op:90,st:83,ct:1,bm:0},{ddd:0,ind:27,ty:4,nm:"Shape Layer 4",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:53,op:83,st:53,ct:1,bm:0},{ddd:0,ind:28,ty:4,nm:"Layer 12",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:53,s:[1389.987,873.21,0],to:[-138.667,0,0],ti:[138.667,0,0]},{t:83,s:[557.987,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:53,op:83,st:53,ct:1,bm:0},{ddd:0,ind:29,ty:4,nm:"Shape Layer 3",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:50,op:80,st:50,ct:1,bm:0},{ddd:0,ind:30,ty:4,nm:"Layer 11",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:50,s:[557.987,873.21,0],to:[-138.167,0,0],ti:[138.167,0,0]},{t:80,s:[-271.013,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:50,op:80,st:50,ct:1,bm:0},{ddd:0,ind:31,ty:4,nm:"Layer 10",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[557.987,873.21,0],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:33,op:50,st:33,ct:1,bm:0},{ddd:0,ind:32,ty:4,nm:"Shape Layer 2",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:33,st:3,ct:1,bm:0},{ddd:0,ind:33,ty:4,nm:"Layer 9",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:3,s:[1389.987,873.21,0],to:[-138.667,0,0],ti:[138.667,0,0]},{t:33,s:[557.987,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:3,op:33,st:3,ct:1,bm:0},{ddd:0,ind:34,ty:4,nm:"Shape Layer 1",td:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[556,874,0],ix:2,l:2},a:{a:0,k:[16,334,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[434,296],[-402,308],[-402,372],[434,372]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[.019608000213,.007842999814,.007842999814,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Shape 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30,st:0,ct:1,bm:0},{ddd:0,ind:35,ty:4,nm:"Layer 1",tt:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:.833,y:.833},o:{x:.167,y:.167},t:0,s:[557.987,873.21,0],to:[-138.167,0,0],ti:[138.167,0,0]},{t:30,s:[-271.013,873.21,0]}],ix:2,l:2},a:{a:0,k:[17.987,333.21,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-388.534,333.21],[424.508,333.21]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.192156866193,.168627455831,.450980395079,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:8,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:30,st:0,ct:1,bm:0}],markers=[],animation={v:v$1,fr,ip,op,w:w$1,h:h$1,nm,ddd,assets,layers,markers},Loading=()=>jsxRuntimeExports.jsx("div",{className:"fixed inset-0 flex justify-center items-center backdrop-brightness-95 z-40",children:jsxRuntimeExports.jsx("div",{className:"w-60",children:jsxRuntimeExports.jsx(Lottie,{animationData:animation,loop:!0,autoPlay:!0})})}),getUserTypeLogin=async()=>await get$5("User/GetUserTypeLogin"),getUserRole=async()=>await get$5("User/GetRoleForAdmin"),getUserAge=async()=>await get$5("User/GetUserAge"),getAllUser=async _e=>await get$5(`User/Get-All?page=${_e}`),getAllTruck=async _e=>await get$5(`Truck/GetAllTruck?page=${_e}`),getTruckMiles=async(_e=2024)=>await get$5(`Truck/GetTotalDistance?year=${_e}`),getTruckStatusInYear=async(_e=2024)=>await get$5(`Truck/GetStatusTruckInYear?year=${_e}`),getAllOrder=async _e=>await get$5(`Order/GetAllOrderForAdmin?page=${_e}`),getAllOrderInYear=async(_e=2024)=>await get$5(`Order/GetTotalOrderInYear?year=${_e}`),getAllOrderAmountInYear=async(_e=2024)=>await get$5(`Order/GetAmountInYear?year=${_e}`);function r$3(_e){var et,tt,rt="";if(typeof _e=="string"||typeof _e=="number")rt+=_e;else if(typeof _e=="object")if(Array.isArray(_e)){var it=_e.length;for(et=0;et<it;et++)_e[et]&&(tt=r$3(_e[et]))&&(rt&&(rt+=" "),rt+=tt)}else for(tt in _e)_e[tt]&&(rt&&(rt+=" "),rt+=tt);return rt}function clsx$1(){for(var _e,et,tt=0,rt="",it=arguments.length;tt<it;tt++)(_e=arguments[tt])&&(et=r$3(_e))&&(rt&&(rt+=" "),rt+=et);return rt}var isArray$f=Array.isArray,isArray_1=isArray$f,freeGlobal$1=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$7=root$8.Symbol,_Symbol=Symbol$7,Symbol$6=_Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$6?Symbol$6.toStringTag:void 0;function getRawTag$1(_e){var et=hasOwnProperty$a.call(_e,symToStringTag$1),tt=_e[symToStringTag$1];try{_e[symToStringTag$1]=void 0;var rt=!0}catch{}var it=nativeObjectToString$1.call(_e);return rt&&(et?_e[symToStringTag$1]=tt:delete _e[symToStringTag$1]),it}var _getRawTag=getRawTag$1,objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString$1(_e){return nativeObjectToString.call(_e)}var _objectToString=objectToString$1,Symbol$5=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$9(_e){return _e==null?_e===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(_e)?getRawTag(_e):objectToString(_e)}var _baseGetTag=baseGetTag$9;function isObjectLike$9(_e){return _e!=null&&typeof _e=="object"}var isObjectLike_1=isObjectLike$9,baseGetTag$8=_baseGetTag,isObjectLike$8=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$6(_e){return typeof _e=="symbol"||isObjectLike$8(_e)&&baseGetTag$8(_e)==symbolTag$1}var isSymbol_1=isSymbol$6,isArray$e=isArray_1,isSymbol$5=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$4(_e,et){if(isArray$e(_e))return!1;var tt=typeof _e;return tt=="number"||tt=="symbol"||tt=="boolean"||_e==null||isSymbol$5(_e)?!0:reIsPlainProp.test(_e)||!reIsDeepProp.test(_e)||et!=null&&_e in Object(et)}var _isKey=isKey$4;function isObject$b(_e){var et=typeof _e;return _e!=null&&(et=="object"||et=="function")}var isObject_1=isObject$b;const isObject$c=getDefaultExportFromCjs(isObject_1);var baseGetTag$7=_baseGetTag,isObject$a=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$3(_e){if(!isObject$a(_e))return!1;var et=baseGetTag$7(_e);return et==funcTag$1||et==genTag||et==asyncTag||et==proxyTag}var isFunction_1=isFunction$3;const isFunction$4=getDefaultExportFromCjs(isFunction_1);var root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var _e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return _e?"Symbol(src)_1."+_e:""}();function isMasked$1(_e){return!!maskSrcKey&&maskSrcKey in _e}var _isMasked=isMasked$1,funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource$2(_e){if(_e!=null){try{return funcToString$2.call(_e)}catch{}try{return _e+""}catch{}}return""}var _toSource=toSource$2,isFunction$2=isFunction_1,isMasked=_isMasked,isObject$9=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(_e){if(!isObject$9(_e)||isMasked(_e))return!1;var et=isFunction$2(_e)?reIsNative:reIsHostCtor;return et.test(toSource$1(_e))}var _baseIsNative=baseIsNative$1;function getValue$1(_e,et){return _e==null?void 0:_e[et]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$7(_e,et){var tt=getValue(_e,et);return baseIsNative(tt)?tt:void 0}var _getNative=getNative$7,getNative$6=_getNative,nativeCreate$4=getNative$6(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(_e){var et=this.has(_e)&&delete this.__data__[_e];return this.size-=et?1:0,et}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet$1(_e){var et=this.__data__;if(nativeCreate$2){var tt=et[_e];return tt===HASH_UNDEFINED$2?void 0:tt}return hasOwnProperty$8.call(et,_e)?et[_e]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas$1(_e){var et=this.__data__;return nativeCreate$1?et[_e]!==void 0:hasOwnProperty$7.call(et,_e)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(_e,et){var tt=this.__data__;return this.size+=this.has(_e)?0:1,tt[_e]=nativeCreate&&et===void 0?HASH_UNDEFINED$1:et,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(_e){var et=-1,tt=_e==null?0:_e.length;for(this.clear();++et<tt;){var rt=_e[et];this.set(rt[0],rt[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(_e,et){return _e===et||_e!==_e&&et!==et}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(_e,et){for(var tt=_e.length;tt--;)if(eq$2(_e[tt][0],et))return tt;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(_e){var et=this.__data__,tt=assocIndexOf$3(et,_e);if(tt<0)return!1;var rt=et.length-1;return tt==rt?et.pop():splice.call(et,tt,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(_e){var et=this.__data__,tt=assocIndexOf$2(et,_e);return tt<0?void 0:et[tt][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(_e){return assocIndexOf$1(this.__data__,_e)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(_e,et){var tt=this.__data__,rt=assocIndexOf(tt,_e);return rt<0?(++this.size,tt.push([_e,et])):tt[rt][1]=et,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(_e){var et=-1,tt=_e==null?0:_e.length;for(this.clear();++et<tt;){var rt=_e[et];this.set(rt[0],rt[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$5=_getNative,root$6=_root,Map$6=getNative$5(root$6,"Map"),_Map=Map$6,Hash=_Hash,ListCache$3=_ListCache,Map$5=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$5||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(_e){var et=typeof _e;return et=="string"||et=="number"||et=="symbol"||et=="boolean"?_e!=="__proto__":_e===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(_e,et){var tt=_e.__data__;return isKeyable(et)?tt[typeof et=="string"?"string":"hash"]:tt.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(_e){var et=getMapData$3(this,_e).delete(_e);return this.size-=et?1:0,et}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(_e){return getMapData$2(this,_e).get(_e)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(_e){return getMapData$1(this,_e).has(_e)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(_e,et){var tt=getMapData(this,_e),rt=tt.size;return tt.set(_e,et),this.size+=tt.size==rt?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(_e){var et=-1,tt=_e==null?0:_e.length;for(this.clear();++et<tt;){var rt=_e[et];this.set(rt[0],rt[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT$2="Expected a function";function memoize$2(_e,et){if(typeof _e!="function"||et!=null&&typeof et!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var tt=function(){var rt=arguments,it=et?et.apply(this,rt):rt[0],st=tt.cache;if(st.has(it))return st.get(it);var ut=_e.apply(this,rt);return tt.cache=st.set(it,ut)||st,ut};return tt.cache=new(memoize$2.Cache||MapCache$2),tt}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2;const memoize$3=getDefaultExportFromCjs(memoize_1);var memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(_e){var et=memoize$1(_e,function(rt){return tt.size===MAX_MEMOIZE_SIZE&&tt.clear(),rt}),tt=et.cache;return et}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped(function(_e){var et=[];return _e.charCodeAt(0)===46&&et.push(""),_e.replace(rePropName,function(tt,rt,it,st){et.push(it?st.replace(reEscapeChar,"$1"):rt||tt)}),et}),_stringToPath=stringToPath$2;function arrayMap$3(_e,et){for(var tt=-1,rt=_e==null?0:_e.length,it=Array(rt);++tt<rt;)it[tt]=et(_e[tt],tt,_e);return it}var _arrayMap=arrayMap$3,Symbol$4=_Symbol,arrayMap$2=_arrayMap,isArray$d=isArray_1,isSymbol$4=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$4?Symbol$4.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(_e){if(typeof _e=="string")return _e;if(isArray$d(_e))return arrayMap$2(_e,baseToString$1)+"";if(isSymbol$4(_e))return symbolToString?symbolToString.call(_e):"";var et=_e+"";return et=="0"&&1/_e==-INFINITY$3?"-0":et}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$3(_e){return _e==null?"":baseToString(_e)}var toString_1=toString$3,isArray$c=isArray_1,isKey$3=_isKey,stringToPath$1=_stringToPath,toString$2=toString_1;function castPath$2(_e,et){return isArray$c(_e)?_e:isKey$3(_e,et)?[_e]:stringToPath$1(toString$2(_e))}var _castPath=castPath$2,isSymbol$3=isSymbol_1,INFINITY$2=1/0;function toKey$4(_e){if(typeof _e=="string"||isSymbol$3(_e))return _e;var et=_e+"";return et=="0"&&1/_e==-INFINITY$2?"-0":et}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$4(_e,et){et=castPath$1(et,_e);for(var tt=0,rt=et.length;_e!=null&&tt<rt;)_e=_e[toKey$3(et[tt++])];return tt&&tt==rt?_e:void 0}var _baseGet=baseGet$4,baseGet$3=_baseGet;function get$3(_e,et,tt){var rt=_e==null?void 0:baseGet$3(_e,et);return rt===void 0?tt:rt}var get_1=get$3;const get$4=getDefaultExportFromCjs(get_1);function isNil(_e){return _e==null}var isNil_1=isNil;const isNil$1=getDefaultExportFromCjs(isNil_1);var baseGetTag$6=_baseGetTag,isArray$b=isArray_1,isObjectLike$7=isObjectLike_1,stringTag$2="[object String]";function isString$3(_e){return typeof _e=="string"||!isArray$b(_e)&&isObjectLike$7(_e)&&baseGetTag$6(_e)==stringTag$2}var isString_1=isString$3;const isString$4=getDefaultExportFromCjs(isString_1);var reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c$1=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k$1=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m=b?Symbol.for("react.concurrent_mode"):60111,n$1=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r$2=b?Symbol.for("react.memo"):60115,t$1=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w=b?Symbol.for("react.fundamental"):60117,x$1=b?Symbol.for("react.responder"):60118,y$1=b?Symbol.for("react.scope"):60119;function z$1(_e){if(typeof _e=="object"&&_e!==null){var et=_e.$$typeof;switch(et){case c$1:switch(_e=_e.type,_e){case l:case m:case e:case g:case f:case p:return _e;default:switch(_e=_e&&_e.$$typeof,_e){case k$1:case n$1:case t$1:case r$2:case h:return _e;default:return et}}case d:return et}}}function A(_e){return z$1(_e)===m}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m;reactIs_production_min.ContextConsumer=k$1;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n$1;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t$1;reactIs_production_min.Memo=r$2;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(_e){return A(_e)||z$1(_e)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(_e){return z$1(_e)===k$1};reactIs_production_min.isContextProvider=function(_e){return z$1(_e)===h};reactIs_production_min.isElement=function(_e){return typeof _e=="object"&&_e!==null&&_e.$$typeof===c$1};reactIs_production_min.isForwardRef=function(_e){return z$1(_e)===n$1};reactIs_production_min.isFragment=function(_e){return z$1(_e)===e};reactIs_production_min.isLazy=function(_e){return z$1(_e)===t$1};reactIs_production_min.isMemo=function(_e){return z$1(_e)===r$2};reactIs_production_min.isPortal=function(_e){return z$1(_e)===d};reactIs_production_min.isProfiler=function(_e){return z$1(_e)===g};reactIs_production_min.isStrictMode=function(_e){return z$1(_e)===f};reactIs_production_min.isSuspense=function(_e){return z$1(_e)===p};reactIs_production_min.isValidElementType=function(_e){return typeof _e=="string"||typeof _e=="function"||_e===e||_e===m||_e===g||_e===f||_e===p||_e===q||typeof _e=="object"&&_e!==null&&(_e.$$typeof===t$1||_e.$$typeof===r$2||_e.$$typeof===h||_e.$$typeof===k$1||_e.$$typeof===n$1||_e.$$typeof===w||_e.$$typeof===x$1||_e.$$typeof===y$1||_e.$$typeof===v)};reactIs_production_min.typeOf=z$1;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,numberTag$2="[object Number]";function isNumber$4(_e){return typeof _e=="number"||isObjectLike$6(_e)&&baseGetTag$5(_e)==numberTag$2}var isNumber_1=isNumber$4;const isNumber$5=getDefaultExportFromCjs(isNumber_1);var isNumber$3=isNumber_1;function isNaN$1(_e){return isNumber$3(_e)&&_e!=+_e}var _isNaN=isNaN$1;const isNan=getDefaultExportFromCjs(_isNaN);var mathSign$1=function _e(et){return et===0?0:et>0?1:-1},isPercent$1=function _e(et){return isString$4(et)&&et.indexOf("%")===et.length-1},isNumber$2=function _e(et){return isNumber$5(et)&&!isNan(et)},isNumOrStr=function _e(et){return isNumber$2(et)||isString$4(et)},idCounter$1=0,uniqueId=function _e(et){var tt=++idCounter$1;return"".concat(et||"").concat(tt)},getPercentValue=function _e(et,tt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!isNumber$2(et)&&!isString$4(et))return rt;var st;if(isPercent$1(et)){var ut=et.indexOf("%");st=tt*parseFloat(et.slice(0,ut))/100}else st=+et;return isNan(st)&&(st=rt),it&&st>tt&&(st=tt),st},getAnyElementOfObject=function _e(et){if(!et)return null;var tt=Object.keys(et);return tt&&tt.length?et[tt[0]]:null},hasDuplicate=function _e(et){if(!Array.isArray(et))return!1;for(var tt=et.length,rt={},it=0;it<tt;it++)if(!rt[et[it]])rt[et[it]]=!0;else return!0;return!1},interpolateNumber$2=function _e(et,tt){return isNumber$2(et)&&isNumber$2(tt)?function(rt){return et+rt*(tt-et)}:function(){return tt}};function findEntryInArray(_e,et,tt){return!_e||!_e.length?null:_e.find(function(rt){return rt&&(typeof et=="function"?et(rt):get$4(rt,et))===tt})}function shallowEqual(_e,et){for(var tt in _e)if({}.hasOwnProperty.call(_e,tt)&&(!{}.hasOwnProperty.call(et,tt)||_e[tt]!==et[tt]))return!1;for(var rt in et)if({}.hasOwnProperty.call(et,rt)&&!{}.hasOwnProperty.call(_e,rt))return!1;return!0}function _typeof$K(_e){"@babel/helpers - typeof";return _typeof$K=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$K(_e)}var SVGContainerPropKeys=["viewBox","children"],SVGElementPropKeys=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PolyElementKeys=["points","pathLength"],FilteredElementKeyMap={svg:SVGContainerPropKeys,polygon:PolyElementKeys,polyline:PolyElementKeys},EventKeys=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],adaptEventHandlers=function _e(et,tt){if(!et||typeof et=="function"||typeof et=="boolean")return null;var rt=et;if(reactExports.isValidElement(et)&&(rt=et.props),!isObject$c(rt))return null;var it={};return Object.keys(rt).forEach(function(st){EventKeys.includes(st)&&(it[st]=tt||function(ut){return rt[st](rt,ut)})}),it},getEventHandlerOfChild=function _e(et,tt,rt){return function(it){return et(tt,rt,it),null}},adaptEventsOfChild=function _e(et,tt,rt){if(!isObject$c(et)||_typeof$K(et)!=="object")return null;var it=null;return Object.keys(et).forEach(function(st){var ut=et[st];EventKeys.includes(st)&&typeof ut=="function"&&(it||(it={}),it[st]=getEventHandlerOfChild(ut,tt,rt))}),it},_excluded$k=["children"],_excluded2$6=["children"];function _objectWithoutProperties$l(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$l(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$l(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _typeof$J(_e){"@babel/helpers - typeof";return _typeof$J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$J(_e)}var REACT_BROWSER_EVENT_MAP={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},getDisplayName=function _e(et){return typeof et=="string"?et:et?et.displayName||et.name||"Component":""},lastChildren=null,lastResult=null,toArray=function _e(et){if(et===lastChildren&&Array.isArray(lastResult))return lastResult;var tt=[];return reactExports.Children.forEach(et,function(rt){isNil$1(rt)||(reactIsExports.isFragment(rt)?tt=tt.concat(_e(rt.props.children)):tt.push(rt))}),lastResult=tt,lastChildren=et,tt};function findAllByType(_e,et){var tt=[],rt=[];return Array.isArray(et)?rt=et.map(function(it){return getDisplayName(it)}):rt=[getDisplayName(et)],toArray(_e).forEach(function(it){var st=get$4(it,"type.displayName")||get$4(it,"type.name");rt.indexOf(st)!==-1&&tt.push(it)}),tt}function findChildByType(_e,et){var tt=findAllByType(_e,et);return tt&&tt[0]}var validateWidthHeight=function _e(et){if(!et||!et.props)return!1;var tt=et.props,rt=tt.width,it=tt.height;return!(!isNumber$2(rt)||rt<=0||!isNumber$2(it)||it<=0)},SVG_TAGS=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],isSvgElement=function _e(et){return et&&et.type&&isString$4(et.type)&&SVG_TAGS.indexOf(et.type)>=0},isDotProps=function _e(et){return et&&_typeof$J(et)==="object"&&"cx"in et&&"cy"in et&&"r"in et},isValidSpreadableProp=function _e(et,tt,rt,it){var st,ut=(st=FilteredElementKeyMap==null?void 0:FilteredElementKeyMap[it])!==null&&st!==void 0?st:[];return!isFunction$4(et)&&(it&&ut.includes(tt)||SVGElementPropKeys.includes(tt))||rt&&EventKeys.includes(tt)},filterProps=function _e(et,tt,rt){if(!et||typeof et=="function"||typeof et=="boolean")return null;var it=et;if(reactExports.isValidElement(et)&&(it=et.props),!isObject$c(it))return null;var st={};return Object.keys(it).forEach(function(ut){var ht;isValidSpreadableProp((ht=it)===null||ht===void 0?void 0:ht[ut],ut,tt,rt)&&(st[ut]=it[ut])}),st},isChildrenEqual=function _e(et,tt){if(et===tt)return!0;var rt=reactExports.Children.count(et);if(rt!==reactExports.Children.count(tt))return!1;if(rt===0)return!0;if(rt===1)return isSingleChildEqual(Array.isArray(et)?et[0]:et,Array.isArray(tt)?tt[0]:tt);for(var it=0;it<rt;it++){var st=et[it],ut=tt[it];if(Array.isArray(st)||Array.isArray(ut)){if(!_e(st,ut))return!1}else if(!isSingleChildEqual(st,ut))return!1}return!0},isSingleChildEqual=function _e(et,tt){if(isNil$1(et)&&isNil$1(tt))return!0;if(!isNil$1(et)&&!isNil$1(tt)){var rt=et.props||{},it=rt.children,st=_objectWithoutProperties$l(rt,_excluded$k),ut=tt.props||{},ht=ut.children,at=_objectWithoutProperties$l(ut,_excluded2$6);return it&&ht?shallowEqual(st,at)&&isChildrenEqual(it,ht):!it&&!ht?shallowEqual(st,at):!1}return!1},renderByOrder=function _e(et,tt){var rt=[],it={};return toArray(et).forEach(function(st,ut){if(isSvgElement(st))rt.push(st);else if(st){var ht=getDisplayName(st.type),at=tt[ht]||{},gt=at.handler,bt=at.once;if(gt&&(!bt||!it[ht])){var wt=gt(st,ht,ut);rt.push(wt),it[ht]=!0}}}),rt},getReactEventByType=function _e(et){var tt=et&&et.type;return tt&&REACT_BROWSER_EVENT_MAP[tt]?REACT_BROWSER_EVENT_MAP[tt]:null},parseChildIndex=function _e(et,tt){return toArray(tt).indexOf(et)},_excluded$j=["children","width","height","viewBox","className","style","title","desc"];function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$w.apply(this,arguments)}function _objectWithoutProperties$k(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$k(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$k(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function Surface(_e){var et=_e.children,tt=_e.width,rt=_e.height,it=_e.viewBox,st=_e.className,ut=_e.style,ht=_e.title,at=_e.desc,gt=_objectWithoutProperties$k(_e,_excluded$j),bt=it||{width:tt,height:rt,x:0,y:0},wt=clsx$1("recharts-surface",st);return React$1.createElement("svg",_extends$w({},filterProps(gt,!0,"svg"),{className:wt,width:tt,height:rt,style:ut,viewBox:"".concat(bt.x," ").concat(bt.y," ").concat(bt.width," ").concat(bt.height)}),React$1.createElement("title",null,ht),React$1.createElement("desc",null,at),et)}var _excluded$i=["children","className"];function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$v.apply(this,arguments)}function _objectWithoutProperties$j(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$j(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$j(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}var Layer$2=React$1.forwardRef(function(_e,et){var tt=_e.children,rt=_e.className,it=_objectWithoutProperties$j(_e,_excluded$i),st=clsx$1("recharts-layer",rt);return React$1.createElement("g",_extends$v({className:st},filterProps(it,!0),{ref:et}),tt)}),warn$1=function _e(et,tt){for(var rt=arguments.length,it=new Array(rt>2?rt-2:0),st=2;st<rt;st++)it[st-2]=arguments[st]};function baseSlice$1(_e,et,tt){var rt=-1,it=_e.length;et<0&&(et=-et>it?0:it+et),tt=tt>it?it:tt,tt<0&&(tt+=it),it=et>tt?0:tt-et>>>0,et>>>=0;for(var st=Array(it);++rt<it;)st[rt]=_e[rt+et];return st}var _baseSlice=baseSlice$1,baseSlice=_baseSlice;function castSlice$1(_e,et,tt){var rt=_e.length;return tt=tt===void 0?rt:tt,!et&&tt>=rt?_e:baseSlice(_e,et,tt)}var _castSlice=castSlice$1,rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsVarRange$1="\\ufe0e\\ufe0f",rsZWJ$1="\\u200d",reHasUnicode=RegExp("["+rsZWJ$1+rsAstralRange$1+rsComboRange$1+rsVarRange$1+"]");function hasUnicode$2(_e){return reHasUnicode.test(_e)}var _hasUnicode=hasUnicode$2;function asciiToArray$1(_e){return _e.split("")}var _asciiToArray=asciiToArray$1,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsVarRange="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange+"]",rsCombo="["+rsComboRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ="\\u200d",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsSymbol="(?:"+[rsNonAstral+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g");function unicodeToArray$1(_e){return _e.match(reUnicode)||[]}var _unicodeToArray=unicodeToArray$1,asciiToArray=_asciiToArray,hasUnicode$1=_hasUnicode,unicodeToArray=_unicodeToArray;function stringToArray$1(_e){return hasUnicode$1(_e)?unicodeToArray(_e):asciiToArray(_e)}var _stringToArray=stringToArray$1,castSlice=_castSlice,hasUnicode=_hasUnicode,stringToArray=_stringToArray,toString$1=toString_1;function createCaseFirst$1(_e){return function(et){et=toString$1(et);var tt=hasUnicode(et)?stringToArray(et):void 0,rt=tt?tt[0]:et.charAt(0),it=tt?castSlice(tt,1).join(""):et.slice(1);return rt[_e]()+it}}var _createCaseFirst=createCaseFirst$1,createCaseFirst=_createCaseFirst,upperFirst=createCaseFirst("toUpperCase"),upperFirst_1=upperFirst;const upperFirst$1=getDefaultExportFromCjs(upperFirst_1);function constant$3(_e){return function(){return _e}}const cos=Math.cos,sin=Math.sin,sqrt$1=Math.sqrt,pi$1=Math.PI,tau$1=2*pi$1,pi=Math.PI,tau=2*pi,epsilon=1e-6,tauEpsilon=tau-epsilon;function append(_e){this._+=_e[0];for(let et=1,tt=_e.length;et<tt;++et)this._+=arguments[et]+_e[et]}function appendRound(_e){let et=Math.floor(_e);if(!(et>=0))throw new Error(`invalid digits: ${_e}`);if(et>15)return append;const tt=10**et;return function(rt){this._+=rt[0];for(let it=1,st=rt.length;it<st;++it)this._+=Math.round(arguments[it]*tt)/tt+rt[it]}}class Path{constructor(et){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=et==null?append:appendRound(et)}moveTo(et,tt){this._append`M${this._x0=this._x1=+et},${this._y0=this._y1=+tt}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(et,tt){this._append`L${this._x1=+et},${this._y1=+tt}`}quadraticCurveTo(et,tt,rt,it){this._append`Q${+et},${+tt},${this._x1=+rt},${this._y1=+it}`}bezierCurveTo(et,tt,rt,it,st,ut){this._append`C${+et},${+tt},${+rt},${+it},${this._x1=+st},${this._y1=+ut}`}arcTo(et,tt,rt,it,st){if(et=+et,tt=+tt,rt=+rt,it=+it,st=+st,st<0)throw new Error(`negative radius: ${st}`);let ut=this._x1,ht=this._y1,at=rt-et,gt=it-tt,bt=ut-et,wt=ht-tt,St=bt*bt+wt*wt;if(this._x1===null)this._append`M${this._x1=et},${this._y1=tt}`;else if(St>epsilon)if(!(Math.abs(wt*at-gt*bt)>epsilon)||!st)this._append`L${this._x1=et},${this._y1=tt}`;else{let kt=rt-ut,Rt=it-ht,It=at*at+gt*gt,Dt=kt*kt+Rt*Rt,Mt=Math.sqrt(It),$t=Math.sqrt(St),jt=st*Math.tan((pi-Math.acos((It+St-Dt)/(2*Mt*$t)))/2),Nt=jt/$t,Ut=jt/Mt;Math.abs(Nt-1)>epsilon&&this._append`L${et+Nt*bt},${tt+Nt*wt}`,this._append`A${st},${st},0,0,${+(wt*kt>bt*Rt)},${this._x1=et+Ut*at},${this._y1=tt+Ut*gt}`}}arc(et,tt,rt,it,st,ut){if(et=+et,tt=+tt,rt=+rt,ut=!!ut,rt<0)throw new Error(`negative radius: ${rt}`);let ht=rt*Math.cos(it),at=rt*Math.sin(it),gt=et+ht,bt=tt+at,wt=1^ut,St=ut?it-st:st-it;this._x1===null?this._append`M${gt},${bt}`:(Math.abs(this._x1-gt)>epsilon||Math.abs(this._y1-bt)>epsilon)&&this._append`L${gt},${bt}`,rt&&(St<0&&(St=St%tau+tau),St>tauEpsilon?this._append`A${rt},${rt},0,1,${wt},${et-ht},${tt-at}A${rt},${rt},0,1,${wt},${this._x1=gt},${this._y1=bt}`:St>epsilon&&this._append`A${rt},${rt},0,${+(St>=pi)},${wt},${this._x1=et+rt*Math.cos(st)},${this._y1=tt+rt*Math.sin(st)}`)}rect(et,tt,rt,it){this._append`M${this._x0=this._x1=+et},${this._y0=this._y1=+tt}h${rt=+rt}v${+it}h${-rt}Z`}toString(){return this._}}function withPath(_e){let et=3;return _e.digits=function(tt){if(!arguments.length)return et;if(tt==null)et=null;else{const rt=Math.floor(tt);if(!(rt>=0))throw new RangeError(`invalid digits: ${tt}`);et=rt}return _e},()=>new Path(et)}function array(_e){return typeof _e=="object"&&"length"in _e?_e:Array.from(_e)}function Linear(_e){this._context=_e}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_e,et){switch(_e=+_e,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(_e,et):this._context.moveTo(_e,et);break;case 1:this._point=2;default:this._context.lineTo(_e,et);break}}};function curveLinear(_e){return new Linear(_e)}function x(_e){return _e[0]}function y(_e){return _e[1]}function shapeLine(_e,et){var tt=constant$3(!0),rt=null,it=curveLinear,st=null,ut=withPath(ht);_e=typeof _e=="function"?_e:_e===void 0?x:constant$3(_e),et=typeof et=="function"?et:et===void 0?y:constant$3(et);function ht(at){var gt,bt=(at=array(at)).length,wt,St=!1,kt;for(rt==null&&(st=it(kt=ut())),gt=0;gt<=bt;++gt)!(gt<bt&&tt(wt=at[gt],gt,at))===St&&((St=!St)?st.lineStart():st.lineEnd()),St&&st.point(+_e(wt,gt,at),+et(wt,gt,at));if(kt)return st=null,kt+""||null}return ht.x=function(at){return arguments.length?(_e=typeof at=="function"?at:constant$3(+at),ht):_e},ht.y=function(at){return arguments.length?(et=typeof at=="function"?at:constant$3(+at),ht):et},ht.defined=function(at){return arguments.length?(tt=typeof at=="function"?at:constant$3(!!at),ht):tt},ht.curve=function(at){return arguments.length?(it=at,rt!=null&&(st=it(rt)),ht):it},ht.context=function(at){return arguments.length?(at==null?rt=st=null:st=it(rt=at),ht):rt},ht}function shapeArea(_e,et,tt){var rt=null,it=constant$3(!0),st=null,ut=curveLinear,ht=null,at=withPath(gt);_e=typeof _e=="function"?_e:_e===void 0?x:constant$3(+_e),et=typeof et=="function"?et:constant$3(et===void 0?0:+et),tt=typeof tt=="function"?tt:tt===void 0?y:constant$3(+tt);function gt(wt){var St,kt,Rt,It=(wt=array(wt)).length,Dt,Mt=!1,$t,jt=new Array(It),Nt=new Array(It);for(st==null&&(ht=ut($t=at())),St=0;St<=It;++St){if(!(St<It&&it(Dt=wt[St],St,wt))===Mt)if(Mt=!Mt)kt=St,ht.areaStart(),ht.lineStart();else{for(ht.lineEnd(),ht.lineStart(),Rt=St-1;Rt>=kt;--Rt)ht.point(jt[Rt],Nt[Rt]);ht.lineEnd(),ht.areaEnd()}Mt&&(jt[St]=+_e(Dt,St,wt),Nt[St]=+et(Dt,St,wt),ht.point(rt?+rt(Dt,St,wt):jt[St],tt?+tt(Dt,St,wt):Nt[St]))}if($t)return ht=null,$t+""||null}function bt(){return shapeLine().defined(it).curve(ut).context(st)}return gt.x=function(wt){return arguments.length?(_e=typeof wt=="function"?wt:constant$3(+wt),rt=null,gt):_e},gt.x0=function(wt){return arguments.length?(_e=typeof wt=="function"?wt:constant$3(+wt),gt):_e},gt.x1=function(wt){return arguments.length?(rt=wt==null?null:typeof wt=="function"?wt:constant$3(+wt),gt):rt},gt.y=function(wt){return arguments.length?(et=typeof wt=="function"?wt:constant$3(+wt),tt=null,gt):et},gt.y0=function(wt){return arguments.length?(et=typeof wt=="function"?wt:constant$3(+wt),gt):et},gt.y1=function(wt){return arguments.length?(tt=wt==null?null:typeof wt=="function"?wt:constant$3(+wt),gt):tt},gt.lineX0=gt.lineY0=function(){return bt().x(_e).y(et)},gt.lineY1=function(){return bt().x(_e).y(tt)},gt.lineX1=function(){return bt().x(rt).y(et)},gt.defined=function(wt){return arguments.length?(it=typeof wt=="function"?wt:constant$3(!!wt),gt):it},gt.curve=function(wt){return arguments.length?(ut=wt,st!=null&&(ht=ut(st)),gt):ut},gt.context=function(wt){return arguments.length?(wt==null?st=ht=null:ht=ut(st=wt),gt):st},gt}class Bump{constructor(et,tt){this._context=et,this._x=tt}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(et,tt){switch(et=+et,tt=+tt,this._point){case 0:{this._point=1,this._line?this._context.lineTo(et,tt):this._context.moveTo(et,tt);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+et)/2,this._y0,this._x0,tt,et,tt):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+tt)/2,et,this._y0,et,tt);break}}this._x0=et,this._y0=tt}}function bumpX(_e){return new Bump(_e,!0)}function bumpY(_e){return new Bump(_e,!1)}const symbolCircle={draw(_e,et){const tt=sqrt$1(et/pi$1);_e.moveTo(tt,0),_e.arc(0,0,tt,0,tau$1)}},symbolCross={draw(_e,et){const tt=sqrt$1(et/5)/2;_e.moveTo(-3*tt,-tt),_e.lineTo(-tt,-tt),_e.lineTo(-tt,-3*tt),_e.lineTo(tt,-3*tt),_e.lineTo(tt,-tt),_e.lineTo(3*tt,-tt),_e.lineTo(3*tt,tt),_e.lineTo(tt,tt),_e.lineTo(tt,3*tt),_e.lineTo(-tt,3*tt),_e.lineTo(-tt,tt),_e.lineTo(-3*tt,tt),_e.closePath()}},tan30=sqrt$1(1/3),tan30_2=tan30*2,symbolDiamond={draw(_e,et){const tt=sqrt$1(et/tan30_2),rt=tt*tan30;_e.moveTo(0,-tt),_e.lineTo(rt,0),_e.lineTo(0,tt),_e.lineTo(-rt,0),_e.closePath()}},symbolSquare={draw(_e,et){const tt=sqrt$1(et),rt=-tt/2;_e.rect(rt,rt,tt,tt)}},ka=.8908130915292852,kr=sin(pi$1/10)/sin(7*pi$1/10),kx=sin(tau$1/10)*kr,ky=-cos(tau$1/10)*kr,symbolStar={draw(_e,et){const tt=sqrt$1(et*ka),rt=kx*tt,it=ky*tt;_e.moveTo(0,-tt),_e.lineTo(rt,it);for(let st=1;st<5;++st){const ut=tau$1*st/5,ht=cos(ut),at=sin(ut);_e.lineTo(at*tt,-ht*tt),_e.lineTo(ht*rt-at*it,at*rt+ht*it)}_e.closePath()}},sqrt3=sqrt$1(3),symbolTriangle={draw(_e,et){const tt=-sqrt$1(et/(sqrt3*3));_e.moveTo(0,tt*2),_e.lineTo(-sqrt3*tt,-tt),_e.lineTo(sqrt3*tt,-tt),_e.closePath()}},c=-.5,s$1=sqrt$1(3)/2,k=1/sqrt$1(12),a=(k/2+1)*3,symbolWye={draw(_e,et){const tt=sqrt$1(et/a),rt=tt/2,it=tt*k,st=rt,ut=tt*k+tt,ht=-st,at=ut;_e.moveTo(rt,it),_e.lineTo(st,ut),_e.lineTo(ht,at),_e.lineTo(c*rt-s$1*it,s$1*rt+c*it),_e.lineTo(c*st-s$1*ut,s$1*st+c*ut),_e.lineTo(c*ht-s$1*at,s$1*ht+c*at),_e.lineTo(c*rt+s$1*it,c*it-s$1*rt),_e.lineTo(c*st+s$1*ut,c*ut-s$1*st),_e.lineTo(c*ht+s$1*at,c*at-s$1*ht),_e.closePath()}};function Symbol$3(_e,et){let tt=null,rt=withPath(it);_e=typeof _e=="function"?_e:constant$3(_e||symbolCircle),et=typeof et=="function"?et:constant$3(et===void 0?64:+et);function it(){let st;if(tt||(tt=st=rt()),_e.apply(this,arguments).draw(tt,+et.apply(this,arguments)),st)return tt=null,st+""||null}return it.type=function(st){return arguments.length?(_e=typeof st=="function"?st:constant$3(st),it):_e},it.size=function(st){return arguments.length?(et=typeof st=="function"?st:constant$3(+st),it):et},it.context=function(st){return arguments.length?(tt=st??null,it):tt},it}function noop$3(){}function point$2(_e,et,tt){_e._context.bezierCurveTo((2*_e._x0+_e._x1)/3,(2*_e._y0+_e._y1)/3,(_e._x0+2*_e._x1)/3,(_e._y0+2*_e._y1)/3,(_e._x0+4*_e._x1+et)/6,(_e._y0+4*_e._y1+tt)/6)}function Basis(_e){this._context=_e}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_e,et){switch(_e=+_e,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(_e,et):this._context.moveTo(_e,et);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$2(this,_e,et);break}this._x0=this._x1,this._x1=_e,this._y0=this._y1,this._y1=et}};function curveBasis(_e){return new Basis(_e)}function BasisClosed(_e){this._context=_e}BasisClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(_e,et){switch(_e=+_e,et=+et,this._point){case 0:this._point=1,this._x2=_e,this._y2=et;break;case 1:this._point=2,this._x3=_e,this._y3=et;break;case 2:this._point=3,this._x4=_e,this._y4=et,this._context.moveTo((this._x0+4*this._x1+_e)/6,(this._y0+4*this._y1+et)/6);break;default:point$2(this,_e,et);break}this._x0=this._x1,this._x1=_e,this._y0=this._y1,this._y1=et}};function curveBasisClosed(_e){return new BasisClosed(_e)}function BasisOpen(_e){this._context=_e}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(_e,et){switch(_e=+_e,et=+et,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var tt=(this._x0+4*this._x1+_e)/6,rt=(this._y0+4*this._y1+et)/6;this._line?this._context.lineTo(tt,rt):this._context.moveTo(tt,rt);break;case 3:this._point=4;default:point$2(this,_e,et);break}this._x0=this._x1,this._x1=_e,this._y0=this._y1,this._y1=et}};function curveBasisOpen(_e){return new BasisOpen(_e)}function LinearClosed(_e){this._context=_e}LinearClosed.prototype={areaStart:noop$3,areaEnd:noop$3,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(_e,et){_e=+_e,et=+et,this._point?this._context.lineTo(_e,et):(this._point=1,this._context.moveTo(_e,et))}};function curveLinearClosed(_e){return new LinearClosed(_e)}function sign(_e){return _e<0?-1:1}function slope3(_e,et,tt){var rt=_e._x1-_e._x0,it=et-_e._x1,st=(_e._y1-_e._y0)/(rt||it<0&&-0),ut=(tt-_e._y1)/(it||rt<0&&-0),ht=(st*it+ut*rt)/(rt+it);return(sign(st)+sign(ut))*Math.min(Math.abs(st),Math.abs(ut),.5*Math.abs(ht))||0}function slope2(_e,et){var tt=_e._x1-_e._x0;return tt?(3*(_e._y1-_e._y0)/tt-et)/2:et}function point$1(_e,et,tt){var rt=_e._x0,it=_e._y0,st=_e._x1,ut=_e._y1,ht=(st-rt)/3;_e._context.bezierCurveTo(rt+ht,it+ht*et,st-ht,ut-ht*tt,st,ut)}function MonotoneX(_e){this._context=_e}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point$1(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(_e,et){var tt=NaN;if(_e=+_e,et=+et,!(_e===this._x1&&et===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(_e,et):this._context.moveTo(_e,et);break;case 1:this._point=2;break;case 2:this._point=3,point$1(this,slope2(this,tt=slope3(this,_e,et)),tt);break;default:point$1(this,this._t0,tt=slope3(this,_e,et));break}this._x0=this._x1,this._x1=_e,this._y0=this._y1,this._y1=et,this._t0=tt}}};function MonotoneY(_e){this._context=new ReflectContext(_e)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(_e,et){MonotoneX.prototype.point.call(this,et,_e)};function ReflectContext(_e){this._context=_e}ReflectContext.prototype={moveTo:function(_e,et){this._context.moveTo(et,_e)},closePath:function(){this._context.closePath()},lineTo:function(_e,et){this._context.lineTo(et,_e)},bezierCurveTo:function(_e,et,tt,rt,it,st){this._context.bezierCurveTo(et,_e,rt,tt,st,it)}};function monotoneX(_e){return new MonotoneX(_e)}function monotoneY(_e){return new MonotoneY(_e)}function Natural(_e){this._context=_e}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var _e=this._x,et=this._y,tt=_e.length;if(tt)if(this._line?this._context.lineTo(_e[0],et[0]):this._context.moveTo(_e[0],et[0]),tt===2)this._context.lineTo(_e[1],et[1]);else for(var rt=controlPoints(_e),it=controlPoints(et),st=0,ut=1;ut<tt;++st,++ut)this._context.bezierCurveTo(rt[0][st],it[0][st],rt[1][st],it[1][st],_e[ut],et[ut]);(this._line||this._line!==0&&tt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(_e,et){this._x.push(+_e),this._y.push(+et)}};function controlPoints(_e){var et,tt=_e.length-1,rt,it=new Array(tt),st=new Array(tt),ut=new Array(tt);for(it[0]=0,st[0]=2,ut[0]=_e[0]+2*_e[1],et=1;et<tt-1;++et)it[et]=1,st[et]=4,ut[et]=4*_e[et]+2*_e[et+1];for(it[tt-1]=2,st[tt-1]=7,ut[tt-1]=8*_e[tt-1]+_e[tt],et=1;et<tt;++et)rt=it[et]/st[et-1],st[et]-=rt,ut[et]-=rt*ut[et-1];for(it[tt-1]=ut[tt-1]/st[tt-1],et=tt-2;et>=0;--et)it[et]=(ut[et]-it[et+1])/st[et];for(st[tt-1]=(_e[tt]+it[tt-1])/2,et=0;et<tt-1;++et)st[et]=2*_e[et+1]-it[et+1];return[it,st]}function curveNatural(_e){return new Natural(_e)}function Step(_e,et){this._context=_e,this._t=et}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(_e,et){switch(_e=+_e,et=+et,this._point){case 0:this._point=1,this._line?this._context.lineTo(_e,et):this._context.moveTo(_e,et);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,et),this._context.lineTo(_e,et);else{var tt=this._x*(1-this._t)+_e*this._t;this._context.lineTo(tt,this._y),this._context.lineTo(tt,et)}break}}this._x=_e,this._y=et}};function curveStep(_e){return new Step(_e,.5)}function stepBefore(_e){return new Step(_e,0)}function stepAfter(_e){return new Step(_e,1)}function stackOffsetNone(_e,et){if((ut=_e.length)>1)for(var tt=1,rt,it,st=_e[et[0]],ut,ht=st.length;tt<ut;++tt)for(it=st,st=_e[et[tt]],rt=0;rt<ht;++rt)st[rt][1]+=st[rt][0]=isNaN(it[rt][1])?it[rt][0]:it[rt][1]}function stackOrderNone(_e){for(var et=_e.length,tt=new Array(et);--et>=0;)tt[et]=et;return tt}function stackValue(_e,et){return _e[et]}function stackSeries(_e){const et=[];return et.key=_e,et}function shapeStack(){var _e=constant$3([]),et=stackOrderNone,tt=stackOffsetNone,rt=stackValue;function it(st){var ut=Array.from(_e.apply(this,arguments),stackSeries),ht,at=ut.length,gt=-1,bt;for(const wt of st)for(ht=0,++gt;ht<at;++ht)(ut[ht][gt]=[0,+rt(wt,ut[ht].key,gt,st)]).data=wt;for(ht=0,bt=array(et(ut));ht<at;++ht)ut[bt[ht]].index=ht;return tt(ut,bt),ut}return it.keys=function(st){return arguments.length?(_e=typeof st=="function"?st:constant$3(Array.from(st)),it):_e},it.value=function(st){return arguments.length?(rt=typeof st=="function"?st:constant$3(+st),it):rt},it.order=function(st){return arguments.length?(et=st==null?stackOrderNone:typeof st=="function"?st:constant$3(Array.from(st)),it):et},it.offset=function(st){return arguments.length?(tt=st??stackOffsetNone,it):tt},it}function stackOffsetExpand(_e,et){if((rt=_e.length)>0){for(var tt,rt,it=0,st=_e[0].length,ut;it<st;++it){for(ut=tt=0;tt<rt;++tt)ut+=_e[tt][it][1]||0;if(ut)for(tt=0;tt<rt;++tt)_e[tt][it][1]/=ut}stackOffsetNone(_e,et)}}function stackOffsetSilhouette(_e,et){if((it=_e.length)>0){for(var tt=0,rt=_e[et[0]],it,st=rt.length;tt<st;++tt){for(var ut=0,ht=0;ut<it;++ut)ht+=_e[ut][tt][1]||0;rt[tt][1]+=rt[tt][0]=-ht/2}stackOffsetNone(_e,et)}}function stackOffsetWiggle(_e,et){if(!(!((ut=_e.length)>0)||!((st=(it=_e[et[0]]).length)>0))){for(var tt=0,rt=1,it,st,ut;rt<st;++rt){for(var ht=0,at=0,gt=0;ht<ut;++ht){for(var bt=_e[et[ht]],wt=bt[rt][1]||0,St=bt[rt-1][1]||0,kt=(wt-St)/2,Rt=0;Rt<ht;++Rt){var It=_e[et[Rt]],Dt=It[rt][1]||0,Mt=It[rt-1][1]||0;kt+=Dt-Mt}at+=wt,gt+=kt*wt}it[rt-1][1]+=it[rt-1][0]=tt,at&&(tt-=gt/at)}it[rt-1][1]+=it[rt-1][0]=tt,stackOffsetNone(_e,et)}}function _typeof$I(_e){"@babel/helpers - typeof";return _typeof$I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$I(_e)}var _excluded$h=["type","size","sizeType"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$u.apply(this,arguments)}function ownKeys$E(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$D(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$E(Object(tt),!0).forEach(function(rt){_defineProperty$H(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$E(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$H(_e,et,tt){return et=_toPropertyKey$G(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$G(_e){var et=_toPrimitive$G(_e,"string");return _typeof$I(et)=="symbol"?et:String(et)}function _toPrimitive$G(_e,et){if(_typeof$I(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$I(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _objectWithoutProperties$i(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$i(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$i(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}var symbolFactories={symbolCircle,symbolCross,symbolDiamond,symbolSquare,symbolStar,symbolTriangle,symbolWye},RADIAN$2=Math.PI/180,getSymbolFactory=function _e(et){var tt="symbol".concat(upperFirst$1(et));return symbolFactories[tt]||symbolCircle},calculateAreaSize=function _e(et,tt,rt){if(tt==="area")return et;switch(rt){case"cross":return 5*et*et/9;case"diamond":return .5*et*et/Math.sqrt(3);case"square":return et*et;case"star":{var it=18*RADIAN$2;return 1.25*et*et*(Math.tan(it)-Math.tan(it*2)*Math.pow(Math.tan(it),2))}case"triangle":return Math.sqrt(3)*et*et/4;case"wye":return(21-10*Math.sqrt(3))*et*et/8;default:return Math.PI*et*et/4}},registerSymbol=function _e(et,tt){symbolFactories["symbol".concat(upperFirst$1(et))]=tt},Symbols=function _e(et){var tt=et.type,rt=tt===void 0?"circle":tt,it=et.size,st=it===void 0?64:it,ut=et.sizeType,ht=ut===void 0?"area":ut,at=_objectWithoutProperties$i(et,_excluded$h),gt=_objectSpread$D(_objectSpread$D({},at),{},{type:rt,size:st,sizeType:ht}),bt=function(){var Dt=getSymbolFactory(rt),Mt=Symbol$3().type(Dt).size(calculateAreaSize(st,ht,rt));return Mt()},wt=gt.className,St=gt.cx,kt=gt.cy,Rt=filterProps(gt,!0);return St===+St&&kt===+kt&&st===+st?React$1.createElement("path",_extends$u({},Rt,{className:clsx$1("recharts-symbols",wt),transform:"translate(".concat(St,", ").concat(kt,")"),d:bt()})):null};Symbols.registerSymbol=registerSymbol;function _typeof$H(_e){"@babel/helpers - typeof";return _typeof$H=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$H(_e)}function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$t.apply(this,arguments)}function ownKeys$D(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$C(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$D(Object(tt),!0).forEach(function(rt){_defineProperty$G(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$D(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$h(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$h(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$F(rt.key),rt)}}function _createClass$h(_e,et,tt){return et&&_defineProperties$h(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$c(_e,et,tt){return et=_getPrototypeOf$e(et),_possibleConstructorReturn$e(_e,_isNativeReflectConstruct$d()?Reflect.construct(et,tt||[],_getPrototypeOf$e(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$e(_e,et){if(et&&(_typeof$H(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$e(_e)}function _assertThisInitialized$e(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$d(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$d=function(){return!!_e})()}function _getPrototypeOf$e(_e){return _getPrototypeOf$e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$e(_e)}function _inherits$e(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$e(_e,et)}function _setPrototypeOf$e(_e,et){return _setPrototypeOf$e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$e(_e,et)}function _defineProperty$G(_e,et,tt){return et=_toPropertyKey$F(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$F(_e){var et=_toPrimitive$F(_e,"string");return _typeof$H(et)=="symbol"?et:String(et)}function _toPrimitive$F(_e,et){if(_typeof$H(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$H(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var SIZE=32,DefaultLegendContent=function(_e){_inherits$e(et,_e);function et(){return _classCallCheck$h(this,et),_callSuper$c(this,et,arguments)}return _createClass$h(et,[{key:"renderIcon",value:function(rt){var it=this.props.inactiveColor,st=SIZE/2,ut=SIZE/6,ht=SIZE/3,at=rt.inactive?it:rt.color;if(rt.type==="plainline")return React$1.createElement("line",{strokeWidth:4,fill:"none",stroke:at,strokeDasharray:rt.payload.strokeDasharray,x1:0,y1:st,x2:SIZE,y2:st,className:"recharts-legend-icon"});if(rt.type==="line")return React$1.createElement("path",{strokeWidth:4,fill:"none",stroke:at,d:"M0,".concat(st,"h").concat(ht,`
            A`).concat(ut,",").concat(ut,",0,1,1,").concat(2*ht,",").concat(st,`
            H`).concat(SIZE,"M").concat(2*ht,",").concat(st,`
            A`).concat(ut,",").concat(ut,",0,1,1,").concat(ht,",").concat(st),className:"recharts-legend-icon"});if(rt.type==="rect")return React$1.createElement("path",{stroke:"none",fill:at,d:"M0,".concat(SIZE/8,"h").concat(SIZE,"v").concat(SIZE*3/4,"h").concat(-SIZE,"z"),className:"recharts-legend-icon"});if(React$1.isValidElement(rt.legendIcon)){var gt=_objectSpread$C({},rt);return delete gt.legendIcon,React$1.cloneElement(rt.legendIcon,gt)}return React$1.createElement(Symbols,{fill:at,cx:st,cy:st,size:SIZE,sizeType:"diameter",type:rt.type})}},{key:"renderItems",value:function(){var rt=this,it=this.props,st=it.payload,ut=it.iconSize,ht=it.layout,at=it.formatter,gt=it.inactiveColor,bt={x:0,y:0,width:SIZE,height:SIZE},wt={display:ht==="horizontal"?"inline-block":"block",marginRight:10},St={display:"inline-block",verticalAlign:"middle",marginRight:4};return st.map(function(kt,Rt){var It=kt.formatter||at,Dt=clsx$1(_defineProperty$G(_defineProperty$G({"recharts-legend-item":!0},"legend-item-".concat(Rt),!0),"inactive",kt.inactive));if(kt.type==="none")return null;var Mt=isFunction$4(kt.value)?null:kt.value;warn$1(!isFunction$4(kt.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var $t=kt.inactive?gt:kt.color;return React$1.createElement("li",_extends$t({className:Dt,style:wt,key:"legend-item-".concat(Rt)},adaptEventsOfChild(rt.props,kt,Rt)),React$1.createElement(Surface,{width:ut,height:ut,viewBox:bt,style:St},rt.renderIcon(kt)),React$1.createElement("span",{className:"recharts-legend-item-text",style:{color:$t}},It?It(Mt,kt,Rt):Mt))})}},{key:"render",value:function(){var rt=this.props,it=rt.payload,st=rt.layout,ut=rt.align;if(!it||!it.length)return null;var ht={padding:0,margin:0,textAlign:st==="horizontal"?ut:"left"};return React$1.createElement("ul",{className:"recharts-default-legend",style:ht},this.renderItems())}}]),et}(reactExports.PureComponent);_defineProperty$G(DefaultLegendContent,"displayName","Legend");_defineProperty$G(DefaultLegendContent,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(_e){var et=this.__data__,tt=et.delete(_e);return this.size=et.size,tt}var _stackDelete=stackDelete$1;function stackGet$1(_e){return this.__data__.get(_e)}var _stackGet=stackGet$1;function stackHas$1(_e){return this.__data__.has(_e)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$4=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(_e,et){var tt=this.__data__;if(tt instanceof ListCache$1){var rt=tt.__data__;if(!Map$4||rt.length<LARGE_ARRAY_SIZE$1-1)return rt.push([_e,et]),this.size=++tt.size,this;tt=this.__data__=new MapCache$1(rt)}return tt.set(_e,et),this.size=tt.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(_e){var et=this.__data__=new ListCache(_e);this.size=et.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(_e){return this.__data__.set(_e,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(_e){return this.__data__.has(_e)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(_e){var et=-1,tt=_e==null?0:_e.length;for(this.__data__=new MapCache;++et<tt;)this.add(_e[et])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$2(_e,et){for(var tt=-1,rt=_e==null?0:_e.length;++tt<rt;)if(et(_e[tt],tt,_e))return!0;return!1}var _arraySome=arraySome$2;function cacheHas$2(_e,et){return _e.has(et)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome$1=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(_e,et,tt,rt,it,st){var ut=tt&COMPARE_PARTIAL_FLAG$5,ht=_e.length,at=et.length;if(ht!=at&&!(ut&&at>ht))return!1;var gt=st.get(_e),bt=st.get(et);if(gt&&bt)return gt==et&&bt==_e;var wt=-1,St=!0,kt=tt&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(st.set(_e,et),st.set(et,_e);++wt<ht;){var Rt=_e[wt],It=et[wt];if(rt)var Dt=ut?rt(It,Rt,wt,et,_e,st):rt(Rt,It,wt,_e,et,st);if(Dt!==void 0){if(Dt)continue;St=!1;break}if(kt){if(!arraySome$1(et,function(Mt,$t){if(!cacheHas$1(kt,$t)&&(Rt===Mt||it(Rt,Mt,tt,rt,st)))return kt.push($t)})){St=!1;break}}else if(!(Rt===It||it(Rt,It,tt,rt,st))){St=!1;break}}return st.delete(_e),st.delete(et),St}var _equalArrays=equalArrays$2,root$5=_root,Uint8Array$2=root$5.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(_e){var et=-1,tt=Array(_e.size);return _e.forEach(function(rt,it){tt[++et]=[it,rt]}),tt}var _mapToArray=mapToArray$1;function setToArray$3(_e){var et=-1,tt=Array(_e.size);return _e.forEach(function(rt){tt[++et]=rt}),tt}var _setToArray=setToArray$3,Symbol$2=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$2="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$1="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$2?Symbol$2.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(_e,et,tt,rt,it,st,ut){switch(tt){case dataViewTag$2:if(_e.byteLength!=et.byteLength||_e.byteOffset!=et.byteOffset)return!1;_e=_e.buffer,et=et.buffer;case arrayBufferTag$1:return!(_e.byteLength!=et.byteLength||!st(new Uint8Array$1(_e),new Uint8Array$1(et)));case boolTag$2:case dateTag$1:case numberTag$1:return eq$1(+_e,+et);case errorTag$1:return _e.name==et.name&&_e.message==et.message;case regexpTag$1:case stringTag$1:return _e==et+"";case mapTag$2:var ht=mapToArray;case setTag$2:var at=rt&COMPARE_PARTIAL_FLAG$4;if(ht||(ht=setToArray$2),_e.size!=et.size&&!at)return!1;var gt=ut.get(_e);if(gt)return gt==et;rt|=COMPARE_UNORDERED_FLAG$2,ut.set(_e,et);var bt=equalArrays$1(ht(_e),ht(et),rt,it,st,ut);return ut.delete(_e),bt;case symbolTag:if(symbolValueOf)return symbolValueOf.call(_e)==symbolValueOf.call(et)}return!1}var _equalByTag=equalByTag$1;function arrayPush$2(_e,et){for(var tt=-1,rt=et.length,it=_e.length;++tt<rt;)_e[it+tt]=et[tt];return _e}var _arrayPush=arrayPush$2,arrayPush$1=_arrayPush,isArray$a=isArray_1;function baseGetAllKeys$1(_e,et,tt){var rt=et(_e);return isArray$a(_e)?rt:arrayPush$1(rt,tt(_e))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(_e,et){for(var tt=-1,rt=_e==null?0:_e.length,it=0,st=[];++tt<rt;){var ut=_e[tt];et(ut,tt,_e)&&(st[it++]=ut)}return st}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$7=Object.prototype,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(_e){return _e==null?[]:(_e=Object(_e),arrayFilter(nativeGetSymbols(_e),function(et){return propertyIsEnumerable$1.call(_e,et)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(_e,et){for(var tt=-1,rt=Array(_e);++tt<_e;)rt[tt]=et(tt);return rt}var _baseTimes=baseTimes$1,baseGetTag$4=_baseGetTag,isObjectLike$5=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(_e){return isObjectLike$5(_e)&&baseGetTag$4(_e)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$4=isObjectLike_1,objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(_e){return isObjectLike$4(_e)&&hasOwnProperty$6.call(_e,"callee")&&!propertyIsEnumerable.call(_e,"callee")},isArguments_1=isArguments$3,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(_e,et){var tt=_root,rt=stubFalse_1,it=et&&!et.nodeType&&et,st=it&&!0&&_e&&!_e.nodeType&&_e,ut=st&&st.exports===it,ht=ut?tt.Buffer:void 0,at=ht?ht.isBuffer:void 0,gt=at||rt;_e.exports=gt})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(_e,et){var tt=typeof _e;return et=et??MAX_SAFE_INTEGER$2,!!et&&(tt=="number"||tt!="symbol"&&reIsUint.test(_e))&&_e>-1&&_e%1==0&&_e<et}var _isIndex=isIndex$3,MAX_SAFE_INTEGER$1=9007199254740991;function isLength$4(_e){return typeof _e=="number"&&_e>-1&&_e%1==0&&_e<=MAX_SAFE_INTEGER$1}var isLength_1=isLength$4,baseGetTag$3=_baseGetTag,isLength$3=isLength_1,isObjectLike$3=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag="[object Number]",objectTag$3="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag]=typedArrayTags[objectTag$3]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(_e){return isObjectLike$3(_e)&&isLength$3(_e.length)&&!!typedArrayTags[baseGetTag$3(_e)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(_e){return function(et){return _e(et)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(_e,et){var tt=_freeGlobal,rt=et&&!et.nodeType&&et,it=rt&&!0&&_e&&!_e.nodeType&&_e,st=it&&it.exports===rt,ut=st&&tt.process,ht=function(){try{var at=it&&it.require&&it.require("util").types;return at||ut&&ut.binding&&ut.binding("util")}catch{}}();_e.exports=ht})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$3=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$3,baseTimes=_baseTimes,isArguments$2=isArguments_1,isArray$9=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$2=isTypedArray_1,objectProto$5=Object.prototype,hasOwnProperty$5=objectProto$5.hasOwnProperty;function arrayLikeKeys$1(_e,et){var tt=isArray$9(_e),rt=!tt&&isArguments$2(_e),it=!tt&&!rt&&isBuffer$1(_e),st=!tt&&!rt&&!it&&isTypedArray$2(_e),ut=tt||rt||it||st,ht=ut?baseTimes(_e.length,String):[],at=ht.length;for(var gt in _e)(et||hasOwnProperty$5.call(_e,gt))&&!(ut&&(gt=="length"||it&&(gt=="offset"||gt=="parent")||st&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||isIndex$2(gt,at)))&&ht.push(gt);return ht}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$4=Object.prototype;function isPrototype$1(_e){var et=_e&&_e.constructor,tt=typeof et=="function"&&et.prototype||objectProto$4;return _e===tt}var _isPrototype=isPrototype$1;function overArg$2(_e,et){return function(tt){return _e(et(tt))}}var _overArg=overArg$2,overArg$1=_overArg,nativeKeys$1=overArg$1(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function baseKeys$1(_e){if(!isPrototype(_e))return nativeKeys(_e);var et=[];for(var tt in Object(_e))hasOwnProperty$4.call(_e,tt)&&tt!="constructor"&&et.push(tt);return et}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength$2=isLength_1;function isArrayLike$5(_e){return _e!=null&&isLength$2(_e.length)&&!isFunction$1(_e)}var isArrayLike_1=isArrayLike$5,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$4=isArrayLike_1;function keys$5(_e){return isArrayLike$4(_e)?arrayLikeKeys(_e):baseKeys(_e)}var keys_1=keys$5,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$4=keys_1;function getAllKeys$1(_e){return baseGetAllKeys(_e,keys$4,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty;function equalObjects$1(_e,et,tt,rt,it,st){var ut=tt&COMPARE_PARTIAL_FLAG$3,ht=getAllKeys(_e),at=ht.length,gt=getAllKeys(et),bt=gt.length;if(at!=bt&&!ut)return!1;for(var wt=at;wt--;){var St=ht[wt];if(!(ut?St in et:hasOwnProperty$3.call(et,St)))return!1}var kt=st.get(_e),Rt=st.get(et);if(kt&&Rt)return kt==et&&Rt==_e;var It=!0;st.set(_e,et),st.set(et,_e);for(var Dt=ut;++wt<at;){St=ht[wt];var Mt=_e[St],$t=et[St];if(rt)var jt=ut?rt($t,Mt,St,et,_e,st):rt(Mt,$t,St,_e,et,st);if(!(jt===void 0?Mt===$t||it(Mt,$t,tt,rt,st):jt)){It=!1;break}Dt||(Dt=St=="constructor")}if(It&&!Dt){var Nt=_e.constructor,Ut=et.constructor;Nt!=Ut&&"constructor"in _e&&"constructor"in et&&!(typeof Nt=="function"&&Nt instanceof Nt&&typeof Ut=="function"&&Ut instanceof Ut)&&(It=!1)}return st.delete(_e),st.delete(et),It}var _equalObjects=equalObjects$1,getNative$4=_getNative,root$4=_root,DataView$2=getNative$4(root$4,"DataView"),_DataView=DataView$2,getNative$3=_getNative,root$3=_root,Promise$2=getNative$3(root$3,"Promise"),_Promise=Promise$2,getNative$2=_getNative,root$2=_root,Set$3=getNative$2(root$2,"Set"),_Set=Set$3,getNative$1=_getNative,root$1=_root,WeakMap$2=getNative$1(root$1,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$3=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$2=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$3),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$2=baseGetTag$2;(DataView$1&&getTag$2(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$3&&getTag$2(new Map$3)!=mapTag||Promise$1&&getTag$2(Promise$1.resolve())!=promiseTag||Set$2&&getTag$2(new Set$2)!=setTag||WeakMap$1&&getTag$2(new WeakMap$1)!=weakMapTag)&&(getTag$2=function(_e){var et=baseGetTag$2(_e),tt=et==objectTag$2?_e.constructor:void 0,rt=tt?toSource(tt):"";if(rt)switch(rt){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return et});var _getTag=getTag$2,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag$1=_getTag,isArray$8=isArray_1,isBuffer=isBufferExports,isTypedArray$1=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag$1="[object Object]",objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseIsEqualDeep$1(_e,et,tt,rt,it,st){var ut=isArray$8(_e),ht=isArray$8(et),at=ut?arrayTag:getTag$1(_e),gt=ht?arrayTag:getTag$1(et);at=at==argsTag?objectTag$1:at,gt=gt==argsTag?objectTag$1:gt;var bt=at==objectTag$1,wt=gt==objectTag$1,St=at==gt;if(St&&isBuffer(_e)){if(!isBuffer(et))return!1;ut=!0,bt=!1}if(St&&!bt)return st||(st=new Stack$1),ut||isTypedArray$1(_e)?equalArrays(_e,et,tt,rt,it,st):equalByTag(_e,et,at,tt,rt,it,st);if(!(tt&COMPARE_PARTIAL_FLAG$2)){var kt=bt&&hasOwnProperty$2.call(_e,"__wrapped__"),Rt=wt&&hasOwnProperty$2.call(et,"__wrapped__");if(kt||Rt){var It=kt?_e.value():_e,Dt=Rt?et.value():et;return st||(st=new Stack$1),it(It,Dt,tt,rt,st)}}return St?(st||(st=new Stack$1),equalObjects(_e,et,tt,rt,it,st)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$2=isObjectLike_1;function baseIsEqual$3(_e,et,tt,rt,it){return _e===et?!0:_e==null||et==null||!isObjectLike$2(_e)&&!isObjectLike$2(et)?_e!==_e&&et!==et:baseIsEqualDeep(_e,et,tt,rt,baseIsEqual$3,it)}var _baseIsEqual=baseIsEqual$3,Stack=_Stack,baseIsEqual$2=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(_e,et,tt,rt){var it=tt.length,st=it,ut=!rt;if(_e==null)return!st;for(_e=Object(_e);it--;){var ht=tt[it];if(ut&&ht[2]?ht[1]!==_e[ht[0]]:!(ht[0]in _e))return!1}for(;++it<st;){ht=tt[it];var at=ht[0],gt=_e[at],bt=ht[1];if(ut&&ht[2]){if(gt===void 0&&!(at in _e))return!1}else{var wt=new Stack;if(rt)var St=rt(gt,bt,at,_e,et,wt);if(!(St===void 0?baseIsEqual$2(bt,gt,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,rt,wt):St))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$8=isObject_1;function isStrictComparable$2(_e){return _e===_e&&!isObject$8(_e)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$3=keys_1;function getMatchData$1(_e){for(var et=keys$3(_e),tt=et.length;tt--;){var rt=et[tt],it=_e[rt];et[tt]=[rt,it,isStrictComparable$1(it)]}return et}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(_e,et){return function(tt){return tt==null?!1:tt[_e]===et&&(et!==void 0||_e in Object(tt))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(_e){var et=getMatchData(_e);return et.length==1&&et[0][2]?matchesStrictComparable$1(et[0][0],et[0][1]):function(tt){return tt===_e||baseIsMatch(tt,_e,et)}}var _baseMatches=baseMatches$1;function baseHasIn$1(_e,et){return _e!=null&&et in Object(_e)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments$1=isArguments_1,isArray$7=isArray_1,isIndex$1=_isIndex,isLength$1=isLength_1,toKey$2=_toKey;function hasPath$1(_e,et,tt){et=castPath(et,_e);for(var rt=-1,it=et.length,st=!1;++rt<it;){var ut=toKey$2(et[rt]);if(!(st=_e!=null&&tt(_e,ut)))break;_e=_e[ut]}return st||++rt!=it?st:(it=_e==null?0:_e.length,!!it&&isLength$1(it)&&isIndex$1(ut,it)&&(isArray$7(_e)||isArguments$1(_e)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(_e,et){return _e!=null&&hasPath(_e,et,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual$1=_baseIsEqual,get$2=get_1,hasIn=hasIn_1,isKey$2=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(_e,et){return isKey$2(_e)&&isStrictComparable(et)?matchesStrictComparable(toKey$1(_e),et):function(tt){var rt=get$2(tt,_e);return rt===void 0&&rt===et?hasIn(tt,_e):baseIsEqual$1(et,rt,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$b(_e){return _e}var identity_1=identity$b;function baseProperty$1(_e){return function(et){return et==null?void 0:et[_e]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(_e){return function(et){return baseGet$2(et,_e)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey$1=_isKey,toKey=_toKey;function property$1(_e){return isKey$1(_e)?baseProperty(toKey(_e)):basePropertyDeep(_e)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$a=identity_1,isArray$6=isArray_1,property=property_1;function baseIteratee$a(_e){return typeof _e=="function"?_e:_e==null?identity$a:typeof _e=="object"?isArray$6(_e)?baseMatchesProperty(_e[0],_e[1]):baseMatches(_e):property(_e)}var _baseIteratee=baseIteratee$a;function baseFindIndex$2(_e,et,tt,rt){for(var it=_e.length,st=tt+(rt?1:-1);rt?st--:++st<it;)if(et(_e[st],st,_e))return st;return-1}var _baseFindIndex=baseFindIndex$2;function baseIsNaN$1(_e){return _e!==_e}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(_e,et,tt){for(var rt=tt-1,it=_e.length;++rt<it;)if(_e[rt]===et)return rt;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex$1=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(_e,et,tt){return et===et?strictIndexOf(_e,et,tt):baseFindIndex$1(_e,baseIsNaN,tt)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(_e,et){var tt=_e==null?0:_e.length;return!!tt&&baseIndexOf(_e,et,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(_e,et,tt){for(var rt=-1,it=_e==null?0:_e.length;++rt<it;)if(tt(et,_e[rt]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$2(){}var noop_1=noop$2,Set$1=_Set,noop$1=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(_e){return new Set$1(_e)}:noop$1,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$1(_e,et,tt){var rt=-1,it=arrayIncludes,st=_e.length,ut=!0,ht=[],at=ht;if(tt)ut=!1,it=arrayIncludesWith;else if(st>=LARGE_ARRAY_SIZE){var gt=et?null:createSet(_e);if(gt)return setToArray(gt);ut=!1,it=cacheHas,at=new SetCache}else at=et?[]:ht;e:for(;++rt<st;){var bt=_e[rt],wt=et?et(bt):bt;if(bt=tt||bt!==0?bt:0,ut&&wt===wt){for(var St=at.length;St--;)if(at[St]===wt)continue e;et&&at.push(wt),ht.push(bt)}else it(at,wt,tt)||(at!==ht&&at.push(wt),ht.push(bt))}return ht}var _baseUniq=baseUniq$1,baseIteratee$9=_baseIteratee,baseUniq=_baseUniq;function uniqBy(_e,et){return _e&&_e.length?baseUniq(_e,baseIteratee$9(et)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function getUniqPayload(_e,et,tt){return et===!0?uniqBy$1(_e,tt):isFunction$4(et)?uniqBy$1(_e,et):_e}function _typeof$G(_e){"@babel/helpers - typeof";return _typeof$G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$G(_e)}var _excluded$g=["ref"];function ownKeys$C(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$B(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$C(Object(tt),!0).forEach(function(rt){_defineProperty$F(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$C(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$g(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$g(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$E(rt.key),rt)}}function _createClass$g(_e,et,tt){return et&&_defineProperties$g(_e.prototype,et),tt&&_defineProperties$g(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$b(_e,et,tt){return et=_getPrototypeOf$d(et),_possibleConstructorReturn$d(_e,_isNativeReflectConstruct$c()?Reflect.construct(et,tt||[],_getPrototypeOf$d(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$d(_e,et){if(et&&(_typeof$G(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$d(_e)}function _isNativeReflectConstruct$c(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$c=function(){return!!_e})()}function _getPrototypeOf$d(_e){return _getPrototypeOf$d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$d(_e)}function _assertThisInitialized$d(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$d(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$d(_e,et)}function _setPrototypeOf$d(_e,et){return _setPrototypeOf$d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$d(_e,et)}function _defineProperty$F(_e,et,tt){return et=_toPropertyKey$E(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$E(_e){var et=_toPrimitive$E(_e,"string");return _typeof$G(et)=="symbol"?et:String(et)}function _toPrimitive$E(_e,et){if(_typeof$G(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$G(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _objectWithoutProperties$h(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$h(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$h(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function defaultUniqBy$1(_e){return _e.value}function renderContent$1(_e,et){if(React$1.isValidElement(_e))return React$1.cloneElement(_e,et);if(typeof _e=="function")return React$1.createElement(_e,et);et.ref;var tt=_objectWithoutProperties$h(et,_excluded$g);return React$1.createElement(DefaultLegendContent,tt)}var EPS$1=1,Legend=function(_e){_inherits$d(et,_e);function et(){var tt;_classCallCheck$g(this,et);for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return tt=_callSuper$b(this,et,[].concat(it)),_defineProperty$F(_assertThisInitialized$d(tt),"lastBoundingBox",{width:-1,height:-1}),tt}return _createClass$g(et,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var rt=this.wrapperNode.getBoundingClientRect();return rt.height=this.wrapperNode.offsetHeight,rt.width=this.wrapperNode.offsetWidth,rt}return null}},{key:"updateBBox",value:function(){var rt=this.props.onBBoxUpdate,it=this.getBBox();it?(Math.abs(it.width-this.lastBoundingBox.width)>EPS$1||Math.abs(it.height-this.lastBoundingBox.height)>EPS$1)&&(this.lastBoundingBox.width=it.width,this.lastBoundingBox.height=it.height,rt&&rt(it)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,rt&&rt(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?_objectSpread$B({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(rt){var it=this.props,st=it.layout,ut=it.align,ht=it.verticalAlign,at=it.margin,gt=it.chartWidth,bt=it.chartHeight,wt,St;if(!rt||(rt.left===void 0||rt.left===null)&&(rt.right===void 0||rt.right===null))if(ut==="center"&&st==="vertical"){var kt=this.getBBoxSnapshot();wt={left:((gt||0)-kt.width)/2}}else wt=ut==="right"?{right:at&&at.right||0}:{left:at&&at.left||0};if(!rt||(rt.top===void 0||rt.top===null)&&(rt.bottom===void 0||rt.bottom===null))if(ht==="middle"){var Rt=this.getBBoxSnapshot();St={top:((bt||0)-Rt.height)/2}}else St=ht==="bottom"?{bottom:at&&at.bottom||0}:{top:at&&at.top||0};return _objectSpread$B(_objectSpread$B({},wt),St)}},{key:"render",value:function(){var rt=this,it=this.props,st=it.content,ut=it.width,ht=it.height,at=it.wrapperStyle,gt=it.payloadUniqBy,bt=it.payload,wt=_objectSpread$B(_objectSpread$B({position:"absolute",width:ut||"auto",height:ht||"auto"},this.getDefaultPosition(at)),at);return React$1.createElement("div",{className:"recharts-legend-wrapper",style:wt,ref:function(kt){rt.wrapperNode=kt}},renderContent$1(st,_objectSpread$B(_objectSpread$B({},this.props),{},{payload:getUniqPayload(bt,gt,defaultUniqBy$1)})))}}],[{key:"getWithHeight",value:function(rt,it){var st=rt.props.layout;return st==="vertical"&&isNumber$2(rt.props.height)?{height:rt.props.height}:st==="horizontal"?{width:rt.props.width||it}:null}}]),et}(reactExports.PureComponent);_defineProperty$F(Legend,"displayName","Legend");_defineProperty$F(Legend,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var Symbol$1=_Symbol,isArguments=isArguments_1,isArray$5=isArray_1,spreadableSymbol=Symbol$1?Symbol$1.isConcatSpreadable:void 0;function isFlattenable$1(_e){return isArray$5(_e)||isArguments(_e)||!!(spreadableSymbol&&_e&&_e[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$2(_e,et,tt,rt,it){var st=-1,ut=_e.length;for(tt||(tt=isFlattenable),it||(it=[]);++st<ut;){var ht=_e[st];et>0&&tt(ht)?et>1?baseFlatten$2(ht,et-1,tt,rt,it):arrayPush(it,ht):rt||(it[it.length]=ht)}return it}var _baseFlatten=baseFlatten$2;function createBaseFor$1(_e){return function(et,tt,rt){for(var it=-1,st=Object(et),ut=rt(et),ht=ut.length;ht--;){var at=ut[_e?ht:++it];if(tt(st[at],at,st)===!1)break}return et}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys$2=keys_1;function baseForOwn$2(_e,et){return _e&&baseFor(_e,et,keys$2)}var _baseForOwn=baseForOwn$2,isArrayLike$3=isArrayLike_1;function createBaseEach$1(_e,et){return function(tt,rt){if(tt==null)return tt;if(!isArrayLike$3(tt))return _e(tt,rt);for(var it=tt.length,st=et?it:-1,ut=Object(tt);(et?st--:++st<it)&&rt(ut[st],st,ut)!==!1;);return tt}}var _createBaseEach=createBaseEach$1,baseForOwn$1=_baseForOwn,createBaseEach=_createBaseEach,baseEach$3=createBaseEach(baseForOwn$1),_baseEach=baseEach$3,baseEach$2=_baseEach,isArrayLike$2=isArrayLike_1;function baseMap$2(_e,et){var tt=-1,rt=isArrayLike$2(_e)?Array(_e.length):[];return baseEach$2(_e,function(it,st,ut){rt[++tt]=et(it,st,ut)}),rt}var _baseMap=baseMap$2;function baseSortBy$1(_e,et){var tt=_e.length;for(_e.sort(et);tt--;)_e[tt]=_e[tt].value;return _e}var _baseSortBy=baseSortBy$1,isSymbol$2=isSymbol_1;function compareAscending$1(_e,et){if(_e!==et){var tt=_e!==void 0,rt=_e===null,it=_e===_e,st=isSymbol$2(_e),ut=et!==void 0,ht=et===null,at=et===et,gt=isSymbol$2(et);if(!ht&&!gt&&!st&&_e>et||st&&ut&&at&&!ht&&!gt||rt&&ut&&at||!tt&&at||!it)return 1;if(!rt&&!st&&!gt&&_e<et||gt&&tt&&it&&!rt&&!st||ht&&tt&&it||!ut&&it||!at)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(_e,et,tt){for(var rt=-1,it=_e.criteria,st=et.criteria,ut=it.length,ht=tt.length;++rt<ut;){var at=compareAscending(it[rt],st[rt]);if(at){if(rt>=ht)return at;var gt=tt[rt];return at*(gt=="desc"?-1:1)}}return _e.index-et.index}var _compareMultiple=compareMultiple$1,arrayMap$1=_arrayMap,baseGet$1=_baseGet,baseIteratee$8=_baseIteratee,baseMap$1=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity$9=identity_1,isArray$4=isArray_1;function baseOrderBy$1(_e,et,tt){et.length?et=arrayMap$1(et,function(st){return isArray$4(st)?function(ut){return baseGet$1(ut,st.length===1?st[0]:st)}:st}):et=[identity$9];var rt=-1;et=arrayMap$1(et,baseUnary(baseIteratee$8));var it=baseMap$1(_e,function(st,ut,ht){var at=arrayMap$1(et,function(gt){return gt(st)});return{criteria:at,index:++rt,value:st}});return baseSortBy(it,function(st,ut){return compareMultiple(st,ut,tt)})}var _baseOrderBy=baseOrderBy$1;function apply$1(_e,et,tt){switch(tt.length){case 0:return _e.call(et);case 1:return _e.call(et,tt[0]);case 2:return _e.call(et,tt[0],tt[1]);case 3:return _e.call(et,tt[0],tt[1],tt[2])}return _e.apply(et,tt)}var _apply=apply$1,apply=_apply,nativeMax$3=Math.max;function overRest$1(_e,et,tt){return et=nativeMax$3(et===void 0?_e.length-1:et,0),function(){for(var rt=arguments,it=-1,st=nativeMax$3(rt.length-et,0),ut=Array(st);++it<st;)ut[it]=rt[et+it];it=-1;for(var ht=Array(et+1);++it<et;)ht[it]=rt[it];return ht[et]=tt(ut),apply(_e,this,ht)}}var _overRest=overRest$1;function constant$2(_e){return function(){return _e}}var constant_1=constant$2,getNative=_getNative,defineProperty$2=function(){try{var _e=getNative(Object,"defineProperty");return _e({},"",{}),_e}catch{}}(),_defineProperty$E=defineProperty$2,constant$1=constant_1,defineProperty$1=_defineProperty$E,identity$8=identity_1,baseSetToString$1=defineProperty$1?function(_e,et){return defineProperty$1(_e,"toString",{configurable:!0,enumerable:!1,value:constant$1(et),writable:!0})}:identity$8,_baseSetToString=baseSetToString$1,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut$1(_e){var et=0,tt=0;return function(){var rt=nativeNow(),it=HOT_SPAN-(rt-tt);if(tt=rt,it>0){if(++et>=HOT_COUNT)return arguments[0]}else et=0;return _e.apply(void 0,arguments)}}var _shortOut=shortOut$1,baseSetToString=_baseSetToString,shortOut=_shortOut,setToString$1=shortOut(baseSetToString),_setToString=setToString$1,identity$7=identity_1,overRest=_overRest,setToString=_setToString;function baseRest$1(_e,et){return setToString(overRest(_e,et,identity$7),_e+"")}var _baseRest=baseRest$1,eq=eq_1,isArrayLike$1=isArrayLike_1,isIndex=_isIndex,isObject$7=isObject_1;function isIterateeCall$4(_e,et,tt){if(!isObject$7(tt))return!1;var rt=typeof et;return(rt=="number"?isArrayLike$1(tt)&&isIndex(et,tt.length):rt=="string"&&et in tt)?eq(tt[et],_e):!1}var _isIterateeCall=isIterateeCall$4,baseFlatten$1=_baseFlatten,baseOrderBy=_baseOrderBy,baseRest=_baseRest,isIterateeCall$3=_isIterateeCall,sortBy=baseRest(function(_e,et){if(_e==null)return[];var tt=et.length;return tt>1&&isIterateeCall$3(_e,et[0],et[1])?et=[]:tt>2&&isIterateeCall$3(et[0],et[1],et[2])&&(et=[et[0]]),baseOrderBy(_e,baseFlatten$1(et,1),[])}),sortBy_1=sortBy;const sortBy$1=getDefaultExportFromCjs(sortBy_1);function _typeof$F(_e){"@babel/helpers - typeof";return _typeof$F=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$F(_e)}function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$s.apply(this,arguments)}function _slicedToArray$d(_e,et){return _arrayWithHoles$e(_e)||_iterableToArrayLimit$d(_e,et)||_unsupportedIterableToArray$m(_e,et)||_nonIterableRest$e()}function _nonIterableRest$e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$m(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$m(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$m(_e,et)}}function _arrayLikeToArray$m(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$d(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$e(_e){if(Array.isArray(_e))return _e}function ownKeys$B(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$A(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$B(Object(tt),!0).forEach(function(rt){_defineProperty$D(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$B(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$D(_e,et,tt){return et=_toPropertyKey$D(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$D(_e){var et=_toPrimitive$D(_e,"string");return _typeof$F(et)=="symbol"?et:String(et)}function _toPrimitive$D(_e,et){if(_typeof$F(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$F(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function defaultFormatter(_e){return Array.isArray(_e)&&isNumOrStr(_e[0])&&isNumOrStr(_e[1])?_e.join(" ~ "):_e}var DefaultTooltipContent=function _e(et){var tt=et.separator,rt=tt===void 0?" : ":tt,it=et.contentStyle,st=it===void 0?{}:it,ut=et.itemStyle,ht=ut===void 0?{}:ut,at=et.labelStyle,gt=at===void 0?{}:at,bt=et.payload,wt=et.formatter,St=et.itemSorter,kt=et.wrapperClassName,Rt=et.labelClassName,It=et.label,Dt=et.labelFormatter,Mt=et.accessibilityLayer,$t=Mt===void 0?!1:Mt,jt=function(){if(bt&&bt.length){var yr={padding:0,margin:0},Or=(St?sortBy$1(bt,St):bt).map(function(Nr,Lr){if(Nr.type==="none")return null;var ar=_objectSpread$A({display:"block",paddingTop:4,paddingBottom:4,color:Nr.color||"#000"},ht),hr=Nr.formatter||wt||defaultFormatter,Qt=Nr.value,ir=Nr.name,Mr=Qt,Cr=ir;if(hr&&Mr!=null&&Cr!=null){var rn=hr(Qt,ir,Nr,Lr,bt);if(Array.isArray(rn)){var fn=_slicedToArray$d(rn,2);Mr=fn[0],Cr=fn[1]}else Mr=rn}return React$1.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Lr),style:ar},isNumOrStr(Cr)?React$1.createElement("span",{className:"recharts-tooltip-item-name"},Cr):null,isNumOrStr(Cr)?React$1.createElement("span",{className:"recharts-tooltip-item-separator"},rt):null,React$1.createElement("span",{className:"recharts-tooltip-item-value"},Mr),React$1.createElement("span",{className:"recharts-tooltip-item-unit"},Nr.unit||""))});return React$1.createElement("ul",{className:"recharts-tooltip-item-list",style:yr},Or)}return null},Nt=_objectSpread$A({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},st),Ut=_objectSpread$A({margin:0},gt),Ht=!isNil$1(It),Kt=Ht?It:"",tr=clsx$1("recharts-default-tooltip",kt),mr=clsx$1("recharts-tooltip-label",Rt);Ht&&Dt&&bt!==void 0&&bt!==null&&(Kt=Dt(It,bt));var vr=$t?{role:"status","aria-live":"assertive"}:{};return React$1.createElement("div",_extends$s({className:tr,style:Nt},vr),React$1.createElement("p",{className:mr,style:Ut},React$1.isValidElement(Kt)?Kt:"".concat(Kt)),jt())};function _typeof$E(_e){"@babel/helpers - typeof";return _typeof$E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$E(_e)}function _defineProperty$C(_e,et,tt){return et=_toPropertyKey$C(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$C(_e){var et=_toPrimitive$C(_e,"string");return _typeof$E(et)=="symbol"?et:String(et)}function _toPrimitive$C(_e,et){if(_typeof$E(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$E(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var CSS_CLASS_PREFIX="recharts-tooltip-wrapper",TOOLTIP_HIDDEN={visibility:"hidden"};function getTooltipCSSClassName(_e){var et=_e.coordinate,tt=_e.translateX,rt=_e.translateY;return clsx$1(CSS_CLASS_PREFIX,_defineProperty$C(_defineProperty$C(_defineProperty$C(_defineProperty$C({},"".concat(CSS_CLASS_PREFIX,"-right"),isNumber$2(tt)&&et&&isNumber$2(et.x)&&tt>=et.x),"".concat(CSS_CLASS_PREFIX,"-left"),isNumber$2(tt)&&et&&isNumber$2(et.x)&&tt<et.x),"".concat(CSS_CLASS_PREFIX,"-bottom"),isNumber$2(rt)&&et&&isNumber$2(et.y)&&rt>=et.y),"".concat(CSS_CLASS_PREFIX,"-top"),isNumber$2(rt)&&et&&isNumber$2(et.y)&&rt<et.y))}function getTooltipTranslateXY(_e){var et=_e.allowEscapeViewBox,tt=_e.coordinate,rt=_e.key,it=_e.offsetTopLeft,st=_e.position,ut=_e.reverseDirection,ht=_e.tooltipDimension,at=_e.viewBox,gt=_e.viewBoxDimension;if(st&&isNumber$2(st[rt]))return st[rt];var bt=tt[rt]-ht-it,wt=tt[rt]+it;if(et[rt])return ut[rt]?bt:wt;if(ut[rt]){var St=bt,kt=at[rt];return St<kt?Math.max(wt,at[rt]):Math.max(bt,at[rt])}var Rt=wt+ht,It=at[rt]+gt;return Rt>It?Math.max(bt,at[rt]):Math.max(wt,at[rt])}function getTransformStyle(_e){var et=_e.translateX,tt=_e.translateY,rt=_e.useTranslate3d;return{transform:rt?"translate3d(".concat(et,"px, ").concat(tt,"px, 0)"):"translate(".concat(et,"px, ").concat(tt,"px)")}}function getTooltipTranslate(_e){var et=_e.allowEscapeViewBox,tt=_e.coordinate,rt=_e.offsetTopLeft,it=_e.position,st=_e.reverseDirection,ut=_e.tooltipBox,ht=_e.useTranslate3d,at=_e.viewBox,gt,bt,wt;return ut.height>0&&ut.width>0&&tt?(bt=getTooltipTranslateXY({allowEscapeViewBox:et,coordinate:tt,key:"x",offsetTopLeft:rt,position:it,reverseDirection:st,tooltipDimension:ut.width,viewBox:at,viewBoxDimension:at.width}),wt=getTooltipTranslateXY({allowEscapeViewBox:et,coordinate:tt,key:"y",offsetTopLeft:rt,position:it,reverseDirection:st,tooltipDimension:ut.height,viewBox:at,viewBoxDimension:at.height}),gt=getTransformStyle({translateX:bt,translateY:wt,useTranslate3d:ht})):gt=TOOLTIP_HIDDEN,{cssProperties:gt,cssClasses:getTooltipCSSClassName({translateX:bt,translateY:wt,coordinate:tt})}}function _typeof$D(_e){"@babel/helpers - typeof";return _typeof$D=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$D(_e)}function ownKeys$A(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$z(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$A(Object(tt),!0).forEach(function(rt){_defineProperty$B(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$A(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$f(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$f(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$B(rt.key),rt)}}function _createClass$f(_e,et,tt){return et&&_defineProperties$f(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$a(_e,et,tt){return et=_getPrototypeOf$c(et),_possibleConstructorReturn$c(_e,_isNativeReflectConstruct$b()?Reflect.construct(et,tt||[],_getPrototypeOf$c(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$c(_e,et){if(et&&(_typeof$D(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$c(_e)}function _isNativeReflectConstruct$b(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$b=function(){return!!_e})()}function _getPrototypeOf$c(_e){return _getPrototypeOf$c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$c(_e)}function _assertThisInitialized$c(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$c(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$c(_e,et)}function _setPrototypeOf$c(_e,et){return _setPrototypeOf$c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$c(_e,et)}function _defineProperty$B(_e,et,tt){return et=_toPropertyKey$B(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$B(_e){var et=_toPrimitive$B(_e,"string");return _typeof$D(et)=="symbol"?et:String(et)}function _toPrimitive$B(_e,et){if(_typeof$D(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$D(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var EPSILON=1,TooltipBoundingBox=function(_e){_inherits$c(et,_e);function et(){var tt;_classCallCheck$f(this,et);for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return tt=_callSuper$a(this,et,[].concat(it)),_defineProperty$B(_assertThisInitialized$c(tt),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),_defineProperty$B(_assertThisInitialized$c(tt),"handleKeyDown",function(ut){if(ut.key==="Escape"){var ht,at,gt,bt;tt.setState({dismissed:!0,dismissedAtCoordinate:{x:(ht=(at=tt.props.coordinate)===null||at===void 0?void 0:at.x)!==null&&ht!==void 0?ht:0,y:(gt=(bt=tt.props.coordinate)===null||bt===void 0?void 0:bt.y)!==null&&gt!==void 0?gt:0}})}}),tt}return _createClass$f(et,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var rt=this.wrapperNode.getBoundingClientRect();(Math.abs(rt.width-this.state.lastBoundingBox.width)>EPSILON||Math.abs(rt.height-this.state.lastBoundingBox.height)>EPSILON)&&this.setState({lastBoundingBox:{width:rt.width,height:rt.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var rt,it;this.props.active&&this.updateBBox(),this.state.dismissed&&(((rt=this.props.coordinate)===null||rt===void 0?void 0:rt.x)!==this.state.dismissedAtCoordinate.x||((it=this.props.coordinate)===null||it===void 0?void 0:it.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var rt=this,it=this.props,st=it.active,ut=it.allowEscapeViewBox,ht=it.animationDuration,at=it.animationEasing,gt=it.children,bt=it.coordinate,wt=it.hasPayload,St=it.isAnimationActive,kt=it.offset,Rt=it.position,It=it.reverseDirection,Dt=it.useTranslate3d,Mt=it.viewBox,$t=it.wrapperStyle,jt=getTooltipTranslate({allowEscapeViewBox:ut,coordinate:bt,offsetTopLeft:kt,position:Rt,reverseDirection:It,tooltipBox:this.state.lastBoundingBox,useTranslate3d:Dt,viewBox:Mt}),Nt=jt.cssClasses,Ut=jt.cssProperties,Ht=_objectSpread$z(_objectSpread$z({transition:St&&st?"transform ".concat(ht,"ms ").concat(at):void 0},Ut),{},{pointerEvents:"none",visibility:!this.state.dismissed&&st&&wt?"visible":"hidden",position:"absolute",top:0,left:0},$t);return React$1.createElement("div",{tabIndex:-1,className:Nt,style:Ht,ref:function(tr){rt.wrapperNode=tr}},gt)}}]),et}(reactExports.PureComponent),parseIsSsrByDefault=function _e(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Global={isSsr:parseIsSsrByDefault(),get:function _e(et){return Global[et]},set:function _e(et,tt){if(typeof et=="string")Global[et]=tt;else{var rt=Object.keys(et);rt&&rt.length&&rt.forEach(function(it){Global[it]=et[it]})}}};function _typeof$C(_e){"@babel/helpers - typeof";return _typeof$C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$C(_e)}function ownKeys$z(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$y(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$z(Object(tt),!0).forEach(function(rt){_defineProperty$A(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$z(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$e(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$e(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$A(rt.key),rt)}}function _createClass$e(_e,et,tt){return et&&_defineProperties$e(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$9(_e,et,tt){return et=_getPrototypeOf$b(et),_possibleConstructorReturn$b(_e,_isNativeReflectConstruct$a()?Reflect.construct(et,tt||[],_getPrototypeOf$b(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$b(_e,et){if(et&&(_typeof$C(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$b(_e)}function _assertThisInitialized$b(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$a(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$a=function(){return!!_e})()}function _getPrototypeOf$b(_e){return _getPrototypeOf$b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$b(_e)}function _inherits$b(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$b(_e,et)}function _setPrototypeOf$b(_e,et){return _setPrototypeOf$b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$b(_e,et)}function _defineProperty$A(_e,et,tt){return et=_toPropertyKey$A(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$A(_e){var et=_toPrimitive$A(_e,"string");return _typeof$C(et)=="symbol"?et:String(et)}function _toPrimitive$A(_e,et){if(_typeof$C(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$C(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function defaultUniqBy(_e){return _e.dataKey}function renderContent(_e,et){return React$1.isValidElement(_e)?React$1.cloneElement(_e,et):typeof _e=="function"?React$1.createElement(_e,et):React$1.createElement(DefaultTooltipContent,et)}var Tooltip=function(_e){_inherits$b(et,_e);function et(){return _classCallCheck$e(this,et),_callSuper$9(this,et,arguments)}return _createClass$e(et,[{key:"render",value:function(){var rt=this,it=this.props,st=it.active,ut=it.allowEscapeViewBox,ht=it.animationDuration,at=it.animationEasing,gt=it.content,bt=it.coordinate,wt=it.filterNull,St=it.isAnimationActive,kt=it.offset,Rt=it.payload,It=it.payloadUniqBy,Dt=it.position,Mt=it.reverseDirection,$t=it.useTranslate3d,jt=it.viewBox,Nt=it.wrapperStyle,Ut=Rt??[];wt&&Ut.length&&(Ut=getUniqPayload(Rt.filter(function(Kt){return Kt.value!=null&&(Kt.hide!==!0||rt.props.includeHidden)}),It,defaultUniqBy));var Ht=Ut.length>0;return React$1.createElement(TooltipBoundingBox,{allowEscapeViewBox:ut,animationDuration:ht,animationEasing:at,isAnimationActive:St,active:st,coordinate:bt,hasPayload:Ht,offset:kt,position:Dt,reverseDirection:Mt,useTranslate3d:$t,viewBox:jt,wrapperStyle:Nt},renderContent(gt,_objectSpread$y(_objectSpread$y({},this.props),{},{payload:Ut})))}}]),et}(reactExports.PureComponent);_defineProperty$A(Tooltip,"displayName","Tooltip");_defineProperty$A(Tooltip,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Global.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var root=_root,now$1=function(){return root.Date.now()},now_1=now$1,reWhitespace=/\s/;function trimmedEndIndex$1(_e){for(var et=_e.length;et--&&reWhitespace.test(_e.charAt(et)););return et}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(_e){return _e&&_e.slice(0,trimmedEndIndex(_e)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$6=isObject_1,isSymbol$1=isSymbol_1,NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$2(_e){if(typeof _e=="number")return _e;if(isSymbol$1(_e))return NAN;if(isObject$6(_e)){var et=typeof _e.valueOf=="function"?_e.valueOf():_e;_e=isObject$6(et)?et+"":et}if(typeof _e!="string")return _e===0?_e:+_e;_e=baseTrim(_e);var tt=reIsBinary.test(_e);return tt||reIsOctal.test(_e)?freeParseInt(_e.slice(2),tt?2:8):reIsBadHex.test(_e)?NAN:+_e}var toNumber_1=toNumber$2,isObject$5=isObject_1,now=now_1,toNumber$1=toNumber_1,FUNC_ERROR_TEXT$1="Expected a function",nativeMax$2=Math.max,nativeMin=Math.min;function debounce$1(_e,et,tt){var rt,it,st,ut,ht,at,gt=0,bt=!1,wt=!1,St=!0;if(typeof _e!="function")throw new TypeError(FUNC_ERROR_TEXT$1);et=toNumber$1(et)||0,isObject$5(tt)&&(bt=!!tt.leading,wt="maxWait"in tt,st=wt?nativeMax$2(toNumber$1(tt.maxWait)||0,et):st,St="trailing"in tt?!!tt.trailing:St);function kt(Ht){var Kt=rt,tr=it;return rt=it=void 0,gt=Ht,ut=_e.apply(tr,Kt),ut}function Rt(Ht){return gt=Ht,ht=setTimeout(Mt,et),bt?kt(Ht):ut}function It(Ht){var Kt=Ht-at,tr=Ht-gt,mr=et-Kt;return wt?nativeMin(mr,st-tr):mr}function Dt(Ht){var Kt=Ht-at,tr=Ht-gt;return at===void 0||Kt>=et||Kt<0||wt&&tr>=st}function Mt(){var Ht=now();if(Dt(Ht))return $t(Ht);ht=setTimeout(Mt,It(Ht))}function $t(Ht){return ht=void 0,St&&rt?kt(Ht):(rt=it=void 0,ut)}function jt(){ht!==void 0&&clearTimeout(ht),gt=0,rt=at=it=ht=void 0}function Nt(){return ht===void 0?ut:$t(now())}function Ut(){var Ht=now(),Kt=Dt(Ht);if(rt=arguments,it=this,at=Ht,Kt){if(ht===void 0)return Rt(at);if(wt)return clearTimeout(ht),ht=setTimeout(Mt,et),kt(at)}return ht===void 0&&(ht=setTimeout(Mt,et)),ut}return Ut.cancel=jt,Ut.flush=Nt,Ut}var debounce_1=debounce$1,debounce=debounce_1,isObject$4=isObject_1,FUNC_ERROR_TEXT="Expected a function";function throttle(_e,et,tt){var rt=!0,it=!0;if(typeof _e!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$4(tt)&&(rt="leading"in tt?!!tt.leading:rt,it="trailing"in tt?!!tt.trailing:it),debounce(_e,et,{leading:rt,maxWait:et,trailing:it})}var throttle_1=throttle;const throttle$1=getDefaultExportFromCjs(throttle_1);function _typeof$B(_e){"@babel/helpers - typeof";return _typeof$B=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$B(_e)}function ownKeys$y(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$x(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$y(Object(tt),!0).forEach(function(rt){_defineProperty$z(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$y(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$z(_e,et,tt){return et=_toPropertyKey$z(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$z(_e){var et=_toPrimitive$z(_e,"string");return _typeof$B(et)=="symbol"?et:String(et)}function _toPrimitive$z(_e,et){if(_typeof$B(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$B(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _slicedToArray$c(_e,et){return _arrayWithHoles$d(_e)||_iterableToArrayLimit$c(_e,et)||_unsupportedIterableToArray$l(_e,et)||_nonIterableRest$d()}function _nonIterableRest$d(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$l(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$l(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$l(_e,et)}}function _arrayLikeToArray$l(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$c(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$d(_e){if(Array.isArray(_e))return _e}var ResponsiveContainer=reactExports.forwardRef(function(_e,et){var tt=_e.aspect,rt=_e.initialDimension,it=rt===void 0?{width:-1,height:-1}:rt,st=_e.width,ut=st===void 0?"100%":st,ht=_e.height,at=ht===void 0?"100%":ht,gt=_e.minWidth,bt=gt===void 0?0:gt,wt=_e.minHeight,St=_e.maxHeight,kt=_e.children,Rt=_e.debounce,It=Rt===void 0?0:Rt,Dt=_e.id,Mt=_e.className,$t=_e.onResize,jt=_e.style,Nt=jt===void 0?{}:jt,Ut=reactExports.useRef(null),Ht=reactExports.useRef();Ht.current=$t,reactExports.useImperativeHandle(et,function(){return Object.defineProperty(Ut.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),Ut.current},configurable:!0})});var Kt=reactExports.useState({containerWidth:it.width,containerHeight:it.height}),tr=_slicedToArray$c(Kt,2),mr=tr[0],vr=tr[1],wr=reactExports.useCallback(function(Or,Nr){vr(function(Lr){var ar=Math.round(Or),hr=Math.round(Nr);return Lr.containerWidth===ar&&Lr.containerHeight===hr?Lr:{containerWidth:ar,containerHeight:hr}})},[]);reactExports.useEffect(function(){var Or=function(ir){var Mr,Cr=ir[0].contentRect,rn=Cr.width,fn=Cr.height;wr(rn,fn),(Mr=Ht.current)===null||Mr===void 0||Mr.call(Ht,rn,fn)};It>0&&(Or=throttle$1(Or,It,{trailing:!0,leading:!1}));var Nr=new ResizeObserver(Or),Lr=Ut.current.getBoundingClientRect(),ar=Lr.width,hr=Lr.height;return wr(ar,hr),Nr.observe(Ut.current),function(){Nr.disconnect()}},[wr,It]);var yr=reactExports.useMemo(function(){var Or=mr.containerWidth,Nr=mr.containerHeight;if(Or<0||Nr<0)return null;warn$1(isPercent$1(ut)||isPercent$1(at),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,ut,at),warn$1(!tt||tt>0,"The aspect(%s) must be greater than zero.",tt);var Lr=isPercent$1(ut)?Or:ut,ar=isPercent$1(at)?Nr:at;tt&&tt>0&&(Lr?ar=Lr/tt:ar&&(Lr=ar*tt),St&&ar>St&&(ar=St)),warn$1(Lr>0||ar>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Lr,ar,ut,at,bt,wt,tt);var hr=!Array.isArray(kt)&&reactIsExports.isElement(kt)&&getDisplayName(kt.type).endsWith("Chart");return React$1.Children.map(kt,function(Qt){return reactIsExports.isElement(Qt)?reactExports.cloneElement(Qt,_objectSpread$x({width:Lr,height:ar},hr?{style:_objectSpread$x({height:"100%",width:"100%",maxHeight:ar,maxWidth:Lr},Qt.props.style)}:{})):Qt})},[tt,kt,at,St,wt,bt,mr,ut]);return React$1.createElement("div",{id:Dt?"".concat(Dt):void 0,className:clsx$1("recharts-responsive-container",Mt),style:_objectSpread$x(_objectSpread$x({},Nt),{},{width:ut,height:at,minWidth:bt,minHeight:wt,maxHeight:St}),ref:Ut},yr)}),Cell=function _e(et){return null};Cell.displayName="Cell";function _typeof$A(_e){"@babel/helpers - typeof";return _typeof$A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$A(_e)}function ownKeys$x(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$w(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$x(Object(tt),!0).forEach(function(rt){_defineProperty$y(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$x(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$y(_e,et,tt){return et=_toPropertyKey$y(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$y(_e){var et=_toPrimitive$y(_e,"string");return _typeof$A(et)=="symbol"?et:String(et)}function _toPrimitive$y(_e,et){if(_typeof$A(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$A(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var stringCache={widthCache:{},cacheCount:0},MAX_CACHE_NUM=2e3,SPAN_STYLE={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},MEASUREMENT_SPAN_ID="recharts_measurement_span";function removeInvalidKeys(_e){var et=_objectSpread$w({},_e);return Object.keys(et).forEach(function(tt){et[tt]||delete et[tt]}),et}var getStringSize=function _e(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(et==null||Global.isSsr)return{width:0,height:0};var rt=removeInvalidKeys(tt),it=JSON.stringify({text:et,copyStyle:rt});if(stringCache.widthCache[it])return stringCache.widthCache[it];try{var st=document.getElementById(MEASUREMENT_SPAN_ID);st||(st=document.createElement("span"),st.setAttribute("id",MEASUREMENT_SPAN_ID),st.setAttribute("aria-hidden","true"),document.body.appendChild(st));var ut=_objectSpread$w(_objectSpread$w({},SPAN_STYLE),rt);Object.assign(st.style,ut),st.textContent="".concat(et);var ht=st.getBoundingClientRect(),at={width:ht.width,height:ht.height};return stringCache.widthCache[it]=at,++stringCache.cacheCount>MAX_CACHE_NUM&&(stringCache.cacheCount=0,stringCache.widthCache={}),at}catch{return{width:0,height:0}}},getOffset$1=function _e(et){return{top:et.top+window.scrollY-document.documentElement.clientTop,left:et.left+window.scrollX-document.documentElement.clientLeft}};function _typeof$z(_e){"@babel/helpers - typeof";return _typeof$z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$z(_e)}function _slicedToArray$b(_e,et){return _arrayWithHoles$c(_e)||_iterableToArrayLimit$b(_e,et)||_unsupportedIterableToArray$k(_e,et)||_nonIterableRest$c()}function _nonIterableRest$c(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$k(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$k(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$k(_e,et)}}function _arrayLikeToArray$k(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$b(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et===0){if(Object(tt)!==tt)return;at=!1}else for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$c(_e){if(Array.isArray(_e))return _e}function _classCallCheck$d(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$d(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$x(rt.key),rt)}}function _createClass$d(_e,et,tt){return et&&_defineProperties$d(_e.prototype,et),tt&&_defineProperties$d(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _toPropertyKey$x(_e){var et=_toPrimitive$x(_e,"string");return _typeof$z(et)=="symbol"?et:String(et)}function _toPrimitive$x(_e,et){if(_typeof$z(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et);if(_typeof$z(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_e)}var MULTIPLY_OR_DIVIDE_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,ADD_OR_SUBTRACT_REGEX=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,CSS_LENGTH_UNIT_REGEX=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,NUM_SPLIT_REGEX=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,CONVERSION_RATES={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},FIXED_CSS_LENGTH_UNITS=Object.keys(CONVERSION_RATES),STR_NAN="NaN";function convertToPx(_e,et){return _e*CONVERSION_RATES[et]}var DecimalCSS=function(){function _e(et,tt){_classCallCheck$d(this,_e),this.num=et,this.unit=tt,this.num=et,this.unit=tt,Number.isNaN(et)&&(this.unit=""),tt!==""&&!CSS_LENGTH_UNIT_REGEX.test(tt)&&(this.num=NaN,this.unit=""),FIXED_CSS_LENGTH_UNITS.includes(tt)&&(this.num=convertToPx(et,tt),this.unit="px")}return _createClass$d(_e,[{key:"add",value:function(tt){return this.unit!==tt.unit?new _e(NaN,""):new _e(this.num+tt.num,this.unit)}},{key:"subtract",value:function(tt){return this.unit!==tt.unit?new _e(NaN,""):new _e(this.num-tt.num,this.unit)}},{key:"multiply",value:function(tt){return this.unit!==""&&tt.unit!==""&&this.unit!==tt.unit?new _e(NaN,""):new _e(this.num*tt.num,this.unit||tt.unit)}},{key:"divide",value:function(tt){return this.unit!==""&&tt.unit!==""&&this.unit!==tt.unit?new _e(NaN,""):new _e(this.num/tt.num,this.unit||tt.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(tt){var rt,it=(rt=NUM_SPLIT_REGEX.exec(tt))!==null&&rt!==void 0?rt:[],st=_slicedToArray$b(it,3),ut=st[1],ht=st[2];return new _e(parseFloat(ut),ht??"")}}]),_e}();function calculateArithmetic(_e){if(_e.includes(STR_NAN))return STR_NAN;for(var et=_e;et.includes("*")||et.includes("/");){var tt,rt=(tt=MULTIPLY_OR_DIVIDE_REGEX.exec(et))!==null&&tt!==void 0?tt:[],it=_slicedToArray$b(rt,4),st=it[1],ut=it[2],ht=it[3],at=DecimalCSS.parse(st??""),gt=DecimalCSS.parse(ht??""),bt=ut==="*"?at.multiply(gt):at.divide(gt);if(bt.isNaN())return STR_NAN;et=et.replace(MULTIPLY_OR_DIVIDE_REGEX,bt.toString())}for(;et.includes("+")||/.-\d+(?:\.\d+)?/.test(et);){var wt,St=(wt=ADD_OR_SUBTRACT_REGEX.exec(et))!==null&&wt!==void 0?wt:[],kt=_slicedToArray$b(St,4),Rt=kt[1],It=kt[2],Dt=kt[3],Mt=DecimalCSS.parse(Rt??""),$t=DecimalCSS.parse(Dt??""),jt=It==="+"?Mt.add($t):Mt.subtract($t);if(jt.isNaN())return STR_NAN;et=et.replace(ADD_OR_SUBTRACT_REGEX,jt.toString())}return et}var PARENTHESES_REGEX=/\(([^()]*)\)/;function calculateParentheses(_e){for(var et=_e;et.includes("(");){var tt=PARENTHESES_REGEX.exec(et),rt=_slicedToArray$b(tt,2),it=rt[1];et=et.replace(PARENTHESES_REGEX,calculateArithmetic(it))}return et}function evaluateExpression(_e){var et=_e.replace(/\s+/g,"");return et=calculateParentheses(et),et=calculateArithmetic(et),et}function safeEvaluateExpression(_e){try{return evaluateExpression(_e)}catch{return STR_NAN}}function reduceCSSCalc(_e){var et=safeEvaluateExpression(_e.slice(5,-1));return et===STR_NAN?"":et}var _excluded$f=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],_excluded2$5=["dx","dy","angle","className","breakAll"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$r.apply(this,arguments)}function _objectWithoutProperties$g(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$g(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$g(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _slicedToArray$a(_e,et){return _arrayWithHoles$b(_e)||_iterableToArrayLimit$a(_e,et)||_unsupportedIterableToArray$j(_e,et)||_nonIterableRest$b()}function _nonIterableRest$b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$j(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$j(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$j(_e,et)}}function _arrayLikeToArray$j(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$a(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et===0){if(Object(tt)!==tt)return;at=!1}else for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$b(_e){if(Array.isArray(_e))return _e}var BREAKING_SPACES=/[ \f\n\r\t\v\u2028\u2029]+/,calculateWordWidths=function _e(et){var tt=et.children,rt=et.breakAll,it=et.style;try{var st=[];isNil$1(tt)||(rt?st=tt.toString().split(""):st=tt.toString().split(BREAKING_SPACES));var ut=st.map(function(at){return{word:at,width:getStringSize(at,it).width}}),ht=rt?0:getStringSize("",it).width;return{wordsWithComputedWidth:ut,spaceWidth:ht}}catch{return null}},calculateWordsByLines=function _e(et,tt,rt,it,st){var ut=et.maxLines,ht=et.children,at=et.style,gt=et.breakAll,bt=isNumber$2(ut),wt=ht,St=function(){var Lr=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Lr.reduce(function(ar,hr){var Qt=hr.word,ir=hr.width,Mr=ar[ar.length-1];if(Mr&&(it==null||st||Mr.width+ir+rt<Number(it)))Mr.words.push(Qt),Mr.width+=ir+rt;else{var Cr={words:[Qt],width:ir};ar.push(Cr)}return ar},[])},kt=St(tt),Rt=function(Lr){return Lr.reduce(function(ar,hr){return ar.width>hr.width?ar:hr})};if(!bt)return kt;for(var It="",Dt=function(Lr){var ar=wt.slice(0,Lr),hr=calculateWordWidths({breakAll:gt,style:at,children:ar+It}).wordsWithComputedWidth,Qt=St(hr),ir=Qt.length>ut||Rt(Qt).width>Number(it);return[ir,Qt]},Mt=0,$t=wt.length-1,jt=0,Nt;Mt<=$t&&jt<=wt.length-1;){var Ut=Math.floor((Mt+$t)/2),Ht=Ut-1,Kt=Dt(Ht),tr=_slicedToArray$a(Kt,2),mr=tr[0],vr=tr[1],wr=Dt(Ut),yr=_slicedToArray$a(wr,1),Or=yr[0];if(!mr&&!Or&&(Mt=Ut+1),mr&&Or&&($t=Ut-1),!mr&&Or){Nt=vr;break}jt++}return Nt||kt},getWordsWithoutCalculate=function _e(et){var tt=isNil$1(et)?[]:et.toString().split(BREAKING_SPACES);return[{words:tt}]},getWordsByLines=function _e(et){var tt=et.width,rt=et.scaleToFit,it=et.children,st=et.style,ut=et.breakAll,ht=et.maxLines;if((tt||rt)&&!Global.isSsr){var at,gt,bt=calculateWordWidths({breakAll:ut,children:it,style:st});if(bt){var wt=bt.wordsWithComputedWidth,St=bt.spaceWidth;at=wt,gt=St}else return getWordsWithoutCalculate(it);return calculateWordsByLines({breakAll:ut,children:it,maxLines:ht,style:st},at,gt,tt,rt)}return getWordsWithoutCalculate(it)},DEFAULT_FILL="#808080",Text=function _e(et){var tt=et.x,rt=tt===void 0?0:tt,it=et.y,st=it===void 0?0:it,ut=et.lineHeight,ht=ut===void 0?"1em":ut,at=et.capHeight,gt=at===void 0?"0.71em":at,bt=et.scaleToFit,wt=bt===void 0?!1:bt,St=et.textAnchor,kt=St===void 0?"start":St,Rt=et.verticalAnchor,It=Rt===void 0?"end":Rt,Dt=et.fill,Mt=Dt===void 0?DEFAULT_FILL:Dt,$t=_objectWithoutProperties$g(et,_excluded$f),jt=reactExports.useMemo(function(){return getWordsByLines({breakAll:$t.breakAll,children:$t.children,maxLines:$t.maxLines,scaleToFit:wt,style:$t.style,width:$t.width})},[$t.breakAll,$t.children,$t.maxLines,wt,$t.style,$t.width]),Nt=$t.dx,Ut=$t.dy,Ht=$t.angle,Kt=$t.className,tr=$t.breakAll,mr=_objectWithoutProperties$g($t,_excluded2$5);if(!isNumOrStr(rt)||!isNumOrStr(st))return null;var vr=rt+(isNumber$2(Nt)?Nt:0),wr=st+(isNumber$2(Ut)?Ut:0),yr;switch(It){case"start":yr=reduceCSSCalc("calc(".concat(gt,")"));break;case"middle":yr=reduceCSSCalc("calc(".concat((jt.length-1)/2," * -").concat(ht," + (").concat(gt," / 2))"));break;default:yr=reduceCSSCalc("calc(".concat(jt.length-1," * -").concat(ht,")"));break}var Or=[];if(wt){var Nr=jt[0].width,Lr=$t.width;Or.push("scale(".concat((isNumber$2(Lr)?Lr/Nr:1)/Nr,")"))}return Ht&&Or.push("rotate(".concat(Ht,", ").concat(vr,", ").concat(wr,")")),Or.length&&(mr.transform=Or.join(" ")),React$1.createElement("text",_extends$r({},filterProps(mr,!0),{x:vr,y:wr,className:clsx$1("recharts-text",Kt),textAnchor:kt,fill:Mt.includes("url")?DEFAULT_FILL:Mt}),jt.map(function(ar,hr){var Qt=ar.words.join(tr?"":" ");return React$1.createElement("tspan",{x:vr,dy:hr===0?yr:ht,key:Qt},Qt)}))};function ascending(_e,et){return _e==null||et==null?NaN:_e<et?-1:_e>et?1:_e>=et?0:NaN}function descending(_e,et){return _e==null||et==null?NaN:et<_e?-1:et>_e?1:et>=_e?0:NaN}function bisector(_e){let et,tt,rt;_e.length!==2?(et=ascending,tt=(ht,at)=>ascending(_e(ht),at),rt=(ht,at)=>_e(ht)-at):(et=_e===ascending||_e===descending?_e:zero$1,tt=_e,rt=_e);function it(ht,at,gt=0,bt=ht.length){if(gt<bt){if(et(at,at)!==0)return bt;do{const wt=gt+bt>>>1;tt(ht[wt],at)<0?gt=wt+1:bt=wt}while(gt<bt)}return gt}function st(ht,at,gt=0,bt=ht.length){if(gt<bt){if(et(at,at)!==0)return bt;do{const wt=gt+bt>>>1;tt(ht[wt],at)<=0?gt=wt+1:bt=wt}while(gt<bt)}return gt}function ut(ht,at,gt=0,bt=ht.length){const wt=it(ht,at,gt,bt-1);return wt>gt&&rt(ht[wt-1],at)>-rt(ht[wt],at)?wt-1:wt}return{left:it,center:ut,right:st}}function zero$1(){return 0}function number$2(_e){return _e===null?NaN:+_e}function*numbers(_e,et){for(let tt of _e)tt!=null&&(tt=+tt)>=tt&&(yield tt)}const ascendingBisect=bisector(ascending),bisectRight=ascendingBisect.right;bisector(number$2).center;class InternMap extends Map{constructor(et,tt=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:tt}}),et!=null)for(const[rt,it]of et)this.set(rt,it)}get(et){return super.get(intern_get(this,et))}has(et){return super.has(intern_get(this,et))}set(et,tt){return super.set(intern_set(this,et),tt)}delete(et){return super.delete(intern_delete(this,et))}}function intern_get({_intern:_e,_key:et},tt){const rt=et(tt);return _e.has(rt)?_e.get(rt):tt}function intern_set({_intern:_e,_key:et},tt){const rt=et(tt);return _e.has(rt)?_e.get(rt):(_e.set(rt,tt),tt)}function intern_delete({_intern:_e,_key:et},tt){const rt=et(tt);return _e.has(rt)&&(tt=_e.get(rt),_e.delete(rt)),tt}function keyof(_e){return _e!==null&&typeof _e=="object"?_e.valueOf():_e}function compareDefined(_e=ascending){if(_e===ascending)return ascendingDefined;if(typeof _e!="function")throw new TypeError("compare is not a function");return(et,tt)=>{const rt=_e(et,tt);return rt||rt===0?rt:(_e(tt,tt)===0)-(_e(et,et)===0)}}function ascendingDefined(_e,et){return(_e==null||!(_e>=_e))-(et==null||!(et>=et))||(_e<et?-1:_e>et?1:0)}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(_e,et,tt){const rt=(et-_e)/Math.max(0,tt),it=Math.floor(Math.log10(rt)),st=rt/Math.pow(10,it),ut=st>=e10?10:st>=e5?5:st>=e2?2:1;let ht,at,gt;return it<0?(gt=Math.pow(10,-it)/ut,ht=Math.round(_e*gt),at=Math.round(et*gt),ht/gt<_e&&++ht,at/gt>et&&--at,gt=-gt):(gt=Math.pow(10,it)*ut,ht=Math.round(_e/gt),at=Math.round(et/gt),ht*gt<_e&&++ht,at*gt>et&&--at),at<ht&&.5<=tt&&tt<2?tickSpec(_e,et,tt*2):[ht,at,gt]}function ticks(_e,et,tt){if(et=+et,_e=+_e,tt=+tt,!(tt>0))return[];if(_e===et)return[_e];const rt=et<_e,[it,st,ut]=rt?tickSpec(et,_e,tt):tickSpec(_e,et,tt);if(!(st>=it))return[];const ht=st-it+1,at=new Array(ht);if(rt)if(ut<0)for(let gt=0;gt<ht;++gt)at[gt]=(st-gt)/-ut;else for(let gt=0;gt<ht;++gt)at[gt]=(st-gt)*ut;else if(ut<0)for(let gt=0;gt<ht;++gt)at[gt]=(it+gt)/-ut;else for(let gt=0;gt<ht;++gt)at[gt]=(it+gt)*ut;return at}function tickIncrement(_e,et,tt){return et=+et,_e=+_e,tt=+tt,tickSpec(_e,et,tt)[2]}function tickStep(_e,et,tt){et=+et,_e=+_e,tt=+tt;const rt=et<_e,it=rt?tickIncrement(et,_e,tt):tickIncrement(_e,et,tt);return(rt?-1:1)*(it<0?1/-it:it)}function max$4(_e,et){let tt;for(const rt of _e)rt!=null&&(tt<rt||tt===void 0&&rt>=rt)&&(tt=rt);return tt}function min$4(_e,et){let tt;for(const rt of _e)rt!=null&&(tt>rt||tt===void 0&&rt>=rt)&&(tt=rt);return tt}function quickselect(_e,et,tt=0,rt=1/0,it){if(et=Math.floor(et),tt=Math.floor(Math.max(0,tt)),rt=Math.floor(Math.min(_e.length-1,rt)),!(tt<=et&&et<=rt))return _e;for(it=it===void 0?ascendingDefined:compareDefined(it);rt>tt;){if(rt-tt>600){const at=rt-tt+1,gt=et-tt+1,bt=Math.log(at),wt=.5*Math.exp(2*bt/3),St=.5*Math.sqrt(bt*wt*(at-wt)/at)*(gt-at/2<0?-1:1),kt=Math.max(tt,Math.floor(et-gt*wt/at+St)),Rt=Math.min(rt,Math.floor(et+(at-gt)*wt/at+St));quickselect(_e,et,kt,Rt,it)}const st=_e[et];let ut=tt,ht=rt;for(swap(_e,tt,et),it(_e[rt],st)>0&&swap(_e,tt,rt);ut<ht;){for(swap(_e,ut,ht),++ut,--ht;it(_e[ut],st)<0;)++ut;for(;it(_e[ht],st)>0;)--ht}it(_e[tt],st)===0?swap(_e,tt,ht):(++ht,swap(_e,ht,rt)),ht<=et&&(tt=ht+1),et<=ht&&(rt=ht-1)}return _e}function swap(_e,et,tt){const rt=_e[et];_e[et]=_e[tt],_e[tt]=rt}function quantile$1(_e,et,tt){if(_e=Float64Array.from(numbers(_e)),!(!(rt=_e.length)||isNaN(et=+et))){if(et<=0||rt<2)return min$4(_e);if(et>=1)return max$4(_e);var rt,it=(rt-1)*et,st=Math.floor(it),ut=max$4(quickselect(_e,st).subarray(0,st+1)),ht=min$4(_e.subarray(st+1));return ut+(ht-ut)*(it-st)}}function quantileSorted(_e,et,tt=number$2){if(!(!(rt=_e.length)||isNaN(et=+et))){if(et<=0||rt<2)return+tt(_e[0],0,_e);if(et>=1)return+tt(_e[rt-1],rt-1,_e);var rt,it=(rt-1)*et,st=Math.floor(it),ut=+tt(_e[st],st,_e),ht=+tt(_e[st+1],st+1,_e);return ut+(ht-ut)*(it-st)}}function range$4(_e,et,tt){_e=+_e,et=+et,tt=(it=arguments.length)<2?(et=_e,_e=0,1):it<3?1:+tt;for(var rt=-1,it=Math.max(0,Math.ceil((et-_e)/tt))|0,st=new Array(it);++rt<it;)st[rt]=_e+rt*tt;return st}function initRange(_e,et){switch(arguments.length){case 0:break;case 1:this.range(_e);break;default:this.range(et).domain(_e);break}return this}function initInterpolator(_e,et){switch(arguments.length){case 0:break;case 1:{typeof _e=="function"?this.interpolator(_e):this.range(_e);break}default:{this.domain(_e),typeof et=="function"?this.interpolator(et):this.range(et);break}}return this}const implicit=Symbol("implicit");function ordinal(){var _e=new InternMap,et=[],tt=[],rt=implicit;function it(st){let ut=_e.get(st);if(ut===void 0){if(rt!==implicit)return rt;_e.set(st,ut=et.push(st)-1)}return tt[ut%tt.length]}return it.domain=function(st){if(!arguments.length)return et.slice();et=[],_e=new InternMap;for(const ut of st)_e.has(ut)||_e.set(ut,et.push(ut)-1);return it},it.range=function(st){return arguments.length?(tt=Array.from(st),it):tt.slice()},it.unknown=function(st){return arguments.length?(rt=st,it):rt},it.copy=function(){return ordinal(et,tt).unknown(rt)},initRange.apply(it,arguments),it}function band(){var _e=ordinal().unknown(void 0),et=_e.domain,tt=_e.range,rt=0,it=1,st,ut,ht=!1,at=0,gt=0,bt=.5;delete _e.unknown;function wt(){var St=et().length,kt=it<rt,Rt=kt?it:rt,It=kt?rt:it;st=(It-Rt)/Math.max(1,St-at+gt*2),ht&&(st=Math.floor(st)),Rt+=(It-Rt-st*(St-at))*bt,ut=st*(1-at),ht&&(Rt=Math.round(Rt),ut=Math.round(ut));var Dt=range$4(St).map(function(Mt){return Rt+st*Mt});return tt(kt?Dt.reverse():Dt)}return _e.domain=function(St){return arguments.length?(et(St),wt()):et()},_e.range=function(St){return arguments.length?([rt,it]=St,rt=+rt,it=+it,wt()):[rt,it]},_e.rangeRound=function(St){return[rt,it]=St,rt=+rt,it=+it,ht=!0,wt()},_e.bandwidth=function(){return ut},_e.step=function(){return st},_e.round=function(St){return arguments.length?(ht=!!St,wt()):ht},_e.padding=function(St){return arguments.length?(at=Math.min(1,gt=+St),wt()):at},_e.paddingInner=function(St){return arguments.length?(at=Math.min(1,St),wt()):at},_e.paddingOuter=function(St){return arguments.length?(gt=+St,wt()):gt},_e.align=function(St){return arguments.length?(bt=Math.max(0,Math.min(1,St)),wt()):bt},_e.copy=function(){return band(et(),[rt,it]).round(ht).paddingInner(at).paddingOuter(gt).align(bt)},initRange.apply(wt(),arguments)}function pointish(_e){var et=_e.copy;return _e.padding=_e.paddingOuter,delete _e.paddingInner,delete _e.paddingOuter,_e.copy=function(){return pointish(et())},_e}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function define(_e,et,tt){_e.prototype=et.prototype=tt,tt.constructor=_e}function extend(_e,et){var tt=Object.create(_e.prototype);for(var rt in et)tt[rt]=et[rt];return tt}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(_e){return Object.assign(new this.constructor,this,_e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(_e){var et,tt;return _e=(_e+"").trim().toLowerCase(),(et=reHex.exec(_e))?(tt=et[1].length,et=parseInt(et[1],16),tt===6?rgbn(et):tt===3?new Rgb(et>>8&15|et>>4&240,et>>4&15|et&240,(et&15)<<4|et&15,1):tt===8?rgba(et>>24&255,et>>16&255,et>>8&255,(et&255)/255):tt===4?rgba(et>>12&15|et>>8&240,et>>8&15|et>>4&240,et>>4&15|et&240,((et&15)<<4|et&15)/255):null):(et=reRgbInteger.exec(_e))?new Rgb(et[1],et[2],et[3],1):(et=reRgbPercent.exec(_e))?new Rgb(et[1]*255/100,et[2]*255/100,et[3]*255/100,1):(et=reRgbaInteger.exec(_e))?rgba(et[1],et[2],et[3],et[4]):(et=reRgbaPercent.exec(_e))?rgba(et[1]*255/100,et[2]*255/100,et[3]*255/100,et[4]):(et=reHslPercent.exec(_e))?hsla(et[1],et[2]/100,et[3]/100,1):(et=reHslaPercent.exec(_e))?hsla(et[1],et[2]/100,et[3]/100,et[4]):named.hasOwnProperty(_e)?rgbn(named[_e]):_e==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(_e){return new Rgb(_e>>16&255,_e>>8&255,_e&255,1)}function rgba(_e,et,tt,rt){return rt<=0&&(_e=et=tt=NaN),new Rgb(_e,et,tt,rt)}function rgbConvert(_e){return _e instanceof Color||(_e=color(_e)),_e?(_e=_e.rgb(),new Rgb(_e.r,_e.g,_e.b,_e.opacity)):new Rgb}function rgb$1(_e,et,tt,rt){return arguments.length===1?rgbConvert(_e):new Rgb(_e,et,tt,rt??1)}function Rgb(_e,et,tt,rt){this.r=+_e,this.g=+et,this.b=+tt,this.opacity=+rt}define(Rgb,rgb$1,extend(Color,{brighter(_e){return _e=_e==null?brighter:Math.pow(brighter,_e),new Rgb(this.r*_e,this.g*_e,this.b*_e,this.opacity)},darker(_e){return _e=_e==null?darker:Math.pow(darker,_e),new Rgb(this.r*_e,this.g*_e,this.b*_e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const _e=clampa(this.opacity);return`${_e===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${_e===1?")":`, ${_e})`}`}function clampa(_e){return isNaN(_e)?1:Math.max(0,Math.min(1,_e))}function clampi(_e){return Math.max(0,Math.min(255,Math.round(_e)||0))}function hex(_e){return _e=clampi(_e),(_e<16?"0":"")+_e.toString(16)}function hsla(_e,et,tt,rt){return rt<=0?_e=et=tt=NaN:tt<=0||tt>=1?_e=et=NaN:et<=0&&(_e=NaN),new Hsl(_e,et,tt,rt)}function hslConvert(_e){if(_e instanceof Hsl)return new Hsl(_e.h,_e.s,_e.l,_e.opacity);if(_e instanceof Color||(_e=color(_e)),!_e)return new Hsl;if(_e instanceof Hsl)return _e;_e=_e.rgb();var et=_e.r/255,tt=_e.g/255,rt=_e.b/255,it=Math.min(et,tt,rt),st=Math.max(et,tt,rt),ut=NaN,ht=st-it,at=(st+it)/2;return ht?(et===st?ut=(tt-rt)/ht+(tt<rt)*6:tt===st?ut=(rt-et)/ht+2:ut=(et-tt)/ht+4,ht/=at<.5?st+it:2-st-it,ut*=60):ht=at>0&&at<1?0:ut,new Hsl(ut,ht,at,_e.opacity)}function hsl(_e,et,tt,rt){return arguments.length===1?hslConvert(_e):new Hsl(_e,et,tt,rt??1)}function Hsl(_e,et,tt,rt){this.h=+_e,this.s=+et,this.l=+tt,this.opacity=+rt}define(Hsl,hsl,extend(Color,{brighter(_e){return _e=_e==null?brighter:Math.pow(brighter,_e),new Hsl(this.h,this.s,this.l*_e,this.opacity)},darker(_e){return _e=_e==null?darker:Math.pow(darker,_e),new Hsl(this.h,this.s,this.l*_e,this.opacity)},rgb(){var _e=this.h%360+(this.h<0)*360,et=isNaN(_e)||isNaN(this.s)?0:this.s,tt=this.l,rt=tt+(tt<.5?tt:1-tt)*et,it=2*tt-rt;return new Rgb(hsl2rgb(_e>=240?_e-240:_e+120,it,rt),hsl2rgb(_e,it,rt),hsl2rgb(_e<120?_e+240:_e-120,it,rt),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const _e=clampa(this.opacity);return`${_e===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${_e===1?")":`, ${_e})`}`}}));function clamph(_e){return _e=(_e||0)%360,_e<0?_e+360:_e}function clampt(_e){return Math.max(0,Math.min(1,_e||0))}function hsl2rgb(_e,et,tt){return(_e<60?et+(tt-et)*_e/60:_e<180?tt:_e<240?et+(tt-et)*(240-_e)/60:et)*255}const constant=_e=>()=>_e;function linear$1(_e,et){return function(tt){return _e+tt*et}}function exponential(_e,et,tt){return _e=Math.pow(_e,tt),et=Math.pow(et,tt)-_e,tt=1/tt,function(rt){return Math.pow(_e+rt*et,tt)}}function gamma(_e){return(_e=+_e)==1?nogamma:function(et,tt){return tt-et?exponential(et,tt,_e):constant(isNaN(et)?tt:et)}}function nogamma(_e,et){var tt=et-_e;return tt?linear$1(_e,tt):constant(isNaN(_e)?et:_e)}const rgb=function _e(et){var tt=gamma(et);function rt(it,st){var ut=tt((it=rgb$1(it)).r,(st=rgb$1(st)).r),ht=tt(it.g,st.g),at=tt(it.b,st.b),gt=nogamma(it.opacity,st.opacity);return function(bt){return it.r=ut(bt),it.g=ht(bt),it.b=at(bt),it.opacity=gt(bt),it+""}}return rt.gamma=_e,rt}(1);function numberArray(_e,et){et||(et=[]);var tt=_e?Math.min(et.length,_e.length):0,rt=et.slice(),it;return function(st){for(it=0;it<tt;++it)rt[it]=_e[it]*(1-st)+et[it]*st;return rt}}function isNumberArray(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function genericArray(_e,et){var tt=et?et.length:0,rt=_e?Math.min(tt,_e.length):0,it=new Array(rt),st=new Array(tt),ut;for(ut=0;ut<rt;++ut)it[ut]=interpolate(_e[ut],et[ut]);for(;ut<tt;++ut)st[ut]=et[ut];return function(ht){for(ut=0;ut<rt;++ut)st[ut]=it[ut](ht);return st}}function date$1(_e,et){var tt=new Date;return _e=+_e,et=+et,function(rt){return tt.setTime(_e*(1-rt)+et*rt),tt}}function interpolateNumber$1(_e,et){return _e=+_e,et=+et,function(tt){return _e*(1-tt)+et*tt}}function object(_e,et){var tt={},rt={},it;(_e===null||typeof _e!="object")&&(_e={}),(et===null||typeof et!="object")&&(et={});for(it in et)it in _e?tt[it]=interpolate(_e[it],et[it]):rt[it]=et[it];return function(st){for(it in tt)rt[it]=tt[it](st);return rt}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(_e){return function(){return _e}}function one(_e){return function(et){return _e(et)+""}}function string(_e,et){var tt=reA.lastIndex=reB.lastIndex=0,rt,it,st,ut=-1,ht=[],at=[];for(_e=_e+"",et=et+"";(rt=reA.exec(_e))&&(it=reB.exec(et));)(st=it.index)>tt&&(st=et.slice(tt,st),ht[ut]?ht[ut]+=st:ht[++ut]=st),(rt=rt[0])===(it=it[0])?ht[ut]?ht[ut]+=it:ht[++ut]=it:(ht[++ut]=null,at.push({i:ut,x:interpolateNumber$1(rt,it)})),tt=reB.lastIndex;return tt<et.length&&(st=et.slice(tt),ht[ut]?ht[ut]+=st:ht[++ut]=st),ht.length<2?at[0]?one(at[0].x):zero(et):(et=at.length,function(gt){for(var bt=0,wt;bt<et;++bt)ht[(wt=at[bt]).i]=wt.x(gt);return ht.join("")})}function interpolate(_e,et){var tt=typeof et,rt;return et==null||tt==="boolean"?constant(et):(tt==="number"?interpolateNumber$1:tt==="string"?(rt=color(et))?(et=rt,rgb):string:et instanceof color?rgb:et instanceof Date?date$1:isNumberArray(et)?numberArray:Array.isArray(et)?genericArray:typeof et.valueOf!="function"&&typeof et.toString!="function"||isNaN(et)?object:interpolateNumber$1)(_e,et)}function interpolateRound(_e,et){return _e=+_e,et=+et,function(tt){return Math.round(_e*(1-tt)+et*tt)}}function piecewise(_e,et){et===void 0&&(et=_e,_e=interpolate);for(var tt=0,rt=et.length-1,it=et[0],st=new Array(rt<0?0:rt);tt<rt;)st[tt]=_e(it,it=et[++tt]);return function(ut){var ht=Math.max(0,Math.min(rt-1,Math.floor(ut*=rt)));return st[ht](ut-ht)}}function constants(_e){return function(){return _e}}function number$1(_e){return+_e}var unit=[0,1];function identity$6(_e){return _e}function normalize(_e,et){return(et-=_e=+_e)?function(tt){return(tt-_e)/et}:constants(isNaN(et)?NaN:.5)}function clamper(_e,et){var tt;return _e>et&&(tt=_e,_e=et,et=tt),function(rt){return Math.max(_e,Math.min(et,rt))}}function bimap(_e,et,tt){var rt=_e[0],it=_e[1],st=et[0],ut=et[1];return it<rt?(rt=normalize(it,rt),st=tt(ut,st)):(rt=normalize(rt,it),st=tt(st,ut)),function(ht){return st(rt(ht))}}function polymap(_e,et,tt){var rt=Math.min(_e.length,et.length)-1,it=new Array(rt),st=new Array(rt),ut=-1;for(_e[rt]<_e[0]&&(_e=_e.slice().reverse(),et=et.slice().reverse());++ut<rt;)it[ut]=normalize(_e[ut],_e[ut+1]),st[ut]=tt(et[ut],et[ut+1]);return function(ht){var at=bisectRight(_e,ht,1,rt)-1;return st[at](it[at](ht))}}function copy$2(_e,et){return et.domain(_e.domain()).range(_e.range()).interpolate(_e.interpolate()).clamp(_e.clamp()).unknown(_e.unknown())}function transformer$2(){var _e=unit,et=unit,tt=interpolate,rt,it,st,ut=identity$6,ht,at,gt;function bt(){var St=Math.min(_e.length,et.length);return ut!==identity$6&&(ut=clamper(_e[0],_e[St-1])),ht=St>2?polymap:bimap,at=gt=null,wt}function wt(St){return St==null||isNaN(St=+St)?st:(at||(at=ht(_e.map(rt),et,tt)))(rt(ut(St)))}return wt.invert=function(St){return ut(it((gt||(gt=ht(et,_e.map(rt),interpolateNumber$1)))(St)))},wt.domain=function(St){return arguments.length?(_e=Array.from(St,number$1),bt()):_e.slice()},wt.range=function(St){return arguments.length?(et=Array.from(St),bt()):et.slice()},wt.rangeRound=function(St){return et=Array.from(St),tt=interpolateRound,bt()},wt.clamp=function(St){return arguments.length?(ut=St?!0:identity$6,bt()):ut!==identity$6},wt.interpolate=function(St){return arguments.length?(tt=St,bt()):tt},wt.unknown=function(St){return arguments.length?(st=St,wt):st},function(St,kt){return rt=St,it=kt,bt()}}function continuous(){return transformer$2()(identity$6,identity$6)}function formatDecimal(_e){return Math.abs(_e=Math.round(_e))>=1e21?_e.toLocaleString("en").replace(/,/g,""):_e.toString(10)}function formatDecimalParts(_e,et){if((tt=(_e=et?_e.toExponential(et-1):_e.toExponential()).indexOf("e"))<0)return null;var tt,rt=_e.slice(0,tt);return[rt.length>1?rt[0]+rt.slice(2):rt,+_e.slice(tt+1)]}function exponent(_e){return _e=formatDecimalParts(Math.abs(_e)),_e?_e[1]:NaN}function formatGroup(_e,et){return function(tt,rt){for(var it=tt.length,st=[],ut=0,ht=_e[0],at=0;it>0&&ht>0&&(at+ht+1>rt&&(ht=Math.max(1,rt-at)),st.push(tt.substring(it-=ht,it+ht)),!((at+=ht+1)>rt));)ht=_e[ut=(ut+1)%_e.length];return st.reverse().join(et)}}function formatNumerals(_e){return function(et){return et.replace(/[0-9]/g,function(tt){return _e[+tt]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(_e){if(!(et=re.exec(_e)))throw new Error("invalid format: "+_e);var et;return new FormatSpecifier({fill:et[1],align:et[2],sign:et[3],symbol:et[4],zero:et[5],width:et[6],comma:et[7],precision:et[8]&&et[8].slice(1),trim:et[9],type:et[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(_e){this.fill=_e.fill===void 0?" ":_e.fill+"",this.align=_e.align===void 0?">":_e.align+"",this.sign=_e.sign===void 0?"-":_e.sign+"",this.symbol=_e.symbol===void 0?"":_e.symbol+"",this.zero=!!_e.zero,this.width=_e.width===void 0?void 0:+_e.width,this.comma=!!_e.comma,this.precision=_e.precision===void 0?void 0:+_e.precision,this.trim=!!_e.trim,this.type=_e.type===void 0?"":_e.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(_e){e:for(var et=_e.length,tt=1,rt=-1,it;tt<et;++tt)switch(_e[tt]){case".":rt=it=tt;break;case"0":rt===0&&(rt=tt),it=tt;break;default:if(!+_e[tt])break e;rt>0&&(rt=0);break}return rt>0?_e.slice(0,rt)+_e.slice(it+1):_e}var prefixExponent;function formatPrefixAuto(_e,et){var tt=formatDecimalParts(_e,et);if(!tt)return _e+"";var rt=tt[0],it=tt[1],st=it-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(it/3)))*3)+1,ut=rt.length;return st===ut?rt:st>ut?rt+new Array(st-ut+1).join("0"):st>0?rt.slice(0,st)+"."+rt.slice(st):"0."+new Array(1-st).join("0")+formatDecimalParts(_e,Math.max(0,et+st-1))[0]}function formatRounded(_e,et){var tt=formatDecimalParts(_e,et);if(!tt)return _e+"";var rt=tt[0],it=tt[1];return it<0?"0."+new Array(-it).join("0")+rt:rt.length>it+1?rt.slice(0,it+1)+"."+rt.slice(it+1):rt+new Array(it-rt.length+2).join("0")}const formatTypes={"%":(_e,et)=>(_e*100).toFixed(et),b:_e=>Math.round(_e).toString(2),c:_e=>_e+"",d:formatDecimal,e:(_e,et)=>_e.toExponential(et),f:(_e,et)=>_e.toFixed(et),g:(_e,et)=>_e.toPrecision(et),o:_e=>Math.round(_e).toString(8),p:(_e,et)=>formatRounded(_e*100,et),r:formatRounded,s:formatPrefixAuto,X:_e=>Math.round(_e).toString(16).toUpperCase(),x:_e=>Math.round(_e).toString(16)};function identity$5(_e){return _e}var map$3=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(_e){var et=_e.grouping===void 0||_e.thousands===void 0?identity$5:formatGroup(map$3.call(_e.grouping,Number),_e.thousands+""),tt=_e.currency===void 0?"":_e.currency[0]+"",rt=_e.currency===void 0?"":_e.currency[1]+"",it=_e.decimal===void 0?".":_e.decimal+"",st=_e.numerals===void 0?identity$5:formatNumerals(map$3.call(_e.numerals,String)),ut=_e.percent===void 0?"%":_e.percent+"",ht=_e.minus===void 0?"":_e.minus+"",at=_e.nan===void 0?"NaN":_e.nan+"";function gt(wt){wt=formatSpecifier(wt);var St=wt.fill,kt=wt.align,Rt=wt.sign,It=wt.symbol,Dt=wt.zero,Mt=wt.width,$t=wt.comma,jt=wt.precision,Nt=wt.trim,Ut=wt.type;Ut==="n"?($t=!0,Ut="g"):formatTypes[Ut]||(jt===void 0&&(jt=12),Nt=!0,Ut="g"),(Dt||St==="0"&&kt==="=")&&(Dt=!0,St="0",kt="=");var Ht=It==="$"?tt:It==="#"&&/[boxX]/.test(Ut)?"0"+Ut.toLowerCase():"",Kt=It==="$"?rt:/[%p]/.test(Ut)?ut:"",tr=formatTypes[Ut],mr=/[defgprs%]/.test(Ut);jt=jt===void 0?6:/[gprs]/.test(Ut)?Math.max(1,Math.min(21,jt)):Math.max(0,Math.min(20,jt));function vr(wr){var yr=Ht,Or=Kt,Nr,Lr,ar;if(Ut==="c")Or=tr(wr)+Or,wr="";else{wr=+wr;var hr=wr<0||1/wr<0;if(wr=isNaN(wr)?at:tr(Math.abs(wr),jt),Nt&&(wr=formatTrim(wr)),hr&&+wr==0&&Rt!=="+"&&(hr=!1),yr=(hr?Rt==="("?Rt:ht:Rt==="-"||Rt==="("?"":Rt)+yr,Or=(Ut==="s"?prefixes[8+prefixExponent/3]:"")+Or+(hr&&Rt==="("?")":""),mr){for(Nr=-1,Lr=wr.length;++Nr<Lr;)if(ar=wr.charCodeAt(Nr),48>ar||ar>57){Or=(ar===46?it+wr.slice(Nr+1):wr.slice(Nr))+Or,wr=wr.slice(0,Nr);break}}}$t&&!Dt&&(wr=et(wr,1/0));var Qt=yr.length+wr.length+Or.length,ir=Qt<Mt?new Array(Mt-Qt+1).join(St):"";switch($t&&Dt&&(wr=et(ir+wr,ir.length?Mt-Or.length:1/0),ir=""),kt){case"<":wr=yr+wr+Or+ir;break;case"=":wr=yr+ir+wr+Or;break;case"^":wr=ir.slice(0,Qt=ir.length>>1)+yr+wr+Or+ir.slice(Qt);break;default:wr=ir+yr+wr+Or;break}return st(wr)}return vr.toString=function(){return wt+""},vr}function bt(wt,St){var kt=gt((wt=formatSpecifier(wt),wt.type="f",wt)),Rt=Math.max(-8,Math.min(8,Math.floor(exponent(St)/3)))*3,It=Math.pow(10,-Rt),Dt=prefixes[8+Rt/3];return function(Mt){return kt(It*Mt)+Dt}}return{format:gt,formatPrefix:bt}}var locale$1,format$1,formatPrefix;defaultLocale$1({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale$1(_e){return locale$1=formatLocale$1(_e),format$1=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(_e){return Math.max(0,-exponent(Math.abs(_e)))}function precisionPrefix(_e,et){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(et)/3)))*3-exponent(Math.abs(_e)))}function precisionRound(_e,et){return _e=Math.abs(_e),et=Math.abs(et)-_e,Math.max(0,exponent(et)-exponent(_e))+1}function tickFormat(_e,et,tt,rt){var it=tickStep(_e,et,tt),st;switch(rt=formatSpecifier(rt??",f"),rt.type){case"s":{var ut=Math.max(Math.abs(_e),Math.abs(et));return rt.precision==null&&!isNaN(st=precisionPrefix(it,ut))&&(rt.precision=st),formatPrefix(rt,ut)}case"":case"e":case"g":case"p":case"r":{rt.precision==null&&!isNaN(st=precisionRound(it,Math.max(Math.abs(_e),Math.abs(et))))&&(rt.precision=st-(rt.type==="e"));break}case"f":case"%":{rt.precision==null&&!isNaN(st=precisionFixed(it))&&(rt.precision=st-(rt.type==="%")*2);break}}return format$1(rt)}function linearish(_e){var et=_e.domain;return _e.ticks=function(tt){var rt=et();return ticks(rt[0],rt[rt.length-1],tt??10)},_e.tickFormat=function(tt,rt){var it=et();return tickFormat(it[0],it[it.length-1],tt??10,rt)},_e.nice=function(tt){tt==null&&(tt=10);var rt=et(),it=0,st=rt.length-1,ut=rt[it],ht=rt[st],at,gt,bt=10;for(ht<ut&&(gt=ut,ut=ht,ht=gt,gt=it,it=st,st=gt);bt-- >0;){if(gt=tickIncrement(ut,ht,tt),gt===at)return rt[it]=ut,rt[st]=ht,et(rt);if(gt>0)ut=Math.floor(ut/gt)*gt,ht=Math.ceil(ht/gt)*gt;else if(gt<0)ut=Math.ceil(ut*gt)/gt,ht=Math.floor(ht*gt)/gt;else break;at=gt}return _e},_e}function linear(){var _e=continuous();return _e.copy=function(){return copy$2(_e,linear())},initRange.apply(_e,arguments),linearish(_e)}function identity$4(_e){var et;function tt(rt){return rt==null||isNaN(rt=+rt)?et:rt}return tt.invert=tt,tt.domain=tt.range=function(rt){return arguments.length?(_e=Array.from(rt,number$1),tt):_e.slice()},tt.unknown=function(rt){return arguments.length?(et=rt,tt):et},tt.copy=function(){return identity$4(_e).unknown(et)},_e=arguments.length?Array.from(_e,number$1):[0,1],linearish(tt)}function nice(_e,et){_e=_e.slice();var tt=0,rt=_e.length-1,it=_e[tt],st=_e[rt],ut;return st<it&&(ut=tt,tt=rt,rt=ut,ut=it,it=st,st=ut),_e[tt]=et.floor(it),_e[rt]=et.ceil(st),_e}function transformLog(_e){return Math.log(_e)}function transformExp(_e){return Math.exp(_e)}function transformLogn(_e){return-Math.log(-_e)}function transformExpn(_e){return-Math.exp(-_e)}function pow10(_e){return isFinite(_e)?+("1e"+_e):_e<0?0:_e}function powp(_e){return _e===10?pow10:_e===Math.E?Math.exp:et=>Math.pow(_e,et)}function logp(_e){return _e===Math.E?Math.log:_e===10&&Math.log10||_e===2&&Math.log2||(_e=Math.log(_e),et=>Math.log(et)/_e)}function reflect(_e){return(et,tt)=>-_e(-et,tt)}function loggish(_e){const et=_e(transformLog,transformExp),tt=et.domain;let rt=10,it,st;function ut(){return it=logp(rt),st=powp(rt),tt()[0]<0?(it=reflect(it),st=reflect(st),_e(transformLogn,transformExpn)):_e(transformLog,transformExp),et}return et.base=function(ht){return arguments.length?(rt=+ht,ut()):rt},et.domain=function(ht){return arguments.length?(tt(ht),ut()):tt()},et.ticks=ht=>{const at=tt();let gt=at[0],bt=at[at.length-1];const wt=bt<gt;wt&&([gt,bt]=[bt,gt]);let St=it(gt),kt=it(bt),Rt,It;const Dt=ht==null?10:+ht;let Mt=[];if(!(rt%1)&&kt-St<Dt){if(St=Math.floor(St),kt=Math.ceil(kt),gt>0){for(;St<=kt;++St)for(Rt=1;Rt<rt;++Rt)if(It=St<0?Rt/st(-St):Rt*st(St),!(It<gt)){if(It>bt)break;Mt.push(It)}}else for(;St<=kt;++St)for(Rt=rt-1;Rt>=1;--Rt)if(It=St>0?Rt/st(-St):Rt*st(St),!(It<gt)){if(It>bt)break;Mt.push(It)}Mt.length*2<Dt&&(Mt=ticks(gt,bt,Dt))}else Mt=ticks(St,kt,Math.min(kt-St,Dt)).map(st);return wt?Mt.reverse():Mt},et.tickFormat=(ht,at)=>{if(ht==null&&(ht=10),at==null&&(at=rt===10?"s":","),typeof at!="function"&&(!(rt%1)&&(at=formatSpecifier(at)).precision==null&&(at.trim=!0),at=format$1(at)),ht===1/0)return at;const gt=Math.max(1,rt*ht/et.ticks().length);return bt=>{let wt=bt/st(Math.round(it(bt)));return wt*rt<rt-.5&&(wt*=rt),wt<=gt?at(bt):""}},et.nice=()=>tt(nice(tt(),{floor:ht=>st(Math.floor(it(ht))),ceil:ht=>st(Math.ceil(it(ht)))})),et}function log(){const _e=loggish(transformer$2()).domain([1,10]);return _e.copy=()=>copy$2(_e,log()).base(_e.base()),initRange.apply(_e,arguments),_e}function transformSymlog(_e){return function(et){return Math.sign(et)*Math.log1p(Math.abs(et/_e))}}function transformSymexp(_e){return function(et){return Math.sign(et)*Math.expm1(Math.abs(et))*_e}}function symlogish(_e){var et=1,tt=_e(transformSymlog(et),transformSymexp(et));return tt.constant=function(rt){return arguments.length?_e(transformSymlog(et=+rt),transformSymexp(et)):et},linearish(tt)}function symlog(){var _e=symlogish(transformer$2());return _e.copy=function(){return copy$2(_e,symlog()).constant(_e.constant())},initRange.apply(_e,arguments)}function transformPow(_e){return function(et){return et<0?-Math.pow(-et,_e):Math.pow(et,_e)}}function transformSqrt(_e){return _e<0?-Math.sqrt(-_e):Math.sqrt(_e)}function transformSquare(_e){return _e<0?-_e*_e:_e*_e}function powish(_e){var et=_e(identity$6,identity$6),tt=1;function rt(){return tt===1?_e(identity$6,identity$6):tt===.5?_e(transformSqrt,transformSquare):_e(transformPow(tt),transformPow(1/tt))}return et.exponent=function(it){return arguments.length?(tt=+it,rt()):tt},linearish(et)}function pow(){var _e=powish(transformer$2());return _e.copy=function(){return copy$2(_e,pow()).exponent(_e.exponent())},initRange.apply(_e,arguments),_e}function sqrt(){return pow.apply(null,arguments).exponent(.5)}function square(_e){return Math.sign(_e)*_e*_e}function unsquare(_e){return Math.sign(_e)*Math.sqrt(Math.abs(_e))}function radial(){var _e=continuous(),et=[0,1],tt=!1,rt;function it(st){var ut=unsquare(_e(st));return isNaN(ut)?rt:tt?Math.round(ut):ut}return it.invert=function(st){return _e.invert(square(st))},it.domain=function(st){return arguments.length?(_e.domain(st),it):_e.domain()},it.range=function(st){return arguments.length?(_e.range((et=Array.from(st,number$1)).map(square)),it):et.slice()},it.rangeRound=function(st){return it.range(st).round(!0)},it.round=function(st){return arguments.length?(tt=!!st,it):tt},it.clamp=function(st){return arguments.length?(_e.clamp(st),it):_e.clamp()},it.unknown=function(st){return arguments.length?(rt=st,it):rt},it.copy=function(){return radial(_e.domain(),et).round(tt).clamp(_e.clamp()).unknown(rt)},initRange.apply(it,arguments),linearish(it)}function quantile(){var _e=[],et=[],tt=[],rt;function it(){var ut=0,ht=Math.max(1,et.length);for(tt=new Array(ht-1);++ut<ht;)tt[ut-1]=quantileSorted(_e,ut/ht);return st}function st(ut){return ut==null||isNaN(ut=+ut)?rt:et[bisectRight(tt,ut)]}return st.invertExtent=function(ut){var ht=et.indexOf(ut);return ht<0?[NaN,NaN]:[ht>0?tt[ht-1]:_e[0],ht<tt.length?tt[ht]:_e[_e.length-1]]},st.domain=function(ut){if(!arguments.length)return _e.slice();_e=[];for(let ht of ut)ht!=null&&!isNaN(ht=+ht)&&_e.push(ht);return _e.sort(ascending),it()},st.range=function(ut){return arguments.length?(et=Array.from(ut),it()):et.slice()},st.unknown=function(ut){return arguments.length?(rt=ut,st):rt},st.quantiles=function(){return tt.slice()},st.copy=function(){return quantile().domain(_e).range(et).unknown(rt)},initRange.apply(st,arguments)}function quantize(){var _e=0,et=1,tt=1,rt=[.5],it=[0,1],st;function ut(at){return at!=null&&at<=at?it[bisectRight(rt,at,0,tt)]:st}function ht(){var at=-1;for(rt=new Array(tt);++at<tt;)rt[at]=((at+1)*et-(at-tt)*_e)/(tt+1);return ut}return ut.domain=function(at){return arguments.length?([_e,et]=at,_e=+_e,et=+et,ht()):[_e,et]},ut.range=function(at){return arguments.length?(tt=(it=Array.from(at)).length-1,ht()):it.slice()},ut.invertExtent=function(at){var gt=it.indexOf(at);return gt<0?[NaN,NaN]:gt<1?[_e,rt[0]]:gt>=tt?[rt[tt-1],et]:[rt[gt-1],rt[gt]]},ut.unknown=function(at){return arguments.length&&(st=at),ut},ut.thresholds=function(){return rt.slice()},ut.copy=function(){return quantize().domain([_e,et]).range(it).unknown(st)},initRange.apply(linearish(ut),arguments)}function threshold(){var _e=[.5],et=[0,1],tt,rt=1;function it(st){return st!=null&&st<=st?et[bisectRight(_e,st,0,rt)]:tt}return it.domain=function(st){return arguments.length?(_e=Array.from(st),rt=Math.min(_e.length,et.length-1),it):_e.slice()},it.range=function(st){return arguments.length?(et=Array.from(st),rt=Math.min(_e.length,et.length-1),it):et.slice()},it.invertExtent=function(st){var ut=et.indexOf(st);return[_e[ut-1],_e[ut]]},it.unknown=function(st){return arguments.length?(tt=st,it):tt},it.copy=function(){return threshold().domain(_e).range(et).unknown(tt)},initRange.apply(it,arguments)}const t0=new Date,t1=new Date;function timeInterval(_e,et,tt,rt){function it(st){return _e(st=arguments.length===0?new Date:new Date(+st)),st}return it.floor=st=>(_e(st=new Date(+st)),st),it.ceil=st=>(_e(st=new Date(st-1)),et(st,1),_e(st),st),it.round=st=>{const ut=it(st),ht=it.ceil(st);return st-ut<ht-st?ut:ht},it.offset=(st,ut)=>(et(st=new Date(+st),ut==null?1:Math.floor(ut)),st),it.range=(st,ut,ht)=>{const at=[];if(st=it.ceil(st),ht=ht==null?1:Math.floor(ht),!(st<ut)||!(ht>0))return at;let gt;do at.push(gt=new Date(+st)),et(st,ht),_e(st);while(gt<st&&st<ut);return at},it.filter=st=>timeInterval(ut=>{if(ut>=ut)for(;_e(ut),!st(ut);)ut.setTime(ut-1)},(ut,ht)=>{if(ut>=ut)if(ht<0)for(;++ht<=0;)for(;et(ut,-1),!st(ut););else for(;--ht>=0;)for(;et(ut,1),!st(ut););}),tt&&(it.count=(st,ut)=>(t0.setTime(+st),t1.setTime(+ut),_e(t0),_e(t1),Math.floor(tt(t0,t1))),it.every=st=>(st=Math.floor(st),!isFinite(st)||!(st>0)?null:st>1?it.filter(rt?ut=>rt(ut)%st===0:ut=>it.count(0,ut)%st===0):it)),it}const millisecond=timeInterval(()=>{},(_e,et)=>{_e.setTime(+_e+et)},(_e,et)=>et-_e);millisecond.every=_e=>(_e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?timeInterval(et=>{et.setTime(Math.floor(et/_e)*_e)},(et,tt)=>{et.setTime(+et+tt*_e)},(et,tt)=>(tt-et)/_e):millisecond);millisecond.range;const durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365,second=timeInterval(_e=>{_e.setTime(_e-_e.getMilliseconds())},(_e,et)=>{_e.setTime(+_e+et*durationSecond)},(_e,et)=>(et-_e)/durationSecond,_e=>_e.getUTCSeconds());second.range;const timeMinute=timeInterval(_e=>{_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*durationSecond)},(_e,et)=>{_e.setTime(+_e+et*durationMinute)},(_e,et)=>(et-_e)/durationMinute,_e=>_e.getMinutes());timeMinute.range;const utcMinute=timeInterval(_e=>{_e.setUTCSeconds(0,0)},(_e,et)=>{_e.setTime(+_e+et*durationMinute)},(_e,et)=>(et-_e)/durationMinute,_e=>_e.getUTCMinutes());utcMinute.range;const timeHour=timeInterval(_e=>{_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*durationSecond-_e.getMinutes()*durationMinute)},(_e,et)=>{_e.setTime(+_e+et*durationHour)},(_e,et)=>(et-_e)/durationHour,_e=>_e.getHours());timeHour.range;const utcHour=timeInterval(_e=>{_e.setUTCMinutes(0,0,0)},(_e,et)=>{_e.setTime(+_e+et*durationHour)},(_e,et)=>(et-_e)/durationHour,_e=>_e.getUTCHours());utcHour.range;const timeDay=timeInterval(_e=>_e.setHours(0,0,0,0),(_e,et)=>_e.setDate(_e.getDate()+et),(_e,et)=>(et-_e-(et.getTimezoneOffset()-_e.getTimezoneOffset())*durationMinute)/durationDay,_e=>_e.getDate()-1);timeDay.range;const utcDay=timeInterval(_e=>{_e.setUTCHours(0,0,0,0)},(_e,et)=>{_e.setUTCDate(_e.getUTCDate()+et)},(_e,et)=>(et-_e)/durationDay,_e=>_e.getUTCDate()-1);utcDay.range;const unixDay=timeInterval(_e=>{_e.setUTCHours(0,0,0,0)},(_e,et)=>{_e.setUTCDate(_e.getUTCDate()+et)},(_e,et)=>(et-_e)/durationDay,_e=>Math.floor(_e/durationDay));unixDay.range;function timeWeekday(_e){return timeInterval(et=>{et.setDate(et.getDate()-(et.getDay()+7-_e)%7),et.setHours(0,0,0,0)},(et,tt)=>{et.setDate(et.getDate()+tt*7)},(et,tt)=>(tt-et-(tt.getTimezoneOffset()-et.getTimezoneOffset())*durationMinute)/durationWeek)}const timeSunday=timeWeekday(0),timeMonday=timeWeekday(1),timeTuesday=timeWeekday(2),timeWednesday=timeWeekday(3),timeThursday=timeWeekday(4),timeFriday=timeWeekday(5),timeSaturday=timeWeekday(6);timeSunday.range;timeMonday.range;timeTuesday.range;timeWednesday.range;timeThursday.range;timeFriday.range;timeSaturday.range;function utcWeekday(_e){return timeInterval(et=>{et.setUTCDate(et.getUTCDate()-(et.getUTCDay()+7-_e)%7),et.setUTCHours(0,0,0,0)},(et,tt)=>{et.setUTCDate(et.getUTCDate()+tt*7)},(et,tt)=>(tt-et)/durationWeek)}const utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6);utcSunday.range;utcMonday.range;utcTuesday.range;utcWednesday.range;utcThursday.range;utcFriday.range;utcSaturday.range;const timeMonth=timeInterval(_e=>{_e.setDate(1),_e.setHours(0,0,0,0)},(_e,et)=>{_e.setMonth(_e.getMonth()+et)},(_e,et)=>et.getMonth()-_e.getMonth()+(et.getFullYear()-_e.getFullYear())*12,_e=>_e.getMonth());timeMonth.range;const utcMonth=timeInterval(_e=>{_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},(_e,et)=>{_e.setUTCMonth(_e.getUTCMonth()+et)},(_e,et)=>et.getUTCMonth()-_e.getUTCMonth()+(et.getUTCFullYear()-_e.getUTCFullYear())*12,_e=>_e.getUTCMonth());utcMonth.range;const timeYear=timeInterval(_e=>{_e.setMonth(0,1),_e.setHours(0,0,0,0)},(_e,et)=>{_e.setFullYear(_e.getFullYear()+et)},(_e,et)=>et.getFullYear()-_e.getFullYear(),_e=>_e.getFullYear());timeYear.every=_e=>!isFinite(_e=Math.floor(_e))||!(_e>0)?null:timeInterval(et=>{et.setFullYear(Math.floor(et.getFullYear()/_e)*_e),et.setMonth(0,1),et.setHours(0,0,0,0)},(et,tt)=>{et.setFullYear(et.getFullYear()+tt*_e)});timeYear.range;const utcYear=timeInterval(_e=>{_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},(_e,et)=>{_e.setUTCFullYear(_e.getUTCFullYear()+et)},(_e,et)=>et.getUTCFullYear()-_e.getUTCFullYear(),_e=>_e.getUTCFullYear());utcYear.every=_e=>!isFinite(_e=Math.floor(_e))||!(_e>0)?null:timeInterval(et=>{et.setUTCFullYear(Math.floor(et.getUTCFullYear()/_e)*_e),et.setUTCMonth(0,1),et.setUTCHours(0,0,0,0)},(et,tt)=>{et.setUTCFullYear(et.getUTCFullYear()+tt*_e)});utcYear.range;function ticker(_e,et,tt,rt,it,st){const ut=[[second,1,durationSecond],[second,5,5*durationSecond],[second,15,15*durationSecond],[second,30,30*durationSecond],[st,1,durationMinute],[st,5,5*durationMinute],[st,15,15*durationMinute],[st,30,30*durationMinute],[it,1,durationHour],[it,3,3*durationHour],[it,6,6*durationHour],[it,12,12*durationHour],[rt,1,durationDay],[rt,2,2*durationDay],[tt,1,durationWeek],[et,1,durationMonth],[et,3,3*durationMonth],[_e,1,durationYear]];function ht(gt,bt,wt){const St=bt<gt;St&&([gt,bt]=[bt,gt]);const kt=wt&&typeof wt.range=="function"?wt:at(gt,bt,wt),Rt=kt?kt.range(gt,+bt+1):[];return St?Rt.reverse():Rt}function at(gt,bt,wt){const St=Math.abs(bt-gt)/wt,kt=bisector(([,,Dt])=>Dt).right(ut,St);if(kt===ut.length)return _e.every(tickStep(gt/durationYear,bt/durationYear,wt));if(kt===0)return millisecond.every(Math.max(tickStep(gt,bt,wt),1));const[Rt,It]=ut[St/ut[kt-1][2]<ut[kt][2]/St?kt-1:kt];return Rt.every(It)}return[ht,at]}const[utcTicks,utcTickInterval]=ticker(utcYear,utcMonth,utcSunday,unixDay,utcHour,utcMinute),[timeTicks,timeTickInterval]=ticker(timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute);function localDate(_e){if(0<=_e.y&&_e.y<100){var et=new Date(-1,_e.m,_e.d,_e.H,_e.M,_e.S,_e.L);return et.setFullYear(_e.y),et}return new Date(_e.y,_e.m,_e.d,_e.H,_e.M,_e.S,_e.L)}function utcDate(_e){if(0<=_e.y&&_e.y<100){var et=new Date(Date.UTC(-1,_e.m,_e.d,_e.H,_e.M,_e.S,_e.L));return et.setUTCFullYear(_e.y),et}return new Date(Date.UTC(_e.y,_e.m,_e.d,_e.H,_e.M,_e.S,_e.L))}function newDate(_e,et,tt){return{y:_e,m:et,d:tt,H:0,M:0,S:0,L:0}}function formatLocale(_e){var et=_e.dateTime,tt=_e.date,rt=_e.time,it=_e.periods,st=_e.days,ut=_e.shortDays,ht=_e.months,at=_e.shortMonths,gt=formatRe(it),bt=formatLookup(it),wt=formatRe(st),St=formatLookup(st),kt=formatRe(ut),Rt=formatLookup(ut),It=formatRe(ht),Dt=formatLookup(ht),Mt=formatRe(at),$t=formatLookup(at),jt={a:hr,A:Qt,b:ir,B:Mr,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:Cr,q:rn,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},Nt={a:fn,A:Dn,b:Yn,B:eo,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:Gn,q:lo,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},Ut={a:vr,A:wr,b:yr,B:Or,c:Nr,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:mr,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:Lr,X:ar,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};jt.x=Ht(tt,jt),jt.X=Ht(rt,jt),jt.c=Ht(et,jt),Nt.x=Ht(tt,Nt),Nt.X=Ht(rt,Nt),Nt.c=Ht(et,Nt);function Ht(mn,Hn){return function(Rn){var dn=[],qn=-1,On=0,xo=mn.length,Io,$o,Zr;for(Rn instanceof Date||(Rn=new Date(+Rn));++qn<xo;)mn.charCodeAt(qn)===37&&(dn.push(mn.slice(On,qn)),($o=pads[Io=mn.charAt(++qn)])!=null?Io=mn.charAt(++qn):$o=Io==="e"?" ":"0",(Zr=Hn[Io])&&(Io=Zr(Rn,$o)),dn.push(Io),On=qn+1);return dn.push(mn.slice(On,qn)),dn.join("")}}function Kt(mn,Hn){return function(Rn){var dn=newDate(1900,void 0,1),qn=tr(dn,mn,Rn+="",0),On,xo;if(qn!=Rn.length)return null;if("Q"in dn)return new Date(dn.Q);if("s"in dn)return new Date(dn.s*1e3+("L"in dn?dn.L:0));if(Hn&&!("Z"in dn)&&(dn.Z=0),"p"in dn&&(dn.H=dn.H%12+dn.p*12),dn.m===void 0&&(dn.m="q"in dn?dn.q:0),"V"in dn){if(dn.V<1||dn.V>53)return null;"w"in dn||(dn.w=1),"Z"in dn?(On=utcDate(newDate(dn.y,0,1)),xo=On.getUTCDay(),On=xo>4||xo===0?utcMonday.ceil(On):utcMonday(On),On=utcDay.offset(On,(dn.V-1)*7),dn.y=On.getUTCFullYear(),dn.m=On.getUTCMonth(),dn.d=On.getUTCDate()+(dn.w+6)%7):(On=localDate(newDate(dn.y,0,1)),xo=On.getDay(),On=xo>4||xo===0?timeMonday.ceil(On):timeMonday(On),On=timeDay.offset(On,(dn.V-1)*7),dn.y=On.getFullYear(),dn.m=On.getMonth(),dn.d=On.getDate()+(dn.w+6)%7)}else("W"in dn||"U"in dn)&&("w"in dn||(dn.w="u"in dn?dn.u%7:"W"in dn?1:0),xo="Z"in dn?utcDate(newDate(dn.y,0,1)).getUTCDay():localDate(newDate(dn.y,0,1)).getDay(),dn.m=0,dn.d="W"in dn?(dn.w+6)%7+dn.W*7-(xo+5)%7:dn.w+dn.U*7-(xo+6)%7);return"Z"in dn?(dn.H+=dn.Z/100|0,dn.M+=dn.Z%100,utcDate(dn)):localDate(dn)}}function tr(mn,Hn,Rn,dn){for(var qn=0,On=Hn.length,xo=Rn.length,Io,$o;qn<On;){if(dn>=xo)return-1;if(Io=Hn.charCodeAt(qn++),Io===37){if(Io=Hn.charAt(qn++),$o=Ut[Io in pads?Hn.charAt(qn++):Io],!$o||(dn=$o(mn,Rn,dn))<0)return-1}else if(Io!=Rn.charCodeAt(dn++))return-1}return dn}function mr(mn,Hn,Rn){var dn=gt.exec(Hn.slice(Rn));return dn?(mn.p=bt.get(dn[0].toLowerCase()),Rn+dn[0].length):-1}function vr(mn,Hn,Rn){var dn=kt.exec(Hn.slice(Rn));return dn?(mn.w=Rt.get(dn[0].toLowerCase()),Rn+dn[0].length):-1}function wr(mn,Hn,Rn){var dn=wt.exec(Hn.slice(Rn));return dn?(mn.w=St.get(dn[0].toLowerCase()),Rn+dn[0].length):-1}function yr(mn,Hn,Rn){var dn=Mt.exec(Hn.slice(Rn));return dn?(mn.m=$t.get(dn[0].toLowerCase()),Rn+dn[0].length):-1}function Or(mn,Hn,Rn){var dn=It.exec(Hn.slice(Rn));return dn?(mn.m=Dt.get(dn[0].toLowerCase()),Rn+dn[0].length):-1}function Nr(mn,Hn,Rn){return tr(mn,et,Hn,Rn)}function Lr(mn,Hn,Rn){return tr(mn,tt,Hn,Rn)}function ar(mn,Hn,Rn){return tr(mn,rt,Hn,Rn)}function hr(mn){return ut[mn.getDay()]}function Qt(mn){return st[mn.getDay()]}function ir(mn){return at[mn.getMonth()]}function Mr(mn){return ht[mn.getMonth()]}function Cr(mn){return it[+(mn.getHours()>=12)]}function rn(mn){return 1+~~(mn.getMonth()/3)}function fn(mn){return ut[mn.getUTCDay()]}function Dn(mn){return st[mn.getUTCDay()]}function Yn(mn){return at[mn.getUTCMonth()]}function eo(mn){return ht[mn.getUTCMonth()]}function Gn(mn){return it[+(mn.getUTCHours()>=12)]}function lo(mn){return 1+~~(mn.getUTCMonth()/3)}return{format:function(mn){var Hn=Ht(mn+="",jt);return Hn.toString=function(){return mn},Hn},parse:function(mn){var Hn=Kt(mn+="",!1);return Hn.toString=function(){return mn},Hn},utcFormat:function(mn){var Hn=Ht(mn+="",Nt);return Hn.toString=function(){return mn},Hn},utcParse:function(mn){var Hn=Kt(mn+="",!0);return Hn.toString=function(){return mn},Hn}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(_e,et,tt){var rt=_e<0?"-":"",it=(rt?-_e:_e)+"",st=it.length;return rt+(st<tt?new Array(tt-st+1).join(et)+it:it)}function requote(_e){return _e.replace(requoteRe,"\\$&")}function formatRe(_e){return new RegExp("^(?:"+_e.map(requote).join("|")+")","i")}function formatLookup(_e){return new Map(_e.map((et,tt)=>[et.toLowerCase(),tt]))}function parseWeekdayNumberSunday(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+1));return rt?(_e.w=+rt[0],tt+rt[0].length):-1}function parseWeekdayNumberMonday(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+1));return rt?(_e.u=+rt[0],tt+rt[0].length):-1}function parseWeekNumberSunday(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.U=+rt[0],tt+rt[0].length):-1}function parseWeekNumberISO(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.V=+rt[0],tt+rt[0].length):-1}function parseWeekNumberMonday(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.W=+rt[0],tt+rt[0].length):-1}function parseFullYear(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+4));return rt?(_e.y=+rt[0],tt+rt[0].length):-1}function parseYear(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.y=+rt[0]+(+rt[0]>68?1900:2e3),tt+rt[0].length):-1}function parseZone(_e,et,tt){var rt=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(et.slice(tt,tt+6));return rt?(_e.Z=rt[1]?0:-(rt[2]+(rt[3]||"00")),tt+rt[0].length):-1}function parseQuarter(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+1));return rt?(_e.q=rt[0]*3-3,tt+rt[0].length):-1}function parseMonthNumber(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.m=rt[0]-1,tt+rt[0].length):-1}function parseDayOfMonth(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.d=+rt[0],tt+rt[0].length):-1}function parseDayOfYear(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+3));return rt?(_e.m=0,_e.d=+rt[0],tt+rt[0].length):-1}function parseHour24(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.H=+rt[0],tt+rt[0].length):-1}function parseMinutes(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.M=+rt[0],tt+rt[0].length):-1}function parseSeconds(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+2));return rt?(_e.S=+rt[0],tt+rt[0].length):-1}function parseMilliseconds(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+3));return rt?(_e.L=+rt[0],tt+rt[0].length):-1}function parseMicroseconds(_e,et,tt){var rt=numberRe.exec(et.slice(tt,tt+6));return rt?(_e.L=Math.floor(rt[0]/1e3),tt+rt[0].length):-1}function parseLiteralPercent(_e,et,tt){var rt=percentRe.exec(et.slice(tt,tt+1));return rt?tt+rt[0].length:-1}function parseUnixTimestamp(_e,et,tt){var rt=numberRe.exec(et.slice(tt));return rt?(_e.Q=+rt[0],tt+rt[0].length):-1}function parseUnixTimestampSeconds(_e,et,tt){var rt=numberRe.exec(et.slice(tt));return rt?(_e.s=+rt[0],tt+rt[0].length):-1}function formatDayOfMonth(_e,et){return pad(_e.getDate(),et,2)}function formatHour24(_e,et){return pad(_e.getHours(),et,2)}function formatHour12(_e,et){return pad(_e.getHours()%12||12,et,2)}function formatDayOfYear(_e,et){return pad(1+timeDay.count(timeYear(_e),_e),et,3)}function formatMilliseconds(_e,et){return pad(_e.getMilliseconds(),et,3)}function formatMicroseconds(_e,et){return formatMilliseconds(_e,et)+"000"}function formatMonthNumber(_e,et){return pad(_e.getMonth()+1,et,2)}function formatMinutes(_e,et){return pad(_e.getMinutes(),et,2)}function formatSeconds(_e,et){return pad(_e.getSeconds(),et,2)}function formatWeekdayNumberMonday(_e){var et=_e.getDay();return et===0?7:et}function formatWeekNumberSunday(_e,et){return pad(timeSunday.count(timeYear(_e)-1,_e),et,2)}function dISO(_e){var et=_e.getDay();return et>=4||et===0?timeThursday(_e):timeThursday.ceil(_e)}function formatWeekNumberISO(_e,et){return _e=dISO(_e),pad(timeThursday.count(timeYear(_e),_e)+(timeYear(_e).getDay()===4),et,2)}function formatWeekdayNumberSunday(_e){return _e.getDay()}function formatWeekNumberMonday(_e,et){return pad(timeMonday.count(timeYear(_e)-1,_e),et,2)}function formatYear(_e,et){return pad(_e.getFullYear()%100,et,2)}function formatYearISO(_e,et){return _e=dISO(_e),pad(_e.getFullYear()%100,et,2)}function formatFullYear(_e,et){return pad(_e.getFullYear()%1e4,et,4)}function formatFullYearISO(_e,et){var tt=_e.getDay();return _e=tt>=4||tt===0?timeThursday(_e):timeThursday.ceil(_e),pad(_e.getFullYear()%1e4,et,4)}function formatZone(_e){var et=_e.getTimezoneOffset();return(et>0?"-":(et*=-1,"+"))+pad(et/60|0,"0",2)+pad(et%60,"0",2)}function formatUTCDayOfMonth(_e,et){return pad(_e.getUTCDate(),et,2)}function formatUTCHour24(_e,et){return pad(_e.getUTCHours(),et,2)}function formatUTCHour12(_e,et){return pad(_e.getUTCHours()%12||12,et,2)}function formatUTCDayOfYear(_e,et){return pad(1+utcDay.count(utcYear(_e),_e),et,3)}function formatUTCMilliseconds(_e,et){return pad(_e.getUTCMilliseconds(),et,3)}function formatUTCMicroseconds(_e,et){return formatUTCMilliseconds(_e,et)+"000"}function formatUTCMonthNumber(_e,et){return pad(_e.getUTCMonth()+1,et,2)}function formatUTCMinutes(_e,et){return pad(_e.getUTCMinutes(),et,2)}function formatUTCSeconds(_e,et){return pad(_e.getUTCSeconds(),et,2)}function formatUTCWeekdayNumberMonday(_e){var et=_e.getUTCDay();return et===0?7:et}function formatUTCWeekNumberSunday(_e,et){return pad(utcSunday.count(utcYear(_e)-1,_e),et,2)}function UTCdISO(_e){var et=_e.getUTCDay();return et>=4||et===0?utcThursday(_e):utcThursday.ceil(_e)}function formatUTCWeekNumberISO(_e,et){return _e=UTCdISO(_e),pad(utcThursday.count(utcYear(_e),_e)+(utcYear(_e).getUTCDay()===4),et,2)}function formatUTCWeekdayNumberSunday(_e){return _e.getUTCDay()}function formatUTCWeekNumberMonday(_e,et){return pad(utcMonday.count(utcYear(_e)-1,_e),et,2)}function formatUTCYear(_e,et){return pad(_e.getUTCFullYear()%100,et,2)}function formatUTCYearISO(_e,et){return _e=UTCdISO(_e),pad(_e.getUTCFullYear()%100,et,2)}function formatUTCFullYear(_e,et){return pad(_e.getUTCFullYear()%1e4,et,4)}function formatUTCFullYearISO(_e,et){var tt=_e.getUTCDay();return _e=tt>=4||tt===0?utcThursday(_e):utcThursday.ceil(_e),pad(_e.getUTCFullYear()%1e4,et,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(_e){return+_e}function formatUnixTimestampSeconds(_e){return Math.floor(+_e/1e3)}var locale,timeFormat,utcFormat;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(_e){return locale=formatLocale(_e),timeFormat=locale.format,locale.parse,utcFormat=locale.utcFormat,locale.utcParse,locale}function date(_e){return new Date(_e)}function number(_e){return _e instanceof Date?+_e:+new Date(+_e)}function calendar(_e,et,tt,rt,it,st,ut,ht,at,gt){var bt=continuous(),wt=bt.invert,St=bt.domain,kt=gt(".%L"),Rt=gt(":%S"),It=gt("%I:%M"),Dt=gt("%I %p"),Mt=gt("%a %d"),$t=gt("%b %d"),jt=gt("%B"),Nt=gt("%Y");function Ut(Ht){return(at(Ht)<Ht?kt:ht(Ht)<Ht?Rt:ut(Ht)<Ht?It:st(Ht)<Ht?Dt:rt(Ht)<Ht?it(Ht)<Ht?Mt:$t:tt(Ht)<Ht?jt:Nt)(Ht)}return bt.invert=function(Ht){return new Date(wt(Ht))},bt.domain=function(Ht){return arguments.length?St(Array.from(Ht,number)):St().map(date)},bt.ticks=function(Ht){var Kt=St();return _e(Kt[0],Kt[Kt.length-1],Ht??10)},bt.tickFormat=function(Ht,Kt){return Kt==null?Ut:gt(Kt)},bt.nice=function(Ht){var Kt=St();return(!Ht||typeof Ht.range!="function")&&(Ht=et(Kt[0],Kt[Kt.length-1],Ht??10)),Ht?St(nice(Kt,Ht)):bt},bt.copy=function(){return copy$2(bt,calendar(_e,et,tt,rt,it,st,ut,ht,at,gt))},bt}function time(){return initRange.apply(calendar(timeTicks,timeTickInterval,timeYear,timeMonth,timeSunday,timeDay,timeHour,timeMinute,second,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcTicks,utcTickInterval,utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var _e=0,et=1,tt,rt,it,st,ut=identity$6,ht=!1,at;function gt(wt){return wt==null||isNaN(wt=+wt)?at:ut(it===0?.5:(wt=(st(wt)-tt)*it,ht?Math.max(0,Math.min(1,wt)):wt))}gt.domain=function(wt){return arguments.length?([_e,et]=wt,tt=st(_e=+_e),rt=st(et=+et),it=tt===rt?0:1/(rt-tt),gt):[_e,et]},gt.clamp=function(wt){return arguments.length?(ht=!!wt,gt):ht},gt.interpolator=function(wt){return arguments.length?(ut=wt,gt):ut};function bt(wt){return function(St){var kt,Rt;return arguments.length?([kt,Rt]=St,ut=wt(kt,Rt),gt):[ut(0),ut(1)]}}return gt.range=bt(interpolate),gt.rangeRound=bt(interpolateRound),gt.unknown=function(wt){return arguments.length?(at=wt,gt):at},function(wt){return st=wt,tt=wt(_e),rt=wt(et),it=tt===rt?0:1/(rt-tt),gt}}function copy$1(_e,et){return et.domain(_e.domain()).interpolator(_e.interpolator()).clamp(_e.clamp()).unknown(_e.unknown())}function sequential(){var _e=linearish(transformer$1()(identity$6));return _e.copy=function(){return copy$1(_e,sequential())},initInterpolator.apply(_e,arguments)}function sequentialLog(){var _e=loggish(transformer$1()).domain([1,10]);return _e.copy=function(){return copy$1(_e,sequentialLog()).base(_e.base())},initInterpolator.apply(_e,arguments)}function sequentialSymlog(){var _e=symlogish(transformer$1());return _e.copy=function(){return copy$1(_e,sequentialSymlog()).constant(_e.constant())},initInterpolator.apply(_e,arguments)}function sequentialPow(){var _e=powish(transformer$1());return _e.copy=function(){return copy$1(_e,sequentialPow()).exponent(_e.exponent())},initInterpolator.apply(_e,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var _e=[],et=identity$6;function tt(rt){if(rt!=null&&!isNaN(rt=+rt))return et((bisectRight(_e,rt,1)-1)/(_e.length-1))}return tt.domain=function(rt){if(!arguments.length)return _e.slice();_e=[];for(let it of rt)it!=null&&!isNaN(it=+it)&&_e.push(it);return _e.sort(ascending),tt},tt.interpolator=function(rt){return arguments.length?(et=rt,tt):et},tt.range=function(){return _e.map((rt,it)=>et(it/(_e.length-1)))},tt.quantiles=function(rt){return Array.from({length:rt+1},(it,st)=>quantile$1(_e,st/rt))},tt.copy=function(){return sequentialQuantile(et).domain(_e)},initInterpolator.apply(tt,arguments)}function transformer(){var _e=0,et=.5,tt=1,rt=1,it,st,ut,ht,at,gt=identity$6,bt,wt=!1,St;function kt(It){return isNaN(It=+It)?St:(It=.5+((It=+bt(It))-st)*(rt*It<rt*st?ht:at),gt(wt?Math.max(0,Math.min(1,It)):It))}kt.domain=function(It){return arguments.length?([_e,et,tt]=It,it=bt(_e=+_e),st=bt(et=+et),ut=bt(tt=+tt),ht=it===st?0:.5/(st-it),at=st===ut?0:.5/(ut-st),rt=st<it?-1:1,kt):[_e,et,tt]},kt.clamp=function(It){return arguments.length?(wt=!!It,kt):wt},kt.interpolator=function(It){return arguments.length?(gt=It,kt):gt};function Rt(It){return function(Dt){var Mt,$t,jt;return arguments.length?([Mt,$t,jt]=Dt,gt=piecewise(It,[Mt,$t,jt]),kt):[gt(0),gt(.5),gt(1)]}}return kt.range=Rt(interpolate),kt.rangeRound=Rt(interpolateRound),kt.unknown=function(It){return arguments.length?(St=It,kt):St},function(It){return bt=It,it=It(_e),st=It(et),ut=It(tt),ht=it===st?0:.5/(st-it),at=st===ut?0:.5/(ut-st),rt=st<it?-1:1,kt}}function diverging(){var _e=linearish(transformer()(identity$6));return _e.copy=function(){return copy$1(_e,diverging())},initInterpolator.apply(_e,arguments)}function divergingLog(){var _e=loggish(transformer()).domain([.1,1,10]);return _e.copy=function(){return copy$1(_e,divergingLog()).base(_e.base())},initInterpolator.apply(_e,arguments)}function divergingSymlog(){var _e=symlogish(transformer());return _e.copy=function(){return copy$1(_e,divergingSymlog()).constant(_e.constant())},initInterpolator.apply(_e,arguments)}function divergingPow(){var _e=powish(transformer());return _e.copy=function(){return copy$1(_e,divergingPow()).exponent(_e.exponent())},initInterpolator.apply(_e,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}const d3Scales=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:band,scaleDiverging:diverging,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$4,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleRadial:radial,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,tickFormat},Symbol.toStringTag,{value:"Module"}));var isSymbol=isSymbol_1;function baseExtremum$4(_e,et,tt){for(var rt=-1,it=_e.length;++rt<it;){var st=_e[rt],ut=et(st);if(ut!=null&&(ht===void 0?ut===ut&&!isSymbol(ut):tt(ut,ht)))var ht=ut,at=st}return at}var _baseExtremum=baseExtremum$4;function baseGt$2(_e,et){return _e>et}var _baseGt=baseGt$2,baseExtremum$3=_baseExtremum,baseGt$1=_baseGt,identity$3=identity_1;function max$2(_e){return _e&&_e.length?baseExtremum$3(_e,identity$3,baseGt$1):void 0}var max_1=max$2;const max$3=getDefaultExportFromCjs(max_1);function baseLt$2(_e,et){return _e<et}var _baseLt=baseLt$2,baseExtremum$2=_baseExtremum,baseLt$1=_baseLt,identity$2=identity_1;function min$2(_e){return _e&&_e.length?baseExtremum$2(_e,identity$2,baseLt$1):void 0}var min_1=min$2;const min$3=getDefaultExportFromCjs(min_1);var arrayMap=_arrayMap,baseIteratee$7=_baseIteratee,baseMap=_baseMap,isArray$3=isArray_1;function map$2(_e,et){var tt=isArray$3(_e)?arrayMap:baseMap;return tt(_e,baseIteratee$7(et))}var map_1=map$2,baseFlatten=_baseFlatten,map$1=map_1;function flatMap(_e,et){return baseFlatten(map$1(_e,et),1)}var flatMap_1=flatMap;const flatMap$1=getDefaultExportFromCjs(flatMap_1);var baseIsEqual=_baseIsEqual;function isEqual(_e,et){return baseIsEqual(_e,et)}var isEqual_1=isEqual;const isEqual$1=getDefaultExportFromCjs(isEqual_1);var MAX_DIGITS=1e9,defaults={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Decimal,external=!0,decimalError="[DecimalError] ",invalidArgument=decimalError+"Invalid argument: ",exponentOutOfRange=decimalError+"Exponent out of range: ",mathfloor=Math.floor,mathpow=Math.pow,isDecimal=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ONE,BASE=1e7,LOG_BASE=7,MAX_SAFE_INTEGER=9007199254740991,MAX_E=mathfloor(MAX_SAFE_INTEGER/LOG_BASE),P={};P.absoluteValue=P.abs=function(){var _e=new this.constructor(this);return _e.s&&(_e.s=1),_e};P.comparedTo=P.cmp=function(_e){var et,tt,rt,it,st=this;if(_e=new st.constructor(_e),st.s!==_e.s)return st.s||-_e.s;if(st.e!==_e.e)return st.e>_e.e^st.s<0?1:-1;for(rt=st.d.length,it=_e.d.length,et=0,tt=rt<it?rt:it;et<tt;++et)if(st.d[et]!==_e.d[et])return st.d[et]>_e.d[et]^st.s<0?1:-1;return rt===it?0:rt>it^st.s<0?1:-1};P.decimalPlaces=P.dp=function(){var _e=this,et=_e.d.length-1,tt=(et-_e.e)*LOG_BASE;if(et=_e.d[et],et)for(;et%10==0;et/=10)tt--;return tt<0?0:tt};P.dividedBy=P.div=function(_e){return divide(this,new this.constructor(_e))};P.dividedToIntegerBy=P.idiv=function(_e){var et=this,tt=et.constructor;return round$1(divide(et,new tt(_e),0,1),tt.precision)};P.equals=P.eq=function(_e){return!this.cmp(_e)};P.exponent=function(){return getBase10Exponent(this)};P.greaterThan=P.gt=function(_e){return this.cmp(_e)>0};P.greaterThanOrEqualTo=P.gte=function(_e){return this.cmp(_e)>=0};P.isInteger=P.isint=function(){return this.e>this.d.length-2};P.isNegative=P.isneg=function(){return this.s<0};P.isPositive=P.ispos=function(){return this.s>0};P.isZero=function(){return this.s===0};P.lessThan=P.lt=function(_e){return this.cmp(_e)<0};P.lessThanOrEqualTo=P.lte=function(_e){return this.cmp(_e)<1};P.logarithm=P.log=function(_e){var et,tt=this,rt=tt.constructor,it=rt.precision,st=it+5;if(_e===void 0)_e=new rt(10);else if(_e=new rt(_e),_e.s<1||_e.eq(ONE))throw Error(decimalError+"NaN");if(tt.s<1)throw Error(decimalError+(tt.s?"NaN":"-Infinity"));return tt.eq(ONE)?new rt(0):(external=!1,et=divide(ln(tt,st),ln(_e,st),st),external=!0,round$1(et,it))};P.minus=P.sub=function(_e){var et=this;return _e=new et.constructor(_e),et.s==_e.s?subtract(et,_e):add(et,(_e.s=-_e.s,_e))};P.modulo=P.mod=function(_e){var et,tt=this,rt=tt.constructor,it=rt.precision;if(_e=new rt(_e),!_e.s)throw Error(decimalError+"NaN");return tt.s?(external=!1,et=divide(tt,_e,0,1).times(_e),external=!0,tt.minus(et)):round$1(new rt(tt),it)};P.naturalExponential=P.exp=function(){return exp(this)};P.naturalLogarithm=P.ln=function(){return ln(this)};P.negated=P.neg=function(){var _e=new this.constructor(this);return _e.s=-_e.s||0,_e};P.plus=P.add=function(_e){var et=this;return _e=new et.constructor(_e),et.s==_e.s?add(et,_e):subtract(et,(_e.s=-_e.s,_e))};P.precision=P.sd=function(_e){var et,tt,rt,it=this;if(_e!==void 0&&_e!==!!_e&&_e!==1&&_e!==0)throw Error(invalidArgument+_e);if(et=getBase10Exponent(it)+1,rt=it.d.length-1,tt=rt*LOG_BASE+1,rt=it.d[rt],rt){for(;rt%10==0;rt/=10)tt--;for(rt=it.d[0];rt>=10;rt/=10)tt++}return _e&&et>tt?et:tt};P.squareRoot=P.sqrt=function(){var _e,et,tt,rt,it,st,ut,ht=this,at=ht.constructor;if(ht.s<1){if(!ht.s)return new at(0);throw Error(decimalError+"NaN")}for(_e=getBase10Exponent(ht),external=!1,it=Math.sqrt(+ht),it==0||it==1/0?(et=digitsToString(ht.d),(et.length+_e)%2==0&&(et+="0"),it=Math.sqrt(et),_e=mathfloor((_e+1)/2)-(_e<0||_e%2),it==1/0?et="5e"+_e:(et=it.toExponential(),et=et.slice(0,et.indexOf("e")+1)+_e),rt=new at(et)):rt=new at(it.toString()),tt=at.precision,it=ut=tt+3;;)if(st=rt,rt=st.plus(divide(ht,st,ut+2)).times(.5),digitsToString(st.d).slice(0,ut)===(et=digitsToString(rt.d)).slice(0,ut)){if(et=et.slice(ut-3,ut+1),it==ut&&et=="4999"){if(round$1(st,tt+1,0),st.times(st).eq(ht)){rt=st;break}}else if(et!="9999")break;ut+=4}return external=!0,round$1(rt,tt)};P.times=P.mul=function(_e){var et,tt,rt,it,st,ut,ht,at,gt,bt=this,wt=bt.constructor,St=bt.d,kt=(_e=new wt(_e)).d;if(!bt.s||!_e.s)return new wt(0);for(_e.s*=bt.s,tt=bt.e+_e.e,at=St.length,gt=kt.length,at<gt&&(st=St,St=kt,kt=st,ut=at,at=gt,gt=ut),st=[],ut=at+gt,rt=ut;rt--;)st.push(0);for(rt=gt;--rt>=0;){for(et=0,it=at+rt;it>rt;)ht=st[it]+kt[rt]*St[it-rt-1]+et,st[it--]=ht%BASE|0,et=ht/BASE|0;st[it]=(st[it]+et)%BASE|0}for(;!st[--ut];)st.pop();return et?++tt:st.shift(),_e.d=st,_e.e=tt,external?round$1(_e,wt.precision):_e};P.toDecimalPlaces=P.todp=function(_e,et){var tt=this,rt=tt.constructor;return tt=new rt(tt),_e===void 0?tt:(checkInt32(_e,0,MAX_DIGITS),et===void 0?et=rt.rounding:checkInt32(et,0,8),round$1(tt,_e+getBase10Exponent(tt)+1,et))};P.toExponential=function(_e,et){var tt,rt=this,it=rt.constructor;return _e===void 0?tt=toString(rt,!0):(checkInt32(_e,0,MAX_DIGITS),et===void 0?et=it.rounding:checkInt32(et,0,8),rt=round$1(new it(rt),_e+1,et),tt=toString(rt,!0,_e+1)),tt};P.toFixed=function(_e,et){var tt,rt,it=this,st=it.constructor;return _e===void 0?toString(it):(checkInt32(_e,0,MAX_DIGITS),et===void 0?et=st.rounding:checkInt32(et,0,8),rt=round$1(new st(it),_e+getBase10Exponent(it)+1,et),tt=toString(rt.abs(),!1,_e+getBase10Exponent(rt)+1),it.isneg()&&!it.isZero()?"-"+tt:tt)};P.toInteger=P.toint=function(){var _e=this,et=_e.constructor;return round$1(new et(_e),getBase10Exponent(_e)+1,et.rounding)};P.toNumber=function(){return+this};P.toPower=P.pow=function(_e){var et,tt,rt,it,st,ut,ht=this,at=ht.constructor,gt=12,bt=+(_e=new at(_e));if(!_e.s)return new at(ONE);if(ht=new at(ht),!ht.s){if(_e.s<1)throw Error(decimalError+"Infinity");return ht}if(ht.eq(ONE))return ht;if(rt=at.precision,_e.eq(ONE))return round$1(ht,rt);if(et=_e.e,tt=_e.d.length-1,ut=et>=tt,st=ht.s,ut){if((tt=bt<0?-bt:bt)<=MAX_SAFE_INTEGER){for(it=new at(ONE),et=Math.ceil(rt/LOG_BASE+4),external=!1;tt%2&&(it=it.times(ht),truncate(it.d,et)),tt=mathfloor(tt/2),tt!==0;)ht=ht.times(ht),truncate(ht.d,et);return external=!0,_e.s<0?new at(ONE).div(it):round$1(it,rt)}}else if(st<0)throw Error(decimalError+"NaN");return st=st<0&&_e.d[Math.max(et,tt)]&1?-1:1,ht.s=1,external=!1,it=_e.times(ln(ht,rt+gt)),external=!0,it=exp(it),it.s=st,it};P.toPrecision=function(_e,et){var tt,rt,it=this,st=it.constructor;return _e===void 0?(tt=getBase10Exponent(it),rt=toString(it,tt<=st.toExpNeg||tt>=st.toExpPos)):(checkInt32(_e,1,MAX_DIGITS),et===void 0?et=st.rounding:checkInt32(et,0,8),it=round$1(new st(it),_e,et),tt=getBase10Exponent(it),rt=toString(it,_e<=tt||tt<=st.toExpNeg,_e)),rt};P.toSignificantDigits=P.tosd=function(_e,et){var tt=this,rt=tt.constructor;return _e===void 0?(_e=rt.precision,et=rt.rounding):(checkInt32(_e,1,MAX_DIGITS),et===void 0?et=rt.rounding:checkInt32(et,0,8)),round$1(new rt(tt),_e,et)};P.toString=P.valueOf=P.val=P.toJSON=P[Symbol.for("nodejs.util.inspect.custom")]=function(){var _e=this,et=getBase10Exponent(_e),tt=_e.constructor;return toString(_e,et<=tt.toExpNeg||et>=tt.toExpPos)};function add(_e,et){var tt,rt,it,st,ut,ht,at,gt,bt=_e.constructor,wt=bt.precision;if(!_e.s||!et.s)return et.s||(et=new bt(_e)),external?round$1(et,wt):et;if(at=_e.d,gt=et.d,ut=_e.e,it=et.e,at=at.slice(),st=ut-it,st){for(st<0?(rt=at,st=-st,ht=gt.length):(rt=gt,it=ut,ht=at.length),ut=Math.ceil(wt/LOG_BASE),ht=ut>ht?ut+1:ht+1,st>ht&&(st=ht,rt.length=1),rt.reverse();st--;)rt.push(0);rt.reverse()}for(ht=at.length,st=gt.length,ht-st<0&&(st=ht,rt=gt,gt=at,at=rt),tt=0;st;)tt=(at[--st]=at[st]+gt[st]+tt)/BASE|0,at[st]%=BASE;for(tt&&(at.unshift(tt),++it),ht=at.length;at[--ht]==0;)at.pop();return et.d=at,et.e=it,external?round$1(et,wt):et}function checkInt32(_e,et,tt){if(_e!==~~_e||_e<et||_e>tt)throw Error(invalidArgument+_e)}function digitsToString(_e){var et,tt,rt,it=_e.length-1,st="",ut=_e[0];if(it>0){for(st+=ut,et=1;et<it;et++)rt=_e[et]+"",tt=LOG_BASE-rt.length,tt&&(st+=getZeroString(tt)),st+=rt;ut=_e[et],rt=ut+"",tt=LOG_BASE-rt.length,tt&&(st+=getZeroString(tt))}else if(ut===0)return"0";for(;ut%10===0;)ut/=10;return st+ut}var divide=function(){function _e(rt,it){var st,ut=0,ht=rt.length;for(rt=rt.slice();ht--;)st=rt[ht]*it+ut,rt[ht]=st%BASE|0,ut=st/BASE|0;return ut&&rt.unshift(ut),rt}function et(rt,it,st,ut){var ht,at;if(st!=ut)at=st>ut?1:-1;else for(ht=at=0;ht<st;ht++)if(rt[ht]!=it[ht]){at=rt[ht]>it[ht]?1:-1;break}return at}function tt(rt,it,st){for(var ut=0;st--;)rt[st]-=ut,ut=rt[st]<it[st]?1:0,rt[st]=ut*BASE+rt[st]-it[st];for(;!rt[0]&&rt.length>1;)rt.shift()}return function(rt,it,st,ut){var ht,at,gt,bt,wt,St,kt,Rt,It,Dt,Mt,$t,jt,Nt,Ut,Ht,Kt,tr,mr=rt.constructor,vr=rt.s==it.s?1:-1,wr=rt.d,yr=it.d;if(!rt.s)return new mr(rt);if(!it.s)throw Error(decimalError+"Division by zero");for(at=rt.e-it.e,Kt=yr.length,Ut=wr.length,kt=new mr(vr),Rt=kt.d=[],gt=0;yr[gt]==(wr[gt]||0);)++gt;if(yr[gt]>(wr[gt]||0)&&--at,st==null?$t=st=mr.precision:ut?$t=st+(getBase10Exponent(rt)-getBase10Exponent(it))+1:$t=st,$t<0)return new mr(0);if($t=$t/LOG_BASE+2|0,gt=0,Kt==1)for(bt=0,yr=yr[0],$t++;(gt<Ut||bt)&&$t--;gt++)jt=bt*BASE+(wr[gt]||0),Rt[gt]=jt/yr|0,bt=jt%yr|0;else{for(bt=BASE/(yr[0]+1)|0,bt>1&&(yr=_e(yr,bt),wr=_e(wr,bt),Kt=yr.length,Ut=wr.length),Nt=Kt,It=wr.slice(0,Kt),Dt=It.length;Dt<Kt;)It[Dt++]=0;tr=yr.slice(),tr.unshift(0),Ht=yr[0],yr[1]>=BASE/2&&++Ht;do bt=0,ht=et(yr,It,Kt,Dt),ht<0?(Mt=It[0],Kt!=Dt&&(Mt=Mt*BASE+(It[1]||0)),bt=Mt/Ht|0,bt>1?(bt>=BASE&&(bt=BASE-1),wt=_e(yr,bt),St=wt.length,Dt=It.length,ht=et(wt,It,St,Dt),ht==1&&(bt--,tt(wt,Kt<St?tr:yr,St))):(bt==0&&(ht=bt=1),wt=yr.slice()),St=wt.length,St<Dt&&wt.unshift(0),tt(It,wt,Dt),ht==-1&&(Dt=It.length,ht=et(yr,It,Kt,Dt),ht<1&&(bt++,tt(It,Kt<Dt?tr:yr,Dt))),Dt=It.length):ht===0&&(bt++,It=[0]),Rt[gt++]=bt,ht&&It[0]?It[Dt++]=wr[Nt]||0:(It=[wr[Nt]],Dt=1);while((Nt++<Ut||It[0]!==void 0)&&$t--)}return Rt[0]||Rt.shift(),kt.e=at,round$1(kt,ut?st+getBase10Exponent(kt)+1:st)}}();function exp(_e,et){var tt,rt,it,st,ut,ht,at=0,gt=0,bt=_e.constructor,wt=bt.precision;if(getBase10Exponent(_e)>16)throw Error(exponentOutOfRange+getBase10Exponent(_e));if(!_e.s)return new bt(ONE);for(et==null?(external=!1,ht=wt):ht=et,ut=new bt(.03125);_e.abs().gte(.1);)_e=_e.times(ut),gt+=5;for(rt=Math.log(mathpow(2,gt))/Math.LN10*2+5|0,ht+=rt,tt=it=st=new bt(ONE),bt.precision=ht;;){if(it=round$1(it.times(_e),ht),tt=tt.times(++at),ut=st.plus(divide(it,tt,ht)),digitsToString(ut.d).slice(0,ht)===digitsToString(st.d).slice(0,ht)){for(;gt--;)st=round$1(st.times(st),ht);return bt.precision=wt,et==null?(external=!0,round$1(st,wt)):st}st=ut}}function getBase10Exponent(_e){for(var et=_e.e*LOG_BASE,tt=_e.d[0];tt>=10;tt/=10)et++;return et}function getLn10(_e,et,tt){if(et>_e.LN10.sd())throw external=!0,tt&&(_e.precision=tt),Error(decimalError+"LN10 precision limit exceeded");return round$1(new _e(_e.LN10),et)}function getZeroString(_e){for(var et="";_e--;)et+="0";return et}function ln(_e,et){var tt,rt,it,st,ut,ht,at,gt,bt,wt=1,St=10,kt=_e,Rt=kt.d,It=kt.constructor,Dt=It.precision;if(kt.s<1)throw Error(decimalError+(kt.s?"NaN":"-Infinity"));if(kt.eq(ONE))return new It(0);if(et==null?(external=!1,gt=Dt):gt=et,kt.eq(10))return et==null&&(external=!0),getLn10(It,gt);if(gt+=St,It.precision=gt,tt=digitsToString(Rt),rt=tt.charAt(0),st=getBase10Exponent(kt),Math.abs(st)<15e14){for(;rt<7&&rt!=1||rt==1&&tt.charAt(1)>3;)kt=kt.times(_e),tt=digitsToString(kt.d),rt=tt.charAt(0),wt++;st=getBase10Exponent(kt),rt>1?(kt=new It("0."+tt),st++):kt=new It(rt+"."+tt.slice(1))}else return at=getLn10(It,gt+2,Dt).times(st+""),kt=ln(new It(rt+"."+tt.slice(1)),gt-St).plus(at),It.precision=Dt,et==null?(external=!0,round$1(kt,Dt)):kt;for(ht=ut=kt=divide(kt.minus(ONE),kt.plus(ONE),gt),bt=round$1(kt.times(kt),gt),it=3;;){if(ut=round$1(ut.times(bt),gt),at=ht.plus(divide(ut,new It(it),gt)),digitsToString(at.d).slice(0,gt)===digitsToString(ht.d).slice(0,gt))return ht=ht.times(2),st!==0&&(ht=ht.plus(getLn10(It,gt+2,Dt).times(st+""))),ht=divide(ht,new It(wt),gt),It.precision=Dt,et==null?(external=!0,round$1(ht,Dt)):ht;ht=at,it+=2}}function parseDecimal(_e,et){var tt,rt,it;for((tt=et.indexOf("."))>-1&&(et=et.replace(".","")),(rt=et.search(/e/i))>0?(tt<0&&(tt=rt),tt+=+et.slice(rt+1),et=et.substring(0,rt)):tt<0&&(tt=et.length),rt=0;et.charCodeAt(rt)===48;)++rt;for(it=et.length;et.charCodeAt(it-1)===48;)--it;if(et=et.slice(rt,it),et){if(it-=rt,tt=tt-rt-1,_e.e=mathfloor(tt/LOG_BASE),_e.d=[],rt=(tt+1)%LOG_BASE,tt<0&&(rt+=LOG_BASE),rt<it){for(rt&&_e.d.push(+et.slice(0,rt)),it-=LOG_BASE;rt<it;)_e.d.push(+et.slice(rt,rt+=LOG_BASE));et=et.slice(rt),rt=LOG_BASE-et.length}else rt-=it;for(;rt--;)et+="0";if(_e.d.push(+et),external&&(_e.e>MAX_E||_e.e<-MAX_E))throw Error(exponentOutOfRange+tt)}else _e.s=0,_e.e=0,_e.d=[0];return _e}function round$1(_e,et,tt){var rt,it,st,ut,ht,at,gt,bt,wt=_e.d;for(ut=1,st=wt[0];st>=10;st/=10)ut++;if(rt=et-ut,rt<0)rt+=LOG_BASE,it=et,gt=wt[bt=0];else{if(bt=Math.ceil((rt+1)/LOG_BASE),st=wt.length,bt>=st)return _e;for(gt=st=wt[bt],ut=1;st>=10;st/=10)ut++;rt%=LOG_BASE,it=rt-LOG_BASE+ut}if(tt!==void 0&&(st=mathpow(10,ut-it-1),ht=gt/st%10|0,at=et<0||wt[bt+1]!==void 0||gt%st,at=tt<4?(ht||at)&&(tt==0||tt==(_e.s<0?3:2)):ht>5||ht==5&&(tt==4||at||tt==6&&(rt>0?it>0?gt/mathpow(10,ut-it):0:wt[bt-1])%10&1||tt==(_e.s<0?8:7))),et<1||!wt[0])return at?(st=getBase10Exponent(_e),wt.length=1,et=et-st-1,wt[0]=mathpow(10,(LOG_BASE-et%LOG_BASE)%LOG_BASE),_e.e=mathfloor(-et/LOG_BASE)||0):(wt.length=1,wt[0]=_e.e=_e.s=0),_e;if(rt==0?(wt.length=bt,st=1,bt--):(wt.length=bt+1,st=mathpow(10,LOG_BASE-rt),wt[bt]=it>0?(gt/mathpow(10,ut-it)%mathpow(10,it)|0)*st:0),at)for(;;)if(bt==0){(wt[0]+=st)==BASE&&(wt[0]=1,++_e.e);break}else{if(wt[bt]+=st,wt[bt]!=BASE)break;wt[bt--]=0,st=1}for(rt=wt.length;wt[--rt]===0;)wt.pop();if(external&&(_e.e>MAX_E||_e.e<-MAX_E))throw Error(exponentOutOfRange+getBase10Exponent(_e));return _e}function subtract(_e,et){var tt,rt,it,st,ut,ht,at,gt,bt,wt,St=_e.constructor,kt=St.precision;if(!_e.s||!et.s)return et.s?et.s=-et.s:et=new St(_e),external?round$1(et,kt):et;if(at=_e.d,wt=et.d,rt=et.e,gt=_e.e,at=at.slice(),ut=gt-rt,ut){for(bt=ut<0,bt?(tt=at,ut=-ut,ht=wt.length):(tt=wt,rt=gt,ht=at.length),it=Math.max(Math.ceil(kt/LOG_BASE),ht)+2,ut>it&&(ut=it,tt.length=1),tt.reverse(),it=ut;it--;)tt.push(0);tt.reverse()}else{for(it=at.length,ht=wt.length,bt=it<ht,bt&&(ht=it),it=0;it<ht;it++)if(at[it]!=wt[it]){bt=at[it]<wt[it];break}ut=0}for(bt&&(tt=at,at=wt,wt=tt,et.s=-et.s),ht=at.length,it=wt.length-ht;it>0;--it)at[ht++]=0;for(it=wt.length;it>ut;){if(at[--it]<wt[it]){for(st=it;st&&at[--st]===0;)at[st]=BASE-1;--at[st],at[it]+=BASE}at[it]-=wt[it]}for(;at[--ht]===0;)at.pop();for(;at[0]===0;at.shift())--rt;return at[0]?(et.d=at,et.e=rt,external?round$1(et,kt):et):new St(0)}function toString(_e,et,tt){var rt,it=getBase10Exponent(_e),st=digitsToString(_e.d),ut=st.length;return et?(tt&&(rt=tt-ut)>0?st=st.charAt(0)+"."+st.slice(1)+getZeroString(rt):ut>1&&(st=st.charAt(0)+"."+st.slice(1)),st=st+(it<0?"e":"e+")+it):it<0?(st="0."+getZeroString(-it-1)+st,tt&&(rt=tt-ut)>0&&(st+=getZeroString(rt))):it>=ut?(st+=getZeroString(it+1-ut),tt&&(rt=tt-it-1)>0&&(st=st+"."+getZeroString(rt))):((rt=it+1)<ut&&(st=st.slice(0,rt)+"."+st.slice(rt)),tt&&(rt=tt-ut)>0&&(it+1===ut&&(st+="."),st+=getZeroString(rt))),_e.s<0?"-"+st:st}function truncate(_e,et){if(_e.length>et)return _e.length=et,!0}function clone(_e){var et,tt,rt;function it(st){var ut=this;if(!(ut instanceof it))return new it(st);if(ut.constructor=it,st instanceof it){ut.s=st.s,ut.e=st.e,ut.d=(st=st.d)?st.slice():st;return}if(typeof st=="number"){if(st*0!==0)throw Error(invalidArgument+st);if(st>0)ut.s=1;else if(st<0)st=-st,ut.s=-1;else{ut.s=0,ut.e=0,ut.d=[0];return}if(st===~~st&&st<1e7){ut.e=0,ut.d=[st];return}return parseDecimal(ut,st.toString())}else if(typeof st!="string")throw Error(invalidArgument+st);if(st.charCodeAt(0)===45?(st=st.slice(1),ut.s=-1):ut.s=1,isDecimal.test(st))parseDecimal(ut,st);else throw Error(invalidArgument+st)}if(it.prototype=P,it.ROUND_UP=0,it.ROUND_DOWN=1,it.ROUND_CEIL=2,it.ROUND_FLOOR=3,it.ROUND_HALF_UP=4,it.ROUND_HALF_DOWN=5,it.ROUND_HALF_EVEN=6,it.ROUND_HALF_CEIL=7,it.ROUND_HALF_FLOOR=8,it.clone=clone,it.config=it.set=config,_e===void 0&&(_e={}),_e)for(rt=["precision","rounding","toExpNeg","toExpPos","LN10"],et=0;et<rt.length;)_e.hasOwnProperty(tt=rt[et++])||(_e[tt]=this[tt]);return it.config(_e),it}function config(_e){if(!_e||typeof _e!="object")throw Error(decimalError+"Object expected");var et,tt,rt,it=["precision",1,MAX_DIGITS,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(et=0;et<it.length;et+=3)if((rt=_e[tt=it[et]])!==void 0)if(mathfloor(rt)===rt&&rt>=it[et+1]&&rt<=it[et+2])this[tt]=rt;else throw Error(invalidArgument+tt+": "+rt);if((rt=_e[tt="LN10"])!==void 0)if(rt==Math.LN10)this[tt]=new this(rt);else throw Error(invalidArgument+tt+": "+rt);return this}var Decimal=clone(defaults);ONE=new Decimal(1);const Decimal$1=Decimal;function _toConsumableArray$b(_e){return _arrayWithoutHoles$b(_e)||_iterableToArray$c(_e)||_unsupportedIterableToArray$i(_e)||_nonIterableSpread$b()}function _nonIterableSpread$b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$i(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$i(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$i(_e,et)}}function _iterableToArray$c(_e){if(typeof Symbol<"u"&&Symbol.iterator in Object(_e))return Array.from(_e)}function _arrayWithoutHoles$b(_e){if(Array.isArray(_e))return _arrayLikeToArray$i(_e)}function _arrayLikeToArray$i(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}var identity$1=function _e(et){return et},PLACE_HOLDER={"@@functional/placeholder":!0},isPlaceHolder=function _e(et){return et===PLACE_HOLDER},curry0=function _e(et){return function tt(){return arguments.length===0||arguments.length===1&&isPlaceHolder(arguments.length<=0?void 0:arguments[0])?tt:et.apply(void 0,arguments)}},curryN=function _e(et,tt){return et===1?tt:curry0(function(){for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];var ut=it.filter(function(ht){return ht!==PLACE_HOLDER}).length;return ut>=et?tt.apply(void 0,it):_e(et-ut,curry0(function(){for(var ht=arguments.length,at=new Array(ht),gt=0;gt<ht;gt++)at[gt]=arguments[gt];var bt=it.map(function(wt){return isPlaceHolder(wt)?at.shift():wt});return tt.apply(void 0,_toConsumableArray$b(bt).concat(at))}))})},curry=function _e(et){return curryN(et.length,et)},range$3=function _e(et,tt){for(var rt=[],it=et;it<tt;++it)rt[it-et]=it;return rt},map=curry(function(_e,et){return Array.isArray(et)?et.map(_e):Object.keys(et).map(function(tt){return et[tt]}).map(_e)}),compose=function _e(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];if(!tt.length)return identity$1;var it=tt.reverse(),st=it[0],ut=it.slice(1);return function(){return ut.reduce(function(ht,at){return at(ht)},st.apply(void 0,arguments))}},reverse=function _e(et){return Array.isArray(et)?et.reverse():et.split("").reverse.join("")},memoize=function _e(et){var tt=null,rt=null;return function(){for(var it=arguments.length,st=new Array(it),ut=0;ut<it;ut++)st[ut]=arguments[ut];return tt&&st.every(function(ht,at){return ht===tt[at]})||(tt=st,rt=et.apply(void 0,st)),rt}};function getDigitCount(_e){var et;return _e===0?et=1:et=Math.floor(new Decimal$1(_e).abs().log(10).toNumber())+1,et}function rangeStep(_e,et,tt){for(var rt=new Decimal$1(_e),it=0,st=[];rt.lt(et)&&it<1e5;)st.push(rt.toNumber()),rt=rt.add(tt),it++;return st}var interpolateNumber=curry(function(_e,et,tt){var rt=+_e,it=+et;return rt+tt*(it-rt)}),uninterpolateNumber=curry(function(_e,et,tt){var rt=et-+_e;return rt=rt||1/0,(tt-_e)/rt}),uninterpolateTruncation=curry(function(_e,et,tt){var rt=et-+_e;return rt=rt||1/0,Math.max(0,Math.min(1,(tt-_e)/rt))});const Arithmetic={rangeStep,getDigitCount,interpolateNumber,uninterpolateNumber,uninterpolateTruncation};function _toConsumableArray$a(_e){return _arrayWithoutHoles$a(_e)||_iterableToArray$b(_e)||_unsupportedIterableToArray$h(_e)||_nonIterableSpread$a()}function _nonIterableSpread$a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$b(_e){if(typeof Symbol<"u"&&Symbol.iterator in Object(_e))return Array.from(_e)}function _arrayWithoutHoles$a(_e){if(Array.isArray(_e))return _arrayLikeToArray$h(_e)}function _slicedToArray$9(_e,et){return _arrayWithHoles$a(_e)||_iterableToArrayLimit$9(_e,et)||_unsupportedIterableToArray$h(_e,et)||_nonIterableRest$a()}function _nonIterableRest$a(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$h(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$h(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$h(_e,et)}}function _arrayLikeToArray$h(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$9(_e,et){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(_e)))){var tt=[],rt=!0,it=!1,st=void 0;try{for(var ut=_e[Symbol.iterator](),ht;!(rt=(ht=ut.next()).done)&&(tt.push(ht.value),!(et&&tt.length===et));rt=!0);}catch(at){it=!0,st=at}finally{try{!rt&&ut.return!=null&&ut.return()}finally{if(it)throw st}}return tt}}function _arrayWithHoles$a(_e){if(Array.isArray(_e))return _e}function getValidInterval(_e){var et=_slicedToArray$9(_e,2),tt=et[0],rt=et[1],it=tt,st=rt;return tt>rt&&(it=rt,st=tt),[it,st]}function getFormatStep(_e,et,tt){if(_e.lte(0))return new Decimal$1(0);var rt=Arithmetic.getDigitCount(_e.toNumber()),it=new Decimal$1(10).pow(rt),st=_e.div(it),ut=rt!==1?.05:.1,ht=new Decimal$1(Math.ceil(st.div(ut).toNumber())).add(tt).mul(ut),at=ht.mul(it);return et?at:new Decimal$1(Math.ceil(at))}function getTickOfSingleValue(_e,et,tt){var rt=1,it=new Decimal$1(_e);if(!it.isint()&&tt){var st=Math.abs(_e);st<1?(rt=new Decimal$1(10).pow(Arithmetic.getDigitCount(_e)-1),it=new Decimal$1(Math.floor(it.div(rt).toNumber())).mul(rt)):st>1&&(it=new Decimal$1(Math.floor(_e)))}else _e===0?it=new Decimal$1(Math.floor((et-1)/2)):tt||(it=new Decimal$1(Math.floor(_e)));var ut=Math.floor((et-1)/2),ht=compose(map(function(at){return it.add(new Decimal$1(at-ut).mul(rt)).toNumber()}),range$3);return ht(0,et)}function calculateStep(_e,et,tt,rt){var it=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((et-_e)/(tt-1)))return{step:new Decimal$1(0),tickMin:new Decimal$1(0),tickMax:new Decimal$1(0)};var st=getFormatStep(new Decimal$1(et).sub(_e).div(tt-1),rt,it),ut;_e<=0&&et>=0?ut=new Decimal$1(0):(ut=new Decimal$1(_e).add(et).div(2),ut=ut.sub(new Decimal$1(ut).mod(st)));var ht=Math.ceil(ut.sub(_e).div(st).toNumber()),at=Math.ceil(new Decimal$1(et).sub(ut).div(st).toNumber()),gt=ht+at+1;return gt>tt?calculateStep(_e,et,tt,rt,it+1):(gt<tt&&(at=et>0?at+(tt-gt):at,ht=et>0?ht:ht+(tt-gt)),{step:st,tickMin:ut.sub(new Decimal$1(ht).mul(st)),tickMax:ut.add(new Decimal$1(at).mul(st))})}function getNiceTickValuesFn(_e){var et=_slicedToArray$9(_e,2),tt=et[0],rt=et[1],it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ut=Math.max(it,2),ht=getValidInterval([tt,rt]),at=_slicedToArray$9(ht,2),gt=at[0],bt=at[1];if(gt===-1/0||bt===1/0){var wt=bt===1/0?[gt].concat(_toConsumableArray$a(range$3(0,it-1).map(function(){return 1/0}))):[].concat(_toConsumableArray$a(range$3(0,it-1).map(function(){return-1/0})),[bt]);return tt>rt?reverse(wt):wt}if(gt===bt)return getTickOfSingleValue(gt,it,st);var St=calculateStep(gt,bt,ut,st),kt=St.step,Rt=St.tickMin,It=St.tickMax,Dt=Arithmetic.rangeStep(Rt,It.add(new Decimal$1(.1).mul(kt)),kt);return tt>rt?reverse(Dt):Dt}function getTickValuesFixedDomainFn(_e,et){var tt=_slicedToArray$9(_e,2),rt=tt[0],it=tt[1],st=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,ut=getValidInterval([rt,it]),ht=_slicedToArray$9(ut,2),at=ht[0],gt=ht[1];if(at===-1/0||gt===1/0)return[rt,it];if(at===gt)return[at];var bt=Math.max(et,2),wt=getFormatStep(new Decimal$1(gt).sub(at).div(bt-1),st,0),St=[].concat(_toConsumableArray$a(Arithmetic.rangeStep(new Decimal$1(at),new Decimal$1(gt).sub(new Decimal$1(.99).mul(wt)),wt)),[gt]);return rt>it?reverse(St):St}var getNiceTickValues=memoize(getNiceTickValuesFn),getTickValuesFixedDomain=memoize(getTickValuesFixedDomainFn),prefix="Invariant failed";function invariant(_e,et){throw new Error(prefix)}var _excluded$e=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$q.apply(this,arguments)}function _slicedToArray$8(_e,et){return _arrayWithHoles$9(_e)||_iterableToArrayLimit$8(_e,et)||_unsupportedIterableToArray$g(_e,et)||_nonIterableRest$9()}function _nonIterableRest$9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$g(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$g(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$g(_e,et)}}function _arrayLikeToArray$g(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$8(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$9(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$f(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$f(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$f(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function ErrorBar(_e){var et=_e.offset,tt=_e.layout,rt=_e.width,it=_e.dataKey,st=_e.data,ut=_e.dataPointFormatter,ht=_e.xAxis,at=_e.yAxis,gt=_objectWithoutProperties$f(_e,_excluded$e),bt=filterProps(gt,!1);_e.direction==="x"&&ht.type!=="number"&&invariant();var wt=st.map(function(St){var kt=ut(St,it),Rt=kt.x,It=kt.y,Dt=kt.value,Mt=kt.errorVal;if(!Mt)return null;var $t=[],jt,Nt;if(Array.isArray(Mt)){var Ut=_slicedToArray$8(Mt,2);jt=Ut[0],Nt=Ut[1]}else jt=Nt=Mt;if(tt==="vertical"){var Ht=ht.scale,Kt=It+et,tr=Kt+rt,mr=Kt-rt,vr=Ht(Dt-jt),wr=Ht(Dt+Nt);$t.push({x1:wr,y1:tr,x2:wr,y2:mr}),$t.push({x1:vr,y1:Kt,x2:wr,y2:Kt}),$t.push({x1:vr,y1:tr,x2:vr,y2:mr})}else if(tt==="horizontal"){var yr=at.scale,Or=Rt+et,Nr=Or-rt,Lr=Or+rt,ar=yr(Dt-jt),hr=yr(Dt+Nt);$t.push({x1:Nr,y1:hr,x2:Lr,y2:hr}),$t.push({x1:Or,y1:ar,x2:Or,y2:hr}),$t.push({x1:Nr,y1:ar,x2:Lr,y2:ar})}return React$1.createElement(Layer$2,_extends$q({className:"recharts-errorBar",key:"bar-".concat($t.map(function(Qt){return"".concat(Qt.x1,"-").concat(Qt.x2,"-").concat(Qt.y1,"-").concat(Qt.y2)}))},bt),$t.map(function(Qt){return React$1.createElement("line",_extends$q({},Qt,{key:"line-".concat(Qt.x1,"-").concat(Qt.x2,"-").concat(Qt.y1,"-").concat(Qt.y2)}))}))});return React$1.createElement(Layer$2,{className:"recharts-errorBars"},wt)}ErrorBar.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};ErrorBar.displayName="ErrorBar";function _typeof$y(_e){"@babel/helpers - typeof";return _typeof$y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$y(_e)}function ownKeys$w(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$v(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$w(Object(tt),!0).forEach(function(rt){_defineProperty$x(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$w(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$x(_e,et,tt){return et=_toPropertyKey$w(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$w(_e){var et=_toPrimitive$w(_e,"string");return _typeof$y(et)=="symbol"?et:String(et)}function _toPrimitive$w(_e,et){if(_typeof$y(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$y(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getLegendProps=function _e(et){var tt=et.children,rt=et.formattedGraphicalItems,it=et.legendWidth,st=et.legendContent,ut=findChildByType(tt,Legend);if(!ut)return null;var ht;return ut.props&&ut.props.payload?ht=ut.props&&ut.props.payload:st==="children"?ht=(rt||[]).reduce(function(at,gt){var bt=gt.item,wt=gt.props,St=wt.sectors||wt.data||[];return at.concat(St.map(function(kt){return{type:ut.props.iconType||bt.props.legendType,value:kt.name,color:kt.fill,payload:kt}}))},[]):ht=(rt||[]).map(function(at){var gt=at.item,bt=gt.props,wt=bt.dataKey,St=bt.name,kt=bt.legendType,Rt=bt.hide;return{inactive:Rt,dataKey:wt,type:ut.props.iconType||kt||"square",color:getMainColorOfGraphicItem(gt),value:St||wt,payload:gt.props}}),_objectSpread$v(_objectSpread$v(_objectSpread$v({},ut.props),Legend.getWithHeight(ut,it)),{},{payload:ht,item:ut})};function _typeof$x(_e){"@babel/helpers - typeof";return _typeof$x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$x(_e)}function ownKeys$v(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$u(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$v(Object(tt),!0).forEach(function(rt){_defineProperty$w(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$v(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$w(_e,et,tt){return et=_toPropertyKey$v(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$v(_e){var et=_toPrimitive$v(_e,"string");return _typeof$x(et)=="symbol"?et:String(et)}function _toPrimitive$v(_e,et){if(_typeof$x(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$x(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _toConsumableArray$9(_e){return _arrayWithoutHoles$9(_e)||_iterableToArray$a(_e)||_unsupportedIterableToArray$f(_e)||_nonIterableSpread$9()}function _nonIterableSpread$9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$f(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$f(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$f(_e,et)}}function _iterableToArray$a(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$9(_e){if(Array.isArray(_e))return _arrayLikeToArray$f(_e)}function _arrayLikeToArray$f(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function getValueByDataKey(_e,et,tt){return isNil$1(_e)||isNil$1(et)?tt:isNumOrStr(et)?get$4(_e,et,tt):isFunction$4(et)?et(_e):tt}function getDomainOfDataByKey(_e,et,tt,rt){var it=flatMap$1(_e,function(ht){return getValueByDataKey(ht,et)});if(tt==="number"){var st=it.filter(function(ht){return isNumber$2(ht)||parseFloat(ht)});return st.length?[min$3(st),max$3(st)]:[1/0,-1/0]}var ut=rt?it.filter(function(ht){return!isNil$1(ht)}):it;return ut.map(function(ht){return isNumOrStr(ht)||ht instanceof Date?ht:""})}var calculateActiveTickIndex=function _e(et){var tt,rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],it=arguments.length>2?arguments[2]:void 0,st=arguments.length>3?arguments[3]:void 0,ut=-1,ht=(tt=rt==null?void 0:rt.length)!==null&&tt!==void 0?tt:0;if(ht<=1)return 0;if(st&&st.axisType==="angleAxis"&&Math.abs(Math.abs(st.range[1]-st.range[0])-360)<=1e-6)for(var at=st.range,gt=0;gt<ht;gt++){var bt=gt>0?it[gt-1].coordinate:it[ht-1].coordinate,wt=it[gt].coordinate,St=gt>=ht-1?it[0].coordinate:it[gt+1].coordinate,kt=void 0;if(mathSign$1(wt-bt)!==mathSign$1(St-wt)){var Rt=[];if(mathSign$1(St-wt)===mathSign$1(at[1]-at[0])){kt=St;var It=wt+at[1]-at[0];Rt[0]=Math.min(It,(It+bt)/2),Rt[1]=Math.max(It,(It+bt)/2)}else{kt=bt;var Dt=St+at[1]-at[0];Rt[0]=Math.min(wt,(Dt+wt)/2),Rt[1]=Math.max(wt,(Dt+wt)/2)}var Mt=[Math.min(wt,(kt+wt)/2),Math.max(wt,(kt+wt)/2)];if(et>Mt[0]&&et<=Mt[1]||et>=Rt[0]&&et<=Rt[1]){ut=it[gt].index;break}}else{var $t=Math.min(bt,St),jt=Math.max(bt,St);if(et>($t+wt)/2&&et<=(jt+wt)/2){ut=it[gt].index;break}}}else for(var Nt=0;Nt<ht;Nt++)if(Nt===0&&et<=(rt[Nt].coordinate+rt[Nt+1].coordinate)/2||Nt>0&&Nt<ht-1&&et>(rt[Nt].coordinate+rt[Nt-1].coordinate)/2&&et<=(rt[Nt].coordinate+rt[Nt+1].coordinate)/2||Nt===ht-1&&et>(rt[Nt].coordinate+rt[Nt-1].coordinate)/2){ut=rt[Nt].index;break}return ut},getMainColorOfGraphicItem=function _e(et){var tt=et,rt=tt.type.displayName,it=et.props,st=it.stroke,ut=it.fill,ht;switch(rt){case"Line":ht=st;break;case"Area":case"Radar":ht=st&&st!=="none"?st:ut;break;default:ht=ut;break}return ht},getBarSizeList=function _e(et){var tt=et.barSize,rt=et.totalSize,it=et.stackGroups,st=it===void 0?{}:it;if(!st)return{};for(var ut={},ht=Object.keys(st),at=0,gt=ht.length;at<gt;at++)for(var bt=st[ht[at]].stackGroups,wt=Object.keys(bt),St=0,kt=wt.length;St<kt;St++){var Rt=bt[wt[St]],It=Rt.items,Dt=Rt.cateAxisId,Mt=It.filter(function(Ut){return getDisplayName(Ut.type).indexOf("Bar")>=0});if(Mt&&Mt.length){var $t=Mt[0].props.barSize,jt=Mt[0].props[Dt];ut[jt]||(ut[jt]=[]);var Nt=isNil$1($t)?tt:$t;ut[jt].push({item:Mt[0],stackList:Mt.slice(1),barSize:isNil$1(Nt)?void 0:getPercentValue(Nt,rt,0)})}}return ut},getBarPosition=function _e(et){var tt=et.barGap,rt=et.barCategoryGap,it=et.bandSize,st=et.sizeList,ut=st===void 0?[]:st,ht=et.maxBarSize,at=ut.length;if(at<1)return null;var gt=getPercentValue(tt,it,0,!0),bt,wt=[];if(ut[0].barSize===+ut[0].barSize){var St=!1,kt=it/at,Rt=ut.reduce(function(Nt,Ut){return Nt+Ut.barSize||0},0);Rt+=(at-1)*gt,Rt>=it&&(Rt-=(at-1)*gt,gt=0),Rt>=it&&kt>0&&(St=!0,kt*=.9,Rt=at*kt);var It=(it-Rt)/2>>0,Dt={offset:It-gt,size:0};bt=ut.reduce(function(Nt,Ut){var Ht={item:Ut.item,position:{offset:Dt.offset+Dt.size+gt,size:St?kt:Ut.barSize}},Kt=[].concat(_toConsumableArray$9(Nt),[Ht]);return Dt=Kt[Kt.length-1].position,Ut.stackList&&Ut.stackList.length&&Ut.stackList.forEach(function(tr){Kt.push({item:tr,position:Dt})}),Kt},wt)}else{var Mt=getPercentValue(rt,it,0,!0);it-2*Mt-(at-1)*gt<=0&&(gt=0);var $t=(it-2*Mt-(at-1)*gt)/at;$t>1&&($t>>=0);var jt=ht===+ht?Math.min($t,ht):$t;bt=ut.reduce(function(Nt,Ut,Ht){var Kt=[].concat(_toConsumableArray$9(Nt),[{item:Ut.item,position:{offset:Mt+($t+gt)*Ht+($t-jt)/2,size:jt}}]);return Ut.stackList&&Ut.stackList.length&&Ut.stackList.forEach(function(tr){Kt.push({item:tr,position:Kt[Kt.length-1].position})}),Kt},wt)}return bt},appendOffsetOfLegend=function _e(et,tt,rt,it){var st=rt.children,ut=rt.width,ht=rt.margin,at=ut-(ht.left||0)-(ht.right||0),gt=getLegendProps({children:st,legendWidth:at});if(gt){var bt=it||{},wt=bt.width,St=bt.height,kt=gt.align,Rt=gt.verticalAlign,It=gt.layout;if((It==="vertical"||It==="horizontal"&&Rt==="middle")&&kt!=="center"&&isNumber$2(et[kt]))return _objectSpread$u(_objectSpread$u({},et),{},_defineProperty$w({},kt,et[kt]+(wt||0)));if((It==="horizontal"||It==="vertical"&&kt==="center")&&Rt!=="middle"&&isNumber$2(et[Rt]))return _objectSpread$u(_objectSpread$u({},et),{},_defineProperty$w({},Rt,et[Rt]+(St||0)))}return et},isErrorBarRelevantForAxis=function _e(et,tt,rt){return isNil$1(tt)?!0:et==="horizontal"?tt==="yAxis":et==="vertical"||rt==="x"?tt==="xAxis":rt==="y"?tt==="yAxis":!0},getDomainOfErrorBars=function _e(et,tt,rt,it,st){var ut=tt.props.children,ht=findAllByType(ut,ErrorBar).filter(function(gt){return isErrorBarRelevantForAxis(it,st,gt.props.direction)});if(ht&&ht.length){var at=ht.map(function(gt){return gt.props.dataKey});return et.reduce(function(gt,bt){var wt=getValueByDataKey(bt,rt);if(isNil$1(wt))return gt;var St=Array.isArray(wt)?[min$3(wt),max$3(wt)]:[wt,wt],kt=at.reduce(function(Rt,It){var Dt=getValueByDataKey(bt,It,0),Mt=St[0]-Math.abs(Array.isArray(Dt)?Dt[0]:Dt),$t=St[1]+Math.abs(Array.isArray(Dt)?Dt[1]:Dt);return[Math.min(Mt,Rt[0]),Math.max($t,Rt[1])]},[1/0,-1/0]);return[Math.min(kt[0],gt[0]),Math.max(kt[1],gt[1])]},[1/0,-1/0])}return null},parseErrorBarsOfAxis=function _e(et,tt,rt,it,st){var ut=tt.map(function(ht){return getDomainOfErrorBars(et,ht,rt,st,it)}).filter(function(ht){return!isNil$1(ht)});return ut&&ut.length?ut.reduce(function(ht,at){return[Math.min(ht[0],at[0]),Math.max(ht[1],at[1])]},[1/0,-1/0]):null},getDomainOfItemsWithSameAxis=function _e(et,tt,rt,it,st){var ut=tt.map(function(at){var gt=at.props.dataKey;return rt==="number"&&gt&&getDomainOfErrorBars(et,at,gt,it)||getDomainOfDataByKey(et,gt,rt,st)});if(rt==="number")return ut.reduce(function(at,gt){return[Math.min(at[0],gt[0]),Math.max(at[1],gt[1])]},[1/0,-1/0]);var ht={};return ut.reduce(function(at,gt){for(var bt=0,wt=gt.length;bt<wt;bt++)ht[gt[bt]]||(ht[gt[bt]]=!0,at.push(gt[bt]));return at},[])},isCategoricalAxis=function _e(et,tt){return et==="horizontal"&&tt==="xAxis"||et==="vertical"&&tt==="yAxis"||et==="centric"&&tt==="angleAxis"||et==="radial"&&tt==="radiusAxis"},getCoordinatesOfGrid=function _e(et,tt,rt,it){if(it)return et.map(function(at){return at.coordinate});var st,ut,ht=et.map(function(at){return at.coordinate===tt&&(st=!0),at.coordinate===rt&&(ut=!0),at.coordinate});return st||ht.push(tt),ut||ht.push(rt),ht},getTicksOfAxis=function _e(et,tt,rt){if(!et)return null;var it=et.scale,st=et.duplicateDomain,ut=et.type,ht=et.range,at=et.realScaleType==="scaleBand"?it.bandwidth()/2:2,gt=(tt||rt)&&ut==="category"&&it.bandwidth?it.bandwidth()/at:0;if(gt=et.axisType==="angleAxis"&&(ht==null?void 0:ht.length)>=2?mathSign$1(ht[0]-ht[1])*2*gt:gt,tt&&(et.ticks||et.niceTicks)){var bt=(et.ticks||et.niceTicks).map(function(wt){var St=st?st.indexOf(wt):wt;return{coordinate:it(St)+gt,value:wt,offset:gt}});return bt.filter(function(wt){return!isNan(wt.coordinate)})}return et.isCategorical&&et.categoricalDomain?et.categoricalDomain.map(function(wt,St){return{coordinate:it(wt)+gt,value:wt,index:St,offset:gt}}):it.ticks&&!rt?it.ticks(et.tickCount).map(function(wt){return{coordinate:it(wt)+gt,value:wt,offset:gt}}):it.domain().map(function(wt,St){return{coordinate:it(wt)+gt,value:st?st[wt]:wt,index:St,offset:gt}})},handlerWeakMap=new WeakMap,combineEventHandlers=function _e(et,tt){if(typeof tt!="function")return et;handlerWeakMap.has(et)||handlerWeakMap.set(et,new WeakMap);var rt=handlerWeakMap.get(et);if(rt.has(tt))return rt.get(tt);var it=function(){et.apply(void 0,arguments),tt.apply(void 0,arguments)};return rt.set(tt,it),it},parseScale=function _e(et,tt,rt){var it=et.scale,st=et.type,ut=et.layout,ht=et.axisType;if(it==="auto")return ut==="radial"&&ht==="radiusAxis"?{scale:band(),realScaleType:"band"}:ut==="radial"&&ht==="angleAxis"?{scale:linear(),realScaleType:"linear"}:st==="category"&&tt&&(tt.indexOf("LineChart")>=0||tt.indexOf("AreaChart")>=0||tt.indexOf("ComposedChart")>=0&&!rt)?{scale:point(),realScaleType:"point"}:st==="category"?{scale:band(),realScaleType:"band"}:{scale:linear(),realScaleType:"linear"};if(isString$4(it)){var at="scale".concat(upperFirst$1(it));return{scale:(d3Scales[at]||point)(),realScaleType:d3Scales[at]?at:"point"}}return isFunction$4(it)?{scale:it}:{scale:point(),realScaleType:"point"}},EPS=1e-4,checkDomainOfScale=function _e(et){var tt=et.domain();if(!(!tt||tt.length<=2)){var rt=tt.length,it=et.range(),st=Math.min(it[0],it[1])-EPS,ut=Math.max(it[0],it[1])+EPS,ht=et(tt[0]),at=et(tt[rt-1]);(ht<st||ht>ut||at<st||at>ut)&&et.domain([tt[0],tt[rt-1]])}},findPositionOfBar=function _e(et,tt){if(!et)return null;for(var rt=0,it=et.length;rt<it;rt++)if(et[rt].item===tt)return et[rt].position;return null},truncateByDomain=function _e(et,tt){if(!tt||tt.length!==2||!isNumber$2(tt[0])||!isNumber$2(tt[1]))return et;var rt=Math.min(tt[0],tt[1]),it=Math.max(tt[0],tt[1]),st=[et[0],et[1]];return(!isNumber$2(et[0])||et[0]<rt)&&(st[0]=rt),(!isNumber$2(et[1])||et[1]>it)&&(st[1]=it),st[0]>it&&(st[0]=it),st[1]<rt&&(st[1]=rt),st},offsetSign=function _e(et){var tt=et.length;if(!(tt<=0))for(var rt=0,it=et[0].length;rt<it;++rt)for(var st=0,ut=0,ht=0;ht<tt;++ht){var at=isNan(et[ht][rt][1])?et[ht][rt][0]:et[ht][rt][1];at>=0?(et[ht][rt][0]=st,et[ht][rt][1]=st+at,st=et[ht][rt][1]):(et[ht][rt][0]=ut,et[ht][rt][1]=ut+at,ut=et[ht][rt][1])}},offsetPositive=function _e(et){var tt=et.length;if(!(tt<=0))for(var rt=0,it=et[0].length;rt<it;++rt)for(var st=0,ut=0;ut<tt;++ut){var ht=isNan(et[ut][rt][1])?et[ut][rt][0]:et[ut][rt][1];ht>=0?(et[ut][rt][0]=st,et[ut][rt][1]=st+ht,st=et[ut][rt][1]):(et[ut][rt][0]=0,et[ut][rt][1]=0)}},STACK_OFFSET_MAP={sign:offsetSign,expand:stackOffsetExpand,none:stackOffsetNone,silhouette:stackOffsetSilhouette,wiggle:stackOffsetWiggle,positive:offsetPositive},getStackedData=function _e(et,tt,rt){var it=tt.map(function(ht){return ht.props.dataKey}),st=STACK_OFFSET_MAP[rt],ut=shapeStack().keys(it).value(function(ht,at){return+getValueByDataKey(ht,at,0)}).order(stackOrderNone).offset(st);return ut(et)},getStackGroupsByAxisId=function _e(et,tt,rt,it,st,ut){if(!et)return null;var ht=ut?tt.reverse():tt,at={},gt=ht.reduce(function(wt,St){var kt=St.props,Rt=kt.stackId,It=kt.hide;if(It)return wt;var Dt=St.props[rt],Mt=wt[Dt]||{hasStack:!1,stackGroups:{}};if(isNumOrStr(Rt)){var $t=Mt.stackGroups[Rt]||{numericAxisId:rt,cateAxisId:it,items:[]};$t.items.push(St),Mt.hasStack=!0,Mt.stackGroups[Rt]=$t}else Mt.stackGroups[uniqueId("_stackId_")]={numericAxisId:rt,cateAxisId:it,items:[St]};return _objectSpread$u(_objectSpread$u({},wt),{},_defineProperty$w({},Dt,Mt))},at),bt={};return Object.keys(gt).reduce(function(wt,St){var kt=gt[St];if(kt.hasStack){var Rt={};kt.stackGroups=Object.keys(kt.stackGroups).reduce(function(It,Dt){var Mt=kt.stackGroups[Dt];return _objectSpread$u(_objectSpread$u({},It),{},_defineProperty$w({},Dt,{numericAxisId:rt,cateAxisId:it,items:Mt.items,stackedData:getStackedData(et,Mt.items,st)}))},Rt)}return _objectSpread$u(_objectSpread$u({},wt),{},_defineProperty$w({},St,kt))},bt)},getTicksOfScale=function _e(et,tt){var rt=tt.realScaleType,it=tt.type,st=tt.tickCount,ut=tt.originalDomain,ht=tt.allowDecimals,at=rt||tt.scale;if(at!=="auto"&&at!=="linear")return null;if(st&&it==="number"&&ut&&(ut[0]==="auto"||ut[1]==="auto")){var gt=et.domain();if(!gt.length)return null;var bt=getNiceTickValues(gt,st,ht);return et.domain([min$3(bt),max$3(bt)]),{niceTicks:bt}}if(st&&it==="number"){var wt=et.domain(),St=getTickValuesFixedDomain(wt,st,ht);return{niceTicks:St}}return null};function getCateCoordinateOfLine(_e){var et=_e.axis,tt=_e.ticks,rt=_e.bandSize,it=_e.entry,st=_e.index,ut=_e.dataKey;if(et.type==="category"){if(!et.allowDuplicatedCategory&&et.dataKey&&!isNil$1(it[et.dataKey])){var ht=findEntryInArray(tt,"value",it[et.dataKey]);if(ht)return ht.coordinate+rt/2}return tt[st]?tt[st].coordinate+rt/2:null}var at=getValueByDataKey(it,isNil$1(ut)?et.dataKey:ut);return isNil$1(at)?null:et.scale(at)}var getCateCoordinateOfBar=function _e(et){var tt=et.axis,rt=et.ticks,it=et.offset,st=et.bandSize,ut=et.entry,ht=et.index;if(tt.type==="category")return rt[ht]?rt[ht].coordinate+it:null;var at=getValueByDataKey(ut,tt.dataKey,tt.domain[ht]);return isNil$1(at)?null:tt.scale(at)-st/2+it},getBaseValueOfBar=function _e(et){var tt=et.numericAxis,rt=tt.scale.domain();if(tt.type==="number"){var it=Math.min(rt[0],rt[1]),st=Math.max(rt[0],rt[1]);return it<=0&&st>=0?0:st<0?st:it}return rt[0]},getStackedDataOfItem=function _e(et,tt){var rt=et.props.stackId;if(isNumOrStr(rt)){var it=tt[rt];if(it){var st=it.items.indexOf(et);return st>=0?it.stackedData[st]:null}}return null},getDomainOfSingle=function _e(et){return et.reduce(function(tt,rt){return[min$3(rt.concat([tt[0]]).filter(isNumber$2)),max$3(rt.concat([tt[1]]).filter(isNumber$2))]},[1/0,-1/0])},getDomainOfStackGroups=function _e(et,tt,rt){return Object.keys(et).reduce(function(it,st){var ut=et[st],ht=ut.stackedData,at=ht.reduce(function(gt,bt){var wt=getDomainOfSingle(bt.slice(tt,rt+1));return[Math.min(gt[0],wt[0]),Math.max(gt[1],wt[1])]},[1/0,-1/0]);return[Math.min(at[0],it[0]),Math.max(at[1],it[1])]},[1/0,-1/0]).map(function(it){return it===1/0||it===-1/0?0:it})},MIN_VALUE_REG=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,MAX_VALUE_REG=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,parseSpecifiedDomain=function _e(et,tt,rt){if(isFunction$4(et))return et(tt,rt);if(!Array.isArray(et))return tt;var it=[];if(isNumber$2(et[0]))it[0]=rt?et[0]:Math.min(et[0],tt[0]);else if(MIN_VALUE_REG.test(et[0])){var st=+MIN_VALUE_REG.exec(et[0])[1];it[0]=tt[0]-st}else isFunction$4(et[0])?it[0]=et[0](tt[0]):it[0]=tt[0];if(isNumber$2(et[1]))it[1]=rt?et[1]:Math.max(et[1],tt[1]);else if(MAX_VALUE_REG.test(et[1])){var ut=+MAX_VALUE_REG.exec(et[1])[1];it[1]=tt[1]+ut}else isFunction$4(et[1])?it[1]=et[1](tt[1]):it[1]=tt[1];return it},getBandSizeOfAxis=function _e(et,tt,rt){if(et&&et.scale&&et.scale.bandwidth){var it=et.scale.bandwidth();if(!rt||it>0)return it}if(et&&tt&&tt.length>=2){for(var st=sortBy$1(tt,function(wt){return wt.coordinate}),ut=1/0,ht=1,at=st.length;ht<at;ht++){var gt=st[ht],bt=st[ht-1];ut=Math.min((gt.coordinate||0)-(bt.coordinate||0),ut)}return ut===1/0?0:ut}return rt?void 0:0},parseDomainOfCategoryAxis=function _e(et,tt,rt){return!et||!et.length||isEqual$1(et,get$4(rt,"type.defaultProps.domain"))?tt:et},getTooltipItem=function _e(et,tt){var rt=et.props,it=rt.dataKey,st=rt.name,ut=rt.unit,ht=rt.formatter,at=rt.tooltipType,gt=rt.chartType,bt=rt.hide;return _objectSpread$u(_objectSpread$u({},filterProps(et,!1)),{},{dataKey:it,unit:ut,formatter:ht,name:st||it,color:getMainColorOfGraphicItem(et),value:getValueByDataKey(tt,it),type:at,payload:tt,chartType:gt,hide:bt})};function _typeof$w(_e){"@babel/helpers - typeof";return _typeof$w=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$w(_e)}function ownKeys$u(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$t(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$u(Object(tt),!0).forEach(function(rt){_defineProperty$v(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$u(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$v(_e,et,tt){return et=_toPropertyKey$u(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$u(_e){var et=_toPrimitive$u(_e,"string");return _typeof$w(et)=="symbol"?et:String(et)}function _toPrimitive$u(_e,et){if(_typeof$w(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$w(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _slicedToArray$7(_e,et){return _arrayWithHoles$8(_e)||_iterableToArrayLimit$7(_e,et)||_unsupportedIterableToArray$e(_e,et)||_nonIterableRest$8()}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$e(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$e(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$e(_e,et)}}function _arrayLikeToArray$e(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$7(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$8(_e){if(Array.isArray(_e))return _e}var RADIAN$1=Math.PI/180,radianToDegree=function _e(et){return et*180/Math.PI},polarToCartesian=function _e(et,tt,rt,it){return{x:et+Math.cos(-RADIAN$1*it)*rt,y:tt+Math.sin(-RADIAN$1*it)*rt}},getMaxRadius=function _e(et,tt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(et-(rt.left||0)-(rt.right||0)),Math.abs(tt-(rt.top||0)-(rt.bottom||0)))/2},formatAxisMap$1=function _e(et,tt,rt,it,st){var ut=et.width,ht=et.height,at=et.startAngle,gt=et.endAngle,bt=getPercentValue(et.cx,ut,ut/2),wt=getPercentValue(et.cy,ht,ht/2),St=getMaxRadius(ut,ht,rt),kt=getPercentValue(et.innerRadius,St,0),Rt=getPercentValue(et.outerRadius,St,St*.8),It=Object.keys(tt);return It.reduce(function(Dt,Mt){var $t=tt[Mt],jt=$t.domain,Nt=$t.reversed,Ut;if(isNil$1($t.range))it==="angleAxis"?Ut=[at,gt]:it==="radiusAxis"&&(Ut=[kt,Rt]),Nt&&(Ut=[Ut[1],Ut[0]]);else{Ut=$t.range;var Ht=Ut,Kt=_slicedToArray$7(Ht,2);at=Kt[0],gt=Kt[1]}var tr=parseScale($t,st),mr=tr.realScaleType,vr=tr.scale;vr.domain(jt).range(Ut),checkDomainOfScale(vr);var wr=getTicksOfScale(vr,_objectSpread$t(_objectSpread$t({},$t),{},{realScaleType:mr})),yr=_objectSpread$t(_objectSpread$t(_objectSpread$t({},$t),wr),{},{range:Ut,radius:Rt,realScaleType:mr,scale:vr,cx:bt,cy:wt,innerRadius:kt,outerRadius:Rt,startAngle:at,endAngle:gt});return _objectSpread$t(_objectSpread$t({},Dt),{},_defineProperty$v({},Mt,yr))},{})},distanceBetweenPoints=function _e(et,tt){var rt=et.x,it=et.y,st=tt.x,ut=tt.y;return Math.sqrt(Math.pow(rt-st,2)+Math.pow(it-ut,2))},getAngleOfPoint=function _e(et,tt){var rt=et.x,it=et.y,st=tt.cx,ut=tt.cy,ht=distanceBetweenPoints({x:rt,y:it},{x:st,y:ut});if(ht<=0)return{radius:ht};var at=(rt-st)/ht,gt=Math.acos(at);return it>ut&&(gt=2*Math.PI-gt),{radius:ht,angle:radianToDegree(gt),angleInRadian:gt}},formatAngleOfSector=function _e(et){var tt=et.startAngle,rt=et.endAngle,it=Math.floor(tt/360),st=Math.floor(rt/360),ut=Math.min(it,st);return{startAngle:tt-ut*360,endAngle:rt-ut*360}},reverseFormatAngleOfSetor=function _e(et,tt){var rt=tt.startAngle,it=tt.endAngle,st=Math.floor(rt/360),ut=Math.floor(it/360),ht=Math.min(st,ut);return et+ht*360},inRangeOfSector=function _e(et,tt){var rt=et.x,it=et.y,st=getAngleOfPoint({x:rt,y:it},tt),ut=st.radius,ht=st.angle,at=tt.innerRadius,gt=tt.outerRadius;if(ut<at||ut>gt)return!1;if(ut===0)return!0;var bt=formatAngleOfSector(tt),wt=bt.startAngle,St=bt.endAngle,kt=ht,Rt;if(wt<=St){for(;kt>St;)kt-=360;for(;kt<wt;)kt+=360;Rt=kt>=wt&&kt<=St}else{for(;kt>wt;)kt-=360;for(;kt<St;)kt+=360;Rt=kt>=St&&kt<=wt}return Rt?_objectSpread$t(_objectSpread$t({},tt),{},{radius:ut,angle:reverseFormatAngleOfSetor(kt,tt)}):null},getTickClassName=function _e(et){return!reactExports.isValidElement(et)&&!isFunction$4(et)&&typeof et!="boolean"?et.className:""};function _typeof$v(_e){"@babel/helpers - typeof";return _typeof$v=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$v(_e)}var _excluded$d=["offset"];function _toConsumableArray$8(_e){return _arrayWithoutHoles$8(_e)||_iterableToArray$9(_e)||_unsupportedIterableToArray$d(_e)||_nonIterableSpread$8()}function _nonIterableSpread$8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$d(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$d(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$d(_e,et)}}function _iterableToArray$9(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$8(_e){if(Array.isArray(_e))return _arrayLikeToArray$d(_e)}function _arrayLikeToArray$d(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _objectWithoutProperties$e(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$e(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$e(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function ownKeys$t(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$s(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$t(Object(tt),!0).forEach(function(rt){_defineProperty$u(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$t(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$u(_e,et,tt){return et=_toPropertyKey$t(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$t(_e){var et=_toPrimitive$t(_e,"string");return _typeof$v(et)=="symbol"?et:String(et)}function _toPrimitive$t(_e,et){if(_typeof$v(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$v(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$p.apply(this,arguments)}var getLabel=function _e(et){var tt=et.value,rt=et.formatter,it=isNil$1(et.children)?tt:et.children;return isFunction$4(rt)?rt(it):it},getDeltaAngle$1=function _e(et,tt){var rt=mathSign$1(tt-et),it=Math.min(Math.abs(tt-et),360);return rt*it},renderRadialLabel=function _e(et,tt,rt){var it=et.position,st=et.viewBox,ut=et.offset,ht=et.className,at=st,gt=at.cx,bt=at.cy,wt=at.innerRadius,St=at.outerRadius,kt=at.startAngle,Rt=at.endAngle,It=at.clockWise,Dt=(wt+St)/2,Mt=getDeltaAngle$1(kt,Rt),$t=Mt>=0?1:-1,jt,Nt;it==="insideStart"?(jt=kt+$t*ut,Nt=It):it==="insideEnd"?(jt=Rt-$t*ut,Nt=!It):it==="end"&&(jt=Rt+$t*ut,Nt=It),Nt=Mt<=0?Nt:!Nt;var Ut=polarToCartesian(gt,bt,Dt,jt),Ht=polarToCartesian(gt,bt,Dt,jt+(Nt?1:-1)*359),Kt="M".concat(Ut.x,",").concat(Ut.y,`
    A`).concat(Dt,",").concat(Dt,",0,1,").concat(Nt?0:1,`,
    `).concat(Ht.x,",").concat(Ht.y),tr=isNil$1(et.id)?uniqueId("recharts-radial-line-"):et.id;return React$1.createElement("text",_extends$p({},rt,{dominantBaseline:"central",className:clsx$1("recharts-radial-bar-label",ht)}),React$1.createElement("defs",null,React$1.createElement("path",{id:tr,d:Kt})),React$1.createElement("textPath",{xlinkHref:"#".concat(tr)},tt))},getAttrsOfPolarLabel=function _e(et){var tt=et.viewBox,rt=et.offset,it=et.position,st=tt,ut=st.cx,ht=st.cy,at=st.innerRadius,gt=st.outerRadius,bt=st.startAngle,wt=st.endAngle,St=(bt+wt)/2;if(it==="outside"){var kt=polarToCartesian(ut,ht,gt+rt,St),Rt=kt.x,It=kt.y;return{x:Rt,y:It,textAnchor:Rt>=ut?"start":"end",verticalAnchor:"middle"}}if(it==="center")return{x:ut,y:ht,textAnchor:"middle",verticalAnchor:"middle"};if(it==="centerTop")return{x:ut,y:ht,textAnchor:"middle",verticalAnchor:"start"};if(it==="centerBottom")return{x:ut,y:ht,textAnchor:"middle",verticalAnchor:"end"};var Dt=(at+gt)/2,Mt=polarToCartesian(ut,ht,Dt,St),$t=Mt.x,jt=Mt.y;return{x:$t,y:jt,textAnchor:"middle",verticalAnchor:"middle"}},getAttrsOfCartesianLabel=function _e(et){var tt=et.viewBox,rt=et.parentViewBox,it=et.offset,st=et.position,ut=tt,ht=ut.x,at=ut.y,gt=ut.width,bt=ut.height,wt=bt>=0?1:-1,St=wt*it,kt=wt>0?"end":"start",Rt=wt>0?"start":"end",It=gt>=0?1:-1,Dt=It*it,Mt=It>0?"end":"start",$t=It>0?"start":"end";if(st==="top"){var jt={x:ht+gt/2,y:at-wt*it,textAnchor:"middle",verticalAnchor:kt};return _objectSpread$s(_objectSpread$s({},jt),rt?{height:Math.max(at-rt.y,0),width:gt}:{})}if(st==="bottom"){var Nt={x:ht+gt/2,y:at+bt+St,textAnchor:"middle",verticalAnchor:Rt};return _objectSpread$s(_objectSpread$s({},Nt),rt?{height:Math.max(rt.y+rt.height-(at+bt),0),width:gt}:{})}if(st==="left"){var Ut={x:ht-Dt,y:at+bt/2,textAnchor:Mt,verticalAnchor:"middle"};return _objectSpread$s(_objectSpread$s({},Ut),rt?{width:Math.max(Ut.x-rt.x,0),height:bt}:{})}if(st==="right"){var Ht={x:ht+gt+Dt,y:at+bt/2,textAnchor:$t,verticalAnchor:"middle"};return _objectSpread$s(_objectSpread$s({},Ht),rt?{width:Math.max(rt.x+rt.width-Ht.x,0),height:bt}:{})}var Kt=rt?{width:gt,height:bt}:{};return st==="insideLeft"?_objectSpread$s({x:ht+Dt,y:at+bt/2,textAnchor:$t,verticalAnchor:"middle"},Kt):st==="insideRight"?_objectSpread$s({x:ht+gt-Dt,y:at+bt/2,textAnchor:Mt,verticalAnchor:"middle"},Kt):st==="insideTop"?_objectSpread$s({x:ht+gt/2,y:at+St,textAnchor:"middle",verticalAnchor:Rt},Kt):st==="insideBottom"?_objectSpread$s({x:ht+gt/2,y:at+bt-St,textAnchor:"middle",verticalAnchor:kt},Kt):st==="insideTopLeft"?_objectSpread$s({x:ht+Dt,y:at+St,textAnchor:$t,verticalAnchor:Rt},Kt):st==="insideTopRight"?_objectSpread$s({x:ht+gt-Dt,y:at+St,textAnchor:Mt,verticalAnchor:Rt},Kt):st==="insideBottomLeft"?_objectSpread$s({x:ht+Dt,y:at+bt-St,textAnchor:$t,verticalAnchor:kt},Kt):st==="insideBottomRight"?_objectSpread$s({x:ht+gt-Dt,y:at+bt-St,textAnchor:Mt,verticalAnchor:kt},Kt):isObject$c(st)&&(isNumber$2(st.x)||isPercent$1(st.x))&&(isNumber$2(st.y)||isPercent$1(st.y))?_objectSpread$s({x:ht+getPercentValue(st.x,gt),y:at+getPercentValue(st.y,bt),textAnchor:"end",verticalAnchor:"end"},Kt):_objectSpread$s({x:ht+gt/2,y:at+bt/2,textAnchor:"middle",verticalAnchor:"middle"},Kt)},isPolar=function _e(et){return"cx"in et&&isNumber$2(et.cx)};function Label$4(_e){var et=_e.offset,tt=et===void 0?5:et,rt=_objectWithoutProperties$e(_e,_excluded$d),it=_objectSpread$s({offset:tt},rt),st=it.viewBox,ut=it.position,ht=it.value,at=it.children,gt=it.content,bt=it.className,wt=bt===void 0?"":bt,St=it.textBreakAll;if(!st||isNil$1(ht)&&isNil$1(at)&&!reactExports.isValidElement(gt)&&!isFunction$4(gt))return null;if(reactExports.isValidElement(gt))return reactExports.cloneElement(gt,it);var kt;if(isFunction$4(gt)){if(kt=reactExports.createElement(gt,it),reactExports.isValidElement(kt))return kt}else kt=getLabel(it);var Rt=isPolar(st),It=filterProps(it,!0);if(Rt&&(ut==="insideStart"||ut==="insideEnd"||ut==="end"))return renderRadialLabel(it,kt,It);var Dt=Rt?getAttrsOfPolarLabel(it):getAttrsOfCartesianLabel(it);return React$1.createElement(Text,_extends$p({className:clsx$1("recharts-label",wt)},It,Dt,{breakAll:St}),kt)}Label$4.displayName="Label";var parseViewBox=function _e(et){var tt=et.cx,rt=et.cy,it=et.angle,st=et.startAngle,ut=et.endAngle,ht=et.r,at=et.radius,gt=et.innerRadius,bt=et.outerRadius,wt=et.x,St=et.y,kt=et.top,Rt=et.left,It=et.width,Dt=et.height,Mt=et.clockWise,$t=et.labelViewBox;if($t)return $t;if(isNumber$2(It)&&isNumber$2(Dt)){if(isNumber$2(wt)&&isNumber$2(St))return{x:wt,y:St,width:It,height:Dt};if(isNumber$2(kt)&&isNumber$2(Rt))return{x:kt,y:Rt,width:It,height:Dt}}return isNumber$2(wt)&&isNumber$2(St)?{x:wt,y:St,width:0,height:0}:isNumber$2(tt)&&isNumber$2(rt)?{cx:tt,cy:rt,startAngle:st||it||0,endAngle:ut||it||0,innerRadius:gt||0,outerRadius:bt||at||ht||0,clockWise:Mt}:et.viewBox?et.viewBox:{}},parseLabel=function _e(et,tt){return et?et===!0?React$1.createElement(Label$4,{key:"label-implicit",viewBox:tt}):isNumOrStr(et)?React$1.createElement(Label$4,{key:"label-implicit",viewBox:tt,value:et}):reactExports.isValidElement(et)?et.type===Label$4?reactExports.cloneElement(et,{key:"label-implicit",viewBox:tt}):React$1.createElement(Label$4,{key:"label-implicit",content:et,viewBox:tt}):isFunction$4(et)?React$1.createElement(Label$4,{key:"label-implicit",content:et,viewBox:tt}):isObject$c(et)?React$1.createElement(Label$4,_extends$p({viewBox:tt},et,{key:"label-implicit"})):null:null},renderCallByParent$1=function _e(et,tt){var rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!et||!et.children&&rt&&!et.label)return null;var it=et.children,st=parseViewBox(et),ut=findAllByType(it,Label$4).map(function(at,gt){return reactExports.cloneElement(at,{viewBox:tt||st,key:"label-".concat(gt)})});if(!rt)return ut;var ht=parseLabel(et.label,tt||st);return[ht].concat(_toConsumableArray$8(ut))};Label$4.parseViewBox=parseViewBox;Label$4.renderCallByParent=renderCallByParent$1;function last(_e){var et=_e==null?0:_e.length;return et?_e[et-1]:void 0}var last_1=last;const last$1=getDefaultExportFromCjs(last_1);function _typeof$u(_e){"@babel/helpers - typeof";return _typeof$u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$u(_e)}var _excluded$c=["valueAccessor"],_excluded2$4=["data","dataKey","clockWise","id","textBreakAll"];function _toConsumableArray$7(_e){return _arrayWithoutHoles$7(_e)||_iterableToArray$8(_e)||_unsupportedIterableToArray$c(_e)||_nonIterableSpread$7()}function _nonIterableSpread$7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$c(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$c(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$c(_e,et)}}function _iterableToArray$8(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$7(_e){if(Array.isArray(_e))return _arrayLikeToArray$c(_e)}function _arrayLikeToArray$c(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$o.apply(this,arguments)}function ownKeys$s(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$r(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$s(Object(tt),!0).forEach(function(rt){_defineProperty$t(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$s(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$t(_e,et,tt){return et=_toPropertyKey$s(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$s(_e){var et=_toPrimitive$s(_e,"string");return _typeof$u(et)=="symbol"?et:String(et)}function _toPrimitive$s(_e,et){if(_typeof$u(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$u(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _objectWithoutProperties$d(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$d(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$d(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}var defaultAccessor=function _e(et){return Array.isArray(et.value)?last$1(et.value):et.value};function LabelList(_e){var et=_e.valueAccessor,tt=et===void 0?defaultAccessor:et,rt=_objectWithoutProperties$d(_e,_excluded$c),it=rt.data,st=rt.dataKey,ut=rt.clockWise,ht=rt.id,at=rt.textBreakAll,gt=_objectWithoutProperties$d(rt,_excluded2$4);return!it||!it.length?null:React$1.createElement(Layer$2,{className:"recharts-label-list"},it.map(function(bt,wt){var St=isNil$1(st)?tt(bt,wt):getValueByDataKey(bt&&bt.payload,st),kt=isNil$1(ht)?{}:{id:"".concat(ht,"-").concat(wt)};return React$1.createElement(Label$4,_extends$o({},filterProps(bt,!0),gt,kt,{parentViewBox:bt.parentViewBox,value:St,textBreakAll:at,viewBox:Label$4.parseViewBox(isNil$1(ut)?bt:_objectSpread$r(_objectSpread$r({},bt),{},{clockWise:ut})),key:"label-".concat(wt),index:wt}))}))}LabelList.displayName="LabelList";function parseLabelList(_e,et){return _e?_e===!0?React$1.createElement(LabelList,{key:"labelList-implicit",data:et}):React$1.isValidElement(_e)||isFunction$4(_e)?React$1.createElement(LabelList,{key:"labelList-implicit",data:et,content:_e}):isObject$c(_e)?React$1.createElement(LabelList,_extends$o({data:et},_e,{key:"labelList-implicit"})):null:null}function renderCallByParent(_e,et){var tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!_e||!_e.children&&tt&&!_e.label)return null;var rt=_e.children,it=findAllByType(rt,LabelList).map(function(ut,ht){return reactExports.cloneElement(ut,{data:et,key:"labelList-".concat(ht)})});if(!tt)return it;var st=parseLabelList(_e.label,et);return[st].concat(_toConsumableArray$7(it))}LabelList.renderCallByParent=renderCallByParent;function _typeof$t(_e){"@babel/helpers - typeof";return _typeof$t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$t(_e)}function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$n.apply(this,arguments)}function ownKeys$r(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$q(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$r(Object(tt),!0).forEach(function(rt){_defineProperty$s(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$r(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$s(_e,et,tt){return et=_toPropertyKey$r(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$r(_e){var et=_toPrimitive$r(_e,"string");return _typeof$t(et)=="symbol"?et:String(et)}function _toPrimitive$r(_e,et){if(_typeof$t(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$t(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getDeltaAngle=function _e(et,tt){var rt=mathSign$1(tt-et),it=Math.min(Math.abs(tt-et),359.999);return rt*it},getTangentCircle=function _e(et){var tt=et.cx,rt=et.cy,it=et.radius,st=et.angle,ut=et.sign,ht=et.isExternal,at=et.cornerRadius,gt=et.cornerIsExternal,bt=at*(ht?1:-1)+it,wt=Math.asin(at/bt)/RADIAN$1,St=gt?st:st+ut*wt,kt=polarToCartesian(tt,rt,bt,St),Rt=polarToCartesian(tt,rt,it,St),It=gt?st-ut*wt:st,Dt=polarToCartesian(tt,rt,bt*Math.cos(wt*RADIAN$1),It);return{center:kt,circleTangency:Rt,lineTangency:Dt,theta:wt}},getSectorPath=function _e(et){var tt=et.cx,rt=et.cy,it=et.innerRadius,st=et.outerRadius,ut=et.startAngle,ht=et.endAngle,at=getDeltaAngle(ut,ht),gt=ut+at,bt=polarToCartesian(tt,rt,st,ut),wt=polarToCartesian(tt,rt,st,gt),St="M ".concat(bt.x,",").concat(bt.y,`
    A `).concat(st,",").concat(st,`,0,
    `).concat(+(Math.abs(at)>180),",").concat(+(ut>gt),`,
    `).concat(wt.x,",").concat(wt.y,`
  `);if(it>0){var kt=polarToCartesian(tt,rt,it,ut),Rt=polarToCartesian(tt,rt,it,gt);St+="L ".concat(Rt.x,",").concat(Rt.y,`
            A `).concat(it,",").concat(it,`,0,
            `).concat(+(Math.abs(at)>180),",").concat(+(ut<=gt),`,
            `).concat(kt.x,",").concat(kt.y," Z")}else St+="L ".concat(tt,",").concat(rt," Z");return St},getSectorWithCorner=function _e(et){var tt=et.cx,rt=et.cy,it=et.innerRadius,st=et.outerRadius,ut=et.cornerRadius,ht=et.forceCornerRadius,at=et.cornerIsExternal,gt=et.startAngle,bt=et.endAngle,wt=mathSign$1(bt-gt),St=getTangentCircle({cx:tt,cy:rt,radius:st,angle:gt,sign:wt,cornerRadius:ut,cornerIsExternal:at}),kt=St.circleTangency,Rt=St.lineTangency,It=St.theta,Dt=getTangentCircle({cx:tt,cy:rt,radius:st,angle:bt,sign:-wt,cornerRadius:ut,cornerIsExternal:at}),Mt=Dt.circleTangency,$t=Dt.lineTangency,jt=Dt.theta,Nt=at?Math.abs(gt-bt):Math.abs(gt-bt)-It-jt;if(Nt<0)return ht?"M ".concat(Rt.x,",").concat(Rt.y,`
        a`).concat(ut,",").concat(ut,",0,0,1,").concat(ut*2,`,0
        a`).concat(ut,",").concat(ut,",0,0,1,").concat(-ut*2,`,0
      `):getSectorPath({cx:tt,cy:rt,innerRadius:it,outerRadius:st,startAngle:gt,endAngle:bt});var Ut="M ".concat(Rt.x,",").concat(Rt.y,`
    A`).concat(ut,",").concat(ut,",0,0,").concat(+(wt<0),",").concat(kt.x,",").concat(kt.y,`
    A`).concat(st,",").concat(st,",0,").concat(+(Nt>180),",").concat(+(wt<0),",").concat(Mt.x,",").concat(Mt.y,`
    A`).concat(ut,",").concat(ut,",0,0,").concat(+(wt<0),",").concat($t.x,",").concat($t.y,`
  `);if(it>0){var Ht=getTangentCircle({cx:tt,cy:rt,radius:it,angle:gt,sign:wt,isExternal:!0,cornerRadius:ut,cornerIsExternal:at}),Kt=Ht.circleTangency,tr=Ht.lineTangency,mr=Ht.theta,vr=getTangentCircle({cx:tt,cy:rt,radius:it,angle:bt,sign:-wt,isExternal:!0,cornerRadius:ut,cornerIsExternal:at}),wr=vr.circleTangency,yr=vr.lineTangency,Or=vr.theta,Nr=at?Math.abs(gt-bt):Math.abs(gt-bt)-mr-Or;if(Nr<0&&ut===0)return"".concat(Ut,"L").concat(tt,",").concat(rt,"Z");Ut+="L".concat(yr.x,",").concat(yr.y,`
      A`).concat(ut,",").concat(ut,",0,0,").concat(+(wt<0),",").concat(wr.x,",").concat(wr.y,`
      A`).concat(it,",").concat(it,",0,").concat(+(Nr>180),",").concat(+(wt>0),",").concat(Kt.x,",").concat(Kt.y,`
      A`).concat(ut,",").concat(ut,",0,0,").concat(+(wt<0),",").concat(tr.x,",").concat(tr.y,"Z")}else Ut+="L".concat(tt,",").concat(rt,"Z");return Ut},defaultProps$3={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Sector=function _e(et){var tt=_objectSpread$q(_objectSpread$q({},defaultProps$3),et),rt=tt.cx,it=tt.cy,st=tt.innerRadius,ut=tt.outerRadius,ht=tt.cornerRadius,at=tt.forceCornerRadius,gt=tt.cornerIsExternal,bt=tt.startAngle,wt=tt.endAngle,St=tt.className;if(ut<st||bt===wt)return null;var kt=clsx$1("recharts-sector",St),Rt=ut-st,It=getPercentValue(ht,Rt,0,!0),Dt;return It>0&&Math.abs(bt-wt)<360?Dt=getSectorWithCorner({cx:rt,cy:it,innerRadius:st,outerRadius:ut,cornerRadius:Math.min(It,Rt/2),forceCornerRadius:at,cornerIsExternal:gt,startAngle:bt,endAngle:wt}):Dt=getSectorPath({cx:rt,cy:it,innerRadius:st,outerRadius:ut,startAngle:bt,endAngle:wt}),React$1.createElement("path",_extends$n({},filterProps(tt,!0),{className:kt,d:Dt,role:"img"}))};function _typeof$s(_e){"@babel/helpers - typeof";return _typeof$s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$s(_e)}function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$m.apply(this,arguments)}function ownKeys$q(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$p(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$q(Object(tt),!0).forEach(function(rt){_defineProperty$r(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$q(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$r(_e,et,tt){return et=_toPropertyKey$q(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$q(_e){var et=_toPrimitive$q(_e,"string");return _typeof$s(et)=="symbol"?et:String(et)}function _toPrimitive$q(_e,et){if(_typeof$s(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$s(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var CURVE_FACTORIES={curveBasisClosed,curveBasisOpen,curveBasis,curveBumpX:bumpX,curveBumpY:bumpY,curveLinearClosed,curveLinear,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},defined=function _e(et){return et.x===+et.x&&et.y===+et.y},getX=function _e(et){return et.x},getY=function _e(et){return et.y},getCurveFactory=function _e(et,tt){if(isFunction$4(et))return et;var rt="curve".concat(upperFirst$1(et));return(rt==="curveMonotone"||rt==="curveBump")&&tt?CURVE_FACTORIES["".concat(rt).concat(tt==="vertical"?"Y":"X")]:CURVE_FACTORIES[rt]||curveLinear},getPath$2=function _e(et){var tt=et.type,rt=tt===void 0?"linear":tt,it=et.points,st=it===void 0?[]:it,ut=et.baseLine,ht=et.layout,at=et.connectNulls,gt=at===void 0?!1:at,bt=getCurveFactory(rt,ht),wt=gt?st.filter(function(It){return defined(It)}):st,St;if(Array.isArray(ut)){var kt=gt?ut.filter(function(It){return defined(It)}):ut,Rt=wt.map(function(It,Dt){return _objectSpread$p(_objectSpread$p({},It),{},{base:kt[Dt]})});return ht==="vertical"?St=shapeArea().y(getY).x1(getX).x0(function(It){return It.base.x}):St=shapeArea().x(getX).y1(getY).y0(function(It){return It.base.y}),St.defined(defined).curve(bt),St(Rt)}return ht==="vertical"&&isNumber$2(ut)?St=shapeArea().y(getY).x1(getX).x0(ut):isNumber$2(ut)?St=shapeArea().x(getX).y1(getY).y0(ut):St=shapeLine().x(getX).y(getY),St.defined(defined).curve(bt),St(wt)},Curve=function _e(et){var tt=et.className,rt=et.points,it=et.path,st=et.pathRef;if((!rt||!rt.length)&&!it)return null;var ut=rt&&rt.length?getPath$2(et):it;return React$1.createElement("path",_extends$m({},filterProps(et,!1),adaptEventHandlers(et),{className:clsx$1("recharts-curve",tt),d:ut,ref:st}))},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function _e(rt,it,st,ut,ht,at){if(at!==ReactPropTypesSecret){var gt=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw gt.name="Invariant Violation",gt}}_e.isRequired=_e;function et(){return _e}var tt={array:_e,bigint:_e,bool:_e,func:_e,number:_e,object:_e,string:_e,symbol:_e,any:_e,arrayOf:et,element:_e,elementType:_e,instanceOf:et,node:_e,objectOf:et,oneOf:et,oneOfType:et,shape:et,exact:et,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return tt.PropTypes=tt,tt};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$1=Object.prototype.hasOwnProperty;function combineComparators(_e,et){return function(rt,it,st){return _e(rt,it,st)&&et(rt,it,st)}}function createIsCircular(_e){return function(tt,rt,it){if(!tt||!rt||typeof tt!="object"||typeof rt!="object")return _e(tt,rt,it);var st=it.cache,ut=st.get(tt),ht=st.get(rt);if(ut&&ht)return ut===rt&&ht===tt;st.set(tt,rt),st.set(rt,tt);var at=_e(tt,rt,it);return st.delete(tt),st.delete(rt),at}}function getStrictProperties(_e){return getOwnPropertyNames(_e).concat(getOwnPropertySymbols(_e))}var hasOwn=Object.hasOwn||function(_e,et){return hasOwnProperty$1.call(_e,et)};function sameValueZeroEqual(_e,et){return _e||et?_e===et:_e===et||_e!==_e&&et!==et}var OWNER="_owner",getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,keys$1=Object.keys;function areArraysEqual(_e,et,tt){var rt=_e.length;if(et.length!==rt)return!1;for(;rt-- >0;)if(!tt.equals(_e[rt],et[rt],rt,rt,_e,et,tt))return!1;return!0}function areDatesEqual(_e,et){return sameValueZeroEqual(_e.getTime(),et.getTime())}function areMapsEqual(_e,et,tt){if(_e.size!==et.size)return!1;for(var rt={},it=_e.entries(),st=0,ut,ht;(ut=it.next())&&!ut.done;){for(var at=et.entries(),gt=!1,bt=0;(ht=at.next())&&!ht.done;){var wt=ut.value,St=wt[0],kt=wt[1],Rt=ht.value,It=Rt[0],Dt=Rt[1];!gt&&!rt[bt]&&(gt=tt.equals(St,It,st,bt,_e,et,tt)&&tt.equals(kt,Dt,St,It,_e,et,tt))&&(rt[bt]=!0),bt++}if(!gt)return!1;st++}return!0}function areObjectsEqual(_e,et,tt){var rt=keys$1(_e),it=rt.length;if(keys$1(et).length!==it)return!1;for(var st;it-- >0;)if(st=rt[it],st===OWNER&&(_e.$$typeof||et.$$typeof)&&_e.$$typeof!==et.$$typeof||!hasOwn(et,st)||!tt.equals(_e[st],et[st],st,st,_e,et,tt))return!1;return!0}function areObjectsEqualStrict(_e,et,tt){var rt=getStrictProperties(_e),it=rt.length;if(getStrictProperties(et).length!==it)return!1;for(var st,ut,ht;it-- >0;)if(st=rt[it],st===OWNER&&(_e.$$typeof||et.$$typeof)&&_e.$$typeof!==et.$$typeof||!hasOwn(et,st)||!tt.equals(_e[st],et[st],st,st,_e,et,tt)||(ut=getOwnPropertyDescriptor(_e,st),ht=getOwnPropertyDescriptor(et,st),(ut||ht)&&(!ut||!ht||ut.configurable!==ht.configurable||ut.enumerable!==ht.enumerable||ut.writable!==ht.writable)))return!1;return!0}function arePrimitiveWrappersEqual(_e,et){return sameValueZeroEqual(_e.valueOf(),et.valueOf())}function areRegExpsEqual(_e,et){return _e.source===et.source&&_e.flags===et.flags}function areSetsEqual(_e,et,tt){if(_e.size!==et.size)return!1;for(var rt={},it=_e.values(),st,ut;(st=it.next())&&!st.done;){for(var ht=et.values(),at=!1,gt=0;(ut=ht.next())&&!ut.done;)!at&&!rt[gt]&&(at=tt.equals(st.value,ut.value,st.value,ut.value,_e,et,tt))&&(rt[gt]=!0),gt++;if(!at)return!1}return!0}function areTypedArraysEqual(_e,et){var tt=_e.length;if(et.length!==tt)return!1;for(;tt-- >0;)if(_e[tt]!==et[tt])return!1;return!0}var ARGUMENTS_TAG="[object Arguments]",BOOLEAN_TAG="[object Boolean]",DATE_TAG="[object Date]",MAP_TAG="[object Map]",NUMBER_TAG="[object Number]",OBJECT_TAG="[object Object]",REG_EXP_TAG="[object RegExp]",SET_TAG="[object Set]",STRING_TAG="[object String]",isArray$2=Array.isArray,isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,assign=Object.assign,getTag=Object.prototype.toString.call.bind(Object.prototype.toString);function createEqualityComparator(_e){var et=_e.areArraysEqual,tt=_e.areDatesEqual,rt=_e.areMapsEqual,it=_e.areObjectsEqual,st=_e.arePrimitiveWrappersEqual,ut=_e.areRegExpsEqual,ht=_e.areSetsEqual,at=_e.areTypedArraysEqual;return function(bt,wt,St){if(bt===wt)return!0;if(bt==null||wt==null||typeof bt!="object"||typeof wt!="object")return bt!==bt&&wt!==wt;var kt=bt.constructor;if(kt!==wt.constructor)return!1;if(kt===Object)return it(bt,wt,St);if(isArray$2(bt))return et(bt,wt,St);if(isTypedArray!=null&&isTypedArray(bt))return at(bt,wt,St);if(kt===Date)return tt(bt,wt,St);if(kt===RegExp)return ut(bt,wt,St);if(kt===Map)return rt(bt,wt,St);if(kt===Set)return ht(bt,wt,St);var Rt=getTag(bt);return Rt===DATE_TAG?tt(bt,wt,St):Rt===REG_EXP_TAG?ut(bt,wt,St):Rt===MAP_TAG?rt(bt,wt,St):Rt===SET_TAG?ht(bt,wt,St):Rt===OBJECT_TAG?typeof bt.then!="function"&&typeof wt.then!="function"&&it(bt,wt,St):Rt===ARGUMENTS_TAG?it(bt,wt,St):Rt===BOOLEAN_TAG||Rt===NUMBER_TAG||Rt===STRING_TAG?st(bt,wt,St):!1}}function createEqualityComparatorConfig(_e){var et=_e.circular,tt=_e.createCustomConfig,rt=_e.strict,it={areArraysEqual:rt?areObjectsEqualStrict:areArraysEqual,areDatesEqual,areMapsEqual:rt?combineComparators(areMapsEqual,areObjectsEqualStrict):areMapsEqual,areObjectsEqual:rt?areObjectsEqualStrict:areObjectsEqual,arePrimitiveWrappersEqual,areRegExpsEqual,areSetsEqual:rt?combineComparators(areSetsEqual,areObjectsEqualStrict):areSetsEqual,areTypedArraysEqual:rt?areObjectsEqualStrict:areTypedArraysEqual};if(tt&&(it=assign({},it,tt(it))),et){var st=createIsCircular(it.areArraysEqual),ut=createIsCircular(it.areMapsEqual),ht=createIsCircular(it.areObjectsEqual),at=createIsCircular(it.areSetsEqual);it=assign({},it,{areArraysEqual:st,areMapsEqual:ut,areObjectsEqual:ht,areSetsEqual:at})}return it}function createInternalEqualityComparator(_e){return function(et,tt,rt,it,st,ut,ht){return _e(et,tt,ht)}}function createIsEqual(_e){var et=_e.circular,tt=_e.comparator,rt=_e.createState,it=_e.equals,st=_e.strict;if(rt)return function(at,gt){var bt=rt(),wt=bt.cache,St=wt===void 0?et?new WeakMap:void 0:wt,kt=bt.meta;return tt(at,gt,{cache:St,equals:it,meta:kt,strict:st})};if(et)return function(at,gt){return tt(at,gt,{cache:new WeakMap,equals:it,meta:void 0,strict:st})};var ut={cache:void 0,equals:it,meta:void 0,strict:st};return function(at,gt){return tt(at,gt,ut)}}var deepEqual$3=createCustomEqual();createCustomEqual({strict:!0});createCustomEqual({circular:!0});createCustomEqual({circular:!0,strict:!0});createCustomEqual({createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({strict:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual}});createCustomEqual({circular:!0,createInternalComparator:function(){return sameValueZeroEqual},strict:!0});function createCustomEqual(_e){_e===void 0&&(_e={});var et=_e.circular,tt=et===void 0?!1:et,rt=_e.createInternalComparator,it=_e.createState,st=_e.strict,ut=st===void 0?!1:st,ht=createEqualityComparatorConfig(_e),at=createEqualityComparator(ht),gt=rt?rt(at):createInternalEqualityComparator(at);return createIsEqual({circular:tt,comparator:at,createState:it,equals:gt,strict:ut})}function safeRequestAnimationFrame(_e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(_e)}function setRafTimeout(_e){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,tt=-1,rt=function it(st){tt<0&&(tt=st),st-tt>et?(_e(st),tt=-1):safeRequestAnimationFrame(it)};requestAnimationFrame(rt)}function _typeof$r(_e){"@babel/helpers - typeof";return _typeof$r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$r(_e)}function _toArray(_e){return _arrayWithHoles$7(_e)||_iterableToArray$7(_e)||_unsupportedIterableToArray$b(_e)||_nonIterableRest$7()}function _nonIterableRest$7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$b(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$b(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$b(_e,et)}}function _arrayLikeToArray$b(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArray$7(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithHoles$7(_e){if(Array.isArray(_e))return _e}function createAnimateManager(){var _e={},et=function(){return null},tt=!1,rt=function it(st){if(!tt){if(Array.isArray(st)){if(!st.length)return;var ut=st,ht=_toArray(ut),at=ht[0],gt=ht.slice(1);if(typeof at=="number"){setRafTimeout(it.bind(null,gt),at);return}it(at),setRafTimeout(it.bind(null,gt));return}_typeof$r(st)==="object"&&(_e=st,et(_e)),typeof st=="function"&&st()}};return{stop:function(){tt=!0},start:function(st){tt=!1,rt(st)},subscribe:function(st){return et=st,function(){et=function(){return null}}}}}function _typeof$q(_e){"@babel/helpers - typeof";return _typeof$q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$q(_e)}function ownKeys$p(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$o(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$p(Object(tt),!0).forEach(function(rt){_defineProperty$q(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$p(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$q(_e,et,tt){return et=_toPropertyKey$p(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$p(_e){var et=_toPrimitive$p(_e,"string");return _typeof$q(et)==="symbol"?et:String(et)}function _toPrimitive$p(_e,et){if(_typeof$q(_e)!=="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$q(rt)!=="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getIntersectionKeys=function _e(et,tt){return[Object.keys(et),Object.keys(tt)].reduce(function(rt,it){return rt.filter(function(st){return it.includes(st)})})},identity=function _e(et){return et},getDashCase=function _e(et){return et.replace(/([A-Z])/g,function(tt){return"-".concat(tt.toLowerCase())})},mapObject=function _e(et,tt){return Object.keys(tt).reduce(function(rt,it){return _objectSpread$o(_objectSpread$o({},rt),{},_defineProperty$q({},it,et(it,tt[it])))},{})},getTransitionVal=function _e(et,tt,rt){return et.map(function(it){return"".concat(getDashCase(it)," ").concat(tt,"ms ").concat(rt)}).join(",")};function _slicedToArray$6(_e,et){return _arrayWithHoles$6(_e)||_iterableToArrayLimit$6(_e,et)||_unsupportedIterableToArray$a(_e,et)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$6(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$6(_e){if(Array.isArray(_e))return _e}function _toConsumableArray$6(_e){return _arrayWithoutHoles$6(_e)||_iterableToArray$6(_e)||_unsupportedIterableToArray$a(_e)||_nonIterableSpread$6()}function _nonIterableSpread$6(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$a(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$a(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$a(_e,et)}}function _iterableToArray$6(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$6(_e){if(Array.isArray(_e))return _arrayLikeToArray$a(_e)}function _arrayLikeToArray$a(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}var ACCURACY=1e-4,cubicBezierFactor=function _e(et,tt){return[0,3*et,3*tt-6*et,3*et-3*tt+1]},multyTime=function _e(et,tt){return et.map(function(rt,it){return rt*Math.pow(tt,it)}).reduce(function(rt,it){return rt+it})},cubicBezier=function _e(et,tt){return function(rt){var it=cubicBezierFactor(et,tt);return multyTime(it,rt)}},derivativeCubicBezier=function _e(et,tt){return function(rt){var it=cubicBezierFactor(et,tt),st=[].concat(_toConsumableArray$6(it.map(function(ut,ht){return ut*ht}).slice(1)),[0]);return multyTime(st,rt)}},configBezier=function _e(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];var it=tt[0],st=tt[1],ut=tt[2],ht=tt[3];if(tt.length===1)switch(tt[0]){case"linear":it=0,st=0,ut=1,ht=1;break;case"ease":it=.25,st=.1,ut=.25,ht=1;break;case"ease-in":it=.42,st=0,ut=1,ht=1;break;case"ease-out":it=.42,st=0,ut=.58,ht=1;break;case"ease-in-out":it=0,st=0,ut=.58,ht=1;break;default:{var at=tt[0].split("(");if(at[0]==="cubic-bezier"&&at[1].split(")")[0].split(",").length===4){var gt=at[1].split(")")[0].split(",").map(function(Dt){return parseFloat(Dt)}),bt=_slicedToArray$6(gt,4);it=bt[0],st=bt[1],ut=bt[2],ht=bt[3]}}}var wt=cubicBezier(it,ut),St=cubicBezier(st,ht),kt=derivativeCubicBezier(it,ut),Rt=function(Mt){return Mt>1?1:Mt<0?0:Mt},It=function(Mt){for(var $t=Mt>1?1:Mt,jt=$t,Nt=0;Nt<8;++Nt){var Ut=wt(jt)-$t,Ht=kt(jt);if(Math.abs(Ut-$t)<ACCURACY||Ht<ACCURACY)return St(jt);jt=Rt(jt-Ut/Ht)}return St(jt)};return It.isStepper=!1,It},configSpring=function _e(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=et.stiff,rt=tt===void 0?100:tt,it=et.damping,st=it===void 0?8:it,ut=et.dt,ht=ut===void 0?17:ut,at=function(bt,wt,St){var kt=-(bt-wt)*rt,Rt=St*st,It=St+(kt-Rt)*ht/1e3,Dt=St*ht/1e3+bt;return Math.abs(Dt-wt)<ACCURACY&&Math.abs(It)<ACCURACY?[wt,0]:[Dt,It]};return at.isStepper=!0,at.dt=ht,at},configEasing=function _e(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];var it=tt[0];if(typeof it=="string")switch(it){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return configBezier(it);case"spring":return configSpring();default:if(it.split("(")[0]==="cubic-bezier")return configBezier(it)}return typeof it=="function"?it:null};function _typeof$p(_e){"@babel/helpers - typeof";return _typeof$p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$p(_e)}function _toConsumableArray$5(_e){return _arrayWithoutHoles$5(_e)||_iterableToArray$5(_e)||_unsupportedIterableToArray$9(_e)||_nonIterableSpread$5()}function _nonIterableSpread$5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArray$5(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$5(_e){if(Array.isArray(_e))return _arrayLikeToArray$9(_e)}function ownKeys$o(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$n(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$o(Object(tt),!0).forEach(function(rt){_defineProperty$p(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$o(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$p(_e,et,tt){return et=_toPropertyKey$o(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$o(_e){var et=_toPrimitive$o(_e,"string");return _typeof$p(et)==="symbol"?et:String(et)}function _toPrimitive$o(_e,et){if(_typeof$p(_e)!=="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$p(rt)!=="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _slicedToArray$5(_e,et){return _arrayWithHoles$5(_e)||_iterableToArrayLimit$5(_e,et)||_unsupportedIterableToArray$9(_e,et)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$9(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$9(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$9(_e,et)}}function _arrayLikeToArray$9(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$5(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$5(_e){if(Array.isArray(_e))return _e}var alpha=function _e(et,tt,rt){return et+(tt-et)*rt},needContinue=function _e(et){var tt=et.from,rt=et.to;return tt!==rt},calStepperVals=function _e(et,tt,rt){var it=mapObject(function(st,ut){if(needContinue(ut)){var ht=et(ut.from,ut.to,ut.velocity),at=_slicedToArray$5(ht,2),gt=at[0],bt=at[1];return _objectSpread$n(_objectSpread$n({},ut),{},{from:gt,velocity:bt})}return ut},tt);return rt<1?mapObject(function(st,ut){return needContinue(ut)?_objectSpread$n(_objectSpread$n({},ut),{},{velocity:alpha(ut.velocity,it[st].velocity,rt),from:alpha(ut.from,it[st].from,rt)}):ut},tt):_e(et,it,rt-1)};const configUpdate=function(_e,et,tt,rt,it){var st=getIntersectionKeys(_e,et),ut=st.reduce(function(Dt,Mt){return _objectSpread$n(_objectSpread$n({},Dt),{},_defineProperty$p({},Mt,[_e[Mt],et[Mt]]))},{}),ht=st.reduce(function(Dt,Mt){return _objectSpread$n(_objectSpread$n({},Dt),{},_defineProperty$p({},Mt,{from:_e[Mt],velocity:0,to:et[Mt]}))},{}),at=-1,gt,bt,wt=function(){return null},St=function(){return mapObject(function(Mt,$t){return $t.from},ht)},kt=function(){return!Object.values(ht).filter(needContinue).length},Rt=function(Mt){gt||(gt=Mt);var $t=Mt-gt,jt=$t/tt.dt;ht=calStepperVals(tt,ht,jt),it(_objectSpread$n(_objectSpread$n(_objectSpread$n({},_e),et),St())),gt=Mt,kt()||(at=requestAnimationFrame(wt))},It=function(Mt){bt||(bt=Mt);var $t=(Mt-bt)/rt,jt=mapObject(function(Ut,Ht){return alpha.apply(void 0,_toConsumableArray$5(Ht).concat([tt($t)]))},ut);if(it(_objectSpread$n(_objectSpread$n(_objectSpread$n({},_e),et),jt)),$t<1)at=requestAnimationFrame(wt);else{var Nt=mapObject(function(Ut,Ht){return alpha.apply(void 0,_toConsumableArray$5(Ht).concat([tt(1)]))},ut);it(_objectSpread$n(_objectSpread$n(_objectSpread$n({},_e),et),Nt))}};return wt=tt.isStepper?Rt:It,function(){return requestAnimationFrame(wt),function(){cancelAnimationFrame(at)}}};function _typeof$o(_e){"@babel/helpers - typeof";return _typeof$o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$o(_e)}var _excluded$b=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function _objectWithoutProperties$c(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$c(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$c(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _toConsumableArray$4(_e){return _arrayWithoutHoles$4(_e)||_iterableToArray$4(_e)||_unsupportedIterableToArray$8(_e)||_nonIterableSpread$4()}function _nonIterableSpread$4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$8(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$8(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$8(_e,et)}}function _iterableToArray$4(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$4(_e){if(Array.isArray(_e))return _arrayLikeToArray$8(_e)}function _arrayLikeToArray$8(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function ownKeys$n(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$m(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$n(Object(tt),!0).forEach(function(rt){_defineProperty$o(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$n(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$o(_e,et,tt){return et=_toPropertyKey$n(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _classCallCheck$c(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$c(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$n(rt.key),rt)}}function _createClass$c(_e,et,tt){return et&&_defineProperties$c(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _toPropertyKey$n(_e){var et=_toPrimitive$n(_e,"string");return _typeof$o(et)==="symbol"?et:String(et)}function _toPrimitive$n(_e,et){if(_typeof$o(_e)!=="object"||_e===null)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$o(rt)!=="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _inherits$a(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$a(_e,et)}function _setPrototypeOf$a(_e,et){return _setPrototypeOf$a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$a(_e,et)}function _createSuper(_e){var et=_isNativeReflectConstruct$9();return function(){var rt=_getPrototypeOf$a(_e),it;if(et){var st=_getPrototypeOf$a(this).constructor;it=Reflect.construct(rt,arguments,st)}else it=rt.apply(this,arguments);return _possibleConstructorReturn$a(this,it)}}function _possibleConstructorReturn$a(_e,et){if(et&&(_typeof$o(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$a(_e)}function _assertThisInitialized$a(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$9(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$a(_e){return _getPrototypeOf$a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$a(_e)}var Animate=function(_e){_inherits$a(tt,_e);var et=_createSuper(tt);function tt(rt,it){var st;_classCallCheck$c(this,tt),st=et.call(this,rt,it);var ut=st.props,ht=ut.isActive,at=ut.attributeName,gt=ut.from,bt=ut.to,wt=ut.steps,St=ut.children,kt=ut.duration;if(st.handleStyleChange=st.handleStyleChange.bind(_assertThisInitialized$a(st)),st.changeStyle=st.changeStyle.bind(_assertThisInitialized$a(st)),!ht||kt<=0)return st.state={style:{}},typeof St=="function"&&(st.state={style:bt}),_possibleConstructorReturn$a(st);if(wt&&wt.length)st.state={style:wt[0].style};else if(gt){if(typeof St=="function")return st.state={style:gt},_possibleConstructorReturn$a(st);st.state={style:at?_defineProperty$o({},at,gt):gt}}else st.state={style:{}};return st}return _createClass$c(tt,[{key:"componentDidMount",value:function(){var it=this.props,st=it.isActive,ut=it.canBegin;this.mounted=!0,!(!st||!ut)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(it){var st=this.props,ut=st.isActive,ht=st.canBegin,at=st.attributeName,gt=st.shouldReAnimate,bt=st.to,wt=st.from,St=this.state.style;if(ht){if(!ut){var kt={style:at?_defineProperty$o({},at,bt):bt};this.state&&St&&(at&&St[at]!==bt||!at&&St!==bt)&&this.setState(kt);return}if(!(deepEqual$3(it.to,bt)&&it.canBegin&&it.isActive)){var Rt=!it.canBegin||!it.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var It=Rt||gt?wt:it.to;if(this.state&&St){var Dt={style:at?_defineProperty$o({},at,It):It};(at&&St[at]!==It||!at&&St!==It)&&this.setState(Dt)}this.runAnimation(_objectSpread$m(_objectSpread$m({},this.props),{},{from:It,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var it=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),it&&it()}},{key:"handleStyleChange",value:function(it){this.changeStyle(it)}},{key:"changeStyle",value:function(it){this.mounted&&this.setState({style:it})}},{key:"runJSAnimation",value:function(it){var st=this,ut=it.from,ht=it.to,at=it.duration,gt=it.easing,bt=it.begin,wt=it.onAnimationEnd,St=it.onAnimationStart,kt=configUpdate(ut,ht,configEasing(gt),at,this.changeStyle),Rt=function(){st.stopJSAnimation=kt()};this.manager.start([St,bt,Rt,at,wt])}},{key:"runStepAnimation",value:function(it){var st=this,ut=it.steps,ht=it.begin,at=it.onAnimationStart,gt=ut[0],bt=gt.style,wt=gt.duration,St=wt===void 0?0:wt,kt=function(It,Dt,Mt){if(Mt===0)return It;var $t=Dt.duration,jt=Dt.easing,Nt=jt===void 0?"ease":jt,Ut=Dt.style,Ht=Dt.properties,Kt=Dt.onAnimationEnd,tr=Mt>0?ut[Mt-1]:Dt,mr=Ht||Object.keys(Ut);if(typeof Nt=="function"||Nt==="spring")return[].concat(_toConsumableArray$4(It),[st.runJSAnimation.bind(st,{from:tr.style,to:Ut,duration:$t,easing:Nt}),$t]);var vr=getTransitionVal(mr,$t,Nt),wr=_objectSpread$m(_objectSpread$m(_objectSpread$m({},tr.style),Ut),{},{transition:vr});return[].concat(_toConsumableArray$4(It),[wr,$t,Kt]).filter(identity)};return this.manager.start([at].concat(_toConsumableArray$4(ut.reduce(kt,[bt,Math.max(St,ht)])),[it.onAnimationEnd]))}},{key:"runAnimation",value:function(it){this.manager||(this.manager=createAnimateManager());var st=it.begin,ut=it.duration,ht=it.attributeName,at=it.to,gt=it.easing,bt=it.onAnimationStart,wt=it.onAnimationEnd,St=it.steps,kt=it.children,Rt=this.manager;if(this.unSubscribe=Rt.subscribe(this.handleStyleChange),typeof gt=="function"||typeof kt=="function"||gt==="spring"){this.runJSAnimation(it);return}if(St.length>1){this.runStepAnimation(it);return}var It=ht?_defineProperty$o({},ht,at):at,Dt=getTransitionVal(Object.keys(It),ut,gt);Rt.start([bt,st,_objectSpread$m(_objectSpread$m({},It),{},{transition:Dt}),ut,wt])}},{key:"render",value:function(){var it=this.props,st=it.children;it.begin;var ut=it.duration;it.attributeName,it.easing;var ht=it.isActive;it.steps,it.from,it.to,it.canBegin,it.onAnimationEnd,it.shouldReAnimate,it.onAnimationReStart;var at=_objectWithoutProperties$c(it,_excluded$b),gt=reactExports.Children.count(st),bt=this.state.style;if(typeof st=="function")return st(bt);if(!ht||gt===0||ut<=0)return st;var wt=function(kt){var Rt=kt.props,It=Rt.style,Dt=It===void 0?{}:It,Mt=Rt.className,$t=reactExports.cloneElement(kt,_objectSpread$m(_objectSpread$m({},at),{},{style:_objectSpread$m(_objectSpread$m({},Dt),bt),className:Mt}));return $t};return gt===1?wt(reactExports.Children.only(st)):React$1.createElement("div",null,reactExports.Children.map(st,function(St){return wt(St)}))}}]),tt}(reactExports.PureComponent);Animate.displayName="Animate";Animate.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function _e(){},onAnimationStart:function _e(){}};Animate.propTypes={from:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),to:PropTypes.oneOfType([PropTypes.object,PropTypes.string]),attributeName:PropTypes.string,duration:PropTypes.number,begin:PropTypes.number,easing:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),steps:PropTypes.arrayOf(PropTypes.shape({duration:PropTypes.number.isRequired,style:PropTypes.object.isRequired,easing:PropTypes.oneOfType([PropTypes.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),PropTypes.func]),properties:PropTypes.arrayOf("string"),onAnimationEnd:PropTypes.func})),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),isActive:PropTypes.bool,canBegin:PropTypes.bool,onAnimationEnd:PropTypes.func,shouldReAnimate:PropTypes.bool,onAnimationStart:PropTypes.func,onAnimationReStart:PropTypes.func};PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.element;PropTypes.object,PropTypes.object,PropTypes.object,PropTypes.oneOfType([PropTypes.array,PropTypes.element]),PropTypes.any;function _typeof$n(_e){"@babel/helpers - typeof";return _typeof$n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$n(_e)}function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$l.apply(this,arguments)}function _slicedToArray$4(_e,et){return _arrayWithHoles$4(_e)||_iterableToArrayLimit$4(_e,et)||_unsupportedIterableToArray$7(_e,et)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$7(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$7(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$7(_e,et)}}function _arrayLikeToArray$7(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$4(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$4(_e){if(Array.isArray(_e))return _e}function ownKeys$m(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$l(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$m(Object(tt),!0).forEach(function(rt){_defineProperty$n(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$m(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$n(_e,et,tt){return et=_toPropertyKey$m(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$m(_e){var et=_toPrimitive$m(_e,"string");return _typeof$n(et)=="symbol"?et:String(et)}function _toPrimitive$m(_e,et){if(_typeof$n(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$n(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getRectanglePath=function _e(et,tt,rt,it,st){var ut=Math.min(Math.abs(rt)/2,Math.abs(it)/2),ht=it>=0?1:-1,at=rt>=0?1:-1,gt=it>=0&&rt>=0||it<0&&rt<0?1:0,bt;if(ut>0&&st instanceof Array){for(var wt=[0,0,0,0],St=0,kt=4;St<kt;St++)wt[St]=st[St]>ut?ut:st[St];bt="M".concat(et,",").concat(tt+ht*wt[0]),wt[0]>0&&(bt+="A ".concat(wt[0],",").concat(wt[0],",0,0,").concat(gt,",").concat(et+at*wt[0],",").concat(tt)),bt+="L ".concat(et+rt-at*wt[1],",").concat(tt),wt[1]>0&&(bt+="A ".concat(wt[1],",").concat(wt[1],",0,0,").concat(gt,`,
        `).concat(et+rt,",").concat(tt+ht*wt[1])),bt+="L ".concat(et+rt,",").concat(tt+it-ht*wt[2]),wt[2]>0&&(bt+="A ".concat(wt[2],",").concat(wt[2],",0,0,").concat(gt,`,
        `).concat(et+rt-at*wt[2],",").concat(tt+it)),bt+="L ".concat(et+at*wt[3],",").concat(tt+it),wt[3]>0&&(bt+="A ".concat(wt[3],",").concat(wt[3],",0,0,").concat(gt,`,
        `).concat(et,",").concat(tt+it-ht*wt[3])),bt+="Z"}else if(ut>0&&st===+st&&st>0){var Rt=Math.min(ut,st);bt="M ".concat(et,",").concat(tt+ht*Rt,`
            A `).concat(Rt,",").concat(Rt,",0,0,").concat(gt,",").concat(et+at*Rt,",").concat(tt,`
            L `).concat(et+rt-at*Rt,",").concat(tt,`
            A `).concat(Rt,",").concat(Rt,",0,0,").concat(gt,",").concat(et+rt,",").concat(tt+ht*Rt,`
            L `).concat(et+rt,",").concat(tt+it-ht*Rt,`
            A `).concat(Rt,",").concat(Rt,",0,0,").concat(gt,",").concat(et+rt-at*Rt,",").concat(tt+it,`
            L `).concat(et+at*Rt,",").concat(tt+it,`
            A `).concat(Rt,",").concat(Rt,",0,0,").concat(gt,",").concat(et,",").concat(tt+it-ht*Rt," Z")}else bt="M ".concat(et,",").concat(tt," h ").concat(rt," v ").concat(it," h ").concat(-rt," Z");return bt},isInRectangle=function _e(et,tt){if(!et||!tt)return!1;var rt=et.x,it=et.y,st=tt.x,ut=tt.y,ht=tt.width,at=tt.height;if(Math.abs(ht)>0&&Math.abs(at)>0){var gt=Math.min(st,st+ht),bt=Math.max(st,st+ht),wt=Math.min(ut,ut+at),St=Math.max(ut,ut+at);return rt>=gt&&rt<=bt&&it>=wt&&it<=St}return!1},defaultProps$2={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Rectangle=function _e(et){var tt=_objectSpread$l(_objectSpread$l({},defaultProps$2),et),rt=reactExports.useRef(),it=reactExports.useState(-1),st=_slicedToArray$4(it,2),ut=st[0],ht=st[1];reactExports.useEffect(function(){if(rt.current&&rt.current.getTotalLength)try{var Nt=rt.current.getTotalLength();Nt&&ht(Nt)}catch{}},[]);var at=tt.x,gt=tt.y,bt=tt.width,wt=tt.height,St=tt.radius,kt=tt.className,Rt=tt.animationEasing,It=tt.animationDuration,Dt=tt.animationBegin,Mt=tt.isAnimationActive,$t=tt.isUpdateAnimationActive;if(at!==+at||gt!==+gt||bt!==+bt||wt!==+wt||bt===0||wt===0)return null;var jt=clsx$1("recharts-rectangle",kt);return $t?React$1.createElement(Animate,{canBegin:ut>0,from:{width:bt,height:wt,x:at,y:gt},to:{width:bt,height:wt,x:at,y:gt},duration:It,animationEasing:Rt,isActive:$t},function(Nt){var Ut=Nt.width,Ht=Nt.height,Kt=Nt.x,tr=Nt.y;return React$1.createElement(Animate,{canBegin:ut>0,from:"0px ".concat(ut===-1?1:ut,"px"),to:"".concat(ut,"px 0px"),attributeName:"strokeDasharray",begin:Dt,duration:It,isActive:Mt,easing:Rt},React$1.createElement("path",_extends$l({},filterProps(tt,!0),{className:jt,d:getRectanglePath(Kt,tr,Ut,Ht,St),ref:rt})))}):React$1.createElement("path",_extends$l({},filterProps(tt,!0),{className:jt,d:getRectanglePath(at,gt,bt,wt,St)}))},_excluded$a=["points","className","baseLinePoints","connectNulls"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$k.apply(this,arguments)}function _objectWithoutProperties$b(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$b(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$b(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _toConsumableArray$3(_e){return _arrayWithoutHoles$3(_e)||_iterableToArray$3(_e)||_unsupportedIterableToArray$6(_e)||_nonIterableSpread$3()}function _nonIterableSpread$3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$6(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$6(_e,et)}}function _iterableToArray$3(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$3(_e){if(Array.isArray(_e))return _arrayLikeToArray$6(_e)}function _arrayLikeToArray$6(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}var isValidatePoint=function _e(et){return et&&et.x===+et.x&&et.y===+et.y},getParsedPoints=function _e(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],tt=[[]];return et.forEach(function(rt){isValidatePoint(rt)?tt[tt.length-1].push(rt):tt[tt.length-1].length>0&&tt.push([])}),isValidatePoint(et[0])&&tt[tt.length-1].push(et[0]),tt[tt.length-1].length<=0&&(tt=tt.slice(0,-1)),tt},getSinglePolygonPath=function _e(et,tt){var rt=getParsedPoints(et);tt&&(rt=[rt.reduce(function(st,ut){return[].concat(_toConsumableArray$3(st),_toConsumableArray$3(ut))},[])]);var it=rt.map(function(st){return st.reduce(function(ut,ht,at){return"".concat(ut).concat(at===0?"M":"L").concat(ht.x,",").concat(ht.y)},"")}).join("");return rt.length===1?"".concat(it,"Z"):it},getRanglePath=function _e(et,tt,rt){var it=getSinglePolygonPath(et,rt);return"".concat(it.slice(-1)==="Z"?it.slice(0,-1):it,"L").concat(getSinglePolygonPath(tt.reverse(),rt).slice(1))},Polygon=function _e(et){var tt=et.points,rt=et.className,it=et.baseLinePoints,st=et.connectNulls,ut=_objectWithoutProperties$b(et,_excluded$a);if(!tt||!tt.length)return null;var ht=clsx$1("recharts-polygon",rt);if(it&&it.length){var at=ut.stroke&&ut.stroke!=="none",gt=getRanglePath(tt,it,st);return React$1.createElement("g",{className:ht},React$1.createElement("path",_extends$k({},filterProps(ut,!0),{fill:gt.slice(-1)==="Z"?ut.fill:"none",stroke:"none",d:gt})),at?React$1.createElement("path",_extends$k({},filterProps(ut,!0),{fill:"none",d:getSinglePolygonPath(tt,st)})):null,at?React$1.createElement("path",_extends$k({},filterProps(ut,!0),{fill:"none",d:getSinglePolygonPath(it,st)})):null)}var bt=getSinglePolygonPath(tt,st);return React$1.createElement("path",_extends$k({},filterProps(ut,!0),{fill:bt.slice(-1)==="Z"?ut.fill:"none",className:ht,d:bt}))};function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$j.apply(this,arguments)}var Dot=function _e(et){var tt=et.cx,rt=et.cy,it=et.r,st=et.className,ut=clsx$1("recharts-dot",st);return tt===+tt&&rt===+rt&&it===+it?React$1.createElement("circle",_extends$j({},filterProps(et,!1),adaptEventHandlers(et),{className:ut,cx:tt,cy:rt,r:it})):null};function _typeof$m(_e){"@babel/helpers - typeof";return _typeof$m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$m(_e)}var _excluded$9=["x","y","top","left","width","height","className"];function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$i.apply(this,arguments)}function ownKeys$l(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$k(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$l(Object(tt),!0).forEach(function(rt){_defineProperty$m(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$l(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$m(_e,et,tt){return et=_toPropertyKey$l(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$l(_e){var et=_toPrimitive$l(_e,"string");return _typeof$m(et)=="symbol"?et:String(et)}function _toPrimitive$l(_e,et){if(_typeof$m(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$m(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _objectWithoutProperties$a(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$a(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$a(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}var getPath$1=function _e(et,tt,rt,it,st,ut){return"M".concat(et,",").concat(st,"v").concat(it,"M").concat(ut,",").concat(tt,"h").concat(rt)},Cross=function _e(et){var tt=et.x,rt=tt===void 0?0:tt,it=et.y,st=it===void 0?0:it,ut=et.top,ht=ut===void 0?0:ut,at=et.left,gt=at===void 0?0:at,bt=et.width,wt=bt===void 0?0:bt,St=et.height,kt=St===void 0?0:St,Rt=et.className,It=_objectWithoutProperties$a(et,_excluded$9),Dt=_objectSpread$k({x:rt,y:st,top:ht,left:gt,width:wt,height:kt},It);return!isNumber$2(rt)||!isNumber$2(st)||!isNumber$2(wt)||!isNumber$2(kt)||!isNumber$2(ht)||!isNumber$2(gt)?null:React$1.createElement("path",_extends$i({},filterProps(Dt,!0),{className:clsx$1("recharts-cross",Rt),d:getPath$1(rt,st,wt,kt,ht,gt)}))},baseExtremum$1=_baseExtremum,baseGt=_baseGt,baseIteratee$6=_baseIteratee;function maxBy(_e,et){return _e&&_e.length?baseExtremum$1(_e,baseIteratee$6(et),baseGt):void 0}var maxBy_1=maxBy;const maxBy$1=getDefaultExportFromCjs(maxBy_1);var baseExtremum=_baseExtremum,baseIteratee$5=_baseIteratee,baseLt=_baseLt;function minBy(_e,et){return _e&&_e.length?baseExtremum(_e,baseIteratee$5(et),baseLt):void 0}var minBy_1=minBy;const minBy$1=getDefaultExportFromCjs(minBy_1);var _excluded$8=["cx","cy","angle","ticks","axisLine"],_excluded2$3=["ticks","tick","angle","tickFormatter","stroke"];function _typeof$l(_e){"@babel/helpers - typeof";return _typeof$l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$l(_e)}function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$h.apply(this,arguments)}function ownKeys$k(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$j(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$k(Object(tt),!0).forEach(function(rt){_defineProperty$l(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$k(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _objectWithoutProperties$9(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$9(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$9(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _classCallCheck$b(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$b(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$k(rt.key),rt)}}function _createClass$b(_e,et,tt){return et&&_defineProperties$b(_e.prototype,et),tt&&_defineProperties$b(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$8(_e,et,tt){return et=_getPrototypeOf$9(et),_possibleConstructorReturn$9(_e,_isNativeReflectConstruct$8()?Reflect.construct(et,tt||[],_getPrototypeOf$9(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$9(_e,et){if(et&&(_typeof$l(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$9(_e)}function _assertThisInitialized$9(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$8(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$8=function(){return!!_e})()}function _getPrototypeOf$9(_e){return _getPrototypeOf$9=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$9(_e)}function _inherits$9(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$9(_e,et)}function _setPrototypeOf$9(_e,et){return _setPrototypeOf$9=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$9(_e,et)}function _defineProperty$l(_e,et,tt){return et=_toPropertyKey$k(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$k(_e){var et=_toPrimitive$k(_e,"string");return _typeof$l(et)=="symbol"?et:String(et)}function _toPrimitive$k(_e,et){if(_typeof$l(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$l(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var PolarRadiusAxis=function(_e){_inherits$9(et,_e);function et(){return _classCallCheck$b(this,et),_callSuper$8(this,et,arguments)}return _createClass$b(et,[{key:"getTickValueCoord",value:function(rt){var it=rt.coordinate,st=this.props,ut=st.angle,ht=st.cx,at=st.cy;return polarToCartesian(ht,at,it,ut)}},{key:"getTickTextAnchor",value:function(){var rt=this.props.orientation,it;switch(rt){case"left":it="end";break;case"right":it="start";break;default:it="middle";break}return it}},{key:"getViewBox",value:function(){var rt=this.props,it=rt.cx,st=rt.cy,ut=rt.angle,ht=rt.ticks,at=maxBy$1(ht,function(bt){return bt.coordinate||0}),gt=minBy$1(ht,function(bt){return bt.coordinate||0});return{cx:it,cy:st,startAngle:ut,endAngle:ut,innerRadius:gt.coordinate||0,outerRadius:at.coordinate||0}}},{key:"renderAxisLine",value:function(){var rt=this.props,it=rt.cx,st=rt.cy,ut=rt.angle,ht=rt.ticks,at=rt.axisLine,gt=_objectWithoutProperties$9(rt,_excluded$8),bt=ht.reduce(function(Rt,It){return[Math.min(Rt[0],It.coordinate),Math.max(Rt[1],It.coordinate)]},[1/0,-1/0]),wt=polarToCartesian(it,st,bt[0],ut),St=polarToCartesian(it,st,bt[1],ut),kt=_objectSpread$j(_objectSpread$j(_objectSpread$j({},filterProps(gt,!1)),{},{fill:"none"},filterProps(at,!1)),{},{x1:wt.x,y1:wt.y,x2:St.x,y2:St.y});return React$1.createElement("line",_extends$h({className:"recharts-polar-radius-axis-line"},kt))}},{key:"renderTicks",value:function(){var rt=this,it=this.props,st=it.ticks,ut=it.tick,ht=it.angle,at=it.tickFormatter,gt=it.stroke,bt=_objectWithoutProperties$9(it,_excluded2$3),wt=this.getTickTextAnchor(),St=filterProps(bt,!1),kt=filterProps(ut,!1),Rt=st.map(function(It,Dt){var Mt=rt.getTickValueCoord(It),$t=_objectSpread$j(_objectSpread$j(_objectSpread$j(_objectSpread$j({textAnchor:wt,transform:"rotate(".concat(90-ht,", ").concat(Mt.x,", ").concat(Mt.y,")")},St),{},{stroke:"none",fill:gt},kt),{},{index:Dt},Mt),{},{payload:It});return React$1.createElement(Layer$2,_extends$h({className:clsx$1("recharts-polar-radius-axis-tick",getTickClassName(ut)),key:"tick-".concat(It.coordinate)},adaptEventsOfChild(rt.props,It,Dt)),et.renderTickItem(ut,$t,at?at(It.value,Dt):It.value))});return React$1.createElement(Layer$2,{className:"recharts-polar-radius-axis-ticks"},Rt)}},{key:"render",value:function(){var rt=this.props,it=rt.ticks,st=rt.axisLine,ut=rt.tick;return!it||!it.length?null:React$1.createElement(Layer$2,{className:clsx$1("recharts-polar-radius-axis",this.props.className)},st&&this.renderAxisLine(),ut&&this.renderTicks(),Label$4.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(rt,it,st){var ut;return React$1.isValidElement(rt)?ut=React$1.cloneElement(rt,it):isFunction$4(rt)?ut=rt(it):ut=React$1.createElement(Text,_extends$h({},it,{className:"recharts-polar-radius-axis-tick-value"}),st),ut}}]),et}(reactExports.PureComponent);_defineProperty$l(PolarRadiusAxis,"displayName","PolarRadiusAxis");_defineProperty$l(PolarRadiusAxis,"axisType","radiusAxis");_defineProperty$l(PolarRadiusAxis,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function _typeof$k(_e){"@babel/helpers - typeof";return _typeof$k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$k(_e)}function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$g.apply(this,arguments)}function ownKeys$j(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$i(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$j(Object(tt),!0).forEach(function(rt){_defineProperty$k(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$j(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$a(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$a(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$j(rt.key),rt)}}function _createClass$a(_e,et,tt){return et&&_defineProperties$a(_e.prototype,et),tt&&_defineProperties$a(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$7(_e,et,tt){return et=_getPrototypeOf$8(et),_possibleConstructorReturn$8(_e,_isNativeReflectConstruct$7()?Reflect.construct(et,tt||[],_getPrototypeOf$8(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$8(_e,et){if(et&&(_typeof$k(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$8(_e)}function _assertThisInitialized$8(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$7(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$7=function(){return!!_e})()}function _getPrototypeOf$8(_e){return _getPrototypeOf$8=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$8(_e)}function _inherits$8(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$8(_e,et)}function _setPrototypeOf$8(_e,et){return _setPrototypeOf$8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$8(_e,et)}function _defineProperty$k(_e,et,tt){return et=_toPropertyKey$j(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$j(_e){var et=_toPrimitive$j(_e,"string");return _typeof$k(et)=="symbol"?et:String(et)}function _toPrimitive$j(_e,et){if(_typeof$k(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$k(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var RADIAN=Math.PI/180,eps=1e-5,PolarAngleAxis=function(_e){_inherits$8(et,_e);function et(){return _classCallCheck$a(this,et),_callSuper$7(this,et,arguments)}return _createClass$a(et,[{key:"getTickLineCoord",value:function(rt){var it=this.props,st=it.cx,ut=it.cy,ht=it.radius,at=it.orientation,gt=it.tickSize,bt=gt||8,wt=polarToCartesian(st,ut,ht,rt.coordinate),St=polarToCartesian(st,ut,ht+(at==="inner"?-1:1)*bt,rt.coordinate);return{x1:wt.x,y1:wt.y,x2:St.x,y2:St.y}}},{key:"getTickTextAnchor",value:function(rt){var it=this.props.orientation,st=Math.cos(-rt.coordinate*RADIAN),ut;return st>eps?ut=it==="outer"?"start":"end":st<-eps?ut=it==="outer"?"end":"start":ut="middle",ut}},{key:"renderAxisLine",value:function(){var rt=this.props,it=rt.cx,st=rt.cy,ut=rt.radius,ht=rt.axisLine,at=rt.axisLineType,gt=_objectSpread$i(_objectSpread$i({},filterProps(this.props,!1)),{},{fill:"none"},filterProps(ht,!1));if(at==="circle")return React$1.createElement(Dot,_extends$g({className:"recharts-polar-angle-axis-line"},gt,{cx:it,cy:st,r:ut}));var bt=this.props.ticks,wt=bt.map(function(St){return polarToCartesian(it,st,ut,St.coordinate)});return React$1.createElement(Polygon,_extends$g({className:"recharts-polar-angle-axis-line"},gt,{points:wt}))}},{key:"renderTicks",value:function(){var rt=this,it=this.props,st=it.ticks,ut=it.tick,ht=it.tickLine,at=it.tickFormatter,gt=it.stroke,bt=filterProps(this.props,!1),wt=filterProps(ut,!1),St=_objectSpread$i(_objectSpread$i({},bt),{},{fill:"none"},filterProps(ht,!1)),kt=st.map(function(Rt,It){var Dt=rt.getTickLineCoord(Rt),Mt=rt.getTickTextAnchor(Rt),$t=_objectSpread$i(_objectSpread$i(_objectSpread$i({textAnchor:Mt},bt),{},{stroke:"none",fill:gt},wt),{},{index:It,payload:Rt,x:Dt.x2,y:Dt.y2});return React$1.createElement(Layer$2,_extends$g({className:clsx$1("recharts-polar-angle-axis-tick",getTickClassName(ut)),key:"tick-".concat(Rt.coordinate)},adaptEventsOfChild(rt.props,Rt,It)),ht&&React$1.createElement("line",_extends$g({className:"recharts-polar-angle-axis-tick-line"},St,Dt)),ut&&et.renderTickItem(ut,$t,at?at(Rt.value,It):Rt.value))});return React$1.createElement(Layer$2,{className:"recharts-polar-angle-axis-ticks"},kt)}},{key:"render",value:function(){var rt=this.props,it=rt.ticks,st=rt.radius,ut=rt.axisLine;return st<=0||!it||!it.length?null:React$1.createElement(Layer$2,{className:clsx$1("recharts-polar-angle-axis",this.props.className)},ut&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(rt,it,st){var ut;return React$1.isValidElement(rt)?ut=React$1.cloneElement(rt,it):isFunction$4(rt)?ut=rt(it):ut=React$1.createElement(Text,_extends$g({},it,{className:"recharts-polar-angle-axis-tick-value"}),st),ut}}]),et}(reactExports.PureComponent);_defineProperty$k(PolarAngleAxis,"displayName","PolarAngleAxis");_defineProperty$k(PolarAngleAxis,"axisType","angleAxis");_defineProperty$k(PolarAngleAxis,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag$1=_baseGetTag,getPrototype=_getPrototype,isObjectLike$1=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$1(_e){if(!isObjectLike$1(_e)||baseGetTag$1(_e)!=objectTag)return!1;var et=getPrototype(_e);if(et===null)return!0;var tt=hasOwnProperty.call(et,"constructor")&&et.constructor;return typeof tt=="function"&&tt instanceof tt&&funcToString.call(tt)==objectCtorString}var isPlainObject_1=isPlainObject$1;const isPlainObject$2=getDefaultExportFromCjs(isPlainObject_1);var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,boolTag="[object Boolean]";function isBoolean$2(_e){return _e===!0||_e===!1||isObjectLike(_e)&&baseGetTag(_e)==boolTag}var isBoolean_1=isBoolean$2;const isBoolean$3=getDefaultExportFromCjs(isBoolean_1);function _typeof$j(_e){"@babel/helpers - typeof";return _typeof$j=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$j(_e)}function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$f.apply(this,arguments)}function _slicedToArray$3(_e,et){return _arrayWithHoles$3(_e)||_iterableToArrayLimit$3(_e,et)||_unsupportedIterableToArray$5(_e,et)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$5(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$5(_e,et)}}function _arrayLikeToArray$5(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$3(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$3(_e){if(Array.isArray(_e))return _e}function ownKeys$i(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$h(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$i(Object(tt),!0).forEach(function(rt){_defineProperty$j(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$i(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$j(_e,et,tt){return et=_toPropertyKey$i(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$i(_e){var et=_toPrimitive$i(_e,"string");return _typeof$j(et)=="symbol"?et:String(et)}function _toPrimitive$i(_e,et){if(_typeof$j(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$j(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getTrapezoidPath=function _e(et,tt,rt,it,st){var ut=rt-it,ht;return ht="M ".concat(et,",").concat(tt),ht+="L ".concat(et+rt,",").concat(tt),ht+="L ".concat(et+rt-ut/2,",").concat(tt+st),ht+="L ".concat(et+rt-ut/2-it,",").concat(tt+st),ht+="L ".concat(et,",").concat(tt," Z"),ht},defaultProps$1={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Trapezoid=function _e(et){var tt=_objectSpread$h(_objectSpread$h({},defaultProps$1),et),rt=reactExports.useRef(),it=reactExports.useState(-1),st=_slicedToArray$3(it,2),ut=st[0],ht=st[1];reactExports.useEffect(function(){if(rt.current&&rt.current.getTotalLength)try{var jt=rt.current.getTotalLength();jt&&ht(jt)}catch{}},[]);var at=tt.x,gt=tt.y,bt=tt.upperWidth,wt=tt.lowerWidth,St=tt.height,kt=tt.className,Rt=tt.animationEasing,It=tt.animationDuration,Dt=tt.animationBegin,Mt=tt.isUpdateAnimationActive;if(at!==+at||gt!==+gt||bt!==+bt||wt!==+wt||St!==+St||bt===0&&wt===0||St===0)return null;var $t=clsx$1("recharts-trapezoid",kt);return Mt?React$1.createElement(Animate,{canBegin:ut>0,from:{upperWidth:0,lowerWidth:0,height:St,x:at,y:gt},to:{upperWidth:bt,lowerWidth:wt,height:St,x:at,y:gt},duration:It,animationEasing:Rt,isActive:Mt},function(jt){var Nt=jt.upperWidth,Ut=jt.lowerWidth,Ht=jt.height,Kt=jt.x,tr=jt.y;return React$1.createElement(Animate,{canBegin:ut>0,from:"0px ".concat(ut===-1?1:ut,"px"),to:"".concat(ut,"px 0px"),attributeName:"strokeDasharray",begin:Dt,duration:It,easing:Rt},React$1.createElement("path",_extends$f({},filterProps(tt,!0),{className:$t,d:getTrapezoidPath(Kt,tr,Nt,Ut,Ht),ref:rt})))}):React$1.createElement("g",null,React$1.createElement("path",_extends$f({},filterProps(tt,!0),{className:$t,d:getTrapezoidPath(at,gt,bt,wt,St)})))},_excluded$7=["option","shapeType","propTransformer","activeClassName","isActive"];function _typeof$i(_e){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$i(_e)}function _objectWithoutProperties$8(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$8(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$8(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function ownKeys$h(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$g(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$h(Object(tt),!0).forEach(function(rt){_defineProperty$i(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$h(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$i(_e,et,tt){return et=_toPropertyKey$h(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$h(_e){var et=_toPrimitive$h(_e,"string");return _typeof$i(et)=="symbol"?et:String(et)}function _toPrimitive$h(_e,et){if(_typeof$i(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$i(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function defaultPropTransformer(_e,et){return _objectSpread$g(_objectSpread$g({},et),_e)}function isSymbolsProps(_e,et){return _e==="symbols"}function ShapeSelector(_e){var et=_e.shapeType,tt=_e.elementProps;switch(et){case"rectangle":return React$1.createElement(Rectangle,tt);case"trapezoid":return React$1.createElement(Trapezoid,tt);case"sector":return React$1.createElement(Sector,tt);case"symbols":if(isSymbolsProps(et))return React$1.createElement(Symbols,tt);break;default:return null}}function getPropsFromShapeOption(_e){return reactExports.isValidElement(_e)?_e.props:_e}function Shape(_e){var et=_e.option,tt=_e.shapeType,rt=_e.propTransformer,it=rt===void 0?defaultPropTransformer:rt,st=_e.activeClassName,ut=st===void 0?"recharts-active-shape":st,ht=_e.isActive,at=_objectWithoutProperties$8(_e,_excluded$7),gt;if(reactExports.isValidElement(et))gt=reactExports.cloneElement(et,_objectSpread$g(_objectSpread$g({},at),getPropsFromShapeOption(et)));else if(isFunction$4(et))gt=et(at);else if(isPlainObject$2(et)&&!isBoolean$3(et)){var bt=it(et,at);gt=React$1.createElement(ShapeSelector,{shapeType:tt,elementProps:bt})}else{var wt=at;gt=React$1.createElement(ShapeSelector,{shapeType:tt,elementProps:wt})}return ht?React$1.createElement(Layer$2,{className:ut},gt):gt}function isFunnel(_e,et){return et!=null&&"trapezoids"in _e.props}function isPie(_e,et){return et!=null&&"sectors"in _e.props}function isScatter(_e,et){return et!=null&&"points"in _e.props}function compareFunnel(_e,et){var tt,rt,it=_e.x===(et==null||(tt=et.labelViewBox)===null||tt===void 0?void 0:tt.x)||_e.x===et.x,st=_e.y===(et==null||(rt=et.labelViewBox)===null||rt===void 0?void 0:rt.y)||_e.y===et.y;return it&&st}function comparePie(_e,et){var tt=_e.endAngle===et.endAngle,rt=_e.startAngle===et.startAngle;return tt&&rt}function compareScatter(_e,et){var tt=_e.x===et.x,rt=_e.y===et.y,it=_e.z===et.z;return tt&&rt&&it}function getComparisonFn(_e,et){var tt;return isFunnel(_e,et)?tt=compareFunnel:isPie(_e,et)?tt=comparePie:isScatter(_e,et)&&(tt=compareScatter),tt}function getShapeDataKey(_e,et){var tt;return isFunnel(_e,et)?tt="trapezoids":isPie(_e,et)?tt="sectors":isScatter(_e,et)&&(tt="points"),tt}function getActiveShapeTooltipPayload(_e,et){if(isFunnel(_e,et)){var tt;return(tt=et.tooltipPayload)===null||tt===void 0||(tt=tt[0])===null||tt===void 0||(tt=tt.payload)===null||tt===void 0?void 0:tt.payload}if(isPie(_e,et)){var rt;return(rt=et.tooltipPayload)===null||rt===void 0||(rt=rt[0])===null||rt===void 0||(rt=rt.payload)===null||rt===void 0?void 0:rt.payload}return isScatter(_e,et)?et.payload:{}}function getActiveShapeIndexForTooltip(_e){var et=_e.activeTooltipItem,tt=_e.graphicalItem,rt=_e.itemData,it=getShapeDataKey(tt,et),st=getActiveShapeTooltipPayload(tt,et),ut=rt.filter(function(at,gt){var bt=isEqual$1(st,at),wt=tt.props[it].filter(function(Rt){var It=getComparisonFn(tt,et);return It(Rt,et)}),St=tt.props[it].indexOf(wt[wt.length-1]),kt=gt===St;return bt&&kt}),ht=rt.indexOf(ut[ut.length-1]);return ht}var _Pie;function _typeof$h(_e){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$h(_e)}function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$e.apply(this,arguments)}function ownKeys$g(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$f(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$g(Object(tt),!0).forEach(function(rt){_defineProperty$h(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$g(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$9(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$9(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$g(rt.key),rt)}}function _createClass$9(_e,et,tt){return et&&_defineProperties$9(_e.prototype,et),tt&&_defineProperties$9(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$6(_e,et,tt){return et=_getPrototypeOf$7(et),_possibleConstructorReturn$7(_e,_isNativeReflectConstruct$6()?Reflect.construct(et,tt||[],_getPrototypeOf$7(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$7(_e,et){if(et&&(_typeof$h(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$7(_e)}function _isNativeReflectConstruct$6(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$6=function(){return!!_e})()}function _getPrototypeOf$7(_e){return _getPrototypeOf$7=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$7(_e)}function _assertThisInitialized$7(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$7(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$7(_e,et)}function _setPrototypeOf$7(_e,et){return _setPrototypeOf$7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$7(_e,et)}function _defineProperty$h(_e,et,tt){return et=_toPropertyKey$g(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$g(_e){var et=_toPrimitive$g(_e,"string");return _typeof$h(et)=="symbol"?et:String(et)}function _toPrimitive$g(_e,et){if(_typeof$h(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$h(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var Pie=function(_e){_inherits$7(et,_e);function et(tt){var rt;return _classCallCheck$9(this,et),rt=_callSuper$6(this,et,[tt]),_defineProperty$h(_assertThisInitialized$7(rt),"pieRef",null),_defineProperty$h(_assertThisInitialized$7(rt),"sectorRefs",[]),_defineProperty$h(_assertThisInitialized$7(rt),"id",uniqueId("recharts-pie-")),_defineProperty$h(_assertThisInitialized$7(rt),"handleAnimationEnd",function(){var it=rt.props.onAnimationEnd;rt.setState({isAnimationFinished:!0}),isFunction$4(it)&&it()}),_defineProperty$h(_assertThisInitialized$7(rt),"handleAnimationStart",function(){var it=rt.props.onAnimationStart;rt.setState({isAnimationFinished:!1}),isFunction$4(it)&&it()}),rt.state={isAnimationFinished:!tt.isAnimationActive,prevIsAnimationActive:tt.isAnimationActive,prevAnimationId:tt.animationId,sectorToFocus:0},rt}return _createClass$9(et,[{key:"isActiveIndex",value:function(rt){var it=this.props.activeIndex;return Array.isArray(it)?it.indexOf(rt)!==-1:rt===it}},{key:"hasActiveIndex",value:function(){var rt=this.props.activeIndex;return Array.isArray(rt)?rt.length!==0:rt||rt===0}},{key:"renderLabels",value:function(rt){var it=this.props.isAnimationActive;if(it&&!this.state.isAnimationFinished)return null;var st=this.props,ut=st.label,ht=st.labelLine,at=st.dataKey,gt=st.valueKey,bt=filterProps(this.props,!1),wt=filterProps(ut,!1),St=filterProps(ht,!1),kt=ut&&ut.offsetRadius||20,Rt=rt.map(function(It,Dt){var Mt=(It.startAngle+It.endAngle)/2,$t=polarToCartesian(It.cx,It.cy,It.outerRadius+kt,Mt),jt=_objectSpread$f(_objectSpread$f(_objectSpread$f(_objectSpread$f({},bt),It),{},{stroke:"none"},wt),{},{index:Dt,textAnchor:et.getTextAnchor($t.x,It.cx)},$t),Nt=_objectSpread$f(_objectSpread$f(_objectSpread$f(_objectSpread$f({},bt),It),{},{fill:"none",stroke:It.fill},St),{},{index:Dt,points:[polarToCartesian(It.cx,It.cy,It.outerRadius,Mt),$t],key:"line"}),Ut=at;return isNil$1(at)&&isNil$1(gt)?Ut="value":isNil$1(at)&&(Ut=gt),React$1.createElement(Layer$2,{key:"label-".concat(It.startAngle,"-").concat(It.endAngle,"-").concat(It.midAngle,"-").concat(Dt)},ht&&et.renderLabelLineItem(ht,Nt),et.renderLabelItem(ut,jt,getValueByDataKey(It,Ut)))});return React$1.createElement(Layer$2,{className:"recharts-pie-labels"},Rt)}},{key:"renderSectorsStatically",value:function(rt){var it=this,st=this.props,ut=st.activeShape,ht=st.blendStroke,at=st.inactiveShape;return rt.map(function(gt,bt){if((gt==null?void 0:gt.startAngle)===0&&(gt==null?void 0:gt.endAngle)===0&&rt.length!==1)return null;var wt=it.isActiveIndex(bt),St=at&&it.hasActiveIndex()?at:null,kt=wt?ut:St,Rt=_objectSpread$f(_objectSpread$f({},gt),{},{stroke:ht?gt.fill:gt.stroke,tabIndex:-1});return React$1.createElement(Layer$2,_extends$e({ref:function(Dt){Dt&&!it.sectorRefs.includes(Dt)&&it.sectorRefs.push(Dt)},tabIndex:-1,className:"recharts-pie-sector"},adaptEventsOfChild(it.props,gt,bt),{key:"sector-".concat(gt==null?void 0:gt.startAngle,"-").concat(gt==null?void 0:gt.endAngle,"-").concat(gt.midAngle,"-").concat(bt)}),React$1.createElement(Shape,_extends$e({option:kt,isActive:wt,shapeType:"sector"},Rt)))})}},{key:"renderSectorsWithAnimation",value:function(){var rt=this,it=this.props,st=it.sectors,ut=it.isAnimationActive,ht=it.animationBegin,at=it.animationDuration,gt=it.animationEasing,bt=it.animationId,wt=this.state,St=wt.prevSectors,kt=wt.prevIsAnimationActive;return React$1.createElement(Animate,{begin:ht,duration:at,isActive:ut,easing:gt,from:{t:0},to:{t:1},key:"pie-".concat(bt,"-").concat(kt),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(Rt){var It=Rt.t,Dt=[],Mt=st&&st[0],$t=Mt.startAngle;return st.forEach(function(jt,Nt){var Ut=St&&St[Nt],Ht=Nt>0?get$4(jt,"paddingAngle",0):0;if(Ut){var Kt=interpolateNumber$2(Ut.endAngle-Ut.startAngle,jt.endAngle-jt.startAngle),tr=_objectSpread$f(_objectSpread$f({},jt),{},{startAngle:$t+Ht,endAngle:$t+Kt(It)+Ht});Dt.push(tr),$t=tr.endAngle}else{var mr=jt.endAngle,vr=jt.startAngle,wr=interpolateNumber$2(0,mr-vr),yr=wr(It),Or=_objectSpread$f(_objectSpread$f({},jt),{},{startAngle:$t+Ht,endAngle:$t+yr+Ht});Dt.push(Or),$t=Or.endAngle}}),React$1.createElement(Layer$2,null,rt.renderSectorsStatically(Dt))})}},{key:"attachKeyboardHandlers",value:function(rt){var it=this;rt.onkeydown=function(st){if(!st.altKey)switch(st.key){case"ArrowLeft":{var ut=++it.state.sectorToFocus%it.sectorRefs.length;it.sectorRefs[ut].focus(),it.setState({sectorToFocus:ut});break}case"ArrowRight":{var ht=--it.state.sectorToFocus<0?it.sectorRefs.length-1:it.state.sectorToFocus%it.sectorRefs.length;it.sectorRefs[ht].focus(),it.setState({sectorToFocus:ht});break}case"Escape":{it.sectorRefs[it.state.sectorToFocus].blur(),it.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var rt=this.props,it=rt.sectors,st=rt.isAnimationActive,ut=this.state.prevSectors;return st&&it&&it.length&&(!ut||!isEqual$1(ut,it))?this.renderSectorsWithAnimation():this.renderSectorsStatically(it)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var rt=this,it=this.props,st=it.hide,ut=it.sectors,ht=it.className,at=it.label,gt=it.cx,bt=it.cy,wt=it.innerRadius,St=it.outerRadius,kt=it.isAnimationActive,Rt=this.state.isAnimationFinished;if(st||!ut||!ut.length||!isNumber$2(gt)||!isNumber$2(bt)||!isNumber$2(wt)||!isNumber$2(St))return null;var It=clsx$1("recharts-pie",ht);return React$1.createElement(Layer$2,{tabIndex:this.props.rootTabIndex,className:It,ref:function(Mt){rt.pieRef=Mt}},this.renderSectors(),at&&this.renderLabels(ut),Label$4.renderCallByParent(this.props,null,!1),(!kt||Rt)&&LabelList.renderCallByParent(this.props,ut,!1))}}],[{key:"getDerivedStateFromProps",value:function(rt,it){return it.prevIsAnimationActive!==rt.isAnimationActive?{prevIsAnimationActive:rt.isAnimationActive,prevAnimationId:rt.animationId,curSectors:rt.sectors,prevSectors:[],isAnimationFinished:!0}:rt.isAnimationActive&&rt.animationId!==it.prevAnimationId?{prevAnimationId:rt.animationId,curSectors:rt.sectors,prevSectors:it.curSectors,isAnimationFinished:!0}:rt.sectors!==it.curSectors?{curSectors:rt.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(rt,it){return rt>it?"start":rt<it?"end":"middle"}},{key:"renderLabelLineItem",value:function(rt,it){if(React$1.isValidElement(rt))return React$1.cloneElement(rt,it);if(isFunction$4(rt))return rt(it);var st=clsx$1("recharts-pie-label-line",typeof rt!="boolean"?rt.className:"");return React$1.createElement(Curve,_extends$e({},it,{type:"linear",className:st}))}},{key:"renderLabelItem",value:function(rt,it,st){if(React$1.isValidElement(rt))return React$1.cloneElement(rt,it);var ut=st;if(isFunction$4(rt)&&(ut=rt(it),React$1.isValidElement(ut)))return ut;var ht=clsx$1("recharts-pie-label-text",typeof rt!="boolean"&&!isFunction$4(rt)?rt.className:"");return React$1.createElement(Text,_extends$e({},it,{alignmentBaseline:"middle",className:ht}),ut)}}]),et}(reactExports.PureComponent);_Pie=Pie;_defineProperty$h(Pie,"displayName","Pie");_defineProperty$h(Pie,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Global.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});_defineProperty$h(Pie,"parseDeltaAngle",function(_e,et){var tt=mathSign$1(et-_e),rt=Math.min(Math.abs(et-_e),360);return tt*rt});_defineProperty$h(Pie,"getRealPieData",function(_e){var et=_e.props,tt=et.data,rt=et.children,it=filterProps(_e.props,!1),st=findAllByType(rt,Cell);return tt&&tt.length?tt.map(function(ut,ht){return _objectSpread$f(_objectSpread$f(_objectSpread$f({payload:ut},it),ut),st&&st[ht]&&st[ht].props)}):st&&st.length?st.map(function(ut){return _objectSpread$f(_objectSpread$f({},it),ut.props)}):[]});_defineProperty$h(Pie,"parseCoordinateOfPie",function(_e,et){var tt=et.top,rt=et.left,it=et.width,st=et.height,ut=getMaxRadius(it,st),ht=rt+getPercentValue(_e.props.cx,it,it/2),at=tt+getPercentValue(_e.props.cy,st,st/2),gt=getPercentValue(_e.props.innerRadius,ut,0),bt=getPercentValue(_e.props.outerRadius,ut,ut*.8),wt=_e.props.maxRadius||Math.sqrt(it*it+st*st)/2;return{cx:ht,cy:at,innerRadius:gt,outerRadius:bt,maxRadius:wt}});_defineProperty$h(Pie,"getComposedData",function(_e){var et=_e.item,tt=_e.offset,rt=_Pie.getRealPieData(et);if(!rt||!rt.length)return null;var it=et.props,st=it.cornerRadius,ut=it.startAngle,ht=it.endAngle,at=it.paddingAngle,gt=it.dataKey,bt=it.nameKey,wt=it.valueKey,St=it.tooltipType,kt=Math.abs(et.props.minAngle),Rt=_Pie.parseCoordinateOfPie(et,tt),It=_Pie.parseDeltaAngle(ut,ht),Dt=Math.abs(It),Mt=gt;isNil$1(gt)&&isNil$1(wt)?(warn$1(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),Mt="value"):isNil$1(gt)&&(warn$1(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),Mt=wt);var $t=rt.filter(function(tr){return getValueByDataKey(tr,Mt,0)!==0}).length,jt=(Dt>=360?$t:$t-1)*at,Nt=Dt-$t*kt-jt,Ut=rt.reduce(function(tr,mr){var vr=getValueByDataKey(mr,Mt,0);return tr+(isNumber$2(vr)?vr:0)},0),Ht;if(Ut>0){var Kt;Ht=rt.map(function(tr,mr){var vr=getValueByDataKey(tr,Mt,0),wr=getValueByDataKey(tr,bt,mr),yr=(isNumber$2(vr)?vr:0)/Ut,Or;mr?Or=Kt.endAngle+mathSign$1(It)*at*(vr!==0?1:0):Or=ut;var Nr=Or+mathSign$1(It)*((vr!==0?kt:0)+yr*Nt),Lr=(Or+Nr)/2,ar=(Rt.innerRadius+Rt.outerRadius)/2,hr=[{name:wr,value:vr,payload:tr,dataKey:Mt,type:St}],Qt=polarToCartesian(Rt.cx,Rt.cy,ar,Lr);return Kt=_objectSpread$f(_objectSpread$f(_objectSpread$f({percent:yr,cornerRadius:st,name:wr,tooltipPayload:hr,midAngle:Lr,middleRadius:ar,tooltipPosition:Qt},tr),Rt),{},{value:getValueByDataKey(tr,Mt),startAngle:Or,endAngle:Nr,payload:tr,paddingAngle:mathSign$1(It)*at}),Kt})}return _objectSpread$f(_objectSpread$f({},Rt),{},{sectors:Ht,data:rt})});var nativeCeil=Math.ceil,nativeMax$1=Math.max;function baseRange$1(_e,et,tt,rt){for(var it=-1,st=nativeMax$1(nativeCeil((et-_e)/(tt||1)),0),ut=Array(st);st--;)ut[rt?st:++it]=_e,_e+=tt;return ut}var _baseRange=baseRange$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$2(_e){if(!_e)return _e===0?_e:0;if(_e=toNumber(_e),_e===INFINITY||_e===-INFINITY){var et=_e<0?-1:1;return et*MAX_INTEGER}return _e===_e?_e:0}var toFinite_1=toFinite$2,baseRange=_baseRange,isIterateeCall$2=_isIterateeCall,toFinite$1=toFinite_1;function createRange$1(_e){return function(et,tt,rt){return rt&&typeof rt!="number"&&isIterateeCall$2(et,tt,rt)&&(tt=rt=void 0),et=toFinite$1(et),tt===void 0?(tt=et,et=0):tt=toFinite$1(tt),rt=rt===void 0?et<tt?1:-1:toFinite$1(rt),baseRange(et,tt,rt,_e)}}var _createRange=createRange$1,createRange=_createRange,range$1=createRange(),range_1=range$1;const range$2=getDefaultExportFromCjs(range_1);function _typeof$g(_e){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$g(_e)}function ownKeys$f(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$e(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$f(Object(tt),!0).forEach(function(rt){_defineProperty$g(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$f(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$g(_e,et,tt){return et=_toPropertyKey$f(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$f(_e){var et=_toPrimitive$f(_e,"string");return _typeof$g(et)=="symbol"?et:String(et)}function _toPrimitive$f(_e,et){if(_typeof$g(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$g(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var PREFIX_LIST=["Webkit","Moz","O","ms"],generatePrefixStyle=function _e(et,tt){var rt=et.replace(/(\w)/,function(st){return st.toUpperCase()}),it=PREFIX_LIST.reduce(function(st,ut){return _objectSpread$e(_objectSpread$e({},st),{},_defineProperty$g({},ut+rt,tt))},{});return it[et]=tt,it};function _typeof$f(_e){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$f(_e)}function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$d.apply(this,arguments)}function ownKeys$e(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$d(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$e(Object(tt),!0).forEach(function(rt){_defineProperty$f(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$e(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$8(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$8(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$e(rt.key),rt)}}function _createClass$8(_e,et,tt){return et&&_defineProperties$8(_e.prototype,et),tt&&_defineProperties$8(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$5(_e,et,tt){return et=_getPrototypeOf$6(et),_possibleConstructorReturn$6(_e,_isNativeReflectConstruct$5()?Reflect.construct(et,tt||[],_getPrototypeOf$6(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$6(_e,et){if(et&&(_typeof$f(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$6(_e)}function _isNativeReflectConstruct$5(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$5=function(){return!!_e})()}function _getPrototypeOf$6(_e){return _getPrototypeOf$6=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$6(_e)}function _assertThisInitialized$6(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$6(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$6(_e,et)}function _setPrototypeOf$6(_e,et){return _setPrototypeOf$6=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$6(_e,et)}function _defineProperty$f(_e,et,tt){return et=_toPropertyKey$e(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$e(_e){var et=_toPrimitive$e(_e,"string");return _typeof$f(et)=="symbol"?et:String(et)}function _toPrimitive$e(_e,et){if(_typeof$f(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$f(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var createScale=function _e(et){var tt=et.data,rt=et.startIndex,it=et.endIndex,st=et.x,ut=et.width,ht=et.travellerWidth;if(!tt||!tt.length)return{};var at=tt.length,gt=point().domain(range$2(0,at)).range([st,st+ut-ht]),bt=gt.domain().map(function(wt){return gt(wt)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:gt(rt),endX:gt(it),scale:gt,scaleValues:bt}},isTouch=function _e(et){return et.changedTouches&&!!et.changedTouches.length},Brush=function(_e){_inherits$6(et,_e);function et(tt){var rt;return _classCallCheck$8(this,et),rt=_callSuper$5(this,et,[tt]),_defineProperty$f(_assertThisInitialized$6(rt),"handleDrag",function(it){rt.leaveTimer&&(clearTimeout(rt.leaveTimer),rt.leaveTimer=null),rt.state.isTravellerMoving?rt.handleTravellerMove(it):rt.state.isSlideMoving&&rt.handleSlideDrag(it)}),_defineProperty$f(_assertThisInitialized$6(rt),"handleTouchMove",function(it){it.changedTouches!=null&&it.changedTouches.length>0&&rt.handleDrag(it.changedTouches[0])}),_defineProperty$f(_assertThisInitialized$6(rt),"handleDragEnd",function(){rt.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var it=rt.props,st=it.endIndex,ut=it.onDragEnd,ht=it.startIndex;ut==null||ut({endIndex:st,startIndex:ht})}),rt.detachDragEndListener()}),_defineProperty$f(_assertThisInitialized$6(rt),"handleLeaveWrapper",function(){(rt.state.isTravellerMoving||rt.state.isSlideMoving)&&(rt.leaveTimer=window.setTimeout(rt.handleDragEnd,rt.props.leaveTimeOut))}),_defineProperty$f(_assertThisInitialized$6(rt),"handleEnterSlideOrTraveller",function(){rt.setState({isTextActive:!0})}),_defineProperty$f(_assertThisInitialized$6(rt),"handleLeaveSlideOrTraveller",function(){rt.setState({isTextActive:!1})}),_defineProperty$f(_assertThisInitialized$6(rt),"handleSlideDragStart",function(it){var st=isTouch(it)?it.changedTouches[0]:it;rt.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:st.pageX}),rt.attachDragEndListener()}),rt.travellerDragStartHandlers={startX:rt.handleTravellerDragStart.bind(_assertThisInitialized$6(rt),"startX"),endX:rt.handleTravellerDragStart.bind(_assertThisInitialized$6(rt),"endX")},rt.state={},rt}return _createClass$8(et,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(rt){var it=rt.startX,st=rt.endX,ut=this.state.scaleValues,ht=this.props,at=ht.gap,gt=ht.data,bt=gt.length-1,wt=Math.min(it,st),St=Math.max(it,st),kt=et.getIndexInRange(ut,wt),Rt=et.getIndexInRange(ut,St);return{startIndex:kt-kt%at,endIndex:Rt===bt?bt:Rt-Rt%at}}},{key:"getTextOfTick",value:function(rt){var it=this.props,st=it.data,ut=it.tickFormatter,ht=it.dataKey,at=getValueByDataKey(st[rt],ht,rt);return isFunction$4(ut)?ut(at,rt):at}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(rt){var it=this.state,st=it.slideMoveStartX,ut=it.startX,ht=it.endX,at=this.props,gt=at.x,bt=at.width,wt=at.travellerWidth,St=at.startIndex,kt=at.endIndex,Rt=at.onChange,It=rt.pageX-st;It>0?It=Math.min(It,gt+bt-wt-ht,gt+bt-wt-ut):It<0&&(It=Math.max(It,gt-ut,gt-ht));var Dt=this.getIndex({startX:ut+It,endX:ht+It});(Dt.startIndex!==St||Dt.endIndex!==kt)&&Rt&&Rt(Dt),this.setState({startX:ut+It,endX:ht+It,slideMoveStartX:rt.pageX})}},{key:"handleTravellerDragStart",value:function(rt,it){var st=isTouch(it)?it.changedTouches[0]:it;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:rt,brushMoveStartX:st.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(rt){var it=this.state,st=it.brushMoveStartX,ut=it.movingTravellerId,ht=it.endX,at=it.startX,gt=this.state[ut],bt=this.props,wt=bt.x,St=bt.width,kt=bt.travellerWidth,Rt=bt.onChange,It=bt.gap,Dt=bt.data,Mt={startX:this.state.startX,endX:this.state.endX},$t=rt.pageX-st;$t>0?$t=Math.min($t,wt+St-kt-gt):$t<0&&($t=Math.max($t,wt-gt)),Mt[ut]=gt+$t;var jt=this.getIndex(Mt),Nt=jt.startIndex,Ut=jt.endIndex,Ht=function(){var tr=Dt.length-1;return ut==="startX"&&(ht>at?Nt%It===0:Ut%It===0)||ht<at&&Ut===tr||ut==="endX"&&(ht>at?Ut%It===0:Nt%It===0)||ht>at&&Ut===tr};this.setState(_defineProperty$f(_defineProperty$f({},ut,gt+$t),"brushMoveStartX",rt.pageX),function(){Rt&&Ht()&&Rt(jt)})}},{key:"handleTravellerMoveKeyboard",value:function(rt,it){var st=this,ut=this.state,ht=ut.scaleValues,at=ut.startX,gt=ut.endX,bt=this.state[it],wt=ht.indexOf(bt);if(wt!==-1){var St=wt+rt;if(!(St===-1||St>=ht.length)){var kt=ht[St];it==="startX"&&kt>=gt||it==="endX"&&kt<=at||this.setState(_defineProperty$f({},it,kt),function(){st.props.onChange(st.getIndex({startX:st.state.startX,endX:st.state.endX}))})}}}},{key:"renderBackground",value:function(){var rt=this.props,it=rt.x,st=rt.y,ut=rt.width,ht=rt.height,at=rt.fill,gt=rt.stroke;return React$1.createElement("rect",{stroke:gt,fill:at,x:it,y:st,width:ut,height:ht})}},{key:"renderPanorama",value:function(){var rt=this.props,it=rt.x,st=rt.y,ut=rt.width,ht=rt.height,at=rt.data,gt=rt.children,bt=rt.padding,wt=reactExports.Children.only(gt);return wt?React$1.cloneElement(wt,{x:it,y:st,width:ut,height:ht,margin:bt,compact:!0,data:at}):null}},{key:"renderTravellerLayer",value:function(rt,it){var st,ut,ht=this,at=this.props,gt=at.y,bt=at.travellerWidth,wt=at.height,St=at.traveller,kt=at.ariaLabel,Rt=at.data,It=at.startIndex,Dt=at.endIndex,Mt=Math.max(rt,this.props.x),$t=_objectSpread$d(_objectSpread$d({},filterProps(this.props,!1)),{},{x:Mt,y:gt,width:bt,height:wt}),jt=kt||"Min value: ".concat((st=Rt[It])===null||st===void 0?void 0:st.name,", Max value: ").concat((ut=Rt[Dt])===null||ut===void 0?void 0:ut.name);return React$1.createElement(Layer$2,{tabIndex:0,role:"slider","aria-label":jt,"aria-valuenow":rt,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[it],onTouchStart:this.travellerDragStartHandlers[it],onKeyDown:function(Ut){["ArrowLeft","ArrowRight"].includes(Ut.key)&&(Ut.preventDefault(),Ut.stopPropagation(),ht.handleTravellerMoveKeyboard(Ut.key==="ArrowRight"?1:-1,it))},onFocus:function(){ht.setState({isTravellerFocused:!0})},onBlur:function(){ht.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},et.renderTraveller(St,$t))}},{key:"renderSlide",value:function(rt,it){var st=this.props,ut=st.y,ht=st.height,at=st.stroke,gt=st.travellerWidth,bt=Math.min(rt,it)+gt,wt=Math.max(Math.abs(it-rt)-gt,0);return React$1.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:at,fillOpacity:.2,x:bt,y:ut,width:wt,height:ht})}},{key:"renderText",value:function(){var rt=this.props,it=rt.startIndex,st=rt.endIndex,ut=rt.y,ht=rt.height,at=rt.travellerWidth,gt=rt.stroke,bt=this.state,wt=bt.startX,St=bt.endX,kt=5,Rt={pointerEvents:"none",fill:gt};return React$1.createElement(Layer$2,{className:"recharts-brush-texts"},React$1.createElement(Text,_extends$d({textAnchor:"end",verticalAnchor:"middle",x:Math.min(wt,St)-kt,y:ut+ht/2},Rt),this.getTextOfTick(it)),React$1.createElement(Text,_extends$d({textAnchor:"start",verticalAnchor:"middle",x:Math.max(wt,St)+at+kt,y:ut+ht/2},Rt),this.getTextOfTick(st)))}},{key:"render",value:function(){var rt=this.props,it=rt.data,st=rt.className,ut=rt.children,ht=rt.x,at=rt.y,gt=rt.width,bt=rt.height,wt=rt.alwaysShowText,St=this.state,kt=St.startX,Rt=St.endX,It=St.isTextActive,Dt=St.isSlideMoving,Mt=St.isTravellerMoving,$t=St.isTravellerFocused;if(!it||!it.length||!isNumber$2(ht)||!isNumber$2(at)||!isNumber$2(gt)||!isNumber$2(bt)||gt<=0||bt<=0)return null;var jt=clsx$1("recharts-brush",st),Nt=React$1.Children.count(ut)===1,Ut=generatePrefixStyle("userSelect","none");return React$1.createElement(Layer$2,{className:jt,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:Ut},this.renderBackground(),Nt&&this.renderPanorama(),this.renderSlide(kt,Rt),this.renderTravellerLayer(kt,"startX"),this.renderTravellerLayer(Rt,"endX"),(It||Dt||Mt||$t||wt)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(rt){var it=rt.x,st=rt.y,ut=rt.width,ht=rt.height,at=rt.stroke,gt=Math.floor(st+ht/2)-1;return React$1.createElement(React$1.Fragment,null,React$1.createElement("rect",{x:it,y:st,width:ut,height:ht,fill:at,stroke:"none"}),React$1.createElement("line",{x1:it+1,y1:gt,x2:it+ut-1,y2:gt,fill:"none",stroke:"#fff"}),React$1.createElement("line",{x1:it+1,y1:gt+2,x2:it+ut-1,y2:gt+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(rt,it){var st;return React$1.isValidElement(rt)?st=React$1.cloneElement(rt,it):isFunction$4(rt)?st=rt(it):st=et.renderDefaultTraveller(it),st}},{key:"getDerivedStateFromProps",value:function(rt,it){var st=rt.data,ut=rt.width,ht=rt.x,at=rt.travellerWidth,gt=rt.updateId,bt=rt.startIndex,wt=rt.endIndex;if(st!==it.prevData||gt!==it.prevUpdateId)return _objectSpread$d({prevData:st,prevTravellerWidth:at,prevUpdateId:gt,prevX:ht,prevWidth:ut},st&&st.length?createScale({data:st,width:ut,x:ht,travellerWidth:at,startIndex:bt,endIndex:wt}):{scale:null,scaleValues:null});if(it.scale&&(ut!==it.prevWidth||ht!==it.prevX||at!==it.prevTravellerWidth)){it.scale.range([ht,ht+ut-at]);var St=it.scale.domain().map(function(kt){return it.scale(kt)});return{prevData:st,prevTravellerWidth:at,prevUpdateId:gt,prevX:ht,prevWidth:ut,startX:it.scale(rt.startIndex),endX:it.scale(rt.endIndex),scaleValues:St}}return null}},{key:"getIndexInRange",value:function(rt,it){for(var st=rt.length,ut=0,ht=st-1;ht-ut>1;){var at=Math.floor((ut+ht)/2);rt[at]>it?ht=at:ut=at}return it>=rt[ht]?ht:ut}}]),et}(reactExports.PureComponent);_defineProperty$f(Brush,"displayName","Brush");_defineProperty$f(Brush,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var baseEach$1=_baseEach;function baseSome$1(_e,et){var tt;return baseEach$1(_e,function(rt,it,st){return tt=et(rt,it,st),!tt}),!!tt}var _baseSome=baseSome$1,arraySome=_arraySome,baseIteratee$4=_baseIteratee,baseSome=_baseSome,isArray$1=isArray_1,isIterateeCall$1=_isIterateeCall;function some(_e,et,tt){var rt=isArray$1(_e)?arraySome:baseSome;return tt&&isIterateeCall$1(_e,et,tt)&&(et=void 0),rt(_e,baseIteratee$4(et))}var some_1=some;const some$1=getDefaultExportFromCjs(some_1);var ifOverflowMatches=function _e(et,tt){var rt=et.alwaysShow,it=et.ifOverflow;return rt&&(it="extendDomain"),it===tt},defineProperty=_defineProperty$E;function baseAssignValue$1(_e,et,tt){et=="__proto__"&&defineProperty?defineProperty(_e,et,{configurable:!0,enumerable:!0,value:tt,writable:!0}):_e[et]=tt}var _baseAssignValue=baseAssignValue$1,baseAssignValue=_baseAssignValue,baseForOwn=_baseForOwn,baseIteratee$3=_baseIteratee;function mapValues(_e,et){var tt={};return et=baseIteratee$3(et),baseForOwn(_e,function(rt,it,st){baseAssignValue(tt,it,et(rt,it,st))}),tt}var mapValues_1=mapValues;const mapValues$1=getDefaultExportFromCjs(mapValues_1);function arrayEvery$1(_e,et){for(var tt=-1,rt=_e==null?0:_e.length;++tt<rt;)if(!et(_e[tt],tt,_e))return!1;return!0}var _arrayEvery=arrayEvery$1,baseEach=_baseEach;function baseEvery$1(_e,et){var tt=!0;return baseEach(_e,function(rt,it,st){return tt=!!et(rt,it,st),tt}),tt}var _baseEvery=baseEvery$1,arrayEvery=_arrayEvery,baseEvery=_baseEvery,baseIteratee$2=_baseIteratee,isArray=isArray_1,isIterateeCall=_isIterateeCall;function every(_e,et,tt){var rt=isArray(_e)?arrayEvery:baseEvery;return tt&&isIterateeCall(_e,et,tt)&&(et=void 0),rt(_e,baseIteratee$2(et))}var every_1=every;const every$1=getDefaultExportFromCjs(every_1);var _excluded$6=["x","y"];function _typeof$e(_e){"@babel/helpers - typeof";return _typeof$e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$e(_e)}function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$c.apply(this,arguments)}function ownKeys$d(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$c(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$d(Object(tt),!0).forEach(function(rt){_defineProperty$e(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$d(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$e(_e,et,tt){return et=_toPropertyKey$d(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$d(_e){var et=_toPrimitive$d(_e,"string");return _typeof$e(et)=="symbol"?et:String(et)}function _toPrimitive$d(_e,et){if(_typeof$e(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$e(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _objectWithoutProperties$7(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$7(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$7(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function typeguardBarRectangleProps(_e,et){var tt=_e.x,rt=_e.y,it=_objectWithoutProperties$7(_e,_excluded$6),st="".concat(tt),ut=parseInt(st,10),ht="".concat(rt),at=parseInt(ht,10),gt="".concat(et.height||it.height),bt=parseInt(gt,10),wt="".concat(et.width||it.width),St=parseInt(wt,10);return _objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c(_objectSpread$c({},et),it),ut?{x:ut}:{}),at?{y:at}:{}),{},{height:bt,width:St,name:et.name,radius:et.radius})}function BarRectangle(_e){return React$1.createElement(Shape,_extends$c({shapeType:"rectangle",propTransformer:typeguardBarRectangleProps,activeClassName:"recharts-active-bar"},_e))}var minPointSizeCallback=function _e(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(rt,it){if(typeof et=="number")return et;var st=typeof rt=="number";return st?et(rt,it):(st||invariant(),tt)}},_excluded$5=["value","background"],_Bar;function _typeof$d(_e){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$d(_e)}function _objectWithoutProperties$6(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$6(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$6(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$b.apply(this,arguments)}function ownKeys$c(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$b(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$c(Object(tt),!0).forEach(function(rt){_defineProperty$d(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$c(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$7(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$7(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$c(rt.key),rt)}}function _createClass$7(_e,et,tt){return et&&_defineProperties$7(_e.prototype,et),tt&&_defineProperties$7(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$4(_e,et,tt){return et=_getPrototypeOf$5(et),_possibleConstructorReturn$5(_e,_isNativeReflectConstruct$4()?Reflect.construct(et,tt||[],_getPrototypeOf$5(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$5(_e,et){if(et&&(_typeof$d(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$5(_e)}function _isNativeReflectConstruct$4(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$4=function(){return!!_e})()}function _getPrototypeOf$5(_e){return _getPrototypeOf$5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$5(_e)}function _assertThisInitialized$5(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$5(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$5(_e,et)}function _setPrototypeOf$5(_e,et){return _setPrototypeOf$5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$5(_e,et)}function _defineProperty$d(_e,et,tt){return et=_toPropertyKey$c(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$c(_e){var et=_toPrimitive$c(_e,"string");return _typeof$d(et)=="symbol"?et:String(et)}function _toPrimitive$c(_e,et){if(_typeof$d(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$d(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var Bar=function(_e){_inherits$5(et,_e);function et(){var tt;_classCallCheck$7(this,et);for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return tt=_callSuper$4(this,et,[].concat(it)),_defineProperty$d(_assertThisInitialized$5(tt),"state",{isAnimationFinished:!1}),_defineProperty$d(_assertThisInitialized$5(tt),"id",uniqueId("recharts-bar-")),_defineProperty$d(_assertThisInitialized$5(tt),"handleAnimationEnd",function(){var ut=tt.props.onAnimationEnd;tt.setState({isAnimationFinished:!0}),ut&&ut()}),_defineProperty$d(_assertThisInitialized$5(tt),"handleAnimationStart",function(){var ut=tt.props.onAnimationStart;tt.setState({isAnimationFinished:!1}),ut&&ut()}),tt}return _createClass$7(et,[{key:"renderRectanglesStatically",value:function(rt){var it=this,st=this.props,ut=st.shape,ht=st.dataKey,at=st.activeIndex,gt=st.activeBar,bt=filterProps(this.props,!1);return rt&&rt.map(function(wt,St){var kt=St===at,Rt=kt?gt:ut,It=_objectSpread$b(_objectSpread$b(_objectSpread$b({},bt),wt),{},{isActive:kt,option:Rt,index:St,dataKey:ht,onAnimationStart:it.handleAnimationStart,onAnimationEnd:it.handleAnimationEnd});return React$1.createElement(Layer$2,_extends$b({className:"recharts-bar-rectangle"},adaptEventsOfChild(it.props,wt,St),{key:"rectangle-".concat(wt==null?void 0:wt.x,"-").concat(wt==null?void 0:wt.y,"-").concat(wt==null?void 0:wt.value)}),React$1.createElement(BarRectangle,It))})}},{key:"renderRectanglesWithAnimation",value:function(){var rt=this,it=this.props,st=it.data,ut=it.layout,ht=it.isAnimationActive,at=it.animationBegin,gt=it.animationDuration,bt=it.animationEasing,wt=it.animationId,St=this.state.prevData;return React$1.createElement(Animate,{begin:at,duration:gt,isActive:ht,easing:bt,from:{t:0},to:{t:1},key:"bar-".concat(wt),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(kt){var Rt=kt.t,It=st.map(function(Dt,Mt){var $t=St&&St[Mt];if($t){var jt=interpolateNumber$2($t.x,Dt.x),Nt=interpolateNumber$2($t.y,Dt.y),Ut=interpolateNumber$2($t.width,Dt.width),Ht=interpolateNumber$2($t.height,Dt.height);return _objectSpread$b(_objectSpread$b({},Dt),{},{x:jt(Rt),y:Nt(Rt),width:Ut(Rt),height:Ht(Rt)})}if(ut==="horizontal"){var Kt=interpolateNumber$2(0,Dt.height),tr=Kt(Rt);return _objectSpread$b(_objectSpread$b({},Dt),{},{y:Dt.y+Dt.height-tr,height:tr})}var mr=interpolateNumber$2(0,Dt.width),vr=mr(Rt);return _objectSpread$b(_objectSpread$b({},Dt),{},{width:vr})});return React$1.createElement(Layer$2,null,rt.renderRectanglesStatically(It))})}},{key:"renderRectangles",value:function(){var rt=this.props,it=rt.data,st=rt.isAnimationActive,ut=this.state.prevData;return st&&it&&it.length&&(!ut||!isEqual$1(ut,it))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(it)}},{key:"renderBackground",value:function(){var rt=this,it=this.props,st=it.data,ut=it.dataKey,ht=it.activeIndex,at=filterProps(this.props.background,!1);return st.map(function(gt,bt){gt.value;var wt=gt.background,St=_objectWithoutProperties$6(gt,_excluded$5);if(!wt)return null;var kt=_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b(_objectSpread$b({},St),{},{fill:"#eee"},wt),at),adaptEventsOfChild(rt.props,gt,bt)),{},{onAnimationStart:rt.handleAnimationStart,onAnimationEnd:rt.handleAnimationEnd,dataKey:ut,index:bt,key:"background-bar-".concat(bt),className:"recharts-bar-background-rectangle"});return React$1.createElement(BarRectangle,_extends$b({option:rt.props.background,isActive:bt===ht},kt))})}},{key:"renderErrorBar",value:function(rt,it){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var st=this.props,ut=st.data,ht=st.xAxis,at=st.yAxis,gt=st.layout,bt=st.children,wt=findAllByType(bt,ErrorBar);if(!wt)return null;var St=gt==="vertical"?ut[0].height/2:ut[0].width/2,kt=function(Dt,Mt){var $t=Array.isArray(Dt.value)?Dt.value[1]:Dt.value;return{x:Dt.x,y:Dt.y,value:$t,errorVal:getValueByDataKey(Dt,Mt)}},Rt={clipPath:rt?"url(#clipPath-".concat(it,")"):null};return React$1.createElement(Layer$2,Rt,wt.map(function(It){return React$1.cloneElement(It,{key:"error-bar-".concat(it,"-").concat(It.props.dataKey),data:ut,xAxis:ht,yAxis:at,layout:gt,offset:St,dataPointFormatter:kt})}))}},{key:"render",value:function(){var rt=this.props,it=rt.hide,st=rt.data,ut=rt.className,ht=rt.xAxis,at=rt.yAxis,gt=rt.left,bt=rt.top,wt=rt.width,St=rt.height,kt=rt.isAnimationActive,Rt=rt.background,It=rt.id;if(it||!st||!st.length)return null;var Dt=this.state.isAnimationFinished,Mt=clsx$1("recharts-bar",ut),$t=ht&&ht.allowDataOverflow,jt=at&&at.allowDataOverflow,Nt=$t||jt,Ut=isNil$1(It)?this.id:It;return React$1.createElement(Layer$2,{className:Mt},$t||jt?React$1.createElement("defs",null,React$1.createElement("clipPath",{id:"clipPath-".concat(Ut)},React$1.createElement("rect",{x:$t?gt:gt-wt/2,y:jt?bt:bt-St/2,width:$t?wt:wt*2,height:jt?St:St*2}))):null,React$1.createElement(Layer$2,{className:"recharts-bar-rectangles",clipPath:Nt?"url(#clipPath-".concat(Ut,")"):null},Rt?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(Nt,Ut),(!kt||Dt)&&LabelList.renderCallByParent(this.props,st))}}],[{key:"getDerivedStateFromProps",value:function(rt,it){return rt.animationId!==it.prevAnimationId?{prevAnimationId:rt.animationId,curData:rt.data,prevData:it.curData}:rt.data!==it.curData?{curData:rt.data}:null}}]),et}(reactExports.PureComponent);_Bar=Bar;_defineProperty$d(Bar,"displayName","Bar");_defineProperty$d(Bar,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});_defineProperty$d(Bar,"getComposedData",function(_e){var et=_e.props,tt=_e.item,rt=_e.barPosition,it=_e.bandSize,st=_e.xAxis,ut=_e.yAxis,ht=_e.xAxisTicks,at=_e.yAxisTicks,gt=_e.stackedData,bt=_e.dataStartIndex,wt=_e.displayedData,St=_e.offset,kt=findPositionOfBar(rt,tt);if(!kt)return null;var Rt=et.layout,It=tt.props,Dt=It.dataKey,Mt=It.children,$t=It.minPointSize,jt=Rt==="horizontal"?ut:st,Nt=gt?jt.scale.domain():null,Ut=getBaseValueOfBar({numericAxis:jt}),Ht=findAllByType(Mt,Cell),Kt=wt.map(function(tr,mr){var vr,wr,yr,Or,Nr,Lr;gt?vr=truncateByDomain(gt[bt+mr],Nt):(vr=getValueByDataKey(tr,Dt),Array.isArray(vr)||(vr=[Ut,vr]));var ar=minPointSizeCallback($t,_Bar.defaultProps.minPointSize)(vr[1],mr);if(Rt==="horizontal"){var hr,Qt=[ut.scale(vr[0]),ut.scale(vr[1])],ir=Qt[0],Mr=Qt[1];wr=getCateCoordinateOfBar({axis:st,ticks:ht,bandSize:it,offset:kt.offset,entry:tr,index:mr}),yr=(hr=Mr??ir)!==null&&hr!==void 0?hr:void 0,Or=kt.size;var Cr=ir-Mr;if(Nr=Number.isNaN(Cr)?0:Cr,Lr={x:wr,y:ut.y,width:Or,height:ut.height},Math.abs(ar)>0&&Math.abs(Nr)<Math.abs(ar)){var rn=mathSign$1(Nr||ar)*(Math.abs(ar)-Math.abs(Nr));yr-=rn,Nr+=rn}}else{var fn=[st.scale(vr[0]),st.scale(vr[1])],Dn=fn[0],Yn=fn[1];if(wr=Dn,yr=getCateCoordinateOfBar({axis:ut,ticks:at,bandSize:it,offset:kt.offset,entry:tr,index:mr}),Or=Yn-Dn,Nr=kt.size,Lr={x:st.x,y:yr,width:st.width,height:Nr},Math.abs(ar)>0&&Math.abs(Or)<Math.abs(ar)){var eo=mathSign$1(Or||ar)*(Math.abs(ar)-Math.abs(Or));Or+=eo}}return _objectSpread$b(_objectSpread$b(_objectSpread$b({},tr),{},{x:wr,y:yr,width:Or,height:Nr,value:gt?vr:vr[1],payload:tr,background:Lr},Ht&&Ht[mr]&&Ht[mr].props),{},{tooltipPayload:[getTooltipItem(tt,tr)],tooltipPosition:{x:wr+Or/2,y:yr+Nr/2}})});return _objectSpread$b({data:Kt,layout:Rt},St)});function _typeof$c(_e){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$c(_e)}function _classCallCheck$6(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$6(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$b(rt.key),rt)}}function _createClass$6(_e,et,tt){return et&&_defineProperties$6(_e.prototype,et),tt&&_defineProperties$6(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function ownKeys$b(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$a(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$b(Object(tt),!0).forEach(function(rt){_defineProperty$c(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$b(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$c(_e,et,tt){return et=_toPropertyKey$b(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$b(_e){var et=_toPrimitive$b(_e,"string");return _typeof$c(et)=="symbol"?et:String(et)}function _toPrimitive$b(_e,et){if(_typeof$c(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$c(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var formatAxisMap=function _e(et,tt,rt,it,st){var ut=et.width,ht=et.height,at=et.layout,gt=et.children,bt=Object.keys(tt),wt={left:rt.left,leftMirror:rt.left,right:ut-rt.right,rightMirror:ut-rt.right,top:rt.top,topMirror:rt.top,bottom:ht-rt.bottom,bottomMirror:ht-rt.bottom},St=!!findChildByType(gt,Bar);return bt.reduce(function(kt,Rt){var It=tt[Rt],Dt=It.orientation,Mt=It.domain,$t=It.padding,jt=$t===void 0?{}:$t,Nt=It.mirror,Ut=It.reversed,Ht="".concat(Dt).concat(Nt?"Mirror":""),Kt,tr,mr,vr,wr;if(It.type==="number"&&(It.padding==="gap"||It.padding==="no-gap")){var yr=Mt[1]-Mt[0],Or=1/0,Nr=It.categoricalDomain.sort();if(Nr.forEach(function(Dn,Yn){Yn>0&&(Or=Math.min((Dn||0)-(Nr[Yn-1]||0),Or))}),Number.isFinite(Or)){var Lr=Or/yr,ar=It.layout==="vertical"?rt.height:rt.width;if(It.padding==="gap"&&(Kt=Lr*ar/2),It.padding==="no-gap"){var hr=getPercentValue(et.barCategoryGap,Lr*ar),Qt=Lr*ar/2;Kt=Qt-hr-(Qt-hr)/ar*hr}}}it==="xAxis"?tr=[rt.left+(jt.left||0)+(Kt||0),rt.left+rt.width-(jt.right||0)-(Kt||0)]:it==="yAxis"?tr=at==="horizontal"?[rt.top+rt.height-(jt.bottom||0),rt.top+(jt.top||0)]:[rt.top+(jt.top||0)+(Kt||0),rt.top+rt.height-(jt.bottom||0)-(Kt||0)]:tr=It.range,Ut&&(tr=[tr[1],tr[0]]);var ir=parseScale(It,st,St),Mr=ir.scale,Cr=ir.realScaleType;Mr.domain(Mt).range(tr),checkDomainOfScale(Mr);var rn=getTicksOfScale(Mr,_objectSpread$a(_objectSpread$a({},It),{},{realScaleType:Cr}));it==="xAxis"?(wr=Dt==="top"&&!Nt||Dt==="bottom"&&Nt,mr=rt.left,vr=wt[Ht]-wr*It.height):it==="yAxis"&&(wr=Dt==="left"&&!Nt||Dt==="right"&&Nt,mr=wt[Ht]-wr*It.width,vr=rt.top);var fn=_objectSpread$a(_objectSpread$a(_objectSpread$a({},It),rn),{},{realScaleType:Cr,x:mr,y:vr,scale:Mr,width:it==="xAxis"?rt.width:It.width,height:it==="yAxis"?rt.height:It.height});return fn.bandSize=getBandSizeOfAxis(fn,rn),!It.hide&&it==="xAxis"?wt[Ht]+=(wr?-1:1)*fn.height:It.hide||(wt[Ht]+=(wr?-1:1)*fn.width),_objectSpread$a(_objectSpread$a({},kt),{},_defineProperty$c({},Rt,fn))},{})},rectWithPoints=function _e(et,tt){var rt=et.x,it=et.y,st=tt.x,ut=tt.y;return{x:Math.min(rt,st),y:Math.min(it,ut),width:Math.abs(st-rt),height:Math.abs(ut-it)}},rectWithCoords=function _e(et){var tt=et.x1,rt=et.y1,it=et.x2,st=et.y2;return rectWithPoints({x:tt,y:rt},{x:it,y:st})},ScaleHelper=function(){function _e(et){_classCallCheck$6(this,_e),this.scale=et}return _createClass$6(_e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(tt){var rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},it=rt.bandAware,st=rt.position;if(tt!==void 0){if(st)switch(st){case"start":return this.scale(tt);case"middle":{var ut=this.bandwidth?this.bandwidth()/2:0;return this.scale(tt)+ut}case"end":{var ht=this.bandwidth?this.bandwidth():0;return this.scale(tt)+ht}default:return this.scale(tt)}if(it){var at=this.bandwidth?this.bandwidth()/2:0;return this.scale(tt)+at}return this.scale(tt)}}},{key:"isInRange",value:function(tt){var rt=this.range(),it=rt[0],st=rt[rt.length-1];return it<=st?tt>=it&&tt<=st:tt>=st&&tt<=it}}],[{key:"create",value:function(tt){return new _e(tt)}}]),_e}();_defineProperty$c(ScaleHelper,"EPS",1e-4);var createLabeledScales=function _e(et){var tt=Object.keys(et).reduce(function(rt,it){return _objectSpread$a(_objectSpread$a({},rt),{},_defineProperty$c({},it,ScaleHelper.create(et[it])))},{});return _objectSpread$a(_objectSpread$a({},tt),{},{apply:function(it){var st=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ut=st.bandAware,ht=st.position;return mapValues$1(it,function(at,gt){return tt[gt].apply(at,{bandAware:ut,position:ht})})},isInRange:function(it){return every$1(it,function(st,ut){return tt[ut].isInRange(st)})}})};function normalizeAngle(_e){return(_e%180+180)%180}var getAngledRectangleWidth=function _e(et){var tt=et.width,rt=et.height,it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,st=normalizeAngle(it),ut=st*Math.PI/180,ht=Math.atan(rt/tt),at=ut>ht&&ut<Math.PI-ht?rt/Math.sin(ut):tt/Math.cos(ut);return Math.abs(at)},baseIteratee$1=_baseIteratee,isArrayLike=isArrayLike_1,keys=keys_1;function createFind$1(_e){return function(et,tt,rt){var it=Object(et);if(!isArrayLike(et)){var st=baseIteratee$1(tt);et=keys(et),tt=function(ht){return st(it[ht],ht,it)}}var ut=_e(et,tt,rt);return ut>-1?it[st?et[ut]:ut]:void 0}}var _createFind=createFind$1,toFinite=toFinite_1;function toInteger$1(_e){var et=toFinite(_e),tt=et%1;return et===et?tt?et-tt:et:0}var toInteger_1=toInteger$1,baseFindIndex=_baseFindIndex,baseIteratee=_baseIteratee,toInteger=toInteger_1,nativeMax=Math.max;function findIndex$2(_e,et,tt){var rt=_e==null?0:_e.length;if(!rt)return-1;var it=tt==null?0:toInteger(tt);return it<0&&(it=nativeMax(rt+it,0)),baseFindIndex(_e,baseIteratee(et),it)}var findIndex_1=findIndex$2,createFind=_createFind,findIndex$1=findIndex_1,find=createFind(findIndex$1),find_1=find;const find$1=getDefaultExportFromCjs(find_1);var calculateViewBox=memoize$3(function(_e){return{x:_e.left,y:_e.top,width:_e.width,height:_e.height}},function(_e){return["l",_e.left,"t",_e.top,"w",_e.width,"h",_e.height].join("")}),XAxisContext=reactExports.createContext(void 0),YAxisContext=reactExports.createContext(void 0),ViewBoxContext=reactExports.createContext(void 0),OffsetContext=reactExports.createContext({}),ClipPathIdContext=reactExports.createContext(void 0),ChartHeightContext=reactExports.createContext(0),ChartWidthContext=reactExports.createContext(0),ChartLayoutContextProvider=function _e(et){var tt=et.state,rt=tt.xAxisMap,it=tt.yAxisMap,st=tt.offset,ut=et.clipPathId,ht=et.children,at=et.width,gt=et.height,bt=calculateViewBox(st);return React$1.createElement(XAxisContext.Provider,{value:rt},React$1.createElement(YAxisContext.Provider,{value:it},React$1.createElement(OffsetContext.Provider,{value:st},React$1.createElement(ViewBoxContext.Provider,{value:bt},React$1.createElement(ClipPathIdContext.Provider,{value:ut},React$1.createElement(ChartHeightContext.Provider,{value:gt},React$1.createElement(ChartWidthContext.Provider,{value:at},ht)))))))},useClipPathId=function _e(){return reactExports.useContext(ClipPathIdContext)},useXAxisOrThrow=function _e(et){var tt=reactExports.useContext(XAxisContext);tt==null&&invariant();var rt=tt[et];return rt==null&&invariant(),rt},useArbitraryXAxis=function _e(){var et=reactExports.useContext(XAxisContext);return getAnyElementOfObject(et)},useYAxisWithFiniteDomainOrRandom=function _e(){var et=reactExports.useContext(YAxisContext),tt=find$1(et,function(rt){return every$1(rt.domain,Number.isFinite)});return tt||getAnyElementOfObject(et)},useYAxisOrThrow=function _e(et){var tt=reactExports.useContext(YAxisContext);tt==null&&invariant();var rt=tt[et];return rt==null&&invariant(),rt},useViewBox=function _e(){var et=reactExports.useContext(ViewBoxContext);return et},useOffset=function _e(){return reactExports.useContext(OffsetContext)},useChartWidth=function _e(){return reactExports.useContext(ChartWidthContext)},useChartHeight=function _e(){return reactExports.useContext(ChartHeightContext)};function _typeof$b(_e){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$b(_e)}function ownKeys$a(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$9(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$a(Object(tt),!0).forEach(function(rt){_defineProperty$b(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$a(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$b(_e,et,tt){return et=_toPropertyKey$a(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$a(_e){var et=_toPrimitive$a(_e,"string");return _typeof$b(et)=="symbol"?et:String(et)}function _toPrimitive$a(_e,et){if(_typeof$b(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$b(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _slicedToArray$2(_e,et){return _arrayWithHoles$2(_e)||_iterableToArrayLimit$2(_e,et)||_unsupportedIterableToArray$4(_e,et)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$4(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$4(_e,et)}}function _arrayLikeToArray$4(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _iterableToArrayLimit$2(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$2(_e){if(Array.isArray(_e))return _e}function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$a.apply(this,arguments)}var renderLine=function _e(et,tt){var rt;return React$1.isValidElement(et)?rt=React$1.cloneElement(et,tt):isFunction$4(et)?rt=et(tt):rt=React$1.createElement("line",_extends$a({},tt,{className:"recharts-reference-line-line"})),rt},getEndPoints=function _e(et,tt,rt,it,st,ut,ht,at,gt){var bt=st.x,wt=st.y,St=st.width,kt=st.height;if(rt){var Rt=gt.y,It=et.y.apply(Rt,{position:ut});if(ifOverflowMatches(gt,"discard")&&!et.y.isInRange(It))return null;var Dt=[{x:bt+St,y:It},{x:bt,y:It}];return at==="left"?Dt.reverse():Dt}if(tt){var Mt=gt.x,$t=et.x.apply(Mt,{position:ut});if(ifOverflowMatches(gt,"discard")&&!et.x.isInRange($t))return null;var jt=[{x:$t,y:wt+kt},{x:$t,y:wt}];return ht==="top"?jt.reverse():jt}if(it){var Nt=gt.segment,Ut=Nt.map(function(Ht){return et.apply(Ht,{position:ut})});return ifOverflowMatches(gt,"discard")&&some$1(Ut,function(Ht){return!et.isInRange(Ht)})?null:Ut}return null};function ReferenceLine(_e){var et=_e.x,tt=_e.y,rt=_e.segment,it=_e.xAxisId,st=_e.yAxisId,ut=_e.shape,ht=_e.className,at=_e.alwaysShow,gt=useClipPathId(),bt=useXAxisOrThrow(it),wt=useYAxisOrThrow(st),St=useViewBox();if(!gt||!St)return null;warn$1(at===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var kt=createLabeledScales({x:bt.scale,y:wt.scale}),Rt=isNumOrStr(et),It=isNumOrStr(tt),Dt=rt&&rt.length===2,Mt=getEndPoints(kt,Rt,It,Dt,St,_e.position,bt.orientation,wt.orientation,_e);if(!Mt)return null;var $t=_slicedToArray$2(Mt,2),jt=$t[0],Nt=jt.x,Ut=jt.y,Ht=$t[1],Kt=Ht.x,tr=Ht.y,mr=ifOverflowMatches(_e,"hidden")?"url(#".concat(gt,")"):void 0,vr=_objectSpread$9(_objectSpread$9({clipPath:mr},filterProps(_e,!0)),{},{x1:Nt,y1:Ut,x2:Kt,y2:tr});return React$1.createElement(Layer$2,{className:clsx$1("recharts-reference-line",ht)},renderLine(ut,vr),Label$4.renderCallByParent(_e,rectWithCoords({x1:Nt,y1:Ut,x2:Kt,y2:tr})))}ReferenceLine.displayName="ReferenceLine";ReferenceLine.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function _typeof$a(_e){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$a(_e)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$9.apply(this,arguments)}function ownKeys$9(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$8(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$9(Object(tt),!0).forEach(function(rt){_defineProperty$a(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$9(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$a(_e,et,tt){return et=_toPropertyKey$9(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$9(_e){var et=_toPrimitive$9(_e,"string");return _typeof$a(et)=="symbol"?et:String(et)}function _toPrimitive$9(_e,et){if(_typeof$a(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$a(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getCoordinate=function _e(et){var tt=et.x,rt=et.y,it=et.xAxis,st=et.yAxis,ut=createLabeledScales({x:it.scale,y:st.scale}),ht=ut.apply({x:tt,y:rt},{bandAware:!0});return ifOverflowMatches(et,"discard")&&!ut.isInRange(ht)?null:ht};function ReferenceDot(_e){var et=_e.x,tt=_e.y,rt=_e.r,it=_e.alwaysShow,st=_e.clipPathId,ut=isNumOrStr(et),ht=isNumOrStr(tt);if(warn$1(it===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!ut||!ht)return null;var at=getCoordinate(_e);if(!at)return null;var gt=at.x,bt=at.y,wt=_e.shape,St=_e.className,kt=ifOverflowMatches(_e,"hidden")?"url(#".concat(st,")"):void 0,Rt=_objectSpread$8(_objectSpread$8({clipPath:kt},filterProps(_e,!0)),{},{cx:gt,cy:bt});return React$1.createElement(Layer$2,{className:clsx$1("recharts-reference-dot",St)},ReferenceDot.renderDot(wt,Rt),Label$4.renderCallByParent(_e,{x:gt-rt,y:bt-rt,width:2*rt,height:2*rt}))}ReferenceDot.displayName="ReferenceDot";ReferenceDot.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};ReferenceDot.renderDot=function(_e,et){var tt;return React$1.isValidElement(_e)?tt=React$1.cloneElement(_e,et):isFunction$4(_e)?tt=_e(et):tt=React$1.createElement(Dot,_extends$9({},et,{cx:et.cx,cy:et.cy,className:"recharts-reference-dot-dot"})),tt};function _typeof$9(_e){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$9(_e)}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$8.apply(this,arguments)}function ownKeys$8(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$7(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$8(Object(tt),!0).forEach(function(rt){_defineProperty$9(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$8(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$9(_e,et,tt){return et=_toPropertyKey$8(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$8(_e){var et=_toPrimitive$8(_e,"string");return _typeof$9(et)=="symbol"?et:String(et)}function _toPrimitive$8(_e,et){if(_typeof$9(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$9(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var getRect=function _e(et,tt,rt,it,st){var ut=st.x1,ht=st.x2,at=st.y1,gt=st.y2,bt=st.xAxis,wt=st.yAxis;if(!bt||!wt)return null;var St=createLabeledScales({x:bt.scale,y:wt.scale}),kt={x:et?St.x.apply(ut,{position:"start"}):St.x.rangeMin,y:rt?St.y.apply(at,{position:"start"}):St.y.rangeMin},Rt={x:tt?St.x.apply(ht,{position:"end"}):St.x.rangeMax,y:it?St.y.apply(gt,{position:"end"}):St.y.rangeMax};return ifOverflowMatches(st,"discard")&&(!St.isInRange(kt)||!St.isInRange(Rt))?null:rectWithPoints(kt,Rt)};function ReferenceArea(_e){var et=_e.x1,tt=_e.x2,rt=_e.y1,it=_e.y2,st=_e.className,ut=_e.alwaysShow,ht=_e.clipPathId;warn$1(ut===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var at=isNumOrStr(et),gt=isNumOrStr(tt),bt=isNumOrStr(rt),wt=isNumOrStr(it),St=_e.shape;if(!at&&!gt&&!bt&&!wt&&!St)return null;var kt=getRect(at,gt,bt,wt,_e);if(!kt&&!St)return null;var Rt=ifOverflowMatches(_e,"hidden")?"url(#".concat(ht,")"):void 0;return React$1.createElement(Layer$2,{className:clsx$1("recharts-reference-area",st)},ReferenceArea.renderRect(St,_objectSpread$7(_objectSpread$7({clipPath:Rt},filterProps(_e,!0)),kt)),Label$4.renderCallByParent(_e,kt))}ReferenceArea.displayName="ReferenceArea";ReferenceArea.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};ReferenceArea.renderRect=function(_e,et){var tt;return React$1.isValidElement(_e)?tt=React$1.cloneElement(_e,et):isFunction$4(_e)?tt=_e(et):tt=React$1.createElement(Rectangle,_extends$8({},et,{className:"recharts-reference-area-rect"})),tt};function getEveryNthWithCondition(_e,et,tt){if(et<1)return[];if(et===1&&tt===void 0)return _e;for(var rt=[],it=0;it<_e.length;it+=et)rt.push(_e[it]);return rt}function getAngledTickWidth(_e,et,tt){var rt={width:_e.width+et.width,height:_e.height+et.height};return getAngledRectangleWidth(rt,tt)}function getTickBoundaries(_e,et,tt){var rt=tt==="width",it=_e.x,st=_e.y,ut=_e.width,ht=_e.height;return et===1?{start:rt?it:st,end:rt?it+ut:st+ht}:{start:rt?it+ut:st+ht,end:rt?it:st}}function isVisible(_e,et,tt,rt,it){if(_e*et<_e*rt||_e*et>_e*it)return!1;var st=tt();return _e*(et-_e*st/2-rt)>=0&&_e*(et+_e*st/2-it)<=0}function getNumberIntervalTicks(_e,et){return getEveryNthWithCondition(_e,et+1)}function getEquidistantTicks(_e,et,tt,rt,it){for(var st=(rt||[]).slice(),ut=et.start,ht=et.end,at=0,gt=1,bt=ut,wt=function(){var Rt=rt==null?void 0:rt[at];if(Rt===void 0)return{v:getEveryNthWithCondition(rt,gt)};var It=at,Dt,Mt=function(){return Dt===void 0&&(Dt=tt(Rt,It)),Dt},$t=Rt.coordinate,jt=at===0||isVisible(_e,$t,Mt,bt,ht);jt||(at=0,bt=ut,gt+=1),jt&&(bt=$t+_e*(Mt()/2+it),at+=gt)},St;gt<=st.length;)if(St=wt(),St)return St.v;return[]}function _typeof$8(_e){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$8(_e)}function ownKeys$7(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$6(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$7(Object(tt),!0).forEach(function(rt){_defineProperty$8(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$7(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$8(_e,et,tt){return et=_toPropertyKey$7(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$7(_e){var et=_toPrimitive$7(_e,"string");return _typeof$8(et)=="symbol"?et:String(et)}function _toPrimitive$7(_e,et){if(_typeof$8(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$8(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function getTicksEnd(_e,et,tt,rt,it){for(var st=(rt||[]).slice(),ut=st.length,ht=et.start,at=et.end,gt=function(St){var kt=st[St],Rt,It=function(){return Rt===void 0&&(Rt=tt(kt,St)),Rt};if(St===ut-1){var Dt=_e*(kt.coordinate+_e*It()/2-at);st[St]=kt=_objectSpread$6(_objectSpread$6({},kt),{},{tickCoord:Dt>0?kt.coordinate-Dt*_e:kt.coordinate})}else st[St]=kt=_objectSpread$6(_objectSpread$6({},kt),{},{tickCoord:kt.coordinate});var Mt=isVisible(_e,kt.tickCoord,It,ht,at);Mt&&(at=kt.tickCoord-_e*(It()/2+it),st[St]=_objectSpread$6(_objectSpread$6({},kt),{},{isShow:!0}))},bt=ut-1;bt>=0;bt--)gt(bt);return st}function getTicksStart(_e,et,tt,rt,it,st){var ut=(rt||[]).slice(),ht=ut.length,at=et.start,gt=et.end;if(st){var bt=rt[ht-1],wt=tt(bt,ht-1),St=_e*(bt.coordinate+_e*wt/2-gt);ut[ht-1]=bt=_objectSpread$6(_objectSpread$6({},bt),{},{tickCoord:St>0?bt.coordinate-St*_e:bt.coordinate});var kt=isVisible(_e,bt.tickCoord,function(){return wt},at,gt);kt&&(gt=bt.tickCoord-_e*(wt/2+it),ut[ht-1]=_objectSpread$6(_objectSpread$6({},bt),{},{isShow:!0}))}for(var Rt=st?ht-1:ht,It=function($t){var jt=ut[$t],Nt,Ut=function(){return Nt===void 0&&(Nt=tt(jt,$t)),Nt};if($t===0){var Ht=_e*(jt.coordinate-_e*Ut()/2-at);ut[$t]=jt=_objectSpread$6(_objectSpread$6({},jt),{},{tickCoord:Ht<0?jt.coordinate-Ht*_e:jt.coordinate})}else ut[$t]=jt=_objectSpread$6(_objectSpread$6({},jt),{},{tickCoord:jt.coordinate});var Kt=isVisible(_e,jt.tickCoord,Ut,at,gt);Kt&&(at=jt.tickCoord+_e*(Ut()/2+it),ut[$t]=_objectSpread$6(_objectSpread$6({},jt),{},{isShow:!0}))},Dt=0;Dt<Rt;Dt++)It(Dt);return ut}function getTicks(_e,et,tt){var rt=_e.tick,it=_e.ticks,st=_e.viewBox,ut=_e.minTickGap,ht=_e.orientation,at=_e.interval,gt=_e.tickFormatter,bt=_e.unit,wt=_e.angle;if(!it||!it.length||!rt)return[];if(isNumber$2(at)||Global.isSsr)return getNumberIntervalTicks(it,typeof at=="number"&&isNumber$2(at)?at:0);var St=[],kt=ht==="top"||ht==="bottom"?"width":"height",Rt=bt&&kt==="width"?getStringSize(bt,{fontSize:et,letterSpacing:tt}):{width:0,height:0},It=function(jt,Nt){var Ut=isFunction$4(gt)?gt(jt.value,Nt):jt.value;return kt==="width"?getAngledTickWidth(getStringSize(Ut,{fontSize:et,letterSpacing:tt}),Rt,wt):getStringSize(Ut,{fontSize:et,letterSpacing:tt})[kt]},Dt=it.length>=2?mathSign$1(it[1].coordinate-it[0].coordinate):1,Mt=getTickBoundaries(st,Dt,kt);return at==="equidistantPreserveStart"?getEquidistantTicks(Dt,Mt,It,it,ut):(at==="preserveStart"||at==="preserveStartEnd"?St=getTicksStart(Dt,Mt,It,it,ut,at==="preserveStartEnd"):St=getTicksEnd(Dt,Mt,It,it,ut),St.filter(function($t){return $t.isShow}))}var _excluded$4=["viewBox"],_excluded2$2=["viewBox"],_excluded3=["ticks"];function _typeof$7(_e){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$7(_e)}function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$7.apply(this,arguments)}function ownKeys$6(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$5(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$6(Object(tt),!0).forEach(function(rt){_defineProperty$7(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$6(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _objectWithoutProperties$5(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$5(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$5(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _classCallCheck$5(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$6(rt.key),rt)}}function _createClass$5(_e,et,tt){return et&&_defineProperties$5(_e.prototype,et),tt&&_defineProperties$5(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$3(_e,et,tt){return et=_getPrototypeOf$4(et),_possibleConstructorReturn$4(_e,_isNativeReflectConstruct$3()?Reflect.construct(et,tt||[],_getPrototypeOf$4(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$4(_e,et){if(et&&(_typeof$7(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(_e)}function _assertThisInitialized$4(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _isNativeReflectConstruct$3(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$3=function(){return!!_e})()}function _getPrototypeOf$4(_e){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$4(_e)}function _inherits$4(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$4(_e,et)}function _setPrototypeOf$4(_e,et){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$4(_e,et)}function _defineProperty$7(_e,et,tt){return et=_toPropertyKey$6(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$6(_e){var et=_toPrimitive$6(_e,"string");return _typeof$7(et)=="symbol"?et:String(et)}function _toPrimitive$6(_e,et){if(_typeof$7(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$7(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var CartesianAxis=function(_e){_inherits$4(et,_e);function et(tt){var rt;return _classCallCheck$5(this,et),rt=_callSuper$3(this,et,[tt]),rt.state={fontSize:"",letterSpacing:""},rt}return _createClass$5(et,[{key:"shouldComponentUpdate",value:function(rt,it){var st=rt.viewBox,ut=_objectWithoutProperties$5(rt,_excluded$4),ht=this.props,at=ht.viewBox,gt=_objectWithoutProperties$5(ht,_excluded2$2);return!shallowEqual(st,at)||!shallowEqual(ut,gt)||!shallowEqual(it,this.state)}},{key:"componentDidMount",value:function(){var rt=this.layerReference;if(rt){var it=rt.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];it&&this.setState({fontSize:window.getComputedStyle(it).fontSize,letterSpacing:window.getComputedStyle(it).letterSpacing})}}},{key:"getTickLineCoord",value:function(rt){var it=this.props,st=it.x,ut=it.y,ht=it.width,at=it.height,gt=it.orientation,bt=it.tickSize,wt=it.mirror,St=it.tickMargin,kt,Rt,It,Dt,Mt,$t,jt=wt?-1:1,Nt=rt.tickSize||bt,Ut=isNumber$2(rt.tickCoord)?rt.tickCoord:rt.coordinate;switch(gt){case"top":kt=Rt=rt.coordinate,Dt=ut+ +!wt*at,It=Dt-jt*Nt,$t=It-jt*St,Mt=Ut;break;case"left":It=Dt=rt.coordinate,Rt=st+ +!wt*ht,kt=Rt-jt*Nt,Mt=kt-jt*St,$t=Ut;break;case"right":It=Dt=rt.coordinate,Rt=st+ +wt*ht,kt=Rt+jt*Nt,Mt=kt+jt*St,$t=Ut;break;default:kt=Rt=rt.coordinate,Dt=ut+ +wt*at,It=Dt+jt*Nt,$t=It+jt*St,Mt=Ut;break}return{line:{x1:kt,y1:It,x2:Rt,y2:Dt},tick:{x:Mt,y:$t}}}},{key:"getTickTextAnchor",value:function(){var rt=this.props,it=rt.orientation,st=rt.mirror,ut;switch(it){case"left":ut=st?"start":"end";break;case"right":ut=st?"end":"start";break;default:ut="middle";break}return ut}},{key:"getTickVerticalAnchor",value:function(){var rt=this.props,it=rt.orientation,st=rt.mirror,ut="end";switch(it){case"left":case"right":ut="middle";break;case"top":ut=st?"start":"end";break;default:ut=st?"end":"start";break}return ut}},{key:"renderAxisLine",value:function(){var rt=this.props,it=rt.x,st=rt.y,ut=rt.width,ht=rt.height,at=rt.orientation,gt=rt.mirror,bt=rt.axisLine,wt=_objectSpread$5(_objectSpread$5(_objectSpread$5({},filterProps(this.props,!1)),filterProps(bt,!1)),{},{fill:"none"});if(at==="top"||at==="bottom"){var St=+(at==="top"&&!gt||at==="bottom"&&gt);wt=_objectSpread$5(_objectSpread$5({},wt),{},{x1:it,y1:st+St*ht,x2:it+ut,y2:st+St*ht})}else{var kt=+(at==="left"&&!gt||at==="right"&&gt);wt=_objectSpread$5(_objectSpread$5({},wt),{},{x1:it+kt*ut,y1:st,x2:it+kt*ut,y2:st+ht})}return React$1.createElement("line",_extends$7({},wt,{className:clsx$1("recharts-cartesian-axis-line",get$4(bt,"className"))}))}},{key:"renderTicks",value:function(rt,it,st){var ut=this,ht=this.props,at=ht.tickLine,gt=ht.stroke,bt=ht.tick,wt=ht.tickFormatter,St=ht.unit,kt=getTicks(_objectSpread$5(_objectSpread$5({},this.props),{},{ticks:rt}),it,st),Rt=this.getTickTextAnchor(),It=this.getTickVerticalAnchor(),Dt=filterProps(this.props,!1),Mt=filterProps(bt,!1),$t=_objectSpread$5(_objectSpread$5({},Dt),{},{fill:"none"},filterProps(at,!1)),jt=kt.map(function(Nt,Ut){var Ht=ut.getTickLineCoord(Nt),Kt=Ht.line,tr=Ht.tick,mr=_objectSpread$5(_objectSpread$5(_objectSpread$5(_objectSpread$5({textAnchor:Rt,verticalAnchor:It},Dt),{},{stroke:"none",fill:gt},Mt),tr),{},{index:Ut,payload:Nt,visibleTicksCount:kt.length,tickFormatter:wt});return React$1.createElement(Layer$2,_extends$7({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Nt.value,"-").concat(Nt.coordinate,"-").concat(Nt.tickCoord)},adaptEventsOfChild(ut.props,Nt,Ut)),at&&React$1.createElement("line",_extends$7({},$t,Kt,{className:clsx$1("recharts-cartesian-axis-tick-line",get$4(at,"className"))})),bt&&et.renderTickItem(bt,mr,"".concat(isFunction$4(wt)?wt(Nt.value,Ut):Nt.value).concat(St||"")))});return React$1.createElement("g",{className:"recharts-cartesian-axis-ticks"},jt)}},{key:"render",value:function(){var rt=this,it=this.props,st=it.axisLine,ut=it.width,ht=it.height,at=it.ticksGenerator,gt=it.className,bt=it.hide;if(bt)return null;var wt=this.props,St=wt.ticks,kt=_objectWithoutProperties$5(wt,_excluded3),Rt=St;return isFunction$4(at)&&(Rt=St&&St.length>0?at(this.props):at(kt)),ut<=0||ht<=0||!Rt||!Rt.length?null:React$1.createElement(Layer$2,{className:clsx$1("recharts-cartesian-axis",gt),ref:function(Dt){rt.layerReference=Dt}},st&&this.renderAxisLine(),this.renderTicks(Rt,this.state.fontSize,this.state.letterSpacing),Label$4.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(rt,it,st){var ut;return React$1.isValidElement(rt)?ut=React$1.cloneElement(rt,it):isFunction$4(rt)?ut=rt(it):ut=React$1.createElement(Text,_extends$7({},it,{className:"recharts-cartesian-axis-tick-value"}),st),ut}}]),et}(reactExports.Component);_defineProperty$7(CartesianAxis,"displayName","CartesianAxis");_defineProperty$7(CartesianAxis,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var _excluded$3=["x1","y1","x2","y2","key"],_excluded2$1=["offset"];function _typeof$6(_e){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$6(_e)}function ownKeys$5(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$4(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$5(Object(tt),!0).forEach(function(rt){_defineProperty$6(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$5(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$6(_e,et,tt){return et=_toPropertyKey$5(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$5(_e){var et=_toPrimitive$5(_e,"string");return _typeof$6(et)=="symbol"?et:String(et)}function _toPrimitive$5(_e,et){if(_typeof$6(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$6(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$6.apply(this,arguments)}function _objectWithoutProperties$4(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$4(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$4(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}var Background=function _e(et){var tt=et.fill;if(!tt||tt==="none")return null;var rt=et.fillOpacity,it=et.x,st=et.y,ut=et.width,ht=et.height;return React$1.createElement("rect",{x:it,y:st,width:ut,height:ht,stroke:"none",fill:tt,fillOpacity:rt,className:"recharts-cartesian-grid-bg"})};function renderLineItem(_e,et){var tt;if(React$1.isValidElement(_e))tt=React$1.cloneElement(_e,et);else if(isFunction$4(_e))tt=_e(et);else{var rt=et.x1,it=et.y1,st=et.x2,ut=et.y2,ht=et.key,at=_objectWithoutProperties$4(et,_excluded$3),gt=filterProps(at,!1);gt.offset;var bt=_objectWithoutProperties$4(gt,_excluded2$1);tt=React$1.createElement("line",_extends$6({},bt,{x1:rt,y1:it,x2:st,y2:ut,fill:"none",key:ht}))}return tt}function HorizontalGridLines(_e){var et=_e.x,tt=_e.width,rt=_e.horizontal,it=rt===void 0?!0:rt,st=_e.horizontalPoints;if(!it||!st||!st.length)return null;var ut=st.map(function(ht,at){var gt=_objectSpread$4(_objectSpread$4({},_e),{},{x1:et,y1:ht,x2:et+tt,y2:ht,key:"line-".concat(at),index:at});return renderLineItem(it,gt)});return React$1.createElement("g",{className:"recharts-cartesian-grid-horizontal"},ut)}function VerticalGridLines(_e){var et=_e.y,tt=_e.height,rt=_e.vertical,it=rt===void 0?!0:rt,st=_e.verticalPoints;if(!it||!st||!st.length)return null;var ut=st.map(function(ht,at){var gt=_objectSpread$4(_objectSpread$4({},_e),{},{x1:ht,y1:et,x2:ht,y2:et+tt,key:"line-".concat(at),index:at});return renderLineItem(it,gt)});return React$1.createElement("g",{className:"recharts-cartesian-grid-vertical"},ut)}function HorizontalStripes(_e){var et=_e.horizontalFill,tt=_e.fillOpacity,rt=_e.x,it=_e.y,st=_e.width,ut=_e.height,ht=_e.horizontalPoints,at=_e.horizontal,gt=at===void 0?!0:at;if(!gt||!et||!et.length)return null;var bt=ht.map(function(St){return Math.round(St+it-it)}).sort(function(St,kt){return St-kt});it!==bt[0]&&bt.unshift(0);var wt=bt.map(function(St,kt){var Rt=!bt[kt+1],It=Rt?it+ut-St:bt[kt+1]-St;if(It<=0)return null;var Dt=kt%et.length;return React$1.createElement("rect",{key:"react-".concat(kt),y:St,x:rt,height:It,width:st,stroke:"none",fill:et[Dt],fillOpacity:tt,className:"recharts-cartesian-grid-bg"})});return React$1.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},wt)}function VerticalStripes(_e){var et=_e.vertical,tt=et===void 0?!0:et,rt=_e.verticalFill,it=_e.fillOpacity,st=_e.x,ut=_e.y,ht=_e.width,at=_e.height,gt=_e.verticalPoints;if(!tt||!rt||!rt.length)return null;var bt=gt.map(function(St){return Math.round(St+st-st)}).sort(function(St,kt){return St-kt});st!==bt[0]&&bt.unshift(0);var wt=bt.map(function(St,kt){var Rt=!bt[kt+1],It=Rt?st+ht-St:bt[kt+1]-St;if(It<=0)return null;var Dt=kt%rt.length;return React$1.createElement("rect",{key:"react-".concat(kt),x:St,y:ut,width:It,height:at,stroke:"none",fill:rt[Dt],fillOpacity:it,className:"recharts-cartesian-grid-bg"})});return React$1.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},wt)}var defaultVerticalCoordinatesGenerator=function _e(et,tt){var rt=et.xAxis,it=et.width,st=et.height,ut=et.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$4(_objectSpread$4(_objectSpread$4({},CartesianAxis.defaultProps),rt),{},{ticks:getTicksOfAxis(rt,!0),viewBox:{x:0,y:0,width:it,height:st}})),ut.left,ut.left+ut.width,tt)},defaultHorizontalCoordinatesGenerator=function _e(et,tt){var rt=et.yAxis,it=et.width,st=et.height,ut=et.offset;return getCoordinatesOfGrid(getTicks(_objectSpread$4(_objectSpread$4(_objectSpread$4({},CartesianAxis.defaultProps),rt),{},{ticks:getTicksOfAxis(rt,!0),viewBox:{x:0,y:0,width:it,height:st}})),ut.top,ut.top+ut.height,tt)},defaultProps={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function CartesianGrid(_e){var et,tt,rt,it,st,ut,ht=useChartWidth(),at=useChartHeight(),gt=useOffset(),bt=_objectSpread$4(_objectSpread$4({},_e),{},{stroke:(et=_e.stroke)!==null&&et!==void 0?et:defaultProps.stroke,fill:(tt=_e.fill)!==null&&tt!==void 0?tt:defaultProps.fill,horizontal:(rt=_e.horizontal)!==null&&rt!==void 0?rt:defaultProps.horizontal,horizontalFill:(it=_e.horizontalFill)!==null&&it!==void 0?it:defaultProps.horizontalFill,vertical:(st=_e.vertical)!==null&&st!==void 0?st:defaultProps.vertical,verticalFill:(ut=_e.verticalFill)!==null&&ut!==void 0?ut:defaultProps.verticalFill,x:isNumber$2(_e.x)?_e.x:gt.left,y:isNumber$2(_e.y)?_e.y:gt.top,width:isNumber$2(_e.width)?_e.width:gt.width,height:isNumber$2(_e.height)?_e.height:gt.height}),wt=bt.x,St=bt.y,kt=bt.width,Rt=bt.height,It=bt.syncWithTicks,Dt=bt.horizontalValues,Mt=bt.verticalValues,$t=useArbitraryXAxis(),jt=useYAxisWithFiniteDomainOrRandom();if(!isNumber$2(kt)||kt<=0||!isNumber$2(Rt)||Rt<=0||!isNumber$2(wt)||wt!==+wt||!isNumber$2(St)||St!==+St)return null;var Nt=bt.verticalCoordinatesGenerator||defaultVerticalCoordinatesGenerator,Ut=bt.horizontalCoordinatesGenerator||defaultHorizontalCoordinatesGenerator,Ht=bt.horizontalPoints,Kt=bt.verticalPoints;if((!Ht||!Ht.length)&&isFunction$4(Ut)){var tr=Dt&&Dt.length,mr=Ut({yAxis:jt?_objectSpread$4(_objectSpread$4({},jt),{},{ticks:tr?Dt:jt.ticks}):void 0,width:ht,height:at,offset:gt},tr?!0:It);warn$1(Array.isArray(mr),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(mr),"]")),Array.isArray(mr)&&(Ht=mr)}if((!Kt||!Kt.length)&&isFunction$4(Nt)){var vr=Mt&&Mt.length,wr=Nt({xAxis:$t?_objectSpread$4(_objectSpread$4({},$t),{},{ticks:vr?Mt:$t.ticks}):void 0,width:ht,height:at,offset:gt},vr?!0:It);warn$1(Array.isArray(wr),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_typeof$6(wr),"]")),Array.isArray(wr)&&(Kt=wr)}return React$1.createElement("g",{className:"recharts-cartesian-grid"},React$1.createElement(Background,{fill:bt.fill,fillOpacity:bt.fillOpacity,x:bt.x,y:bt.y,width:bt.width,height:bt.height}),React$1.createElement(HorizontalGridLines,_extends$6({},bt,{offset:gt,horizontalPoints:Ht,xAxis:$t,yAxis:jt})),React$1.createElement(VerticalGridLines,_extends$6({},bt,{offset:gt,verticalPoints:Kt,xAxis:$t,yAxis:jt})),React$1.createElement(HorizontalStripes,_extends$6({},bt,{horizontalPoints:Ht})),React$1.createElement(VerticalStripes,_extends$6({},bt,{verticalPoints:Kt})))}CartesianGrid.displayName="CartesianGrid";var _excluded$2=["type","layout","connectNulls","ref"];function _typeof$5(_e){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$5(_e)}function _objectWithoutProperties$3(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$3(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$3(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$5.apply(this,arguments)}function ownKeys$4(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$3(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$4(Object(tt),!0).forEach(function(rt){_defineProperty$5(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$4(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _toConsumableArray$2(_e){return _arrayWithoutHoles$2(_e)||_iterableToArray$2(_e)||_unsupportedIterableToArray$3(_e)||_nonIterableSpread$2()}function _nonIterableSpread$2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$3(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$3(_e,et)}}function _iterableToArray$2(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$2(_e){if(Array.isArray(_e))return _arrayLikeToArray$3(_e)}function _arrayLikeToArray$3(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _classCallCheck$4(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$4(rt.key),rt)}}function _createClass$4(_e,et,tt){return et&&_defineProperties$4(_e.prototype,et),tt&&_defineProperties$4(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$2(_e,et,tt){return et=_getPrototypeOf$3(et),_possibleConstructorReturn$3(_e,_isNativeReflectConstruct$2()?Reflect.construct(et,tt||[],_getPrototypeOf$3(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$3(_e,et){if(et&&(_typeof$5(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(_e)}function _isNativeReflectConstruct$2(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$2=function(){return!!_e})()}function _getPrototypeOf$3(_e){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$3(_e)}function _assertThisInitialized$3(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$3(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$3(_e,et)}function _setPrototypeOf$3(_e,et){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$3(_e,et)}function _defineProperty$5(_e,et,tt){return et=_toPropertyKey$4(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$4(_e){var et=_toPrimitive$4(_e,"string");return _typeof$5(et)=="symbol"?et:String(et)}function _toPrimitive$4(_e,et){if(_typeof$5(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$5(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var Line=function(_e){_inherits$3(et,_e);function et(){var tt;_classCallCheck$4(this,et);for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return tt=_callSuper$2(this,et,[].concat(it)),_defineProperty$5(_assertThisInitialized$3(tt),"state",{isAnimationFinished:!0,totalLength:0}),_defineProperty$5(_assertThisInitialized$3(tt),"generateSimpleStrokeDasharray",function(ut,ht){return"".concat(ht,"px ").concat(ut-ht,"px")}),_defineProperty$5(_assertThisInitialized$3(tt),"getStrokeDasharray",function(ut,ht,at){var gt=at.reduce(function(Mt,$t){return Mt+$t});if(!gt)return tt.generateSimpleStrokeDasharray(ht,ut);for(var bt=Math.floor(ut/gt),wt=ut%gt,St=ht-ut,kt=[],Rt=0,It=0;Rt<at.length;It+=at[Rt],++Rt)if(It+at[Rt]>wt){kt=[].concat(_toConsumableArray$2(at.slice(0,Rt)),[wt-It]);break}var Dt=kt.length%2===0?[0,St]:[St];return[].concat(_toConsumableArray$2(et.repeat(at,bt)),_toConsumableArray$2(kt),Dt).map(function(Mt){return"".concat(Mt,"px")}).join(", ")}),_defineProperty$5(_assertThisInitialized$3(tt),"id",uniqueId("recharts-line-")),_defineProperty$5(_assertThisInitialized$3(tt),"pathRef",function(ut){tt.mainCurve=ut}),_defineProperty$5(_assertThisInitialized$3(tt),"handleAnimationEnd",function(){tt.setState({isAnimationFinished:!0}),tt.props.onAnimationEnd&&tt.props.onAnimationEnd()}),_defineProperty$5(_assertThisInitialized$3(tt),"handleAnimationStart",function(){tt.setState({isAnimationFinished:!1}),tt.props.onAnimationStart&&tt.props.onAnimationStart()}),tt}return _createClass$4(et,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var rt=this.getTotalLength();this.setState({totalLength:rt})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var rt=this.getTotalLength();rt!==this.state.totalLength&&this.setState({totalLength:rt})}}},{key:"getTotalLength",value:function(){var rt=this.mainCurve;try{return rt&&rt.getTotalLength&&rt.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(rt,it){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var st=this.props,ut=st.points,ht=st.xAxis,at=st.yAxis,gt=st.layout,bt=st.children,wt=findAllByType(bt,ErrorBar);if(!wt)return null;var St=function(It,Dt){return{x:It.x,y:It.y,value:It.value,errorVal:getValueByDataKey(It.payload,Dt)}},kt={clipPath:rt?"url(#clipPath-".concat(it,")"):null};return React$1.createElement(Layer$2,kt,wt.map(function(Rt){return React$1.cloneElement(Rt,{key:"bar-".concat(Rt.props.dataKey),data:ut,xAxis:ht,yAxis:at,layout:gt,dataPointFormatter:St})}))}},{key:"renderDots",value:function(rt,it,st){var ut=this.props.isAnimationActive;if(ut&&!this.state.isAnimationFinished)return null;var ht=this.props,at=ht.dot,gt=ht.points,bt=ht.dataKey,wt=filterProps(this.props,!1),St=filterProps(at,!0),kt=gt.map(function(It,Dt){var Mt=_objectSpread$3(_objectSpread$3(_objectSpread$3({key:"dot-".concat(Dt),r:3},wt),St),{},{value:It.value,dataKey:bt,cx:It.x,cy:It.y,index:Dt,payload:It.payload});return et.renderDotItem(at,Mt)}),Rt={clipPath:rt?"url(#clipPath-".concat(it?"":"dots-").concat(st,")"):null};return React$1.createElement(Layer$2,_extends$5({className:"recharts-line-dots",key:"dots"},Rt),kt)}},{key:"renderCurveStatically",value:function(rt,it,st,ut){var ht=this.props,at=ht.type,gt=ht.layout,bt=ht.connectNulls;ht.ref;var wt=_objectWithoutProperties$3(ht,_excluded$2),St=_objectSpread$3(_objectSpread$3(_objectSpread$3({},filterProps(wt,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:it?"url(#clipPath-".concat(st,")"):null,points:rt},ut),{},{type:at,layout:gt,connectNulls:bt});return React$1.createElement(Curve,_extends$5({},St,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(rt,it){var st=this,ut=this.props,ht=ut.points,at=ut.strokeDasharray,gt=ut.isAnimationActive,bt=ut.animationBegin,wt=ut.animationDuration,St=ut.animationEasing,kt=ut.animationId,Rt=ut.animateNewValues,It=ut.width,Dt=ut.height,Mt=this.state,$t=Mt.prevPoints,jt=Mt.totalLength;return React$1.createElement(Animate,{begin:bt,duration:wt,isActive:gt,easing:St,from:{t:0},to:{t:1},key:"line-".concat(kt),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(Nt){var Ut=Nt.t;if($t){var Ht=$t.length/ht.length,Kt=ht.map(function(yr,Or){var Nr=Math.floor(Or*Ht);if($t[Nr]){var Lr=$t[Nr],ar=interpolateNumber$2(Lr.x,yr.x),hr=interpolateNumber$2(Lr.y,yr.y);return _objectSpread$3(_objectSpread$3({},yr),{},{x:ar(Ut),y:hr(Ut)})}if(Rt){var Qt=interpolateNumber$2(It*2,yr.x),ir=interpolateNumber$2(Dt/2,yr.y);return _objectSpread$3(_objectSpread$3({},yr),{},{x:Qt(Ut),y:ir(Ut)})}return _objectSpread$3(_objectSpread$3({},yr),{},{x:yr.x,y:yr.y})});return st.renderCurveStatically(Kt,rt,it)}var tr=interpolateNumber$2(0,jt),mr=tr(Ut),vr;if(at){var wr="".concat(at).split(/[,\s]+/gim).map(function(yr){return parseFloat(yr)});vr=st.getStrokeDasharray(mr,jt,wr)}else vr=st.generateSimpleStrokeDasharray(jt,mr);return st.renderCurveStatically(ht,rt,it,{strokeDasharray:vr})})}},{key:"renderCurve",value:function(rt,it){var st=this.props,ut=st.points,ht=st.isAnimationActive,at=this.state,gt=at.prevPoints,bt=at.totalLength;return ht&&ut&&ut.length&&(!gt&&bt>0||!isEqual$1(gt,ut))?this.renderCurveWithAnimation(rt,it):this.renderCurveStatically(ut,rt,it)}},{key:"render",value:function(){var rt,it=this.props,st=it.hide,ut=it.dot,ht=it.points,at=it.className,gt=it.xAxis,bt=it.yAxis,wt=it.top,St=it.left,kt=it.width,Rt=it.height,It=it.isAnimationActive,Dt=it.id;if(st||!ht||!ht.length)return null;var Mt=this.state.isAnimationFinished,$t=ht.length===1,jt=clsx$1("recharts-line",at),Nt=gt&&gt.allowDataOverflow,Ut=bt&&bt.allowDataOverflow,Ht=Nt||Ut,Kt=isNil$1(Dt)?this.id:Dt,tr=(rt=filterProps(ut,!1))!==null&&rt!==void 0?rt:{r:3,strokeWidth:2},mr=tr.r,vr=mr===void 0?3:mr,wr=tr.strokeWidth,yr=wr===void 0?2:wr,Or=isDotProps(ut)?ut:{},Nr=Or.clipDot,Lr=Nr===void 0?!0:Nr,ar=vr*2+yr;return React$1.createElement(Layer$2,{className:jt},Nt||Ut?React$1.createElement("defs",null,React$1.createElement("clipPath",{id:"clipPath-".concat(Kt)},React$1.createElement("rect",{x:Nt?St:St-kt/2,y:Ut?wt:wt-Rt/2,width:Nt?kt:kt*2,height:Ut?Rt:Rt*2})),!Lr&&React$1.createElement("clipPath",{id:"clipPath-dots-".concat(Kt)},React$1.createElement("rect",{x:St-ar/2,y:wt-ar/2,width:kt+ar,height:Rt+ar}))):null,!$t&&this.renderCurve(Ht,Kt),this.renderErrorBar(Ht,Kt),($t||ut)&&this.renderDots(Ht,Lr,Kt),(!It||Mt)&&LabelList.renderCallByParent(this.props,ht))}}],[{key:"getDerivedStateFromProps",value:function(rt,it){return rt.animationId!==it.prevAnimationId?{prevAnimationId:rt.animationId,curPoints:rt.points,prevPoints:it.curPoints}:rt.points!==it.curPoints?{curPoints:rt.points}:null}},{key:"repeat",value:function(rt,it){for(var st=rt.length%2!==0?[].concat(_toConsumableArray$2(rt),[0]):rt,ut=[],ht=0;ht<it;++ht)ut=[].concat(_toConsumableArray$2(ut),_toConsumableArray$2(st));return ut}},{key:"renderDotItem",value:function(rt,it){var st;if(React$1.isValidElement(rt))st=React$1.cloneElement(rt,it);else if(isFunction$4(rt))st=rt(it);else{var ut=clsx$1("recharts-line-dot",typeof rt!="boolean"?rt.className:"");st=React$1.createElement(Dot,_extends$5({},it,{className:ut}))}return st}}]),et}(reactExports.PureComponent);_defineProperty$5(Line,"displayName","Line");_defineProperty$5(Line,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Global.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});_defineProperty$5(Line,"getComposedData",function(_e){var et=_e.props,tt=_e.xAxis,rt=_e.yAxis,it=_e.xAxisTicks,st=_e.yAxisTicks,ut=_e.dataKey,ht=_e.bandSize,at=_e.displayedData,gt=_e.offset,bt=et.layout,wt=at.map(function(St,kt){var Rt=getValueByDataKey(St,ut);return bt==="horizontal"?{x:getCateCoordinateOfLine({axis:tt,ticks:it,bandSize:ht,entry:St,index:kt}),y:isNil$1(Rt)?null:rt.scale(Rt),value:Rt,payload:St}:{x:isNil$1(Rt)?null:tt.scale(Rt),y:getCateCoordinateOfLine({axis:rt,ticks:st,bandSize:ht,entry:St,index:kt}),value:Rt,payload:St}});return _objectSpread$3({points:wt,layout:bt},gt)});var _excluded$1=["layout","type","stroke","connectNulls","isRange","ref"],_Area;function _typeof$4(_e){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$4(_e)}function _objectWithoutProperties$2(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$2(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$2(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$4.apply(this,arguments)}function ownKeys$3(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$2(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$3(Object(tt),!0).forEach(function(rt){_defineProperty$4(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$3(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _classCallCheck$3(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$3(rt.key),rt)}}function _createClass$3(_e,et,tt){return et&&_defineProperties$3(_e.prototype,et),tt&&_defineProperties$3(_e,tt),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper$1(_e,et,tt){return et=_getPrototypeOf$2(et),_possibleConstructorReturn$2(_e,_isNativeReflectConstruct$1()?Reflect.construct(et,tt||[],_getPrototypeOf$2(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$2(_e,et){if(et&&(_typeof$4(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(_e)}function _isNativeReflectConstruct$1(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct$1=function(){return!!_e})()}function _getPrototypeOf$2(_e){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$2(_e)}function _assertThisInitialized$2(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$2(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$2(_e,et)}function _setPrototypeOf$2(_e,et){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$2(_e,et)}function _defineProperty$4(_e,et,tt){return et=_toPropertyKey$3(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$3(_e){var et=_toPrimitive$3(_e,"string");return _typeof$4(et)=="symbol"?et:String(et)}function _toPrimitive$3(_e,et){if(_typeof$4(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$4(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var Area=function(_e){_inherits$2(et,_e);function et(){var tt;_classCallCheck$3(this,et);for(var rt=arguments.length,it=new Array(rt),st=0;st<rt;st++)it[st]=arguments[st];return tt=_callSuper$1(this,et,[].concat(it)),_defineProperty$4(_assertThisInitialized$2(tt),"state",{isAnimationFinished:!0}),_defineProperty$4(_assertThisInitialized$2(tt),"id",uniqueId("recharts-area-")),_defineProperty$4(_assertThisInitialized$2(tt),"handleAnimationEnd",function(){var ut=tt.props.onAnimationEnd;tt.setState({isAnimationFinished:!0}),isFunction$4(ut)&&ut()}),_defineProperty$4(_assertThisInitialized$2(tt),"handleAnimationStart",function(){var ut=tt.props.onAnimationStart;tt.setState({isAnimationFinished:!1}),isFunction$4(ut)&&ut()}),tt}return _createClass$3(et,[{key:"renderDots",value:function(rt,it,st){var ut=this.props.isAnimationActive,ht=this.state.isAnimationFinished;if(ut&&!ht)return null;var at=this.props,gt=at.dot,bt=at.points,wt=at.dataKey,St=filterProps(this.props,!1),kt=filterProps(gt,!0),Rt=bt.map(function(Dt,Mt){var $t=_objectSpread$2(_objectSpread$2(_objectSpread$2({key:"dot-".concat(Mt),r:3},St),kt),{},{index:Mt,cx:Dt.x,cy:Dt.y,dataKey:wt,value:Dt.value,payload:Dt.payload,points:bt});return et.renderDotItem(gt,$t)}),It={clipPath:rt?"url(#clipPath-".concat(it?"":"dots-").concat(st,")"):null};return React$1.createElement(Layer$2,_extends$4({className:"recharts-area-dots"},It),Rt)}},{key:"renderHorizontalRect",value:function(rt){var it=this.props,st=it.baseLine,ut=it.points,ht=it.strokeWidth,at=ut[0].x,gt=ut[ut.length-1].x,bt=rt*Math.abs(at-gt),wt=max$3(ut.map(function(St){return St.y||0}));return isNumber$2(st)&&typeof st=="number"?wt=Math.max(st,wt):st&&Array.isArray(st)&&st.length&&(wt=Math.max(max$3(st.map(function(St){return St.y||0})),wt)),isNumber$2(wt)?React$1.createElement("rect",{x:at<gt?at:at-bt,y:0,width:bt,height:Math.floor(wt+(ht?parseInt("".concat(ht),10):1))}):null}},{key:"renderVerticalRect",value:function(rt){var it=this.props,st=it.baseLine,ut=it.points,ht=it.strokeWidth,at=ut[0].y,gt=ut[ut.length-1].y,bt=rt*Math.abs(at-gt),wt=max$3(ut.map(function(St){return St.x||0}));return isNumber$2(st)&&typeof st=="number"?wt=Math.max(st,wt):st&&Array.isArray(st)&&st.length&&(wt=Math.max(max$3(st.map(function(St){return St.x||0})),wt)),isNumber$2(wt)?React$1.createElement("rect",{x:0,y:at<gt?at:at-bt,width:wt+(ht?parseInt("".concat(ht),10):1),height:Math.floor(bt)}):null}},{key:"renderClipRect",value:function(rt){var it=this.props.layout;return it==="vertical"?this.renderVerticalRect(rt):this.renderHorizontalRect(rt)}},{key:"renderAreaStatically",value:function(rt,it,st,ut){var ht=this.props,at=ht.layout,gt=ht.type,bt=ht.stroke,wt=ht.connectNulls,St=ht.isRange;ht.ref;var kt=_objectWithoutProperties$2(ht,_excluded$1);return React$1.createElement(Layer$2,{clipPath:st?"url(#clipPath-".concat(ut,")"):null},React$1.createElement(Curve,_extends$4({},filterProps(kt,!0),{points:rt,connectNulls:wt,type:gt,baseLine:it,layout:at,stroke:"none",className:"recharts-area-area"})),bt!=="none"&&React$1.createElement(Curve,_extends$4({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:at,type:gt,connectNulls:wt,fill:"none",points:rt})),bt!=="none"&&St&&React$1.createElement(Curve,_extends$4({},filterProps(this.props,!1),{className:"recharts-area-curve",layout:at,type:gt,connectNulls:wt,fill:"none",points:it})))}},{key:"renderAreaWithAnimation",value:function(rt,it){var st=this,ut=this.props,ht=ut.points,at=ut.baseLine,gt=ut.isAnimationActive,bt=ut.animationBegin,wt=ut.animationDuration,St=ut.animationEasing,kt=ut.animationId,Rt=this.state,It=Rt.prevPoints,Dt=Rt.prevBaseLine;return React$1.createElement(Animate,{begin:bt,duration:wt,isActive:gt,easing:St,from:{t:0},to:{t:1},key:"area-".concat(kt),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(Mt){var $t=Mt.t;if(It){var jt=It.length/ht.length,Nt=ht.map(function(tr,mr){var vr=Math.floor(mr*jt);if(It[vr]){var wr=It[vr],yr=interpolateNumber$2(wr.x,tr.x),Or=interpolateNumber$2(wr.y,tr.y);return _objectSpread$2(_objectSpread$2({},tr),{},{x:yr($t),y:Or($t)})}return tr}),Ut;if(isNumber$2(at)&&typeof at=="number"){var Ht=interpolateNumber$2(Dt,at);Ut=Ht($t)}else if(isNil$1(at)||isNan(at)){var Kt=interpolateNumber$2(Dt,0);Ut=Kt($t)}else Ut=at.map(function(tr,mr){var vr=Math.floor(mr*jt);if(Dt[vr]){var wr=Dt[vr],yr=interpolateNumber$2(wr.x,tr.x),Or=interpolateNumber$2(wr.y,tr.y);return _objectSpread$2(_objectSpread$2({},tr),{},{x:yr($t),y:Or($t)})}return tr});return st.renderAreaStatically(Nt,Ut,rt,it)}return React$1.createElement(Layer$2,null,React$1.createElement("defs",null,React$1.createElement("clipPath",{id:"animationClipPath-".concat(it)},st.renderClipRect($t))),React$1.createElement(Layer$2,{clipPath:"url(#animationClipPath-".concat(it,")")},st.renderAreaStatically(ht,at,rt,it)))})}},{key:"renderArea",value:function(rt,it){var st=this.props,ut=st.points,ht=st.baseLine,at=st.isAnimationActive,gt=this.state,bt=gt.prevPoints,wt=gt.prevBaseLine,St=gt.totalLength;return at&&ut&&ut.length&&(!bt&&St>0||!isEqual$1(bt,ut)||!isEqual$1(wt,ht))?this.renderAreaWithAnimation(rt,it):this.renderAreaStatically(ut,ht,rt,it)}},{key:"render",value:function(){var rt,it=this.props,st=it.hide,ut=it.dot,ht=it.points,at=it.className,gt=it.top,bt=it.left,wt=it.xAxis,St=it.yAxis,kt=it.width,Rt=it.height,It=it.isAnimationActive,Dt=it.id;if(st||!ht||!ht.length)return null;var Mt=this.state.isAnimationFinished,$t=ht.length===1,jt=clsx$1("recharts-area",at),Nt=wt&&wt.allowDataOverflow,Ut=St&&St.allowDataOverflow,Ht=Nt||Ut,Kt=isNil$1(Dt)?this.id:Dt,tr=(rt=filterProps(ut,!1))!==null&&rt!==void 0?rt:{r:3,strokeWidth:2},mr=tr.r,vr=mr===void 0?3:mr,wr=tr.strokeWidth,yr=wr===void 0?2:wr,Or=isDotProps(ut)?ut:{},Nr=Or.clipDot,Lr=Nr===void 0?!0:Nr,ar=vr*2+yr;return React$1.createElement(Layer$2,{className:jt},Nt||Ut?React$1.createElement("defs",null,React$1.createElement("clipPath",{id:"clipPath-".concat(Kt)},React$1.createElement("rect",{x:Nt?bt:bt-kt/2,y:Ut?gt:gt-Rt/2,width:Nt?kt:kt*2,height:Ut?Rt:Rt*2})),!Lr&&React$1.createElement("clipPath",{id:"clipPath-dots-".concat(Kt)},React$1.createElement("rect",{x:bt-ar/2,y:gt-ar/2,width:kt+ar,height:Rt+ar}))):null,$t?null:this.renderArea(Ht,Kt),(ut||$t)&&this.renderDots(Ht,Lr,Kt),(!It||Mt)&&LabelList.renderCallByParent(this.props,ht))}}],[{key:"getDerivedStateFromProps",value:function(rt,it){return rt.animationId!==it.prevAnimationId?{prevAnimationId:rt.animationId,curPoints:rt.points,curBaseLine:rt.baseLine,prevPoints:it.curPoints,prevBaseLine:it.curBaseLine}:rt.points!==it.curPoints||rt.baseLine!==it.curBaseLine?{curPoints:rt.points,curBaseLine:rt.baseLine}:null}}]),et}(reactExports.PureComponent);_Area=Area;_defineProperty$4(Area,"displayName","Area");_defineProperty$4(Area,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Global.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});_defineProperty$4(Area,"getBaseValue",function(_e,et,tt,rt){var it=_e.layout,st=_e.baseValue,ut=et.props.baseValue,ht=ut??st;if(isNumber$2(ht)&&typeof ht=="number")return ht;var at=it==="horizontal"?rt:tt,gt=at.scale.domain();if(at.type==="number"){var bt=Math.max(gt[0],gt[1]),wt=Math.min(gt[0],gt[1]);return ht==="dataMin"?wt:ht==="dataMax"||bt<0?bt:Math.max(Math.min(gt[0],gt[1]),0)}return ht==="dataMin"?gt[0]:ht==="dataMax"?gt[1]:gt[0]});_defineProperty$4(Area,"getComposedData",function(_e){var et=_e.props,tt=_e.item,rt=_e.xAxis,it=_e.yAxis,st=_e.xAxisTicks,ut=_e.yAxisTicks,ht=_e.bandSize,at=_e.dataKey,gt=_e.stackedData,bt=_e.dataStartIndex,wt=_e.displayedData,St=_e.offset,kt=et.layout,Rt=gt&&gt.length,It=_Area.getBaseValue(et,tt,rt,it),Dt=kt==="horizontal",Mt=!1,$t=wt.map(function(Nt,Ut){var Ht;Rt?Ht=gt[bt+Ut]:(Ht=getValueByDataKey(Nt,at),Array.isArray(Ht)?Mt=!0:Ht=[It,Ht]);var Kt=Ht[1]==null||Rt&&getValueByDataKey(Nt,at)==null;return Dt?{x:getCateCoordinateOfLine({axis:rt,ticks:st,bandSize:ht,entry:Nt,index:Ut}),y:Kt?null:it.scale(Ht[1]),value:Ht,payload:Nt}:{x:Kt?null:rt.scale(Ht[1]),y:getCateCoordinateOfLine({axis:it,ticks:ut,bandSize:ht,entry:Nt,index:Ut}),value:Ht,payload:Nt}}),jt;return Rt||Mt?jt=$t.map(function(Nt){var Ut=Array.isArray(Nt.value)?Nt.value[0]:null;return Dt?{x:Nt.x,y:Ut!=null&&Nt.y!=null?it.scale(Ut):null}:{x:Ut!=null?rt.scale(Ut):null,y:Nt.y}}):jt=Dt?it.scale(It):rt.scale(It),_objectSpread$2({points:$t,baseLine:jt,layout:kt,isRange:Mt},St)});_defineProperty$4(Area,"renderDotItem",function(_e,et){var tt;if(React$1.isValidElement(_e))tt=React$1.cloneElement(_e,et);else if(isFunction$4(_e))tt=_e(et);else{var rt=clsx$1("recharts-area-dot",typeof _e!="boolean"?_e.className:"");tt=React$1.createElement(Dot,_extends$4({},et,{className:rt}))}return tt});function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$3.apply(this,arguments)}var XAxis=function _e(et){var tt=et.xAxisId,rt=useChartWidth(),it=useChartHeight(),st=useXAxisOrThrow(tt);return st==null?null:React$1.createElement(CartesianAxis,_extends$3({},st,{className:clsx$1("recharts-".concat(st.axisType," ").concat(st.axisType),st.className),viewBox:{x:0,y:0,width:rt,height:it},ticksGenerator:function(ht){return getTicksOfAxis(ht,!0)}}))};XAxis.displayName="XAxis";XAxis.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$2.apply(this,arguments)}var YAxis=function _e(et){var tt=et.yAxisId,rt=useChartWidth(),it=useChartHeight(),st=useYAxisOrThrow(tt);return st==null?null:React$1.createElement(CartesianAxis,_extends$2({},st,{className:clsx$1("recharts-".concat(st.axisType," ").concat(st.axisType),st.className),viewBox:{x:0,y:0,width:rt,height:it},ticksGenerator:function(ht){return getTicksOfAxis(ht,!0)}}))};YAxis.displayName="YAxis";YAxis.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};function _toConsumableArray$1(_e){return _arrayWithoutHoles$1(_e)||_iterableToArray$1(_e)||_unsupportedIterableToArray$2(_e)||_nonIterableSpread$1()}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$2(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$2(_e,et)}}function _iterableToArray$1(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles$1(_e){if(Array.isArray(_e))return _arrayLikeToArray$2(_e)}function _arrayLikeToArray$2(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}var detectReferenceElementsDomain=function _e(et,tt,rt,it,st){var ut=findAllByType(et,ReferenceLine),ht=findAllByType(et,ReferenceDot),at=[].concat(_toConsumableArray$1(ut),_toConsumableArray$1(ht)),gt=findAllByType(et,ReferenceArea),bt="".concat(it,"Id"),wt=it[0],St=tt;if(at.length&&(St=at.reduce(function(It,Dt){if(Dt.props[bt]===rt&&ifOverflowMatches(Dt.props,"extendDomain")&&isNumber$2(Dt.props[wt])){var Mt=Dt.props[wt];return[Math.min(It[0],Mt),Math.max(It[1],Mt)]}return It},St)),gt.length){var kt="".concat(wt,"1"),Rt="".concat(wt,"2");St=gt.reduce(function(It,Dt){if(Dt.props[bt]===rt&&ifOverflowMatches(Dt.props,"extendDomain")&&isNumber$2(Dt.props[kt])&&isNumber$2(Dt.props[Rt])){var Mt=Dt.props[kt],$t=Dt.props[Rt];return[Math.min(It[0],Mt,$t),Math.max(It[1],Mt,$t)]}return It},St)}return st&&st.length&&(St=st.reduce(function(It,Dt){return isNumber$2(Dt)?[Math.min(It[0],Dt),Math.max(It[1],Dt)]:It},St)),St},eventemitter3={exports:{}};(function(_e){var et=Object.prototype.hasOwnProperty,tt="~";function rt(){}Object.create&&(rt.prototype=Object.create(null),new rt().__proto__||(tt=!1));function it(at,gt,bt){this.fn=at,this.context=gt,this.once=bt||!1}function st(at,gt,bt,wt,St){if(typeof bt!="function")throw new TypeError("The listener must be a function");var kt=new it(bt,wt||at,St),Rt=tt?tt+gt:gt;return at._events[Rt]?at._events[Rt].fn?at._events[Rt]=[at._events[Rt],kt]:at._events[Rt].push(kt):(at._events[Rt]=kt,at._eventsCount++),at}function ut(at,gt){--at._eventsCount===0?at._events=new rt:delete at._events[gt]}function ht(){this._events=new rt,this._eventsCount=0}ht.prototype.eventNames=function(){var gt=[],bt,wt;if(this._eventsCount===0)return gt;for(wt in bt=this._events)et.call(bt,wt)&&gt.push(tt?wt.slice(1):wt);return Object.getOwnPropertySymbols?gt.concat(Object.getOwnPropertySymbols(bt)):gt},ht.prototype.listeners=function(gt){var bt=tt?tt+gt:gt,wt=this._events[bt];if(!wt)return[];if(wt.fn)return[wt.fn];for(var St=0,kt=wt.length,Rt=new Array(kt);St<kt;St++)Rt[St]=wt[St].fn;return Rt},ht.prototype.listenerCount=function(gt){var bt=tt?tt+gt:gt,wt=this._events[bt];return wt?wt.fn?1:wt.length:0},ht.prototype.emit=function(gt,bt,wt,St,kt,Rt){var It=tt?tt+gt:gt;if(!this._events[It])return!1;var Dt=this._events[It],Mt=arguments.length,$t,jt;if(Dt.fn){switch(Dt.once&&this.removeListener(gt,Dt.fn,void 0,!0),Mt){case 1:return Dt.fn.call(Dt.context),!0;case 2:return Dt.fn.call(Dt.context,bt),!0;case 3:return Dt.fn.call(Dt.context,bt,wt),!0;case 4:return Dt.fn.call(Dt.context,bt,wt,St),!0;case 5:return Dt.fn.call(Dt.context,bt,wt,St,kt),!0;case 6:return Dt.fn.call(Dt.context,bt,wt,St,kt,Rt),!0}for(jt=1,$t=new Array(Mt-1);jt<Mt;jt++)$t[jt-1]=arguments[jt];Dt.fn.apply(Dt.context,$t)}else{var Nt=Dt.length,Ut;for(jt=0;jt<Nt;jt++)switch(Dt[jt].once&&this.removeListener(gt,Dt[jt].fn,void 0,!0),Mt){case 1:Dt[jt].fn.call(Dt[jt].context);break;case 2:Dt[jt].fn.call(Dt[jt].context,bt);break;case 3:Dt[jt].fn.call(Dt[jt].context,bt,wt);break;case 4:Dt[jt].fn.call(Dt[jt].context,bt,wt,St);break;default:if(!$t)for(Ut=1,$t=new Array(Mt-1);Ut<Mt;Ut++)$t[Ut-1]=arguments[Ut];Dt[jt].fn.apply(Dt[jt].context,$t)}}return!0},ht.prototype.on=function(gt,bt,wt){return st(this,gt,bt,wt,!1)},ht.prototype.once=function(gt,bt,wt){return st(this,gt,bt,wt,!0)},ht.prototype.removeListener=function(gt,bt,wt,St){var kt=tt?tt+gt:gt;if(!this._events[kt])return this;if(!bt)return ut(this,kt),this;var Rt=this._events[kt];if(Rt.fn)Rt.fn===bt&&(!St||Rt.once)&&(!wt||Rt.context===wt)&&ut(this,kt);else{for(var It=0,Dt=[],Mt=Rt.length;It<Mt;It++)(Rt[It].fn!==bt||St&&!Rt[It].once||wt&&Rt[It].context!==wt)&&Dt.push(Rt[It]);Dt.length?this._events[kt]=Dt.length===1?Dt[0]:Dt:ut(this,kt)}return this},ht.prototype.removeAllListeners=function(gt){var bt;return gt?(bt=tt?tt+gt:gt,this._events[bt]&&ut(this,bt)):(this._events=new rt,this._eventsCount=0),this},ht.prototype.off=ht.prototype.removeListener,ht.prototype.addListener=ht.prototype.on,ht.prefixed=tt,ht.EventEmitter=ht,_e.exports=ht})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter$1=getDefaultExportFromCjs(eventemitter3Exports);var eventCenter=new EventEmitter$1,SYNC_EVENT="recharts.syncMouseEvents";function _typeof$3(_e){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$3(_e)}function _classCallCheck$2(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey$2(rt.key),rt)}}function _createClass$2(_e,et,tt){return et&&_defineProperties$2(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _defineProperty$3(_e,et,tt){return et=_toPropertyKey$2(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$2(_e){var et=_toPrimitive$2(_e,"string");return _typeof$3(et)=="symbol"?et:String(et)}function _toPrimitive$2(_e,et){if(_typeof$3(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$3(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var AccessibilityManager=function(){function _e(){_classCallCheck$2(this,_e),_defineProperty$3(this,"activeIndex",0),_defineProperty$3(this,"coordinateList",[]),_defineProperty$3(this,"layout","horizontal")}return _createClass$2(_e,[{key:"setDetails",value:function(tt){var rt,it=tt.coordinateList,st=it===void 0?null:it,ut=tt.container,ht=ut===void 0?null:ut,at=tt.layout,gt=at===void 0?null:at,bt=tt.offset,wt=bt===void 0?null:bt,St=tt.mouseHandlerCallback,kt=St===void 0?null:St;this.coordinateList=(rt=st??this.coordinateList)!==null&&rt!==void 0?rt:[],this.container=ht??this.container,this.layout=gt??this.layout,this.offset=wt??this.offset,this.mouseHandlerCallback=kt??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(tt){if(this.coordinateList.length!==0)switch(tt.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(tt){this.activeIndex=tt}},{key:"spoofMouse",value:function(){var tt,rt;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var it=this.container.getBoundingClientRect(),st=it.x,ut=it.y,ht=it.height,at=this.coordinateList[this.activeIndex].coordinate,gt=((tt=window)===null||tt===void 0?void 0:tt.scrollX)||0,bt=((rt=window)===null||rt===void 0?void 0:rt.scrollY)||0,wt=st+at+gt,St=ut+this.offset.top+ht/2+bt;this.mouseHandlerCallback({pageX:wt,pageY:St})}}}]),_e}();function isDomainSpecifiedByUser(_e,et,tt){if(tt==="number"&&et===!0&&Array.isArray(_e)){var rt=_e==null?void 0:_e[0],it=_e==null?void 0:_e[1];if(rt&&it&&isNumber$2(rt)&&isNumber$2(it))return!0}return!1}function getCursorRectangle(_e,et,tt,rt){var it=rt/2;return{stroke:"none",fill:"#ccc",x:_e==="horizontal"?et.x-it:tt.left+.5,y:_e==="horizontal"?tt.top+.5:et.y-it,width:_e==="horizontal"?rt:tt.width-1,height:_e==="horizontal"?tt.height-1:rt}}function getRadialCursorPoints(_e){var et=_e.cx,tt=_e.cy,rt=_e.radius,it=_e.startAngle,st=_e.endAngle,ut=polarToCartesian(et,tt,rt,it),ht=polarToCartesian(et,tt,rt,st);return{points:[ut,ht],cx:et,cy:tt,radius:rt,startAngle:it,endAngle:st}}function getCursorPoints(_e,et,tt){var rt,it,st,ut;if(_e==="horizontal")rt=et.x,st=rt,it=tt.top,ut=tt.top+tt.height;else if(_e==="vertical")it=et.y,ut=it,rt=tt.left,st=tt.left+tt.width;else if(et.cx!=null&&et.cy!=null)if(_e==="centric"){var ht=et.cx,at=et.cy,gt=et.innerRadius,bt=et.outerRadius,wt=et.angle,St=polarToCartesian(ht,at,gt,wt),kt=polarToCartesian(ht,at,bt,wt);rt=St.x,it=St.y,st=kt.x,ut=kt.y}else return getRadialCursorPoints(et);return[{x:rt,y:it},{x:st,y:ut}]}function _typeof$2(_e){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$2(_e)}function ownKeys$2(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread$1(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$2(Object(tt),!0).forEach(function(rt){_defineProperty$2(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$2(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$2(_e,et,tt){return et=_toPropertyKey$1(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey$1(_e){var et=_toPrimitive$1(_e,"string");return _typeof$2(et)=="symbol"?et:String(et)}function _toPrimitive$1(_e,et){if(_typeof$2(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$2(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}function Cursor(_e){var et=_e.element,tt=_e.tooltipEventType,rt=_e.isActive,it=_e.activeCoordinate,st=_e.activePayload,ut=_e.offset,ht=_e.activeTooltipIndex,at=_e.tooltipAxisBandSize,gt=_e.layout,bt=_e.chartName;if(!et||!et.props.cursor||!rt||!it||bt!=="ScatterChart"&&tt!=="axis")return null;var wt,St=Curve;if(bt==="ScatterChart")wt=it,St=Cross;else if(bt==="BarChart")wt=getCursorRectangle(gt,it,ut,at),St=Rectangle;else if(gt==="radial"){var kt=getRadialCursorPoints(it),Rt=kt.cx,It=kt.cy,Dt=kt.radius,Mt=kt.startAngle,$t=kt.endAngle;wt={cx:Rt,cy:It,startAngle:Mt,endAngle:$t,innerRadius:Dt,outerRadius:Dt},St=Sector}else wt={points:getCursorPoints(gt,it,ut)},St=Curve;var jt=_objectSpread$1(_objectSpread$1(_objectSpread$1(_objectSpread$1({stroke:"#ccc",pointerEvents:"none"},ut),wt),filterProps(et.props.cursor,!1)),{},{payload:st,payloadIndex:ht,className:clsx$1("recharts-tooltip-cursor",et.props.cursor.className)});return reactExports.isValidElement(et.props.cursor)?reactExports.cloneElement(et.props.cursor,jt):reactExports.createElement(St,jt)}var _excluded=["item"],_excluded2=["children","className","width","height","style","compact","title","desc"];function _typeof$1(_e){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(et){return typeof et}:function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof$1(_e)}function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends$1.apply(this,arguments)}function _slicedToArray$1(_e,et){return _arrayWithHoles$1(_e)||_iterableToArrayLimit$1(_e,et)||_unsupportedIterableToArray$1(_e,et)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _iterableToArrayLimit$1(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt,it,st,ut,ht=[],at=!0,gt=!1;try{if(st=(tt=tt.call(_e)).next,et!==0)for(;!(at=(rt=st.call(tt)).done)&&(ht.push(rt.value),ht.length!==et);at=!0);}catch(bt){gt=!0,it=bt}finally{try{if(!at&&tt.return!=null&&(ut=tt.return(),Object(ut)!==ut))return}finally{if(gt)throw it}}return ht}}function _arrayWithHoles$1(_e){if(Array.isArray(_e))return _e}function _objectWithoutProperties$1(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose$1(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _objectWithoutPropertiesLoose$1(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _classCallCheck$1(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,_toPropertyKey(rt.key),rt)}}function _createClass$1(_e,et,tt){return et&&_defineProperties$1(_e.prototype,et),Object.defineProperty(_e,"prototype",{writable:!1}),_e}function _callSuper(_e,et,tt){return et=_getPrototypeOf$1(et),_possibleConstructorReturn$1(_e,_isNativeReflectConstruct()?Reflect.construct(et,tt||[],_getPrototypeOf$1(_e).constructor):et.apply(_e,tt))}function _possibleConstructorReturn$1(_e,et){if(et&&(_typeof$1(et)==="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(_e)}function _isNativeReflectConstruct(){try{var _e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!_e})()}function _getPrototypeOf$1(_e){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf$1(_e)}function _assertThisInitialized$1(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _inherits$1(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),Object.defineProperty(_e,"prototype",{writable:!1}),et&&_setPrototypeOf$1(_e,et)}function _setPrototypeOf$1(_e,et){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf$1(_e,et)}function _toConsumableArray(_e){return _arrayWithoutHoles(_e)||_iterableToArray(_e)||_unsupportedIterableToArray$1(_e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray$1(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray$1(_e,et)}}function _iterableToArray(_e){if(typeof Symbol<"u"&&_e[Symbol.iterator]!=null||_e["@@iterator"]!=null)return Array.from(_e)}function _arrayWithoutHoles(_e){if(Array.isArray(_e))return _arrayLikeToArray$1(_e)}function _arrayLikeToArray$1(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function ownKeys$1(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys$1(Object(tt),!0).forEach(function(rt){_defineProperty$1(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys$1(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _defineProperty$1(_e,et,tt){return et=_toPropertyKey(et),et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _toPropertyKey(_e){var et=_toPrimitive(_e,"string");return _typeof$1(et)=="symbol"?et:String(et)}function _toPrimitive(_e,et){if(_typeof$1(_e)!="object"||!_e)return _e;var tt=_e[Symbol.toPrimitive];if(tt!==void 0){var rt=tt.call(_e,et||"default");if(_typeof$1(rt)!="object")return rt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(et==="string"?String:Number)(_e)}var ORIENT_MAP={xAxis:["bottom","top"],yAxis:["left","right"]},FULL_WIDTH_AND_HEIGHT={width:"100%",height:"100%"},originCoordinate={x:0,y:0};function renderAsIs(_e){return _e}var calculateTooltipPos=function _e(et,tt){return tt==="horizontal"?et.x:tt==="vertical"?et.y:tt==="centric"?et.angle:et.radius},getActiveCoordinate=function _e(et,tt,rt,it){var st=tt.find(function(bt){return bt&&bt.index===rt});if(st){if(et==="horizontal")return{x:st.coordinate,y:it.y};if(et==="vertical")return{x:it.x,y:st.coordinate};if(et==="centric"){var ut=st.coordinate,ht=it.radius;return _objectSpread(_objectSpread(_objectSpread({},it),polarToCartesian(it.cx,it.cy,ht,ut)),{},{angle:ut,radius:ht})}var at=st.coordinate,gt=it.angle;return _objectSpread(_objectSpread(_objectSpread({},it),polarToCartesian(it.cx,it.cy,at,gt)),{},{angle:gt,radius:at})}return originCoordinate},getDisplayedData=function _e(et,tt){var rt=tt.graphicalItems,it=tt.dataStartIndex,st=tt.dataEndIndex,ut=(rt??[]).reduce(function(ht,at){var gt=at.props.data;return gt&&gt.length?[].concat(_toConsumableArray(ht),_toConsumableArray(gt)):ht},[]);return ut.length>0?ut:et&&et.length&&isNumber$2(it)&&isNumber$2(st)?et.slice(it,st+1):[]};function getDefaultDomainByAxisType(_e){return _e==="number"?[0,"auto"]:void 0}var getTooltipContent=function _e(et,tt,rt,it){var st=et.graphicalItems,ut=et.tooltipAxis,ht=getDisplayedData(tt,et);return rt<0||!st||!st.length||rt>=ht.length?null:st.reduce(function(at,gt){var bt,wt=(bt=gt.props.data)!==null&&bt!==void 0?bt:tt;wt&&et.dataStartIndex+et.dataEndIndex!==0&&(wt=wt.slice(et.dataStartIndex,et.dataEndIndex+1));var St;if(ut.dataKey&&!ut.allowDuplicatedCategory){var kt=wt===void 0?ht:wt;St=findEntryInArray(kt,ut.dataKey,it)}else St=wt&&wt[rt]||ht[rt];return St?[].concat(_toConsumableArray(at),[getTooltipItem(gt,St)]):at},[])},getTooltipData=function _e(et,tt,rt,it){var st=it||{x:et.chartX,y:et.chartY},ut=calculateTooltipPos(st,rt),ht=et.orderedTooltipTicks,at=et.tooltipAxis,gt=et.tooltipTicks,bt=calculateActiveTickIndex(ut,ht,gt,at);if(bt>=0&&gt){var wt=gt[bt]&&gt[bt].value,St=getTooltipContent(et,tt,bt,wt),kt=getActiveCoordinate(rt,ht,bt,st);return{activeTooltipIndex:bt,activeLabel:wt,activePayload:St,activeCoordinate:kt}}return null},getAxisMapByAxes=function _e(et,tt){var rt=tt.axes,it=tt.graphicalItems,st=tt.axisType,ut=tt.axisIdKey,ht=tt.stackGroups,at=tt.dataStartIndex,gt=tt.dataEndIndex,bt=et.layout,wt=et.children,St=et.stackOffset,kt=isCategoricalAxis(bt,st);return rt.reduce(function(Rt,It){var Dt,Mt=It.props,$t=Mt.type,jt=Mt.dataKey,Nt=Mt.allowDataOverflow,Ut=Mt.allowDuplicatedCategory,Ht=Mt.scale,Kt=Mt.ticks,tr=Mt.includeHidden,mr=It.props[ut];if(Rt[mr])return Rt;var vr=getDisplayedData(et.data,{graphicalItems:it.filter(function(rn){return rn.props[ut]===mr}),dataStartIndex:at,dataEndIndex:gt}),wr=vr.length,yr,Or,Nr;isDomainSpecifiedByUser(It.props.domain,Nt,$t)&&(yr=parseSpecifiedDomain(It.props.domain,null,Nt),kt&&($t==="number"||Ht!=="auto")&&(Nr=getDomainOfDataByKey(vr,jt,"category")));var Lr=getDefaultDomainByAxisType($t);if(!yr||yr.length===0){var ar,hr=(ar=It.props.domain)!==null&&ar!==void 0?ar:Lr;if(jt){if(yr=getDomainOfDataByKey(vr,jt,$t),$t==="category"&&kt){var Qt=hasDuplicate(yr);Ut&&Qt?(Or=yr,yr=range$2(0,wr)):Ut||(yr=parseDomainOfCategoryAxis(hr,yr,It).reduce(function(rn,fn){return rn.indexOf(fn)>=0?rn:[].concat(_toConsumableArray(rn),[fn])},[]))}else if($t==="category")Ut?yr=yr.filter(function(rn){return rn!==""&&!isNil$1(rn)}):yr=parseDomainOfCategoryAxis(hr,yr,It).reduce(function(rn,fn){return rn.indexOf(fn)>=0||fn===""||isNil$1(fn)?rn:[].concat(_toConsumableArray(rn),[fn])},[]);else if($t==="number"){var ir=parseErrorBarsOfAxis(vr,it.filter(function(rn){return rn.props[ut]===mr&&(tr||!rn.props.hide)}),jt,st,bt);ir&&(yr=ir)}kt&&($t==="number"||Ht!=="auto")&&(Nr=getDomainOfDataByKey(vr,jt,"category"))}else kt?yr=range$2(0,wr):ht&&ht[mr]&&ht[mr].hasStack&&$t==="number"?yr=St==="expand"?[0,1]:getDomainOfStackGroups(ht[mr].stackGroups,at,gt):yr=getDomainOfItemsWithSameAxis(vr,it.filter(function(rn){return rn.props[ut]===mr&&(tr||!rn.props.hide)}),$t,bt,!0);if($t==="number")yr=detectReferenceElementsDomain(wt,yr,mr,st,Kt),hr&&(yr=parseSpecifiedDomain(hr,yr,Nt));else if($t==="category"&&hr){var Mr=hr,Cr=yr.every(function(rn){return Mr.indexOf(rn)>=0});Cr&&(yr=Mr)}}return _objectSpread(_objectSpread({},Rt),{},_defineProperty$1({},mr,_objectSpread(_objectSpread({},It.props),{},{axisType:st,domain:yr,categoricalDomain:Nr,duplicateDomain:Or,originalDomain:(Dt=It.props.domain)!==null&&Dt!==void 0?Dt:Lr,isCategorical:kt,layout:bt})))},{})},getAxisMapByItems=function _e(et,tt){var rt=tt.graphicalItems,it=tt.Axis,st=tt.axisType,ut=tt.axisIdKey,ht=tt.stackGroups,at=tt.dataStartIndex,gt=tt.dataEndIndex,bt=et.layout,wt=et.children,St=getDisplayedData(et.data,{graphicalItems:rt,dataStartIndex:at,dataEndIndex:gt}),kt=St.length,Rt=isCategoricalAxis(bt,st),It=-1;return rt.reduce(function(Dt,Mt){var $t=Mt.props[ut],jt=getDefaultDomainByAxisType("number");if(!Dt[$t]){It++;var Nt;return Rt?Nt=range$2(0,kt):ht&&ht[$t]&&ht[$t].hasStack?(Nt=getDomainOfStackGroups(ht[$t].stackGroups,at,gt),Nt=detectReferenceElementsDomain(wt,Nt,$t,st)):(Nt=parseSpecifiedDomain(jt,getDomainOfItemsWithSameAxis(St,rt.filter(function(Ut){return Ut.props[ut]===$t&&!Ut.props.hide}),"number",bt),it.defaultProps.allowDataOverflow),Nt=detectReferenceElementsDomain(wt,Nt,$t,st)),_objectSpread(_objectSpread({},Dt),{},_defineProperty$1({},$t,_objectSpread(_objectSpread({axisType:st},it.defaultProps),{},{hide:!0,orientation:get$4(ORIENT_MAP,"".concat(st,".").concat(It%2),null),domain:Nt,originalDomain:jt,isCategorical:Rt,layout:bt})))}return Dt},{})},getAxisMap=function _e(et,tt){var rt=tt.axisType,it=rt===void 0?"xAxis":rt,st=tt.AxisComp,ut=tt.graphicalItems,ht=tt.stackGroups,at=tt.dataStartIndex,gt=tt.dataEndIndex,bt=et.children,wt="".concat(it,"Id"),St=findAllByType(bt,st),kt={};return St&&St.length?kt=getAxisMapByAxes(et,{axes:St,graphicalItems:ut,axisType:it,axisIdKey:wt,stackGroups:ht,dataStartIndex:at,dataEndIndex:gt}):ut&&ut.length&&(kt=getAxisMapByItems(et,{Axis:st,graphicalItems:ut,axisType:it,axisIdKey:wt,stackGroups:ht,dataStartIndex:at,dataEndIndex:gt})),kt},tooltipTicksGenerator=function _e(et){var tt=getAnyElementOfObject(et),rt=getTicksOfAxis(tt,!1,!0);return{tooltipTicks:rt,orderedTooltipTicks:sortBy$1(rt,function(it){return it.coordinate}),tooltipAxis:tt,tooltipAxisBandSize:getBandSizeOfAxis(tt,rt)}},createDefaultState=function _e(et){var tt=et.children,rt=et.defaultShowTooltip,it=findChildByType(tt,Brush),st=0,ut=0;return et.data&&et.data.length!==0&&(ut=et.data.length-1),it&&it.props&&(it.props.startIndex>=0&&(st=it.props.startIndex),it.props.endIndex>=0&&(ut=it.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:st,dataEndIndex:ut,activeTooltipIndex:-1,isTooltipActive:!!rt}},hasGraphicalBarItem=function _e(et){return!et||!et.length?!1:et.some(function(tt){var rt=getDisplayName(tt&&tt.type);return rt&&rt.indexOf("Bar")>=0})},getAxisNameByLayout=function _e(et){return et==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:et==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:et==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},calculateOffset=function _e(et,tt){var rt=et.props,it=et.graphicalItems,st=et.xAxisMap,ut=st===void 0?{}:st,ht=et.yAxisMap,at=ht===void 0?{}:ht,gt=rt.width,bt=rt.height,wt=rt.children,St=rt.margin||{},kt=findChildByType(wt,Brush),Rt=findChildByType(wt,Legend),It=Object.keys(at).reduce(function(Ut,Ht){var Kt=at[Ht],tr=Kt.orientation;return!Kt.mirror&&!Kt.hide?_objectSpread(_objectSpread({},Ut),{},_defineProperty$1({},tr,Ut[tr]+Kt.width)):Ut},{left:St.left||0,right:St.right||0}),Dt=Object.keys(ut).reduce(function(Ut,Ht){var Kt=ut[Ht],tr=Kt.orientation;return!Kt.mirror&&!Kt.hide?_objectSpread(_objectSpread({},Ut),{},_defineProperty$1({},tr,get$4(Ut,"".concat(tr))+Kt.height)):Ut},{top:St.top||0,bottom:St.bottom||0}),Mt=_objectSpread(_objectSpread({},Dt),It),$t=Mt.bottom;kt&&(Mt.bottom+=kt.props.height||Brush.defaultProps.height),Rt&&tt&&(Mt=appendOffsetOfLegend(Mt,it,rt,tt));var jt=gt-Mt.left-Mt.right,Nt=bt-Mt.top-Mt.bottom;return _objectSpread(_objectSpread({brushBottom:$t},Mt),{},{width:Math.max(jt,0),height:Math.max(Nt,0)})},getCartesianAxisSize=function _e(et,tt){if(tt==="xAxis")return et[tt].width;if(tt==="yAxis")return et[tt].height},generateCategoricalChart=function _e(et){var tt,rt=et.chartName,it=et.GraphicalChild,st=et.defaultTooltipEventType,ut=st===void 0?"axis":st,ht=et.validateTooltipEventTypes,at=ht===void 0?["axis"]:ht,gt=et.axisComponents,bt=et.legendContent,wt=et.formatAxisMap,St=et.defaultProps,kt=function(Dt,Mt){var $t=Mt.graphicalItems,jt=Mt.stackGroups,Nt=Mt.offset,Ut=Mt.updateId,Ht=Mt.dataStartIndex,Kt=Mt.dataEndIndex,tr=Dt.barSize,mr=Dt.layout,vr=Dt.barGap,wr=Dt.barCategoryGap,yr=Dt.maxBarSize,Or=getAxisNameByLayout(mr),Nr=Or.numericAxisName,Lr=Or.cateAxisName,ar=hasGraphicalBarItem($t),hr=[];return $t.forEach(function(Qt,ir){var Mr=getDisplayedData(Dt.data,{graphicalItems:[Qt],dataStartIndex:Ht,dataEndIndex:Kt}),Cr=Qt.props,rn=Cr.dataKey,fn=Cr.maxBarSize,Dn=Qt.props["".concat(Nr,"Id")],Yn=Qt.props["".concat(Lr,"Id")],eo={},Gn=gt.reduce(function(sn,wn){var Xn=Mt["".concat(wn.axisType,"Map")],Fn=Qt.props["".concat(wn.axisType,"Id")];Xn&&Xn[Fn]||wn.axisType==="zAxis"||invariant();var ro=Xn[Fn];return _objectSpread(_objectSpread({},sn),{},_defineProperty$1(_defineProperty$1({},wn.axisType,ro),"".concat(wn.axisType,"Ticks"),getTicksOfAxis(ro)))},eo),lo=Gn[Lr],mn=Gn["".concat(Lr,"Ticks")],Hn=jt&&jt[Dn]&&jt[Dn].hasStack&&getStackedDataOfItem(Qt,jt[Dn].stackGroups),Rn=getDisplayName(Qt.type).indexOf("Bar")>=0,dn=getBandSizeOfAxis(lo,mn),qn=[],On=ar&&getBarSizeList({barSize:tr,stackGroups:jt,totalSize:getCartesianAxisSize(Gn,Lr)});if(Rn){var xo,Io,$o=isNil$1(fn)?yr:fn,Zr=(xo=(Io=getBandSizeOfAxis(lo,mn,!0))!==null&&Io!==void 0?Io:$o)!==null&&xo!==void 0?xo:0;qn=getBarPosition({barGap:vr,barCategoryGap:wr,bandSize:Zr!==dn?Zr:dn,sizeList:On[Yn],maxBarSize:$o}),Zr!==dn&&(qn=qn.map(function(sn){return _objectSpread(_objectSpread({},sn),{},{position:_objectSpread(_objectSpread({},sn.position),{},{offset:sn.position.offset-Zr/2})})}))}var pn=Qt&&Qt.type&&Qt.type.getComposedData;pn&&hr.push({props:_objectSpread(_objectSpread({},pn(_objectSpread(_objectSpread({},Gn),{},{displayedData:Mr,props:Dt,dataKey:rn,item:Qt,bandSize:dn,barPosition:qn,offset:Nt,stackedData:Hn,layout:mr,dataStartIndex:Ht,dataEndIndex:Kt}))),{},_defineProperty$1(_defineProperty$1(_defineProperty$1({key:Qt.key||"item-".concat(ir)},Nr,Gn[Nr]),Lr,Gn[Lr]),"animationId",Ut)),childIndex:parseChildIndex(Qt,Dt.children),item:Qt})}),hr},Rt=function(Dt,Mt){var $t=Dt.props,jt=Dt.dataStartIndex,Nt=Dt.dataEndIndex,Ut=Dt.updateId;if(!validateWidthHeight({props:$t}))return null;var Ht=$t.children,Kt=$t.layout,tr=$t.stackOffset,mr=$t.data,vr=$t.reverseStackOrder,wr=getAxisNameByLayout(Kt),yr=wr.numericAxisName,Or=wr.cateAxisName,Nr=findAllByType(Ht,it),Lr=getStackGroupsByAxisId(mr,Nr,"".concat(yr,"Id"),"".concat(Or,"Id"),tr,vr),ar=gt.reduce(function(Cr,rn){var fn="".concat(rn.axisType,"Map");return _objectSpread(_objectSpread({},Cr),{},_defineProperty$1({},fn,getAxisMap($t,_objectSpread(_objectSpread({},rn),{},{graphicalItems:Nr,stackGroups:rn.axisType===yr&&Lr,dataStartIndex:jt,dataEndIndex:Nt}))))},{}),hr=calculateOffset(_objectSpread(_objectSpread({},ar),{},{props:$t,graphicalItems:Nr}),Mt==null?void 0:Mt.legendBBox);Object.keys(ar).forEach(function(Cr){ar[Cr]=wt($t,ar[Cr],hr,Cr.replace("Map",""),rt)});var Qt=ar["".concat(Or,"Map")],ir=tooltipTicksGenerator(Qt),Mr=kt($t,_objectSpread(_objectSpread({},ar),{},{dataStartIndex:jt,dataEndIndex:Nt,updateId:Ut,graphicalItems:Nr,stackGroups:Lr,offset:hr}));return _objectSpread(_objectSpread({formattedGraphicalItems:Mr,graphicalItems:Nr,offset:hr,stackGroups:Lr},ir),ar)};return tt=function(It){_inherits$1(Dt,It);function Dt(Mt){var $t,jt,Nt;return _classCallCheck$1(this,Dt),Nt=_callSuper(this,Dt,[Mt]),_defineProperty$1(_assertThisInitialized$1(Nt),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),_defineProperty$1(_assertThisInitialized$1(Nt),"accessibilityManager",new AccessibilityManager),_defineProperty$1(_assertThisInitialized$1(Nt),"handleLegendBBoxUpdate",function(Ut){if(Ut){var Ht=Nt.state,Kt=Ht.dataStartIndex,tr=Ht.dataEndIndex,mr=Ht.updateId;Nt.setState(_objectSpread({legendBBox:Ut},Rt({props:Nt.props,dataStartIndex:Kt,dataEndIndex:tr,updateId:mr},_objectSpread(_objectSpread({},Nt.state),{},{legendBBox:Ut}))))}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleReceiveSyncEvent",function(Ut,Ht,Kt){if(Nt.props.syncId===Ut){if(Kt===Nt.eventEmitterSymbol&&typeof Nt.props.syncMethod!="function")return;Nt.applySyncEvent(Ht)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleBrushChange",function(Ut){var Ht=Ut.startIndex,Kt=Ut.endIndex;if(Ht!==Nt.state.dataStartIndex||Kt!==Nt.state.dataEndIndex){var tr=Nt.state.updateId;Nt.setState(function(){return _objectSpread({dataStartIndex:Ht,dataEndIndex:Kt},Rt({props:Nt.props,dataStartIndex:Ht,dataEndIndex:Kt,updateId:tr},Nt.state))}),Nt.triggerSyncEvent({dataStartIndex:Ht,dataEndIndex:Kt})}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleMouseEnter",function(Ut){var Ht=Nt.getMouseInfo(Ut);if(Ht){var Kt=_objectSpread(_objectSpread({},Ht),{},{isTooltipActive:!0});Nt.setState(Kt),Nt.triggerSyncEvent(Kt);var tr=Nt.props.onMouseEnter;isFunction$4(tr)&&tr(Kt,Ut)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"triggeredAfterMouseMove",function(Ut){var Ht=Nt.getMouseInfo(Ut),Kt=Ht?_objectSpread(_objectSpread({},Ht),{},{isTooltipActive:!0}):{isTooltipActive:!1};Nt.setState(Kt),Nt.triggerSyncEvent(Kt);var tr=Nt.props.onMouseMove;isFunction$4(tr)&&tr(Kt,Ut)}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleItemMouseEnter",function(Ut){Nt.setState(function(){return{isTooltipActive:!0,activeItem:Ut,activePayload:Ut.tooltipPayload,activeCoordinate:Ut.tooltipPosition||{x:Ut.cx,y:Ut.cy}}})}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleItemMouseLeave",function(){Nt.setState(function(){return{isTooltipActive:!1}})}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleMouseMove",function(Ut){Ut.persist(),Nt.throttleTriggeredAfterMouseMove(Ut)}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleMouseLeave",function(Ut){Nt.throttleTriggeredAfterMouseMove.cancel();var Ht={isTooltipActive:!1};Nt.setState(Ht),Nt.triggerSyncEvent(Ht);var Kt=Nt.props.onMouseLeave;isFunction$4(Kt)&&Kt(Ht,Ut)}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleOuterEvent",function(Ut){var Ht=getReactEventByType(Ut),Kt=get$4(Nt.props,"".concat(Ht));if(Ht&&isFunction$4(Kt)){var tr,mr;/.*touch.*/i.test(Ht)?mr=Nt.getMouseInfo(Ut.changedTouches[0]):mr=Nt.getMouseInfo(Ut),Kt((tr=mr)!==null&&tr!==void 0?tr:{},Ut)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleClick",function(Ut){var Ht=Nt.getMouseInfo(Ut);if(Ht){var Kt=_objectSpread(_objectSpread({},Ht),{},{isTooltipActive:!0});Nt.setState(Kt),Nt.triggerSyncEvent(Kt);var tr=Nt.props.onClick;isFunction$4(tr)&&tr(Kt,Ut)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleMouseDown",function(Ut){var Ht=Nt.props.onMouseDown;if(isFunction$4(Ht)){var Kt=Nt.getMouseInfo(Ut);Ht(Kt,Ut)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleMouseUp",function(Ut){var Ht=Nt.props.onMouseUp;if(isFunction$4(Ht)){var Kt=Nt.getMouseInfo(Ut);Ht(Kt,Ut)}}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleTouchMove",function(Ut){Ut.changedTouches!=null&&Ut.changedTouches.length>0&&Nt.throttleTriggeredAfterMouseMove(Ut.changedTouches[0])}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleTouchStart",function(Ut){Ut.changedTouches!=null&&Ut.changedTouches.length>0&&Nt.handleMouseDown(Ut.changedTouches[0])}),_defineProperty$1(_assertThisInitialized$1(Nt),"handleTouchEnd",function(Ut){Ut.changedTouches!=null&&Ut.changedTouches.length>0&&Nt.handleMouseUp(Ut.changedTouches[0])}),_defineProperty$1(_assertThisInitialized$1(Nt),"triggerSyncEvent",function(Ut){Nt.props.syncId!==void 0&&eventCenter.emit(SYNC_EVENT,Nt.props.syncId,Ut,Nt.eventEmitterSymbol)}),_defineProperty$1(_assertThisInitialized$1(Nt),"applySyncEvent",function(Ut){var Ht=Nt.props,Kt=Ht.layout,tr=Ht.syncMethod,mr=Nt.state.updateId,vr=Ut.dataStartIndex,wr=Ut.dataEndIndex;if(Ut.dataStartIndex!==void 0||Ut.dataEndIndex!==void 0)Nt.setState(_objectSpread({dataStartIndex:vr,dataEndIndex:wr},Rt({props:Nt.props,dataStartIndex:vr,dataEndIndex:wr,updateId:mr},Nt.state)));else if(Ut.activeTooltipIndex!==void 0){var yr=Ut.chartX,Or=Ut.chartY,Nr=Ut.activeTooltipIndex,Lr=Nt.state,ar=Lr.offset,hr=Lr.tooltipTicks;if(!ar)return;if(typeof tr=="function")Nr=tr(hr,Ut);else if(tr==="value"){Nr=-1;for(var Qt=0;Qt<hr.length;Qt++)if(hr[Qt].value===Ut.activeLabel){Nr=Qt;break}}var ir=_objectSpread(_objectSpread({},ar),{},{x:ar.left,y:ar.top}),Mr=Math.min(yr,ir.x+ir.width),Cr=Math.min(Or,ir.y+ir.height),rn=hr[Nr]&&hr[Nr].value,fn=getTooltipContent(Nt.state,Nt.props.data,Nr),Dn=hr[Nr]?{x:Kt==="horizontal"?hr[Nr].coordinate:Mr,y:Kt==="horizontal"?Cr:hr[Nr].coordinate}:originCoordinate;Nt.setState(_objectSpread(_objectSpread({},Ut),{},{activeLabel:rn,activeCoordinate:Dn,activePayload:fn,activeTooltipIndex:Nr}))}else Nt.setState(Ut)}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderCursor",function(Ut){var Ht,Kt=Nt.state,tr=Kt.isTooltipActive,mr=Kt.activeCoordinate,vr=Kt.activePayload,wr=Kt.offset,yr=Kt.activeTooltipIndex,Or=Kt.tooltipAxisBandSize,Nr=Nt.getTooltipEventType(),Lr=(Ht=Ut.props.active)!==null&&Ht!==void 0?Ht:tr,ar=Nt.props.layout,hr=Ut.key||"_recharts-cursor";return React$1.createElement(Cursor,{key:hr,activeCoordinate:mr,activePayload:vr,activeTooltipIndex:yr,chartName:rt,element:Ut,isActive:Lr,layout:ar,offset:wr,tooltipAxisBandSize:Or,tooltipEventType:Nr})}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderPolarAxis",function(Ut,Ht,Kt){var tr=get$4(Ut,"type.axisType"),mr=get$4(Nt.state,"".concat(tr,"Map")),vr=mr&&mr[Ut.props["".concat(tr,"Id")]];return reactExports.cloneElement(Ut,_objectSpread(_objectSpread({},vr),{},{className:clsx$1(tr,vr.className),key:Ut.key||"".concat(Ht,"-").concat(Kt),ticks:getTicksOfAxis(vr,!0)}))}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderPolarGrid",function(Ut){var Ht=Ut.props,Kt=Ht.radialLines,tr=Ht.polarAngles,mr=Ht.polarRadius,vr=Nt.state,wr=vr.radiusAxisMap,yr=vr.angleAxisMap,Or=getAnyElementOfObject(wr),Nr=getAnyElementOfObject(yr),Lr=Nr.cx,ar=Nr.cy,hr=Nr.innerRadius,Qt=Nr.outerRadius;return reactExports.cloneElement(Ut,{polarAngles:Array.isArray(tr)?tr:getTicksOfAxis(Nr,!0).map(function(ir){return ir.coordinate}),polarRadius:Array.isArray(mr)?mr:getTicksOfAxis(Or,!0).map(function(ir){return ir.coordinate}),cx:Lr,cy:ar,innerRadius:hr,outerRadius:Qt,key:Ut.key||"polar-grid",radialLines:Kt})}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderLegend",function(){var Ut=Nt.state.formattedGraphicalItems,Ht=Nt.props,Kt=Ht.children,tr=Ht.width,mr=Ht.height,vr=Nt.props.margin||{},wr=tr-(vr.left||0)-(vr.right||0),yr=getLegendProps({children:Kt,formattedGraphicalItems:Ut,legendWidth:wr,legendContent:bt});if(!yr)return null;var Or=yr.item,Nr=_objectWithoutProperties$1(yr,_excluded);return reactExports.cloneElement(Or,_objectSpread(_objectSpread({},Nr),{},{chartWidth:tr,chartHeight:mr,margin:vr,onBBoxUpdate:Nt.handleLegendBBoxUpdate}))}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderTooltip",function(){var Ut,Ht=Nt.props,Kt=Ht.children,tr=Ht.accessibilityLayer,mr=findChildByType(Kt,Tooltip);if(!mr)return null;var vr=Nt.state,wr=vr.isTooltipActive,yr=vr.activeCoordinate,Or=vr.activePayload,Nr=vr.activeLabel,Lr=vr.offset,ar=(Ut=mr.props.active)!==null&&Ut!==void 0?Ut:wr;return reactExports.cloneElement(mr,{viewBox:_objectSpread(_objectSpread({},Lr),{},{x:Lr.left,y:Lr.top}),active:ar,label:Nr,payload:ar?Or:[],coordinate:yr,accessibilityLayer:tr})}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderBrush",function(Ut){var Ht=Nt.props,Kt=Ht.margin,tr=Ht.data,mr=Nt.state,vr=mr.offset,wr=mr.dataStartIndex,yr=mr.dataEndIndex,Or=mr.updateId;return reactExports.cloneElement(Ut,{key:Ut.key||"_recharts-brush",onChange:combineEventHandlers(Nt.handleBrushChange,Ut.props.onChange),data:tr,x:isNumber$2(Ut.props.x)?Ut.props.x:vr.left,y:isNumber$2(Ut.props.y)?Ut.props.y:vr.top+vr.height+vr.brushBottom-(Kt.bottom||0),width:isNumber$2(Ut.props.width)?Ut.props.width:vr.width,startIndex:wr,endIndex:yr,updateId:"brush-".concat(Or)})}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderReferenceElement",function(Ut,Ht,Kt){if(!Ut)return null;var tr=_assertThisInitialized$1(Nt),mr=tr.clipPathId,vr=Nt.state,wr=vr.xAxisMap,yr=vr.yAxisMap,Or=vr.offset,Nr=Ut.props,Lr=Nr.xAxisId,ar=Nr.yAxisId;return reactExports.cloneElement(Ut,{key:Ut.key||"".concat(Ht,"-").concat(Kt),xAxis:wr[Lr],yAxis:yr[ar],viewBox:{x:Or.left,y:Or.top,width:Or.width,height:Or.height},clipPathId:mr})}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderActivePoints",function(Ut){var Ht=Ut.item,Kt=Ut.activePoint,tr=Ut.basePoint,mr=Ut.childIndex,vr=Ut.isRange,wr=[],yr=Ht.props.key,Or=Ht.item.props,Nr=Or.activeDot,Lr=Or.dataKey,ar=_objectSpread(_objectSpread({index:mr,dataKey:Lr,cx:Kt.x,cy:Kt.y,r:4,fill:getMainColorOfGraphicItem(Ht.item),strokeWidth:2,stroke:"#fff",payload:Kt.payload,value:Kt.value,key:"".concat(yr,"-activePoint-").concat(mr)},filterProps(Nr,!1)),adaptEventHandlers(Nr));return wr.push(Dt.renderActiveDot(Nr,ar)),tr?wr.push(Dt.renderActiveDot(Nr,_objectSpread(_objectSpread({},ar),{},{cx:tr.x,cy:tr.y,key:"".concat(yr,"-basePoint-").concat(mr)}))):vr&&wr.push(null),wr}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderGraphicChild",function(Ut,Ht,Kt){var tr=Nt.filterFormatItem(Ut,Ht,Kt);if(!tr)return null;var mr=Nt.getTooltipEventType(),vr=Nt.state,wr=vr.isTooltipActive,yr=vr.tooltipAxis,Or=vr.activeTooltipIndex,Nr=vr.activeLabel,Lr=Nt.props.children,ar=findChildByType(Lr,Tooltip),hr=tr.props,Qt=hr.points,ir=hr.isRange,Mr=hr.baseLine,Cr=tr.item.props,rn=Cr.activeDot,fn=Cr.hide,Dn=Cr.activeBar,Yn=Cr.activeShape,eo=!!(!fn&&wr&&ar&&(rn||Dn||Yn)),Gn={};mr!=="axis"&&ar&&ar.props.trigger==="click"?Gn={onClick:combineEventHandlers(Nt.handleItemMouseEnter,Ut.props.onClick)}:mr!=="axis"&&(Gn={onMouseLeave:combineEventHandlers(Nt.handleItemMouseLeave,Ut.props.onMouseLeave),onMouseEnter:combineEventHandlers(Nt.handleItemMouseEnter,Ut.props.onMouseEnter)});var lo=reactExports.cloneElement(Ut,_objectSpread(_objectSpread({},tr.props),Gn));function mn(wn){return typeof yr.dataKey=="function"?yr.dataKey(wn.payload):null}if(eo)if(Or>=0){var Hn,Rn;if(yr.dataKey&&!yr.allowDuplicatedCategory){var dn=typeof yr.dataKey=="function"?mn:"payload.".concat(yr.dataKey.toString());Hn=findEntryInArray(Qt,dn,Nr),Rn=ir&&Mr&&findEntryInArray(Mr,dn,Nr)}else Hn=Qt==null?void 0:Qt[Or],Rn=ir&&Mr&&Mr[Or];if(Yn||Dn){var qn=Ut.props.activeIndex!==void 0?Ut.props.activeIndex:Or;return[reactExports.cloneElement(Ut,_objectSpread(_objectSpread(_objectSpread({},tr.props),Gn),{},{activeIndex:qn})),null,null]}if(!isNil$1(Hn))return[lo].concat(_toConsumableArray(Nt.renderActivePoints({item:tr,activePoint:Hn,basePoint:Rn,childIndex:Or,isRange:ir})))}else{var On,xo=(On=Nt.getItemByXY(Nt.state.activeCoordinate))!==null&&On!==void 0?On:{graphicalItem:lo},Io=xo.graphicalItem,$o=Io.item,Zr=$o===void 0?Ut:$o,pn=Io.childIndex,sn=_objectSpread(_objectSpread(_objectSpread({},tr.props),Gn),{},{activeIndex:pn});return[reactExports.cloneElement(Zr,sn),null,null]}return ir?[lo,null,null]:[lo,null]}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderCustomized",function(Ut,Ht,Kt){return reactExports.cloneElement(Ut,_objectSpread(_objectSpread({key:"recharts-customized-".concat(Kt)},Nt.props),Nt.state))}),_defineProperty$1(_assertThisInitialized$1(Nt),"renderMap",{CartesianGrid:{handler:renderAsIs,once:!0},ReferenceArea:{handler:Nt.renderReferenceElement},ReferenceLine:{handler:renderAsIs},ReferenceDot:{handler:Nt.renderReferenceElement},XAxis:{handler:renderAsIs},YAxis:{handler:renderAsIs},Brush:{handler:Nt.renderBrush,once:!0},Bar:{handler:Nt.renderGraphicChild},Line:{handler:Nt.renderGraphicChild},Area:{handler:Nt.renderGraphicChild},Radar:{handler:Nt.renderGraphicChild},RadialBar:{handler:Nt.renderGraphicChild},Scatter:{handler:Nt.renderGraphicChild},Pie:{handler:Nt.renderGraphicChild},Funnel:{handler:Nt.renderGraphicChild},Tooltip:{handler:Nt.renderCursor,once:!0},PolarGrid:{handler:Nt.renderPolarGrid,once:!0},PolarAngleAxis:{handler:Nt.renderPolarAxis},PolarRadiusAxis:{handler:Nt.renderPolarAxis},Customized:{handler:Nt.renderCustomized}}),Nt.clipPathId="".concat(($t=Mt.id)!==null&&$t!==void 0?$t:uniqueId("recharts"),"-clip"),Nt.throttleTriggeredAfterMouseMove=throttle$1(Nt.triggeredAfterMouseMove,(jt=Mt.throttleDelay)!==null&&jt!==void 0?jt:1e3/60),Nt.state={},Nt}return _createClass$1(Dt,[{key:"componentDidMount",value:function(){var $t,jt;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:($t=this.props.margin.left)!==null&&$t!==void 0?$t:0,top:(jt=this.props.margin.top)!==null&&jt!==void 0?jt:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var $t=this.props,jt=$t.children,Nt=$t.data,Ut=$t.height,Ht=$t.layout,Kt=findChildByType(jt,Tooltip);if(Kt){var tr=Kt.props.defaultIndex;if(!(typeof tr!="number"||tr<0||tr>this.state.tooltipTicks.length)){var mr=this.state.tooltipTicks[tr]&&this.state.tooltipTicks[tr].value,vr=getTooltipContent(this.state,Nt,tr,mr),wr=this.state.tooltipTicks[tr].coordinate,yr=(this.state.offset.top+Ut)/2,Or=Ht==="horizontal",Nr=Or?{x:wr,y:yr}:{y:wr,x:yr},Lr=this.state.formattedGraphicalItems.find(function(hr){var Qt=hr.item;return Qt.type.name==="Scatter"});Lr&&(Nr=_objectSpread(_objectSpread({},Nr),Lr.props.points[tr].tooltipPosition),vr=Lr.props.points[tr].tooltipPayload);var ar={activeTooltipIndex:tr,isTooltipActive:!0,activeLabel:mr,activePayload:vr,activeCoordinate:Nr};this.setState(ar),this.renderCursor(Kt),this.accessibilityManager.setIndex(tr)}}}},{key:"getSnapshotBeforeUpdate",value:function($t,jt){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==jt.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==$t.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==$t.margin){var Nt,Ut;this.accessibilityManager.setDetails({offset:{left:(Nt=this.props.margin.left)!==null&&Nt!==void 0?Nt:0,top:(Ut=this.props.margin.top)!==null&&Ut!==void 0?Ut:0}})}return null}},{key:"componentDidUpdate",value:function($t){isChildrenEqual([findChildByType($t.children,Tooltip)],[findChildByType(this.props.children,Tooltip)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var $t=findChildByType(this.props.children,Tooltip);if($t&&typeof $t.props.shared=="boolean"){var jt=$t.props.shared?"axis":"item";return at.indexOf(jt)>=0?jt:ut}return ut}},{key:"getMouseInfo",value:function($t){if(!this.container)return null;var jt=this.container,Nt=jt.getBoundingClientRect(),Ut=getOffset$1(Nt),Ht={chartX:Math.round($t.pageX-Ut.left),chartY:Math.round($t.pageY-Ut.top)},Kt=Nt.width/jt.offsetWidth||1,tr=this.inRange(Ht.chartX,Ht.chartY,Kt);if(!tr)return null;var mr=this.state,vr=mr.xAxisMap,wr=mr.yAxisMap,yr=this.getTooltipEventType();if(yr!=="axis"&&vr&&wr){var Or=getAnyElementOfObject(vr).scale,Nr=getAnyElementOfObject(wr).scale,Lr=Or&&Or.invert?Or.invert(Ht.chartX):null,ar=Nr&&Nr.invert?Nr.invert(Ht.chartY):null;return _objectSpread(_objectSpread({},Ht),{},{xValue:Lr,yValue:ar})}var hr=getTooltipData(this.state,this.props.data,this.props.layout,tr);return hr?_objectSpread(_objectSpread({},Ht),hr):null}},{key:"inRange",value:function($t,jt){var Nt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,Ut=this.props.layout,Ht=$t/Nt,Kt=jt/Nt;if(Ut==="horizontal"||Ut==="vertical"){var tr=this.state.offset,mr=Ht>=tr.left&&Ht<=tr.left+tr.width&&Kt>=tr.top&&Kt<=tr.top+tr.height;return mr?{x:Ht,y:Kt}:null}var vr=this.state,wr=vr.angleAxisMap,yr=vr.radiusAxisMap;if(wr&&yr){var Or=getAnyElementOfObject(wr);return inRangeOfSector({x:Ht,y:Kt},Or)}return null}},{key:"parseEventsOfWrapper",value:function(){var $t=this.props.children,jt=this.getTooltipEventType(),Nt=findChildByType($t,Tooltip),Ut={};Nt&&jt==="axis"&&(Nt.props.trigger==="click"?Ut={onClick:this.handleClick}:Ut={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var Ht=adaptEventHandlers(this.props,this.handleOuterEvent);return _objectSpread(_objectSpread({},Ht),Ut)}},{key:"addListener",value:function(){eventCenter.on(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){eventCenter.removeListener(SYNC_EVENT,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function($t,jt,Nt){for(var Ut=this.state.formattedGraphicalItems,Ht=0,Kt=Ut.length;Ht<Kt;Ht++){var tr=Ut[Ht];if(tr.item===$t||tr.props.key===$t.key||jt===getDisplayName(tr.item.type)&&Nt===tr.childIndex)return tr}return null}},{key:"renderClipPath",value:function(){var $t=this.clipPathId,jt=this.state.offset,Nt=jt.left,Ut=jt.top,Ht=jt.height,Kt=jt.width;return React$1.createElement("defs",null,React$1.createElement("clipPath",{id:$t},React$1.createElement("rect",{x:Nt,y:Ut,height:Ht,width:Kt})))}},{key:"getXScales",value:function(){var $t=this.state.xAxisMap;return $t?Object.entries($t).reduce(function(jt,Nt){var Ut=_slicedToArray$1(Nt,2),Ht=Ut[0],Kt=Ut[1];return _objectSpread(_objectSpread({},jt),{},_defineProperty$1({},Ht,Kt.scale))},{}):null}},{key:"getYScales",value:function(){var $t=this.state.yAxisMap;return $t?Object.entries($t).reduce(function(jt,Nt){var Ut=_slicedToArray$1(Nt,2),Ht=Ut[0],Kt=Ut[1];return _objectSpread(_objectSpread({},jt),{},_defineProperty$1({},Ht,Kt.scale))},{}):null}},{key:"getXScaleByAxisId",value:function($t){var jt;return(jt=this.state.xAxisMap)===null||jt===void 0||(jt=jt[$t])===null||jt===void 0?void 0:jt.scale}},{key:"getYScaleByAxisId",value:function($t){var jt;return(jt=this.state.yAxisMap)===null||jt===void 0||(jt=jt[$t])===null||jt===void 0?void 0:jt.scale}},{key:"getItemByXY",value:function($t){var jt=this.state,Nt=jt.formattedGraphicalItems,Ut=jt.activeItem;if(Nt&&Nt.length)for(var Ht=0,Kt=Nt.length;Ht<Kt;Ht++){var tr=Nt[Ht],mr=tr.props,vr=tr.item,wr=getDisplayName(vr.type);if(wr==="Bar"){var yr=(mr.data||[]).find(function(ar){return isInRectangle($t,ar)});if(yr)return{graphicalItem:tr,payload:yr}}else if(wr==="RadialBar"){var Or=(mr.data||[]).find(function(ar){return inRangeOfSector($t,ar)});if(Or)return{graphicalItem:tr,payload:Or}}else if(isFunnel(tr,Ut)||isPie(tr,Ut)||isScatter(tr,Ut)){var Nr=getActiveShapeIndexForTooltip({graphicalItem:tr,activeTooltipItem:Ut,itemData:vr.props.data}),Lr=vr.props.activeIndex===void 0?Nr:vr.props.activeIndex;return{graphicalItem:_objectSpread(_objectSpread({},tr),{},{childIndex:Lr}),payload:isScatter(tr,Ut)?vr.props.data[Nr]:tr.props.data[Nr]}}}return null}},{key:"render",value:function(){var $t=this;if(!validateWidthHeight(this))return null;var jt=this.props,Nt=jt.children,Ut=jt.className,Ht=jt.width,Kt=jt.height,tr=jt.style,mr=jt.compact,vr=jt.title,wr=jt.desc,yr=_objectWithoutProperties$1(jt,_excluded2),Or=filterProps(yr,!1);if(mr)return React$1.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React$1.createElement(Surface,_extends$1({},Or,{width:Ht,height:Kt,title:vr,desc:wr}),this.renderClipPath(),renderByOrder(Nt,this.renderMap)));if(this.props.accessibilityLayer){var Nr,Lr;Or.tabIndex=(Nr=this.props.tabIndex)!==null&&Nr!==void 0?Nr:0,Or.role=(Lr=this.props.role)!==null&&Lr!==void 0?Lr:"application",Or.onKeyDown=function(hr){$t.accessibilityManager.keyboardEvent(hr)},Or.onFocus=function(){$t.accessibilityManager.focus()}}var ar=this.parseEventsOfWrapper();return React$1.createElement(ChartLayoutContextProvider,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},React$1.createElement("div",_extends$1({className:clsx$1("recharts-wrapper",Ut),style:_objectSpread({position:"relative",cursor:"default",width:Ht,height:Kt},tr)},ar,{ref:function(Qt){$t.container=Qt}}),React$1.createElement(Surface,_extends$1({},Or,{width:Ht,height:Kt,title:vr,desc:wr,style:FULL_WIDTH_AND_HEIGHT}),this.renderClipPath(),renderByOrder(Nt,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}]),Dt}(reactExports.Component),_defineProperty$1(tt,"displayName",rt),_defineProperty$1(tt,"defaultProps",_objectSpread({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},St)),_defineProperty$1(tt,"getDerivedStateFromProps",function(It,Dt){var Mt=It.dataKey,$t=It.data,jt=It.children,Nt=It.width,Ut=It.height,Ht=It.layout,Kt=It.stackOffset,tr=It.margin,mr=Dt.dataStartIndex,vr=Dt.dataEndIndex;if(Dt.updateId===void 0){var wr=createDefaultState(It);return _objectSpread(_objectSpread(_objectSpread({},wr),{},{updateId:0},Rt(_objectSpread(_objectSpread({props:It},wr),{},{updateId:0}),Dt)),{},{prevDataKey:Mt,prevData:$t,prevWidth:Nt,prevHeight:Ut,prevLayout:Ht,prevStackOffset:Kt,prevMargin:tr,prevChildren:jt})}if(Mt!==Dt.prevDataKey||$t!==Dt.prevData||Nt!==Dt.prevWidth||Ut!==Dt.prevHeight||Ht!==Dt.prevLayout||Kt!==Dt.prevStackOffset||!shallowEqual(tr,Dt.prevMargin)){var yr=createDefaultState(It),Or={chartX:Dt.chartX,chartY:Dt.chartY,isTooltipActive:Dt.isTooltipActive},Nr=_objectSpread(_objectSpread({},getTooltipData(Dt,$t,Ht)),{},{updateId:Dt.updateId+1}),Lr=_objectSpread(_objectSpread(_objectSpread({},yr),Or),Nr);return _objectSpread(_objectSpread(_objectSpread({},Lr),Rt(_objectSpread({props:It},Lr),Dt)),{},{prevDataKey:Mt,prevData:$t,prevWidth:Nt,prevHeight:Ut,prevLayout:Ht,prevStackOffset:Kt,prevMargin:tr,prevChildren:jt})}if(!isChildrenEqual(jt,Dt.prevChildren)){var ar,hr,Qt,ir,Mr=findChildByType(jt,Brush),Cr=Mr&&(ar=(hr=Mr.props)===null||hr===void 0?void 0:hr.startIndex)!==null&&ar!==void 0?ar:mr,rn=Mr&&(Qt=(ir=Mr.props)===null||ir===void 0?void 0:ir.endIndex)!==null&&Qt!==void 0?Qt:vr,fn=Cr!==mr||rn!==vr,Dn=!isNil$1($t),Yn=Dn&&!fn?Dt.updateId:Dt.updateId+1;return _objectSpread(_objectSpread({updateId:Yn},Rt(_objectSpread(_objectSpread({props:It},Dt),{},{updateId:Yn,dataStartIndex:Cr,dataEndIndex:rn}),Dt)),{},{prevChildren:jt,dataStartIndex:Cr,dataEndIndex:rn})}return null}),_defineProperty$1(tt,"renderActiveDot",function(It,Dt){var Mt;return reactExports.isValidElement(It)?Mt=reactExports.cloneElement(It,Dt):isFunction$4(It)?Mt=It(Dt):Mt=React$1.createElement(Dot,Dt),React$1.createElement(Layer$2,{className:"recharts-active-dot",key:Dt.key},Mt)}),tt},LineChart=generateCategoricalChart({chartName:"LineChart",GraphicalChild:Line,axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap}),BarChart=generateCategoricalChart({chartName:"BarChart",GraphicalChild:Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap}),PieChart=generateCategoricalChart({chartName:"PieChart",GraphicalChild:Pie,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:PolarAngleAxis},{axisType:"radiusAxis",AxisComp:PolarRadiusAxis}],formatAxisMap:formatAxisMap$1,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),AreaChart=generateCategoricalChart({chartName:"AreaChart",GraphicalChild:Area,axisComponents:[{axisType:"xAxis",AxisComp:XAxis},{axisType:"yAxis",AxisComp:YAxis}],formatAxisMap});const getIntroOfMonth=_e=>`In ${_e}, the distance traveled was recorded.`,CustomTooltip$2=({active:_e,payload:et,label:tt})=>_e&&et&&et.length?jsxRuntimeExports.jsxs("div",{className:"custom-tooltip bg-white border p-2 rounded shadow-lg",children:[jsxRuntimeExports.jsx("p",{className:"label",children:`${tt}: ${et[0].value} km`}),jsxRuntimeExports.jsx("p",{className:"intro",children:getIntroOfMonth(tt)}),jsxRuntimeExports.jsx("p",{className:"desc",children:"Distance traveled in kilometers."})]}):null,Miles=()=>{const[_e,et]=reactExports.useState([]),tt=async()=>{var it;const rt=await getTruckMiles();rt.success?et((it=rt.result)==null?void 0:it.data):_t.error("Error in fetch data trucks miles!")};return reactExports.useEffect(()=>{tt()},[]),jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-[95%]",children:[" ",jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:_e,margin:{top:25,right:30,left:20,bottom:-2},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip$2,{})}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"km",barSize:20,fill:"#FF8042"})]})})]})})},CLASS_PART_SEPARATOR="-";function createClassGroupUtils(_e){const et=createClassMap(_e),{conflictingClassGroups:tt,conflictingClassGroupModifiers:rt}=_e;function it(ut){const ht=ut.split(CLASS_PART_SEPARATOR);return ht[0]===""&&ht.length!==1&&ht.shift(),getGroupRecursive(ht,et)||getGroupIdForArbitraryProperty(ut)}function st(ut,ht){const at=tt[ut]||[];return ht&&rt[ut]?[...at,...rt[ut]]:at}return{getClassGroupId:it,getConflictingClassGroupIds:st}}function getGroupRecursive(_e,et){var ut;if(_e.length===0)return et.classGroupId;const tt=_e[0],rt=et.nextPart.get(tt),it=rt?getGroupRecursive(_e.slice(1),rt):void 0;if(it)return it;if(et.validators.length===0)return;const st=_e.join(CLASS_PART_SEPARATOR);return(ut=et.validators.find(({validator:ht})=>ht(st)))==null?void 0:ut.classGroupId}const arbitraryPropertyRegex=/^\[(.+)\]$/;function getGroupIdForArbitraryProperty(_e){if(arbitraryPropertyRegex.test(_e)){const et=arbitraryPropertyRegex.exec(_e)[1],tt=et==null?void 0:et.substring(0,et.indexOf(":"));if(tt)return"arbitrary.."+tt}}function createClassMap(_e){const{theme:et,prefix:tt}=_e,rt={nextPart:new Map,validators:[]};return getPrefixedClassGroupEntries(Object.entries(_e.classGroups),tt).forEach(([st,ut])=>{processClassesRecursively(ut,rt,st,et)}),rt}function processClassesRecursively(_e,et,tt,rt){_e.forEach(it=>{if(typeof it=="string"){const st=it===""?et:getPart(et,it);st.classGroupId=tt;return}if(typeof it=="function"){if(isThemeGetter(it)){processClassesRecursively(it(rt),et,tt,rt);return}et.validators.push({validator:it,classGroupId:tt});return}Object.entries(it).forEach(([st,ut])=>{processClassesRecursively(ut,getPart(et,st),tt,rt)})})}function getPart(_e,et){let tt=_e;return et.split(CLASS_PART_SEPARATOR).forEach(rt=>{tt.nextPart.has(rt)||tt.nextPart.set(rt,{nextPart:new Map,validators:[]}),tt=tt.nextPart.get(rt)}),tt}function isThemeGetter(_e){return _e.isThemeGetter}function getPrefixedClassGroupEntries(_e,et){return et?_e.map(([tt,rt])=>{const it=rt.map(st=>typeof st=="string"?et+st:typeof st=="object"?Object.fromEntries(Object.entries(st).map(([ut,ht])=>[et+ut,ht])):st);return[tt,it]}):_e}function createLruCache(_e){if(_e<1)return{get:()=>{},set:()=>{}};let et=0,tt=new Map,rt=new Map;function it(st,ut){tt.set(st,ut),et++,et>_e&&(et=0,rt=tt,tt=new Map)}return{get(st){let ut=tt.get(st);if(ut!==void 0)return ut;if((ut=rt.get(st))!==void 0)return it(st,ut),ut},set(st,ut){tt.has(st)?tt.set(st,ut):it(st,ut)}}}const IMPORTANT_MODIFIER="!";function createParseClassName(_e){const{separator:et,experimentalParseClassName:tt}=_e,rt=et.length===1,it=et[0],st=et.length;function ut(ht){const at=[];let gt=0,bt=0,wt;for(let Dt=0;Dt<ht.length;Dt++){let Mt=ht[Dt];if(gt===0){if(Mt===it&&(rt||ht.slice(Dt,Dt+st)===et)){at.push(ht.slice(bt,Dt)),bt=Dt+st;continue}if(Mt==="/"){wt=Dt;continue}}Mt==="["?gt++:Mt==="]"&&gt--}const St=at.length===0?ht:ht.substring(bt),kt=St.startsWith(IMPORTANT_MODIFIER),Rt=kt?St.substring(1):St,It=wt&&wt>bt?wt-bt:void 0;return{modifiers:at,hasImportantModifier:kt,baseClassName:Rt,maybePostfixModifierPosition:It}}return tt?function(at){return tt({className:at,parseClassName:ut})}:ut}function sortModifiers(_e){if(_e.length<=1)return _e;const et=[];let tt=[];return _e.forEach(rt=>{rt[0]==="["?(et.push(...tt.sort(),rt),tt=[]):tt.push(rt)}),et.push(...tt.sort()),et}function createConfigUtils(_e){return{cache:createLruCache(_e.cacheSize),parseClassName:createParseClassName(_e),...createClassGroupUtils(_e)}}const SPLIT_CLASSES_REGEX=/\s+/;function mergeClassList(_e,et){const{parseClassName:tt,getClassGroupId:rt,getConflictingClassGroupIds:it}=et,st=new Set;return _e.trim().split(SPLIT_CLASSES_REGEX).map(ut=>{const{modifiers:ht,hasImportantModifier:at,baseClassName:gt,maybePostfixModifierPosition:bt}=tt(ut);let wt=!!bt,St=rt(wt?gt.substring(0,bt):gt);if(!St){if(!wt)return{isTailwindClass:!1,originalClassName:ut};if(St=rt(gt),!St)return{isTailwindClass:!1,originalClassName:ut};wt=!1}const kt=sortModifiers(ht).join(":");return{isTailwindClass:!0,modifierId:at?kt+IMPORTANT_MODIFIER:kt,classGroupId:St,originalClassName:ut,hasPostfixModifier:wt}}).reverse().filter(ut=>{if(!ut.isTailwindClass)return!0;const{modifierId:ht,classGroupId:at,hasPostfixModifier:gt}=ut,bt=ht+at;return st.has(bt)?!1:(st.add(bt),it(at,gt).forEach(wt=>st.add(ht+wt)),!0)}).reverse().map(ut=>ut.originalClassName).join(" ")}function twJoin(){let _e=0,et,tt,rt="";for(;_e<arguments.length;)(et=arguments[_e++])&&(tt=toValue(et))&&(rt&&(rt+=" "),rt+=tt);return rt}function toValue(_e){if(typeof _e=="string")return _e;let et,tt="";for(let rt=0;rt<_e.length;rt++)_e[rt]&&(et=toValue(_e[rt]))&&(tt&&(tt+=" "),tt+=et);return tt}function createTailwindMerge(_e,...et){let tt,rt,it,st=ut;function ut(at){const gt=et.reduce((bt,wt)=>wt(bt),_e());return tt=createConfigUtils(gt),rt=tt.cache.get,it=tt.cache.set,st=ht,ht(at)}function ht(at){const gt=rt(at);if(gt)return gt;const bt=mergeClassList(at,tt);return it(at,bt),bt}return function(){return st(twJoin.apply(null,arguments))}}function fromTheme(_e){const et=tt=>tt[_e]||[];return et.isThemeGetter=!0,et}const arbitraryValueRegex=/^\[(?:([a-z-]+):)?(.+)\]$/i,fractionRegex=/^\d+\/\d+$/,stringLengths=new Set(["px","full","screen"]),tshirtUnitRegex=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,lengthUnitRegex=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,colorFunctionRegex=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,shadowRegex=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,imageRegex=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/;function isLength(_e){return isNumber$1(_e)||stringLengths.has(_e)||fractionRegex.test(_e)}function isArbitraryLength(_e){return getIsArbitraryValue(_e,"length",isLengthOnly)}function isNumber$1(_e){return!!_e&&!Number.isNaN(Number(_e))}function isArbitraryNumber(_e){return getIsArbitraryValue(_e,"number",isNumber$1)}function isInteger(_e){return!!_e&&Number.isInteger(Number(_e))}function isPercent(_e){return _e.endsWith("%")&&isNumber$1(_e.slice(0,-1))}function isArbitraryValue(_e){return arbitraryValueRegex.test(_e)}function isTshirtSize(_e){return tshirtUnitRegex.test(_e)}const sizeLabels=new Set(["length","size","percentage"]);function isArbitrarySize(_e){return getIsArbitraryValue(_e,sizeLabels,isNever)}function isArbitraryPosition(_e){return getIsArbitraryValue(_e,"position",isNever)}const imageLabels=new Set(["image","url"]);function isArbitraryImage(_e){return getIsArbitraryValue(_e,imageLabels,isImage)}function isArbitraryShadow(_e){return getIsArbitraryValue(_e,"",isShadow)}function isAny(){return!0}function getIsArbitraryValue(_e,et,tt){const rt=arbitraryValueRegex.exec(_e);return rt?rt[1]?typeof et=="string"?rt[1]===et:et.has(rt[1]):tt(rt[2]):!1}function isLengthOnly(_e){return lengthUnitRegex.test(_e)&&!colorFunctionRegex.test(_e)}function isNever(){return!1}function isShadow(_e){return shadowRegex.test(_e)}function isImage(_e){return imageRegex.test(_e)}function getDefaultConfig(){const _e=fromTheme("colors"),et=fromTheme("spacing"),tt=fromTheme("blur"),rt=fromTheme("brightness"),it=fromTheme("borderColor"),st=fromTheme("borderRadius"),ut=fromTheme("borderSpacing"),ht=fromTheme("borderWidth"),at=fromTheme("contrast"),gt=fromTheme("grayscale"),bt=fromTheme("hueRotate"),wt=fromTheme("invert"),St=fromTheme("gap"),kt=fromTheme("gradientColorStops"),Rt=fromTheme("gradientColorStopPositions"),It=fromTheme("inset"),Dt=fromTheme("margin"),Mt=fromTheme("opacity"),$t=fromTheme("padding"),jt=fromTheme("saturate"),Nt=fromTheme("scale"),Ut=fromTheme("sepia"),Ht=fromTheme("skew"),Kt=fromTheme("space"),tr=fromTheme("translate"),mr=()=>["auto","contain","none"],vr=()=>["auto","hidden","clip","visible","scroll"],wr=()=>["auto",isArbitraryValue,et],yr=()=>[isArbitraryValue,et],Or=()=>["",isLength,isArbitraryLength],Nr=()=>["auto",isNumber$1,isArbitraryValue],Lr=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ar=()=>["solid","dashed","dotted","double","none"],hr=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Qt=()=>["start","end","center","between","around","evenly","stretch"],ir=()=>["","0",isArbitraryValue],Mr=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Cr=()=>[isNumber$1,isArbitraryNumber],rn=()=>[isNumber$1,isArbitraryValue];return{cacheSize:500,separator:":",theme:{colors:[isAny],spacing:[isLength,isArbitraryLength],blur:["none","",isTshirtSize,isArbitraryValue],brightness:Cr(),borderColor:[_e],borderRadius:["none","","full",isTshirtSize,isArbitraryValue],borderSpacing:yr(),borderWidth:Or(),contrast:Cr(),grayscale:ir(),hueRotate:rn(),invert:ir(),gap:yr(),gradientColorStops:[_e],gradientColorStopPositions:[isPercent,isArbitraryLength],inset:wr(),margin:wr(),opacity:Cr(),padding:yr(),saturate:Cr(),scale:Cr(),sepia:ir(),skew:rn(),space:yr(),translate:yr()},classGroups:{aspect:[{aspect:["auto","square","video",isArbitraryValue]}],container:["container"],columns:[{columns:[isTshirtSize]}],"break-after":[{"break-after":Mr()}],"break-before":[{"break-before":Mr()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Lr(),isArbitraryValue]}],overflow:[{overflow:vr()}],"overflow-x":[{"overflow-x":vr()}],"overflow-y":[{"overflow-y":vr()}],overscroll:[{overscroll:mr()}],"overscroll-x":[{"overscroll-x":mr()}],"overscroll-y":[{"overscroll-y":mr()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[It]}],"inset-x":[{"inset-x":[It]}],"inset-y":[{"inset-y":[It]}],start:[{start:[It]}],end:[{end:[It]}],top:[{top:[It]}],right:[{right:[It]}],bottom:[{bottom:[It]}],left:[{left:[It]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",isInteger,isArbitraryValue]}],basis:[{basis:wr()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",isArbitraryValue]}],grow:[{grow:ir()}],shrink:[{shrink:ir()}],order:[{order:["first","last","none",isInteger,isArbitraryValue]}],"grid-cols":[{"grid-cols":[isAny]}],"col-start-end":[{col:["auto",{span:["full",isInteger,isArbitraryValue]},isArbitraryValue]}],"col-start":[{"col-start":Nr()}],"col-end":[{"col-end":Nr()}],"grid-rows":[{"grid-rows":[isAny]}],"row-start-end":[{row:["auto",{span:[isInteger,isArbitraryValue]},isArbitraryValue]}],"row-start":[{"row-start":Nr()}],"row-end":[{"row-end":Nr()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",isArbitraryValue]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",isArbitraryValue]}],gap:[{gap:[St]}],"gap-x":[{"gap-x":[St]}],"gap-y":[{"gap-y":[St]}],"justify-content":[{justify:["normal",...Qt()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Qt(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Qt(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[$t]}],px:[{px:[$t]}],py:[{py:[$t]}],ps:[{ps:[$t]}],pe:[{pe:[$t]}],pt:[{pt:[$t]}],pr:[{pr:[$t]}],pb:[{pb:[$t]}],pl:[{pl:[$t]}],m:[{m:[Dt]}],mx:[{mx:[Dt]}],my:[{my:[Dt]}],ms:[{ms:[Dt]}],me:[{me:[Dt]}],mt:[{mt:[Dt]}],mr:[{mr:[Dt]}],mb:[{mb:[Dt]}],ml:[{ml:[Dt]}],"space-x":[{"space-x":[Kt]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Kt]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",isArbitraryValue,et]}],"min-w":[{"min-w":[isArbitraryValue,et,"min","max","fit"]}],"max-w":[{"max-w":[isArbitraryValue,et,"none","full","min","max","fit","prose",{screen:[isTshirtSize]},isTshirtSize]}],h:[{h:[isArbitraryValue,et,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[isArbitraryValue,et,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[isArbitraryValue,et,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[isArbitraryValue,et,"auto","min","max","fit"]}],"font-size":[{text:["base",isTshirtSize,isArbitraryLength]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",isArbitraryNumber]}],"font-family":[{font:[isAny]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",isArbitraryValue]}],"line-clamp":[{"line-clamp":["none",isNumber$1,isArbitraryNumber]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",isLength,isArbitraryValue]}],"list-image":[{"list-image":["none",isArbitraryValue]}],"list-style-type":[{list:["none","disc","decimal",isArbitraryValue]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[_e]}],"placeholder-opacity":[{"placeholder-opacity":[Mt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[_e]}],"text-opacity":[{"text-opacity":[Mt]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ar(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",isLength,isArbitraryLength]}],"underline-offset":[{"underline-offset":["auto",isLength,isArbitraryValue]}],"text-decoration-color":[{decoration:[_e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:yr()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",isArbitraryValue]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",isArbitraryValue]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Mt]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Lr(),isArbitraryPosition]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",isArbitrarySize]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},isArbitraryImage]}],"bg-color":[{bg:[_e]}],"gradient-from-pos":[{from:[Rt]}],"gradient-via-pos":[{via:[Rt]}],"gradient-to-pos":[{to:[Rt]}],"gradient-from":[{from:[kt]}],"gradient-via":[{via:[kt]}],"gradient-to":[{to:[kt]}],rounded:[{rounded:[st]}],"rounded-s":[{"rounded-s":[st]}],"rounded-e":[{"rounded-e":[st]}],"rounded-t":[{"rounded-t":[st]}],"rounded-r":[{"rounded-r":[st]}],"rounded-b":[{"rounded-b":[st]}],"rounded-l":[{"rounded-l":[st]}],"rounded-ss":[{"rounded-ss":[st]}],"rounded-se":[{"rounded-se":[st]}],"rounded-ee":[{"rounded-ee":[st]}],"rounded-es":[{"rounded-es":[st]}],"rounded-tl":[{"rounded-tl":[st]}],"rounded-tr":[{"rounded-tr":[st]}],"rounded-br":[{"rounded-br":[st]}],"rounded-bl":[{"rounded-bl":[st]}],"border-w":[{border:[ht]}],"border-w-x":[{"border-x":[ht]}],"border-w-y":[{"border-y":[ht]}],"border-w-s":[{"border-s":[ht]}],"border-w-e":[{"border-e":[ht]}],"border-w-t":[{"border-t":[ht]}],"border-w-r":[{"border-r":[ht]}],"border-w-b":[{"border-b":[ht]}],"border-w-l":[{"border-l":[ht]}],"border-opacity":[{"border-opacity":[Mt]}],"border-style":[{border:[...ar(),"hidden"]}],"divide-x":[{"divide-x":[ht]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[ht]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Mt]}],"divide-style":[{divide:ar()}],"border-color":[{border:[it]}],"border-color-x":[{"border-x":[it]}],"border-color-y":[{"border-y":[it]}],"border-color-t":[{"border-t":[it]}],"border-color-r":[{"border-r":[it]}],"border-color-b":[{"border-b":[it]}],"border-color-l":[{"border-l":[it]}],"divide-color":[{divide:[it]}],"outline-style":[{outline:["",...ar()]}],"outline-offset":[{"outline-offset":[isLength,isArbitraryValue]}],"outline-w":[{outline:[isLength,isArbitraryLength]}],"outline-color":[{outline:[_e]}],"ring-w":[{ring:Or()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[_e]}],"ring-opacity":[{"ring-opacity":[Mt]}],"ring-offset-w":[{"ring-offset":[isLength,isArbitraryLength]}],"ring-offset-color":[{"ring-offset":[_e]}],shadow:[{shadow:["","inner","none",isTshirtSize,isArbitraryShadow]}],"shadow-color":[{shadow:[isAny]}],opacity:[{opacity:[Mt]}],"mix-blend":[{"mix-blend":[...hr(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":hr()}],filter:[{filter:["","none"]}],blur:[{blur:[tt]}],brightness:[{brightness:[rt]}],contrast:[{contrast:[at]}],"drop-shadow":[{"drop-shadow":["","none",isTshirtSize,isArbitraryValue]}],grayscale:[{grayscale:[gt]}],"hue-rotate":[{"hue-rotate":[bt]}],invert:[{invert:[wt]}],saturate:[{saturate:[jt]}],sepia:[{sepia:[Ut]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[tt]}],"backdrop-brightness":[{"backdrop-brightness":[rt]}],"backdrop-contrast":[{"backdrop-contrast":[at]}],"backdrop-grayscale":[{"backdrop-grayscale":[gt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[bt]}],"backdrop-invert":[{"backdrop-invert":[wt]}],"backdrop-opacity":[{"backdrop-opacity":[Mt]}],"backdrop-saturate":[{"backdrop-saturate":[jt]}],"backdrop-sepia":[{"backdrop-sepia":[Ut]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[ut]}],"border-spacing-x":[{"border-spacing-x":[ut]}],"border-spacing-y":[{"border-spacing-y":[ut]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",isArbitraryValue]}],duration:[{duration:rn()}],ease:[{ease:["linear","in","out","in-out",isArbitraryValue]}],delay:[{delay:rn()}],animate:[{animate:["none","spin","ping","pulse","bounce",isArbitraryValue]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[Nt]}],"scale-x":[{"scale-x":[Nt]}],"scale-y":[{"scale-y":[Nt]}],rotate:[{rotate:[isInteger,isArbitraryValue]}],"translate-x":[{"translate-x":[tr]}],"translate-y":[{"translate-y":[tr]}],"skew-x":[{"skew-x":[Ht]}],"skew-y":[{"skew-y":[Ht]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",isArbitraryValue]}],accent:[{accent:["auto",_e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",isArbitraryValue]}],"caret-color":[{caret:[_e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":yr()}],"scroll-mx":[{"scroll-mx":yr()}],"scroll-my":[{"scroll-my":yr()}],"scroll-ms":[{"scroll-ms":yr()}],"scroll-me":[{"scroll-me":yr()}],"scroll-mt":[{"scroll-mt":yr()}],"scroll-mr":[{"scroll-mr":yr()}],"scroll-mb":[{"scroll-mb":yr()}],"scroll-ml":[{"scroll-ml":yr()}],"scroll-p":[{"scroll-p":yr()}],"scroll-px":[{"scroll-px":yr()}],"scroll-py":[{"scroll-py":yr()}],"scroll-ps":[{"scroll-ps":yr()}],"scroll-pe":[{"scroll-pe":yr()}],"scroll-pt":[{"scroll-pt":yr()}],"scroll-pr":[{"scroll-pr":yr()}],"scroll-pb":[{"scroll-pb":yr()}],"scroll-pl":[{"scroll-pl":yr()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",isArbitraryValue]}],fill:[{fill:[_e,"none"]}],"stroke-w":[{stroke:[isLength,isArbitraryLength,isArbitraryNumber]}],stroke:[{stroke:[_e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}const twMerge=createTailwindMerge(getDefaultConfig);function cn(..._e){return twMerge(clsx$1(_e))}const Table$1=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("div",{className:"relative w-full overflow-auto",children:jsxRuntimeExports.jsx("table",{ref:tt,className:cn("w-full caption-bottom text-sm",_e),...et})}));Table$1.displayName="Table";const TableHeader=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("thead",{ref:tt,className:cn("[&_tr]:border-b",_e),...et}));TableHeader.displayName="TableHeader";const TableBody=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("tbody",{ref:tt,className:cn("[&_tr:last-child]:border-0",_e),...et}));TableBody.displayName="TableBody";const TableFooter=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("tfoot",{ref:tt,className:cn("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",_e),...et}));TableFooter.displayName="TableFooter";const TableRow=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("tr",{ref:tt,className:cn("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",_e),...et}));TableRow.displayName="TableRow";const TableHead=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("th",{ref:tt,className:cn("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",_e),...et}));TableHead.displayName="TableHead";const TableCell=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("td",{ref:tt,className:cn("p-4 align-middle [&:has([role=checkbox])]:pr-0",_e),...et}));TableCell.displayName="TableCell";const TableCaption=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("caption",{ref:tt,className:cn("mt-4 text-sm text-muted-foreground",_e),...et}));TableCaption.displayName="TableCaption";const TableTruck=({trucks:_e})=>{const[et,tt]=reactExports.useState(""),rt=_e.filter(it=>it.truckName.toLowerCase().includes(et.toLowerCase())||it.plateCode.toLowerCase().includes(et.toLowerCase()));return jsxRuntimeExports.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports.jsxs("div",{className:"h-[95%]",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by truck name or plate code...",value:et,onChange:it=>tt(it.target.value),className:"p-2 border rounded w-full bg-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Table$1,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{children:"Truck Id"}),jsxRuntimeExports.jsx(TableHead,{children:"Truck Name"}),jsxRuntimeExports.jsx(TableHead,{children:"Plate Code"}),jsxRuntimeExports.jsx(TableHead,{children:"Manufacturer"}),jsxRuntimeExports.jsx(TableHead,{children:"Model"}),jsxRuntimeExports.jsx(TableHead,{children:"FrameNumber"}),jsxRuntimeExports.jsx(TableHead,{children:"EngineNumber"}),jsxRuntimeExports.jsx(TableHead,{children:"Status"})]})}),jsxRuntimeExports.jsx(TableBody,{children:rt.length>0?rt.map(it=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:it.truckId}),jsxRuntimeExports.jsx(TableCell,{children:it.truckName}),jsxRuntimeExports.jsx(TableCell,{children:it.plateCode}),jsxRuntimeExports.jsx(TableCell,{children:it.manufacturer}),jsxRuntimeExports.jsx(TableCell,{children:it.vehicleModel}),jsxRuntimeExports.jsx(TableCell,{children:it.frameNumber}),jsxRuntimeExports.jsx(TableCell,{children:it.engineNumber}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("div",{className:`rounded-full flex justify-center text-white hover:bg-opacity-75 ${it.status==="Active"?"bg-green-400 hover:bg-green-600":"bg-red-400 hover:bg-red-600"}`,children:it.status})})]},it.truckId)):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:4,className:"text-center",children:"No trucks found"})})})]})})]})})},CustomTooltip$1=({active:_e,payload:et,label:tt})=>_e&&et&&et.length?jsxRuntimeExports.jsxs("div",{className:"custom-tooltip bg-white border p-2 rounded shadow-lg",children:[jsxRuntimeExports.jsx("p",{className:"label",children:`${tt}: ${et[0].value}`}),jsxRuntimeExports.jsx("p",{className:"intro",children:`In ${tt}, data recorded.`}),jsxRuntimeExports.jsx("p",{className:"desc",children:"Truck status overview."})]}):null,TruckStatus=()=>{const[_e,et]=reactExports.useState([]),tt=async()=>{var it;const rt=await getTruckStatusInYear();rt.success?et((it=rt.result)==null?void 0:it.data):_t.error("Error in fetching data truck status in year!")};return reactExports.useEffect(()=>{tt()},[]),jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsxs("div",{className:"w-full h-[95%]",children:[" ",jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(AreaChart,{data:_e,margin:{top:25,right:30,left:0,bottom:-2},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip$1,{})}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Area,{type:"monotone",dataKey:"count",stroke:"#FF8042",fill:"#FF8042"})]})})]})})};/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const toKebabCase=_e=>_e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mergeClasses=(..._e)=>_e.filter((et,tt,rt)=>!!et&&rt.indexOf(et)===tt).join(" ");/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Icon$1=reactExports.forwardRef(({color:_e="currentColor",size:et=24,strokeWidth:tt=2,absoluteStrokeWidth:rt,className:it="",children:st,iconNode:ut,...ht},at)=>reactExports.createElement("svg",{ref:at,...defaultAttributes,width:et,height:et,stroke:_e,strokeWidth:rt?Number(tt)*24/Number(et):tt,className:mergeClasses("lucide",it),...ht},[...ut.map(([gt,bt])=>reactExports.createElement(gt,bt)),...Array.isArray(st)?st:[st]]));/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const createLucideIcon=(_e,et)=>{const tt=reactExports.forwardRef(({className:rt,...it},st)=>reactExports.createElement(Icon$1,{ref:st,iconNode:et,className:mergeClasses(`lucide-${toKebabCase(_e)}`,rt),...it}));return tt.displayName=`${_e}`,tt};/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AlignJustify=createLucideIcon("AlignJustify",[["line",{x1:"3",x2:"21",y1:"6",y2:"6",key:"4m8b97"}],["line",{x1:"3",x2:"21",y1:"12",y2:"12",key:"10d38w"}],["line",{x1:"3",x2:"21",y1:"18",y2:"18",key:"kwyyxn"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowDown=createLucideIcon("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ArrowUp=createLucideIcon("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CalendarClock=createLucideIcon("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Calendar$1=createLucideIcon("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ellipsis=createLucideIcon("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FlagTriangleLeft=createLucideIcon("FlagTriangleLeft",[["path",{d:"M17 22V2L7 7l10 5",key:"1rmf0r"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FlagTriangleRight=createLucideIcon("FlagTriangleRight",[["path",{d:"M7 22V2l10 5-10 5",key:"17n18y"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FolderKanban=createLucideIcon("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GlobeLock=createLucideIcon("GlobeLock",[["path",{d:"M15.686 15A14.5 14.5 0 0 1 12 22a14.5 14.5 0 0 1 0-20 10 10 0 1 0 9.542 13",key:"qkt0x6"}],["path",{d:"M2 12h8.5",key:"ovaggd"}],["path",{d:"M20 6V4a2 2 0 1 0-4 0v2",key:"1of5e8"}],["rect",{width:"8",height:"5",x:"14",y:"6",rx:"1",key:"1fmf51"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LogOut=createLucideIcon("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MapPin=createLucideIcon("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Maximize2=createLucideIcon("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Minimize2=createLucideIcon("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MoveRight=createLucideIcon("MoveRight",[["path",{d:"M18 8L22 12L18 16",key:"1r0oui"}],["path",{d:"M2 12H22",key:"1m8cig"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SquareArrowUpRight=createLucideIcon("SquareArrowUpRight",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 8h8v8",key:"b65dnt"}],["path",{d:"m8 16 8-8",key:"13b9ih"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Star=createLucideIcon("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Store=createLucideIcon("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Truck=createLucideIcon("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UserPen=createLucideIcon("UserPen",[["path",{d:"M11.5 15H7a4 4 0 0 0-4 4v2",key:"15lzij"}],["path",{d:"M21.378 16.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"1817ys"}],["circle",{cx:"10",cy:"7",r:"4",key:"e45bow"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UserRound=createLucideIcon("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UsersRound=createLucideIcon("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.416.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function setRef(_e,et){typeof _e=="function"?_e(et):_e!=null&&(_e.current=et)}function composeRefs(..._e){return et=>_e.forEach(tt=>setRef(tt,et))}function useComposedRefs(..._e){return reactExports.useCallback(composeRefs(..._e),_e)}var Slot=reactExports.forwardRef((_e,et)=>{const{children:tt,...rt}=_e,it=reactExports.Children.toArray(tt),st=it.find(isSlottable);if(st){const ut=st.props.children,ht=it.map(at=>at===st?reactExports.Children.count(ut)>1?reactExports.Children.only(null):reactExports.isValidElement(ut)?ut.props.children:null:at);return jsxRuntimeExports.jsx(SlotClone,{...rt,ref:et,children:reactExports.isValidElement(ut)?reactExports.cloneElement(ut,void 0,ht):null})}return jsxRuntimeExports.jsx(SlotClone,{...rt,ref:et,children:tt})});Slot.displayName="Slot";var SlotClone=reactExports.forwardRef((_e,et)=>{const{children:tt,...rt}=_e;if(reactExports.isValidElement(tt)){const it=getElementRef$1(tt);return reactExports.cloneElement(tt,{...mergeProps(rt,tt.props),ref:et?composeRefs(et,it):it})}return reactExports.Children.count(tt)>1?reactExports.Children.only(null):null});SlotClone.displayName="SlotClone";var Slottable=({children:_e})=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:_e});function isSlottable(_e){return reactExports.isValidElement(_e)&&_e.type===Slottable}function mergeProps(_e,et){const tt={...et};for(const rt in et){const it=_e[rt],st=et[rt];/^on[A-Z]/.test(rt)?it&&st?tt[rt]=(...ht)=>{st(...ht),it(...ht)}:it&&(tt[rt]=it):rt==="style"?tt[rt]={...it,...st}:rt==="className"&&(tt[rt]=[it,st].filter(Boolean).join(" "))}return{..._e,...tt}}function getElementRef$1(_e){var rt,it;let et=(rt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:rt.get,tt=et&&"isReactWarning"in et&&et.isReactWarning;return tt?_e.ref:(et=(it=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:it.get,tt=et&&"isReactWarning"in et&&et.isReactWarning,tt?_e.props.ref:_e.props.ref||_e.ref)}function r$1(_e){var et,tt,rt="";if(typeof _e=="string"||typeof _e=="number")rt+=_e;else if(typeof _e=="object")if(Array.isArray(_e))for(et=0;et<_e.length;et++)_e[et]&&(tt=r$1(_e[et]))&&(rt&&(rt+=" "),rt+=tt);else for(et in _e)_e[et]&&(rt&&(rt+=" "),rt+=et);return rt}function clsx(){for(var _e,et,tt=0,rt="";tt<arguments.length;)(_e=arguments[tt++])&&(et=r$1(_e))&&(rt&&(rt+=" "),rt+=et);return rt}const falsyToString=_e=>typeof _e=="boolean"?"".concat(_e):_e===0?"0":_e,cx=clsx,cva=(_e,et)=>tt=>{var rt;if((et==null?void 0:et.variants)==null)return cx(_e,tt==null?void 0:tt.class,tt==null?void 0:tt.className);const{variants:it,defaultVariants:st}=et,ut=Object.keys(it).map(gt=>{const bt=tt==null?void 0:tt[gt],wt=st==null?void 0:st[gt];if(bt===null)return null;const St=falsyToString(bt)||falsyToString(wt);return it[gt][St]}),ht=tt&&Object.entries(tt).reduce((gt,bt)=>{let[wt,St]=bt;return St===void 0||(gt[wt]=St),gt},{}),at=et==null||(rt=et.compoundVariants)===null||rt===void 0?void 0:rt.reduce((gt,bt)=>{let{class:wt,className:St,...kt}=bt;return Object.entries(kt).every(Rt=>{let[It,Dt]=Rt;return Array.isArray(Dt)?Dt.includes({...st,...ht}[It]):{...st,...ht}[It]===Dt})?[...gt,wt,St]:gt},[]);return cx(_e,ut,at,tt==null?void 0:tt.class,tt==null?void 0:tt.className)},buttonVariants=cva("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Button$1=reactExports.forwardRef(({className:_e,variant:et,size:tt,asChild:rt=!1,...it},st)=>{const ut=rt?Slot:"button";return jsxRuntimeExports.jsx(ut,{className:cn(buttonVariants({variant:et,size:tt,className:_e})),ref:st,...it})});Button$1.displayName="Button";const Pagination=({className:_e,...et})=>jsxRuntimeExports.jsx("nav",{role:"navigation","aria-label":"pagination",className:cn("mx-auto flex w-full justify-center",_e),...et});Pagination.displayName="Pagination";const PaginationContent=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("ul",{ref:tt,className:cn("flex flex-row items-center gap-1",_e),...et}));PaginationContent.displayName="PaginationContent";const PaginationItem=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx("li",{ref:tt,className:cn("",_e),...et}));PaginationItem.displayName="PaginationItem";const PaginationEllipsis=({className:_e,...et})=>jsxRuntimeExports.jsxs("span",{"aria-hidden":!0,className:cn("flex h-9 w-9 items-center justify-center",_e),...et,children:[jsxRuntimeExports.jsx(Ellipsis,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"More pages"})]});PaginationEllipsis.displayName="PaginationEllipsis";const range=(_e,et)=>{const tt=et-_e+1;return Array.from({length:tt},(rt,it)=>it+_e)},usePagination=({currentPage:_e,totalPages:et,siblingCount:tt=1})=>reactExports.useMemo(()=>{if(tt+5>=et)return range(1,et);const st=Math.max(_e-tt,1),ut=Math.min(_e+tt,et),ht=st>2,at=ut<et-2,gt=1,bt=et;if(at&&!ht){const wt=3+2*tt;return[...range(1,wt),-1,et]}if(!at&&ht){const wt=3+2*tt,St=range(et-wt+1,et);return[gt,-1,...St]}if(ht&&at){const wt=range(st,ut);return[gt,-1,...wt,-1,bt]}},[_e,et,tt]),PaginationSeletor=({totalPages:_e,currentPage:et,setPage:tt})=>{const rt=usePagination({currentPage:et,totalPages:_e});let it=0;if(rt){if(et===0||(rt==null?void 0:rt.length)<2)return null;it=rt[(rt==null?void 0:rt.length)-1]}else return null;return jsxRuntimeExports.jsx(Pagination,{children:jsxRuntimeExports.jsxs(PaginationContent,{className:"mt-2",children:[jsxRuntimeExports.jsx("button",{className:cn("cursor-pointer bg-transparent",et===1&&"cursor-default"),onClick:()=>tt(et-1),disabled:et===1,children:jsxRuntimeExports.jsx(ChevronLeft,{})}),rt&&rt.map((st,ut)=>st===-1?jsxRuntimeExports.jsx(PaginationItem,{children:jsxRuntimeExports.jsx(PaginationEllipsis,{})},ut):jsxRuntimeExports.jsx(PaginationItem,{className:"flex",children:jsxRuntimeExports.jsx("div",{className:cn("flex h-10 w-10 cursor-pointer items-center justify-center rounded-full border border-slate-400 ",et===st&&" border-rose-100 bg-rose-500"),onClick:()=>tt(st),children:st})},ut)),jsxRuntimeExports.jsx("button",{className:cn("cursor-pointer bg-transparent",et===it&&"cursor-default"),onClick:()=>tt(et+1),disabled:et===it,children:jsxRuntimeExports.jsx(ChevronRight,{})})]})})},AdminTruckPage=()=>{const[_e,et]=reactExports.useState(1),[tt,rt]=reactExports.useState(0),[it,st]=reactExports.useState([]),[ut,ht]=reactExports.useState(!1),at=async()=>{var gt,bt,wt,St;ht(!0);try{const kt=await getAllTruck(_e);kt.success?(et((gt=kt.result)==null?void 0:gt.pagination.page),rt((bt=kt.result)==null?void 0:bt.pagination.totalPage),st((wt=kt.result)==null?void 0:wt.data)):console.error((St=kt.result)==null?void 0:St.message)}catch(kt){console.error("Error fetching trucks:",kt)}finally{ht(!1)}};return reactExports.useEffect(()=>{at()},[_e]),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-3 p-4 w-full h-full overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 w-full h-full gap-5 rounded",children:[jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 w-full h-full rounded",children:jsxRuntimeExports.jsx(Miles,{})}),jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 w-full h-full rounded",children:jsxRuntimeExports.jsx(TruckStatus,{})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white h-full w-full col-span-1 rounded",children:jsxRuntimeExports.jsx(TableTruck,{trucks:it})}),jsxRuntimeExports.jsx("div",{className:"col-span-1",children:jsxRuntimeExports.jsx(PaginationSeletor,{currentPage:_e,totalPages:tt,setPage:et})}),ut&&jsxRuntimeExports.jsx(Loading,{})]})},COLORS$1=["#FFBB28","#00C49F","#FF6666"],BuyersProfile=()=>{const[_e,et]=reactExports.useState(80),[tt,rt]=reactExports.useState(100),[it,st]=reactExports.useState([]),[ut,ht]=reactExports.useState(!1),at=async()=>{var gt,bt;try{ht(!0);const wt=await getUserAge();if(wt!=null&&wt.success){const St=Object.entries((gt=wt.result)==null?void 0:gt.data).map(([kt,Rt])=>({name:kt,value:Rt}));st(St)}else _t.error(((bt=wt==null?void 0:wt.result)==null?void 0:bt.message)||"Failed to fetch data")}catch{_t.error("An error occurred while fetching data.")}finally{ht(!1)}};return reactExports.useEffect(()=>{at();const gt=()=>{const bt=window.innerWidth;et(bt<1e3?60:80),rt(bt<1e3?80:100)};return gt(),window.addEventListener("resize",gt),()=>window.removeEventListener("resize",gt)},[]),ut?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative",children:[jsxRuntimeExports.jsx("h3",{className:"absolute top-2 font-light",children:"Actor Age"}),jsxRuntimeExports.jsx("div",{className:"w-11/12 h-[95%] flex items-center justify-center",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:it,cx:"50%",cy:"50%",innerRadius:_e,outerRadius:tt,paddingAngle:5,dataKey:"value",children:it.map((gt,bt)=>jsxRuntimeExports.jsx(Cell,{fill:COLORS$1[bt%COLORS$1.length]},`cell-${bt}`))}),jsxRuntimeExports.jsx(Tooltip,{formatter:(gt,bt)=>[`${gt}`,`${bt}`],labelFormatter:gt=>`${gt}`}),jsxRuntimeExports.jsx(Legend,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:(gt,bt)=>{var wt;return jsxRuntimeExports.jsxs("span",{children:[gt,": ",(wt=bt.payload)==null?void 0:wt.value," "]})}})]})})})]})},TableList=({users:_e})=>{const[et,tt]=reactExports.useState(""),rt=_e.filter(it=>it.userName.toLowerCase().includes(et.toLowerCase()));return jsxRuntimeExports.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports.jsxs("div",{className:"h-[95%]",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by user name...",value:et,onChange:it=>tt(it.target.value),className:"p-2 border rounded w-full bg-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Table$1,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{className:"w-[100px]",children:"User ID"}),jsxRuntimeExports.jsx(TableHead,{children:"Name"}),jsxRuntimeExports.jsx(TableHead,{children:"Email"}),jsxRuntimeExports.jsx(TableHead,{children:"Status"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Gender"})]})}),jsxRuntimeExports.jsx(TableBody,{children:rt.length>0?rt.map(it=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:it.userId}),jsxRuntimeExports.jsx(TableCell,{children:it.userName}),jsxRuntimeExports.jsx(TableCell,{children:it.email}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("div",{className:`rounded-full flex justify-center text-white hover:bg-opacity-75 ${it.status==="Active"?"bg-green-400 hover:bg-green-600":"bg-red-400 hover:bg-red-600"}`,children:it.status})}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:it.gender})]},it.userId)):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:4,className:"text-center",children:"No users found"})})})]})})]})})},TypeLogin=()=>{const[_e,et]=reactExports.useState([]),[tt,rt]=reactExports.useState(!1),it=async()=>{var st,ut;try{rt(!0);const ht=await getUserTypeLogin();if(ht!=null&&ht.success){const at=(st=ht.result)==null?void 0:st.data;Array.isArray(at)&&at.length>0?et(at):_t.error("No data found for user login.")}else _t.error(((ut=ht==null?void 0:ht.result)==null?void 0:ut.message)||"Failed to fetch data")}catch{_t.error("An error occurred while fetching data.")}finally{rt(!1)}};return reactExports.useEffect(()=>{it()},[]),tt?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx("div",{className:"w-11/12 h-[95%]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:_e,margin:{top:10,right:10,left:10,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{verticalAlign:"top",height:36}),jsxRuntimeExports.jsx(Line,{name:"Google Ads",type:"monotone",dataKey:"googleAds",stroke:"#00C49F",dot:{r:6},activeDot:{r:8}}),jsxRuntimeExports.jsx(Line,{name:"Normal Ads",type:"monotone",dataKey:"normalAds",stroke:"#FF8042",dot:{r:6},activeDot:{r:8}})]})})})})},COLORS=["#FFBB28","#00C49F","#0088FE","#FF8042"],WebVisitor=()=>{const[_e,et]=reactExports.useState(null),[tt,rt]=reactExports.useState(80),[it,st]=reactExports.useState(100),[ut,ht]=reactExports.useState([]),[at,gt]=reactExports.useState(!1),bt=(St,kt)=>{et(kt)},wt=async()=>{var St,kt;try{gt(!0);const Rt=await getUserRole();if(Rt!=null&&Rt.success){const It=Object.entries((St=Rt.result)==null?void 0:St.data).map(([Dt,Mt])=>({name:Dt,value:Mt}));ht(It)}else _t.error(((kt=Rt==null?void 0:Rt.result)==null?void 0:kt.message)||"Failed to fetch data")}catch{_t.error("An error occurred while fetching data.")}finally{gt(!1)}};return reactExports.useEffect(()=>{wt();const St=()=>{const kt=window.innerWidth;rt(kt<1e3?60:80),st(kt<1e3?80:100)};return St(),window.addEventListener("resize",St),()=>window.removeEventListener("resize",St)},[]),at?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative",children:[" ",jsxRuntimeExports.jsx("span",{className:"absolute top-2 font-light",children:"Website Actors"}),jsxRuntimeExports.jsxs("div",{className:"w-11/12 h-[280px] flex items-center justify-center",children:[" ",jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(PieChart,{children:[jsxRuntimeExports.jsx(Pie,{data:ut,cx:"50%",cy:"50%",innerRadius:tt,outerRadius:it,paddingAngle:5,dataKey:"value",onMouseEnter:bt,children:ut.map((St,kt)=>jsxRuntimeExports.jsx(Cell,{fill:COLORS[kt%COLORS.length]},`cell-${kt}`))}),jsxRuntimeExports.jsx(Legend,{layout:"vertical",align:"right",verticalAlign:"middle",formatter:(St,kt)=>{var Rt;return jsxRuntimeExports.jsxs("span",{children:[St," ",(Rt=kt.payload)==null?void 0:Rt.value," "]})}}),jsxRuntimeExports.jsx(Tooltip,{content:jsxRuntimeExports.jsx(CustomTooltip,{active:_e!==null,payload:_e!==null?[ut[_e]]:[]})})]})})]})]})},CustomTooltip=({active:_e,payload:et})=>_e&&et&&et.length?jsxRuntimeExports.jsx("div",{className:"bg-white border border-gray-300 p-2 rounded shadow-md",children:jsxRuntimeExports.jsx("p",{children:`${et[0].name} : ${et[0].value}`})}):null,AdminCustomerPage=()=>{const[_e,et]=reactExports.useState(1),[tt,rt]=reactExports.useState(0),[it,st]=reactExports.useState([]),[ut,ht]=reactExports.useState(!1),at=async()=>{var gt,bt,wt,St;ht(!0);try{const kt=await getAllUser(_e);kt.success?(et((gt=kt.result)==null?void 0:gt.pagination.page),rt((bt=kt.result)==null?void 0:bt.pagination.totalPage),st((wt=kt.result)==null?void 0:wt.data)):console.error((St=kt.result)==null?void 0:St.message)}catch(kt){console.error("Error fetching users:",kt)}finally{ht(!1)}};return reactExports.useEffect(()=>{at()},[_e]),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 p-4 w-full h-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 md:col-span-2 rounded h-full w-full",children:jsxRuntimeExports.jsx(TypeLogin,{})}),jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 rounded h-full w-full",children:jsxRuntimeExports.jsx(WebVisitor,{})}),jsxRuntimeExports.jsxs("div",{className:"bg-white col-span-1 md:col-span-2 rounded h-full w-full",children:[jsxRuntimeExports.jsx(TableList,{users:it})," "]}),jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 rounded h-full w-full",children:jsxRuntimeExports.jsx(BuyersProfile,{})}),jsxRuntimeExports.jsx("div",{className:"col-span-1 md:col-span-3",children:jsxRuntimeExports.jsx(PaginationSeletor,{currentPage:_e,totalPages:tt,setPage:et})}),ut&&jsxRuntimeExports.jsx(Loading,{})]})},OrderAmount=()=>{const[_e,et]=reactExports.useState([]),tt=async()=>{var it;const rt=await getAllOrderAmountInYear();rt.success&&et((it=rt.result)==null?void 0:it.data)};return reactExports.useEffect(()=>{tt()},[]),jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx("div",{className:"w-11/12 h-[95%]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(BarChart,{data:_e,margin:{top:15,right:10,left:10,bottom:0},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{}),jsxRuntimeExports.jsx(Bar,{dataKey:"total",fill:"#8884d8",activeBar:jsxRuntimeExports.jsx(Rectangle,{fill:"pink",stroke:"blue"})}),jsxRuntimeExports.jsx(Bar,{dataKey:"system",fill:"#FF8042",activeBar:jsxRuntimeExports.jsx(Rectangle,{fill:"gold",stroke:"purple"})}),jsxRuntimeExports.jsx(Bar,{dataKey:"vat",fill:"#82ca9d",activeBar:jsxRuntimeExports.jsx(Rectangle,{fill:"gold",stroke:"purple"})})]})})})})},OrderChart=()=>{const[_e,et]=reactExports.useState([]),tt=async()=>{var it;const rt=await getAllOrderInYear();rt.success?et((it=rt.result)==null?void 0:it.data):_t.error("Error in fetch data trucks miles!")};return reactExports.useEffect(()=>{tt()},[]),jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center",children:jsxRuntimeExports.jsx("div",{className:"w-11/12 h-[95%]",children:jsxRuntimeExports.jsx(ResponsiveContainer,{width:"100%",height:"100%",children:jsxRuntimeExports.jsxs(LineChart,{data:_e,margin:{top:10,right:10,left:0,bottom:5},children:[jsxRuntimeExports.jsx(CartesianGrid,{strokeDasharray:"3 3"}),jsxRuntimeExports.jsx(XAxis,{dataKey:"name"}),jsxRuntimeExports.jsx(YAxis,{}),jsxRuntimeExports.jsx(Tooltip,{}),jsxRuntimeExports.jsx(Legend,{verticalAlign:"top",height:36}),jsxRuntimeExports.jsx(Line,{name:"Total Order",type:"monotone",dataKey:"count",stroke:"#FF8042",dot:{r:6},activeDot:{r:8}})]})})})})},TableOrder$1=({orders:_e})=>{const[et,tt]=reactExports.useState(""),rt=_e.filter(it=>{const st=et.toLowerCase(),ut=it.orderDetailId.toString().includes(et),ht=it.status.toLowerCase().includes(st);return ut||ht});return jsxRuntimeExports.jsx("div",{className:"w-full h-full",children:jsxRuntimeExports.jsxs("div",{className:"h-[95%]",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search by order ID or status...",value:et,onChange:it=>tt(it.target.value),className:"p-2 border rounded w-full bg-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Table$1,{children:[jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{children:"Order ID"}),jsxRuntimeExports.jsx(TableHead,{children:"Order Code"}),jsxRuntimeExports.jsx(TableHead,{children:"Reference"}),jsxRuntimeExports.jsx(TableHead,{children:"Payment Method"}),jsxRuntimeExports.jsx(TableHead,{children:"Transaction Date"}),jsxRuntimeExports.jsx(TableHead,{children:"Order Date"}),jsxRuntimeExports.jsx(TableHead,{children:"Total Price"}),jsxRuntimeExports.jsx(TableHead,{children:"Distance"}),jsxRuntimeExports.jsx(TableHead,{children:"Status"})]})}),jsxRuntimeExports.jsx(TableBody,{children:rt.length>0?rt.map(it=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium",children:it.orderDetailId}),jsxRuntimeExports.jsx(TableCell,{children:it.orderDetailCode||"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.reference||"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.paymentMethod||"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.transactionDateTime?new Date(it.transactionDateTime).toLocaleDateString():"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.startDate?new Date(it.startDate).toLocaleDateString():"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.totalPrice||"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:it.distance||"N/A"}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("div",{className:`rounded-full flex px-2 py-1 justify-center text-white hover:bg-opacity-75 ${it.status==="Completed"?"bg-green-400 hover:bg-green-600":"bg-red-400 hover:bg-red-600"}`,children:it.status})})]},it.orderDetailId)):jsxRuntimeExports.jsx(TableRow,{children:jsxRuntimeExports.jsx(TableCell,{colSpan:9,className:"text-center",children:"No orders found"})})})]})})]})})},AdminOrderPage=()=>{const[_e,et]=reactExports.useState(1),[tt,rt]=reactExports.useState(0),[it,st]=reactExports.useState([]),[ut,ht]=reactExports.useState(!1),at=async()=>{var gt,bt,wt,St;ht(!0);try{const kt=await getAllOrder(_e);kt.success?(et((gt=kt.result)==null?void 0:gt.pagination.page),rt((bt=kt.result)==null?void 0:bt.pagination.totalPage),st((wt=kt.result)==null?void 0:wt.data)):console.error((St=kt.result)==null?void 0:St.message)}catch(kt){console.error("Error fetching trucks:",kt)}finally{ht(!1)}};return reactExports.useEffect(()=>{at()},[_e]),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 gap-3 p-4 w-full h-full overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1 grid grid-cols-2 w-full h-full gap-3",children:[jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 rounded h-full w-full",children:jsxRuntimeExports.jsx(OrderChart,{})}),jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 rounded h-full w-full",children:jsxRuntimeExports.jsx(OrderAmount,{})})]}),jsxRuntimeExports.jsx("div",{className:"bg-white col-span-1 rounded h-full w-full",children:jsxRuntimeExports.jsx(TableOrder$1,{orders:it})}),jsxRuntimeExports.jsx("div",{className:"col-span-1",children:jsxRuntimeExports.jsx(PaginationSeletor,{currentPage:_e,totalPages:tt,setPage:et})}),ut&&jsxRuntimeExports.jsx(Loading,{})]})},AuthCallbackPage=()=>{const _e=useNavigate(),{user:et}=useAuth0(),tt=reactExports.useRef(!1),{setAuth:rt}=useAuth(),it=async st=>{var at,gt,bt,wt;const ut={email:st.email,userName:st.nickname,fullName:st.given_name,avatar:st.picture,typeAccount:"Customer"},ht=await authService.loginWithGG({data:ut});if(ht.success){localStorage.setItem("accessToken",(at=ht==null?void 0:ht.result)==null?void 0:at.data);const St=await authService.getUserInfo();St.success&&rt({user:(gt=St.result)==null?void 0:gt.data}),_t.success((bt=ht==null?void 0:ht.result)==null?void 0:bt.message)}else _t.error((wt=ht==null?void 0:ht.result)==null?void 0:wt.message)};return reactExports.useEffect(()=>{et!=null&&et.sub&&(et!=null&&et.email)&&!tt.current&&(it(et),tt.current=!0),_e("/")},[et,_e]),jsxRuntimeExports.jsx(Loading,{})};var isCheckBoxInput=_e=>_e.type==="checkbox",isDateObject=_e=>_e instanceof Date,isNullOrUndefined=_e=>_e==null;const isObjectType=_e=>typeof _e=="object";var isObject$3=_e=>!isNullOrUndefined(_e)&&!Array.isArray(_e)&&isObjectType(_e)&&!isDateObject(_e),getEventValue=_e=>isObject$3(_e)&&_e.target?isCheckBoxInput(_e.target)?_e.target.checked:_e.target.value:_e,getNodeParentName=_e=>_e.substring(0,_e.search(/\.\d+(\.|$)/))||_e,isNameInFieldArray=(_e,et)=>_e.has(getNodeParentName(et)),isPlainObject=_e=>{const et=_e.constructor&&_e.constructor.prototype;return isObject$3(et)&&et.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(_e){let et;const tt=Array.isArray(_e);if(_e instanceof Date)et=new Date(_e);else if(_e instanceof Set)et=new Set(_e);else if(!(isWeb&&(_e instanceof Blob||_e instanceof FileList))&&(tt||isObject$3(_e)))if(et=tt?[]:{},!tt&&!isPlainObject(_e))et=_e;else for(const rt in _e)_e.hasOwnProperty(rt)&&(et[rt]=cloneObject(_e[rt]));else return _e;return et}var compact=_e=>Array.isArray(_e)?_e.filter(Boolean):[],isUndefined=_e=>_e===void 0,get$1=(_e,et,tt)=>{if(!et||!isObject$3(_e))return tt;const rt=compact(et.split(/[,[\].]+?/)).reduce((it,st)=>isNullOrUndefined(it)?it:it[st],_e);return isUndefined(rt)||rt===_e?isUndefined(_e[et])?tt:_e[et]:rt},isBoolean$1=_e=>typeof _e=="boolean",isKey=_e=>/^\w*$/.test(_e),stringToPath=_e=>compact(_e.replace(/["|']|\]/g,"").split(/\.|\[/)),set=(_e,et,tt)=>{let rt=-1;const it=isKey(et)?[et]:stringToPath(et),st=it.length,ut=st-1;for(;++rt<st;){const ht=it[rt];let at=tt;if(rt!==ut){const gt=_e[ht];at=isObject$3(gt)||Array.isArray(gt)?gt:isNaN(+it[rt+1])?{}:[]}if(ht==="__proto__")return;_e[ht]=at,_e=_e[ht]}return _e};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React$1.createContext(null),useFormContext=()=>React$1.useContext(HookFormContext),FormProvider=_e=>{const{children:et,...tt}=_e;return React$1.createElement(HookFormContext.Provider,{value:tt},et)};var getProxyFormState=(_e,et,tt,rt=!0)=>{const it={defaultValues:et._defaultValues};for(const st in _e)Object.defineProperty(it,st,{get:()=>{const ut=st;return et._proxyFormState[ut]!==VALIDATION_MODE.all&&(et._proxyFormState[ut]=!rt||VALIDATION_MODE.all),tt&&(tt[ut]=!0),_e[ut]}});return it},isEmptyObject=_e=>isObject$3(_e)&&!Object.keys(_e).length,shouldRenderFormState=(_e,et,tt,rt)=>{tt(_e);const{name:it,...st}=_e;return isEmptyObject(st)||Object.keys(st).length>=Object.keys(et).length||Object.keys(st).find(ut=>et[ut]===(!rt||VALIDATION_MODE.all))},convertToArrayPayload=_e=>Array.isArray(_e)?_e:[_e],shouldSubscribeByName=(_e,et,tt)=>!_e||!et||_e===et||convertToArrayPayload(_e).some(rt=>rt&&(tt?rt===et:rt.startsWith(et)||et.startsWith(rt)));function useSubscribe(_e){const et=React$1.useRef(_e);et.current=_e,React$1.useEffect(()=>{const tt=!_e.disabled&&et.current.subject&&et.current.subject.subscribe({next:et.current.next});return()=>{tt&&tt.unsubscribe()}},[_e.disabled])}function useFormState(_e){const et=useFormContext(),{control:tt=et.control,disabled:rt,name:it,exact:st}=_e||{},[ut,ht]=React$1.useState(tt._formState),at=React$1.useRef(!0),gt=React$1.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),bt=React$1.useRef(it);return bt.current=it,useSubscribe({disabled:rt,next:wt=>at.current&&shouldSubscribeByName(bt.current,wt.name,st)&&shouldRenderFormState(wt,gt.current,tt._updateFormState)&&ht({...tt._formState,...wt}),subject:tt._subjects.state}),React$1.useEffect(()=>(at.current=!0,gt.current.isValid&&tt._updateValid(!0),()=>{at.current=!1}),[tt]),getProxyFormState(ut,tt,gt.current,!1)}var isString$2=_e=>typeof _e=="string",generateWatchOutput=(_e,et,tt,rt,it)=>isString$2(_e)?(rt&&et.watch.add(_e),get$1(tt,_e,it)):Array.isArray(_e)?_e.map(st=>(rt&&et.watch.add(st),get$1(tt,st))):(rt&&(et.watchAll=!0),tt);function useWatch(_e){const et=useFormContext(),{control:tt=et.control,name:rt,defaultValue:it,disabled:st,exact:ut}=_e||{},ht=React$1.useRef(rt);ht.current=rt,useSubscribe({disabled:st,subject:tt._subjects.values,next:bt=>{shouldSubscribeByName(ht.current,bt.name,ut)&&gt(cloneObject(generateWatchOutput(ht.current,tt._names,bt.values||tt._formValues,!1,it)))}});const[at,gt]=React$1.useState(tt._getWatch(rt,it));return React$1.useEffect(()=>tt._removeUnmounted()),at}function useController(_e){const et=useFormContext(),{name:tt,disabled:rt,control:it=et.control,shouldUnregister:st}=_e,ut=isNameInFieldArray(it._names.array,tt),ht=useWatch({control:it,name:tt,defaultValue:get$1(it._formValues,tt,get$1(it._defaultValues,tt,_e.defaultValue)),exact:!0}),at=useFormState({control:it,name:tt}),gt=React$1.useRef(it.register(tt,{..._e.rules,value:ht,...isBoolean$1(_e.disabled)?{disabled:_e.disabled}:{}}));return React$1.useEffect(()=>{const bt=it._options.shouldUnregister||st,wt=(St,kt)=>{const Rt=get$1(it._fields,St);Rt&&Rt._f&&(Rt._f.mount=kt)};if(wt(tt,!0),bt){const St=cloneObject(get$1(it._options.defaultValues,tt));set(it._defaultValues,tt,St),isUndefined(get$1(it._formValues,tt))&&set(it._formValues,tt,St)}return()=>{(ut?bt&&!it._state.action:bt)?it.unregister(tt):wt(tt,!1)}},[tt,it,ut,st]),React$1.useEffect(()=>{get$1(it._fields,tt)&&it._updateDisabledField({disabled:rt,fields:it._fields,name:tt,value:get$1(it._fields,tt)._f.value})},[rt,tt,it]),{field:{name:tt,value:ht,...isBoolean$1(rt)||at.disabled?{disabled:at.disabled||rt}:{},onChange:React$1.useCallback(bt=>gt.current.onChange({target:{value:getEventValue(bt),name:tt},type:EVENTS.CHANGE}),[tt]),onBlur:React$1.useCallback(()=>gt.current.onBlur({target:{value:get$1(it._formValues,tt),name:tt},type:EVENTS.BLUR}),[tt,it]),ref:bt=>{const wt=get$1(it._fields,tt);wt&&bt&&(wt._f.ref={focus:()=>bt.focus(),select:()=>bt.select(),setCustomValidity:St=>bt.setCustomValidity(St),reportValidity:()=>bt.reportValidity()})}},formState:at,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get$1(at.errors,tt)},isDirty:{enumerable:!0,get:()=>!!get$1(at.dirtyFields,tt)},isTouched:{enumerable:!0,get:()=>!!get$1(at.touchedFields,tt)},isValidating:{enumerable:!0,get:()=>!!get$1(at.validatingFields,tt)},error:{enumerable:!0,get:()=>get$1(at.errors,tt)}})}}const Controller=_e=>_e.render(useController(_e));var appendErrors=(_e,et,tt,rt,it)=>et?{...tt[_e],types:{...tt[_e]&&tt[_e].types?tt[_e].types:{},[rt]:it||!0}}:{},getValidationModes=_e=>({isOnSubmit:!_e||_e===VALIDATION_MODE.onSubmit,isOnBlur:_e===VALIDATION_MODE.onBlur,isOnChange:_e===VALIDATION_MODE.onChange,isOnAll:_e===VALIDATION_MODE.all,isOnTouch:_e===VALIDATION_MODE.onTouched}),isWatched=(_e,et,tt)=>!tt&&(et.watchAll||et.watch.has(_e)||[...et.watch].some(rt=>_e.startsWith(rt)&&/^\.\w+/.test(_e.slice(rt.length))));const iterateFieldsByAction=(_e,et,tt,rt)=>{for(const it of tt||Object.keys(_e)){const st=get$1(_e,it);if(st){const{_f:ut,...ht}=st;if(ut){if(ut.refs&&ut.refs[0]&&et(ut.refs[0],it)&&!rt)break;if(ut.ref&&et(ut.ref,ut.name)&&!rt)break;iterateFieldsByAction(ht,et)}else isObject$3(ht)&&iterateFieldsByAction(ht,et)}}};var updateFieldArrayRootError=(_e,et,tt)=>{const rt=convertToArrayPayload(get$1(_e,tt));return set(rt,"root",et[tt]),set(_e,tt,rt),_e},isFileInput=_e=>_e.type==="file",isFunction=_e=>typeof _e=="function",isHTMLElement$1=_e=>{if(!isWeb)return!1;const et=_e?_e.ownerDocument:0;return _e instanceof(et&&et.defaultView?et.defaultView.HTMLElement:HTMLElement)},isMessage=_e=>isString$2(_e),isRadioInput=_e=>_e.type==="radio",isRegex=_e=>_e instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=_e=>{if(Array.isArray(_e)){if(_e.length>1){const et=_e.filter(tt=>tt&&tt.checked&&!tt.disabled).map(tt=>tt.value);return{value:et,isValid:!!et.length}}return _e[0].checked&&!_e[0].disabled?_e[0].attributes&&!isUndefined(_e[0].attributes.value)?isUndefined(_e[0].value)||_e[0].value===""?validResult:{value:_e[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=_e=>Array.isArray(_e)?_e.reduce((et,tt)=>tt&&tt.checked&&!tt.disabled?{isValid:!0,value:tt.value}:et,defaultReturn):defaultReturn;function getValidateError(_e,et,tt="validate"){if(isMessage(_e)||Array.isArray(_e)&&_e.every(isMessage)||isBoolean$1(_e)&&!_e)return{type:tt,message:isMessage(_e)?_e:"",ref:et}}var getValueAndMessage=_e=>isObject$3(_e)&&!isRegex(_e)?_e:{value:_e,message:""},validateField=async(_e,et,tt,rt,it)=>{const{ref:st,refs:ut,required:ht,maxLength:at,minLength:gt,min:bt,max:wt,pattern:St,validate:kt,name:Rt,valueAsNumber:It,mount:Dt,disabled:Mt}=_e._f,$t=get$1(et,Rt);if(!Dt||Mt)return{};const jt=ut?ut[0]:st,Nt=yr=>{rt&&jt.reportValidity&&(jt.setCustomValidity(isBoolean$1(yr)?"":yr||""),jt.reportValidity())},Ut={},Ht=isRadioInput(st),Kt=isCheckBoxInput(st),tr=Ht||Kt,mr=(It||isFileInput(st))&&isUndefined(st.value)&&isUndefined($t)||isHTMLElement$1(st)&&st.value===""||$t===""||Array.isArray($t)&&!$t.length,vr=appendErrors.bind(null,Rt,tt,Ut),wr=(yr,Or,Nr,Lr=INPUT_VALIDATION_RULES.maxLength,ar=INPUT_VALIDATION_RULES.minLength)=>{const hr=yr?Or:Nr;Ut[Rt]={type:yr?Lr:ar,message:hr,ref:st,...vr(yr?Lr:ar,hr)}};if(it?!Array.isArray($t)||!$t.length:ht&&(!tr&&(mr||isNullOrUndefined($t))||isBoolean$1($t)&&!$t||Kt&&!getCheckboxValue(ut).isValid||Ht&&!getRadioValue(ut).isValid)){const{value:yr,message:Or}=isMessage(ht)?{value:!!ht,message:ht}:getValueAndMessage(ht);if(yr&&(Ut[Rt]={type:INPUT_VALIDATION_RULES.required,message:Or,ref:jt,...vr(INPUT_VALIDATION_RULES.required,Or)},!tt))return Nt(Or),Ut}if(!mr&&(!isNullOrUndefined(bt)||!isNullOrUndefined(wt))){let yr,Or;const Nr=getValueAndMessage(wt),Lr=getValueAndMessage(bt);if(!isNullOrUndefined($t)&&!isNaN($t)){const ar=st.valueAsNumber||$t&&+$t;isNullOrUndefined(Nr.value)||(yr=ar>Nr.value),isNullOrUndefined(Lr.value)||(Or=ar<Lr.value)}else{const ar=st.valueAsDate||new Date($t),hr=Mr=>new Date(new Date().toDateString()+" "+Mr),Qt=st.type=="time",ir=st.type=="week";isString$2(Nr.value)&&$t&&(yr=Qt?hr($t)>hr(Nr.value):ir?$t>Nr.value:ar>new Date(Nr.value)),isString$2(Lr.value)&&$t&&(Or=Qt?hr($t)<hr(Lr.value):ir?$t<Lr.value:ar<new Date(Lr.value))}if((yr||Or)&&(wr(!!yr,Nr.message,Lr.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!tt))return Nt(Ut[Rt].message),Ut}if((at||gt)&&!mr&&(isString$2($t)||it&&Array.isArray($t))){const yr=getValueAndMessage(at),Or=getValueAndMessage(gt),Nr=!isNullOrUndefined(yr.value)&&$t.length>+yr.value,Lr=!isNullOrUndefined(Or.value)&&$t.length<+Or.value;if((Nr||Lr)&&(wr(Nr,yr.message,Or.message),!tt))return Nt(Ut[Rt].message),Ut}if(St&&!mr&&isString$2($t)){const{value:yr,message:Or}=getValueAndMessage(St);if(isRegex(yr)&&!$t.match(yr)&&(Ut[Rt]={type:INPUT_VALIDATION_RULES.pattern,message:Or,ref:st,...vr(INPUT_VALIDATION_RULES.pattern,Or)},!tt))return Nt(Or),Ut}if(kt){if(isFunction(kt)){const yr=await kt($t,et),Or=getValidateError(yr,jt);if(Or&&(Ut[Rt]={...Or,...vr(INPUT_VALIDATION_RULES.validate,Or.message)},!tt))return Nt(Or.message),Ut}else if(isObject$3(kt)){let yr={};for(const Or in kt){if(!isEmptyObject(yr)&&!tt)break;const Nr=getValidateError(await kt[Or]($t,et),jt,Or);Nr&&(yr={...Nr,...vr(Or,Nr.message)},Nt(Nr.message),tt&&(Ut[Rt]=yr))}if(!isEmptyObject(yr)&&(Ut[Rt]={ref:jt,...yr},!tt))return Ut}}return Nt(!0),Ut};function baseGet(_e,et){const tt=et.slice(0,-1).length;let rt=0;for(;rt<tt;)_e=isUndefined(_e)?rt++:_e[et[rt++]];return _e}function isEmptyArray(_e){for(const et in _e)if(_e.hasOwnProperty(et)&&!isUndefined(_e[et]))return!1;return!0}function unset(_e,et){const tt=Array.isArray(et)?et:isKey(et)?[et]:stringToPath(et),rt=tt.length===1?_e:baseGet(_e,tt),it=tt.length-1,st=tt[it];return rt&&delete rt[st],it!==0&&(isObject$3(rt)&&isEmptyObject(rt)||Array.isArray(rt)&&isEmptyArray(rt))&&unset(_e,tt.slice(0,-1)),_e}var createSubject=()=>{let _e=[];return{get observers(){return _e},next:it=>{for(const st of _e)st.next&&st.next(it)},subscribe:it=>(_e.push(it),{unsubscribe:()=>{_e=_e.filter(st=>st!==it)}}),unsubscribe:()=>{_e=[]}}},isPrimitive=_e=>isNullOrUndefined(_e)||!isObjectType(_e);function deepEqual$2(_e,et){if(isPrimitive(_e)||isPrimitive(et))return _e===et;if(isDateObject(_e)&&isDateObject(et))return _e.getTime()===et.getTime();const tt=Object.keys(_e),rt=Object.keys(et);if(tt.length!==rt.length)return!1;for(const it of tt){const st=_e[it];if(!rt.includes(it))return!1;if(it!=="ref"){const ut=et[it];if(isDateObject(st)&&isDateObject(ut)||isObject$3(st)&&isObject$3(ut)||Array.isArray(st)&&Array.isArray(ut)?!deepEqual$2(st,ut):st!==ut)return!1}}return!0}var isMultipleSelect=_e=>_e.type==="select-multiple",isRadioOrCheckbox=_e=>isRadioInput(_e)||isCheckBoxInput(_e),live=_e=>isHTMLElement$1(_e)&&_e.isConnected,objectHasFunction=_e=>{for(const et in _e)if(isFunction(_e[et]))return!0;return!1};function markFieldsDirty(_e,et={}){const tt=Array.isArray(_e);if(isObject$3(_e)||tt)for(const rt in _e)Array.isArray(_e[rt])||isObject$3(_e[rt])&&!objectHasFunction(_e[rt])?(et[rt]=Array.isArray(_e[rt])?[]:{},markFieldsDirty(_e[rt],et[rt])):isNullOrUndefined(_e[rt])||(et[rt]=!0);return et}function getDirtyFieldsFromDefaultValues(_e,et,tt){const rt=Array.isArray(_e);if(isObject$3(_e)||rt)for(const it in _e)Array.isArray(_e[it])||isObject$3(_e[it])&&!objectHasFunction(_e[it])?isUndefined(et)||isPrimitive(tt[it])?tt[it]=Array.isArray(_e[it])?markFieldsDirty(_e[it],[]):{...markFieldsDirty(_e[it])}:getDirtyFieldsFromDefaultValues(_e[it],isNullOrUndefined(et)?{}:et[it],tt[it]):tt[it]=!deepEqual$2(_e[it],et[it]);return tt}var getDirtyFields=(_e,et)=>getDirtyFieldsFromDefaultValues(_e,et,markFieldsDirty(et)),getFieldValueAs=(_e,{valueAsNumber:et,valueAsDate:tt,setValueAs:rt})=>isUndefined(_e)?_e:et?_e===""?NaN:_e&&+_e:tt&&isString$2(_e)?new Date(_e):rt?rt(_e):_e;function getFieldValue(_e){const et=_e.ref;if(!(_e.refs?_e.refs.every(tt=>tt.disabled):et.disabled))return isFileInput(et)?et.files:isRadioInput(et)?getRadioValue(_e.refs).value:isMultipleSelect(et)?[...et.selectedOptions].map(({value:tt})=>tt):isCheckBoxInput(et)?getCheckboxValue(_e.refs).value:getFieldValueAs(isUndefined(et.value)?_e.ref.value:et.value,_e)}var getResolverOptions=(_e,et,tt,rt)=>{const it={};for(const st of _e){const ut=get$1(et,st);ut&&set(it,st,ut._f)}return{criteriaMode:tt,names:[..._e],fields:it,shouldUseNativeValidation:rt}},getRuleValue=_e=>isUndefined(_e)?_e:isRegex(_e)?_e.source:isObject$3(_e)?isRegex(_e.value)?_e.value.source:_e.value:_e,hasValidation=_e=>_e.mount&&(_e.required||_e.min||_e.max||_e.maxLength||_e.minLength||_e.pattern||_e.validate);function schemaErrorLookup(_e,et,tt){const rt=get$1(_e,tt);if(rt||isKey(tt))return{error:rt,name:tt};const it=tt.split(".");for(;it.length;){const st=it.join("."),ut=get$1(et,st),ht=get$1(_e,st);if(ut&&!Array.isArray(ut)&&tt!==st)return{name:tt};if(ht&&ht.type)return{name:st,error:ht};it.pop()}return{name:tt}}var skipValidation=(_e,et,tt,rt,it)=>it.isOnAll?!1:!tt&&it.isOnTouch?!(et||_e):(tt?rt.isOnBlur:it.isOnBlur)?!_e:(tt?rt.isOnChange:it.isOnChange)?_e:!0,unsetEmptyArray=(_e,et)=>!compact(get$1(_e,et)).length&&unset(_e,et);const defaultOptions$4={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(_e={}){let et={...defaultOptions$4,..._e},tt={submitCount:0,isDirty:!1,isLoading:isFunction(et.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:et.errors||{},disabled:et.disabled||!1},rt={},it=isObject$3(et.defaultValues)||isObject$3(et.values)?cloneObject(et.defaultValues||et.values)||{}:{},st=et.shouldUnregister?{}:cloneObject(it),ut={action:!1,mount:!1,watch:!1},ht={mount:new Set,unMount:new Set,array:new Set,watch:new Set},at,gt=0;const bt={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},wt={values:createSubject(),array:createSubject(),state:createSubject()},St=getValidationModes(et.mode),kt=getValidationModes(et.reValidateMode),Rt=et.criteriaMode===VALIDATION_MODE.all,It=Zr=>pn=>{clearTimeout(gt),gt=setTimeout(Zr,pn)},Dt=async Zr=>{if(bt.isValid||Zr){const pn=et.resolver?isEmptyObject((await tr()).errors):await vr(rt,!0);pn!==tt.isValid&&wt.state.next({isValid:pn})}},Mt=(Zr,pn)=>{(bt.isValidating||bt.validatingFields)&&((Zr||Array.from(ht.mount)).forEach(sn=>{sn&&(pn?set(tt.validatingFields,sn,pn):unset(tt.validatingFields,sn))}),wt.state.next({validatingFields:tt.validatingFields,isValidating:!isEmptyObject(tt.validatingFields)}))},$t=(Zr,pn=[],sn,wn,Xn=!0,Fn=!0)=>{if(wn&&sn){if(ut.action=!0,Fn&&Array.isArray(get$1(rt,Zr))){const ro=sn(get$1(rt,Zr),wn.argA,wn.argB);Xn&&set(rt,Zr,ro)}if(Fn&&Array.isArray(get$1(tt.errors,Zr))){const ro=sn(get$1(tt.errors,Zr),wn.argA,wn.argB);Xn&&set(tt.errors,Zr,ro),unsetEmptyArray(tt.errors,Zr)}if(bt.touchedFields&&Fn&&Array.isArray(get$1(tt.touchedFields,Zr))){const ro=sn(get$1(tt.touchedFields,Zr),wn.argA,wn.argB);Xn&&set(tt.touchedFields,Zr,ro)}bt.dirtyFields&&(tt.dirtyFields=getDirtyFields(it,st)),wt.state.next({name:Zr,isDirty:yr(Zr,pn),dirtyFields:tt.dirtyFields,errors:tt.errors,isValid:tt.isValid})}else set(st,Zr,pn)},jt=(Zr,pn)=>{set(tt.errors,Zr,pn),wt.state.next({errors:tt.errors})},Nt=Zr=>{tt.errors=Zr,wt.state.next({errors:tt.errors,isValid:!1})},Ut=(Zr,pn,sn,wn)=>{const Xn=get$1(rt,Zr);if(Xn){const Fn=get$1(st,Zr,isUndefined(sn)?get$1(it,Zr):sn);isUndefined(Fn)||wn&&wn.defaultChecked||pn?set(st,Zr,pn?Fn:getFieldValue(Xn._f)):Lr(Zr,Fn),ut.mount&&Dt()}},Ht=(Zr,pn,sn,wn,Xn)=>{let Fn=!1,ro=!1;const No={name:Zr},co=!!(get$1(rt,Zr)&&get$1(rt,Zr)._f&&get$1(rt,Zr)._f.disabled);if(!sn||wn){bt.isDirty&&(ro=tt.isDirty,tt.isDirty=No.isDirty=yr(),Fn=ro!==No.isDirty);const Ao=co||deepEqual$2(get$1(it,Zr),pn);ro=!!(!co&&get$1(tt.dirtyFields,Zr)),Ao||co?unset(tt.dirtyFields,Zr):set(tt.dirtyFields,Zr,!0),No.dirtyFields=tt.dirtyFields,Fn=Fn||bt.dirtyFields&&ro!==!Ao}if(sn){const Ao=get$1(tt.touchedFields,Zr);Ao||(set(tt.touchedFields,Zr,sn),No.touchedFields=tt.touchedFields,Fn=Fn||bt.touchedFields&&Ao!==sn)}return Fn&&Xn&&wt.state.next(No),Fn?No:{}},Kt=(Zr,pn,sn,wn)=>{const Xn=get$1(tt.errors,Zr),Fn=bt.isValid&&isBoolean$1(pn)&&tt.isValid!==pn;if(_e.delayError&&sn?(at=It(()=>jt(Zr,sn)),at(_e.delayError)):(clearTimeout(gt),at=null,sn?set(tt.errors,Zr,sn):unset(tt.errors,Zr)),(sn?!deepEqual$2(Xn,sn):Xn)||!isEmptyObject(wn)||Fn){const ro={...wn,...Fn&&isBoolean$1(pn)?{isValid:pn}:{},errors:tt.errors,name:Zr};tt={...tt,...ro},wt.state.next(ro)}},tr=async Zr=>{Mt(Zr,!0);const pn=await et.resolver(st,et.context,getResolverOptions(Zr||ht.mount,rt,et.criteriaMode,et.shouldUseNativeValidation));return Mt(Zr),pn},mr=async Zr=>{const{errors:pn}=await tr(Zr);if(Zr)for(const sn of Zr){const wn=get$1(pn,sn);wn?set(tt.errors,sn,wn):unset(tt.errors,sn)}else tt.errors=pn;return pn},vr=async(Zr,pn,sn={valid:!0})=>{for(const wn in Zr){const Xn=Zr[wn];if(Xn){const{_f:Fn,...ro}=Xn;if(Fn){const No=ht.array.has(Fn.name);Mt([wn],!0);const co=await validateField(Xn,st,Rt,et.shouldUseNativeValidation&&!pn,No);if(Mt([wn]),co[Fn.name]&&(sn.valid=!1,pn))break;!pn&&(get$1(co,Fn.name)?No?updateFieldArrayRootError(tt.errors,co,Fn.name):set(tt.errors,Fn.name,co[Fn.name]):unset(tt.errors,Fn.name))}ro&&await vr(ro,pn,sn)}}return sn.valid},wr=()=>{for(const Zr of ht.unMount){const pn=get$1(rt,Zr);pn&&(pn._f.refs?pn._f.refs.every(sn=>!live(sn)):!live(pn._f.ref))&&eo(Zr)}ht.unMount=new Set},yr=(Zr,pn)=>(Zr&&pn&&set(st,Zr,pn),!deepEqual$2(Cr(),it)),Or=(Zr,pn,sn)=>generateWatchOutput(Zr,ht,{...ut.mount?st:isUndefined(pn)?it:isString$2(Zr)?{[Zr]:pn}:pn},sn,pn),Nr=Zr=>compact(get$1(ut.mount?st:it,Zr,_e.shouldUnregister?get$1(it,Zr,[]):[])),Lr=(Zr,pn,sn={})=>{const wn=get$1(rt,Zr);let Xn=pn;if(wn){const Fn=wn._f;Fn&&(!Fn.disabled&&set(st,Zr,getFieldValueAs(pn,Fn)),Xn=isHTMLElement$1(Fn.ref)&&isNullOrUndefined(pn)?"":pn,isMultipleSelect(Fn.ref)?[...Fn.ref.options].forEach(ro=>ro.selected=Xn.includes(ro.value)):Fn.refs?isCheckBoxInput(Fn.ref)?Fn.refs.length>1?Fn.refs.forEach(ro=>(!ro.defaultChecked||!ro.disabled)&&(ro.checked=Array.isArray(Xn)?!!Xn.find(No=>No===ro.value):Xn===ro.value)):Fn.refs[0]&&(Fn.refs[0].checked=!!Xn):Fn.refs.forEach(ro=>ro.checked=ro.value===Xn):isFileInput(Fn.ref)?Fn.ref.value="":(Fn.ref.value=Xn,Fn.ref.type||wt.values.next({name:Zr,values:{...st}})))}(sn.shouldDirty||sn.shouldTouch)&&Ht(Zr,Xn,sn.shouldTouch,sn.shouldDirty,!0),sn.shouldValidate&&Mr(Zr)},ar=(Zr,pn,sn)=>{for(const wn in pn){const Xn=pn[wn],Fn=`${Zr}.${wn}`,ro=get$1(rt,Fn);(ht.array.has(Zr)||!isPrimitive(Xn)||ro&&!ro._f)&&!isDateObject(Xn)?ar(Fn,Xn,sn):Lr(Fn,Xn,sn)}},hr=(Zr,pn,sn={})=>{const wn=get$1(rt,Zr),Xn=ht.array.has(Zr),Fn=cloneObject(pn);set(st,Zr,Fn),Xn?(wt.array.next({name:Zr,values:{...st}}),(bt.isDirty||bt.dirtyFields)&&sn.shouldDirty&&wt.state.next({name:Zr,dirtyFields:getDirtyFields(it,st),isDirty:yr(Zr,Fn)})):wn&&!wn._f&&!isNullOrUndefined(Fn)?ar(Zr,Fn,sn):Lr(Zr,Fn,sn),isWatched(Zr,ht)&&wt.state.next({...tt}),wt.values.next({name:ut.mount?Zr:void 0,values:{...st}})},Qt=async Zr=>{ut.mount=!0;const pn=Zr.target;let sn=pn.name,wn=!0;const Xn=get$1(rt,sn),Fn=()=>pn.type?getFieldValue(Xn._f):getEventValue(Zr),ro=No=>{wn=Number.isNaN(No)||No===get$1(st,sn,No)};if(Xn){let No,co;const Ao=Fn(),vo=Zr.type===EVENTS.BLUR||Zr.type===EVENTS.FOCUS_OUT,Fo=!hasValidation(Xn._f)&&!et.resolver&&!get$1(tt.errors,sn)&&!Xn._f.deps||skipValidation(vo,get$1(tt.touchedFields,sn),tt.isSubmitted,kt,St),ds=isWatched(sn,ht,vo);set(st,sn,Ao),vo?(Xn._f.onBlur&&Xn._f.onBlur(Zr),at&&at(0)):Xn._f.onChange&&Xn._f.onChange(Zr);const bs=Ht(sn,Ao,vo,!1),Yo=!isEmptyObject(bs)||ds;if(!vo&&wt.values.next({name:sn,type:Zr.type,values:{...st}}),Fo)return bt.isValid&&Dt(),Yo&&wt.state.next({name:sn,...ds?{}:bs});if(!vo&&ds&&wt.state.next({...tt}),et.resolver){const{errors:Po}=await tr([sn]);if(ro(Ao),wn){const gs=schemaErrorLookup(tt.errors,rt,sn),ws=schemaErrorLookup(Po,rt,gs.name||sn);No=ws.error,sn=ws.name,co=isEmptyObject(Po)}}else Mt([sn],!0),No=(await validateField(Xn,st,Rt,et.shouldUseNativeValidation))[sn],Mt([sn]),ro(Ao),wn&&(No?co=!1:bt.isValid&&(co=await vr(rt,!0)));wn&&(Xn._f.deps&&Mr(Xn._f.deps),Kt(sn,co,No,bs))}},ir=(Zr,pn)=>{if(get$1(tt.errors,pn)&&Zr.focus)return Zr.focus(),1},Mr=async(Zr,pn={})=>{let sn,wn;const Xn=convertToArrayPayload(Zr);if(et.resolver){const Fn=await mr(isUndefined(Zr)?Zr:Xn);sn=isEmptyObject(Fn),wn=Zr?!Xn.some(ro=>get$1(Fn,ro)):sn}else Zr?(wn=(await Promise.all(Xn.map(async Fn=>{const ro=get$1(rt,Fn);return await vr(ro&&ro._f?{[Fn]:ro}:ro)}))).every(Boolean),!(!wn&&!tt.isValid)&&Dt()):wn=sn=await vr(rt);return wt.state.next({...!isString$2(Zr)||bt.isValid&&sn!==tt.isValid?{}:{name:Zr},...et.resolver||!Zr?{isValid:sn}:{},errors:tt.errors}),pn.shouldFocus&&!wn&&iterateFieldsByAction(rt,ir,Zr?Xn:ht.mount),wn},Cr=Zr=>{const pn={...ut.mount?st:it};return isUndefined(Zr)?pn:isString$2(Zr)?get$1(pn,Zr):Zr.map(sn=>get$1(pn,sn))},rn=(Zr,pn)=>({invalid:!!get$1((pn||tt).errors,Zr),isDirty:!!get$1((pn||tt).dirtyFields,Zr),error:get$1((pn||tt).errors,Zr),isValidating:!!get$1(tt.validatingFields,Zr),isTouched:!!get$1((pn||tt).touchedFields,Zr)}),fn=Zr=>{Zr&&convertToArrayPayload(Zr).forEach(pn=>unset(tt.errors,pn)),wt.state.next({errors:Zr?tt.errors:{}})},Dn=(Zr,pn,sn)=>{const wn=(get$1(rt,Zr,{_f:{}})._f||{}).ref,Xn=get$1(tt.errors,Zr)||{},{ref:Fn,message:ro,type:No,...co}=Xn;set(tt.errors,Zr,{...co,...pn,ref:wn}),wt.state.next({name:Zr,errors:tt.errors,isValid:!1}),sn&&sn.shouldFocus&&wn&&wn.focus&&wn.focus()},Yn=(Zr,pn)=>isFunction(Zr)?wt.values.subscribe({next:sn=>Zr(Or(void 0,pn),sn)}):Or(Zr,pn,!0),eo=(Zr,pn={})=>{for(const sn of Zr?convertToArrayPayload(Zr):ht.mount)ht.mount.delete(sn),ht.array.delete(sn),pn.keepValue||(unset(rt,sn),unset(st,sn)),!pn.keepError&&unset(tt.errors,sn),!pn.keepDirty&&unset(tt.dirtyFields,sn),!pn.keepTouched&&unset(tt.touchedFields,sn),!pn.keepIsValidating&&unset(tt.validatingFields,sn),!et.shouldUnregister&&!pn.keepDefaultValue&&unset(it,sn);wt.values.next({values:{...st}}),wt.state.next({...tt,...pn.keepDirty?{isDirty:yr()}:{}}),!pn.keepIsValid&&Dt()},Gn=({disabled:Zr,name:pn,field:sn,fields:wn,value:Xn})=>{if(isBoolean$1(Zr)&&ut.mount||Zr){const Fn=Zr?void 0:isUndefined(Xn)?getFieldValue(sn?sn._f:get$1(wn,pn)._f):Xn;set(st,pn,Fn),Ht(pn,Fn,!1,!1,!0)}},lo=(Zr,pn={})=>{let sn=get$1(rt,Zr);const wn=isBoolean$1(pn.disabled);return set(rt,Zr,{...sn||{},_f:{...sn&&sn._f?sn._f:{ref:{name:Zr}},name:Zr,mount:!0,...pn}}),ht.mount.add(Zr),sn?Gn({field:sn,disabled:pn.disabled,name:Zr,value:pn.value}):Ut(Zr,!0,pn.value),{...wn?{disabled:pn.disabled}:{},...et.progressive?{required:!!pn.required,min:getRuleValue(pn.min),max:getRuleValue(pn.max),minLength:getRuleValue(pn.minLength),maxLength:getRuleValue(pn.maxLength),pattern:getRuleValue(pn.pattern)}:{},name:Zr,onChange:Qt,onBlur:Qt,ref:Xn=>{if(Xn){lo(Zr,pn),sn=get$1(rt,Zr);const Fn=isUndefined(Xn.value)&&Xn.querySelectorAll&&Xn.querySelectorAll("input,select,textarea")[0]||Xn,ro=isRadioOrCheckbox(Fn),No=sn._f.refs||[];if(ro?No.find(co=>co===Fn):Fn===sn._f.ref)return;set(rt,Zr,{_f:{...sn._f,...ro?{refs:[...No.filter(live),Fn,...Array.isArray(get$1(it,Zr))?[{}]:[]],ref:{type:Fn.type,name:Zr}}:{ref:Fn}}}),Ut(Zr,!1,void 0,Fn)}else sn=get$1(rt,Zr,{}),sn._f&&(sn._f.mount=!1),(et.shouldUnregister||pn.shouldUnregister)&&!(isNameInFieldArray(ht.array,Zr)&&ut.action)&&ht.unMount.add(Zr)}}},mn=()=>et.shouldFocusError&&iterateFieldsByAction(rt,ir,ht.mount),Hn=Zr=>{isBoolean$1(Zr)&&(wt.state.next({disabled:Zr}),iterateFieldsByAction(rt,(pn,sn)=>{const wn=get$1(rt,sn);wn&&(pn.disabled=wn._f.disabled||Zr,Array.isArray(wn._f.refs)&&wn._f.refs.forEach(Xn=>{Xn.disabled=wn._f.disabled||Zr}))},0,!1))},Rn=(Zr,pn)=>async sn=>{let wn;sn&&(sn.preventDefault&&sn.preventDefault(),sn.persist&&sn.persist());let Xn=cloneObject(st);if(wt.state.next({isSubmitting:!0}),et.resolver){const{errors:Fn,values:ro}=await tr();tt.errors=Fn,Xn=ro}else await vr(rt);if(unset(tt.errors,"root"),isEmptyObject(tt.errors)){wt.state.next({errors:{}});try{await Zr(Xn,sn)}catch(Fn){wn=Fn}}else pn&&await pn({...tt.errors},sn),mn(),setTimeout(mn);if(wt.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(tt.errors)&&!wn,submitCount:tt.submitCount+1,errors:tt.errors}),wn)throw wn},dn=(Zr,pn={})=>{get$1(rt,Zr)&&(isUndefined(pn.defaultValue)?hr(Zr,cloneObject(get$1(it,Zr))):(hr(Zr,pn.defaultValue),set(it,Zr,cloneObject(pn.defaultValue))),pn.keepTouched||unset(tt.touchedFields,Zr),pn.keepDirty||(unset(tt.dirtyFields,Zr),tt.isDirty=pn.defaultValue?yr(Zr,cloneObject(get$1(it,Zr))):yr()),pn.keepError||(unset(tt.errors,Zr),bt.isValid&&Dt()),wt.state.next({...tt}))},qn=(Zr,pn={})=>{const sn=Zr?cloneObject(Zr):it,wn=cloneObject(sn),Xn=isEmptyObject(Zr),Fn=Xn?it:wn;if(pn.keepDefaultValues||(it=sn),!pn.keepValues){if(pn.keepDirtyValues)for(const ro of ht.mount)get$1(tt.dirtyFields,ro)?set(Fn,ro,get$1(st,ro)):hr(ro,get$1(Fn,ro));else{if(isWeb&&isUndefined(Zr))for(const ro of ht.mount){const No=get$1(rt,ro);if(No&&No._f){const co=Array.isArray(No._f.refs)?No._f.refs[0]:No._f.ref;if(isHTMLElement$1(co)){const Ao=co.closest("form");if(Ao){Ao.reset();break}}}}rt={}}st=_e.shouldUnregister?pn.keepDefaultValues?cloneObject(it):{}:cloneObject(Fn),wt.array.next({values:{...Fn}}),wt.values.next({values:{...Fn}})}ht={mount:pn.keepDirtyValues?ht.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},ut.mount=!bt.isValid||!!pn.keepIsValid||!!pn.keepDirtyValues,ut.watch=!!_e.shouldUnregister,wt.state.next({submitCount:pn.keepSubmitCount?tt.submitCount:0,isDirty:Xn?!1:pn.keepDirty?tt.isDirty:!!(pn.keepDefaultValues&&!deepEqual$2(Zr,it)),isSubmitted:pn.keepIsSubmitted?tt.isSubmitted:!1,dirtyFields:Xn?{}:pn.keepDirtyValues?pn.keepDefaultValues&&st?getDirtyFields(it,st):tt.dirtyFields:pn.keepDefaultValues&&Zr?getDirtyFields(it,Zr):pn.keepDirty?tt.dirtyFields:{},touchedFields:pn.keepTouched?tt.touchedFields:{},errors:pn.keepErrors?tt.errors:{},isSubmitSuccessful:pn.keepIsSubmitSuccessful?tt.isSubmitSuccessful:!1,isSubmitting:!1})},On=(Zr,pn)=>qn(isFunction(Zr)?Zr(st):Zr,pn);return{control:{register:lo,unregister:eo,getFieldState:rn,handleSubmit:Rn,setError:Dn,_executeSchema:tr,_getWatch:Or,_getDirty:yr,_updateValid:Dt,_removeUnmounted:wr,_updateFieldArray:$t,_updateDisabledField:Gn,_getFieldArray:Nr,_reset:qn,_resetDefaultValues:()=>isFunction(et.defaultValues)&&et.defaultValues().then(Zr=>{On(Zr,et.resetOptions),wt.state.next({isLoading:!1})}),_updateFormState:Zr=>{tt={...tt,...Zr}},_disableForm:Hn,_subjects:wt,_proxyFormState:bt,_setErrors:Nt,get _fields(){return rt},get _formValues(){return st},get _state(){return ut},set _state(Zr){ut=Zr},get _defaultValues(){return it},get _names(){return ht},set _names(Zr){ht=Zr},get _formState(){return tt},set _formState(Zr){tt=Zr},get _options(){return et},set _options(Zr){et={...et,...Zr}}},trigger:Mr,register:lo,handleSubmit:Rn,watch:Yn,setValue:hr,getValues:Cr,reset:On,resetField:dn,clearErrors:fn,unregister:eo,setError:Dn,setFocus:(Zr,pn={})=>{const sn=get$1(rt,Zr),wn=sn&&sn._f;if(wn){const Xn=wn.refs?wn.refs[0]:wn.ref;Xn.focus&&(Xn.focus(),pn.shouldSelect&&Xn.select())}},getFieldState:rn}}function useForm(_e={}){const et=React$1.useRef(),tt=React$1.useRef(),[rt,it]=React$1.useState({isDirty:!1,isValidating:!1,isLoading:isFunction(_e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:_e.errors||{},disabled:_e.disabled||!1,defaultValues:isFunction(_e.defaultValues)?void 0:_e.defaultValues});et.current||(et.current={...createFormControl(_e),formState:rt});const st=et.current.control;return st._options=_e,useSubscribe({subject:st._subjects.state,next:ut=>{shouldRenderFormState(ut,st._proxyFormState,st._updateFormState,!0)&&it({...st._formState})}}),React$1.useEffect(()=>st._disableForm(_e.disabled),[st,_e.disabled]),React$1.useEffect(()=>{if(st._proxyFormState.isDirty){const ut=st._getDirty();ut!==rt.isDirty&&st._subjects.state.next({isDirty:ut})}},[st,rt.isDirty]),React$1.useEffect(()=>{_e.values&&!deepEqual$2(_e.values,tt.current)?(st._reset(_e.values,st._options.resetOptions),tt.current=_e.values,it(ut=>({...ut}))):st._resetDefaultValues()},[_e.values,st]),React$1.useEffect(()=>{_e.errors&&st._setErrors(_e.errors)},[_e.errors,st]),React$1.useEffect(()=>{st._state.mount||(st._updateValid(),st._state.mount=!0),st._state.watch&&(st._state.watch=!1,st._subjects.state.next({...st._formState})),st._removeUnmounted()}),React$1.useEffect(()=>{_e.shouldUnregister&&st._subjects.values.next({values:st._getWatch()})},[_e.shouldUnregister,st]),et.current.formState=getProxyFormState(rt,st),et.current}var NODES=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Primitive=NODES.reduce((_e,et)=>{const tt=reactExports.forwardRef((rt,it)=>{const{asChild:st,...ut}=rt,ht=st?Slot:et;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),jsxRuntimeExports.jsx(ht,{...ut,ref:it})});return tt.displayName=`Primitive.${et}`,{..._e,[et]:tt}},{});function dispatchDiscreteCustomEvent(_e,et){_e&&reactDomExports.flushSync(()=>_e.dispatchEvent(et))}var NAME$3="Label",Label$3=reactExports.forwardRef((_e,et)=>jsxRuntimeExports.jsx(Primitive.label,{..._e,ref:et,onMouseDown:tt=>{var it;tt.target.closest("button, input, select, textarea")||((it=_e.onMouseDown)==null||it.call(_e,tt),!tt.defaultPrevented&&tt.detail>1&&tt.preventDefault())}}));Label$3.displayName=NAME$3;var Root$8=Label$3;const labelVariants=cva("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Label$2=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Root$8,{ref:tt,className:cn(labelVariants(),_e),...et}));Label$2.displayName=Root$8.displayName;const Form=FormProvider,FormFieldContext=reactExports.createContext({}),FormField=({..._e})=>jsxRuntimeExports.jsx(FormFieldContext.Provider,{value:{name:_e.name},children:jsxRuntimeExports.jsx(Controller,{..._e})}),useFormField=()=>{const _e=reactExports.useContext(FormFieldContext),et=reactExports.useContext(FormItemContext),{getFieldState:tt,formState:rt}=useFormContext(),it=tt(_e.name,rt);if(!_e)throw new Error("useFormField should be used within <FormField>");const{id:st}=et;return{id:st,name:_e.name,formItemId:`${st}-form-item`,formDescriptionId:`${st}-form-item-description`,formMessageId:`${st}-form-item-message`,...it}},FormItemContext=reactExports.createContext({}),FormItem=reactExports.forwardRef(({className:_e,...et},tt)=>{const rt=reactExports.useId();return jsxRuntimeExports.jsx(FormItemContext.Provider,{value:{id:rt},children:jsxRuntimeExports.jsx("div",{ref:tt,className:cn("space-y-2",_e),...et})})});FormItem.displayName="FormItem";const FormLabel=reactExports.forwardRef(({className:_e,...et},tt)=>{const{error:rt,formItemId:it}=useFormField();return jsxRuntimeExports.jsx(Label$2,{ref:tt,className:cn(rt&&"text-destructive",_e),htmlFor:it,...et})});FormLabel.displayName="FormLabel";const FormControl=reactExports.forwardRef(({..._e},et)=>{const{error:tt,formItemId:rt,formDescriptionId:it,formMessageId:st}=useFormField();return jsxRuntimeExports.jsx(Slot,{ref:et,id:rt,"aria-describedby":tt?`${it} ${st}`:`${it}`,"aria-invalid":!!tt,..._e})});FormControl.displayName="FormControl";const FormDescription=reactExports.forwardRef(({className:_e,...et},tt)=>{const{formDescriptionId:rt}=useFormField();return jsxRuntimeExports.jsx("p",{ref:tt,id:rt,className:cn("text-sm text-muted-foreground",_e),...et})});FormDescription.displayName="FormDescription";const FormMessage=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>{const{error:it,formMessageId:st}=useFormField(),ut=it?String(it==null?void 0:it.message):et;return ut?jsxRuntimeExports.jsx("p",{ref:rt,id:st,className:cn("text-sm font-medium text-destructive",_e),...tt,children:ut}):null});FormMessage.displayName="FormMessage";const Input=reactExports.forwardRef(({className:_e,type:et,...tt},rt)=>jsxRuntimeExports.jsx("input",{type:et,className:cn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none  focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",_e),ref:rt,...tt}));Input.displayName="Input";function formatLabel(_e){return _e.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ").replace(/\b\w/g,et=>et.toUpperCase())}const FormInput=({classContent:_e,name:et,type:tt="text",placeholder:rt,form:it,autoFocus:st=!1,isDisable:ut})=>jsxRuntimeExports.jsx(FormField,{control:it.control,name:et,render:({field:ht})=>jsxRuntimeExports.jsxs(FormItem,{className:cn("relative",_e),children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{autoFocus:st,placeholder:rt,disabled:ut,...it.register(et),...ht,type:tt,className:cn("peer w-full rounded-md border border-gray-300 px-3 py-2 placeholder-transparent focus:outline-none outline-none",tt==="password"?"tracking-[0.2rem] text-[lg]":null),onChange:at=>{const gt=at.target.value;tt==="number"?(!isNaN(Number(gt))||gt==="")&&ht.onChange(gt):ht.onChange(gt)}})}),jsxRuntimeExports.jsx(FormLabel,{className:"absolute font-normal bg-white blur-10 w-fit px-2 -top-5 py-1 rounded left-3 peer-focus:font-semibold",children:formatLabel(et)}),jsxRuntimeExports.jsx(FormDescription,{}),jsxRuntimeExports.jsx(FormMessage,{})]})});var util;(function(_e){_e.assertEqual=it=>it;function et(it){}_e.assertIs=et;function tt(it){throw new Error}_e.assertNever=tt,_e.arrayToEnum=it=>{const st={};for(const ut of it)st[ut]=ut;return st},_e.getValidEnumValues=it=>{const st=_e.objectKeys(it).filter(ht=>typeof it[it[ht]]!="number"),ut={};for(const ht of st)ut[ht]=it[ht];return _e.objectValues(ut)},_e.objectValues=it=>_e.objectKeys(it).map(function(st){return it[st]}),_e.objectKeys=typeof Object.keys=="function"?it=>Object.keys(it):it=>{const st=[];for(const ut in it)Object.prototype.hasOwnProperty.call(it,ut)&&st.push(ut);return st},_e.find=(it,st)=>{for(const ut of it)if(st(ut))return ut},_e.isInteger=typeof Number.isInteger=="function"?it=>Number.isInteger(it):it=>typeof it=="number"&&isFinite(it)&&Math.floor(it)===it;function rt(it,st=" | "){return it.map(ut=>typeof ut=="string"?`'${ut}'`:ut).join(st)}_e.joinValues=rt,_e.jsonStringifyReplacer=(it,st)=>typeof st=="bigint"?st.toString():st})(util||(util={}));var objectUtil;(function(_e){_e.mergeShapes=(et,tt)=>({...et,...tt})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=_e=>{switch(typeof _e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(_e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(_e)?ZodParsedType.array:_e===null?ZodParsedType.null:_e.then&&typeof _e.then=="function"&&_e.catch&&typeof _e.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&_e instanceof Map?ZodParsedType.map:typeof Set<"u"&&_e instanceof Set?ZodParsedType.set:typeof Date<"u"&&_e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=_e=>JSON.stringify(_e,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(et){super(),this.issues=[],this.addIssue=rt=>{this.issues=[...this.issues,rt]},this.addIssues=(rt=[])=>{this.issues=[...this.issues,...rt]};const tt=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,tt):this.__proto__=tt,this.name="ZodError",this.issues=et}get errors(){return this.issues}format(et){const tt=et||function(st){return st.message},rt={_errors:[]},it=st=>{for(const ut of st.issues)if(ut.code==="invalid_union")ut.unionErrors.map(it);else if(ut.code==="invalid_return_type")it(ut.returnTypeError);else if(ut.code==="invalid_arguments")it(ut.argumentsError);else if(ut.path.length===0)rt._errors.push(tt(ut));else{let ht=rt,at=0;for(;at<ut.path.length;){const gt=ut.path[at];at===ut.path.length-1?(ht[gt]=ht[gt]||{_errors:[]},ht[gt]._errors.push(tt(ut))):ht[gt]=ht[gt]||{_errors:[]},ht=ht[gt],at++}}};return it(this),rt}static assert(et){if(!(et instanceof ZodError))throw new Error(`Not a ZodError: ${et}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(et=tt=>tt.message){const tt={},rt=[];for(const it of this.issues)it.path.length>0?(tt[it.path[0]]=tt[it.path[0]]||[],tt[it.path[0]].push(et(it))):rt.push(et(it));return{formErrors:rt,fieldErrors:tt}}get formErrors(){return this.flatten()}}ZodError.create=_e=>new ZodError(_e);const errorMap=(_e,et)=>{let tt;switch(_e.code){case ZodIssueCode.invalid_type:_e.received===ZodParsedType.undefined?tt="Required":tt=`Expected ${_e.expected}, received ${_e.received}`;break;case ZodIssueCode.invalid_literal:tt=`Invalid literal value, expected ${JSON.stringify(_e.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:tt=`Unrecognized key(s) in object: ${util.joinValues(_e.keys,", ")}`;break;case ZodIssueCode.invalid_union:tt="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:tt=`Invalid discriminator value. Expected ${util.joinValues(_e.options)}`;break;case ZodIssueCode.invalid_enum_value:tt=`Invalid enum value. Expected ${util.joinValues(_e.options)}, received '${_e.received}'`;break;case ZodIssueCode.invalid_arguments:tt="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:tt="Invalid function return type";break;case ZodIssueCode.invalid_date:tt="Invalid date";break;case ZodIssueCode.invalid_string:typeof _e.validation=="object"?"includes"in _e.validation?(tt=`Invalid input: must include "${_e.validation.includes}"`,typeof _e.validation.position=="number"&&(tt=`${tt} at one or more positions greater than or equal to ${_e.validation.position}`)):"startsWith"in _e.validation?tt=`Invalid input: must start with "${_e.validation.startsWith}"`:"endsWith"in _e.validation?tt=`Invalid input: must end with "${_e.validation.endsWith}"`:util.assertNever(_e.validation):_e.validation!=="regex"?tt=`Invalid ${_e.validation}`:tt="Invalid";break;case ZodIssueCode.too_small:_e.type==="array"?tt=`Array must contain ${_e.exact?"exactly":_e.inclusive?"at least":"more than"} ${_e.minimum} element(s)`:_e.type==="string"?tt=`String must contain ${_e.exact?"exactly":_e.inclusive?"at least":"over"} ${_e.minimum} character(s)`:_e.type==="number"?tt=`Number must be ${_e.exact?"exactly equal to ":_e.inclusive?"greater than or equal to ":"greater than "}${_e.minimum}`:_e.type==="date"?tt=`Date must be ${_e.exact?"exactly equal to ":_e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(_e.minimum))}`:tt="Invalid input";break;case ZodIssueCode.too_big:_e.type==="array"?tt=`Array must contain ${_e.exact?"exactly":_e.inclusive?"at most":"less than"} ${_e.maximum} element(s)`:_e.type==="string"?tt=`String must contain ${_e.exact?"exactly":_e.inclusive?"at most":"under"} ${_e.maximum} character(s)`:_e.type==="number"?tt=`Number must be ${_e.exact?"exactly":_e.inclusive?"less than or equal to":"less than"} ${_e.maximum}`:_e.type==="bigint"?tt=`BigInt must be ${_e.exact?"exactly":_e.inclusive?"less than or equal to":"less than"} ${_e.maximum}`:_e.type==="date"?tt=`Date must be ${_e.exact?"exactly":_e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(_e.maximum))}`:tt="Invalid input";break;case ZodIssueCode.custom:tt="Invalid input";break;case ZodIssueCode.invalid_intersection_types:tt="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:tt=`Number must be a multiple of ${_e.multipleOf}`;break;case ZodIssueCode.not_finite:tt="Number must be finite";break;default:tt=et.defaultError,util.assertNever(_e)}return{message:tt}};let overrideErrorMap=errorMap;function setErrorMap(_e){overrideErrorMap=_e}function getErrorMap(){return overrideErrorMap}const makeIssue=_e=>{const{data:et,path:tt,errorMaps:rt,issueData:it}=_e,st=[...tt,...it.path||[]],ut={...it,path:st};if(it.message!==void 0)return{...it,path:st,message:it.message};let ht="";const at=rt.filter(gt=>!!gt).slice().reverse();for(const gt of at)ht=gt(ut,{data:et,defaultError:ht}).message;return{...it,path:st,message:ht}},EMPTY_PATH=[];function addIssueToContext(_e,et){const tt=getErrorMap(),rt=makeIssue({issueData:et,data:_e.data,path:_e.path,errorMaps:[_e.common.contextualErrorMap,_e.schemaErrorMap,tt,tt===errorMap?void 0:errorMap].filter(it=>!!it)});_e.common.issues.push(rt)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(et,tt){const rt=[];for(const it of tt){if(it.status==="aborted")return INVALID;it.status==="dirty"&&et.dirty(),rt.push(it.value)}return{status:et.value,value:rt}}static async mergeObjectAsync(et,tt){const rt=[];for(const it of tt){const st=await it.key,ut=await it.value;rt.push({key:st,value:ut})}return ParseStatus.mergeObjectSync(et,rt)}static mergeObjectSync(et,tt){const rt={};for(const it of tt){const{key:st,value:ut}=it;if(st.status==="aborted"||ut.status==="aborted")return INVALID;st.status==="dirty"&&et.dirty(),ut.status==="dirty"&&et.dirty(),st.value!=="__proto__"&&(typeof ut.value<"u"||it.alwaysSet)&&(rt[st.value]=ut.value)}return{status:et.value,value:rt}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=_e=>({status:"dirty",value:_e}),OK=_e=>({status:"valid",value:_e}),isAborted=_e=>_e.status==="aborted",isDirty=_e=>_e.status==="dirty",isValid$1=_e=>_e.status==="valid",isAsync=_e=>typeof Promise<"u"&&_e instanceof Promise;function __classPrivateFieldGet(_e,et,tt,rt){if(typeof et=="function"?_e!==et||!rt:!et.has(_e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return et.get(_e)}function __classPrivateFieldSet(_e,et,tt,rt,it){if(typeof et=="function"?_e!==et||!it:!et.has(_e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return et.set(_e,tt),tt}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(_e){_e.errToObj=et=>typeof et=="string"?{message:et}:et||{},_e.toString=et=>typeof et=="string"?et:et==null?void 0:et.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(et,tt,rt,it){this._cachedPath=[],this.parent=et,this.data=tt,this._path=rt,this._key=it}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(_e,et)=>{if(isValid$1(et))return{success:!0,data:et.value};if(!_e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const tt=new ZodError(_e.common.issues);return this._error=tt,this._error}}};function processCreateParams(_e){if(!_e)return{};const{errorMap:et,invalid_type_error:tt,required_error:rt,description:it}=_e;if(et&&(tt||rt))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return et?{errorMap:et,description:it}:{errorMap:(ut,ht)=>{var at,gt;const{message:bt}=_e;return ut.code==="invalid_enum_value"?{message:bt??ht.defaultError}:typeof ht.data>"u"?{message:(at=bt??rt)!==null&&at!==void 0?at:ht.defaultError}:ut.code!=="invalid_type"?{message:ht.defaultError}:{message:(gt=bt??tt)!==null&&gt!==void 0?gt:ht.defaultError}},description:it}}class ZodType{constructor(et){this.spa=this.safeParseAsync,this._def=et,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(et){return getParsedType(et.data)}_getOrReturnCtx(et,tt){return tt||{common:et.parent.common,data:et.data,parsedType:getParsedType(et.data),schemaErrorMap:this._def.errorMap,path:et.path,parent:et.parent}}_processInputParams(et){return{status:new ParseStatus,ctx:{common:et.parent.common,data:et.data,parsedType:getParsedType(et.data),schemaErrorMap:this._def.errorMap,path:et.path,parent:et.parent}}}_parseSync(et){const tt=this._parse(et);if(isAsync(tt))throw new Error("Synchronous parse encountered promise.");return tt}_parseAsync(et){const tt=this._parse(et);return Promise.resolve(tt)}parse(et,tt){const rt=this.safeParse(et,tt);if(rt.success)return rt.data;throw rt.error}safeParse(et,tt){var rt;const it={common:{issues:[],async:(rt=tt==null?void 0:tt.async)!==null&&rt!==void 0?rt:!1,contextualErrorMap:tt==null?void 0:tt.errorMap},path:(tt==null?void 0:tt.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:et,parsedType:getParsedType(et)},st=this._parseSync({data:et,path:it.path,parent:it});return handleResult(it,st)}async parseAsync(et,tt){const rt=await this.safeParseAsync(et,tt);if(rt.success)return rt.data;throw rt.error}async safeParseAsync(et,tt){const rt={common:{issues:[],contextualErrorMap:tt==null?void 0:tt.errorMap,async:!0},path:(tt==null?void 0:tt.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:et,parsedType:getParsedType(et)},it=this._parse({data:et,path:rt.path,parent:rt}),st=await(isAsync(it)?it:Promise.resolve(it));return handleResult(rt,st)}refine(et,tt){const rt=it=>typeof tt=="string"||typeof tt>"u"?{message:tt}:typeof tt=="function"?tt(it):tt;return this._refinement((it,st)=>{const ut=et(it),ht=()=>st.addIssue({code:ZodIssueCode.custom,...rt(it)});return typeof Promise<"u"&&ut instanceof Promise?ut.then(at=>at?!0:(ht(),!1)):ut?!0:(ht(),!1)})}refinement(et,tt){return this._refinement((rt,it)=>et(rt)?!0:(it.addIssue(typeof tt=="function"?tt(rt,it):tt),!1))}_refinement(et){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:et}})}superRefine(et){return this._refinement(et)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(et){return ZodUnion.create([this,et],this._def)}and(et){return ZodIntersection.create(this,et,this._def)}transform(et){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:et}})}default(et){const tt=typeof et=="function"?et:()=>et;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:tt,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(et){const tt=typeof et=="function"?et:()=>et;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:tt,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(et){const tt=this.constructor;return new tt({...this._def,description:et})}pipe(et){return ZodPipeline.create(this,et)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(_e){let et="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return _e.precision?et=`${et}\\.\\d{${_e.precision}}`:_e.precision==null&&(et=`${et}(\\.\\d+)?`),et}function timeRegex(_e){return new RegExp(`^${timeRegexSource(_e)}$`)}function datetimeRegex(_e){let et=`${dateRegexSource}T${timeRegexSource(_e)}`;const tt=[];return tt.push(_e.local?"Z?":"Z"),_e.offset&&tt.push("([+-]\\d{2}:?\\d{2})"),et=`${et}(${tt.join("|")})`,new RegExp(`^${et}$`)}function isValidIP(_e,et){return!!((et==="v4"||!et)&&ipv4Regex.test(_e)||(et==="v6"||!et)&&ipv6Regex.test(_e))}class ZodString extends ZodType{_parse(et){if(this._def.coerce&&(et.data=String(et.data)),this._getType(et)!==ZodParsedType.string){const st=this._getOrReturnCtx(et);return addIssueToContext(st,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:st.parsedType}),INVALID}const rt=new ParseStatus;let it;for(const st of this._def.checks)if(st.kind==="min")et.data.length<st.value&&(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.too_small,minimum:st.value,type:"string",inclusive:!0,exact:!1,message:st.message}),rt.dirty());else if(st.kind==="max")et.data.length>st.value&&(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.too_big,maximum:st.value,type:"string",inclusive:!0,exact:!1,message:st.message}),rt.dirty());else if(st.kind==="length"){const ut=et.data.length>st.value,ht=et.data.length<st.value;(ut||ht)&&(it=this._getOrReturnCtx(et,it),ut?addIssueToContext(it,{code:ZodIssueCode.too_big,maximum:st.value,type:"string",inclusive:!0,exact:!0,message:st.message}):ht&&addIssueToContext(it,{code:ZodIssueCode.too_small,minimum:st.value,type:"string",inclusive:!0,exact:!0,message:st.message}),rt.dirty())}else if(st.kind==="email")emailRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"email",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"emoji",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="uuid")uuidRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"uuid",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="nanoid")nanoidRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="cuid")cuidRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"cuid",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="cuid2")cuid2Regex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="ulid")ulidRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"ulid",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty());else if(st.kind==="url")try{new URL(et.data)}catch{it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"url",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty()}else st.kind==="regex"?(st.regex.lastIndex=0,st.regex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"regex",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty())):st.kind==="trim"?et.data=et.data.trim():st.kind==="includes"?et.data.includes(st.value,st.position)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:{includes:st.value,position:st.position},message:st.message}),rt.dirty()):st.kind==="toLowerCase"?et.data=et.data.toLowerCase():st.kind==="toUpperCase"?et.data=et.data.toUpperCase():st.kind==="startsWith"?et.data.startsWith(st.value)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:{startsWith:st.value},message:st.message}),rt.dirty()):st.kind==="endsWith"?et.data.endsWith(st.value)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:{endsWith:st.value},message:st.message}),rt.dirty()):st.kind==="datetime"?datetimeRegex(st).test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:"datetime",message:st.message}),rt.dirty()):st.kind==="date"?dateRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:"date",message:st.message}),rt.dirty()):st.kind==="time"?timeRegex(st).test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.invalid_string,validation:"time",message:st.message}),rt.dirty()):st.kind==="duration"?durationRegex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"duration",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty()):st.kind==="ip"?isValidIP(et.data,st.version)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"ip",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty()):st.kind==="base64"?base64Regex.test(et.data)||(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{validation:"base64",code:ZodIssueCode.invalid_string,message:st.message}),rt.dirty()):util.assertNever(st);return{status:rt.value,value:et.data}}_regex(et,tt,rt){return this.refinement(it=>et.test(it),{validation:tt,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(rt)})}_addCheck(et){return new ZodString({...this._def,checks:[...this._def.checks,et]})}email(et){return this._addCheck({kind:"email",...errorUtil.errToObj(et)})}url(et){return this._addCheck({kind:"url",...errorUtil.errToObj(et)})}emoji(et){return this._addCheck({kind:"emoji",...errorUtil.errToObj(et)})}uuid(et){return this._addCheck({kind:"uuid",...errorUtil.errToObj(et)})}nanoid(et){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(et)})}cuid(et){return this._addCheck({kind:"cuid",...errorUtil.errToObj(et)})}cuid2(et){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(et)})}ulid(et){return this._addCheck({kind:"ulid",...errorUtil.errToObj(et)})}base64(et){return this._addCheck({kind:"base64",...errorUtil.errToObj(et)})}ip(et){return this._addCheck({kind:"ip",...errorUtil.errToObj(et)})}datetime(et){var tt,rt;return typeof et=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:et}):this._addCheck({kind:"datetime",precision:typeof(et==null?void 0:et.precision)>"u"?null:et==null?void 0:et.precision,offset:(tt=et==null?void 0:et.offset)!==null&&tt!==void 0?tt:!1,local:(rt=et==null?void 0:et.local)!==null&&rt!==void 0?rt:!1,...errorUtil.errToObj(et==null?void 0:et.message)})}date(et){return this._addCheck({kind:"date",message:et})}time(et){return typeof et=="string"?this._addCheck({kind:"time",precision:null,message:et}):this._addCheck({kind:"time",precision:typeof(et==null?void 0:et.precision)>"u"?null:et==null?void 0:et.precision,...errorUtil.errToObj(et==null?void 0:et.message)})}duration(et){return this._addCheck({kind:"duration",...errorUtil.errToObj(et)})}regex(et,tt){return this._addCheck({kind:"regex",regex:et,...errorUtil.errToObj(tt)})}includes(et,tt){return this._addCheck({kind:"includes",value:et,position:tt==null?void 0:tt.position,...errorUtil.errToObj(tt==null?void 0:tt.message)})}startsWith(et,tt){return this._addCheck({kind:"startsWith",value:et,...errorUtil.errToObj(tt)})}endsWith(et,tt){return this._addCheck({kind:"endsWith",value:et,...errorUtil.errToObj(tt)})}min(et,tt){return this._addCheck({kind:"min",value:et,...errorUtil.errToObj(tt)})}max(et,tt){return this._addCheck({kind:"max",value:et,...errorUtil.errToObj(tt)})}length(et,tt){return this._addCheck({kind:"length",value:et,...errorUtil.errToObj(tt)})}nonempty(et){return this.min(1,errorUtil.errToObj(et))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(et=>et.kind==="datetime")}get isDate(){return!!this._def.checks.find(et=>et.kind==="date")}get isTime(){return!!this._def.checks.find(et=>et.kind==="time")}get isDuration(){return!!this._def.checks.find(et=>et.kind==="duration")}get isEmail(){return!!this._def.checks.find(et=>et.kind==="email")}get isURL(){return!!this._def.checks.find(et=>et.kind==="url")}get isEmoji(){return!!this._def.checks.find(et=>et.kind==="emoji")}get isUUID(){return!!this._def.checks.find(et=>et.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(et=>et.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(et=>et.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(et=>et.kind==="cuid2")}get isULID(){return!!this._def.checks.find(et=>et.kind==="ulid")}get isIP(){return!!this._def.checks.find(et=>et.kind==="ip")}get isBase64(){return!!this._def.checks.find(et=>et.kind==="base64")}get minLength(){let et=null;for(const tt of this._def.checks)tt.kind==="min"&&(et===null||tt.value>et)&&(et=tt.value);return et}get maxLength(){let et=null;for(const tt of this._def.checks)tt.kind==="max"&&(et===null||tt.value<et)&&(et=tt.value);return et}}ZodString.create=_e=>{var et;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(et=_e==null?void 0:_e.coerce)!==null&&et!==void 0?et:!1,...processCreateParams(_e)})};function floatSafeRemainder(_e,et){const tt=(_e.toString().split(".")[1]||"").length,rt=(et.toString().split(".")[1]||"").length,it=tt>rt?tt:rt,st=parseInt(_e.toFixed(it).replace(".","")),ut=parseInt(et.toFixed(it).replace(".",""));return st%ut/Math.pow(10,it)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(et){if(this._def.coerce&&(et.data=Number(et.data)),this._getType(et)!==ZodParsedType.number){const st=this._getOrReturnCtx(et);return addIssueToContext(st,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:st.parsedType}),INVALID}let rt;const it=new ParseStatus;for(const st of this._def.checks)st.kind==="int"?util.isInteger(et.data)||(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:st.message}),it.dirty()):st.kind==="min"?(st.inclusive?et.data<st.value:et.data<=st.value)&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.too_small,minimum:st.value,type:"number",inclusive:st.inclusive,exact:!1,message:st.message}),it.dirty()):st.kind==="max"?(st.inclusive?et.data>st.value:et.data>=st.value)&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.too_big,maximum:st.value,type:"number",inclusive:st.inclusive,exact:!1,message:st.message}),it.dirty()):st.kind==="multipleOf"?floatSafeRemainder(et.data,st.value)!==0&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.not_multiple_of,multipleOf:st.value,message:st.message}),it.dirty()):st.kind==="finite"?Number.isFinite(et.data)||(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.not_finite,message:st.message}),it.dirty()):util.assertNever(st);return{status:it.value,value:et.data}}gte(et,tt){return this.setLimit("min",et,!0,errorUtil.toString(tt))}gt(et,tt){return this.setLimit("min",et,!1,errorUtil.toString(tt))}lte(et,tt){return this.setLimit("max",et,!0,errorUtil.toString(tt))}lt(et,tt){return this.setLimit("max",et,!1,errorUtil.toString(tt))}setLimit(et,tt,rt,it){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:et,value:tt,inclusive:rt,message:errorUtil.toString(it)}]})}_addCheck(et){return new ZodNumber({...this._def,checks:[...this._def.checks,et]})}int(et){return this._addCheck({kind:"int",message:errorUtil.toString(et)})}positive(et){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(et)})}negative(et){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(et)})}nonpositive(et){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(et)})}nonnegative(et){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(et)})}multipleOf(et,tt){return this._addCheck({kind:"multipleOf",value:et,message:errorUtil.toString(tt)})}finite(et){return this._addCheck({kind:"finite",message:errorUtil.toString(et)})}safe(et){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(et)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(et)})}get minValue(){let et=null;for(const tt of this._def.checks)tt.kind==="min"&&(et===null||tt.value>et)&&(et=tt.value);return et}get maxValue(){let et=null;for(const tt of this._def.checks)tt.kind==="max"&&(et===null||tt.value<et)&&(et=tt.value);return et}get isInt(){return!!this._def.checks.find(et=>et.kind==="int"||et.kind==="multipleOf"&&util.isInteger(et.value))}get isFinite(){let et=null,tt=null;for(const rt of this._def.checks){if(rt.kind==="finite"||rt.kind==="int"||rt.kind==="multipleOf")return!0;rt.kind==="min"?(tt===null||rt.value>tt)&&(tt=rt.value):rt.kind==="max"&&(et===null||rt.value<et)&&(et=rt.value)}return Number.isFinite(tt)&&Number.isFinite(et)}}ZodNumber.create=_e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(_e==null?void 0:_e.coerce)||!1,...processCreateParams(_e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(et){if(this._def.coerce&&(et.data=BigInt(et.data)),this._getType(et)!==ZodParsedType.bigint){const st=this._getOrReturnCtx(et);return addIssueToContext(st,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:st.parsedType}),INVALID}let rt;const it=new ParseStatus;for(const st of this._def.checks)st.kind==="min"?(st.inclusive?et.data<st.value:et.data<=st.value)&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.too_small,type:"bigint",minimum:st.value,inclusive:st.inclusive,message:st.message}),it.dirty()):st.kind==="max"?(st.inclusive?et.data>st.value:et.data>=st.value)&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.too_big,type:"bigint",maximum:st.value,inclusive:st.inclusive,message:st.message}),it.dirty()):st.kind==="multipleOf"?et.data%st.value!==BigInt(0)&&(rt=this._getOrReturnCtx(et,rt),addIssueToContext(rt,{code:ZodIssueCode.not_multiple_of,multipleOf:st.value,message:st.message}),it.dirty()):util.assertNever(st);return{status:it.value,value:et.data}}gte(et,tt){return this.setLimit("min",et,!0,errorUtil.toString(tt))}gt(et,tt){return this.setLimit("min",et,!1,errorUtil.toString(tt))}lte(et,tt){return this.setLimit("max",et,!0,errorUtil.toString(tt))}lt(et,tt){return this.setLimit("max",et,!1,errorUtil.toString(tt))}setLimit(et,tt,rt,it){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:et,value:tt,inclusive:rt,message:errorUtil.toString(it)}]})}_addCheck(et){return new ZodBigInt({...this._def,checks:[...this._def.checks,et]})}positive(et){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(et)})}negative(et){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(et)})}nonpositive(et){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(et)})}nonnegative(et){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(et)})}multipleOf(et,tt){return this._addCheck({kind:"multipleOf",value:et,message:errorUtil.toString(tt)})}get minValue(){let et=null;for(const tt of this._def.checks)tt.kind==="min"&&(et===null||tt.value>et)&&(et=tt.value);return et}get maxValue(){let et=null;for(const tt of this._def.checks)tt.kind==="max"&&(et===null||tt.value<et)&&(et=tt.value);return et}}ZodBigInt.create=_e=>{var et;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(et=_e==null?void 0:_e.coerce)!==null&&et!==void 0?et:!1,...processCreateParams(_e)})};class ZodBoolean extends ZodType{_parse(et){if(this._def.coerce&&(et.data=!!et.data),this._getType(et)!==ZodParsedType.boolean){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:rt.parsedType}),INVALID}return OK(et.data)}}ZodBoolean.create=_e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(_e==null?void 0:_e.coerce)||!1,...processCreateParams(_e)});class ZodDate extends ZodType{_parse(et){if(this._def.coerce&&(et.data=new Date(et.data)),this._getType(et)!==ZodParsedType.date){const st=this._getOrReturnCtx(et);return addIssueToContext(st,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:st.parsedType}),INVALID}if(isNaN(et.data.getTime())){const st=this._getOrReturnCtx(et);return addIssueToContext(st,{code:ZodIssueCode.invalid_date}),INVALID}const rt=new ParseStatus;let it;for(const st of this._def.checks)st.kind==="min"?et.data.getTime()<st.value&&(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.too_small,message:st.message,inclusive:!0,exact:!1,minimum:st.value,type:"date"}),rt.dirty()):st.kind==="max"?et.data.getTime()>st.value&&(it=this._getOrReturnCtx(et,it),addIssueToContext(it,{code:ZodIssueCode.too_big,message:st.message,inclusive:!0,exact:!1,maximum:st.value,type:"date"}),rt.dirty()):util.assertNever(st);return{status:rt.value,value:new Date(et.data.getTime())}}_addCheck(et){return new ZodDate({...this._def,checks:[...this._def.checks,et]})}min(et,tt){return this._addCheck({kind:"min",value:et.getTime(),message:errorUtil.toString(tt)})}max(et,tt){return this._addCheck({kind:"max",value:et.getTime(),message:errorUtil.toString(tt)})}get minDate(){let et=null;for(const tt of this._def.checks)tt.kind==="min"&&(et===null||tt.value>et)&&(et=tt.value);return et!=null?new Date(et):null}get maxDate(){let et=null;for(const tt of this._def.checks)tt.kind==="max"&&(et===null||tt.value<et)&&(et=tt.value);return et!=null?new Date(et):null}}ZodDate.create=_e=>new ZodDate({checks:[],coerce:(_e==null?void 0:_e.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(_e)});class ZodSymbol extends ZodType{_parse(et){if(this._getType(et)!==ZodParsedType.symbol){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:rt.parsedType}),INVALID}return OK(et.data)}}ZodSymbol.create=_e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(_e)});class ZodUndefined extends ZodType{_parse(et){if(this._getType(et)!==ZodParsedType.undefined){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:rt.parsedType}),INVALID}return OK(et.data)}}ZodUndefined.create=_e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(_e)});class ZodNull extends ZodType{_parse(et){if(this._getType(et)!==ZodParsedType.null){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:rt.parsedType}),INVALID}return OK(et.data)}}ZodNull.create=_e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(_e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(et){return OK(et.data)}}ZodAny.create=_e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(_e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(et){return OK(et.data)}}ZodUnknown.create=_e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(_e)});class ZodNever extends ZodType{_parse(et){const tt=this._getOrReturnCtx(et);return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:tt.parsedType}),INVALID}}ZodNever.create=_e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(_e)});class ZodVoid extends ZodType{_parse(et){if(this._getType(et)!==ZodParsedType.undefined){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:rt.parsedType}),INVALID}return OK(et.data)}}ZodVoid.create=_e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(_e)});class ZodArray extends ZodType{_parse(et){const{ctx:tt,status:rt}=this._processInputParams(et),it=this._def;if(tt.parsedType!==ZodParsedType.array)return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:tt.parsedType}),INVALID;if(it.exactLength!==null){const ut=tt.data.length>it.exactLength.value,ht=tt.data.length<it.exactLength.value;(ut||ht)&&(addIssueToContext(tt,{code:ut?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:ht?it.exactLength.value:void 0,maximum:ut?it.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:it.exactLength.message}),rt.dirty())}if(it.minLength!==null&&tt.data.length<it.minLength.value&&(addIssueToContext(tt,{code:ZodIssueCode.too_small,minimum:it.minLength.value,type:"array",inclusive:!0,exact:!1,message:it.minLength.message}),rt.dirty()),it.maxLength!==null&&tt.data.length>it.maxLength.value&&(addIssueToContext(tt,{code:ZodIssueCode.too_big,maximum:it.maxLength.value,type:"array",inclusive:!0,exact:!1,message:it.maxLength.message}),rt.dirty()),tt.common.async)return Promise.all([...tt.data].map((ut,ht)=>it.type._parseAsync(new ParseInputLazyPath(tt,ut,tt.path,ht)))).then(ut=>ParseStatus.mergeArray(rt,ut));const st=[...tt.data].map((ut,ht)=>it.type._parseSync(new ParseInputLazyPath(tt,ut,tt.path,ht)));return ParseStatus.mergeArray(rt,st)}get element(){return this._def.type}min(et,tt){return new ZodArray({...this._def,minLength:{value:et,message:errorUtil.toString(tt)}})}max(et,tt){return new ZodArray({...this._def,maxLength:{value:et,message:errorUtil.toString(tt)}})}length(et,tt){return new ZodArray({...this._def,exactLength:{value:et,message:errorUtil.toString(tt)}})}nonempty(et){return this.min(1,et)}}ZodArray.create=(_e,et)=>new ZodArray({type:_e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(et)});function deepPartialify(_e){if(_e instanceof ZodObject){const et={};for(const tt in _e.shape){const rt=_e.shape[tt];et[tt]=ZodOptional.create(deepPartialify(rt))}return new ZodObject({..._e._def,shape:()=>et})}else return _e instanceof ZodArray?new ZodArray({..._e._def,type:deepPartialify(_e.element)}):_e instanceof ZodOptional?ZodOptional.create(deepPartialify(_e.unwrap())):_e instanceof ZodNullable?ZodNullable.create(deepPartialify(_e.unwrap())):_e instanceof ZodTuple?ZodTuple.create(_e.items.map(et=>deepPartialify(et))):_e}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const et=this._def.shape(),tt=util.objectKeys(et);return this._cached={shape:et,keys:tt}}_parse(et){if(this._getType(et)!==ZodParsedType.object){const gt=this._getOrReturnCtx(et);return addIssueToContext(gt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:gt.parsedType}),INVALID}const{status:rt,ctx:it}=this._processInputParams(et),{shape:st,keys:ut}=this._getCached(),ht=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const gt in it.data)ut.includes(gt)||ht.push(gt);const at=[];for(const gt of ut){const bt=st[gt],wt=it.data[gt];at.push({key:{status:"valid",value:gt},value:bt._parse(new ParseInputLazyPath(it,wt,it.path,gt)),alwaysSet:gt in it.data})}if(this._def.catchall instanceof ZodNever){const gt=this._def.unknownKeys;if(gt==="passthrough")for(const bt of ht)at.push({key:{status:"valid",value:bt},value:{status:"valid",value:it.data[bt]}});else if(gt==="strict")ht.length>0&&(addIssueToContext(it,{code:ZodIssueCode.unrecognized_keys,keys:ht}),rt.dirty());else if(gt!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const gt=this._def.catchall;for(const bt of ht){const wt=it.data[bt];at.push({key:{status:"valid",value:bt},value:gt._parse(new ParseInputLazyPath(it,wt,it.path,bt)),alwaysSet:bt in it.data})}}return it.common.async?Promise.resolve().then(async()=>{const gt=[];for(const bt of at){const wt=await bt.key,St=await bt.value;gt.push({key:wt,value:St,alwaysSet:bt.alwaysSet})}return gt}).then(gt=>ParseStatus.mergeObjectSync(rt,gt)):ParseStatus.mergeObjectSync(rt,at)}get shape(){return this._def.shape()}strict(et){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...et!==void 0?{errorMap:(tt,rt)=>{var it,st,ut,ht;const at=(ut=(st=(it=this._def).errorMap)===null||st===void 0?void 0:st.call(it,tt,rt).message)!==null&&ut!==void 0?ut:rt.defaultError;return tt.code==="unrecognized_keys"?{message:(ht=errorUtil.errToObj(et).message)!==null&&ht!==void 0?ht:at}:{message:at}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(et){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...et})})}merge(et){return new ZodObject({unknownKeys:et._def.unknownKeys,catchall:et._def.catchall,shape:()=>({...this._def.shape(),...et._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(et,tt){return this.augment({[et]:tt})}catchall(et){return new ZodObject({...this._def,catchall:et})}pick(et){const tt={};return util.objectKeys(et).forEach(rt=>{et[rt]&&this.shape[rt]&&(tt[rt]=this.shape[rt])}),new ZodObject({...this._def,shape:()=>tt})}omit(et){const tt={};return util.objectKeys(this.shape).forEach(rt=>{et[rt]||(tt[rt]=this.shape[rt])}),new ZodObject({...this._def,shape:()=>tt})}deepPartial(){return deepPartialify(this)}partial(et){const tt={};return util.objectKeys(this.shape).forEach(rt=>{const it=this.shape[rt];et&&!et[rt]?tt[rt]=it:tt[rt]=it.optional()}),new ZodObject({...this._def,shape:()=>tt})}required(et){const tt={};return util.objectKeys(this.shape).forEach(rt=>{if(et&&!et[rt])tt[rt]=this.shape[rt];else{let st=this.shape[rt];for(;st instanceof ZodOptional;)st=st._def.innerType;tt[rt]=st}}),new ZodObject({...this._def,shape:()=>tt})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(_e,et)=>new ZodObject({shape:()=>_e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(et)});ZodObject.strictCreate=(_e,et)=>new ZodObject({shape:()=>_e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(et)});ZodObject.lazycreate=(_e,et)=>new ZodObject({shape:_e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(et)});class ZodUnion extends ZodType{_parse(et){const{ctx:tt}=this._processInputParams(et),rt=this._def.options;function it(st){for(const ht of st)if(ht.result.status==="valid")return ht.result;for(const ht of st)if(ht.result.status==="dirty")return tt.common.issues.push(...ht.ctx.common.issues),ht.result;const ut=st.map(ht=>new ZodError(ht.ctx.common.issues));return addIssueToContext(tt,{code:ZodIssueCode.invalid_union,unionErrors:ut}),INVALID}if(tt.common.async)return Promise.all(rt.map(async st=>{const ut={...tt,common:{...tt.common,issues:[]},parent:null};return{result:await st._parseAsync({data:tt.data,path:tt.path,parent:ut}),ctx:ut}})).then(it);{let st;const ut=[];for(const at of rt){const gt={...tt,common:{...tt.common,issues:[]},parent:null},bt=at._parseSync({data:tt.data,path:tt.path,parent:gt});if(bt.status==="valid")return bt;bt.status==="dirty"&&!st&&(st={result:bt,ctx:gt}),gt.common.issues.length&&ut.push(gt.common.issues)}if(st)return tt.common.issues.push(...st.ctx.common.issues),st.result;const ht=ut.map(at=>new ZodError(at));return addIssueToContext(tt,{code:ZodIssueCode.invalid_union,unionErrors:ht}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(_e,et)=>new ZodUnion({options:_e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(et)});const getDiscriminator=_e=>_e instanceof ZodLazy?getDiscriminator(_e.schema):_e instanceof ZodEffects?getDiscriminator(_e.innerType()):_e instanceof ZodLiteral?[_e.value]:_e instanceof ZodEnum?_e.options:_e instanceof ZodNativeEnum?util.objectValues(_e.enum):_e instanceof ZodDefault?getDiscriminator(_e._def.innerType):_e instanceof ZodUndefined?[void 0]:_e instanceof ZodNull?[null]:_e instanceof ZodOptional?[void 0,...getDiscriminator(_e.unwrap())]:_e instanceof ZodNullable?[null,...getDiscriminator(_e.unwrap())]:_e instanceof ZodBranded||_e instanceof ZodReadonly?getDiscriminator(_e.unwrap()):_e instanceof ZodCatch?getDiscriminator(_e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(et){const{ctx:tt}=this._processInputParams(et);if(tt.parsedType!==ZodParsedType.object)return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:tt.parsedType}),INVALID;const rt=this.discriminator,it=tt.data[rt],st=this.optionsMap.get(it);return st?tt.common.async?st._parseAsync({data:tt.data,path:tt.path,parent:tt}):st._parseSync({data:tt.data,path:tt.path,parent:tt}):(addIssueToContext(tt,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[rt]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(et,tt,rt){const it=new Map;for(const st of tt){const ut=getDiscriminator(st.shape[et]);if(!ut.length)throw new Error(`A discriminator value for key \`${et}\` could not be extracted from all schema options`);for(const ht of ut){if(it.has(ht))throw new Error(`Discriminator property ${String(et)} has duplicate value ${String(ht)}`);it.set(ht,st)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:et,options:tt,optionsMap:it,...processCreateParams(rt)})}}function mergeValues(_e,et){const tt=getParsedType(_e),rt=getParsedType(et);if(_e===et)return{valid:!0,data:_e};if(tt===ZodParsedType.object&&rt===ZodParsedType.object){const it=util.objectKeys(et),st=util.objectKeys(_e).filter(ht=>it.indexOf(ht)!==-1),ut={..._e,...et};for(const ht of st){const at=mergeValues(_e[ht],et[ht]);if(!at.valid)return{valid:!1};ut[ht]=at.data}return{valid:!0,data:ut}}else if(tt===ZodParsedType.array&&rt===ZodParsedType.array){if(_e.length!==et.length)return{valid:!1};const it=[];for(let st=0;st<_e.length;st++){const ut=_e[st],ht=et[st],at=mergeValues(ut,ht);if(!at.valid)return{valid:!1};it.push(at.data)}return{valid:!0,data:it}}else return tt===ZodParsedType.date&&rt===ZodParsedType.date&&+_e==+et?{valid:!0,data:_e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et),it=(st,ut)=>{if(isAborted(st)||isAborted(ut))return INVALID;const ht=mergeValues(st.value,ut.value);return ht.valid?((isDirty(st)||isDirty(ut))&&tt.dirty(),{status:tt.value,value:ht.data}):(addIssueToContext(rt,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return rt.common.async?Promise.all([this._def.left._parseAsync({data:rt.data,path:rt.path,parent:rt}),this._def.right._parseAsync({data:rt.data,path:rt.path,parent:rt})]).then(([st,ut])=>it(st,ut)):it(this._def.left._parseSync({data:rt.data,path:rt.path,parent:rt}),this._def.right._parseSync({data:rt.data,path:rt.path,parent:rt}))}}ZodIntersection.create=(_e,et,tt)=>new ZodIntersection({left:_e,right:et,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(tt)});class ZodTuple extends ZodType{_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et);if(rt.parsedType!==ZodParsedType.array)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:rt.parsedType}),INVALID;if(rt.data.length<this._def.items.length)return addIssueToContext(rt,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&rt.data.length>this._def.items.length&&(addIssueToContext(rt,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),tt.dirty());const st=[...rt.data].map((ut,ht)=>{const at=this._def.items[ht]||this._def.rest;return at?at._parse(new ParseInputLazyPath(rt,ut,rt.path,ht)):null}).filter(ut=>!!ut);return rt.common.async?Promise.all(st).then(ut=>ParseStatus.mergeArray(tt,ut)):ParseStatus.mergeArray(tt,st)}get items(){return this._def.items}rest(et){return new ZodTuple({...this._def,rest:et})}}ZodTuple.create=(_e,et)=>{if(!Array.isArray(_e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:_e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(et)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et);if(rt.parsedType!==ZodParsedType.object)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:rt.parsedType}),INVALID;const it=[],st=this._def.keyType,ut=this._def.valueType;for(const ht in rt.data)it.push({key:st._parse(new ParseInputLazyPath(rt,ht,rt.path,ht)),value:ut._parse(new ParseInputLazyPath(rt,rt.data[ht],rt.path,ht)),alwaysSet:ht in rt.data});return rt.common.async?ParseStatus.mergeObjectAsync(tt,it):ParseStatus.mergeObjectSync(tt,it)}get element(){return this._def.valueType}static create(et,tt,rt){return tt instanceof ZodType?new ZodRecord({keyType:et,valueType:tt,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(rt)}):new ZodRecord({keyType:ZodString.create(),valueType:et,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(tt)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et);if(rt.parsedType!==ZodParsedType.map)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:rt.parsedType}),INVALID;const it=this._def.keyType,st=this._def.valueType,ut=[...rt.data.entries()].map(([ht,at],gt)=>({key:it._parse(new ParseInputLazyPath(rt,ht,rt.path,[gt,"key"])),value:st._parse(new ParseInputLazyPath(rt,at,rt.path,[gt,"value"]))}));if(rt.common.async){const ht=new Map;return Promise.resolve().then(async()=>{for(const at of ut){const gt=await at.key,bt=await at.value;if(gt.status==="aborted"||bt.status==="aborted")return INVALID;(gt.status==="dirty"||bt.status==="dirty")&&tt.dirty(),ht.set(gt.value,bt.value)}return{status:tt.value,value:ht}})}else{const ht=new Map;for(const at of ut){const gt=at.key,bt=at.value;if(gt.status==="aborted"||bt.status==="aborted")return INVALID;(gt.status==="dirty"||bt.status==="dirty")&&tt.dirty(),ht.set(gt.value,bt.value)}return{status:tt.value,value:ht}}}}ZodMap.create=(_e,et,tt)=>new ZodMap({valueType:et,keyType:_e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(tt)});class ZodSet extends ZodType{_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et);if(rt.parsedType!==ZodParsedType.set)return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:rt.parsedType}),INVALID;const it=this._def;it.minSize!==null&&rt.data.size<it.minSize.value&&(addIssueToContext(rt,{code:ZodIssueCode.too_small,minimum:it.minSize.value,type:"set",inclusive:!0,exact:!1,message:it.minSize.message}),tt.dirty()),it.maxSize!==null&&rt.data.size>it.maxSize.value&&(addIssueToContext(rt,{code:ZodIssueCode.too_big,maximum:it.maxSize.value,type:"set",inclusive:!0,exact:!1,message:it.maxSize.message}),tt.dirty());const st=this._def.valueType;function ut(at){const gt=new Set;for(const bt of at){if(bt.status==="aborted")return INVALID;bt.status==="dirty"&&tt.dirty(),gt.add(bt.value)}return{status:tt.value,value:gt}}const ht=[...rt.data.values()].map((at,gt)=>st._parse(new ParseInputLazyPath(rt,at,rt.path,gt)));return rt.common.async?Promise.all(ht).then(at=>ut(at)):ut(ht)}min(et,tt){return new ZodSet({...this._def,minSize:{value:et,message:errorUtil.toString(tt)}})}max(et,tt){return new ZodSet({...this._def,maxSize:{value:et,message:errorUtil.toString(tt)}})}size(et,tt){return this.min(et,tt).max(et,tt)}nonempty(et){return this.min(1,et)}}ZodSet.create=(_e,et)=>new ZodSet({valueType:_e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(et)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(et){const{ctx:tt}=this._processInputParams(et);if(tt.parsedType!==ZodParsedType.function)return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:tt.parsedType}),INVALID;function rt(ht,at){return makeIssue({data:ht,path:tt.path,errorMaps:[tt.common.contextualErrorMap,tt.schemaErrorMap,getErrorMap(),errorMap].filter(gt=>!!gt),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:at}})}function it(ht,at){return makeIssue({data:ht,path:tt.path,errorMaps:[tt.common.contextualErrorMap,tt.schemaErrorMap,getErrorMap(),errorMap].filter(gt=>!!gt),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:at}})}const st={errorMap:tt.common.contextualErrorMap},ut=tt.data;if(this._def.returns instanceof ZodPromise){const ht=this;return OK(async function(...at){const gt=new ZodError([]),bt=await ht._def.args.parseAsync(at,st).catch(kt=>{throw gt.addIssue(rt(at,kt)),gt}),wt=await Reflect.apply(ut,this,bt);return await ht._def.returns._def.type.parseAsync(wt,st).catch(kt=>{throw gt.addIssue(it(wt,kt)),gt})})}else{const ht=this;return OK(function(...at){const gt=ht._def.args.safeParse(at,st);if(!gt.success)throw new ZodError([rt(at,gt.error)]);const bt=Reflect.apply(ut,this,gt.data),wt=ht._def.returns.safeParse(bt,st);if(!wt.success)throw new ZodError([it(bt,wt.error)]);return wt.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...et){return new ZodFunction({...this._def,args:ZodTuple.create(et).rest(ZodUnknown.create())})}returns(et){return new ZodFunction({...this._def,returns:et})}implement(et){return this.parse(et)}strictImplement(et){return this.parse(et)}static create(et,tt,rt){return new ZodFunction({args:et||ZodTuple.create([]).rest(ZodUnknown.create()),returns:tt||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(rt)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(et){const{ctx:tt}=this._processInputParams(et);return this._def.getter()._parse({data:tt.data,path:tt.path,parent:tt})}}ZodLazy.create=(_e,et)=>new ZodLazy({getter:_e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(et)});class ZodLiteral extends ZodType{_parse(et){if(et.data!==this._def.value){const tt=this._getOrReturnCtx(et);return addIssueToContext(tt,{received:tt.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:et.data}}get value(){return this._def.value}}ZodLiteral.create=(_e,et)=>new ZodLiteral({value:_e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(et)});function createZodEnum(_e,et){return new ZodEnum({values:_e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(et)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(et){if(typeof et.data!="string"){const tt=this._getOrReturnCtx(et),rt=this._def.values;return addIssueToContext(tt,{expected:util.joinValues(rt),received:tt.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(et.data)){const tt=this._getOrReturnCtx(et),rt=this._def.values;return addIssueToContext(tt,{received:tt.data,code:ZodIssueCode.invalid_enum_value,options:rt}),INVALID}return OK(et.data)}get options(){return this._def.values}get enum(){const et={};for(const tt of this._def.values)et[tt]=tt;return et}get Values(){const et={};for(const tt of this._def.values)et[tt]=tt;return et}get Enum(){const et={};for(const tt of this._def.values)et[tt]=tt;return et}extract(et,tt=this._def){return ZodEnum.create(et,{...this._def,...tt})}exclude(et,tt=this._def){return ZodEnum.create(this.options.filter(rt=>!et.includes(rt)),{...this._def,...tt})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(et){const tt=util.getValidEnumValues(this._def.values),rt=this._getOrReturnCtx(et);if(rt.parsedType!==ZodParsedType.string&&rt.parsedType!==ZodParsedType.number){const it=util.objectValues(tt);return addIssueToContext(rt,{expected:util.joinValues(it),received:rt.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(et.data)){const it=util.objectValues(tt);return addIssueToContext(rt,{received:rt.data,code:ZodIssueCode.invalid_enum_value,options:it}),INVALID}return OK(et.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(_e,et)=>new ZodNativeEnum({values:_e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(et)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(et){const{ctx:tt}=this._processInputParams(et);if(tt.parsedType!==ZodParsedType.promise&&tt.common.async===!1)return addIssueToContext(tt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:tt.parsedType}),INVALID;const rt=tt.parsedType===ZodParsedType.promise?tt.data:Promise.resolve(tt.data);return OK(rt.then(it=>this._def.type.parseAsync(it,{path:tt.path,errorMap:tt.common.contextualErrorMap})))}}ZodPromise.create=(_e,et)=>new ZodPromise({type:_e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(et)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et),it=this._def.effect||null,st={addIssue:ut=>{addIssueToContext(rt,ut),ut.fatal?tt.abort():tt.dirty()},get path(){return rt.path}};if(st.addIssue=st.addIssue.bind(st),it.type==="preprocess"){const ut=it.transform(rt.data,st);if(rt.common.async)return Promise.resolve(ut).then(async ht=>{if(tt.value==="aborted")return INVALID;const at=await this._def.schema._parseAsync({data:ht,path:rt.path,parent:rt});return at.status==="aborted"?INVALID:at.status==="dirty"||tt.value==="dirty"?DIRTY(at.value):at});{if(tt.value==="aborted")return INVALID;const ht=this._def.schema._parseSync({data:ut,path:rt.path,parent:rt});return ht.status==="aborted"?INVALID:ht.status==="dirty"||tt.value==="dirty"?DIRTY(ht.value):ht}}if(it.type==="refinement"){const ut=ht=>{const at=it.refinement(ht,st);if(rt.common.async)return Promise.resolve(at);if(at instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return ht};if(rt.common.async===!1){const ht=this._def.schema._parseSync({data:rt.data,path:rt.path,parent:rt});return ht.status==="aborted"?INVALID:(ht.status==="dirty"&&tt.dirty(),ut(ht.value),{status:tt.value,value:ht.value})}else return this._def.schema._parseAsync({data:rt.data,path:rt.path,parent:rt}).then(ht=>ht.status==="aborted"?INVALID:(ht.status==="dirty"&&tt.dirty(),ut(ht.value).then(()=>({status:tt.value,value:ht.value}))))}if(it.type==="transform")if(rt.common.async===!1){const ut=this._def.schema._parseSync({data:rt.data,path:rt.path,parent:rt});if(!isValid$1(ut))return ut;const ht=it.transform(ut.value,st);if(ht instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:tt.value,value:ht}}else return this._def.schema._parseAsync({data:rt.data,path:rt.path,parent:rt}).then(ut=>isValid$1(ut)?Promise.resolve(it.transform(ut.value,st)).then(ht=>({status:tt.value,value:ht})):ut);util.assertNever(it)}}ZodEffects.create=(_e,et,tt)=>new ZodEffects({schema:_e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:et,...processCreateParams(tt)});ZodEffects.createWithPreprocess=(_e,et,tt)=>new ZodEffects({schema:et,effect:{type:"preprocess",transform:_e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(tt)});class ZodOptional extends ZodType{_parse(et){return this._getType(et)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(et)}unwrap(){return this._def.innerType}}ZodOptional.create=(_e,et)=>new ZodOptional({innerType:_e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(et)});class ZodNullable extends ZodType{_parse(et){return this._getType(et)===ZodParsedType.null?OK(null):this._def.innerType._parse(et)}unwrap(){return this._def.innerType}}ZodNullable.create=(_e,et)=>new ZodNullable({innerType:_e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(et)});class ZodDefault extends ZodType{_parse(et){const{ctx:tt}=this._processInputParams(et);let rt=tt.data;return tt.parsedType===ZodParsedType.undefined&&(rt=this._def.defaultValue()),this._def.innerType._parse({data:rt,path:tt.path,parent:tt})}removeDefault(){return this._def.innerType}}ZodDefault.create=(_e,et)=>new ZodDefault({innerType:_e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof et.default=="function"?et.default:()=>et.default,...processCreateParams(et)});class ZodCatch extends ZodType{_parse(et){const{ctx:tt}=this._processInputParams(et),rt={...tt,common:{...tt.common,issues:[]}},it=this._def.innerType._parse({data:rt.data,path:rt.path,parent:{...rt}});return isAsync(it)?it.then(st=>({status:"valid",value:st.status==="valid"?st.value:this._def.catchValue({get error(){return new ZodError(rt.common.issues)},input:rt.data})})):{status:"valid",value:it.status==="valid"?it.value:this._def.catchValue({get error(){return new ZodError(rt.common.issues)},input:rt.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(_e,et)=>new ZodCatch({innerType:_e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof et.catch=="function"?et.catch:()=>et.catch,...processCreateParams(et)});class ZodNaN extends ZodType{_parse(et){if(this._getType(et)!==ZodParsedType.nan){const rt=this._getOrReturnCtx(et);return addIssueToContext(rt,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:rt.parsedType}),INVALID}return{status:"valid",value:et.data}}}ZodNaN.create=_e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(_e)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(et){const{ctx:tt}=this._processInputParams(et),rt=tt.data;return this._def.type._parse({data:rt,path:tt.path,parent:tt})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(et){const{status:tt,ctx:rt}=this._processInputParams(et);if(rt.common.async)return(async()=>{const st=await this._def.in._parseAsync({data:rt.data,path:rt.path,parent:rt});return st.status==="aborted"?INVALID:st.status==="dirty"?(tt.dirty(),DIRTY(st.value)):this._def.out._parseAsync({data:st.value,path:rt.path,parent:rt})})();{const it=this._def.in._parseSync({data:rt.data,path:rt.path,parent:rt});return it.status==="aborted"?INVALID:it.status==="dirty"?(tt.dirty(),{status:"dirty",value:it.value}):this._def.out._parseSync({data:it.value,path:rt.path,parent:rt})}}static create(et,tt){return new ZodPipeline({in:et,out:tt,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(et){const tt=this._def.innerType._parse(et),rt=it=>(isValid$1(it)&&(it.value=Object.freeze(it.value)),it);return isAsync(tt)?tt.then(it=>rt(it)):rt(tt)}unwrap(){return this._def.innerType}}ZodReadonly.create=(_e,et)=>new ZodReadonly({innerType:_e,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(et)});function custom(_e,et={},tt){return _e?ZodAny.create().superRefine((rt,it)=>{var st,ut;if(!_e(rt)){const ht=typeof et=="function"?et(rt):typeof et=="string"?{message:et}:et,at=(ut=(st=ht.fatal)!==null&&st!==void 0?st:tt)!==null&&ut!==void 0?ut:!0,gt=typeof ht=="string"?{message:ht}:ht;it.addIssue({code:"custom",...gt,fatal:at})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(_e){_e.ZodString="ZodString",_e.ZodNumber="ZodNumber",_e.ZodNaN="ZodNaN",_e.ZodBigInt="ZodBigInt",_e.ZodBoolean="ZodBoolean",_e.ZodDate="ZodDate",_e.ZodSymbol="ZodSymbol",_e.ZodUndefined="ZodUndefined",_e.ZodNull="ZodNull",_e.ZodAny="ZodAny",_e.ZodUnknown="ZodUnknown",_e.ZodNever="ZodNever",_e.ZodVoid="ZodVoid",_e.ZodArray="ZodArray",_e.ZodObject="ZodObject",_e.ZodUnion="ZodUnion",_e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",_e.ZodIntersection="ZodIntersection",_e.ZodTuple="ZodTuple",_e.ZodRecord="ZodRecord",_e.ZodMap="ZodMap",_e.ZodSet="ZodSet",_e.ZodFunction="ZodFunction",_e.ZodLazy="ZodLazy",_e.ZodLiteral="ZodLiteral",_e.ZodEnum="ZodEnum",_e.ZodEffects="ZodEffects",_e.ZodNativeEnum="ZodNativeEnum",_e.ZodOptional="ZodOptional",_e.ZodNullable="ZodNullable",_e.ZodDefault="ZodDefault",_e.ZodCatch="ZodCatch",_e.ZodPromise="ZodPromise",_e.ZodBranded="ZodBranded",_e.ZodPipeline="ZodPipeline",_e.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(_e,et={message:`Input not instance of ${_e.name}`})=>custom(tt=>tt instanceof _e,et),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:_e=>ZodString.create({..._e,coerce:!0}),number:_e=>ZodNumber.create({..._e,coerce:!0}),boolean:_e=>ZodBoolean.create({..._e,coerce:!0}),bigint:_e=>ZodBigInt.create({..._e,coerce:!0}),date:_e=>ZodDate.create({..._e,coerce:!0})},NEVER=INVALID;var z=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK,isAborted,isDirty,isValid:isValid$1,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError});const UserSignupSchema=z.object({email:z.string({required_error:"Email is required"}).min(1,"Email is required").email({message:"Email is not a valid email"}),userName:z.string({required_error:"Username is required"}).min(1,"Username is required"),password:z.string({required_error:"Password is required"}).min(1,"Password is required"),confirmPassword:z.string({required_error:"Confirm password is required"}).min(1,"Confirm password is required"),phone:z.string().min(1,"Phone number is required").length(10,"Phone number must be exactly 10 digits").regex(/^\d+$/,"Phone number must contain only digits").refine(_e=>_e.length===10,{message:"Phone number must be exactly 10 digits"}),policy:z.boolean()}),UserLoginSchema=z.object({email:z.string({required_error:"Email is required"}).min(1,"Email is required").email({message:"Email is not a valid email"}),password:z.string({required_error:"Password is required"}).min(1,"Password is required")}),UserForgotPasswordSchema=z.object({email:z.string({required_error:"Email is required"}).min(1,"Email is required")}),UserVerifyCodeSchema=z.object({otp:z.string({required_error:"Code is required"}).min(1,"Code is required")}),UserSetPasswordSchema=z.object({newPassword:z.string({required_error:"Password is required"}).min(1,"Password is required"),confirmNewPassword:z.string({required_error:"Confirm password is required"}).min(1,"Confirm password is required")});z.object({email:z.string({required_error:"Email is required"}).min(1,"Email is required"),username:z.string({required_error:"Username is required"}).min(1,"Username is required"),phoneNumber:z.string().min(1,"Phone number is required").length(10,"Phone number must be exactly 10 digits").regex(/^\d+$/,"Phone number must contain only digits").refine(_e=>_e.length===10,{message:"Phone number must be exactly 10 digits"})});z.object({email:z.string({required_error:"Email is required"}).min(1,"Email is required").email({message:"Email is not a valid email"}),userName:z.string({required_error:"Username is required"}).min(1,"Username is required"),fullName:z.string({required_error:"FullName is required"}).min(1,"FullName is required"),avatar:z.string({required_error:"Avatar is required"}).min(1,"Avatar is required"),typeAccount:z.string({required_error:"TypeAccount is required"}).min(1,"TypeAccount is required")});const UpdateInfoSchema=z.object({senderName:z.string({}).min(1,"Sender name is required"),senderPhone:z.string({}).min(10,"Sender phone number is required"),receiverName:z.string({}).min(1,"Receiver name is required"),receiverPhone:z.string({}).min(10,"Receiver phone number is required"),orderDetailId:z.string(),deliveryInfoId:z.string()}),UpdateUserInfoSchema=z.object({userName:z.string().min(1,"User name is required"),fullName:z.string().min(1,"Full name is required"),phoneNumber:z.string().max(10,"Phone number is required and max length 10"),city:z.string().min(1,"City is required"),address:z.string().min(1,"Address is required"),gender:z.string().min(1,"Gender is required"),birthDate:z.date().refine(_e=>_e<=new Date,{message:"Birth date must not be in the future"}),avatar:z.instanceof(File).optional()}).refine(_e=>!_e.avatar||_e.avatar instanceof File,{message:"Avatar must be a valid file format",path:["avatar"]});function composeEventHandlers(_e,et,{checkForDefaultPrevented:tt=!0}={}){return function(it){if(_e==null||_e(it),tt===!1||!it.defaultPrevented)return et==null?void 0:et(it)}}function createContext2(_e,et){const tt=reactExports.createContext(et);function rt(st){const{children:ut,...ht}=st,at=reactExports.useMemo(()=>ht,Object.values(ht));return jsxRuntimeExports.jsx(tt.Provider,{value:at,children:ut})}function it(st){const ut=reactExports.useContext(tt);if(ut)return ut;if(et!==void 0)return et;throw new Error(`\`${st}\` must be used within \`${_e}\``)}return rt.displayName=_e+"Provider",[rt,it]}function createContextScope(_e,et=[]){let tt=[];function rt(st,ut){const ht=reactExports.createContext(ut),at=tt.length;tt=[...tt,ut];function gt(wt){const{scope:St,children:kt,...Rt}=wt,It=(St==null?void 0:St[_e][at])||ht,Dt=reactExports.useMemo(()=>Rt,Object.values(Rt));return jsxRuntimeExports.jsx(It.Provider,{value:Dt,children:kt})}function bt(wt,St){const kt=(St==null?void 0:St[_e][at])||ht,Rt=reactExports.useContext(kt);if(Rt)return Rt;if(ut!==void 0)return ut;throw new Error(`\`${wt}\` must be used within \`${st}\``)}return gt.displayName=st+"Provider",[gt,bt]}const it=()=>{const st=tt.map(ut=>reactExports.createContext(ut));return function(ht){const at=(ht==null?void 0:ht[_e])||st;return reactExports.useMemo(()=>({[`__scope${_e}`]:{...ht,[_e]:at}}),[ht,at])}};return it.scopeName=_e,[rt,composeContextScopes(it,...et)]}function composeContextScopes(..._e){const et=_e[0];if(_e.length===1)return et;const tt=()=>{const rt=_e.map(it=>({useScope:it(),scopeName:it.scopeName}));return function(st){const ut=rt.reduce((ht,{useScope:at,scopeName:gt})=>{const wt=at(st)[`__scope${gt}`];return{...ht,...wt}},{});return reactExports.useMemo(()=>({[`__scope${et.scopeName}`]:ut}),[ut])}};return tt.scopeName=et.scopeName,tt}function useCallbackRef$1(_e){const et=reactExports.useRef(_e);return reactExports.useEffect(()=>{et.current=_e}),reactExports.useMemo(()=>(...tt)=>{var rt;return(rt=et.current)==null?void 0:rt.call(et,...tt)},[])}function useControllableState({prop:_e,defaultProp:et,onChange:tt=()=>{}}){const[rt,it]=useUncontrolledState({defaultProp:et,onChange:tt}),st=_e!==void 0,ut=st?_e:rt,ht=useCallbackRef$1(tt),at=reactExports.useCallback(gt=>{if(st){const wt=typeof gt=="function"?gt(_e):gt;wt!==_e&&ht(wt)}else it(gt)},[st,_e,it,ht]);return[ut,at]}function useUncontrolledState({defaultProp:_e,onChange:et}){const tt=reactExports.useState(_e),[rt]=tt,it=reactExports.useRef(rt),st=useCallbackRef$1(et);return reactExports.useEffect(()=>{it.current!==rt&&(st(rt),it.current=rt)},[rt,it,st]),tt}function usePrevious$1(_e){const et=reactExports.useRef({value:_e,previous:_e});return reactExports.useMemo(()=>(et.current.value!==_e&&(et.current.previous=et.current.value,et.current.value=_e),et.current.previous),[_e])}var useLayoutEffect2=globalThis!=null&&globalThis.document?reactExports.useLayoutEffect:()=>{};function useSize(_e){const[et,tt]=reactExports.useState(void 0);return useLayoutEffect2(()=>{if(_e){tt({width:_e.offsetWidth,height:_e.offsetHeight});const rt=new ResizeObserver(it=>{if(!Array.isArray(it)||!it.length)return;const st=it[0];let ut,ht;if("borderBoxSize"in st){const at=st.borderBoxSize,gt=Array.isArray(at)?at[0]:at;ut=gt.inlineSize,ht=gt.blockSize}else ut=_e.offsetWidth,ht=_e.offsetHeight;tt({width:ut,height:ht})});return rt.observe(_e,{box:"border-box"}),()=>rt.unobserve(_e)}else tt(void 0)},[_e]),et}var SWITCH_NAME="Switch",[createSwitchContext,createSwitchScope]=createContextScope(SWITCH_NAME),[SwitchProvider,useSwitchContext]=createSwitchContext(SWITCH_NAME),Switch$1=reactExports.forwardRef((_e,et)=>{const{__scopeSwitch:tt,name:rt,checked:it,defaultChecked:st,required:ut,disabled:ht,value:at="on",onCheckedChange:gt,...bt}=_e,[wt,St]=reactExports.useState(null),kt=useComposedRefs(et,$t=>St($t)),Rt=reactExports.useRef(!1),It=wt?!!wt.closest("form"):!0,[Dt=!1,Mt]=useControllableState({prop:it,defaultProp:st,onChange:gt});return jsxRuntimeExports.jsxs(SwitchProvider,{scope:tt,checked:Dt,disabled:ht,children:[jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"switch","aria-checked":Dt,"aria-required":ut,"data-state":getState$4(Dt),"data-disabled":ht?"":void 0,disabled:ht,value:at,...bt,ref:kt,onClick:composeEventHandlers(_e.onClick,$t=>{Mt(jt=>!jt),It&&(Rt.current=$t.isPropagationStopped(),Rt.current||$t.stopPropagation())})}),It&&jsxRuntimeExports.jsx(BubbleInput,{control:wt,bubbles:!Rt.current,name:rt,value:at,checked:Dt,required:ut,disabled:ht,style:{transform:"translateX(-100%)"}})]})});Switch$1.displayName=SWITCH_NAME;var THUMB_NAME="SwitchThumb",SwitchThumb=reactExports.forwardRef((_e,et)=>{const{__scopeSwitch:tt,...rt}=_e,it=useSwitchContext(THUMB_NAME,tt);return jsxRuntimeExports.jsx(Primitive.span,{"data-state":getState$4(it.checked),"data-disabled":it.disabled?"":void 0,...rt,ref:et})});SwitchThumb.displayName=THUMB_NAME;var BubbleInput=_e=>{const{control:et,checked:tt,bubbles:rt=!0,...it}=_e,st=reactExports.useRef(null),ut=usePrevious$1(tt),ht=useSize(et);return reactExports.useEffect(()=>{const at=st.current,gt=window.HTMLInputElement.prototype,wt=Object.getOwnPropertyDescriptor(gt,"checked").set;if(ut!==tt&&wt){const St=new Event("click",{bubbles:rt});wt.call(at,tt),at.dispatchEvent(St)}},[ut,tt,rt]),jsxRuntimeExports.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:tt,...it,tabIndex:-1,ref:st,style:{..._e.style,...ht,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function getState$4(_e){return _e?"checked":"unchecked"}var Root$7=Switch$1,Thumb=SwitchThumb;const Switch=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Root$7,{className:cn("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",_e),...et,ref:tt,children:jsxRuntimeExports.jsx(Thumb,{className:cn("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Switch.displayName=Root$7.displayName;const FormSwitch=({classContent:_e,name:et,content:tt,form:rt})=>jsxRuntimeExports.jsx(FormField,{control:rt.control,name:et,render:({field:it})=>jsxRuntimeExports.jsxs(FormItem,{className:_e,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center space-x-2 w-full",children:[jsxRuntimeExports.jsx(Switch,{id:et,...it,defaultChecked:it.value}),jsxRuntimeExports.jsx(Label$2,{htmlFor:et,className:"font-light",children:tt})]})}),jsxRuntimeExports.jsx(FormDescription,{}),jsxRuntimeExports.jsx(FormMessage,{})]})});var NAME$2="Separator",DEFAULT_ORIENTATION="horizontal",ORIENTATIONS=["horizontal","vertical"],Separator$3=reactExports.forwardRef((_e,et)=>{const{decorative:tt,orientation:rt=DEFAULT_ORIENTATION,...it}=_e,st=isValidOrientation(rt)?rt:DEFAULT_ORIENTATION,ht=tt?{role:"none"}:{"aria-orientation":st==="vertical"?st:void 0,role:"separator"};return jsxRuntimeExports.jsx(Primitive.div,{"data-orientation":st,...ht,...it,ref:et})});Separator$3.displayName=NAME$2;function isValidOrientation(_e){return ORIENTATIONS.includes(_e)}var Root$6=Separator$3;const Separator$2=reactExports.forwardRef(({className:_e,orientation:et="horizontal",decorative:tt=!0,...rt},it)=>jsxRuntimeExports.jsx(Root$6,{ref:it,decorative:tt,orientation:et,className:cn("shrink-0 bg-border",et==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",_e),...rt}));Separator$2.displayName=Root$6.displayName;const OptionFormFooter=()=>{const{loginWithRedirect:_e}=useAuth0();return jsxRuntimeExports.jsx("div",{className:`justify-center mt-2 gap-4 items-center *:bg-transparent\r
      *:border *:border-orangeTheme *:p-2 w-full flex`,children:jsxRuntimeExports.jsxs("div",{className:"hover:bg-slate-50 flex h-18 items-center justify-center w-full rounded-md",onClick:async()=>await _e(),children:[jsxRuntimeExports.jsx("img",{src:"/google.png",alt:"google-logo",className:"w-6 "}),jsxRuntimeExports.jsx("p",{className:"text-slate-700 text-sm px-6",children:"Login with Google"})]})})},s=(_e,et,tt)=>{if(_e&&"reportValidity"in _e){const rt=get$1(tt,et);_e.setCustomValidity(rt&&rt.message||""),_e.reportValidity()}},o=(_e,et)=>{for(const tt in et.fields){const rt=et.fields[tt];rt&&rt.ref&&"reportValidity"in rt.ref?s(rt.ref,tt,_e):rt.refs&&rt.refs.forEach(it=>s(it,tt,_e))}},r=(_e,et)=>{et.shouldUseNativeValidation&&o(_e,et);const tt={};for(const rt in _e){const it=get$1(et.fields,rt),st=Object.assign(_e[rt]||{},{ref:it&&it.ref});if(i(et.names||Object.keys(_e),rt)){const ut=Object.assign({},get$1(tt,rt));set(ut,"root",st),set(tt,rt,ut)}else set(tt,rt,st)}return tt},i=(_e,et)=>_e.some(tt=>tt.startsWith(et+"."));var n=function(_e,et){for(var tt={};_e.length;){var rt=_e[0],it=rt.code,st=rt.message,ut=rt.path.join(".");if(!tt[ut])if("unionErrors"in rt){var ht=rt.unionErrors[0].errors[0];tt[ut]={message:ht.message,type:ht.code}}else tt[ut]={message:st,type:it};if("unionErrors"in rt&&rt.unionErrors.forEach(function(bt){return bt.errors.forEach(function(wt){return _e.push(wt)})}),et){var at=tt[ut].types,gt=at&&at[rt.code];tt[ut]=appendErrors(ut,et,tt,it,gt?[].concat(gt,rt.message):rt.message)}_e.shift()}return tt},t=function(_e,et,tt){return tt===void 0&&(tt={}),function(rt,it,st){try{return Promise.resolve(function(ut,ht){try{var at=Promise.resolve(_e[tt.mode==="sync"?"parse":"parseAsync"](rt,et)).then(function(gt){return st.shouldUseNativeValidation&&o({},st),{errors:{},values:tt.raw?rt:gt}})}catch(gt){return ht(gt)}return at&&at.then?at.then(void 0,ht):at}(0,function(ut){if(function(ht){return Array.isArray(ht==null?void 0:ht.errors)}(ut))return{values:{},errors:r(n(ut.errors,!st.shouldUseNativeValidation&&st.criteriaMode==="all"),st)};throw ut}))}catch(ut){return Promise.reject(ut)}}};const SignupForm=()=>{const[_e,et]=reactExports.useState(!1),tt=useNavigate(),rt=useForm({resolver:t(UserSignupSchema),defaultValues:{email:"",userName:"",phone:"",password:"",confirmPassword:"",policy:!0}}),it=async st=>{var ht,at;et(!0);const ut=await authService.register({data:st});et(!1),ut.success?(_t.success((ht=ut==null?void 0:ut.result)==null?void 0:ht.message),tt(ROUTES.VERIFY_CODE,{state:{email:rt.getValues("email")}})):_t.error((at=ut==null?void 0:ut.result)==null?void 0:at.message)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Form,{...rt,children:jsxRuntimeExports.jsxs("form",{onSubmit:rt.handleSubmit(it),className:"flex flex-col gap-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-6 sm:grid-cols-2 gap-x-2 gap-y-4",children:[jsxRuntimeExports.jsx(FormInput,{name:"email",form:rt,placeholder:"Ex:customer@gmail.com",classContent:"md:col-span-3",autoFocus:!0}),jsxRuntimeExports.jsx(FormInput,{name:"userName",form:rt,placeholder:"Ex:customer",classContent:"md:col-span-3"}),jsxRuntimeExports.jsx(FormInput,{name:"phone",form:rt,placeholder:"Ex:0867 653 653",classContent:"md:col-span-3"}),jsxRuntimeExports.jsx(FormInput,{name:"password",form:rt,type:"password",classContent:"md:col-span-6"}),jsxRuntimeExports.jsx(FormInput,{name:"confirmPassword",form:rt,type:"password",classContent:"md:col-span-6"}),jsxRuntimeExports.jsx(FormSwitch,{name:"policy",content:"I agree to all Term and Policy",form:rt,classContent:"md:col-span-6"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",children:"Create account"}),jsxRuntimeExports.jsxs("div",{className:"text-sm justify-center flex gap-1",children:["Already have an account?",jsxRuntimeExports.jsx(Link,{to:"/login",className:"text-orangeTheme font-semibold",children:"Login"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-extralight flex items-center justify-center gap-4",children:[jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"}),jsxRuntimeExports.jsx("span",{children:" Or Sign up with"}),jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"})]}),jsxRuntimeExports.jsx(OptionFormFooter,{})]})}),_e&&jsxRuntimeExports.jsx(Loading,{})]})};function isObject$2(_e){return Object.prototype.toString.call(_e)==="[object Object]"}function isRecord(_e){return isObject$2(_e)||Array.isArray(_e)}function canUseDOM$1(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function areOptionsEqual(_e,et){const tt=Object.keys(_e),rt=Object.keys(et);if(tt.length!==rt.length)return!1;const it=JSON.stringify(Object.keys(_e.breakpoints||{})),st=JSON.stringify(Object.keys(et.breakpoints||{}));return it!==st?!1:tt.every(ut=>{const ht=_e[ut],at=et[ut];return typeof ht=="function"?`${ht}`==`${at}`:!isRecord(ht)||!isRecord(at)?ht===at:areOptionsEqual(ht,at)})}function sortAndMapPluginToOptions(_e){return _e.concat().sort((et,tt)=>et.name>tt.name?1:-1).map(et=>et.options)}function arePluginsEqual(_e,et){if(_e.length!==et.length)return!1;const tt=sortAndMapPluginToOptions(_e),rt=sortAndMapPluginToOptions(et);return tt.every((it,st)=>{const ut=rt[st];return areOptionsEqual(it,ut)})}function isNumber(_e){return typeof _e=="number"}function isString$1(_e){return typeof _e=="string"}function isBoolean(_e){return typeof _e=="boolean"}function isObject$1(_e){return Object.prototype.toString.call(_e)==="[object Object]"}function mathAbs(_e){return Math.abs(_e)}function mathSign(_e){return Math.sign(_e)}function deltaAbs(_e,et){return mathAbs(_e-et)}function factorAbs(_e,et){if(_e===0||et===0||mathAbs(_e)<=mathAbs(et))return 0;const tt=deltaAbs(mathAbs(_e),mathAbs(et));return mathAbs(tt/_e)}function arrayKeys(_e){return objectKeys(_e).map(Number)}function arrayLast(_e){return _e[arrayLastIndex(_e)]}function arrayLastIndex(_e){return Math.max(0,_e.length-1)}function arrayIsLastIndex(_e,et){return et===arrayLastIndex(_e)}function arrayFromNumber(_e,et=0){return Array.from(Array(_e),(tt,rt)=>et+rt)}function objectKeys(_e){return Object.keys(_e)}function objectsMergeDeep(_e,et){return[_e,et].reduce((tt,rt)=>(objectKeys(rt).forEach(it=>{const st=tt[it],ut=rt[it],ht=isObject$1(st)&&isObject$1(ut);tt[it]=ht?objectsMergeDeep(st,ut):ut}),tt),{})}function isMouseEvent(_e,et){return typeof et.MouseEvent<"u"&&_e instanceof et.MouseEvent}function Alignment(_e,et){const tt={start:rt,center:it,end:st};function rt(){return 0}function it(at){return st(at)/2}function st(at){return et-at}function ut(at,gt){return isString$1(_e)?tt[_e](at):_e(et,at,gt)}return{measure:ut}}function EventStore(){let _e=[];function et(it,st,ut,ht={passive:!0}){let at;if("addEventListener"in it)it.addEventListener(st,ut,ht),at=()=>it.removeEventListener(st,ut,ht);else{const gt=it;gt.addListener(ut),at=()=>gt.removeListener(ut)}return _e.push(at),rt}function tt(){_e=_e.filter(it=>it())}const rt={add:et,clear:tt};return rt}function Animations(_e,et,tt,rt){const it=EventStore(),st=1e3/60;let ut=null,ht=0,at=0;function gt(){it.add(_e,"visibilitychange",()=>{_e.hidden&&Rt()})}function bt(){kt(),it.clear()}function wt(Dt){if(!at)return;ut||(ut=Dt);const Mt=Dt-ut;for(ut=Dt,ht+=Mt;ht>=st;)tt(st),ht-=st;const $t=ht/st;rt($t),at&&et.requestAnimationFrame(wt)}function St(){at||(at=et.requestAnimationFrame(wt))}function kt(){et.cancelAnimationFrame(at),ut=null,ht=0,at=0}function Rt(){ut=null,ht=0}return{init:gt,destroy:bt,start:St,stop:kt,update:()=>tt(st),render:rt}}function Axis(_e,et){const tt=et==="rtl",rt=_e==="y",it=rt?"y":"x",st=rt?"x":"y",ut=!rt&&tt?-1:1,ht=bt(),at=wt();function gt(Rt){const{height:It,width:Dt}=Rt;return rt?It:Dt}function bt(){return rt?"top":tt?"right":"left"}function wt(){return rt?"bottom":tt?"left":"right"}function St(Rt){return Rt*ut}return{scroll:it,cross:st,startEdge:ht,endEdge:at,measureSize:gt,direction:St}}function Limit(_e=0,et=0){const tt=mathAbs(_e-et);function rt(gt){return gt<_e}function it(gt){return gt>et}function st(gt){return rt(gt)||it(gt)}function ut(gt){return st(gt)?rt(gt)?_e:et:gt}function ht(gt){return tt?gt-tt*Math.ceil((gt-et)/tt):gt}return{length:tt,max:et,min:_e,constrain:ut,reachedAny:st,reachedMax:it,reachedMin:rt,removeOffset:ht}}function Counter(_e,et,tt){const{constrain:rt}=Limit(0,_e),it=_e+1;let st=ut(et);function ut(St){return tt?mathAbs((it+St)%it):rt(St)}function ht(){return st}function at(St){return st=ut(St),wt}function gt(St){return bt().set(ht()+St)}function bt(){return Counter(_e,ht(),tt)}const wt={get:ht,set:at,add:gt,clone:bt};return wt}function DragHandler(_e,et,tt,rt,it,st,ut,ht,at,gt,bt,wt,St,kt,Rt,It,Dt,Mt,$t){const{cross:jt,direction:Nt}=_e,Ut=["INPUT","SELECT","TEXTAREA"],Ht={passive:!1},Kt=EventStore(),tr=EventStore(),mr=Limit(50,225).constrain(kt.measure(20)),vr={mouse:300,touch:400},wr={mouse:500,touch:600},yr=Rt?43:25;let Or=!1,Nr=0,Lr=0,ar=!1,hr=!1,Qt=!1,ir=!1;function Mr(dn){if(!$t)return;function qn(xo){(isBoolean($t)||$t(dn,xo))&&eo(xo)}const On=et;Kt.add(On,"dragstart",xo=>xo.preventDefault(),Ht).add(On,"touchmove",()=>{},Ht).add(On,"touchend",()=>{}).add(On,"touchstart",qn).add(On,"mousedown",qn).add(On,"touchcancel",lo).add(On,"contextmenu",lo).add(On,"click",mn,!0)}function Cr(){Kt.clear(),tr.clear()}function rn(){const dn=ir?tt:et;tr.add(dn,"touchmove",Gn,Ht).add(dn,"touchend",lo).add(dn,"mousemove",Gn,Ht).add(dn,"mouseup",lo)}function fn(dn){const qn=dn.nodeName||"";return Ut.includes(qn)}function Dn(){return(Rt?wr:vr)[ir?"mouse":"touch"]}function Yn(dn,qn){const On=wt.add(mathSign(dn)*-1),xo=bt.byDistance(dn,!Rt).distance;return Rt||mathAbs(dn)<mr?xo:Dt&&qn?xo*.5:bt.byIndex(On.get(),0).distance}function eo(dn){const qn=isMouseEvent(dn,rt);ir=qn,Qt=Rt&&qn&&!dn.buttons&&Or,Or=deltaAbs(it.get(),ut.get())>=2,!(qn&&dn.button!==0)&&(fn(dn.target)||(ar=!0,st.pointerDown(dn),gt.useFriction(0).useDuration(0),it.set(ut),rn(),Nr=st.readPoint(dn),Lr=st.readPoint(dn,jt),St.emit("pointerDown")))}function Gn(dn){if(!isMouseEvent(dn,rt)&&dn.touches.length>=2)return lo(dn);const On=st.readPoint(dn),xo=st.readPoint(dn,jt),Io=deltaAbs(On,Nr),$o=deltaAbs(xo,Lr);if(!hr&&!ir&&(!dn.cancelable||(hr=Io>$o,!hr)))return lo(dn);const Zr=st.pointerMove(dn);Io>It&&(Qt=!0),gt.useFriction(.3).useDuration(.75),ht.start(),it.add(Nt(Zr)),dn.preventDefault()}function lo(dn){const On=bt.byDistance(0,!1).index!==wt.get(),xo=st.pointerUp(dn)*Dn(),Io=Yn(Nt(xo),On),$o=factorAbs(xo,Io),Zr=yr-10*$o,pn=Mt+$o/50;hr=!1,ar=!1,tr.clear(),gt.useDuration(Zr).useFriction(pn),at.distance(Io,!Rt),ir=!1,St.emit("pointerUp")}function mn(dn){Qt&&(dn.stopPropagation(),dn.preventDefault(),Qt=!1)}function Hn(){return ar}return{init:Mr,destroy:Cr,pointerDown:Hn}}function DragTracker(_e,et){let rt,it;function st(wt){return wt.timeStamp}function ut(wt,St){const Rt=`client${(St||_e.scroll)==="x"?"X":"Y"}`;return(isMouseEvent(wt,et)?wt:wt.touches[0])[Rt]}function ht(wt){return rt=wt,it=wt,ut(wt)}function at(wt){const St=ut(wt)-ut(it),kt=st(wt)-st(rt)>170;return it=wt,kt&&(rt=wt),St}function gt(wt){if(!rt||!it)return 0;const St=ut(it)-ut(rt),kt=st(wt)-st(rt),Rt=st(wt)-st(it)>170,It=St/kt;return kt&&!Rt&&mathAbs(It)>.1?It:0}return{pointerDown:ht,pointerMove:at,pointerUp:gt,readPoint:ut}}function NodeRects(){function _e(tt){const{offsetTop:rt,offsetLeft:it,offsetWidth:st,offsetHeight:ut}=tt;return{top:rt,right:it+st,bottom:rt+ut,left:it,width:st,height:ut}}return{measure:_e}}function PercentOfView(_e){function et(rt){return _e*(rt/100)}return{measure:et}}function ResizeHandler(_e,et,tt,rt,it,st,ut){let ht,at,gt=[],bt=!1;function wt(It){return it.measureSize(ut.measure(It))}function St(It){if(!st)return;at=wt(_e),gt=rt.map(wt);function Dt($t){for(const jt of $t){const Nt=jt.target===_e,Ut=rt.indexOf(jt.target),Ht=Nt?at:gt[Ut],Kt=wt(Nt?_e:rt[Ut]);if(mathAbs(Kt-Ht)>=.5){tt.requestAnimationFrame(()=>{It.reInit(),et.emit("resize")});break}}}ht=new ResizeObserver($t=>{bt||(isBoolean(st)||st(It,$t))&&Dt($t)}),[_e].concat(rt).forEach($t=>ht.observe($t))}function kt(){ht&&ht.disconnect(),bt=!0}return{init:St,destroy:kt}}function ScrollBody(_e,et,tt,rt,it,st){let ut=0,ht=0,at=it,gt=st,bt=_e.get(),wt=0;function St(Ht){const Kt=Ht/1e3,tr=at*Kt,mr=rt.get()-_e.get(),vr=!at;let wr=0;return vr?(ut=0,tt.set(rt),_e.set(rt),wr=mr):(tt.set(_e),ut+=mr/tr,ut*=gt,bt+=ut,_e.add(ut*Kt),wr=bt-wt),ht=mathSign(wr),wt=bt,Ut}function kt(){const Ht=rt.get()-et.get();return mathAbs(Ht)<.001}function Rt(){return at}function It(){return ht}function Dt(){return ut}function Mt(){return jt(it)}function $t(){return Nt(st)}function jt(Ht){return at=Ht,Ut}function Nt(Ht){return gt=Ht,Ut}const Ut={direction:It,duration:Rt,velocity:Dt,seek:St,settled:kt,useBaseFriction:$t,useBaseDuration:Mt,useFriction:Nt,useDuration:jt};return Ut}function ScrollBounds(_e,et,tt,rt,it){const st=it.measure(10),ut=it.measure(50),ht=Limit(.1,.99);let at=!1;function gt(){return!(at||!_e.reachedAny(tt.get())||!_e.reachedAny(et.get()))}function bt(kt){if(!gt())return;const Rt=_e.reachedMin(et.get())?"min":"max",It=mathAbs(_e[Rt]-et.get()),Dt=tt.get()-et.get(),Mt=ht.constrain(It/ut);tt.subtract(Dt*Mt),!kt&&mathAbs(Dt)<st&&(tt.set(_e.constrain(tt.get())),rt.useDuration(25).useBaseFriction())}function wt(kt){at=!kt}return{shouldConstrain:gt,constrain:bt,toggleActive:wt}}function ScrollContain(_e,et,tt,rt,it){const st=Limit(-et+_e,0),ut=wt(),ht=bt(),at=St();function gt(Rt,It){return deltaAbs(Rt,It)<1}function bt(){const Rt=ut[0],It=arrayLast(ut),Dt=ut.lastIndexOf(Rt),Mt=ut.indexOf(It)+1;return Limit(Dt,Mt)}function wt(){return tt.map((Rt,It)=>{const{min:Dt,max:Mt}=st,$t=st.constrain(Rt),jt=!It,Nt=arrayIsLastIndex(tt,It);return jt?Mt:Nt||gt(Dt,$t)?Dt:gt(Mt,$t)?Mt:$t}).map(Rt=>parseFloat(Rt.toFixed(3)))}function St(){if(et<=_e+it)return[st.max];if(rt==="keepSnaps")return ut;const{min:Rt,max:It}=ht;return ut.slice(Rt,It)}return{snapsContained:at,scrollContainLimit:ht}}function ScrollLimit(_e,et,tt){const rt=et[0],it=tt?rt-_e:arrayLast(et);return{limit:Limit(it,rt)}}function ScrollLooper(_e,et,tt,rt){const st=et.min+.1,ut=et.max+.1,{reachedMin:ht,reachedMax:at}=Limit(st,ut);function gt(St){return St===1?at(tt.get()):St===-1?ht(tt.get()):!1}function bt(St){if(!gt(St))return;const kt=_e*(St*-1);rt.forEach(Rt=>Rt.add(kt))}return{loop:bt}}function ScrollProgress(_e){const{max:et,length:tt}=_e;function rt(st){const ut=st-et;return tt?ut/-tt:0}return{get:rt}}function ScrollSnaps(_e,et,tt,rt,it){const{startEdge:st,endEdge:ut}=_e,{groupSlides:ht}=it,at=wt().map(et.measure),gt=St(),bt=kt();function wt(){return ht(rt).map(It=>arrayLast(It)[ut]-It[0][st]).map(mathAbs)}function St(){return rt.map(It=>tt[st]-It[st]).map(It=>-mathAbs(It))}function kt(){return ht(gt).map(It=>It[0]).map((It,Dt)=>It+at[Dt])}return{snaps:gt,snapsAligned:bt}}function SlideRegistry(_e,et,tt,rt,it,st){const{groupSlides:ut}=it,{min:ht,max:at}=rt,gt=bt();function bt(){const St=ut(st),kt=!_e||et==="keepSnaps";return tt.length===1?[st]:kt?St:St.slice(ht,at).map((Rt,It,Dt)=>{const Mt=!It,$t=arrayIsLastIndex(Dt,It);if(Mt){const jt=arrayLast(Dt[0])+1;return arrayFromNumber(jt)}if($t){const jt=arrayLastIndex(st)-arrayLast(Dt)[0]+1;return arrayFromNumber(jt,arrayLast(Dt)[0])}return Rt})}return{slideRegistry:gt}}function ScrollTarget(_e,et,tt,rt,it){const{reachedAny:st,removeOffset:ut,constrain:ht}=rt;function at(Rt){return Rt.concat().sort((It,Dt)=>mathAbs(It)-mathAbs(Dt))[0]}function gt(Rt){const It=_e?ut(Rt):ht(Rt),Dt=et.map(($t,jt)=>({diff:bt($t-It,0),index:jt})).sort(($t,jt)=>mathAbs($t.diff)-mathAbs(jt.diff)),{index:Mt}=Dt[0];return{index:Mt,distance:It}}function bt(Rt,It){const Dt=[Rt,Rt+tt,Rt-tt];if(!_e)return Rt;if(!It)return at(Dt);const Mt=Dt.filter($t=>mathSign($t)===It);return Mt.length?at(Mt):arrayLast(Dt)-tt}function wt(Rt,It){const Dt=et[Rt]-it.get(),Mt=bt(Dt,It);return{index:Rt,distance:Mt}}function St(Rt,It){const Dt=it.get()+Rt,{index:Mt,distance:$t}=gt(Dt),jt=!_e&&st(Dt);if(!It||jt)return{index:Mt,distance:Rt};const Nt=et[Mt]-$t,Ut=Rt+bt(Nt,0);return{index:Mt,distance:Ut}}return{byDistance:St,byIndex:wt,shortcut:bt}}function ScrollTo(_e,et,tt,rt,it,st,ut){function ht(wt){const St=wt.distance,kt=wt.index!==et.get();st.add(St),St&&(rt.duration()?_e.start():(_e.update(),_e.render(1),_e.update())),kt&&(tt.set(et.get()),et.set(wt.index),ut.emit("select"))}function at(wt,St){const kt=it.byDistance(wt,St);ht(kt)}function gt(wt,St){const kt=et.clone().set(wt),Rt=it.byIndex(kt.get(),St);ht(Rt)}return{distance:at,index:gt}}function SlideFocus(_e,et,tt,rt,it,st,ut){let ht=0;function at(){st.add(document,"keydown",gt,!1),et.forEach(bt)}function gt(St){St.code==="Tab"&&(ht=new Date().getTime())}function bt(St){const kt=()=>{if(new Date().getTime()-ht>10)return;_e.scrollLeft=0;const Dt=et.indexOf(St),Mt=tt.findIndex($t=>$t.includes(Dt));isNumber(Mt)&&(it.useDuration(0),rt.index(Mt,0),ut.emit("slideFocus"))};st.add(St,"focus",kt,{passive:!0,capture:!0})}return{init:at}}function Vector1D(_e){let et=_e;function tt(){return et}function rt(at){et=ut(at)}function it(at){et+=ut(at)}function st(at){et-=ut(at)}function ut(at){return isNumber(at)?at:at.get()}return{get:tt,set:rt,add:it,subtract:st}}function Translate(_e,et){const tt=_e.scroll==="x"?st:ut,rt=et.style;let it=!1;function st(wt){return`translate3d(${wt}px,0px,0px)`}function ut(wt){return`translate3d(0px,${wt}px,0px)`}function ht(wt){it||(rt.transform=tt(_e.direction(wt)))}function at(wt){it=!wt}function gt(){it||(rt.transform="",et.getAttribute("style")||et.removeAttribute("style"))}return{clear:gt,to:ht,toggleActive:at}}function SlideLooper(_e,et,tt,rt,it,st,ut,ht,at){const bt=arrayKeys(it),wt=arrayKeys(it).reverse(),St=Mt().concat($t());function kt(Kt,tr){return Kt.reduce((mr,vr)=>mr-it[vr],tr)}function Rt(Kt,tr){return Kt.reduce((mr,vr)=>kt(mr,tr)>0?mr.concat([vr]):mr,[])}function It(Kt){return st.map((tr,mr)=>({start:tr-rt[mr]+.5+Kt,end:tr+et-.5+Kt}))}function Dt(Kt,tr,mr){const vr=It(tr);return Kt.map(wr=>{const yr=mr?0:-tt,Or=mr?tt:0,Nr=mr?"end":"start",Lr=vr[wr][Nr];return{index:wr,loopPoint:Lr,slideLocation:Vector1D(-1),translate:Translate(_e,at[wr]),target:()=>ht.get()>Lr?yr:Or}})}function Mt(){const Kt=ut[0],tr=Rt(wt,Kt);return Dt(tr,tt,!1)}function $t(){const Kt=et-ut[0]-1,tr=Rt(bt,Kt);return Dt(tr,-tt,!0)}function jt(){return St.every(({index:Kt})=>{const tr=bt.filter(mr=>mr!==Kt);return kt(tr,et)<=.1})}function Nt(){St.forEach(Kt=>{const{target:tr,translate:mr,slideLocation:vr}=Kt,wr=tr();wr!==vr.get()&&(mr.to(wr),vr.set(wr))})}function Ut(){St.forEach(Kt=>Kt.translate.clear())}return{canLoop:jt,clear:Ut,loop:Nt,loopPoints:St}}function SlidesHandler(_e,et,tt){let rt,it=!1;function st(at){if(!tt)return;function gt(bt){for(const wt of bt)if(wt.type==="childList"){at.reInit(),et.emit("slidesChanged");break}}rt=new MutationObserver(bt=>{it||(isBoolean(tt)||tt(at,bt))&&gt(bt)}),rt.observe(_e,{childList:!0})}function ut(){rt&&rt.disconnect(),it=!0}return{init:st,destroy:ut}}function SlidesInView(_e,et,tt,rt){const it={};let st=null,ut=null,ht,at=!1;function gt(){ht=new IntersectionObserver(Rt=>{at||(Rt.forEach(It=>{const Dt=et.indexOf(It.target);it[Dt]=It}),st=null,ut=null,tt.emit("slidesInView"))},{root:_e.parentElement,threshold:rt}),et.forEach(Rt=>ht.observe(Rt))}function bt(){ht&&ht.disconnect(),at=!0}function wt(Rt){return objectKeys(it).reduce((It,Dt)=>{const Mt=parseInt(Dt),{isIntersecting:$t}=it[Mt];return(Rt&&$t||!Rt&&!$t)&&It.push(Mt),It},[])}function St(Rt=!0){if(Rt&&st)return st;if(!Rt&&ut)return ut;const It=wt(Rt);return Rt&&(st=It),Rt||(ut=It),It}return{init:gt,destroy:bt,get:St}}function SlideSizes(_e,et,tt,rt,it,st){const{measureSize:ut,startEdge:ht,endEdge:at}=_e,gt=tt[0]&&it,bt=Rt(),wt=It(),St=tt.map(ut),kt=Dt();function Rt(){if(!gt)return 0;const $t=tt[0];return mathAbs(et[ht]-$t[ht])}function It(){if(!gt)return 0;const $t=st.getComputedStyle(arrayLast(rt));return parseFloat($t.getPropertyValue(`margin-${at}`))}function Dt(){return tt.map(($t,jt,Nt)=>{const Ut=!jt,Ht=arrayIsLastIndex(Nt,jt);return Ut?St[jt]+bt:Ht?St[jt]+wt:Nt[jt+1][ht]-$t[ht]}).map(mathAbs)}return{slideSizes:St,slideSizesWithGaps:kt,startGap:bt,endGap:wt}}function SlidesToScroll(_e,et,tt,rt,it,st,ut,ht,at){const{startEdge:gt,endEdge:bt,direction:wt}=_e,St=isNumber(tt);function kt(Mt,$t){return arrayKeys(Mt).filter(jt=>jt%$t===0).map(jt=>Mt.slice(jt,jt+$t))}function Rt(Mt){return Mt.length?arrayKeys(Mt).reduce(($t,jt,Nt)=>{const Ut=arrayLast($t)||0,Ht=Ut===0,Kt=jt===arrayLastIndex(Mt),tr=it[gt]-st[Ut][gt],mr=it[gt]-st[jt][bt],vr=!rt&&Ht?wt(ut):0,wr=!rt&&Kt?wt(ht):0,yr=mathAbs(mr-wr-(tr+vr));return Nt&&yr>et+at&&$t.push(jt),Kt&&$t.push(Mt.length),$t},[]).map(($t,jt,Nt)=>{const Ut=Math.max(Nt[jt-1]||0);return Mt.slice(Ut,$t)}):[]}function It(Mt){return St?kt(Mt,tt):Rt(Mt)}return{groupSlides:It}}function Engine(_e,et,tt,rt,it,st,ut){const{align:ht,axis:at,direction:gt,startIndex:bt,loop:wt,duration:St,dragFree:kt,dragThreshold:Rt,inViewThreshold:It,slidesToScroll:Dt,skipSnaps:Mt,containScroll:$t,watchResize:jt,watchSlides:Nt,watchDrag:Ut}=st,Ht=2,Kt=NodeRects(),tr=Kt.measure(et),mr=tt.map(Kt.measure),vr=Axis(at,gt),wr=vr.measureSize(tr),yr=PercentOfView(wr),Or=Alignment(ht,wr),Nr=!wt&&!!$t,Lr=wt||!!$t,{slideSizes:ar,slideSizesWithGaps:hr,startGap:Qt,endGap:ir}=SlideSizes(vr,tr,mr,tt,Lr,it),Mr=SlidesToScroll(vr,wr,Dt,wt,tr,mr,Qt,ir,Ht),{snaps:Cr,snapsAligned:rn}=ScrollSnaps(vr,Or,tr,mr,Mr),fn=-arrayLast(Cr)+arrayLast(hr),{snapsContained:Dn,scrollContainLimit:Yn}=ScrollContain(wr,fn,rn,$t,Ht),eo=Nr?Dn:rn,{limit:Gn}=ScrollLimit(fn,eo,wt),lo=Counter(arrayLastIndex(eo),bt,wt),mn=lo.clone(),Hn=arrayKeys(tt),Rn=({dragHandler:Fo,scrollBody:ds,scrollBounds:bs,options:{loop:Yo}},Po)=>{Yo||bs.constrain(Fo.pointerDown()),ds.seek(Po)},dn=({scrollBody:Fo,translate:ds,location:bs,offsetLocation:Yo,scrollLooper:Po,slideLooper:gs,dragHandler:ws,animation:go,eventHandler:Su,scrollBounds:zs,options:{loop:Il}},du)=>{const Pl=Fo.settled(),Vu=!zs.shouldConstrain(),Uu=Il?Pl:Pl&&Vu;Uu&&!ws.pointerDown()&&(go.stop(),Su.emit("settle")),Uu||Su.emit("scroll");const Gu=bs.get()*du+$o.get()*(1-du);Yo.set(Gu),Il&&(Po.loop(Fo.direction()),gs.loop()),ds.to(Yo.get())},qn=Animations(rt,it,Fo=>Rn(vo,Fo),Fo=>dn(vo,Fo)),On=.68,xo=eo[lo.get()],Io=Vector1D(xo),$o=Vector1D(xo),Zr=Vector1D(xo),pn=Vector1D(xo),sn=ScrollBody(Io,Zr,$o,pn,St,On),wn=ScrollTarget(wt,eo,fn,Gn,pn),Xn=ScrollTo(qn,lo,mn,sn,wn,pn,ut),Fn=ScrollProgress(Gn),ro=EventStore(),No=SlidesInView(et,tt,ut,It),{slideRegistry:co}=SlideRegistry(Nr,$t,eo,Yn,Mr,Hn),Ao=SlideFocus(_e,tt,co,Xn,sn,ro,ut),vo={ownerDocument:rt,ownerWindow:it,eventHandler:ut,containerRect:tr,slideRects:mr,animation:qn,axis:vr,dragHandler:DragHandler(vr,_e,rt,it,pn,DragTracker(vr,it),Io,qn,Xn,sn,wn,lo,ut,yr,kt,Rt,Mt,On,Ut),eventStore:ro,percentOfView:yr,index:lo,indexPrevious:mn,limit:Gn,location:Io,offsetLocation:Zr,previousLocation:$o,options:st,resizeHandler:ResizeHandler(et,ut,it,tt,vr,jt,Kt),scrollBody:sn,scrollBounds:ScrollBounds(Gn,Zr,pn,sn,yr),scrollLooper:ScrollLooper(fn,Gn,Zr,[Io,Zr,$o,pn]),scrollProgress:Fn,scrollSnapList:eo.map(Fn.get),scrollSnaps:eo,scrollTarget:wn,scrollTo:Xn,slideLooper:SlideLooper(vr,wr,fn,ar,hr,Cr,eo,Zr,tt),slideFocus:Ao,slidesHandler:SlidesHandler(et,ut,Nt),slidesInView:No,slideIndexes:Hn,slideRegistry:co,slidesToScroll:Mr,target:pn,translate:Translate(vr,et)};return vo}function EventHandler(){let _e={},et;function tt(gt){et=gt}function rt(gt){return _e[gt]||[]}function it(gt){return rt(gt).forEach(bt=>bt(et,gt)),at}function st(gt,bt){return _e[gt]=rt(gt).concat([bt]),at}function ut(gt,bt){return _e[gt]=rt(gt).filter(wt=>wt!==bt),at}function ht(){_e={}}const at={init:tt,emit:it,off:ut,on:st,clear:ht};return at}const defaultOptions$3={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function OptionsHandler(_e){function et(st,ut){return objectsMergeDeep(st,ut||{})}function tt(st){const ut=st.breakpoints||{},ht=objectKeys(ut).filter(at=>_e.matchMedia(at).matches).map(at=>ut[at]).reduce((at,gt)=>et(at,gt),{});return et(st,ht)}function rt(st){return st.map(ut=>objectKeys(ut.breakpoints||{})).reduce((ut,ht)=>ut.concat(ht),[]).map(_e.matchMedia)}return{mergeOptions:et,optionsAtMedia:tt,optionsMediaQueries:rt}}function PluginsHandler(_e){let et=[];function tt(st,ut){return et=ut.filter(({options:ht})=>_e.optionsAtMedia(ht).active!==!1),et.forEach(ht=>ht.init(st,_e)),ut.reduce((ht,at)=>Object.assign(ht,{[at.name]:at}),{})}function rt(){et=et.filter(st=>st.destroy())}return{init:tt,destroy:rt}}function EmblaCarousel(_e,et,tt){const rt=_e.ownerDocument,it=rt.defaultView,st=OptionsHandler(it),ut=PluginsHandler(st),ht=EventStore(),at=EventHandler(),{mergeOptions:gt,optionsAtMedia:bt,optionsMediaQueries:wt}=st,{on:St,off:kt,emit:Rt}=at,It=wr;let Dt=!1,Mt,$t=gt(defaultOptions$3,EmblaCarousel.globalOptions),jt=gt($t),Nt=[],Ut,Ht,Kt;function tr(){const{container:Rn,slides:dn}=jt;Ht=(isString$1(Rn)?_e.querySelector(Rn):Rn)||_e.children[0];const On=isString$1(dn)?Ht.querySelectorAll(dn):dn;Kt=[].slice.call(On||Ht.children)}function mr(Rn){const dn=Engine(_e,Ht,Kt,rt,it,Rn,at);if(Rn.loop&&!dn.slideLooper.canLoop()){const qn=Object.assign({},Rn,{loop:!1});return mr(qn)}return dn}function vr(Rn,dn){Dt||($t=gt($t,Rn),jt=bt($t),Nt=dn||Nt,tr(),Mt=mr(jt),wt([$t,...Nt.map(({options:qn})=>qn)]).forEach(qn=>ht.add(qn,"change",wr)),jt.active&&(Mt.translate.to(Mt.location.get()),Mt.animation.init(),Mt.slidesInView.init(),Mt.slideFocus.init(),Mt.eventHandler.init(Hn),Mt.resizeHandler.init(Hn),Mt.slidesHandler.init(Hn),Mt.options.loop&&Mt.slideLooper.loop(),Ht.offsetParent&&Kt.length&&Mt.dragHandler.init(Hn),Ut=ut.init(Hn,Nt)))}function wr(Rn,dn){const qn=Cr();yr(),vr(gt({startIndex:qn},Rn),dn),at.emit("reInit")}function yr(){Mt.dragHandler.destroy(),Mt.eventStore.clear(),Mt.translate.clear(),Mt.slideLooper.clear(),Mt.resizeHandler.destroy(),Mt.slidesHandler.destroy(),Mt.slidesInView.destroy(),Mt.animation.destroy(),ut.destroy(),ht.clear()}function Or(){Dt||(Dt=!0,ht.clear(),yr(),at.emit("destroy"),at.clear())}function Nr(Rn,dn,qn){!jt.active||Dt||(Mt.scrollBody.useBaseFriction().useDuration(dn===!0?0:jt.duration),Mt.scrollTo.index(Rn,qn||0))}function Lr(Rn){const dn=Mt.index.add(1).get();Nr(dn,Rn,-1)}function ar(Rn){const dn=Mt.index.add(-1).get();Nr(dn,Rn,1)}function hr(){return Mt.index.add(1).get()!==Cr()}function Qt(){return Mt.index.add(-1).get()!==Cr()}function ir(){return Mt.scrollSnapList}function Mr(){return Mt.scrollProgress.get(Mt.location.get())}function Cr(){return Mt.index.get()}function rn(){return Mt.indexPrevious.get()}function fn(){return Mt.slidesInView.get()}function Dn(){return Mt.slidesInView.get(!1)}function Yn(){return Ut}function eo(){return Mt}function Gn(){return _e}function lo(){return Ht}function mn(){return Kt}const Hn={canScrollNext:hr,canScrollPrev:Qt,containerNode:lo,internalEngine:eo,destroy:Or,off:kt,on:St,emit:Rt,plugins:Yn,previousScrollSnap:rn,reInit:It,rootNode:Gn,scrollNext:Lr,scrollPrev:ar,scrollProgress:Mr,scrollSnapList:ir,scrollTo:Nr,selectedScrollSnap:Cr,slideNodes:mn,slidesInView:fn,slidesNotInView:Dn};return vr(et,tt),setTimeout(()=>at.emit("init"),0),Hn}EmblaCarousel.globalOptions=void 0;function useEmblaCarousel(_e={},et=[]){const tt=reactExports.useRef(_e),rt=reactExports.useRef(et),[it,st]=reactExports.useState(),[ut,ht]=reactExports.useState(),at=reactExports.useCallback(()=>{it&&it.reInit(tt.current,rt.current)},[it]);return reactExports.useEffect(()=>{if(canUseDOM$1()&&ut){EmblaCarousel.globalOptions=useEmblaCarousel.globalOptions;const gt=EmblaCarousel(ut,tt.current,rt.current);return st(gt),()=>gt.destroy()}else st(void 0)},[ut,st]),reactExports.useEffect(()=>{areOptionsEqual(tt.current,_e)||(tt.current=_e,at())},[_e,at]),reactExports.useEffect(()=>{arePluginsEqual(rt.current,et)||(rt.current=et,at())},[et,at]),[ht,it]}useEmblaCarousel.globalOptions=void 0;const CarouselContext=reactExports.createContext(null);function useCarousel(){const _e=reactExports.useContext(CarouselContext);if(!_e)throw new Error("useCarousel must be used within a <Carousel />");return _e}const Carousel=reactExports.forwardRef(({orientation:_e="horizontal",opts:et,setApi:tt,plugins:rt,className:it,children:st,...ut},ht)=>{const[at,gt]=useEmblaCarousel({...et,axis:_e==="horizontal"?"x":"y"},rt),[bt,wt]=reactExports.useState(!1),[St,kt]=reactExports.useState(!1),Rt=reactExports.useCallback($t=>{$t&&(wt($t.canScrollPrev()),kt($t.canScrollNext()))},[]),It=reactExports.useCallback(()=>{gt==null||gt.scrollPrev()},[gt]),Dt=reactExports.useCallback(()=>{gt==null||gt.scrollNext()},[gt]),Mt=reactExports.useCallback($t=>{$t.key==="ArrowLeft"?($t.preventDefault(),It()):$t.key==="ArrowRight"&&($t.preventDefault(),Dt())},[It,Dt]);return reactExports.useEffect(()=>{!gt||!tt||tt(gt)},[gt,tt]),reactExports.useEffect(()=>{if(gt)return Rt(gt),gt.on("reInit",Rt),gt.on("select",Rt),()=>{gt==null||gt.off("select",Rt)}},[gt,Rt]),jsxRuntimeExports.jsx(CarouselContext.Provider,{value:{carouselRef:at,api:gt,opts:et,orientation:_e||((et==null?void 0:et.axis)==="y"?"vertical":"horizontal"),scrollPrev:It,scrollNext:Dt,canScrollPrev:bt,canScrollNext:St},children:jsxRuntimeExports.jsx("div",{ref:ht,onKeyDownCapture:Mt,className:cn("relative",it),role:"region","aria-roledescription":"carousel",...ut,children:st})})});Carousel.displayName="Carousel";const CarouselContent=reactExports.forwardRef(({className:_e,...et},tt)=>{const{carouselRef:rt,orientation:it}=useCarousel();return jsxRuntimeExports.jsx("div",{ref:rt,className:"overflow-hidden",children:jsxRuntimeExports.jsx("div",{ref:tt,className:cn("flex",it==="horizontal"?"-ml-4":"-mt-4 flex-col",_e),...et})})});CarouselContent.displayName="CarouselContent";const CarouselItem=reactExports.forwardRef(({className:_e,...et},tt)=>{const{orientation:rt}=useCarousel();return jsxRuntimeExports.jsx("div",{ref:tt,role:"group","aria-roledescription":"slide",className:cn("min-w-0 shrink-0 grow-0 basis-full",rt==="horizontal"?"pl-4":"pt-4",_e),...et})});CarouselItem.displayName="CarouselItem";const CarouselPrevious=reactExports.forwardRef(({className:_e,variant:et="outline",size:tt="icon",...rt},it)=>{const{orientation:st,scrollPrev:ut,canScrollPrev:ht}=useCarousel();return jsxRuntimeExports.jsxs(Button$1,{ref:it,variant:et,size:tt,className:cn("absolute  h-8 w-8 rounded-full",st==="horizontal"?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",_e),disabled:!ht,onClick:ut,...rt,children:[jsxRuntimeExports.jsx(ArrowLeft,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Previous slide"})]})});CarouselPrevious.displayName="CarouselPrevious";const CarouselNext=reactExports.forwardRef(({className:_e,variant:et="outline",size:tt="icon",...rt},it)=>{const{orientation:st,scrollNext:ut,canScrollNext:ht}=useCarousel();return jsxRuntimeExports.jsxs(Button$1,{ref:it,variant:et,size:tt,className:cn("absolute h-8 w-8 rounded-full",st==="horizontal"?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",_e),disabled:!ht,onClick:ut,...rt,children:[jsxRuntimeExports.jsx(ArrowRight,{className:"h-4 w-4"}),jsxRuntimeExports.jsx("span",{className:"sr-only",children:"Next slide"})]})});CarouselNext.displayName="CarouselNext";const defaultOptions$2={active:!0,breakpoints:{},delay:4e3,jump:!1,playOnInit:!0,stopOnFocusIn:!0,stopOnInteraction:!0,stopOnMouseEnter:!1,stopOnLastSnap:!1,rootNode:null};function Autoplay(_e={}){let et,tt,rt,it=!1,st=!0,ut=!1,ht=0;function at(Nt,Ut){tt=Nt;const{mergeOptions:Ht,optionsAtMedia:Kt}=Ut,tr=Ht(defaultOptions$2,Autoplay.globalOptions),mr=Ht(tr,_e);if(et=Kt(mr),tt.scrollSnapList().length<=1)return;ut=et.jump,rt=!1;const{eventStore:vr,ownerDocument:wr}=tt.internalEngine(),yr=tt.rootNode(),Or=et.rootNode&&et.rootNode(yr)||yr,Nr=tt.containerNode();tt.on("pointerDown",wt),et.stopOnInteraction||tt.on("pointerUp",bt),et.stopOnMouseEnter&&(vr.add(Or,"mouseenter",()=>{st=!1,wt()}),et.stopOnInteraction||vr.add(Or,"mouseleave",()=>{st=!0,bt()})),et.stopOnFocusIn&&(vr.add(Nr,"focusin",wt),et.stopOnInteraction||vr.add(Nr,"focusout",bt)),vr.add(wr,"visibilitychange",St),et.playOnInit&&!kt()&&bt()}function gt(){tt.off("pointerDown",wt).off("pointerUp",bt),wt(),rt=!0,it=!1}function bt(){if(rt||!st)return;it||tt.emit("autoplay:play");const{ownerWindow:Nt}=tt.internalEngine();Nt.clearInterval(ht),ht=Nt.setInterval($t,et.delay),it=!0}function wt(){if(rt)return;it&&tt.emit("autoplay:stop");const{ownerWindow:Nt}=tt.internalEngine();Nt.clearInterval(ht),ht=0,it=!1}function St(){if(kt())return st=it,wt();st&&bt()}function kt(){const{ownerDocument:Nt}=tt.internalEngine();return Nt.visibilityState==="hidden"}function Rt(Nt){typeof Nt<"u"&&(ut=Nt),st=!0,bt()}function It(){it&&wt()}function Dt(){it&&Rt()}function Mt(){return it}function $t(){const{index:Nt}=tt.internalEngine(),Ut=Nt.clone().add(1).get(),Ht=tt.scrollSnapList().length-1;et.stopOnLastSnap&&Ut===Ht&&wt(),tt.canScrollNext()?tt.scrollNext(ut):tt.scrollTo(0,ut)}return{name:"autoplay",options:_e,init:at,destroy:gt,play:Rt,stop:It,reset:Dt,isPlaying:Mt}}Autoplay.globalOptions=void 0;const Banner=({classContent:_e,images:et})=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Carousel,{className:cn("w-full h-screen items-center flex justify-center",_e),opts:{align:"start",loop:!0},plugins:[Autoplay({delay:4e3})],children:[jsxRuntimeExports.jsx(CarouselContent,{children:et.map(tt=>jsxRuntimeExports.jsx(CarouselItem,{children:jsxRuntimeExports.jsx("img",{src:tt.url,loading:"lazy",alt:`banner-${tt.id}`,className:"h-[600px] object-cover w-full rounded-md"})},tt.id))}),jsxRuntimeExports.jsx(CarouselPrevious,{}),jsxRuntimeExports.jsx(CarouselNext,{})]})}),IMAGES_SIGNUP=[{id:1,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493309/10_tcydwd.png"},{id:2,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/3_scjodd.png"},{id:3,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1730995729/1-01_p9awk5.jpg"}],IMAGES_LOGIN=[{id:1,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493309/10_tcydwd.png"},{id:2,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/3_scjodd.png"},{id:3,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1730995729/1-01_p9awk5.jpg"}],IMAGES_FORGOTPASSWORD=[{id:1,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493309/10_tcydwd.png"},{id:2,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/3_scjodd.png"},{id:3,url:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1730995729/1-01_p9awk5.jpg"}],SignupPage=()=>jsxRuntimeExports.jsxs("div",{className:"container grid md:grid-cols-5 sm:grid-cols-1 gap-8 items-center h-screen",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-2 sm:col-span-1",children:jsxRuntimeExports.jsx(Banner,{classContent:"md:max-w-xs ml-8 sm:max-w-md ",images:IMAGES_SIGNUP})}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-3 sm:col-span-1 flex flex-col gap-6 py-10",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-4xl tracking-wide font-bold py-2",children:"Sign up "}),jsxRuntimeExports.jsx("span",{children:"Lets get you all st up so you can access your personal account."})]}),jsxRuntimeExports.jsx(SignupForm,{})]})]}),ForgotPasswordForm=()=>{const[_e,et]=reactExports.useState(!1),tt=useNavigate(),rt=useForm({resolver:t(UserForgotPasswordSchema),defaultValues:{email:""}}),it=async st=>{var ht,at;et(!0);const ut=await authService.forgotPassword(st);et(!1),ut.success?(_t.success((ht=ut==null?void 0:ut.result)==null?void 0:ht.message),tt(ROUTES.VERIFY_CODE,{state:{email:rt.getValues("email"),nextState:"SET_PASSWORD"}})):_t.error((at=ut==null?void 0:ut.result)==null?void 0:at.message)};return jsxRuntimeExports.jsxs(Form,{...rt,children:[jsxRuntimeExports.jsxs("form",{onSubmit:rt.handleSubmit(it),className:"flex flex-col gap-y-3",children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:jsxRuntimeExports.jsx(FormInput,{name:"email",form:rt,placeholder:"Ex:customer@gmail.com",classContent:"col-span-2",autoFocus:!0})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",children:"Submit"})}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-extralight flex items-center justify-center gap-4",children:[jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"}),jsxRuntimeExports.jsx("span",{children:" Or Login with"}),jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"})]}),jsxRuntimeExports.jsx(OptionFormFooter,{})]}),_e&&jsxRuntimeExports.jsx(Loading,{})]})},ForgotPasswordPage$2=()=>jsxRuntimeExports.jsxs("div",{className:"container grid md:grid-cols-2 sm:grid-cols-1 gap-14 items-center h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 sm:col-span-1 flex flex-col gap-6 py-10",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})}),jsxRuntimeExports.jsxs(Link,{to:"/login",className:"flex space-x-2 cursor-pointer items-center hover:text-black",children:[jsxRuntimeExports.jsx(ChevronLeft,{}),jsxRuntimeExports.jsx("span",{children:"Back to login"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-4xl tracking-wide font-bold py-2",children:"Forgot your password? "}),jsxRuntimeExports.jsx("span",{children:"Dont worry, happens to all of us. Enter your email below to recover your password."})]}),jsxRuntimeExports.jsx(ForgotPasswordForm,{})]}),jsxRuntimeExports.jsx("div",{className:"md:col-span-1 sm:col-span-1",children:jsxRuntimeExports.jsx(Banner,{classContent:"max-w-md sm:ml-8",images:IMAGES_FORGOTPASSWORD})})]}),LoginForm=()=>{const[_e,et]=reactExports.useState(!1),tt=useNavigate(),rt=useLocation(),it=useForm({resolver:t(UserLoginSchema),defaultValues:{email:"",password:""}}),{setAuth:st}=useAuth(),ut=async ht=>{var gt,bt,wt,St,kt,Rt;et(!0);const at=await authService.login(ht);if(et(!1),at.success){localStorage.setItem("accessToken",(gt=at==null?void 0:at.result)==null?void 0:gt.data);const It=await authService.getUserInfo();It.success&&(st({user:(bt=It.result)==null?void 0:bt.data}),((wt=It.result)==null?void 0:wt.data.roleID)==1?tt(ROUTES.DASH_BOARD+"customer"):((St=rt==null?void 0:rt.state)==null?void 0:St.from)!==void 0?tt(-1):tt(ROUTES.ROOT)),_t.success((kt=at==null?void 0:at.result)==null?void 0:kt.message)}else _t.error((Rt=at==null?void 0:at.result)==null?void 0:Rt.message)};return jsxRuntimeExports.jsxs(Form,{...it,children:[jsxRuntimeExports.jsxs("form",{onSubmit:it.handleSubmit(ut),className:"w-full flex flex-col gap-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:[jsxRuntimeExports.jsx(FormInput,{name:"email",form:it,placeholder:"Ex:customer@gmail.com",classContent:"col-span-2",autoFocus:!0}),jsxRuntimeExports.jsx(FormInput,{name:"password",form:it,classContent:"col-span-2",type:"password"}),jsxRuntimeExports.jsx("div",{className:"justify-end flex text-orangeTheme text-sm col-span-2 -mt-4 font-semibold",children:jsxRuntimeExports.jsx(Link,{to:"/forgot-password",children:"Forgot password"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",disabled:it.formState.isSubmitting,children:"Login"}),jsxRuntimeExports.jsxs("div",{className:"text-sm justify-center flex gap-1",children:["Dont have an account?"," ",jsxRuntimeExports.jsx(Link,{to:"/sign-up",className:"text-orangeTheme font-semibold",children:"Sign up"})]})]}),jsxRuntimeExports.jsxs("div",{className:"text-sm font-extralight flex items-center justify-center gap-4",children:[jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"}),jsxRuntimeExports.jsx("span",{children:" Or Login with"}),jsxRuntimeExports.jsx(Separator$2,{className:"w-1/3"})]}),jsxRuntimeExports.jsx(OptionFormFooter,{})]}),_e&&jsxRuntimeExports.jsx(Loading,{})]})},LoginPage=()=>jsxRuntimeExports.jsxs("div",{className:"container grid md:grid-cols-2 sm:grid-cols-1 gap-14 items-center h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 sm:col-span-1 flex flex-col gap-6 py-10",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-4xl tracking-wide font-bold py-2",children:"Login "}),jsxRuntimeExports.jsx("span",{children:"Login to access your L&L account."})]}),jsxRuntimeExports.jsx(LoginForm,{})]}),jsxRuntimeExports.jsx("div",{className:"md:col-span-1 sm:col-span-1",children:jsxRuntimeExports.jsx(Banner,{classContent:"max-w-md sm:ml-8",images:IMAGES_LOGIN})})]}),VerifyCodeForm=()=>{var at;const[_e,et]=reactExports.useState(!1),tt=useLocation(),rt=(at=tt.state)==null?void 0:at.email,it=useNavigate(),st=useForm({resolver:t(UserVerifyCodeSchema),defaultValues:{otp:""}}),ut=async gt=>{var wt,St,kt;et(!0);const bt=await authService.verify({email:rt,...gt});et(!1),bt.success?(_t.success((wt=bt==null?void 0:bt.result)==null?void 0:wt.message),((St=tt.state)==null?void 0:St.nextState)==="SET_PASSWORD"?it(ROUTES.SET_PASSWORD,{state:{email:rt}}):it(ROUTES.LOGIN)):_t.error((kt=bt==null?void 0:bt.result)==null?void 0:kt.message)},ht=async()=>{var bt,wt;et(!0);const gt=await authService.resendOTP({email:rt});et(!1),gt.success?_t.success((bt=gt==null?void 0:gt.result)==null?void 0:bt.message):_t.error((wt=gt==null?void 0:gt.result)==null?void 0:wt.message)};return jsxRuntimeExports.jsxs(Form,{...st,children:[_e&&jsxRuntimeExports.jsx(Loading,{}),jsxRuntimeExports.jsxs("form",{onSubmit:st.handleSubmit(ut),children:[jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:jsxRuntimeExports.jsx(FormInput,{name:"otp",form:st,placeholder:"Ex: 16538",classContent:"col-span-2",autoFocus:!0})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",children:"Verify"}),jsxRuntimeExports.jsxs("div",{className:"text-sm justify-center flex gap-1",children:["Didn't received any code?"," ",jsxRuntimeExports.jsxs("span",{className:"text-orangeTheme font-semibold cursor-pointer",onClick:ht,children:[" ","Resend"]})]})]})]})]})},ForgotPasswordPage$1=()=>jsxRuntimeExports.jsxs("div",{className:"container grid md:grid-cols-2 sm:grid-cols-1 gap-14 items-center h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 sm:col-span-1 flex flex-col gap-6 py-10",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})}),jsxRuntimeExports.jsxs("div",{className:"flex space-x-2 cursor-pointer items-center",children:[jsxRuntimeExports.jsx(ChevronLeft,{}),jsxRuntimeExports.jsx("span",{children:"Back to login"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-4xl tracking-wide font-bold py-2",children:"Verify code "}),jsxRuntimeExports.jsx("span",{children:"An authentication code has been sent to your email."})]}),jsxRuntimeExports.jsx(VerifyCodeForm,{})]}),jsxRuntimeExports.jsx("div",{className:"md:col-span-1 sm:col-span-1",children:jsxRuntimeExports.jsx(Banner,{classContent:"max-w-md sm:ml-8",images:IMAGES_FORGOTPASSWORD})})]}),SetPasswordForm=()=>{var ht;const et=(ht=useLocation().state)==null?void 0:ht.email,[tt,rt]=reactExports.useState(!1),it=useNavigate(),st=useForm({resolver:t(UserSetPasswordSchema),defaultValues:{newPassword:"",confirmNewPassword:""}}),ut=async at=>{var bt,wt;rt(!0);const gt=await authService.updatePassword({...at,email:et});rt(!1),gt.success?(_t.success((bt=gt==null?void 0:gt.result)==null?void 0:bt.message),it(ROUTES.LOGIN)):_t.error((wt=gt==null?void 0:gt.result)==null?void 0:wt.message)};return jsxRuntimeExports.jsxs(Form,{...st,children:[jsxRuntimeExports.jsxs("form",{onSubmit:st.handleSubmit(ut),className:"flex flex-col gap-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:[jsxRuntimeExports.jsx(FormInput,{name:"newPassword",form:st,type:"password",classContent:"col-span-2",autoFocus:!0}),jsxRuntimeExports.jsx(FormInput,{name:"confirmNewPassword",form:st,type:"password",classContent:"col-span-2"})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",children:"Set password"})})]}),tt&&jsxRuntimeExports.jsx(Loading,{})]})},ForgotPasswordPage=()=>jsxRuntimeExports.jsxs("div",{className:"container grid md:grid-cols-2 sm:grid-cols-1 gap-14 items-center h-screen",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 sm:col-span-1 flex flex-col gap-6 py-10",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-4xl tracking-wide font-bold py-2",children:"Set your password! "}),jsxRuntimeExports.jsx("span",{children:"Your previous password has been reseted. Please set a new password for your account!"})]}),jsxRuntimeExports.jsx(SetPasswordForm,{})]}),jsxRuntimeExports.jsx("div",{className:"md:col-span-1 sm:col-span-1",children:jsxRuntimeExports.jsx(Banner,{classContent:"max-w-md sm:ml-8",images:IMAGES_FORGOTPASSWORD})})]}),badgeVariants=cva("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Badge({className:_e,variant:et,...tt}){return jsxRuntimeExports.jsx("div",{className:cn(badgeVariants({variant:et}),_e),...tt})}const NAVIGATIONS=[{id:1,title:"Home",path:"/"},{id:3,title:"Cost",path:"/cost"},{id:4,title:"Blog",path:"/blog"},{id:5,title:"About us",path:"/about-us"}];function createCollection(_e){const et=_e+"CollectionProvider",[tt,rt]=createContextScope(et),[it,st]=tt(et,{collectionRef:{current:null},itemMap:new Map}),ut=kt=>{const{scope:Rt,children:It}=kt,Dt=React$1.useRef(null),Mt=React$1.useRef(new Map).current;return jsxRuntimeExports.jsx(it,{scope:Rt,itemMap:Mt,collectionRef:Dt,children:It})};ut.displayName=et;const ht=_e+"CollectionSlot",at=React$1.forwardRef((kt,Rt)=>{const{scope:It,children:Dt}=kt,Mt=st(ht,It),$t=useComposedRefs(Rt,Mt.collectionRef);return jsxRuntimeExports.jsx(Slot,{ref:$t,children:Dt})});at.displayName=ht;const gt=_e+"CollectionItemSlot",bt="data-radix-collection-item",wt=React$1.forwardRef((kt,Rt)=>{const{scope:It,children:Dt,...Mt}=kt,$t=React$1.useRef(null),jt=useComposedRefs(Rt,$t),Nt=st(gt,It);return React$1.useEffect(()=>(Nt.itemMap.set($t,{ref:$t,...Mt}),()=>void Nt.itemMap.delete($t))),jsxRuntimeExports.jsx(Slot,{[bt]:"",ref:jt,children:Dt})});wt.displayName=gt;function St(kt){const Rt=st(_e+"CollectionConsumer",kt);return React$1.useCallback(()=>{const Dt=Rt.collectionRef.current;if(!Dt)return[];const Mt=Array.from(Dt.querySelectorAll(`[${bt}]`));return Array.from(Rt.itemMap.values()).sort((Nt,Ut)=>Mt.indexOf(Nt.ref.current)-Mt.indexOf(Ut.ref.current))},[Rt.collectionRef,Rt.itemMap])}return[{Provider:ut,Slot:at,ItemSlot:wt},St,rt]}var DirectionContext=reactExports.createContext(void 0);function useDirection(_e){const et=reactExports.useContext(DirectionContext);return _e||et||"ltr"}function useEscapeKeydown(_e,et=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef$1(_e);reactExports.useEffect(()=>{const rt=it=>{it.key==="Escape"&&tt(it)};return et.addEventListener("keydown",rt,{capture:!0}),()=>et.removeEventListener("keydown",rt,{capture:!0})},[tt,et])}var DISMISSABLE_LAYER_NAME="DismissableLayer",CONTEXT_UPDATE="dismissableLayer.update",POINTER_DOWN_OUTSIDE="dismissableLayer.pointerDownOutside",FOCUS_OUTSIDE="dismissableLayer.focusOutside",originalBodyPointerEvents,DismissableLayerContext=reactExports.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DismissableLayer=reactExports.forwardRef((_e,et)=>{const{disableOutsidePointerEvents:tt=!1,onEscapeKeyDown:rt,onPointerDownOutside:it,onFocusOutside:st,onInteractOutside:ut,onDismiss:ht,...at}=_e,gt=reactExports.useContext(DismissableLayerContext),[bt,wt]=reactExports.useState(null),St=(bt==null?void 0:bt.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,kt]=reactExports.useState({}),Rt=useComposedRefs(et,Kt=>wt(Kt)),It=Array.from(gt.layers),[Dt]=[...gt.layersWithOutsidePointerEventsDisabled].slice(-1),Mt=It.indexOf(Dt),$t=bt?It.indexOf(bt):-1,jt=gt.layersWithOutsidePointerEventsDisabled.size>0,Nt=$t>=Mt,Ut=usePointerDownOutside(Kt=>{const tr=Kt.target,mr=[...gt.branches].some(vr=>vr.contains(tr));!Nt||mr||(it==null||it(Kt),ut==null||ut(Kt),Kt.defaultPrevented||ht==null||ht())},St),Ht=useFocusOutside(Kt=>{const tr=Kt.target;[...gt.branches].some(vr=>vr.contains(tr))||(st==null||st(Kt),ut==null||ut(Kt),Kt.defaultPrevented||ht==null||ht())},St);return useEscapeKeydown(Kt=>{$t===gt.layers.size-1&&(rt==null||rt(Kt),!Kt.defaultPrevented&&ht&&(Kt.preventDefault(),ht()))},St),reactExports.useEffect(()=>{if(bt)return tt&&(gt.layersWithOutsidePointerEventsDisabled.size===0&&(originalBodyPointerEvents=St.body.style.pointerEvents,St.body.style.pointerEvents="none"),gt.layersWithOutsidePointerEventsDisabled.add(bt)),gt.layers.add(bt),dispatchUpdate(),()=>{tt&&gt.layersWithOutsidePointerEventsDisabled.size===1&&(St.body.style.pointerEvents=originalBodyPointerEvents)}},[bt,St,tt,gt]),reactExports.useEffect(()=>()=>{bt&&(gt.layers.delete(bt),gt.layersWithOutsidePointerEventsDisabled.delete(bt),dispatchUpdate())},[bt,gt]),reactExports.useEffect(()=>{const Kt=()=>kt({});return document.addEventListener(CONTEXT_UPDATE,Kt),()=>document.removeEventListener(CONTEXT_UPDATE,Kt)},[]),jsxRuntimeExports.jsx(Primitive.div,{...at,ref:Rt,style:{pointerEvents:jt?Nt?"auto":"none":void 0,..._e.style},onFocusCapture:composeEventHandlers(_e.onFocusCapture,Ht.onFocusCapture),onBlurCapture:composeEventHandlers(_e.onBlurCapture,Ht.onBlurCapture),onPointerDownCapture:composeEventHandlers(_e.onPointerDownCapture,Ut.onPointerDownCapture)})});DismissableLayer.displayName=DISMISSABLE_LAYER_NAME;var BRANCH_NAME="DismissableLayerBranch",DismissableLayerBranch=reactExports.forwardRef((_e,et)=>{const tt=reactExports.useContext(DismissableLayerContext),rt=reactExports.useRef(null),it=useComposedRefs(et,rt);return reactExports.useEffect(()=>{const st=rt.current;if(st)return tt.branches.add(st),()=>{tt.branches.delete(st)}},[tt.branches]),jsxRuntimeExports.jsx(Primitive.div,{..._e,ref:it})});DismissableLayerBranch.displayName=BRANCH_NAME;function usePointerDownOutside(_e,et=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef$1(_e),rt=reactExports.useRef(!1),it=reactExports.useRef(()=>{});return reactExports.useEffect(()=>{const st=ht=>{if(ht.target&&!rt.current){let at=function(){handleAndDispatchCustomEvent(POINTER_DOWN_OUTSIDE,tt,gt,{discrete:!0})};const gt={originalEvent:ht};ht.pointerType==="touch"?(et.removeEventListener("click",it.current),it.current=at,et.addEventListener("click",it.current,{once:!0})):at()}else et.removeEventListener("click",it.current);rt.current=!1},ut=window.setTimeout(()=>{et.addEventListener("pointerdown",st)},0);return()=>{window.clearTimeout(ut),et.removeEventListener("pointerdown",st),et.removeEventListener("click",it.current)}},[et,tt]),{onPointerDownCapture:()=>rt.current=!0}}function useFocusOutside(_e,et=globalThis==null?void 0:globalThis.document){const tt=useCallbackRef$1(_e),rt=reactExports.useRef(!1);return reactExports.useEffect(()=>{const it=st=>{st.target&&!rt.current&&handleAndDispatchCustomEvent(FOCUS_OUTSIDE,tt,{originalEvent:st},{discrete:!1})};return et.addEventListener("focusin",it),()=>et.removeEventListener("focusin",it)},[et,tt]),{onFocusCapture:()=>rt.current=!0,onBlurCapture:()=>rt.current=!1}}function dispatchUpdate(){const _e=new CustomEvent(CONTEXT_UPDATE);document.dispatchEvent(_e)}function handleAndDispatchCustomEvent(_e,et,tt,{discrete:rt}){const it=tt.originalEvent.target,st=new CustomEvent(_e,{bubbles:!1,cancelable:!0,detail:tt});et&&it.addEventListener(_e,et,{once:!0}),rt?dispatchDiscreteCustomEvent(it,st):it.dispatchEvent(st)}var count$1=0;function useFocusGuards(){reactExports.useEffect(()=>{const _e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",_e[0]??createFocusGuard()),document.body.insertAdjacentElement("beforeend",_e[1]??createFocusGuard()),count$1++,()=>{count$1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(et=>et.remove()),count$1--}},[])}function createFocusGuard(){const _e=document.createElement("span");return _e.setAttribute("data-radix-focus-guard",""),_e.tabIndex=0,_e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",_e}var AUTOFOCUS_ON_MOUNT="focusScope.autoFocusOnMount",AUTOFOCUS_ON_UNMOUNT="focusScope.autoFocusOnUnmount",EVENT_OPTIONS$1={bubbles:!1,cancelable:!0},FOCUS_SCOPE_NAME="FocusScope",FocusScope=reactExports.forwardRef((_e,et)=>{const{loop:tt=!1,trapped:rt=!1,onMountAutoFocus:it,onUnmountAutoFocus:st,...ut}=_e,[ht,at]=reactExports.useState(null),gt=useCallbackRef$1(it),bt=useCallbackRef$1(st),wt=reactExports.useRef(null),St=useComposedRefs(et,It=>at(It)),kt=reactExports.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;reactExports.useEffect(()=>{if(rt){let It=function(jt){if(kt.paused||!ht)return;const Nt=jt.target;ht.contains(Nt)?wt.current=Nt:focus(wt.current,{select:!0})},Dt=function(jt){if(kt.paused||!ht)return;const Nt=jt.relatedTarget;Nt!==null&&(ht.contains(Nt)||focus(wt.current,{select:!0}))},Mt=function(jt){if(document.activeElement===document.body)for(const Ut of jt)Ut.removedNodes.length>0&&focus(ht)};document.addEventListener("focusin",It),document.addEventListener("focusout",Dt);const $t=new MutationObserver(Mt);return ht&&$t.observe(ht,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",It),document.removeEventListener("focusout",Dt),$t.disconnect()}}},[rt,ht,kt.paused]),reactExports.useEffect(()=>{if(ht){focusScopesStack.add(kt);const It=document.activeElement;if(!ht.contains(It)){const Mt=new CustomEvent(AUTOFOCUS_ON_MOUNT,EVENT_OPTIONS$1);ht.addEventListener(AUTOFOCUS_ON_MOUNT,gt),ht.dispatchEvent(Mt),Mt.defaultPrevented||(focusFirst$2(removeLinks(getTabbableCandidates(ht)),{select:!0}),document.activeElement===It&&focus(ht))}return()=>{ht.removeEventListener(AUTOFOCUS_ON_MOUNT,gt),setTimeout(()=>{const Mt=new CustomEvent(AUTOFOCUS_ON_UNMOUNT,EVENT_OPTIONS$1);ht.addEventListener(AUTOFOCUS_ON_UNMOUNT,bt),ht.dispatchEvent(Mt),Mt.defaultPrevented||focus(It??document.body,{select:!0}),ht.removeEventListener(AUTOFOCUS_ON_UNMOUNT,bt),focusScopesStack.remove(kt)},0)}}},[ht,gt,bt,kt]);const Rt=reactExports.useCallback(It=>{if(!tt&&!rt||kt.paused)return;const Dt=It.key==="Tab"&&!It.altKey&&!It.ctrlKey&&!It.metaKey,Mt=document.activeElement;if(Dt&&Mt){const $t=It.currentTarget,[jt,Nt]=getTabbableEdges($t);jt&&Nt?!It.shiftKey&&Mt===Nt?(It.preventDefault(),tt&&focus(jt,{select:!0})):It.shiftKey&&Mt===jt&&(It.preventDefault(),tt&&focus(Nt,{select:!0})):Mt===$t&&It.preventDefault()}},[tt,rt,kt.paused]);return jsxRuntimeExports.jsx(Primitive.div,{tabIndex:-1,...ut,ref:St,onKeyDown:Rt})});FocusScope.displayName=FOCUS_SCOPE_NAME;function focusFirst$2(_e,{select:et=!1}={}){const tt=document.activeElement;for(const rt of _e)if(focus(rt,{select:et}),document.activeElement!==tt)return}function getTabbableEdges(_e){const et=getTabbableCandidates(_e),tt=findVisible(et,_e),rt=findVisible(et.reverse(),_e);return[tt,rt]}function getTabbableCandidates(_e){const et=[],tt=document.createTreeWalker(_e,NodeFilter.SHOW_ELEMENT,{acceptNode:rt=>{const it=rt.tagName==="INPUT"&&rt.type==="hidden";return rt.disabled||rt.hidden||it?NodeFilter.FILTER_SKIP:rt.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;tt.nextNode();)et.push(tt.currentNode);return et}function findVisible(_e,et){for(const tt of _e)if(!isHidden(tt,{upTo:et}))return tt}function isHidden(_e,{upTo:et}){if(getComputedStyle(_e).visibility==="hidden")return!0;for(;_e;){if(et!==void 0&&_e===et)return!1;if(getComputedStyle(_e).display==="none")return!0;_e=_e.parentElement}return!1}function isSelectableInput(_e){return _e instanceof HTMLInputElement&&"select"in _e}function focus(_e,{select:et=!1}={}){if(_e&&_e.focus){const tt=document.activeElement;_e.focus({preventScroll:!0}),_e!==tt&&isSelectableInput(_e)&&et&&_e.select()}}var focusScopesStack=createFocusScopesStack();function createFocusScopesStack(){let _e=[];return{add(et){const tt=_e[0];et!==tt&&(tt==null||tt.pause()),_e=arrayRemove(_e,et),_e.unshift(et)},remove(et){var tt;_e=arrayRemove(_e,et),(tt=_e[0])==null||tt.resume()}}}function arrayRemove(_e,et){const tt=[..._e],rt=tt.indexOf(et);return rt!==-1&&tt.splice(rt,1),tt}function removeLinks(_e){return _e.filter(et=>et.tagName!=="A")}var useReactId=React$2.useId||(()=>{}),count=0;function useId$1(_e){const[et,tt]=reactExports.useState(useReactId());return useLayoutEffect2(()=>{tt(rt=>rt??String(count++))},[_e]),et?`radix-${et}`:""}const sides=["top","right","bottom","left"],min$1=Math.min,max$1=Math.max,round=Math.round,floor=Math.floor,createCoords=_e=>({x:_e,y:_e}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$1(_e,et,tt){return max$1(_e,min$1(et,tt))}function evaluate(_e,et){return typeof _e=="function"?_e(et):_e}function getSide(_e){return _e.split("-")[0]}function getAlignment(_e){return _e.split("-")[1]}function getOppositeAxis(_e){return _e==="x"?"y":"x"}function getAxisLength(_e){return _e==="y"?"height":"width"}function getSideAxis(_e){return["top","bottom"].includes(getSide(_e))?"y":"x"}function getAlignmentAxis(_e){return getOppositeAxis(getSideAxis(_e))}function getAlignmentSides(_e,et,tt){tt===void 0&&(tt=!1);const rt=getAlignment(_e),it=getAlignmentAxis(_e),st=getAxisLength(it);let ut=it==="x"?rt===(tt?"end":"start")?"right":"left":rt==="start"?"bottom":"top";return et.reference[st]>et.floating[st]&&(ut=getOppositePlacement(ut)),[ut,getOppositePlacement(ut)]}function getExpandedPlacements(_e){const et=getOppositePlacement(_e);return[getOppositeAlignmentPlacement(_e),et,getOppositeAlignmentPlacement(et)]}function getOppositeAlignmentPlacement(_e){return _e.replace(/start|end/g,et=>oppositeAlignmentMap[et])}function getSideList(_e,et,tt){const rt=["left","right"],it=["right","left"],st=["top","bottom"],ut=["bottom","top"];switch(_e){case"top":case"bottom":return tt?et?it:rt:et?rt:it;case"left":case"right":return et?st:ut;default:return[]}}function getOppositeAxisPlacements(_e,et,tt,rt){const it=getAlignment(_e);let st=getSideList(getSide(_e),tt==="start",rt);return it&&(st=st.map(ut=>ut+"-"+it),et&&(st=st.concat(st.map(getOppositeAlignmentPlacement)))),st}function getOppositePlacement(_e){return _e.replace(/left|right|bottom|top/g,et=>oppositeSideMap[et])}function expandPaddingObject(_e){return{top:0,right:0,bottom:0,left:0,..._e}}function getPaddingObject(_e){return typeof _e!="number"?expandPaddingObject(_e):{top:_e,right:_e,bottom:_e,left:_e}}function rectToClientRect(_e){const{x:et,y:tt,width:rt,height:it}=_e;return{width:rt,height:it,top:tt,left:et,right:et+rt,bottom:tt+it,x:et,y:tt}}function computeCoordsFromPlacement(_e,et,tt){let{reference:rt,floating:it}=_e;const st=getSideAxis(et),ut=getAlignmentAxis(et),ht=getAxisLength(ut),at=getSide(et),gt=st==="y",bt=rt.x+rt.width/2-it.width/2,wt=rt.y+rt.height/2-it.height/2,St=rt[ht]/2-it[ht]/2;let kt;switch(at){case"top":kt={x:bt,y:rt.y-it.height};break;case"bottom":kt={x:bt,y:rt.y+rt.height};break;case"right":kt={x:rt.x+rt.width,y:wt};break;case"left":kt={x:rt.x-it.width,y:wt};break;default:kt={x:rt.x,y:rt.y}}switch(getAlignment(et)){case"start":kt[ut]-=St*(tt&&gt?-1:1);break;case"end":kt[ut]+=St*(tt&&gt?-1:1);break}return kt}const computePosition$1=async(_e,et,tt)=>{const{placement:rt="bottom",strategy:it="absolute",middleware:st=[],platform:ut}=tt,ht=st.filter(Boolean),at=await(ut.isRTL==null?void 0:ut.isRTL(et));let gt=await ut.getElementRects({reference:_e,floating:et,strategy:it}),{x:bt,y:wt}=computeCoordsFromPlacement(gt,rt,at),St=rt,kt={},Rt=0;for(let It=0;It<ht.length;It++){const{name:Dt,fn:Mt}=ht[It],{x:$t,y:jt,data:Nt,reset:Ut}=await Mt({x:bt,y:wt,initialPlacement:rt,placement:St,strategy:it,middlewareData:kt,rects:gt,platform:ut,elements:{reference:_e,floating:et}});bt=$t??bt,wt=jt??wt,kt={...kt,[Dt]:{...kt[Dt],...Nt}},Ut&&Rt<=50&&(Rt++,typeof Ut=="object"&&(Ut.placement&&(St=Ut.placement),Ut.rects&&(gt=Ut.rects===!0?await ut.getElementRects({reference:_e,floating:et,strategy:it}):Ut.rects),{x:bt,y:wt}=computeCoordsFromPlacement(gt,St,at)),It=-1)}return{x:bt,y:wt,placement:St,strategy:it,middlewareData:kt}};async function detectOverflow(_e,et){var tt;et===void 0&&(et={});const{x:rt,y:it,platform:st,rects:ut,elements:ht,strategy:at}=_e,{boundary:gt="clippingAncestors",rootBoundary:bt="viewport",elementContext:wt="floating",altBoundary:St=!1,padding:kt=0}=evaluate(et,_e),Rt=getPaddingObject(kt),Dt=ht[St?wt==="floating"?"reference":"floating":wt],Mt=rectToClientRect(await st.getClippingRect({element:(tt=await(st.isElement==null?void 0:st.isElement(Dt)))==null||tt?Dt:Dt.contextElement||await(st.getDocumentElement==null?void 0:st.getDocumentElement(ht.floating)),boundary:gt,rootBoundary:bt,strategy:at})),$t=wt==="floating"?{x:rt,y:it,width:ut.floating.width,height:ut.floating.height}:ut.reference,jt=await(st.getOffsetParent==null?void 0:st.getOffsetParent(ht.floating)),Nt=await(st.isElement==null?void 0:st.isElement(jt))?await(st.getScale==null?void 0:st.getScale(jt))||{x:1,y:1}:{x:1,y:1},Ut=rectToClientRect(st.convertOffsetParentRelativeRectToViewportRelativeRect?await st.convertOffsetParentRelativeRectToViewportRelativeRect({elements:ht,rect:$t,offsetParent:jt,strategy:at}):$t);return{top:(Mt.top-Ut.top+Rt.top)/Nt.y,bottom:(Ut.bottom-Mt.bottom+Rt.bottom)/Nt.y,left:(Mt.left-Ut.left+Rt.left)/Nt.x,right:(Ut.right-Mt.right+Rt.right)/Nt.x}}const arrow$3=_e=>({name:"arrow",options:_e,async fn(et){const{x:tt,y:rt,placement:it,rects:st,platform:ut,elements:ht,middlewareData:at}=et,{element:gt,padding:bt=0}=evaluate(_e,et)||{};if(gt==null)return{};const wt=getPaddingObject(bt),St={x:tt,y:rt},kt=getAlignmentAxis(it),Rt=getAxisLength(kt),It=await ut.getDimensions(gt),Dt=kt==="y",Mt=Dt?"top":"left",$t=Dt?"bottom":"right",jt=Dt?"clientHeight":"clientWidth",Nt=st.reference[Rt]+st.reference[kt]-St[kt]-st.floating[Rt],Ut=St[kt]-st.reference[kt],Ht=await(ut.getOffsetParent==null?void 0:ut.getOffsetParent(gt));let Kt=Ht?Ht[jt]:0;(!Kt||!await(ut.isElement==null?void 0:ut.isElement(Ht)))&&(Kt=ht.floating[jt]||st.floating[Rt]);const tr=Nt/2-Ut/2,mr=Kt/2-It[Rt]/2-1,vr=min$1(wt[Mt],mr),wr=min$1(wt[$t],mr),yr=vr,Or=Kt-It[Rt]-wr,Nr=Kt/2-It[Rt]/2+tr,Lr=clamp$1(yr,Nr,Or),ar=!at.arrow&&getAlignment(it)!=null&&Nr!==Lr&&st.reference[Rt]/2-(Nr<yr?vr:wr)-It[Rt]/2<0,hr=ar?Nr<yr?Nr-yr:Nr-Or:0;return{[kt]:St[kt]+hr,data:{[kt]:Lr,centerOffset:Nr-Lr-hr,...ar&&{alignmentOffset:hr}},reset:ar}}}),flip$2=function(_e){return _e===void 0&&(_e={}),{name:"flip",options:_e,async fn(et){var tt,rt;const{placement:it,middlewareData:st,rects:ut,initialPlacement:ht,platform:at,elements:gt}=et,{mainAxis:bt=!0,crossAxis:wt=!0,fallbackPlacements:St,fallbackStrategy:kt="bestFit",fallbackAxisSideDirection:Rt="none",flipAlignment:It=!0,...Dt}=evaluate(_e,et);if((tt=st.arrow)!=null&&tt.alignmentOffset)return{};const Mt=getSide(it),$t=getSideAxis(ht),jt=getSide(ht)===ht,Nt=await(at.isRTL==null?void 0:at.isRTL(gt.floating)),Ut=St||(jt||!It?[getOppositePlacement(ht)]:getExpandedPlacements(ht)),Ht=Rt!=="none";!St&&Ht&&Ut.push(...getOppositeAxisPlacements(ht,It,Rt,Nt));const Kt=[ht,...Ut],tr=await detectOverflow(et,Dt),mr=[];let vr=((rt=st.flip)==null?void 0:rt.overflows)||[];if(bt&&mr.push(tr[Mt]),wt){const Nr=getAlignmentSides(it,ut,Nt);mr.push(tr[Nr[0]],tr[Nr[1]])}if(vr=[...vr,{placement:it,overflows:mr}],!mr.every(Nr=>Nr<=0)){var wr,yr;const Nr=(((wr=st.flip)==null?void 0:wr.index)||0)+1,Lr=Kt[Nr];if(Lr)return{data:{index:Nr,overflows:vr},reset:{placement:Lr}};let ar=(yr=vr.filter(hr=>hr.overflows[0]<=0).sort((hr,Qt)=>hr.overflows[1]-Qt.overflows[1])[0])==null?void 0:yr.placement;if(!ar)switch(kt){case"bestFit":{var Or;const hr=(Or=vr.filter(Qt=>{if(Ht){const ir=getSideAxis(Qt.placement);return ir===$t||ir==="y"}return!0}).map(Qt=>[Qt.placement,Qt.overflows.filter(ir=>ir>0).reduce((ir,Mr)=>ir+Mr,0)]).sort((Qt,ir)=>Qt[1]-ir[1])[0])==null?void 0:Or[0];hr&&(ar=hr);break}case"initialPlacement":ar=ht;break}if(it!==ar)return{reset:{placement:ar}}}return{}}}};function getSideOffsets(_e,et){return{top:_e.top-et.height,right:_e.right-et.width,bottom:_e.bottom-et.height,left:_e.left-et.width}}function isAnySideFullyClipped(_e){return sides.some(et=>_e[et]>=0)}const hide$2=function(_e){return _e===void 0&&(_e={}),{name:"hide",options:_e,async fn(et){const{rects:tt}=et,{strategy:rt="referenceHidden",...it}=evaluate(_e,et);switch(rt){case"referenceHidden":{const st=await detectOverflow(et,{...it,elementContext:"reference"}),ut=getSideOffsets(st,tt.reference);return{data:{referenceHiddenOffsets:ut,referenceHidden:isAnySideFullyClipped(ut)}}}case"escaped":{const st=await detectOverflow(et,{...it,altBoundary:!0}),ut=getSideOffsets(st,tt.floating);return{data:{escapedOffsets:ut,escaped:isAnySideFullyClipped(ut)}}}default:return{}}}}};async function convertValueToCoords(_e,et){const{placement:tt,platform:rt,elements:it}=_e,st=await(rt.isRTL==null?void 0:rt.isRTL(it.floating)),ut=getSide(tt),ht=getAlignment(tt),at=getSideAxis(tt)==="y",gt=["left","top"].includes(ut)?-1:1,bt=st&&at?-1:1,wt=evaluate(et,_e);let{mainAxis:St,crossAxis:kt,alignmentAxis:Rt}=typeof wt=="number"?{mainAxis:wt,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...wt};return ht&&typeof Rt=="number"&&(kt=ht==="end"?Rt*-1:Rt),at?{x:kt*bt,y:St*gt}:{x:St*gt,y:kt*bt}}const offset$2=function(_e){return _e===void 0&&(_e=0),{name:"offset",options:_e,async fn(et){var tt,rt;const{x:it,y:st,placement:ut,middlewareData:ht}=et,at=await convertValueToCoords(et,_e);return ut===((tt=ht.offset)==null?void 0:tt.placement)&&(rt=ht.arrow)!=null&&rt.alignmentOffset?{}:{x:it+at.x,y:st+at.y,data:{...at,placement:ut}}}}},shift$2=function(_e){return _e===void 0&&(_e={}),{name:"shift",options:_e,async fn(et){const{x:tt,y:rt,placement:it}=et,{mainAxis:st=!0,crossAxis:ut=!1,limiter:ht={fn:Dt=>{let{x:Mt,y:$t}=Dt;return{x:Mt,y:$t}}},...at}=evaluate(_e,et),gt={x:tt,y:rt},bt=await detectOverflow(et,at),wt=getSideAxis(getSide(it)),St=getOppositeAxis(wt);let kt=gt[St],Rt=gt[wt];if(st){const Dt=St==="y"?"top":"left",Mt=St==="y"?"bottom":"right",$t=kt+bt[Dt],jt=kt-bt[Mt];kt=clamp$1($t,kt,jt)}if(ut){const Dt=wt==="y"?"top":"left",Mt=wt==="y"?"bottom":"right",$t=Rt+bt[Dt],jt=Rt-bt[Mt];Rt=clamp$1($t,Rt,jt)}const It=ht.fn({...et,[St]:kt,[wt]:Rt});return{...It,data:{x:It.x-tt,y:It.y-rt}}}}},limitShift$2=function(_e){return _e===void 0&&(_e={}),{options:_e,fn(et){const{x:tt,y:rt,placement:it,rects:st,middlewareData:ut}=et,{offset:ht=0,mainAxis:at=!0,crossAxis:gt=!0}=evaluate(_e,et),bt={x:tt,y:rt},wt=getSideAxis(it),St=getOppositeAxis(wt);let kt=bt[St],Rt=bt[wt];const It=evaluate(ht,et),Dt=typeof It=="number"?{mainAxis:It,crossAxis:0}:{mainAxis:0,crossAxis:0,...It};if(at){const jt=St==="y"?"height":"width",Nt=st.reference[St]-st.floating[jt]+Dt.mainAxis,Ut=st.reference[St]+st.reference[jt]-Dt.mainAxis;kt<Nt?kt=Nt:kt>Ut&&(kt=Ut)}if(gt){var Mt,$t;const jt=St==="y"?"width":"height",Nt=["top","left"].includes(getSide(it)),Ut=st.reference[wt]-st.floating[jt]+(Nt&&((Mt=ut.offset)==null?void 0:Mt[wt])||0)+(Nt?0:Dt.crossAxis),Ht=st.reference[wt]+st.reference[jt]+(Nt?0:(($t=ut.offset)==null?void 0:$t[wt])||0)-(Nt?Dt.crossAxis:0);Rt<Ut?Rt=Ut:Rt>Ht&&(Rt=Ht)}return{[St]:kt,[wt]:Rt}}}},size$2=function(_e){return _e===void 0&&(_e={}),{name:"size",options:_e,async fn(et){const{placement:tt,rects:rt,platform:it,elements:st}=et,{apply:ut=()=>{},...ht}=evaluate(_e,et),at=await detectOverflow(et,ht),gt=getSide(tt),bt=getAlignment(tt),wt=getSideAxis(tt)==="y",{width:St,height:kt}=rt.floating;let Rt,It;gt==="top"||gt==="bottom"?(Rt=gt,It=bt===(await(it.isRTL==null?void 0:it.isRTL(st.floating))?"start":"end")?"left":"right"):(It=gt,Rt=bt==="end"?"top":"bottom");const Dt=kt-at.top-at.bottom,Mt=St-at.left-at.right,$t=min$1(kt-at[Rt],Dt),jt=min$1(St-at[It],Mt),Nt=!et.middlewareData.shift;let Ut=$t,Ht=jt;if(wt?Ht=bt||Nt?min$1(jt,Mt):Mt:Ut=bt||Nt?min$1($t,Dt):Dt,Nt&&!bt){const tr=max$1(at.left,0),mr=max$1(at.right,0),vr=max$1(at.top,0),wr=max$1(at.bottom,0);wt?Ht=St-2*(tr!==0||mr!==0?tr+mr:max$1(at.left,at.right)):Ut=kt-2*(vr!==0||wr!==0?vr+wr:max$1(at.top,at.bottom))}await ut({...et,availableWidth:Ht,availableHeight:Ut});const Kt=await it.getDimensions(st.floating);return St!==Kt.width||kt!==Kt.height?{reset:{rects:!0}}:{}}}};function getNodeName(_e){return isNode(_e)?(_e.nodeName||"").toLowerCase():"#document"}function getWindow(_e){var et;return(_e==null||(et=_e.ownerDocument)==null?void 0:et.defaultView)||window}function getDocumentElement(_e){var et;return(et=(isNode(_e)?_e.ownerDocument:_e.document)||window.document)==null?void 0:et.documentElement}function isNode(_e){return _e instanceof Node||_e instanceof getWindow(_e).Node}function isElement(_e){return _e instanceof Element||_e instanceof getWindow(_e).Element}function isHTMLElement(_e){return _e instanceof HTMLElement||_e instanceof getWindow(_e).HTMLElement}function isShadowRoot(_e){return typeof ShadowRoot>"u"?!1:_e instanceof ShadowRoot||_e instanceof getWindow(_e).ShadowRoot}function isOverflowElement(_e){const{overflow:et,overflowX:tt,overflowY:rt,display:it}=getComputedStyle$1(_e);return/auto|scroll|overlay|hidden|clip/.test(et+rt+tt)&&!["inline","contents"].includes(it)}function isTableElement(_e){return["table","td","th"].includes(getNodeName(_e))}function isTopLayer(_e){return[":popover-open",":modal"].some(et=>{try{return _e.matches(et)}catch{return!1}})}function isContainingBlock(_e){const et=isWebKit(),tt=isElement(_e)?getComputedStyle$1(_e):_e;return tt.transform!=="none"||tt.perspective!=="none"||(tt.containerType?tt.containerType!=="normal":!1)||!et&&(tt.backdropFilter?tt.backdropFilter!=="none":!1)||!et&&(tt.filter?tt.filter!=="none":!1)||["transform","perspective","filter"].some(rt=>(tt.willChange||"").includes(rt))||["paint","layout","strict","content"].some(rt=>(tt.contain||"").includes(rt))}function getContainingBlock(_e){let et=getParentNode(_e);for(;isHTMLElement(et)&&!isLastTraversableNode(et);){if(isContainingBlock(et))return et;if(isTopLayer(et))return null;et=getParentNode(et)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(_e){return["html","body","#document"].includes(getNodeName(_e))}function getComputedStyle$1(_e){return getWindow(_e).getComputedStyle(_e)}function getNodeScroll(_e){return isElement(_e)?{scrollLeft:_e.scrollLeft,scrollTop:_e.scrollTop}:{scrollLeft:_e.scrollX,scrollTop:_e.scrollY}}function getParentNode(_e){if(getNodeName(_e)==="html")return _e;const et=_e.assignedSlot||_e.parentNode||isShadowRoot(_e)&&_e.host||getDocumentElement(_e);return isShadowRoot(et)?et.host:et}function getNearestOverflowAncestor(_e){const et=getParentNode(_e);return isLastTraversableNode(et)?_e.ownerDocument?_e.ownerDocument.body:_e.body:isHTMLElement(et)&&isOverflowElement(et)?et:getNearestOverflowAncestor(et)}function getOverflowAncestors(_e,et,tt){var rt;et===void 0&&(et=[]),tt===void 0&&(tt=!0);const it=getNearestOverflowAncestor(_e),st=it===((rt=_e.ownerDocument)==null?void 0:rt.body),ut=getWindow(it);return st?et.concat(ut,ut.visualViewport||[],isOverflowElement(it)?it:[],ut.frameElement&&tt?getOverflowAncestors(ut.frameElement):[]):et.concat(it,getOverflowAncestors(it,[],tt))}function getCssDimensions(_e){const et=getComputedStyle$1(_e);let tt=parseFloat(et.width)||0,rt=parseFloat(et.height)||0;const it=isHTMLElement(_e),st=it?_e.offsetWidth:tt,ut=it?_e.offsetHeight:rt,ht=round(tt)!==st||round(rt)!==ut;return ht&&(tt=st,rt=ut),{width:tt,height:rt,$:ht}}function unwrapElement(_e){return isElement(_e)?_e:_e.contextElement}function getScale(_e){const et=unwrapElement(_e);if(!isHTMLElement(et))return createCoords(1);const tt=et.getBoundingClientRect(),{width:rt,height:it,$:st}=getCssDimensions(et);let ut=(st?round(tt.width):tt.width)/rt,ht=(st?round(tt.height):tt.height)/it;return(!ut||!Number.isFinite(ut))&&(ut=1),(!ht||!Number.isFinite(ht))&&(ht=1),{x:ut,y:ht}}const noOffsets=createCoords(0);function getVisualOffsets(_e){const et=getWindow(_e);return!isWebKit()||!et.visualViewport?noOffsets:{x:et.visualViewport.offsetLeft,y:et.visualViewport.offsetTop}}function shouldAddVisualOffsets(_e,et,tt){return et===void 0&&(et=!1),!tt||et&&tt!==getWindow(_e)?!1:et}function getBoundingClientRect(_e,et,tt,rt){et===void 0&&(et=!1),tt===void 0&&(tt=!1);const it=_e.getBoundingClientRect(),st=unwrapElement(_e);let ut=createCoords(1);et&&(rt?isElement(rt)&&(ut=getScale(rt)):ut=getScale(_e));const ht=shouldAddVisualOffsets(st,tt,rt)?getVisualOffsets(st):createCoords(0);let at=(it.left+ht.x)/ut.x,gt=(it.top+ht.y)/ut.y,bt=it.width/ut.x,wt=it.height/ut.y;if(st){const St=getWindow(st),kt=rt&&isElement(rt)?getWindow(rt):rt;let Rt=St,It=Rt.frameElement;for(;It&&rt&&kt!==Rt;){const Dt=getScale(It),Mt=It.getBoundingClientRect(),$t=getComputedStyle$1(It),jt=Mt.left+(It.clientLeft+parseFloat($t.paddingLeft))*Dt.x,Nt=Mt.top+(It.clientTop+parseFloat($t.paddingTop))*Dt.y;at*=Dt.x,gt*=Dt.y,bt*=Dt.x,wt*=Dt.y,at+=jt,gt+=Nt,Rt=getWindow(It),It=Rt.frameElement}}return rectToClientRect({width:bt,height:wt,x:at,y:gt})}function convertOffsetParentRelativeRectToViewportRelativeRect(_e){let{elements:et,rect:tt,offsetParent:rt,strategy:it}=_e;const st=it==="fixed",ut=getDocumentElement(rt),ht=et?isTopLayer(et.floating):!1;if(rt===ut||ht&&st)return tt;let at={scrollLeft:0,scrollTop:0},gt=createCoords(1);const bt=createCoords(0),wt=isHTMLElement(rt);if((wt||!wt&&!st)&&((getNodeName(rt)!=="body"||isOverflowElement(ut))&&(at=getNodeScroll(rt)),isHTMLElement(rt))){const St=getBoundingClientRect(rt);gt=getScale(rt),bt.x=St.x+rt.clientLeft,bt.y=St.y+rt.clientTop}return{width:tt.width*gt.x,height:tt.height*gt.y,x:tt.x*gt.x-at.scrollLeft*gt.x+bt.x,y:tt.y*gt.y-at.scrollTop*gt.y+bt.y}}function getClientRects(_e){return Array.from(_e.getClientRects())}function getWindowScrollBarX(_e){return getBoundingClientRect(getDocumentElement(_e)).left+getNodeScroll(_e).scrollLeft}function getDocumentRect(_e){const et=getDocumentElement(_e),tt=getNodeScroll(_e),rt=_e.ownerDocument.body,it=max$1(et.scrollWidth,et.clientWidth,rt.scrollWidth,rt.clientWidth),st=max$1(et.scrollHeight,et.clientHeight,rt.scrollHeight,rt.clientHeight);let ut=-tt.scrollLeft+getWindowScrollBarX(_e);const ht=-tt.scrollTop;return getComputedStyle$1(rt).direction==="rtl"&&(ut+=max$1(et.clientWidth,rt.clientWidth)-it),{width:it,height:st,x:ut,y:ht}}function getViewportRect(_e,et){const tt=getWindow(_e),rt=getDocumentElement(_e),it=tt.visualViewport;let st=rt.clientWidth,ut=rt.clientHeight,ht=0,at=0;if(it){st=it.width,ut=it.height;const gt=isWebKit();(!gt||gt&&et==="fixed")&&(ht=it.offsetLeft,at=it.offsetTop)}return{width:st,height:ut,x:ht,y:at}}function getInnerBoundingClientRect(_e,et){const tt=getBoundingClientRect(_e,!0,et==="fixed"),rt=tt.top+_e.clientTop,it=tt.left+_e.clientLeft,st=isHTMLElement(_e)?getScale(_e):createCoords(1),ut=_e.clientWidth*st.x,ht=_e.clientHeight*st.y,at=it*st.x,gt=rt*st.y;return{width:ut,height:ht,x:at,y:gt}}function getClientRectFromClippingAncestor(_e,et,tt){let rt;if(et==="viewport")rt=getViewportRect(_e,tt);else if(et==="document")rt=getDocumentRect(getDocumentElement(_e));else if(isElement(et))rt=getInnerBoundingClientRect(et,tt);else{const it=getVisualOffsets(_e);rt={...et,x:et.x-it.x,y:et.y-it.y}}return rectToClientRect(rt)}function hasFixedPositionAncestor(_e,et){const tt=getParentNode(_e);return tt===et||!isElement(tt)||isLastTraversableNode(tt)?!1:getComputedStyle$1(tt).position==="fixed"||hasFixedPositionAncestor(tt,et)}function getClippingElementAncestors(_e,et){const tt=et.get(_e);if(tt)return tt;let rt=getOverflowAncestors(_e,[],!1).filter(ht=>isElement(ht)&&getNodeName(ht)!=="body"),it=null;const st=getComputedStyle$1(_e).position==="fixed";let ut=st?getParentNode(_e):_e;for(;isElement(ut)&&!isLastTraversableNode(ut);){const ht=getComputedStyle$1(ut),at=isContainingBlock(ut);!at&&ht.position==="fixed"&&(it=null),(st?!at&&!it:!at&&ht.position==="static"&&!!it&&["absolute","fixed"].includes(it.position)||isOverflowElement(ut)&&!at&&hasFixedPositionAncestor(_e,ut))?rt=rt.filter(bt=>bt!==ut):it=ht,ut=getParentNode(ut)}return et.set(_e,rt),rt}function getClippingRect(_e){let{element:et,boundary:tt,rootBoundary:rt,strategy:it}=_e;const ut=[...tt==="clippingAncestors"?isTopLayer(et)?[]:getClippingElementAncestors(et,this._c):[].concat(tt),rt],ht=ut[0],at=ut.reduce((gt,bt)=>{const wt=getClientRectFromClippingAncestor(et,bt,it);return gt.top=max$1(wt.top,gt.top),gt.right=min$1(wt.right,gt.right),gt.bottom=min$1(wt.bottom,gt.bottom),gt.left=max$1(wt.left,gt.left),gt},getClientRectFromClippingAncestor(et,ht,it));return{width:at.right-at.left,height:at.bottom-at.top,x:at.left,y:at.top}}function getDimensions(_e){const{width:et,height:tt}=getCssDimensions(_e);return{width:et,height:tt}}function getRectRelativeToOffsetParent(_e,et,tt){const rt=isHTMLElement(et),it=getDocumentElement(et),st=tt==="fixed",ut=getBoundingClientRect(_e,!0,st,et);let ht={scrollLeft:0,scrollTop:0};const at=createCoords(0);if(rt||!rt&&!st)if((getNodeName(et)!=="body"||isOverflowElement(it))&&(ht=getNodeScroll(et)),rt){const wt=getBoundingClientRect(et,!0,st,et);at.x=wt.x+et.clientLeft,at.y=wt.y+et.clientTop}else it&&(at.x=getWindowScrollBarX(it));const gt=ut.left+ht.scrollLeft-at.x,bt=ut.top+ht.scrollTop-at.y;return{x:gt,y:bt,width:ut.width,height:ut.height}}function isStaticPositioned(_e){return getComputedStyle$1(_e).position==="static"}function getTrueOffsetParent(_e,et){return!isHTMLElement(_e)||getComputedStyle$1(_e).position==="fixed"?null:et?et(_e):_e.offsetParent}function getOffsetParent(_e,et){const tt=getWindow(_e);if(isTopLayer(_e))return tt;if(!isHTMLElement(_e)){let it=getParentNode(_e);for(;it&&!isLastTraversableNode(it);){if(isElement(it)&&!isStaticPositioned(it))return it;it=getParentNode(it)}return tt}let rt=getTrueOffsetParent(_e,et);for(;rt&&isTableElement(rt)&&isStaticPositioned(rt);)rt=getTrueOffsetParent(rt,et);return rt&&isLastTraversableNode(rt)&&isStaticPositioned(rt)&&!isContainingBlock(rt)?tt:rt||getContainingBlock(_e)||tt}const getElementRects=async function(_e){const et=this.getOffsetParent||getOffsetParent,tt=this.getDimensions,rt=await tt(_e.floating);return{reference:getRectRelativeToOffsetParent(_e.reference,await et(_e.floating),_e.strategy),floating:{x:0,y:0,width:rt.width,height:rt.height}}};function isRTL(_e){return getComputedStyle$1(_e).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function observeMove(_e,et){let tt=null,rt;const it=getDocumentElement(_e);function st(){var ht;clearTimeout(rt),(ht=tt)==null||ht.disconnect(),tt=null}function ut(ht,at){ht===void 0&&(ht=!1),at===void 0&&(at=1),st();const{left:gt,top:bt,width:wt,height:St}=_e.getBoundingClientRect();if(ht||et(),!wt||!St)return;const kt=floor(bt),Rt=floor(it.clientWidth-(gt+wt)),It=floor(it.clientHeight-(bt+St)),Dt=floor(gt),$t={rootMargin:-kt+"px "+-Rt+"px "+-It+"px "+-Dt+"px",threshold:max$1(0,min$1(1,at))||1};let jt=!0;function Nt(Ut){const Ht=Ut[0].intersectionRatio;if(Ht!==at){if(!jt)return ut();Ht?ut(!1,Ht):rt=setTimeout(()=>{ut(!1,1e-7)},1e3)}jt=!1}try{tt=new IntersectionObserver(Nt,{...$t,root:it.ownerDocument})}catch{tt=new IntersectionObserver(Nt,$t)}tt.observe(_e)}return ut(!0),st}function autoUpdate(_e,et,tt,rt){rt===void 0&&(rt={});const{ancestorScroll:it=!0,ancestorResize:st=!0,elementResize:ut=typeof ResizeObserver=="function",layoutShift:ht=typeof IntersectionObserver=="function",animationFrame:at=!1}=rt,gt=unwrapElement(_e),bt=it||st?[...gt?getOverflowAncestors(gt):[],...getOverflowAncestors(et)]:[];bt.forEach(Mt=>{it&&Mt.addEventListener("scroll",tt,{passive:!0}),st&&Mt.addEventListener("resize",tt)});const wt=gt&&ht?observeMove(gt,tt):null;let St=-1,kt=null;ut&&(kt=new ResizeObserver(Mt=>{let[$t]=Mt;$t&&$t.target===gt&&kt&&(kt.unobserve(et),cancelAnimationFrame(St),St=requestAnimationFrame(()=>{var jt;(jt=kt)==null||jt.observe(et)})),tt()}),gt&&!at&&kt.observe(gt),kt.observe(et));let Rt,It=at?getBoundingClientRect(_e):null;at&&Dt();function Dt(){const Mt=getBoundingClientRect(_e);It&&(Mt.x!==It.x||Mt.y!==It.y||Mt.width!==It.width||Mt.height!==It.height)&&tt(),It=Mt,Rt=requestAnimationFrame(Dt)}return tt(),()=>{var Mt;bt.forEach($t=>{it&&$t.removeEventListener("scroll",tt),st&&$t.removeEventListener("resize",tt)}),wt==null||wt(),(Mt=kt)==null||Mt.disconnect(),kt=null,at&&cancelAnimationFrame(Rt)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,hide$1=hide$2,arrow$2=arrow$3,limitShift$1=limitShift$2,computePosition=(_e,et,tt)=>{const rt=new Map,it={platform,...tt},st={...it.platform,_c:rt};return computePosition$1(_e,et,{...it,platform:st})};var index=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual$1(_e,et){if(_e===et)return!0;if(typeof _e!=typeof et)return!1;if(typeof _e=="function"&&_e.toString()===et.toString())return!0;let tt,rt,it;if(_e&&et&&typeof _e=="object"){if(Array.isArray(_e)){if(tt=_e.length,tt!==et.length)return!1;for(rt=tt;rt--!==0;)if(!deepEqual$1(_e[rt],et[rt]))return!1;return!0}if(it=Object.keys(_e),tt=it.length,tt!==Object.keys(et).length)return!1;for(rt=tt;rt--!==0;)if(!{}.hasOwnProperty.call(et,it[rt]))return!1;for(rt=tt;rt--!==0;){const st=it[rt];if(!(st==="_owner"&&_e.$$typeof)&&!deepEqual$1(_e[st],et[st]))return!1}return!0}return _e!==_e&&et!==et}function getDPR(_e){return typeof window>"u"?1:(_e.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(_e,et){const tt=getDPR(_e);return Math.round(et*tt)/tt}function useLatestRef(_e){const et=reactExports.useRef(_e);return index(()=>{et.current=_e}),et}function useFloating(_e){_e===void 0&&(_e={});const{placement:et="bottom",strategy:tt="absolute",middleware:rt=[],platform:it,elements:{reference:st,floating:ut}={},transform:ht=!0,whileElementsMounted:at,open:gt}=_e,[bt,wt]=reactExports.useState({x:0,y:0,strategy:tt,placement:et,middlewareData:{},isPositioned:!1}),[St,kt]=reactExports.useState(rt);deepEqual$1(St,rt)||kt(rt);const[Rt,It]=reactExports.useState(null),[Dt,Mt]=reactExports.useState(null),$t=reactExports.useCallback(hr=>{hr!==Ht.current&&(Ht.current=hr,It(hr))},[]),jt=reactExports.useCallback(hr=>{hr!==Kt.current&&(Kt.current=hr,Mt(hr))},[]),Nt=st||Rt,Ut=ut||Dt,Ht=reactExports.useRef(null),Kt=reactExports.useRef(null),tr=reactExports.useRef(bt),mr=at!=null,vr=useLatestRef(at),wr=useLatestRef(it),yr=reactExports.useCallback(()=>{if(!Ht.current||!Kt.current)return;const hr={placement:et,strategy:tt,middleware:St};wr.current&&(hr.platform=wr.current),computePosition(Ht.current,Kt.current,hr).then(Qt=>{const ir={...Qt,isPositioned:!0};Or.current&&!deepEqual$1(tr.current,ir)&&(tr.current=ir,reactDomExports.flushSync(()=>{wt(ir)}))})},[St,et,tt,wr]);index(()=>{gt===!1&&tr.current.isPositioned&&(tr.current.isPositioned=!1,wt(hr=>({...hr,isPositioned:!1})))},[gt]);const Or=reactExports.useRef(!1);index(()=>(Or.current=!0,()=>{Or.current=!1}),[]),index(()=>{if(Nt&&(Ht.current=Nt),Ut&&(Kt.current=Ut),Nt&&Ut){if(vr.current)return vr.current(Nt,Ut,yr);yr()}},[Nt,Ut,yr,vr,mr]);const Nr=reactExports.useMemo(()=>({reference:Ht,floating:Kt,setReference:$t,setFloating:jt}),[$t,jt]),Lr=reactExports.useMemo(()=>({reference:Nt,floating:Ut}),[Nt,Ut]),ar=reactExports.useMemo(()=>{const hr={position:tt,left:0,top:0};if(!Lr.floating)return hr;const Qt=roundByDPR(Lr.floating,bt.x),ir=roundByDPR(Lr.floating,bt.y);return ht?{...hr,transform:"translate("+Qt+"px, "+ir+"px)",...getDPR(Lr.floating)>=1.5&&{willChange:"transform"}}:{position:tt,left:Qt,top:ir}},[tt,ht,Lr.floating,bt.x,bt.y]);return reactExports.useMemo(()=>({...bt,update:yr,refs:Nr,elements:Lr,floatingStyles:ar}),[bt,yr,Nr,Lr,ar])}const arrow$1=_e=>{function et(tt){return{}.hasOwnProperty.call(tt,"current")}return{name:"arrow",options:_e,fn(tt){const{element:rt,padding:it}=typeof _e=="function"?_e(tt):_e;return rt&&et(rt)?rt.current!=null?arrow$2({element:rt.current,padding:it}).fn(tt):{}:rt?arrow$2({element:rt,padding:it}).fn(tt):{}}}},offset=(_e,et)=>({...offset$1(_e),options:[_e,et]}),shift=(_e,et)=>({...shift$1(_e),options:[_e,et]}),limitShift=(_e,et)=>({...limitShift$1(_e),options:[_e,et]}),flip=(_e,et)=>({...flip$1(_e),options:[_e,et]}),size=(_e,et)=>({...size$1(_e),options:[_e,et]}),hide=(_e,et)=>({...hide$1(_e),options:[_e,et]}),arrow=(_e,et)=>({...arrow$1(_e),options:[_e,et]});var NAME$1="Arrow",Arrow$1=reactExports.forwardRef((_e,et)=>{const{children:tt,width:rt=10,height:it=5,...st}=_e;return jsxRuntimeExports.jsx(Primitive.svg,{...st,ref:et,width:rt,height:it,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:_e.asChild?tt:jsxRuntimeExports.jsx("polygon",{points:"0,0 30,0 15,10"})})});Arrow$1.displayName=NAME$1;var Root$5=Arrow$1,POPPER_NAME="Popper",[createPopperContext,createPopperScope]=createContextScope(POPPER_NAME),[PopperProvider,usePopperContext]=createPopperContext(POPPER_NAME),Popper=_e=>{const{__scopePopper:et,children:tt}=_e,[rt,it]=reactExports.useState(null);return jsxRuntimeExports.jsx(PopperProvider,{scope:et,anchor:rt,onAnchorChange:it,children:tt})};Popper.displayName=POPPER_NAME;var ANCHOR_NAME$2="PopperAnchor",PopperAnchor=reactExports.forwardRef((_e,et)=>{const{__scopePopper:tt,virtualRef:rt,...it}=_e,st=usePopperContext(ANCHOR_NAME$2,tt),ut=reactExports.useRef(null),ht=useComposedRefs(et,ut);return reactExports.useEffect(()=>{st.onAnchorChange((rt==null?void 0:rt.current)||ut.current)}),rt?null:jsxRuntimeExports.jsx(Primitive.div,{...it,ref:ht})});PopperAnchor.displayName=ANCHOR_NAME$2;var CONTENT_NAME$8="PopperContent",[PopperContentProvider,useContentContext]=createPopperContext(CONTENT_NAME$8),PopperContent=reactExports.forwardRef((_e,et)=>{var Gn,lo,mn,Hn,Rn,dn;const{__scopePopper:tt,side:rt="bottom",sideOffset:it=0,align:st="center",alignOffset:ut=0,arrowPadding:ht=0,avoidCollisions:at=!0,collisionBoundary:gt=[],collisionPadding:bt=0,sticky:wt="partial",hideWhenDetached:St=!1,updatePositionStrategy:kt="optimized",onPlaced:Rt,...It}=_e,Dt=usePopperContext(CONTENT_NAME$8,tt),[Mt,$t]=reactExports.useState(null),jt=useComposedRefs(et,qn=>$t(qn)),[Nt,Ut]=reactExports.useState(null),Ht=useSize(Nt),Kt=(Ht==null?void 0:Ht.width)??0,tr=(Ht==null?void 0:Ht.height)??0,mr=rt+(st!=="center"?"-"+st:""),vr=typeof bt=="number"?bt:{top:0,right:0,bottom:0,left:0,...bt},wr=Array.isArray(gt)?gt:[gt],yr=wr.length>0,Or={padding:vr,boundary:wr.filter(isNotNull),altBoundary:yr},{refs:Nr,floatingStyles:Lr,placement:ar,isPositioned:hr,middlewareData:Qt}=useFloating({strategy:"fixed",placement:mr,whileElementsMounted:(...qn)=>autoUpdate(...qn,{animationFrame:kt==="always"}),elements:{reference:Dt.anchor},middleware:[offset({mainAxis:it+tr,alignmentAxis:ut}),at&&shift({mainAxis:!0,crossAxis:!1,limiter:wt==="partial"?limitShift():void 0,...Or}),at&&flip({...Or}),size({...Or,apply:({elements:qn,rects:On,availableWidth:xo,availableHeight:Io})=>{const{width:$o,height:Zr}=On.reference,pn=qn.floating.style;pn.setProperty("--radix-popper-available-width",`${xo}px`),pn.setProperty("--radix-popper-available-height",`${Io}px`),pn.setProperty("--radix-popper-anchor-width",`${$o}px`),pn.setProperty("--radix-popper-anchor-height",`${Zr}px`)}}),Nt&&arrow({element:Nt,padding:ht}),transformOrigin({arrowWidth:Kt,arrowHeight:tr}),St&&hide({strategy:"referenceHidden",...Or})]}),[ir,Mr]=getSideAndAlignFromPlacement(ar),Cr=useCallbackRef$1(Rt);useLayoutEffect2(()=>{hr&&(Cr==null||Cr())},[hr,Cr]);const rn=(Gn=Qt.arrow)==null?void 0:Gn.x,fn=(lo=Qt.arrow)==null?void 0:lo.y,Dn=((mn=Qt.arrow)==null?void 0:mn.centerOffset)!==0,[Yn,eo]=reactExports.useState();return useLayoutEffect2(()=>{Mt&&eo(window.getComputedStyle(Mt).zIndex)},[Mt]),jsxRuntimeExports.jsx("div",{ref:Nr.setFloating,"data-radix-popper-content-wrapper":"",style:{...Lr,transform:hr?Lr.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Yn,"--radix-popper-transform-origin":[(Hn=Qt.transformOrigin)==null?void 0:Hn.x,(Rn=Qt.transformOrigin)==null?void 0:Rn.y].join(" "),...((dn=Qt.hide)==null?void 0:dn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:_e.dir,children:jsxRuntimeExports.jsx(PopperContentProvider,{scope:tt,placedSide:ir,onArrowChange:Ut,arrowX:rn,arrowY:fn,shouldHideArrow:Dn,children:jsxRuntimeExports.jsx(Primitive.div,{"data-side":ir,"data-align":Mr,...It,ref:jt,style:{...It.style,animation:hr?void 0:"none"}})})})});PopperContent.displayName=CONTENT_NAME$8;var ARROW_NAME$4="PopperArrow",OPPOSITE_SIDE={top:"bottom",right:"left",bottom:"top",left:"right"},PopperArrow=reactExports.forwardRef(function _e(et,tt){const{__scopePopper:rt,...it}=et,st=useContentContext(ARROW_NAME$4,rt),ut=OPPOSITE_SIDE[st.placedSide];return jsxRuntimeExports.jsx("span",{ref:st.onArrowChange,style:{position:"absolute",left:st.arrowX,top:st.arrowY,[ut]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[st.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[st.placedSide],visibility:st.shouldHideArrow?"hidden":void 0},children:jsxRuntimeExports.jsx(Root$5,{...it,ref:tt,style:{...it.style,display:"block"}})})});PopperArrow.displayName=ARROW_NAME$4;function isNotNull(_e){return _e!==null}var transformOrigin=_e=>({name:"transformOrigin",options:_e,fn(et){var Dt,Mt,$t;const{placement:tt,rects:rt,middlewareData:it}=et,ut=((Dt=it.arrow)==null?void 0:Dt.centerOffset)!==0,ht=ut?0:_e.arrowWidth,at=ut?0:_e.arrowHeight,[gt,bt]=getSideAndAlignFromPlacement(tt),wt={start:"0%",center:"50%",end:"100%"}[bt],St=(((Mt=it.arrow)==null?void 0:Mt.x)??0)+ht/2,kt=((($t=it.arrow)==null?void 0:$t.y)??0)+at/2;let Rt="",It="";return gt==="bottom"?(Rt=ut?wt:`${St}px`,It=`${-at}px`):gt==="top"?(Rt=ut?wt:`${St}px`,It=`${rt.floating.height+at}px`):gt==="right"?(Rt=`${-at}px`,It=ut?wt:`${kt}px`):gt==="left"&&(Rt=`${rt.floating.width+at}px`,It=ut?wt:`${kt}px`),{data:{x:Rt,y:It}}}});function getSideAndAlignFromPlacement(_e){const[et,tt="center"]=_e.split("-");return[et,tt]}var Root2$5=Popper,Anchor=PopperAnchor,Content$2=PopperContent,Arrow=PopperArrow,PORTAL_NAME$6="Portal",Portal$4=reactExports.forwardRef((_e,et)=>{var ht;const{container:tt,...rt}=_e,[it,st]=reactExports.useState(!1);useLayoutEffect2(()=>st(!0),[]);const ut=tt||it&&((ht=globalThis==null?void 0:globalThis.document)==null?void 0:ht.body);return ut?ReactDOM.createPortal(jsxRuntimeExports.jsx(Primitive.div,{...rt,ref:et}),ut):null});Portal$4.displayName=PORTAL_NAME$6;function useStateMachine(_e,et){return reactExports.useReducer((tt,rt)=>et[tt][rt]??tt,_e)}var Presence=_e=>{const{present:et,children:tt}=_e,rt=usePresence(et),it=typeof tt=="function"?tt({present:rt.isPresent}):reactExports.Children.only(tt),st=useComposedRefs(rt.ref,getElementRef(it));return typeof tt=="function"||rt.isPresent?reactExports.cloneElement(it,{ref:st}):null};Presence.displayName="Presence";function usePresence(_e){const[et,tt]=reactExports.useState(),rt=reactExports.useRef({}),it=reactExports.useRef(_e),st=reactExports.useRef("none"),ut=_e?"mounted":"unmounted",[ht,at]=useStateMachine(ut,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return reactExports.useEffect(()=>{const gt=getAnimationName(rt.current);st.current=ht==="mounted"?gt:"none"},[ht]),useLayoutEffect2(()=>{const gt=rt.current,bt=it.current;if(bt!==_e){const St=st.current,kt=getAnimationName(gt);_e?at("MOUNT"):kt==="none"||(gt==null?void 0:gt.display)==="none"?at("UNMOUNT"):at(bt&&St!==kt?"ANIMATION_OUT":"UNMOUNT"),it.current=_e}},[_e,at]),useLayoutEffect2(()=>{if(et){const gt=wt=>{const kt=getAnimationName(rt.current).includes(wt.animationName);wt.target===et&&kt&&reactDomExports.flushSync(()=>at("ANIMATION_END"))},bt=wt=>{wt.target===et&&(st.current=getAnimationName(rt.current))};return et.addEventListener("animationstart",bt),et.addEventListener("animationcancel",gt),et.addEventListener("animationend",gt),()=>{et.removeEventListener("animationstart",bt),et.removeEventListener("animationcancel",gt),et.removeEventListener("animationend",gt)}}else at("ANIMATION_END")},[et,at]),{isPresent:["mounted","unmountSuspended"].includes(ht),ref:reactExports.useCallback(gt=>{gt&&(rt.current=getComputedStyle(gt)),tt(gt)},[])}}function getAnimationName(_e){return(_e==null?void 0:_e.animationName)||"none"}function getElementRef(_e){var rt,it;let et=(rt=Object.getOwnPropertyDescriptor(_e.props,"ref"))==null?void 0:rt.get,tt=et&&"isReactWarning"in et&&et.isReactWarning;return tt?_e.ref:(et=(it=Object.getOwnPropertyDescriptor(_e,"ref"))==null?void 0:it.get,tt=et&&"isReactWarning"in et&&et.isReactWarning,tt?_e.props.ref:_e.props.ref||_e.ref)}var ENTRY_FOCUS="rovingFocusGroup.onEntryFocus",EVENT_OPTIONS={bubbles:!1,cancelable:!0},GROUP_NAME$3="RovingFocusGroup",[Collection$3,useCollection$3,createCollectionScope$3]=createCollection(GROUP_NAME$3),[createRovingFocusGroupContext,createRovingFocusGroupScope]=createContextScope(GROUP_NAME$3,[createCollectionScope$3]),[RovingFocusProvider,useRovingFocusContext]=createRovingFocusGroupContext(GROUP_NAME$3),RovingFocusGroup=reactExports.forwardRef((_e,et)=>jsxRuntimeExports.jsx(Collection$3.Provider,{scope:_e.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(Collection$3.Slot,{scope:_e.__scopeRovingFocusGroup,children:jsxRuntimeExports.jsx(RovingFocusGroupImpl,{..._e,ref:et})})}));RovingFocusGroup.displayName=GROUP_NAME$3;var RovingFocusGroupImpl=reactExports.forwardRef((_e,et)=>{const{__scopeRovingFocusGroup:tt,orientation:rt,loop:it=!1,dir:st,currentTabStopId:ut,defaultCurrentTabStopId:ht,onCurrentTabStopIdChange:at,onEntryFocus:gt,preventScrollOnEntryFocus:bt=!1,...wt}=_e,St=reactExports.useRef(null),kt=useComposedRefs(et,St),Rt=useDirection(st),[It=null,Dt]=useControllableState({prop:ut,defaultProp:ht,onChange:at}),[Mt,$t]=reactExports.useState(!1),jt=useCallbackRef$1(gt),Nt=useCollection$3(tt),Ut=reactExports.useRef(!1),[Ht,Kt]=reactExports.useState(0);return reactExports.useEffect(()=>{const tr=St.current;if(tr)return tr.addEventListener(ENTRY_FOCUS,jt),()=>tr.removeEventListener(ENTRY_FOCUS,jt)},[jt]),jsxRuntimeExports.jsx(RovingFocusProvider,{scope:tt,orientation:rt,dir:Rt,loop:it,currentTabStopId:It,onItemFocus:reactExports.useCallback(tr=>Dt(tr),[Dt]),onItemShiftTab:reactExports.useCallback(()=>$t(!0),[]),onFocusableItemAdd:reactExports.useCallback(()=>Kt(tr=>tr+1),[]),onFocusableItemRemove:reactExports.useCallback(()=>Kt(tr=>tr-1),[]),children:jsxRuntimeExports.jsx(Primitive.div,{tabIndex:Mt||Ht===0?-1:0,"data-orientation":rt,...wt,ref:kt,style:{outline:"none",..._e.style},onMouseDown:composeEventHandlers(_e.onMouseDown,()=>{Ut.current=!0}),onFocus:composeEventHandlers(_e.onFocus,tr=>{const mr=!Ut.current;if(tr.target===tr.currentTarget&&mr&&!Mt){const vr=new CustomEvent(ENTRY_FOCUS,EVENT_OPTIONS);if(tr.currentTarget.dispatchEvent(vr),!vr.defaultPrevented){const wr=Nt().filter(ar=>ar.focusable),yr=wr.find(ar=>ar.active),Or=wr.find(ar=>ar.id===It),Lr=[yr,Or,...wr].filter(Boolean).map(ar=>ar.ref.current);focusFirst$1(Lr,bt)}}Ut.current=!1}),onBlur:composeEventHandlers(_e.onBlur,()=>$t(!1))})})}),ITEM_NAME$4="RovingFocusGroupItem",RovingFocusGroupItem=reactExports.forwardRef((_e,et)=>{const{__scopeRovingFocusGroup:tt,focusable:rt=!0,active:it=!1,tabStopId:st,...ut}=_e,ht=useId$1(),at=st||ht,gt=useRovingFocusContext(ITEM_NAME$4,tt),bt=gt.currentTabStopId===at,wt=useCollection$3(tt),{onFocusableItemAdd:St,onFocusableItemRemove:kt}=gt;return reactExports.useEffect(()=>{if(rt)return St(),()=>kt()},[rt,St,kt]),jsxRuntimeExports.jsx(Collection$3.ItemSlot,{scope:tt,id:at,focusable:rt,active:it,children:jsxRuntimeExports.jsx(Primitive.span,{tabIndex:bt?0:-1,"data-orientation":gt.orientation,...ut,ref:et,onMouseDown:composeEventHandlers(_e.onMouseDown,Rt=>{rt?gt.onItemFocus(at):Rt.preventDefault()}),onFocus:composeEventHandlers(_e.onFocus,()=>gt.onItemFocus(at)),onKeyDown:composeEventHandlers(_e.onKeyDown,Rt=>{if(Rt.key==="Tab"&&Rt.shiftKey){gt.onItemShiftTab();return}if(Rt.target!==Rt.currentTarget)return;const It=getFocusIntent(Rt,gt.orientation,gt.dir);if(It!==void 0){if(Rt.metaKey||Rt.ctrlKey||Rt.altKey||Rt.shiftKey)return;Rt.preventDefault();let Mt=wt().filter($t=>$t.focusable).map($t=>$t.ref.current);if(It==="last")Mt.reverse();else if(It==="prev"||It==="next"){It==="prev"&&Mt.reverse();const $t=Mt.indexOf(Rt.currentTarget);Mt=gt.loop?wrapArray$2(Mt,$t+1):Mt.slice($t+1)}setTimeout(()=>focusFirst$1(Mt))}})})})});RovingFocusGroupItem.displayName=ITEM_NAME$4;var MAP_KEY_TO_FOCUS_INTENT={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function getDirectionAwareKey(_e,et){return et!=="rtl"?_e:_e==="ArrowLeft"?"ArrowRight":_e==="ArrowRight"?"ArrowLeft":_e}function getFocusIntent(_e,et,tt){const rt=getDirectionAwareKey(_e.key,tt);if(!(et==="vertical"&&["ArrowLeft","ArrowRight"].includes(rt))&&!(et==="horizontal"&&["ArrowUp","ArrowDown"].includes(rt)))return MAP_KEY_TO_FOCUS_INTENT[rt]}function focusFirst$1(_e,et=!1){const tt=document.activeElement;for(const rt of _e)if(rt===tt||(rt.focus({preventScroll:et}),document.activeElement!==tt))return}function wrapArray$2(_e,et){return _e.map((tt,rt)=>_e[(et+rt)%_e.length])}var Root$4=RovingFocusGroup,Item$2=RovingFocusGroupItem,getDefaultParent=function(_e){if(typeof document>"u")return null;var et=Array.isArray(_e)?_e[0]:_e;return et.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(_e){return _e&&(_e.host||unwrapHost(_e.parentNode))},correctTargets=function(_e,et){return et.map(function(tt){if(_e.contains(tt))return tt;var rt=unwrapHost(tt);return rt&&_e.contains(rt)?rt:(console.error("aria-hidden",tt,"in not contained inside",_e,". Doing nothing"),null)}).filter(function(tt){return!!tt})},applyAttributeToOthers=function(_e,et,tt,rt){var it=correctTargets(et,Array.isArray(_e)?_e:[_e]);markerMap[tt]||(markerMap[tt]=new WeakMap);var st=markerMap[tt],ut=[],ht=new Set,at=new Set(it),gt=function(wt){!wt||ht.has(wt)||(ht.add(wt),gt(wt.parentNode))};it.forEach(gt);var bt=function(wt){!wt||at.has(wt)||Array.prototype.forEach.call(wt.children,function(St){if(ht.has(St))bt(St);else try{var kt=St.getAttribute(rt),Rt=kt!==null&&kt!=="false",It=(counterMap.get(St)||0)+1,Dt=(st.get(St)||0)+1;counterMap.set(St,It),st.set(St,Dt),ut.push(St),It===1&&Rt&&uncontrolledNodes.set(St,!0),Dt===1&&St.setAttribute(tt,"true"),Rt||St.setAttribute(rt,"true")}catch(Mt){console.error("aria-hidden: cannot operate on ",St,Mt)}})};return bt(et),ht.clear(),lockCount++,function(){ut.forEach(function(wt){var St=counterMap.get(wt)-1,kt=st.get(wt)-1;counterMap.set(wt,St),st.set(wt,kt),St||(uncontrolledNodes.has(wt)||wt.removeAttribute(rt),uncontrolledNodes.delete(wt)),kt||wt.removeAttribute(tt)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(_e,et,tt){tt===void 0&&(tt="data-aria-hidden");var rt=Array.from(Array.isArray(_e)?_e:[_e]),it=getDefaultParent(_e);return it?(rt.push.apply(rt,Array.from(it.querySelectorAll("[aria-live]"))),applyAttributeToOthers(rt,it,tt,"aria-hidden")):function(){return null}},__assign$1=function(){return __assign$1=Object.assign||function(et){for(var tt,rt=1,it=arguments.length;rt<it;rt++){tt=arguments[rt];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},__assign$1.apply(this,arguments)};function __rest$1(_e,et){var tt={};for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&et.indexOf(rt)<0&&(tt[rt]=_e[rt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,rt=Object.getOwnPropertySymbols(_e);it<rt.length;it++)et.indexOf(rt[it])<0&&Object.prototype.propertyIsEnumerable.call(_e,rt[it])&&(tt[rt[it]]=_e[rt[it]]);return tt}function __spreadArray$1(_e,et,tt){if(tt||arguments.length===2)for(var rt=0,it=et.length,st;rt<it;rt++)(st||!(rt in et))&&(st||(st=Array.prototype.slice.call(et,0,rt)),st[rt]=et[rt]);return _e.concat(st||Array.prototype.slice.call(et))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(_e,et){return typeof _e=="function"?_e(et):_e&&(_e.current=et),_e}function useCallbackRef(_e,et){var tt=reactExports.useState(function(){return{value:_e,callback:et,facade:{get current(){return tt.value},set current(rt){var it=tt.value;it!==rt&&(tt.value=rt,tt.callback(rt,it))}}}})[0];return tt.callback=et,tt.facade}var useIsomorphicLayoutEffect$2=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(_e,et){var tt=useCallbackRef(null,function(rt){return _e.forEach(function(it){return assignRef(it,rt)})});return useIsomorphicLayoutEffect$2(function(){var rt=currentValues.get(tt);if(rt){var it=new Set(rt),st=new Set(_e),ut=tt.current;it.forEach(function(ht){st.has(ht)||assignRef(ht,null)}),st.forEach(function(ht){it.has(ht)||assignRef(ht,ut)})}currentValues.set(tt,_e)},[_e]),tt}function ItoI(_e){return _e}function innerCreateMedium(_e,et){et===void 0&&(et=ItoI);var tt=[],rt=!1,it={read:function(){if(rt)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return tt.length?tt[tt.length-1]:_e},useMedium:function(st){var ut=et(st,rt);return tt.push(ut),function(){tt=tt.filter(function(ht){return ht!==ut})}},assignSyncMedium:function(st){for(rt=!0;tt.length;){var ut=tt;tt=[],ut.forEach(st)}tt={push:function(ht){return st(ht)},filter:function(){return tt}}},assignMedium:function(st){rt=!0;var ut=[];if(tt.length){var ht=tt;tt=[],ht.forEach(st),ut=tt}var at=function(){var bt=ut;ut=[],bt.forEach(st)},gt=function(){return Promise.resolve().then(at)};gt(),tt={push:function(bt){ut.push(bt),gt()},filter:function(bt){return ut=ut.filter(bt),tt}}}};return it}function createSidecarMedium(_e){_e===void 0&&(_e={});var et=innerCreateMedium(null);return et.options=__assign$1({async:!0,ssr:!1},_e),et}var SideCar$1=function(_e){var et=_e.sideCar,tt=__rest$1(_e,["sideCar"]);if(!et)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var rt=et.read();if(!rt)throw new Error("Sidecar medium not found");return reactExports.createElement(rt,__assign$1({},tt))};SideCar$1.isSideCarExport=!0;function exportSidecar(_e,et){return _e.useMedium(et),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(_e,et){var tt=reactExports.useRef(null),rt=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),it=rt[0],st=rt[1],ut=_e.forwardProps,ht=_e.children,at=_e.className,gt=_e.removeScrollBar,bt=_e.enabled,wt=_e.shards,St=_e.sideCar,kt=_e.noIsolation,Rt=_e.inert,It=_e.allowPinchZoom,Dt=_e.as,Mt=Dt===void 0?"div":Dt,$t=_e.gapMode,jt=__rest$1(_e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Nt=St,Ut=useMergeRefs([tt,et]),Ht=__assign$1(__assign$1({},jt),it);return reactExports.createElement(reactExports.Fragment,null,bt&&reactExports.createElement(Nt,{sideCar:effectCar,removeScrollBar:gt,shards:wt,noIsolation:kt,inert:Rt,setCallbacks:st,allowPinchZoom:!!It,lockRef:tt,gapMode:$t}),ut?reactExports.cloneElement(reactExports.Children.only(ht),__assign$1(__assign$1({},Ht),{ref:Ut})):reactExports.createElement(Mt,__assign$1({},Ht,{className:at,ref:Ut}),ht))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var _e=document.createElement("style");_e.type="text/css";var et=getNonce();return et&&_e.setAttribute("nonce",et),_e}function injectStyles(_e,et){_e.styleSheet?_e.styleSheet.cssText=et:_e.appendChild(document.createTextNode(et))}function insertStyleTag(_e){var et=document.head||document.getElementsByTagName("head")[0];et.appendChild(_e)}var stylesheetSingleton=function(){var _e=0,et=null;return{add:function(tt){_e==0&&(et=makeStyleTag())&&(injectStyles(et,tt),insertStyleTag(et)),_e++},remove:function(){_e--,!_e&&et&&(et.parentNode&&et.parentNode.removeChild(et),et=null)}}},styleHookSingleton=function(){var _e=stylesheetSingleton();return function(et,tt){reactExports.useEffect(function(){return _e.add(et),function(){_e.remove()}},[et&&tt])}},styleSingleton=function(){var _e=styleHookSingleton(),et=function(tt){var rt=tt.styles,it=tt.dynamic;return _e(rt,it),null};return et},zeroGap={left:0,top:0,right:0,gap:0},parse=function(_e){return parseInt(_e||"",10)||0},getOffset=function(_e){var et=window.getComputedStyle(document.body),tt=et[_e==="padding"?"paddingLeft":"marginLeft"],rt=et[_e==="padding"?"paddingTop":"marginTop"],it=et[_e==="padding"?"paddingRight":"marginRight"];return[parse(tt),parse(rt),parse(it)]},getGapWidth=function(_e){if(_e===void 0&&(_e="margin"),typeof window>"u")return zeroGap;var et=getOffset(_e),tt=document.documentElement.clientWidth,rt=window.innerWidth;return{left:et[0],top:et[1],right:et[2],gap:Math.max(0,rt-tt+et[2]-et[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(_e,et,tt,rt){var it=_e.left,st=_e.top,ut=_e.right,ht=_e.gap;return tt===void 0&&(tt="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(rt,`;
   padding-right: `).concat(ht,"px ").concat(rt,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(rt,`;
    overscroll-behavior: contain;
    `).concat([et&&"position: relative ".concat(rt,";"),tt==="margin"&&`
    padding-left: `.concat(it,`px;
    padding-top: `).concat(st,`px;
    padding-right: `).concat(ut,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(ht,"px ").concat(rt,`;
    `),tt==="padding"&&"padding-right: ".concat(ht,"px ").concat(rt,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(ht,"px ").concat(rt,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(ht,"px ").concat(rt,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(rt,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(rt,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(ht,`px;
  }
`)},getCurrentUseCounter=function(){var _e=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(_e)?_e:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var _e=getCurrentUseCounter()-1;_e<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,_e.toString())}},[])},RemoveScrollBar=function(_e){var et=_e.noRelative,tt=_e.noImportant,rt=_e.gapMode,it=rt===void 0?"margin":rt;useLockAttribute();var st=reactExports.useMemo(function(){return getGapWidth(it)},[it]);return reactExports.createElement(Style,{styles:getStyles(st,!et,it,tt?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(_e){return _e.tagName==="TEXTAREA"},elementCanBeScrolled=function(_e,et){var tt=window.getComputedStyle(_e);return tt[et]!=="hidden"&&!(tt.overflowY===tt.overflowX&&!alwaysContainsScroll(_e)&&tt[et]==="visible")},elementCouldBeVScrolled=function(_e){return elementCanBeScrolled(_e,"overflowY")},elementCouldBeHScrolled=function(_e){return elementCanBeScrolled(_e,"overflowX")},locationCouldBeScrolled=function(_e,et){var tt=et.ownerDocument,rt=et;do{typeof ShadowRoot<"u"&&rt instanceof ShadowRoot&&(rt=rt.host);var it=elementCouldBeScrolled(_e,rt);if(it){var st=getScrollVariables(_e,rt),ut=st[1],ht=st[2];if(ut>ht)return!0}rt=rt.parentNode}while(rt&&rt!==tt.body);return!1},getVScrollVariables=function(_e){var et=_e.scrollTop,tt=_e.scrollHeight,rt=_e.clientHeight;return[et,tt,rt]},getHScrollVariables=function(_e){var et=_e.scrollLeft,tt=_e.scrollWidth,rt=_e.clientWidth;return[et,tt,rt]},elementCouldBeScrolled=function(_e,et){return _e==="v"?elementCouldBeVScrolled(et):elementCouldBeHScrolled(et)},getScrollVariables=function(_e,et){return _e==="v"?getVScrollVariables(et):getHScrollVariables(et)},getDirectionFactor=function(_e,et){return _e==="h"&&et==="rtl"?-1:1},handleScroll=function(_e,et,tt,rt,it){var st=getDirectionFactor(_e,window.getComputedStyle(et).direction),ut=st*rt,ht=tt.target,at=et.contains(ht),gt=!1,bt=ut>0,wt=0,St=0;do{var kt=getScrollVariables(_e,ht),Rt=kt[0],It=kt[1],Dt=kt[2],Mt=It-Dt-st*Rt;(Rt||Mt)&&elementCouldBeScrolled(_e,ht)&&(wt+=Mt,St+=Rt),ht instanceof ShadowRoot?ht=ht.host:ht=ht.parentNode}while(!at&&ht!==document.body||at&&(et.contains(ht)||et===ht));return(bt&&(Math.abs(wt)<1||!it)||!bt&&(Math.abs(St)<1||!it))&&(gt=!0),gt},getTouchXY=function(_e){return"changedTouches"in _e?[_e.changedTouches[0].clientX,_e.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(_e){return[_e.deltaX,_e.deltaY]},extractRef=function(_e){return _e&&"current"in _e?_e.current:_e},deltaCompare=function(_e,et){return _e[0]===et[0]&&_e[1]===et[1]},generateStyle=function(_e){return`
  .block-interactivity-`.concat(_e,` {pointer-events: none;}
  .allow-interactivity-`).concat(_e,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(_e){var et=reactExports.useRef([]),tt=reactExports.useRef([0,0]),rt=reactExports.useRef(),it=reactExports.useState(idCounter++)[0],st=reactExports.useState(styleSingleton)[0],ut=reactExports.useRef(_e);reactExports.useEffect(function(){ut.current=_e},[_e]),reactExports.useEffect(function(){if(_e.inert){document.body.classList.add("block-interactivity-".concat(it));var It=__spreadArray$1([_e.lockRef.current],(_e.shards||[]).map(extractRef),!0).filter(Boolean);return It.forEach(function(Dt){return Dt.classList.add("allow-interactivity-".concat(it))}),function(){document.body.classList.remove("block-interactivity-".concat(it)),It.forEach(function(Dt){return Dt.classList.remove("allow-interactivity-".concat(it))})}}},[_e.inert,_e.lockRef.current,_e.shards]);var ht=reactExports.useCallback(function(It,Dt){if("touches"in It&&It.touches.length===2)return!ut.current.allowPinchZoom;var Mt=getTouchXY(It),$t=tt.current,jt="deltaX"in It?It.deltaX:$t[0]-Mt[0],Nt="deltaY"in It?It.deltaY:$t[1]-Mt[1],Ut,Ht=It.target,Kt=Math.abs(jt)>Math.abs(Nt)?"h":"v";if("touches"in It&&Kt==="h"&&Ht.type==="range")return!1;var tr=locationCouldBeScrolled(Kt,Ht);if(!tr)return!0;if(tr?Ut=Kt:(Ut=Kt==="v"?"h":"v",tr=locationCouldBeScrolled(Kt,Ht)),!tr)return!1;if(!rt.current&&"changedTouches"in It&&(jt||Nt)&&(rt.current=Ut),!Ut)return!0;var mr=rt.current||Ut;return handleScroll(mr,Dt,It,mr==="h"?jt:Nt,!0)},[]),at=reactExports.useCallback(function(It){var Dt=It;if(!(!lockStack.length||lockStack[lockStack.length-1]!==st)){var Mt="deltaY"in Dt?getDeltaXY(Dt):getTouchXY(Dt),$t=et.current.filter(function(Ut){return Ut.name===Dt.type&&(Ut.target===Dt.target||Dt.target===Ut.shadowParent)&&deltaCompare(Ut.delta,Mt)})[0];if($t&&$t.should){Dt.cancelable&&Dt.preventDefault();return}if(!$t){var jt=(ut.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Ut){return Ut.contains(Dt.target)}),Nt=jt.length>0?ht(Dt,jt[0]):!ut.current.noIsolation;Nt&&Dt.cancelable&&Dt.preventDefault()}}},[]),gt=reactExports.useCallback(function(It,Dt,Mt,$t){var jt={name:It,delta:Dt,target:Mt,should:$t,shadowParent:getOutermostShadowParent(Mt)};et.current.push(jt),setTimeout(function(){et.current=et.current.filter(function(Nt){return Nt!==jt})},1)},[]),bt=reactExports.useCallback(function(It){tt.current=getTouchXY(It),rt.current=void 0},[]),wt=reactExports.useCallback(function(It){gt(It.type,getDeltaXY(It),It.target,ht(It,_e.lockRef.current))},[]),St=reactExports.useCallback(function(It){gt(It.type,getTouchXY(It),It.target,ht(It,_e.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(st),_e.setCallbacks({onScrollCapture:wt,onWheelCapture:wt,onTouchMoveCapture:St}),document.addEventListener("wheel",at,nonPassive),document.addEventListener("touchmove",at,nonPassive),document.addEventListener("touchstart",bt,nonPassive),function(){lockStack=lockStack.filter(function(It){return It!==st}),document.removeEventListener("wheel",at,nonPassive),document.removeEventListener("touchmove",at,nonPassive),document.removeEventListener("touchstart",bt,nonPassive)}},[]);var kt=_e.removeScrollBar,Rt=_e.inert;return reactExports.createElement(reactExports.Fragment,null,Rt?reactExports.createElement(st,{styles:generateStyle(it)}):null,kt?reactExports.createElement(RemoveScrollBar,{gapMode:_e.gapMode}):null)}function getOutermostShadowParent(_e){for(var et=null;_e!==null;)_e instanceof ShadowRoot&&(et=_e.host,_e=_e.host),_e=_e.parentNode;return et}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(_e,et){return reactExports.createElement(RemoveScroll,__assign$1({},_e,{ref:et,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;var SELECTION_KEYS$1=["Enter"," "],FIRST_KEYS=["ArrowDown","PageUp","Home"],LAST_KEYS=["ArrowUp","PageDown","End"],FIRST_LAST_KEYS=[...FIRST_KEYS,...LAST_KEYS],SUB_OPEN_KEYS={ltr:[...SELECTION_KEYS$1,"ArrowRight"],rtl:[...SELECTION_KEYS$1,"ArrowLeft"]},SUB_CLOSE_KEYS={ltr:["ArrowLeft"],rtl:["ArrowRight"]},MENU_NAME="Menu",[Collection$2,useCollection$2,createCollectionScope$2]=createCollection(MENU_NAME),[createMenuContext,createMenuScope]=createContextScope(MENU_NAME,[createCollectionScope$2,createPopperScope,createRovingFocusGroupScope]),usePopperScope$2=createPopperScope(),useRovingFocusGroupScope=createRovingFocusGroupScope(),[MenuProvider,useMenuContext]=createMenuContext(MENU_NAME),[MenuRootProvider,useMenuRootContext]=createMenuContext(MENU_NAME),Menu=_e=>{const{__scopeMenu:et,open:tt=!1,children:rt,dir:it,onOpenChange:st,modal:ut=!0}=_e,ht=usePopperScope$2(et),[at,gt]=reactExports.useState(null),bt=reactExports.useRef(!1),wt=useCallbackRef$1(st),St=useDirection(it);return reactExports.useEffect(()=>{const kt=()=>{bt.current=!0,document.addEventListener("pointerdown",Rt,{capture:!0,once:!0}),document.addEventListener("pointermove",Rt,{capture:!0,once:!0})},Rt=()=>bt.current=!1;return document.addEventListener("keydown",kt,{capture:!0}),()=>{document.removeEventListener("keydown",kt,{capture:!0}),document.removeEventListener("pointerdown",Rt,{capture:!0}),document.removeEventListener("pointermove",Rt,{capture:!0})}},[]),jsxRuntimeExports.jsx(Root2$5,{...ht,children:jsxRuntimeExports.jsx(MenuProvider,{scope:et,open:tt,onOpenChange:wt,content:at,onContentChange:gt,children:jsxRuntimeExports.jsx(MenuRootProvider,{scope:et,onClose:reactExports.useCallback(()=>wt(!1),[wt]),isUsingKeyboardRef:bt,dir:St,modal:ut,children:rt})})})};Menu.displayName=MENU_NAME;var ANCHOR_NAME$1="MenuAnchor",MenuAnchor=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,...rt}=_e,it=usePopperScope$2(tt);return jsxRuntimeExports.jsx(Anchor,{...it,...rt,ref:et})});MenuAnchor.displayName=ANCHOR_NAME$1;var PORTAL_NAME$5="MenuPortal",[PortalProvider$2,usePortalContext$2]=createMenuContext(PORTAL_NAME$5,{forceMount:void 0}),MenuPortal=_e=>{const{__scopeMenu:et,forceMount:tt,children:rt,container:it}=_e,st=useMenuContext(PORTAL_NAME$5,et);return jsxRuntimeExports.jsx(PortalProvider$2,{scope:et,forceMount:tt,children:jsxRuntimeExports.jsx(Presence,{present:tt||st.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:it,children:rt})})})};MenuPortal.displayName=PORTAL_NAME$5;var CONTENT_NAME$7="MenuContent",[MenuContentProvider,useMenuContentContext]=createMenuContext(CONTENT_NAME$7),MenuContent=reactExports.forwardRef((_e,et)=>{const tt=usePortalContext$2(CONTENT_NAME$7,_e.__scopeMenu),{forceMount:rt=tt.forceMount,...it}=_e,st=useMenuContext(CONTENT_NAME$7,_e.__scopeMenu),ut=useMenuRootContext(CONTENT_NAME$7,_e.__scopeMenu);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_e.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:rt||st.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_e.__scopeMenu,children:ut.modal?jsxRuntimeExports.jsx(MenuRootContentModal,{...it,ref:et}):jsxRuntimeExports.jsx(MenuRootContentNonModal,{...it,ref:et})})})})}),MenuRootContentModal=reactExports.forwardRef((_e,et)=>{const tt=useMenuContext(CONTENT_NAME$7,_e.__scopeMenu),rt=reactExports.useRef(null),it=useComposedRefs(et,rt);return reactExports.useEffect(()=>{const st=rt.current;if(st)return hideOthers(st)},[]),jsxRuntimeExports.jsx(MenuContentImpl,{..._e,ref:it,trapFocus:tt.open,disableOutsidePointerEvents:tt.open,disableOutsideScroll:!0,onFocusOutside:composeEventHandlers(_e.onFocusOutside,st=>st.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>tt.onOpenChange(!1)})}),MenuRootContentNonModal=reactExports.forwardRef((_e,et)=>{const tt=useMenuContext(CONTENT_NAME$7,_e.__scopeMenu);return jsxRuntimeExports.jsx(MenuContentImpl,{..._e,ref:et,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>tt.onOpenChange(!1)})}),MenuContentImpl=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,loop:rt=!1,trapFocus:it,onOpenAutoFocus:st,onCloseAutoFocus:ut,disableOutsidePointerEvents:ht,onEntryFocus:at,onEscapeKeyDown:gt,onPointerDownOutside:bt,onFocusOutside:wt,onInteractOutside:St,onDismiss:kt,disableOutsideScroll:Rt,...It}=_e,Dt=useMenuContext(CONTENT_NAME$7,tt),Mt=useMenuRootContext(CONTENT_NAME$7,tt),$t=usePopperScope$2(tt),jt=useRovingFocusGroupScope(tt),Nt=useCollection$2(tt),[Ut,Ht]=reactExports.useState(null),Kt=reactExports.useRef(null),tr=useComposedRefs(et,Kt,Dt.onContentChange),mr=reactExports.useRef(0),vr=reactExports.useRef(""),wr=reactExports.useRef(0),yr=reactExports.useRef(null),Or=reactExports.useRef("right"),Nr=reactExports.useRef(0),Lr=Rt?ReactRemoveScroll:reactExports.Fragment,ar=Rt?{as:Slot,allowPinchZoom:!0}:void 0,hr=ir=>{var Gn,lo;const Mr=vr.current+ir,Cr=Nt().filter(mn=>!mn.disabled),rn=document.activeElement,fn=(Gn=Cr.find(mn=>mn.ref.current===rn))==null?void 0:Gn.textValue,Dn=Cr.map(mn=>mn.textValue),Yn=getNextMatch(Dn,Mr,fn),eo=(lo=Cr.find(mn=>mn.textValue===Yn))==null?void 0:lo.ref.current;(function mn(Hn){vr.current=Hn,window.clearTimeout(mr.current),Hn!==""&&(mr.current=window.setTimeout(()=>mn(""),1e3))})(Mr),eo&&setTimeout(()=>eo.focus())};reactExports.useEffect(()=>()=>window.clearTimeout(mr.current),[]),useFocusGuards();const Qt=reactExports.useCallback(ir=>{var Cr,rn;return Or.current===((Cr=yr.current)==null?void 0:Cr.side)&&isPointerInGraceArea(ir,(rn=yr.current)==null?void 0:rn.area)},[]);return jsxRuntimeExports.jsx(MenuContentProvider,{scope:tt,searchRef:vr,onItemEnter:reactExports.useCallback(ir=>{Qt(ir)&&ir.preventDefault()},[Qt]),onItemLeave:reactExports.useCallback(ir=>{var Mr;Qt(ir)||((Mr=Kt.current)==null||Mr.focus(),Ht(null))},[Qt]),onTriggerLeave:reactExports.useCallback(ir=>{Qt(ir)&&ir.preventDefault()},[Qt]),pointerGraceTimerRef:wr,onPointerGraceIntentChange:reactExports.useCallback(ir=>{yr.current=ir},[]),children:jsxRuntimeExports.jsx(Lr,{...ar,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:it,onMountAutoFocus:composeEventHandlers(st,ir=>{var Mr;ir.preventDefault(),(Mr=Kt.current)==null||Mr.focus({preventScroll:!0})}),onUnmountAutoFocus:ut,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:ht,onEscapeKeyDown:gt,onPointerDownOutside:bt,onFocusOutside:wt,onInteractOutside:St,onDismiss:kt,children:jsxRuntimeExports.jsx(Root$4,{asChild:!0,...jt,dir:Mt.dir,orientation:"vertical",loop:rt,currentTabStopId:Ut,onCurrentTabStopIdChange:Ht,onEntryFocus:composeEventHandlers(at,ir=>{Mt.isUsingKeyboardRef.current||ir.preventDefault()}),preventScrollOnEntryFocus:!0,children:jsxRuntimeExports.jsx(Content$2,{role:"menu","aria-orientation":"vertical","data-state":getOpenState(Dt.open),"data-radix-menu-content":"",dir:Mt.dir,...$t,...It,ref:tr,style:{outline:"none",...It.style},onKeyDown:composeEventHandlers(It.onKeyDown,ir=>{const Cr=ir.target.closest("[data-radix-menu-content]")===ir.currentTarget,rn=ir.ctrlKey||ir.altKey||ir.metaKey,fn=ir.key.length===1;Cr&&(ir.key==="Tab"&&ir.preventDefault(),!rn&&fn&&hr(ir.key));const Dn=Kt.current;if(ir.target!==Dn||!FIRST_LAST_KEYS.includes(ir.key))return;ir.preventDefault();const eo=Nt().filter(Gn=>!Gn.disabled).map(Gn=>Gn.ref.current);LAST_KEYS.includes(ir.key)&&eo.reverse(),focusFirst(eo)}),onBlur:composeEventHandlers(_e.onBlur,ir=>{ir.currentTarget.contains(ir.target)||(window.clearTimeout(mr.current),vr.current="")}),onPointerMove:composeEventHandlers(_e.onPointerMove,whenMouse(ir=>{const Mr=ir.target,Cr=Nr.current!==ir.clientX;if(ir.currentTarget.contains(Mr)&&Cr){const rn=ir.clientX>Nr.current?"right":"left";Or.current=rn,Nr.current=ir.clientX}}))})})})})})})});MenuContent.displayName=CONTENT_NAME$7;var GROUP_NAME$2="MenuGroup",MenuGroup=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,...rt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{role:"group",...rt,ref:et})});MenuGroup.displayName=GROUP_NAME$2;var LABEL_NAME$2="MenuLabel",MenuLabel=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,...rt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{...rt,ref:et})});MenuLabel.displayName=LABEL_NAME$2;var ITEM_NAME$3="MenuItem",ITEM_SELECT="menu.itemSelect",MenuItem=reactExports.forwardRef((_e,et)=>{const{disabled:tt=!1,onSelect:rt,...it}=_e,st=reactExports.useRef(null),ut=useMenuRootContext(ITEM_NAME$3,_e.__scopeMenu),ht=useMenuContentContext(ITEM_NAME$3,_e.__scopeMenu),at=useComposedRefs(et,st),gt=reactExports.useRef(!1),bt=()=>{const wt=st.current;if(!tt&&wt){const St=new CustomEvent(ITEM_SELECT,{bubbles:!0,cancelable:!0});wt.addEventListener(ITEM_SELECT,kt=>rt==null?void 0:rt(kt),{once:!0}),dispatchDiscreteCustomEvent(wt,St),St.defaultPrevented?gt.current=!1:ut.onClose()}};return jsxRuntimeExports.jsx(MenuItemImpl,{...it,ref:at,disabled:tt,onClick:composeEventHandlers(_e.onClick,bt),onPointerDown:wt=>{var St;(St=_e.onPointerDown)==null||St.call(_e,wt),gt.current=!0},onPointerUp:composeEventHandlers(_e.onPointerUp,wt=>{var St;gt.current||(St=wt.currentTarget)==null||St.click()}),onKeyDown:composeEventHandlers(_e.onKeyDown,wt=>{const St=ht.searchRef.current!=="";tt||St&&wt.key===" "||SELECTION_KEYS$1.includes(wt.key)&&(wt.currentTarget.click(),wt.preventDefault())})})});MenuItem.displayName=ITEM_NAME$3;var MenuItemImpl=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,disabled:rt=!1,textValue:it,...st}=_e,ut=useMenuContentContext(ITEM_NAME$3,tt),ht=useRovingFocusGroupScope(tt),at=reactExports.useRef(null),gt=useComposedRefs(et,at),[bt,wt]=reactExports.useState(!1),[St,kt]=reactExports.useState("");return reactExports.useEffect(()=>{const Rt=at.current;Rt&&kt((Rt.textContent??"").trim())},[st.children]),jsxRuntimeExports.jsx(Collection$2.ItemSlot,{scope:tt,disabled:rt,textValue:it??St,children:jsxRuntimeExports.jsx(Item$2,{asChild:!0,...ht,focusable:!rt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"menuitem","data-highlighted":bt?"":void 0,"aria-disabled":rt||void 0,"data-disabled":rt?"":void 0,...st,ref:gt,onPointerMove:composeEventHandlers(_e.onPointerMove,whenMouse(Rt=>{rt?ut.onItemLeave(Rt):(ut.onItemEnter(Rt),Rt.defaultPrevented||Rt.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:composeEventHandlers(_e.onPointerLeave,whenMouse(Rt=>ut.onItemLeave(Rt))),onFocus:composeEventHandlers(_e.onFocus,()=>wt(!0)),onBlur:composeEventHandlers(_e.onBlur,()=>wt(!1))})})})}),CHECKBOX_ITEM_NAME$1="MenuCheckboxItem",MenuCheckboxItem=reactExports.forwardRef((_e,et)=>{const{checked:tt=!1,onCheckedChange:rt,...it}=_e;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_e.__scopeMenu,checked:tt,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemcheckbox","aria-checked":isIndeterminate(tt)?"mixed":tt,...it,ref:et,"data-state":getCheckedState(tt),onSelect:composeEventHandlers(it.onSelect,()=>rt==null?void 0:rt(isIndeterminate(tt)?!0:!tt),{checkForDefaultPrevented:!1})})})});MenuCheckboxItem.displayName=CHECKBOX_ITEM_NAME$1;var RADIO_GROUP_NAME$1="MenuRadioGroup",[RadioGroupProvider,useRadioGroupContext]=createMenuContext(RADIO_GROUP_NAME$1,{value:void 0,onValueChange:()=>{}}),MenuRadioGroup=reactExports.forwardRef((_e,et)=>{const{value:tt,onValueChange:rt,...it}=_e,st=useCallbackRef$1(rt);return jsxRuntimeExports.jsx(RadioGroupProvider,{scope:_e.__scopeMenu,value:tt,onValueChange:st,children:jsxRuntimeExports.jsx(MenuGroup,{...it,ref:et})})});MenuRadioGroup.displayName=RADIO_GROUP_NAME$1;var RADIO_ITEM_NAME$1="MenuRadioItem",MenuRadioItem=reactExports.forwardRef((_e,et)=>{const{value:tt,...rt}=_e,it=useRadioGroupContext(RADIO_ITEM_NAME$1,_e.__scopeMenu),st=tt===it.value;return jsxRuntimeExports.jsx(ItemIndicatorProvider,{scope:_e.__scopeMenu,checked:st,children:jsxRuntimeExports.jsx(MenuItem,{role:"menuitemradio","aria-checked":st,...rt,ref:et,"data-state":getCheckedState(st),onSelect:composeEventHandlers(rt.onSelect,()=>{var ut;return(ut=it.onValueChange)==null?void 0:ut.call(it,tt)},{checkForDefaultPrevented:!1})})})});MenuRadioItem.displayName=RADIO_ITEM_NAME$1;var ITEM_INDICATOR_NAME$1="MenuItemIndicator",[ItemIndicatorProvider,useItemIndicatorContext]=createMenuContext(ITEM_INDICATOR_NAME$1,{checked:!1}),MenuItemIndicator=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,forceMount:rt,...it}=_e,st=useItemIndicatorContext(ITEM_INDICATOR_NAME$1,tt);return jsxRuntimeExports.jsx(Presence,{present:rt||isIndeterminate(st.checked)||st.checked===!0,children:jsxRuntimeExports.jsx(Primitive.span,{...it,ref:et,"data-state":getCheckedState(st.checked)})})});MenuItemIndicator.displayName=ITEM_INDICATOR_NAME$1;var SEPARATOR_NAME$2="MenuSeparator",MenuSeparator=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,...rt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{role:"separator","aria-orientation":"horizontal",...rt,ref:et})});MenuSeparator.displayName=SEPARATOR_NAME$2;var ARROW_NAME$3="MenuArrow",MenuArrow=reactExports.forwardRef((_e,et)=>{const{__scopeMenu:tt,...rt}=_e,it=usePopperScope$2(tt);return jsxRuntimeExports.jsx(Arrow,{...it,...rt,ref:et})});MenuArrow.displayName=ARROW_NAME$3;var SUB_NAME="MenuSub",[MenuSubProvider,useMenuSubContext]=createMenuContext(SUB_NAME),SUB_TRIGGER_NAME$1="MenuSubTrigger",MenuSubTrigger=reactExports.forwardRef((_e,et)=>{const tt=useMenuContext(SUB_TRIGGER_NAME$1,_e.__scopeMenu),rt=useMenuRootContext(SUB_TRIGGER_NAME$1,_e.__scopeMenu),it=useMenuSubContext(SUB_TRIGGER_NAME$1,_e.__scopeMenu),st=useMenuContentContext(SUB_TRIGGER_NAME$1,_e.__scopeMenu),ut=reactExports.useRef(null),{pointerGraceTimerRef:ht,onPointerGraceIntentChange:at}=st,gt={__scopeMenu:_e.__scopeMenu},bt=reactExports.useCallback(()=>{ut.current&&window.clearTimeout(ut.current),ut.current=null},[]);return reactExports.useEffect(()=>bt,[bt]),reactExports.useEffect(()=>{const wt=ht.current;return()=>{window.clearTimeout(wt),at(null)}},[ht,at]),jsxRuntimeExports.jsx(MenuAnchor,{asChild:!0,...gt,children:jsxRuntimeExports.jsx(MenuItemImpl,{id:it.triggerId,"aria-haspopup":"menu","aria-expanded":tt.open,"aria-controls":it.contentId,"data-state":getOpenState(tt.open),..._e,ref:composeRefs(et,it.onTriggerChange),onClick:wt=>{var St;(St=_e.onClick)==null||St.call(_e,wt),!(_e.disabled||wt.defaultPrevented)&&(wt.currentTarget.focus(),tt.open||tt.onOpenChange(!0))},onPointerMove:composeEventHandlers(_e.onPointerMove,whenMouse(wt=>{st.onItemEnter(wt),!wt.defaultPrevented&&!_e.disabled&&!tt.open&&!ut.current&&(st.onPointerGraceIntentChange(null),ut.current=window.setTimeout(()=>{tt.onOpenChange(!0),bt()},100))})),onPointerLeave:composeEventHandlers(_e.onPointerLeave,whenMouse(wt=>{var kt,Rt;bt();const St=(kt=tt.content)==null?void 0:kt.getBoundingClientRect();if(St){const It=(Rt=tt.content)==null?void 0:Rt.dataset.side,Dt=It==="right",Mt=Dt?-5:5,$t=St[Dt?"left":"right"],jt=St[Dt?"right":"left"];st.onPointerGraceIntentChange({area:[{x:wt.clientX+Mt,y:wt.clientY},{x:$t,y:St.top},{x:jt,y:St.top},{x:jt,y:St.bottom},{x:$t,y:St.bottom}],side:It}),window.clearTimeout(ht.current),ht.current=window.setTimeout(()=>st.onPointerGraceIntentChange(null),300)}else{if(st.onTriggerLeave(wt),wt.defaultPrevented)return;st.onPointerGraceIntentChange(null)}})),onKeyDown:composeEventHandlers(_e.onKeyDown,wt=>{var kt;const St=st.searchRef.current!=="";_e.disabled||St&&wt.key===" "||SUB_OPEN_KEYS[rt.dir].includes(wt.key)&&(tt.onOpenChange(!0),(kt=tt.content)==null||kt.focus(),wt.preventDefault())})})})});MenuSubTrigger.displayName=SUB_TRIGGER_NAME$1;var SUB_CONTENT_NAME$1="MenuSubContent",MenuSubContent=reactExports.forwardRef((_e,et)=>{const tt=usePortalContext$2(CONTENT_NAME$7,_e.__scopeMenu),{forceMount:rt=tt.forceMount,...it}=_e,st=useMenuContext(CONTENT_NAME$7,_e.__scopeMenu),ut=useMenuRootContext(CONTENT_NAME$7,_e.__scopeMenu),ht=useMenuSubContext(SUB_CONTENT_NAME$1,_e.__scopeMenu),at=reactExports.useRef(null),gt=useComposedRefs(et,at);return jsxRuntimeExports.jsx(Collection$2.Provider,{scope:_e.__scopeMenu,children:jsxRuntimeExports.jsx(Presence,{present:rt||st.open,children:jsxRuntimeExports.jsx(Collection$2.Slot,{scope:_e.__scopeMenu,children:jsxRuntimeExports.jsx(MenuContentImpl,{id:ht.contentId,"aria-labelledby":ht.triggerId,...it,ref:gt,align:"start",side:ut.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:bt=>{var wt;ut.isUsingKeyboardRef.current&&((wt=at.current)==null||wt.focus()),bt.preventDefault()},onCloseAutoFocus:bt=>bt.preventDefault(),onFocusOutside:composeEventHandlers(_e.onFocusOutside,bt=>{bt.target!==ht.trigger&&st.onOpenChange(!1)}),onEscapeKeyDown:composeEventHandlers(_e.onEscapeKeyDown,bt=>{ut.onClose(),bt.preventDefault()}),onKeyDown:composeEventHandlers(_e.onKeyDown,bt=>{var kt;const wt=bt.currentTarget.contains(bt.target),St=SUB_CLOSE_KEYS[ut.dir].includes(bt.key);wt&&St&&(st.onOpenChange(!1),(kt=ht.trigger)==null||kt.focus(),bt.preventDefault())})})})})})});MenuSubContent.displayName=SUB_CONTENT_NAME$1;function getOpenState(_e){return _e?"open":"closed"}function isIndeterminate(_e){return _e==="indeterminate"}function getCheckedState(_e){return isIndeterminate(_e)?"indeterminate":_e?"checked":"unchecked"}function focusFirst(_e){const et=document.activeElement;for(const tt of _e)if(tt===et||(tt.focus(),document.activeElement!==et))return}function wrapArray$1(_e,et){return _e.map((tt,rt)=>_e[(et+rt)%_e.length])}function getNextMatch(_e,et,tt){const it=et.length>1&&Array.from(et).every(gt=>gt===et[0])?et[0]:et,st=tt?_e.indexOf(tt):-1;let ut=wrapArray$1(_e,Math.max(st,0));it.length===1&&(ut=ut.filter(gt=>gt!==tt));const at=ut.find(gt=>gt.toLowerCase().startsWith(it.toLowerCase()));return at!==tt?at:void 0}function isPointInPolygon(_e,et){const{x:tt,y:rt}=_e;let it=!1;for(let st=0,ut=et.length-1;st<et.length;ut=st++){const ht=et[st].x,at=et[st].y,gt=et[ut].x,bt=et[ut].y;at>rt!=bt>rt&&tt<(gt-ht)*(rt-at)/(bt-at)+ht&&(it=!it)}return it}function isPointerInGraceArea(_e,et){if(!et)return!1;const tt={x:_e.clientX,y:_e.clientY};return isPointInPolygon(tt,et)}function whenMouse(_e){return et=>et.pointerType==="mouse"?_e(et):void 0}var Root3=Menu,Anchor2=MenuAnchor,Portal$3=MenuPortal,Content2$5=MenuContent,Group=MenuGroup,Label$1=MenuLabel,Item2$1=MenuItem,CheckboxItem=MenuCheckboxItem,RadioGroup=MenuRadioGroup,RadioItem=MenuRadioItem,ItemIndicator$1=MenuItemIndicator,Separator$1=MenuSeparator,Arrow2=MenuArrow,SubTrigger=MenuSubTrigger,SubContent=MenuSubContent,DROPDOWN_MENU_NAME="DropdownMenu",[createDropdownMenuContext,createDropdownMenuScope]=createContextScope(DROPDOWN_MENU_NAME,[createMenuScope]),useMenuScope=createMenuScope(),[DropdownMenuProvider,useDropdownMenuContext]=createDropdownMenuContext(DROPDOWN_MENU_NAME),DropdownMenu$1=_e=>{const{__scopeDropdownMenu:et,children:tt,dir:rt,open:it,defaultOpen:st,onOpenChange:ut,modal:ht=!0}=_e,at=useMenuScope(et),gt=reactExports.useRef(null),[bt=!1,wt]=useControllableState({prop:it,defaultProp:st,onChange:ut});return jsxRuntimeExports.jsx(DropdownMenuProvider,{scope:et,triggerId:useId$1(),triggerRef:gt,contentId:useId$1(),open:bt,onOpenChange:wt,onOpenToggle:reactExports.useCallback(()=>wt(St=>!St),[wt]),modal:ht,children:jsxRuntimeExports.jsx(Root3,{...at,open:bt,onOpenChange:wt,dir:rt,modal:ht,children:tt})})};DropdownMenu$1.displayName=DROPDOWN_MENU_NAME;var TRIGGER_NAME$6="DropdownMenuTrigger",DropdownMenuTrigger$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,disabled:rt=!1,...it}=_e,st=useDropdownMenuContext(TRIGGER_NAME$6,tt),ut=useMenuScope(tt);return jsxRuntimeExports.jsx(Anchor2,{asChild:!0,...ut,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",id:st.triggerId,"aria-haspopup":"menu","aria-expanded":st.open,"aria-controls":st.open?st.contentId:void 0,"data-state":st.open?"open":"closed","data-disabled":rt?"":void 0,disabled:rt,...it,ref:composeRefs(et,st.triggerRef),onPointerDown:composeEventHandlers(_e.onPointerDown,ht=>{!rt&&ht.button===0&&ht.ctrlKey===!1&&(st.onOpenToggle(),st.open||ht.preventDefault())}),onKeyDown:composeEventHandlers(_e.onKeyDown,ht=>{rt||(["Enter"," "].includes(ht.key)&&st.onOpenToggle(),ht.key==="ArrowDown"&&st.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(ht.key)&&ht.preventDefault())})})})});DropdownMenuTrigger$1.displayName=TRIGGER_NAME$6;var PORTAL_NAME$4="DropdownMenuPortal",DropdownMenuPortal=_e=>{const{__scopeDropdownMenu:et,...tt}=_e,rt=useMenuScope(et);return jsxRuntimeExports.jsx(Portal$3,{...rt,...tt})};DropdownMenuPortal.displayName=PORTAL_NAME$4;var CONTENT_NAME$6="DropdownMenuContent",DropdownMenuContent$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useDropdownMenuContext(CONTENT_NAME$6,tt),st=useMenuScope(tt),ut=reactExports.useRef(!1);return jsxRuntimeExports.jsx(Content2$5,{id:it.contentId,"aria-labelledby":it.triggerId,...st,...rt,ref:et,onCloseAutoFocus:composeEventHandlers(_e.onCloseAutoFocus,ht=>{var at;ut.current||(at=it.triggerRef.current)==null||at.focus(),ut.current=!1,ht.preventDefault()}),onInteractOutside:composeEventHandlers(_e.onInteractOutside,ht=>{const at=ht.detail.originalEvent,gt=at.button===0&&at.ctrlKey===!0,bt=at.button===2||gt;(!it.modal||bt)&&(ut.current=!0)}),style:{..._e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuContent$1.displayName=CONTENT_NAME$6;var GROUP_NAME$1="DropdownMenuGroup",DropdownMenuGroup=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(Group,{...it,...rt,ref:et})});DropdownMenuGroup.displayName=GROUP_NAME$1;var LABEL_NAME$1="DropdownMenuLabel",DropdownMenuLabel$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(Label$1,{...it,...rt,ref:et})});DropdownMenuLabel$1.displayName=LABEL_NAME$1;var ITEM_NAME$2="DropdownMenuItem",DropdownMenuItem$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(Item2$1,{...it,...rt,ref:et})});DropdownMenuItem$1.displayName=ITEM_NAME$2;var CHECKBOX_ITEM_NAME="DropdownMenuCheckboxItem",DropdownMenuCheckboxItem$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(CheckboxItem,{...it,...rt,ref:et})});DropdownMenuCheckboxItem$1.displayName=CHECKBOX_ITEM_NAME;var RADIO_GROUP_NAME="DropdownMenuRadioGroup",DropdownMenuRadioGroup=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(RadioGroup,{...it,...rt,ref:et})});DropdownMenuRadioGroup.displayName=RADIO_GROUP_NAME;var RADIO_ITEM_NAME="DropdownMenuRadioItem",DropdownMenuRadioItem$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(RadioItem,{...it,...rt,ref:et})});DropdownMenuRadioItem$1.displayName=RADIO_ITEM_NAME;var INDICATOR_NAME="DropdownMenuItemIndicator",DropdownMenuItemIndicator=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(ItemIndicator$1,{...it,...rt,ref:et})});DropdownMenuItemIndicator.displayName=INDICATOR_NAME;var SEPARATOR_NAME$1="DropdownMenuSeparator",DropdownMenuSeparator$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(Separator$1,{...it,...rt,ref:et})});DropdownMenuSeparator$1.displayName=SEPARATOR_NAME$1;var ARROW_NAME$2="DropdownMenuArrow",DropdownMenuArrow=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(Arrow2,{...it,...rt,ref:et})});DropdownMenuArrow.displayName=ARROW_NAME$2;var SUB_TRIGGER_NAME="DropdownMenuSubTrigger",DropdownMenuSubTrigger$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(SubTrigger,{...it,...rt,ref:et})});DropdownMenuSubTrigger$1.displayName=SUB_TRIGGER_NAME;var SUB_CONTENT_NAME="DropdownMenuSubContent",DropdownMenuSubContent$1=reactExports.forwardRef((_e,et)=>{const{__scopeDropdownMenu:tt,...rt}=_e,it=useMenuScope(tt);return jsxRuntimeExports.jsx(SubContent,{...it,...rt,ref:et,style:{..._e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DropdownMenuSubContent$1.displayName=SUB_CONTENT_NAME;var Root2$4=DropdownMenu$1,Trigger$4=DropdownMenuTrigger$1,Portal2$1=DropdownMenuPortal,Content2$4=DropdownMenuContent$1,Label2=DropdownMenuLabel$1,Item2=DropdownMenuItem$1,CheckboxItem2=DropdownMenuCheckboxItem$1,RadioItem2=DropdownMenuRadioItem$1,ItemIndicator2=DropdownMenuItemIndicator,Separator2=DropdownMenuSeparator$1,SubTrigger2=DropdownMenuSubTrigger$1,SubContent2=DropdownMenuSubContent$1;const DropdownMenu=Root2$4,DropdownMenuTrigger=Trigger$4,DropdownMenuSubTrigger=reactExports.forwardRef(({className:_e,inset:et,children:tt,...rt},it)=>jsxRuntimeExports.jsxs(SubTrigger2,{ref:it,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",et&&"pl-8",_e),...rt,children:[tt,jsxRuntimeExports.jsx(ChevronRight,{className:"ml-auto h-4 w-4"})]}));DropdownMenuSubTrigger.displayName=SubTrigger2.displayName;const DropdownMenuSubContent=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(SubContent2,{ref:tt,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e),...et}));DropdownMenuSubContent.displayName=SubContent2.displayName;const DropdownMenuContent=reactExports.forwardRef(({className:_e,sideOffset:et=4,...tt},rt)=>jsxRuntimeExports.jsx(Portal2$1,{children:jsxRuntimeExports.jsx(Content2$4,{ref:rt,sideOffset:et,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e),...tt})}));DropdownMenuContent.displayName=Content2$4.displayName;const DropdownMenuItem=reactExports.forwardRef(({className:_e,inset:et,...tt},rt)=>jsxRuntimeExports.jsx(Item2,{ref:rt,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",et&&"pl-8",_e),...tt}));DropdownMenuItem.displayName=Item2.displayName;const DropdownMenuCheckboxItem=reactExports.forwardRef(({className:_e,children:et,checked:tt,...rt},it)=>jsxRuntimeExports.jsxs(CheckboxItem2,{ref:it,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_e),checked:tt,...rt,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),et]}));DropdownMenuCheckboxItem.displayName=CheckboxItem2.displayName;const DropdownMenuRadioItem=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>jsxRuntimeExports.jsxs(RadioItem2,{ref:rt,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_e),...tt,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator2,{children:jsxRuntimeExports.jsx(Circle,{className:"h-2 w-2 fill-current"})})}),et]}));DropdownMenuRadioItem.displayName=RadioItem2.displayName;const DropdownMenuLabel=reactExports.forwardRef(({className:_e,inset:et,...tt},rt)=>jsxRuntimeExports.jsx(Label2,{ref:rt,className:cn("px-2 py-1.5 text-sm font-semibold",et&&"pl-8",_e),...tt}));DropdownMenuLabel.displayName=Label2.displayName;const DropdownMenuSeparator=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Separator2,{ref:tt,className:cn("-mx-1 my-1 h-px bg-muted",_e),...et}));DropdownMenuSeparator.displayName=Separator2.displayName;var AVATAR_NAME="Avatar",[createAvatarContext,createAvatarScope]=createContextScope(AVATAR_NAME),[AvatarProvider,useAvatarContext]=createAvatarContext(AVATAR_NAME),Avatar$1=reactExports.forwardRef((_e,et)=>{const{__scopeAvatar:tt,...rt}=_e,[it,st]=reactExports.useState("idle");return jsxRuntimeExports.jsx(AvatarProvider,{scope:tt,imageLoadingStatus:it,onImageLoadingStatusChange:st,children:jsxRuntimeExports.jsx(Primitive.span,{...rt,ref:et})})});Avatar$1.displayName=AVATAR_NAME;var IMAGE_NAME="AvatarImage",AvatarImage$1=reactExports.forwardRef((_e,et)=>{const{__scopeAvatar:tt,src:rt,onLoadingStatusChange:it=()=>{},...st}=_e,ut=useAvatarContext(IMAGE_NAME,tt),ht=useImageLoadingStatus(rt),at=useCallbackRef$1(gt=>{it(gt),ut.onImageLoadingStatusChange(gt)});return useLayoutEffect2(()=>{ht!=="idle"&&at(ht)},[ht,at]),ht==="loaded"?jsxRuntimeExports.jsx(Primitive.img,{...st,ref:et,src:rt}):null});AvatarImage$1.displayName=IMAGE_NAME;var FALLBACK_NAME="AvatarFallback",AvatarFallback$1=reactExports.forwardRef((_e,et)=>{const{__scopeAvatar:tt,delayMs:rt,...it}=_e,st=useAvatarContext(FALLBACK_NAME,tt),[ut,ht]=reactExports.useState(rt===void 0);return reactExports.useEffect(()=>{if(rt!==void 0){const at=window.setTimeout(()=>ht(!0),rt);return()=>window.clearTimeout(at)}},[rt]),ut&&st.imageLoadingStatus!=="loaded"?jsxRuntimeExports.jsx(Primitive.span,{...it,ref:et}):null});AvatarFallback$1.displayName=FALLBACK_NAME;function useImageLoadingStatus(_e){const[et,tt]=reactExports.useState("idle");return useLayoutEffect2(()=>{if(!_e){tt("error");return}let rt=!0;const it=new window.Image,st=ut=>()=>{rt&&tt(ut)};return tt("loading"),it.onload=st("loaded"),it.onerror=st("error"),it.src=_e,()=>{rt=!1}},[_e]),et}var Root$3=Avatar$1,Image$1=AvatarImage$1,Fallback=AvatarFallback$1;const Avatar=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Root$3,{ref:tt,className:cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",_e),...et}));Avatar.displayName=Root$3.displayName;const AvatarImage=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Image$1,{ref:tt,className:cn("aspect-square h-full w-full",_e),...et}));AvatarImage.displayName=Image$1.displayName;const AvatarFallback=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Fallback,{ref:tt,className:cn("flex h-full w-full items-center justify-center rounded-full bg-muted",_e),...et}));AvatarFallback.displayName=Fallback.displayName;const UserAvatar=({avatar:_e,classContent:et})=>jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs(Avatar,{children:[jsxRuntimeExports.jsx(AvatarImage,{src:_e,className:et,loading:"lazy"}),jsxRuntimeExports.jsx(AvatarFallback,{children:"CN"})]})}),UserDropdown=({avatar:_e,handleChange:et,onHide:tt})=>{const rt=useNavigate(),{setAuth:it}=useAuth(),st=()=>{tt(),localStorage.clear(),et(),it({user:void 0}),rt(ROUTES.ROOT)};return jsxRuntimeExports.jsxs(DropdownMenu,{children:[jsxRuntimeExports.jsx(DropdownMenuTrigger,{className:"rounded-full outline-none",children:jsxRuntimeExports.jsx(UserAvatar,{avatar:_e})}),jsxRuntimeExports.jsxs(DropdownMenuContent,{children:[jsxRuntimeExports.jsx(DropdownMenuLabel,{children:"My Account"}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex gap-2",onClick:()=>{rt(ROUTES.PROFILE),tt()},children:[jsxRuntimeExports.jsx(UserPen,{strokeWidth:2,size:20}),jsxRuntimeExports.jsx("span",{children:"My Profile"})]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex gap-2",onClick:()=>{rt(ROUTES.MY_ORDER),tt()},children:[jsxRuntimeExports.jsx(Truck,{strokeWidth:2,size:20}),jsxRuntimeExports.jsx("span",{children:"My Order"})]}),jsxRuntimeExports.jsxs(DropdownMenuItem,{className:"flex gap-2",onClick:st,children:[jsxRuntimeExports.jsx(LogOut,{strokeWidth:2,size:20}),jsxRuntimeExports.jsx("span",{children:"Log out"})]})]})]})},generateImage=_e=>`https://ui-avatars.com/api/?background=c7d2fe&color=3730a3&bold=true&name=${encodeURIComponent(_e)}`,warn=(..._e)=>{console!=null&&console.warn&&(isString(_e[0])&&(_e[0]=`react-i18next:: ${_e[0]}`),console.warn(..._e))},alreadyWarned={},warnOnce=(..._e)=>{isString(_e[0])&&alreadyWarned[_e[0]]||(isString(_e[0])&&(alreadyWarned[_e[0]]=new Date),warn(..._e))},loadedClb=(_e,et)=>()=>{if(_e.isInitialized)et();else{const tt=()=>{setTimeout(()=>{_e.off("initialized",tt)},0),et()};_e.on("initialized",tt)}},loadNamespaces=(_e,et,tt)=>{_e.loadNamespaces(et,loadedClb(_e,tt))},loadLanguages=(_e,et,tt,rt)=>{isString(tt)&&(tt=[tt]),tt.forEach(it=>{_e.options.ns.indexOf(it)<0&&_e.options.ns.push(it)}),_e.loadLanguages(et,loadedClb(_e,rt))},hasLoadedNamespace=(_e,et,tt={})=>!et.languages||!et.languages.length?(warnOnce("i18n.languages were undefined or empty",et.languages),!0):et.hasLoadedNamespace(_e,{lng:tt.lng,precheck:(rt,it)=>{var st;if(((st=tt.bindI18n)==null?void 0:st.indexOf("languageChanging"))>-1&&rt.services.backendConnector.backend&&rt.isLanguageChangingTo&&!it(rt.isLanguageChangingTo,_e))return!1}}),isString=_e=>typeof _e=="string",isObject=_e=>typeof _e=="object"&&_e!==null,matchHtmlEntity=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,htmlEntities={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=_e=>htmlEntities[_e],unescape$1=_e=>_e.replace(matchHtmlEntity,unescapeHtmlEntity);let defaultOptions$1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:unescape$1};const setDefaults$1=(_e={})=>{defaultOptions$1={...defaultOptions$1,..._e}},getDefaults=()=>defaultOptions$1;let i18nInstance;const setI18n=_e=>{i18nInstance=_e},getI18n=()=>i18nInstance,initReactI18next={type:"3rdParty",init(_e){setDefaults$1(_e.options.react),setI18n(_e)}},I18nContext=reactExports.createContext();class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(et){et.forEach(tt=>{var rt;(rt=this.usedNamespaces)[tt]??(rt[tt]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const usePrevious=(_e,et)=>{const tt=reactExports.useRef();return reactExports.useEffect(()=>{tt.current=_e},[_e,et]),tt.current},alwaysNewT=(_e,et,tt,rt)=>_e.getFixedT(et,tt,rt),useMemoizedT=(_e,et,tt,rt)=>reactExports.useCallback(alwaysNewT(_e,et,tt,rt),[_e,et,tt,rt]),useTranslation=(_e,et={})=>{var Nt,Ut,Ht,Kt;const{i18n:tt}=et,{i18n:rt,defaultNS:it}=reactExports.useContext(I18nContext)||{},st=tt||rt||getI18n();if(st&&!st.reportNamespaces&&(st.reportNamespaces=new ReportNamespaces),!st){warnOnce("You will need to pass in an i18next instance by using initReactI18next");const tr=(vr,wr)=>isString(wr)?wr:isObject(wr)&&isString(wr.defaultValue)?wr.defaultValue:Array.isArray(vr)?vr[vr.length-1]:vr,mr=[tr,{},!1];return mr.t=tr,mr.i18n={},mr.ready=!1,mr}(Nt=st.options.react)!=null&&Nt.wait&&warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const ut={...getDefaults(),...st.options.react,...et},{useSuspense:ht,keyPrefix:at}=ut;let gt=it||((Ut=st.options)==null?void 0:Ut.defaultNS);gt=isString(gt)?[gt]:gt||["translation"],(Kt=(Ht=st.reportNamespaces).addUsedNamespaces)==null||Kt.call(Ht,gt);const bt=(st.isInitialized||st.initializedStoreOnce)&&gt.every(tr=>hasLoadedNamespace(tr,st,ut)),wt=useMemoizedT(st,et.lng||null,ut.nsMode==="fallback"?gt:gt[0],at),St=()=>wt,kt=()=>alwaysNewT(st,et.lng||null,ut.nsMode==="fallback"?gt:gt[0],at),[Rt,It]=reactExports.useState(St);let Dt=gt.join();et.lng&&(Dt=`${et.lng}${Dt}`);const Mt=usePrevious(Dt),$t=reactExports.useRef(!0);reactExports.useEffect(()=>{const{bindI18n:tr,bindI18nStore:mr}=ut;$t.current=!0,!bt&&!ht&&(et.lng?loadLanguages(st,et.lng,gt,()=>{$t.current&&It(kt)}):loadNamespaces(st,gt,()=>{$t.current&&It(kt)})),bt&&Mt&&Mt!==Dt&&$t.current&&It(kt);const vr=()=>{$t.current&&It(kt)};return tr&&(st==null||st.on(tr,vr)),mr&&(st==null||st.store.on(mr,vr)),()=>{$t.current=!1,st&&(tr==null||tr.split(" ").forEach(wr=>st.off(wr,vr))),mr&&st&&mr.split(" ").forEach(wr=>st.store.off(wr,vr))}},[st,Dt]),reactExports.useEffect(()=>{$t.current&&bt&&It(St)},[st,at,bt]);const jt=[Rt,st,bt];if(jt.t=Rt,jt.i18n=st,jt.ready=bt,bt||!bt&&!ht)return jt;throw new Promise(tr=>{et.lng?loadLanguages(st,et.lng,gt,()=>tr()):loadNamespaces(st,gt,()=>tr())})},consoleLogger={type:"logger",log(_e){this.output("log",_e)},warn(_e){this.output("warn",_e)},error(_e){this.output("error",_e)},output(_e,et){console&&console[_e]&&console[_e].apply(console,et)}};class Logger{constructor(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(et,tt)}init(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=tt.prefix||"i18next:",this.logger=et||consoleLogger,this.options=tt,this.debug=tt.debug}log(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"log","",!0)}warn(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"warn","",!0)}error(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"error","")}deprecate(){for(var et=arguments.length,tt=new Array(et),rt=0;rt<et;rt++)tt[rt]=arguments[rt];return this.forward(tt,"warn","WARNING DEPRECATED: ",!0)}forward(et,tt,rt,it){return it&&!this.debug?null:(typeof et[0]=="string"&&(et[0]=`${rt}${this.prefix} ${et[0]}`),this.logger[tt](et))}create(et){return new Logger(this.logger,{prefix:`${this.prefix}:${et}:`,...this.options})}clone(et){return et=et||this.options,et.prefix=et.prefix||this.prefix,new Logger(this.logger,et)}}var baseLogger=new Logger;class EventEmitter{constructor(){this.observers={}}on(et,tt){return et.split(" ").forEach(rt=>{this.observers[rt]||(this.observers[rt]=new Map);const it=this.observers[rt].get(tt)||0;this.observers[rt].set(tt,it+1)}),this}off(et,tt){if(this.observers[et]){if(!tt){delete this.observers[et];return}this.observers[et].delete(tt)}}emit(et){for(var tt=arguments.length,rt=new Array(tt>1?tt-1:0),it=1;it<tt;it++)rt[it-1]=arguments[it];this.observers[et]&&Array.from(this.observers[et].entries()).forEach(ut=>{let[ht,at]=ut;for(let gt=0;gt<at;gt++)ht(...rt)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(ut=>{let[ht,at]=ut;for(let gt=0;gt<at;gt++)ht.apply(ht,[et,...rt])})}}const defer=()=>{let _e,et;const tt=new Promise((rt,it)=>{_e=rt,et=it});return tt.resolve=_e,tt.reject=et,tt},makeString=_e=>_e==null?"":""+_e,copy=(_e,et,tt)=>{_e.forEach(rt=>{et[rt]&&(tt[rt]=et[rt])})},lastOfPathSeparatorRegExp=/###/g,cleanKey=_e=>_e&&_e.indexOf("###")>-1?_e.replace(lastOfPathSeparatorRegExp,"."):_e,canNotTraverseDeeper=_e=>!_e||typeof _e=="string",getLastOfPath=(_e,et,tt)=>{const rt=typeof et!="string"?et:et.split(".");let it=0;for(;it<rt.length-1;){if(canNotTraverseDeeper(_e))return{};const st=cleanKey(rt[it]);!_e[st]&&tt&&(_e[st]=new tt),Object.prototype.hasOwnProperty.call(_e,st)?_e=_e[st]:_e={},++it}return canNotTraverseDeeper(_e)?{}:{obj:_e,k:cleanKey(rt[it])}},setPath=(_e,et,tt)=>{const{obj:rt,k:it}=getLastOfPath(_e,et,Object);if(rt!==void 0||et.length===1){rt[it]=tt;return}let st=et[et.length-1],ut=et.slice(0,et.length-1),ht=getLastOfPath(_e,ut,Object);for(;ht.obj===void 0&&ut.length;)st=`${ut[ut.length-1]}.${st}`,ut=ut.slice(0,ut.length-1),ht=getLastOfPath(_e,ut,Object),ht&&ht.obj&&typeof ht.obj[`${ht.k}.${st}`]<"u"&&(ht.obj=void 0);ht.obj[`${ht.k}.${st}`]=tt},pushPath=(_e,et,tt,rt)=>{const{obj:it,k:st}=getLastOfPath(_e,et,Object);it[st]=it[st]||[],it[st].push(tt)},getPath=(_e,et)=>{const{obj:tt,k:rt}=getLastOfPath(_e,et);if(tt)return tt[rt]},getPathWithDefaults=(_e,et,tt)=>{const rt=getPath(_e,tt);return rt!==void 0?rt:getPath(et,tt)},deepExtend=(_e,et,tt)=>{for(const rt in et)rt!=="__proto__"&&rt!=="constructor"&&(rt in _e?typeof _e[rt]=="string"||_e[rt]instanceof String||typeof et[rt]=="string"||et[rt]instanceof String?tt&&(_e[rt]=et[rt]):deepExtend(_e[rt],et[rt],tt):_e[rt]=et[rt]);return _e},regexEscape=_e=>_e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var _entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const escape=_e=>typeof _e=="string"?_e.replace(/[&<>"'\/]/g,et=>_entityMap[et]):_e;class RegExpCache{constructor(et){this.capacity=et,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(et){const tt=this.regExpMap.get(et);if(tt!==void 0)return tt;const rt=new RegExp(et);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(et,rt),this.regExpQueue.push(et),rt}}const chars=[" ",",","?","!",";"],looksLikeObjectPathRegExpCache=new RegExpCache(20),looksLikeObjectPath=(_e,et,tt)=>{et=et||"",tt=tt||"";const rt=chars.filter(ut=>et.indexOf(ut)<0&&tt.indexOf(ut)<0);if(rt.length===0)return!0;const it=looksLikeObjectPathRegExpCache.getRegExp(`(${rt.map(ut=>ut==="?"?"\\?":ut).join("|")})`);let st=!it.test(_e);if(!st){const ut=_e.indexOf(tt);ut>0&&!it.test(_e.substring(0,ut))&&(st=!0)}return st},deepFind=function(_e,et){let tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!_e)return;if(_e[et])return _e[et];const rt=et.split(tt);let it=_e;for(let st=0;st<rt.length;){if(!it||typeof it!="object")return;let ut,ht="";for(let at=st;at<rt.length;++at)if(at!==st&&(ht+=tt),ht+=rt[at],ut=it[ht],ut!==void 0){if(["string","number","boolean"].indexOf(typeof ut)>-1&&at<rt.length-1)continue;st+=at-st+1;break}it=ut}return it},getCleanedCode=_e=>_e&&_e.indexOf("_")>0?_e.replace("_","-"):_e;class ResourceStore extends EventEmitter{constructor(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=et||{},this.options=tt,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(et){this.options.ns.indexOf(et)<0&&this.options.ns.push(et)}removeNamespaces(et){const tt=this.options.ns.indexOf(et);tt>-1&&this.options.ns.splice(tt,1)}getResource(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const st=it.keySeparator!==void 0?it.keySeparator:this.options.keySeparator,ut=it.ignoreJSONStructure!==void 0?it.ignoreJSONStructure:this.options.ignoreJSONStructure;let ht;et.indexOf(".")>-1?ht=et.split("."):(ht=[et,tt],rt&&(Array.isArray(rt)?ht.push(...rt):typeof rt=="string"&&st?ht.push(...rt.split(st)):ht.push(rt)));const at=getPath(this.data,ht);return!at&&!tt&&!rt&&et.indexOf(".")>-1&&(et=ht[0],tt=ht[1],rt=ht.slice(2).join(".")),at||!ut||typeof rt!="string"?at:deepFind(this.data&&this.data[et]&&this.data[et][tt],rt,st)}addResource(et,tt,rt,it){let st=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const ut=st.keySeparator!==void 0?st.keySeparator:this.options.keySeparator;let ht=[et,tt];rt&&(ht=ht.concat(ut?rt.split(ut):rt)),et.indexOf(".")>-1&&(ht=et.split("."),it=tt,tt=ht[1]),this.addNamespaces(tt),setPath(this.data,ht,it),st.silent||this.emit("added",et,tt,rt,it)}addResources(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const st in rt)(typeof rt[st]=="string"||Array.isArray(rt[st]))&&this.addResource(et,tt,st,rt[st],{silent:!0});it.silent||this.emit("added",et,tt,rt)}addResourceBundle(et,tt,rt,it,st){let ut=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},ht=[et,tt];et.indexOf(".")>-1&&(ht=et.split("."),it=rt,rt=tt,tt=ht[1]),this.addNamespaces(tt);let at=getPath(this.data,ht)||{};ut.skipCopy||(rt=JSON.parse(JSON.stringify(rt))),it?deepExtend(at,rt,st):at={...at,...rt},setPath(this.data,ht,at),ut.silent||this.emit("added",et,tt,rt)}removeResourceBundle(et,tt){this.hasResourceBundle(et,tt)&&delete this.data[et][tt],this.removeNamespaces(tt),this.emit("removed",et,tt)}hasResourceBundle(et,tt){return this.getResource(et,tt)!==void 0}getResourceBundle(et,tt){return tt||(tt=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(et,tt)}:this.getResource(et,tt)}getDataByLanguage(et){return this.data[et]}hasLanguageSomeTranslations(et){const tt=this.getDataByLanguage(et);return!!(tt&&Object.keys(tt)||[]).find(it=>tt[it]&&Object.keys(tt[it]).length>0)}toJSON(){return this.data}}var postProcessor={processors:{},addPostProcessor(_e){this.processors[_e.name]=_e},handle(_e,et,tt,rt,it){return _e.forEach(st=>{this.processors[st]&&(et=this.processors[st].process(et,tt,rt,it))}),et}};const checkedLoadedFor={};class Translator extends EventEmitter{constructor(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],et,this),this.options=tt,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=baseLogger.create("translator")}changeLanguage(et){et&&(this.language=et)}exists(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(et==null)return!1;const rt=this.resolve(et,tt);return rt&&rt.res!==void 0}extractFromKey(et,tt){let rt=tt.nsSeparator!==void 0?tt.nsSeparator:this.options.nsSeparator;rt===void 0&&(rt=":");const it=tt.keySeparator!==void 0?tt.keySeparator:this.options.keySeparator;let st=tt.ns||this.options.defaultNS||[];const ut=rt&&et.indexOf(rt)>-1,ht=!this.options.userDefinedKeySeparator&&!tt.keySeparator&&!this.options.userDefinedNsSeparator&&!tt.nsSeparator&&!looksLikeObjectPath(et,rt,it);if(ut&&!ht){const at=et.match(this.interpolator.nestingRegexp);if(at&&at.length>0)return{key:et,namespaces:st};const gt=et.split(rt);(rt!==it||rt===it&&this.options.ns.indexOf(gt[0])>-1)&&(st=gt.shift()),et=gt.join(it)}return typeof st=="string"&&(st=[st]),{key:et,namespaces:st}}translate(et,tt,rt){if(typeof tt!="object"&&this.options.overloadTranslationOptionHandler&&(tt=this.options.overloadTranslationOptionHandler(arguments)),typeof tt=="object"&&(tt={...tt}),tt||(tt={}),et==null)return"";Array.isArray(et)||(et=[String(et)]);const it=tt.returnDetails!==void 0?tt.returnDetails:this.options.returnDetails,st=tt.keySeparator!==void 0?tt.keySeparator:this.options.keySeparator,{key:ut,namespaces:ht}=this.extractFromKey(et[et.length-1],tt),at=ht[ht.length-1],gt=tt.lng||this.language,bt=tt.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(gt&&gt.toLowerCase()==="cimode"){if(bt){const Nt=tt.nsSeparator||this.options.nsSeparator;return it?{res:`${at}${Nt}${ut}`,usedKey:ut,exactUsedKey:ut,usedLng:gt,usedNS:at,usedParams:this.getUsedParamsDetails(tt)}:`${at}${Nt}${ut}`}return it?{res:ut,usedKey:ut,exactUsedKey:ut,usedLng:gt,usedNS:at,usedParams:this.getUsedParamsDetails(tt)}:ut}const wt=this.resolve(et,tt);let St=wt&&wt.res;const kt=wt&&wt.usedKey||ut,Rt=wt&&wt.exactUsedKey||ut,It=Object.prototype.toString.apply(St),Dt=["[object Number]","[object Function]","[object RegExp]"],Mt=tt.joinArrays!==void 0?tt.joinArrays:this.options.joinArrays,$t=!this.i18nFormat||this.i18nFormat.handleAsObject;if($t&&St&&(typeof St!="string"&&typeof St!="boolean"&&typeof St!="number")&&Dt.indexOf(It)<0&&!(typeof Mt=="string"&&Array.isArray(St))){if(!tt.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const Nt=this.options.returnedObjectHandler?this.options.returnedObjectHandler(kt,St,{...tt,ns:ht}):`key '${ut} (${this.language})' returned an object instead of string.`;return it?(wt.res=Nt,wt.usedParams=this.getUsedParamsDetails(tt),wt):Nt}if(st){const Nt=Array.isArray(St),Ut=Nt?[]:{},Ht=Nt?Rt:kt;for(const Kt in St)if(Object.prototype.hasOwnProperty.call(St,Kt)){const tr=`${Ht}${st}${Kt}`;Ut[Kt]=this.translate(tr,{...tt,joinArrays:!1,ns:ht}),Ut[Kt]===tr&&(Ut[Kt]=St[Kt])}St=Ut}}else if($t&&typeof Mt=="string"&&Array.isArray(St))St=St.join(Mt),St&&(St=this.extendTranslation(St,et,tt,rt));else{let Nt=!1,Ut=!1;const Ht=tt.count!==void 0&&typeof tt.count!="string",Kt=Translator.hasDefaultValue(tt),tr=Ht?this.pluralResolver.getSuffix(gt,tt.count,tt):"",mr=tt.ordinal&&Ht?this.pluralResolver.getSuffix(gt,tt.count,{ordinal:!1}):"",vr=Ht&&!tt.ordinal&&tt.count===0&&this.pluralResolver.shouldUseIntlApi(),wr=vr&&tt[`defaultValue${this.options.pluralSeparator}zero`]||tt[`defaultValue${tr}`]||tt[`defaultValue${mr}`]||tt.defaultValue;!this.isValidLookup(St)&&Kt&&(Nt=!0,St=wr),this.isValidLookup(St)||(Ut=!0,St=ut);const Or=(tt.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Ut?void 0:St,Nr=Kt&&wr!==St&&this.options.updateMissing;if(Ut||Nt||Nr){if(this.logger.log(Nr?"updateKey":"missingKey",gt,at,ut,Nr?wr:St),st){const Qt=this.resolve(ut,{...tt,keySeparator:!1});Qt&&Qt.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let Lr=[];const ar=this.languageUtils.getFallbackCodes(this.options.fallbackLng,tt.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ar&&ar[0])for(let Qt=0;Qt<ar.length;Qt++)Lr.push(ar[Qt]);else this.options.saveMissingTo==="all"?Lr=this.languageUtils.toResolveHierarchy(tt.lng||this.language):Lr.push(tt.lng||this.language);const hr=(Qt,ir,Mr)=>{const Cr=Kt&&Mr!==St?Mr:Or;this.options.missingKeyHandler?this.options.missingKeyHandler(Qt,at,ir,Cr,Nr,tt):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Qt,at,ir,Cr,Nr,tt),this.emit("missingKey",Qt,at,ir,St)};this.options.saveMissing&&(this.options.saveMissingPlurals&&Ht?Lr.forEach(Qt=>{const ir=this.pluralResolver.getSuffixes(Qt,tt);vr&&tt[`defaultValue${this.options.pluralSeparator}zero`]&&ir.indexOf(`${this.options.pluralSeparator}zero`)<0&&ir.push(`${this.options.pluralSeparator}zero`),ir.forEach(Mr=>{hr([Qt],ut+Mr,tt[`defaultValue${Mr}`]||wr)})}):hr(Lr,ut,wr))}St=this.extendTranslation(St,et,tt,wt,rt),Ut&&St===ut&&this.options.appendNamespaceToMissingKey&&(St=`${at}:${ut}`),(Ut||Nt)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?St=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${at}:${ut}`:ut,Nt?St:void 0):St=this.options.parseMissingKeyHandler(St))}return it?(wt.res=St,wt.usedParams=this.getUsedParamsDetails(tt),wt):St}extendTranslation(et,tt,rt,it,st){var ut=this;if(this.i18nFormat&&this.i18nFormat.parse)et=this.i18nFormat.parse(et,{...this.options.interpolation.defaultVariables,...rt},rt.lng||this.language||it.usedLng,it.usedNS,it.usedKey,{resolved:it});else if(!rt.skipInterpolation){rt.interpolation&&this.interpolator.init({...rt,interpolation:{...this.options.interpolation,...rt.interpolation}});const gt=typeof et=="string"&&(rt&&rt.interpolation&&rt.interpolation.skipOnVariables!==void 0?rt.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let bt;if(gt){const St=et.match(this.interpolator.nestingRegexp);bt=St&&St.length}let wt=rt.replace&&typeof rt.replace!="string"?rt.replace:rt;if(this.options.interpolation.defaultVariables&&(wt={...this.options.interpolation.defaultVariables,...wt}),et=this.interpolator.interpolate(et,wt,rt.lng||this.language||it.usedLng,rt),gt){const St=et.match(this.interpolator.nestingRegexp),kt=St&&St.length;bt<kt&&(rt.nest=!1)}!rt.lng&&this.options.compatibilityAPI!=="v1"&&it&&it.res&&(rt.lng=this.language||it.usedLng),rt.nest!==!1&&(et=this.interpolator.nest(et,function(){for(var St=arguments.length,kt=new Array(St),Rt=0;Rt<St;Rt++)kt[Rt]=arguments[Rt];return st&&st[0]===kt[0]&&!rt.context?(ut.logger.warn(`It seems you are nesting recursively key: ${kt[0]} in key: ${tt[0]}`),null):ut.translate(...kt,tt)},rt)),rt.interpolation&&this.interpolator.reset()}const ht=rt.postProcess||this.options.postProcess,at=typeof ht=="string"?[ht]:ht;return et!=null&&at&&at.length&&rt.applyPostProcessor!==!1&&(et=postProcessor.handle(at,et,tt,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...it,usedParams:this.getUsedParamsDetails(rt)},...rt}:rt,this)),et}resolve(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},rt,it,st,ut,ht;return typeof et=="string"&&(et=[et]),et.forEach(at=>{if(this.isValidLookup(rt))return;const gt=this.extractFromKey(at,tt),bt=gt.key;it=bt;let wt=gt.namespaces;this.options.fallbackNS&&(wt=wt.concat(this.options.fallbackNS));const St=tt.count!==void 0&&typeof tt.count!="string",kt=St&&!tt.ordinal&&tt.count===0&&this.pluralResolver.shouldUseIntlApi(),Rt=tt.context!==void 0&&(typeof tt.context=="string"||typeof tt.context=="number")&&tt.context!=="",It=tt.lngs?tt.lngs:this.languageUtils.toResolveHierarchy(tt.lng||this.language,tt.fallbackLng);wt.forEach(Dt=>{this.isValidLookup(rt)||(ht=Dt,!checkedLoadedFor[`${It[0]}-${Dt}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(ht)&&(checkedLoadedFor[`${It[0]}-${Dt}`]=!0,this.logger.warn(`key "${it}" for languages "${It.join(", ")}" won't get resolved as namespace "${ht}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),It.forEach(Mt=>{if(this.isValidLookup(rt))return;ut=Mt;const $t=[bt];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys($t,bt,Mt,Dt,tt);else{let Nt;St&&(Nt=this.pluralResolver.getSuffix(Mt,tt.count,tt));const Ut=`${this.options.pluralSeparator}zero`,Ht=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(St&&($t.push(bt+Nt),tt.ordinal&&Nt.indexOf(Ht)===0&&$t.push(bt+Nt.replace(Ht,this.options.pluralSeparator)),kt&&$t.push(bt+Ut)),Rt){const Kt=`${bt}${this.options.contextSeparator}${tt.context}`;$t.push(Kt),St&&($t.push(Kt+Nt),tt.ordinal&&Nt.indexOf(Ht)===0&&$t.push(Kt+Nt.replace(Ht,this.options.pluralSeparator)),kt&&$t.push(Kt+Ut))}}let jt;for(;jt=$t.pop();)this.isValidLookup(rt)||(st=jt,rt=this.getResource(Mt,Dt,jt,tt))}))})}),{res:rt,usedKey:it,exactUsedKey:st,usedLng:ut,usedNS:ht}}isValidLookup(et){return et!==void 0&&!(!this.options.returnNull&&et===null)&&!(!this.options.returnEmptyString&&et==="")}getResource(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(et,tt,rt,it):this.resourceStore.getResource(et,tt,rt,it)}getUsedParamsDetails(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const tt=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],rt=et.replace&&typeof et.replace!="string";let it=rt?et.replace:et;if(rt&&typeof et.count<"u"&&(it.count=et.count),this.options.interpolation.defaultVariables&&(it={...this.options.interpolation.defaultVariables,...it}),!rt){it={...it};for(const st of tt)delete it[st]}return it}static hasDefaultValue(et){const tt="defaultValue";for(const rt in et)if(Object.prototype.hasOwnProperty.call(et,rt)&&tt===rt.substring(0,tt.length)&&et[rt]!==void 0)return!0;return!1}}const capitalize=_e=>_e.charAt(0).toUpperCase()+_e.slice(1);class LanguageUtil{constructor(et){this.options=et,this.supportedLngs=this.options.supportedLngs||!1,this.logger=baseLogger.create("languageUtils")}getScriptPartFromCode(et){if(et=getCleanedCode(et),!et||et.indexOf("-")<0)return null;const tt=et.split("-");return tt.length===2||(tt.pop(),tt[tt.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(tt.join("-"))}getLanguagePartFromCode(et){if(et=getCleanedCode(et),!et||et.indexOf("-")<0)return et;const tt=et.split("-");return this.formatLanguageCode(tt[0])}formatLanguageCode(et){if(typeof et=="string"&&et.indexOf("-")>-1){const tt=["hans","hant","latn","cyrl","cans","mong","arab"];let rt=et.split("-");return this.options.lowerCaseLng?rt=rt.map(it=>it.toLowerCase()):rt.length===2?(rt[0]=rt[0].toLowerCase(),rt[1]=rt[1].toUpperCase(),tt.indexOf(rt[1].toLowerCase())>-1&&(rt[1]=capitalize(rt[1].toLowerCase()))):rt.length===3&&(rt[0]=rt[0].toLowerCase(),rt[1].length===2&&(rt[1]=rt[1].toUpperCase()),rt[0]!=="sgn"&&rt[2].length===2&&(rt[2]=rt[2].toUpperCase()),tt.indexOf(rt[1].toLowerCase())>-1&&(rt[1]=capitalize(rt[1].toLowerCase())),tt.indexOf(rt[2].toLowerCase())>-1&&(rt[2]=capitalize(rt[2].toLowerCase()))),rt.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?et.toLowerCase():et}isSupportedCode(et){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(et=this.getLanguagePartFromCode(et)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(et)>-1}getBestMatchFromCodes(et){if(!et)return null;let tt;return et.forEach(rt=>{if(tt)return;const it=this.formatLanguageCode(rt);(!this.options.supportedLngs||this.isSupportedCode(it))&&(tt=it)}),!tt&&this.options.supportedLngs&&et.forEach(rt=>{if(tt)return;const it=this.getLanguagePartFromCode(rt);if(this.isSupportedCode(it))return tt=it;tt=this.options.supportedLngs.find(st=>{if(st===it)return st;if(!(st.indexOf("-")<0&&it.indexOf("-")<0)&&(st.indexOf("-")>0&&it.indexOf("-")<0&&st.substring(0,st.indexOf("-"))===it||st.indexOf(it)===0&&it.length>1))return st})}),tt||(tt=this.getFallbackCodes(this.options.fallbackLng)[0]),tt}getFallbackCodes(et,tt){if(!et)return[];if(typeof et=="function"&&(et=et(tt)),typeof et=="string"&&(et=[et]),Array.isArray(et))return et;if(!tt)return et.default||[];let rt=et[tt];return rt||(rt=et[this.getScriptPartFromCode(tt)]),rt||(rt=et[this.formatLanguageCode(tt)]),rt||(rt=et[this.getLanguagePartFromCode(tt)]),rt||(rt=et.default),rt||[]}toResolveHierarchy(et,tt){const rt=this.getFallbackCodes(tt||this.options.fallbackLng||[],et),it=[],st=ut=>{ut&&(this.isSupportedCode(ut)?it.push(ut):this.logger.warn(`rejecting language code not found in supportedLngs: ${ut}`))};return typeof et=="string"&&(et.indexOf("-")>-1||et.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&st(this.formatLanguageCode(et)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&st(this.getScriptPartFromCode(et)),this.options.load!=="currentOnly"&&st(this.getLanguagePartFromCode(et))):typeof et=="string"&&st(this.formatLanguageCode(et)),rt.forEach(ut=>{it.indexOf(ut)<0&&st(this.formatLanguageCode(ut))}),it}}let sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:_e=>+(_e>1),2:_e=>+(_e!=1),3:_e=>0,4:_e=>_e%10==1&&_e%100!=11?0:_e%10>=2&&_e%10<=4&&(_e%100<10||_e%100>=20)?1:2,5:_e=>_e==0?0:_e==1?1:_e==2?2:_e%100>=3&&_e%100<=10?3:_e%100>=11?4:5,6:_e=>_e==1?0:_e>=2&&_e<=4?1:2,7:_e=>_e==1?0:_e%10>=2&&_e%10<=4&&(_e%100<10||_e%100>=20)?1:2,8:_e=>_e==1?0:_e==2?1:_e!=8&&_e!=11?2:3,9:_e=>+(_e>=2),10:_e=>_e==1?0:_e==2?1:_e<7?2:_e<11?3:4,11:_e=>_e==1||_e==11?0:_e==2||_e==12?1:_e>2&&_e<20?2:3,12:_e=>+(_e%10!=1||_e%100==11),13:_e=>+(_e!==0),14:_e=>_e==1?0:_e==2?1:_e==3?2:3,15:_e=>_e%10==1&&_e%100!=11?0:_e%10>=2&&(_e%100<10||_e%100>=20)?1:2,16:_e=>_e%10==1&&_e%100!=11?0:_e!==0?1:2,17:_e=>_e==1||_e%10==1&&_e%100!=11?0:1,18:_e=>_e==0?0:_e==1?1:2,19:_e=>_e==1?0:_e==0||_e%100>1&&_e%100<11?1:_e%100>10&&_e%100<20?2:3,20:_e=>_e==1?0:_e==0||_e%100>0&&_e%100<20?1:2,21:_e=>_e%100==1?1:_e%100==2?2:_e%100==3||_e%100==4?3:0,22:_e=>_e==1?0:_e==2?1:(_e<0||_e>10)&&_e%10==0?2:3};const nonIntlVersions=["v1","v2","v3"],intlVersions=["v4"],suffixesOrder={zero:0,one:1,two:2,few:3,many:4,other:5},createRules=()=>{const _e={};return sets.forEach(et=>{et.lngs.forEach(tt=>{_e[tt]={numbers:et.nr,plurals:_rulesPluralsTypes[et.fc]}})}),_e};class PluralResolver{constructor(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=et,this.options=tt,this.logger=baseLogger.create("pluralResolver"),(!this.options.compatibilityJSON||intlVersions.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=createRules(),this.pluralRulesCache={}}addRule(et,tt){this.rules[et]=tt}clearCache(){this.pluralRulesCache={}}getRule(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const rt=getCleanedCode(et==="dev"?"en":et),it=tt.ordinal?"ordinal":"cardinal",st=JSON.stringify({cleanedCode:rt,type:it});if(st in this.pluralRulesCache)return this.pluralRulesCache[st];const ut=new Intl.PluralRules(rt,{type:it});return this.pluralRulesCache[st]=ut,ut}catch{return}return this.rules[et]||this.rules[this.languageUtils.getLanguagePartFromCode(et)]}needsPlural(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const rt=this.getRule(et,tt);return this.shouldUseIntlApi()?rt&&rt.resolvedOptions().pluralCategories.length>1:rt&&rt.numbers.length>1}getPluralFormsOfKey(et,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(et,rt).map(it=>`${tt}${it}`)}getSuffixes(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const rt=this.getRule(et,tt);return rt?this.shouldUseIntlApi()?rt.resolvedOptions().pluralCategories.sort((it,st)=>suffixesOrder[it]-suffixesOrder[st]).map(it=>`${this.options.prepend}${tt.ordinal?`ordinal${this.options.prepend}`:""}${it}`):rt.numbers.map(it=>this.getSuffix(et,it,tt)):[]}getSuffix(et,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const it=this.getRule(et,rt);return it?this.shouldUseIntlApi()?`${this.options.prepend}${rt.ordinal?`ordinal${this.options.prepend}`:""}${it.select(tt)}`:this.getSuffixRetroCompatible(it,tt):(this.logger.warn(`no plural rule found for: ${et}`),"")}getSuffixRetroCompatible(et,tt){const rt=et.noAbs?et.plurals(tt):et.plurals(Math.abs(tt));let it=et.numbers[rt];this.options.simplifyPluralSuffix&&et.numbers.length===2&&et.numbers[0]===1&&(it===2?it="plural":it===1&&(it=""));const st=()=>this.options.prepend&&it.toString()?this.options.prepend+it.toString():it.toString();return this.options.compatibilityJSON==="v1"?it===1?"":typeof it=="number"?`_plural_${it.toString()}`:st():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&et.numbers.length===2&&et.numbers[0]===1?st():this.options.prepend&&rt.toString()?this.options.prepend+rt.toString():rt.toString()}shouldUseIntlApi(){return!nonIntlVersions.includes(this.options.compatibilityJSON)}}const deepFindWithDefaults=function(_e,et,tt){let rt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",it=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,st=getPathWithDefaults(_e,et,tt);return!st&&it&&typeof tt=="string"&&(st=deepFind(_e,tt,rt),st===void 0&&(st=deepFind(et,tt,rt))),st},regexSafe=_e=>_e.replace(/\$/g,"$$$$");class Interpolator{constructor(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("interpolator"),this.options=et,this.format=et.interpolation&&et.interpolation.format||(tt=>tt),this.init(et)}init(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et.interpolation||(et.interpolation={escapeValue:!0});const{escape:tt,escapeValue:rt,useRawValueToEscape:it,prefix:st,prefixEscaped:ut,suffix:ht,suffixEscaped:at,formatSeparator:gt,unescapeSuffix:bt,unescapePrefix:wt,nestingPrefix:St,nestingPrefixEscaped:kt,nestingSuffix:Rt,nestingSuffixEscaped:It,nestingOptionsSeparator:Dt,maxReplaces:Mt,alwaysFormat:$t}=et.interpolation;this.escape=tt!==void 0?tt:escape,this.escapeValue=rt!==void 0?rt:!0,this.useRawValueToEscape=it!==void 0?it:!1,this.prefix=st?regexEscape(st):ut||"{{",this.suffix=ht?regexEscape(ht):at||"}}",this.formatSeparator=gt||",",this.unescapePrefix=bt?"":wt||"-",this.unescapeSuffix=this.unescapePrefix?"":bt||"",this.nestingPrefix=St?regexEscape(St):kt||regexEscape("$t("),this.nestingSuffix=Rt?regexEscape(Rt):It||regexEscape(")"),this.nestingOptionsSeparator=Dt||",",this.maxReplaces=Mt||1e3,this.alwaysFormat=$t!==void 0?$t:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const et=(tt,rt)=>tt&&tt.source===rt?(tt.lastIndex=0,tt):new RegExp(rt,"g");this.regexp=et(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=et(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=et(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(et,tt,rt,it){let st,ut,ht;const at=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},gt=kt=>{if(kt.indexOf(this.formatSeparator)<0){const Mt=deepFindWithDefaults(tt,at,kt,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(Mt,void 0,rt,{...it,...tt,interpolationkey:kt}):Mt}const Rt=kt.split(this.formatSeparator),It=Rt.shift().trim(),Dt=Rt.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(tt,at,It,this.options.keySeparator,this.options.ignoreJSONStructure),Dt,rt,{...it,...tt,interpolationkey:It})};this.resetRegExp();const bt=it&&it.missingInterpolationHandler||this.options.missingInterpolationHandler,wt=it&&it.interpolation&&it.interpolation.skipOnVariables!==void 0?it.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:kt=>regexSafe(kt)},{regex:this.regexp,safeValue:kt=>this.escapeValue?regexSafe(this.escape(kt)):regexSafe(kt)}].forEach(kt=>{for(ht=0;st=kt.regex.exec(et);){const Rt=st[1].trim();if(ut=gt(Rt),ut===void 0)if(typeof bt=="function"){const Dt=bt(et,st,it);ut=typeof Dt=="string"?Dt:""}else if(it&&Object.prototype.hasOwnProperty.call(it,Rt))ut="";else if(wt){ut=st[0];continue}else this.logger.warn(`missed to pass in variable ${Rt} for interpolating ${et}`),ut="";else typeof ut!="string"&&!this.useRawValueToEscape&&(ut=makeString(ut));const It=kt.safeValue(ut);if(et=et.replace(st[0],It),wt?(kt.regex.lastIndex+=ut.length,kt.regex.lastIndex-=st[0].length):kt.regex.lastIndex=0,ht++,ht>=this.maxReplaces)break}}),et}nest(et,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},it,st,ut;const ht=(at,gt)=>{const bt=this.nestingOptionsSeparator;if(at.indexOf(bt)<0)return at;const wt=at.split(new RegExp(`${bt}[ ]*{`));let St=`{${wt[1]}`;at=wt[0],St=this.interpolate(St,ut);const kt=St.match(/'/g),Rt=St.match(/"/g);(kt&&kt.length%2===0&&!Rt||Rt.length%2!==0)&&(St=St.replace(/'/g,'"'));try{ut=JSON.parse(St),gt&&(ut={...gt,...ut})}catch(It){return this.logger.warn(`failed parsing options string in nesting for key ${at}`,It),`${at}${bt}${St}`}return ut.defaultValue&&ut.defaultValue.indexOf(this.prefix)>-1&&delete ut.defaultValue,at};for(;it=this.nestingRegexp.exec(et);){let at=[];ut={...rt},ut=ut.replace&&typeof ut.replace!="string"?ut.replace:ut,ut.applyPostProcessor=!1,delete ut.defaultValue;let gt=!1;if(it[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(it[1])){const bt=it[1].split(this.formatSeparator).map(wt=>wt.trim());it[1]=bt.shift(),at=bt,gt=!0}if(st=tt(ht.call(this,it[1].trim(),ut),ut),st&&it[0]===et&&typeof st!="string")return st;typeof st!="string"&&(st=makeString(st)),st||(this.logger.warn(`missed to resolve ${it[1]} for nesting ${et}`),st=""),gt&&(st=at.reduce((bt,wt)=>this.format(bt,wt,rt.lng,{...rt,interpolationkey:it[1].trim()}),st.trim())),et=et.replace(it[0],st),this.regexp.lastIndex=0}return et}}const parseFormatStr=_e=>{let et=_e.toLowerCase().trim();const tt={};if(_e.indexOf("(")>-1){const rt=_e.split("(");et=rt[0].toLowerCase().trim();const it=rt[1].substring(0,rt[1].length-1);et==="currency"&&it.indexOf(":")<0?tt.currency||(tt.currency=it.trim()):et==="relativetime"&&it.indexOf(":")<0?tt.range||(tt.range=it.trim()):it.split(";").forEach(ut=>{if(ut){const[ht,...at]=ut.split(":"),gt=at.join(":").trim().replace(/^'+|'+$/g,""),bt=ht.trim();tt[bt]||(tt[bt]=gt),gt==="false"&&(tt[bt]=!1),gt==="true"&&(tt[bt]=!0),isNaN(gt)||(tt[bt]=parseInt(gt,10))}})}return{formatName:et,formatOptions:tt}},createCachedFormatter=_e=>{const et={};return(tt,rt,it)=>{let st=it;it&&it.interpolationkey&&it.formatParams&&it.formatParams[it.interpolationkey]&&it[it.interpolationkey]&&(st={...st,[it.interpolationkey]:void 0});const ut=rt+JSON.stringify(st);let ht=et[ut];return ht||(ht=_e(getCleanedCode(rt),it),et[ut]=ht),ht(tt)}};class Formatter{constructor(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=baseLogger.create("formatter"),this.options=et,this.formats={number:createCachedFormatter((tt,rt)=>{const it=new Intl.NumberFormat(tt,{...rt});return st=>it.format(st)}),currency:createCachedFormatter((tt,rt)=>{const it=new Intl.NumberFormat(tt,{...rt,style:"currency"});return st=>it.format(st)}),datetime:createCachedFormatter((tt,rt)=>{const it=new Intl.DateTimeFormat(tt,{...rt});return st=>it.format(st)}),relativetime:createCachedFormatter((tt,rt)=>{const it=new Intl.RelativeTimeFormat(tt,{...rt});return st=>it.format(st,rt.range||"day")}),list:createCachedFormatter((tt,rt)=>{const it=new Intl.ListFormat(tt,{...rt});return st=>it.format(st)})},this.init(et)}init(et){const rt=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=rt.formatSeparator?rt.formatSeparator:rt.formatSeparator||","}add(et,tt){this.formats[et.toLowerCase().trim()]=tt}addCached(et,tt){this.formats[et.toLowerCase().trim()]=createCachedFormatter(tt)}format(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const st=tt.split(this.formatSeparator);if(st.length>1&&st[0].indexOf("(")>1&&st[0].indexOf(")")<0&&st.find(ht=>ht.indexOf(")")>-1)){const ht=st.findIndex(at=>at.indexOf(")")>-1);st[0]=[st[0],...st.splice(1,ht)].join(this.formatSeparator)}return st.reduce((ht,at)=>{const{formatName:gt,formatOptions:bt}=parseFormatStr(at);if(this.formats[gt]){let wt=ht;try{const St=it&&it.formatParams&&it.formatParams[it.interpolationkey]||{},kt=St.locale||St.lng||it.locale||it.lng||rt;wt=this.formats[gt](ht,kt,{...bt,...it,...St})}catch(St){this.logger.warn(St)}return wt}else this.logger.warn(`there was no format function for ${gt}`);return ht},et)}}const removePending=(_e,et)=>{_e.pending[et]!==void 0&&(delete _e.pending[et],_e.pendingCount--)};class Connector extends EventEmitter{constructor(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=et,this.store=tt,this.services=rt,this.languageUtils=rt.languageUtils,this.options=it,this.logger=baseLogger.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=it.maxParallelReads||10,this.readingCalls=0,this.maxRetries=it.maxRetries>=0?it.maxRetries:5,this.retryTimeout=it.retryTimeout>=1?it.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(rt,it.backend,it)}queueLoad(et,tt,rt,it){const st={},ut={},ht={},at={};return et.forEach(gt=>{let bt=!0;tt.forEach(wt=>{const St=`${gt}|${wt}`;!rt.reload&&this.store.hasResourceBundle(gt,wt)?this.state[St]=2:this.state[St]<0||(this.state[St]===1?ut[St]===void 0&&(ut[St]=!0):(this.state[St]=1,bt=!1,ut[St]===void 0&&(ut[St]=!0),st[St]===void 0&&(st[St]=!0),at[wt]===void 0&&(at[wt]=!0)))}),bt||(ht[gt]=!0)}),(Object.keys(st).length||Object.keys(ut).length)&&this.queue.push({pending:ut,pendingCount:Object.keys(ut).length,loaded:{},errors:[],callback:it}),{toLoad:Object.keys(st),pending:Object.keys(ut),toLoadLanguages:Object.keys(ht),toLoadNamespaces:Object.keys(at)}}loaded(et,tt,rt){const it=et.split("|"),st=it[0],ut=it[1];tt&&this.emit("failedLoading",st,ut,tt),!tt&&rt&&this.store.addResourceBundle(st,ut,rt,void 0,void 0,{skipCopy:!0}),this.state[et]=tt?-1:2,tt&&rt&&(this.state[et]=0);const ht={};this.queue.forEach(at=>{pushPath(at.loaded,[st],ut),removePending(at,et),tt&&at.errors.push(tt),at.pendingCount===0&&!at.done&&(Object.keys(at.loaded).forEach(gt=>{ht[gt]||(ht[gt]={});const bt=at.loaded[gt];bt.length&&bt.forEach(wt=>{ht[gt][wt]===void 0&&(ht[gt][wt]=!0)})}),at.done=!0,at.errors.length?at.callback(at.errors):at.callback())}),this.emit("loaded",ht),this.queue=this.queue.filter(at=>!at.done)}read(et,tt,rt){let it=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,st=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,ut=arguments.length>5?arguments[5]:void 0;if(!et.length)return ut(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:et,ns:tt,fcName:rt,tried:it,wait:st,callback:ut});return}this.readingCalls++;const ht=(gt,bt)=>{if(this.readingCalls--,this.waitingReads.length>0){const wt=this.waitingReads.shift();this.read(wt.lng,wt.ns,wt.fcName,wt.tried,wt.wait,wt.callback)}if(gt&&bt&&it<this.maxRetries){setTimeout(()=>{this.read.call(this,et,tt,rt,it+1,st*2,ut)},st);return}ut(gt,bt)},at=this.backend[rt].bind(this.backend);if(at.length===2){try{const gt=at(et,tt);gt&&typeof gt.then=="function"?gt.then(bt=>ht(null,bt)).catch(ht):ht(null,gt)}catch(gt){ht(gt)}return}return at(et,tt,ht)}prepareLoading(et,tt){let rt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},it=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),it&&it();typeof et=="string"&&(et=this.languageUtils.toResolveHierarchy(et)),typeof tt=="string"&&(tt=[tt]);const st=this.queueLoad(et,tt,rt,it);if(!st.toLoad.length)return st.pending.length||it(),null;st.toLoad.forEach(ut=>{this.loadOne(ut)})}load(et,tt,rt){this.prepareLoading(et,tt,{},rt)}reload(et,tt,rt){this.prepareLoading(et,tt,{reload:!0},rt)}loadOne(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const rt=et.split("|"),it=rt[0],st=rt[1];this.read(it,st,"read",void 0,void 0,(ut,ht)=>{ut&&this.logger.warn(`${tt}loading namespace ${st} for language ${it} failed`,ut),!ut&&ht&&this.logger.log(`${tt}loaded namespace ${st} for language ${it}`,ht),this.loaded(et,ut,ht)})}saveMissing(et,tt,rt,it,st){let ut=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},ht=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(tt)){this.logger.warn(`did not save key "${rt}" as the namespace "${tt}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(rt==null||rt==="")){if(this.backend&&this.backend.create){const at={...ut,isUpdate:st},gt=this.backend.create.bind(this.backend);if(gt.length<6)try{let bt;gt.length===5?bt=gt(et,tt,rt,it,at):bt=gt(et,tt,rt,it),bt&&typeof bt.then=="function"?bt.then(wt=>ht(null,wt)).catch(ht):ht(null,bt)}catch(bt){ht(bt)}else gt(et,tt,rt,it,ht,at)}!et||!et[0]||this.store.addResource(et[0],tt,rt,it)}}}const get=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:_e=>{let et={};if(typeof _e[1]=="object"&&(et=_e[1]),typeof _e[1]=="string"&&(et.defaultValue=_e[1]),typeof _e[2]=="string"&&(et.tDescription=_e[2]),typeof _e[2]=="object"||typeof _e[3]=="object"){const tt=_e[3]||_e[2];Object.keys(tt).forEach(rt=>{et[rt]=tt[rt]})}return et},interpolation:{escapeValue:!0,format:_e=>_e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),transformOptions=_e=>(typeof _e.ns=="string"&&(_e.ns=[_e.ns]),typeof _e.fallbackLng=="string"&&(_e.fallbackLng=[_e.fallbackLng]),typeof _e.fallbackNS=="string"&&(_e.fallbackNS=[_e.fallbackNS]),_e.supportedLngs&&_e.supportedLngs.indexOf("cimode")<0&&(_e.supportedLngs=_e.supportedLngs.concat(["cimode"])),_e),noop=()=>{},bindMemberFunctions=_e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(_e)).forEach(tt=>{typeof _e[tt]=="function"&&(_e[tt]=_e[tt].bind(_e))})};class I18n extends EventEmitter{constructor(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(et),this.services={},this.logger=baseLogger,this.modules={external:[]},bindMemberFunctions(this),tt&&!this.isInitialized&&!et.isClone){if(!this.options.initImmediate)return this.init(et,tt),this;setTimeout(()=>{this.init(et,tt)},0)}}init(){var et=this;let tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},rt=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof tt=="function"&&(rt=tt,tt={}),!tt.defaultNS&&tt.defaultNS!==!1&&tt.ns&&(typeof tt.ns=="string"?tt.defaultNS=tt.ns:tt.ns.indexOf("translation")<0&&(tt.defaultNS=tt.ns[0]));const it=get();this.options={...it,...this.options,...transformOptions(tt)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...it.interpolation,...this.options.interpolation}),tt.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=tt.keySeparator),tt.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=tt.nsSeparator);const st=bt=>bt?typeof bt=="function"?new bt:bt:null;if(!this.options.isClone){this.modules.logger?baseLogger.init(st(this.modules.logger),this.options):baseLogger.init(null,this.options);let bt;this.modules.formatter?bt=this.modules.formatter:typeof Intl<"u"&&(bt=Formatter);const wt=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);const St=this.services;St.logger=baseLogger,St.resourceStore=this.store,St.languageUtils=wt,St.pluralResolver=new PluralResolver(wt,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),bt&&(!this.options.interpolation.format||this.options.interpolation.format===it.interpolation.format)&&(St.formatter=st(bt),St.formatter.init(St,this.options),this.options.interpolation.format=St.formatter.format.bind(St.formatter)),St.interpolator=new Interpolator(this.options),St.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},St.backendConnector=new Connector(st(this.modules.backend),St.resourceStore,St,this.options),St.backendConnector.on("*",function(kt){for(var Rt=arguments.length,It=new Array(Rt>1?Rt-1:0),Dt=1;Dt<Rt;Dt++)It[Dt-1]=arguments[Dt];et.emit(kt,...It)}),this.modules.languageDetector&&(St.languageDetector=st(this.modules.languageDetector),St.languageDetector.init&&St.languageDetector.init(St,this.options.detection,this.options)),this.modules.i18nFormat&&(St.i18nFormat=st(this.modules.i18nFormat),St.i18nFormat.init&&St.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(kt){for(var Rt=arguments.length,It=new Array(Rt>1?Rt-1:0),Dt=1;Dt<Rt;Dt++)It[Dt-1]=arguments[Dt];et.emit(kt,...It)}),this.modules.external.forEach(kt=>{kt.init&&kt.init(this)})}if(this.format=this.options.interpolation.format,rt||(rt=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const bt=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);bt.length>0&&bt[0]!=="dev"&&(this.options.lng=bt[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(bt=>{this[bt]=function(){return et.store[bt](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(bt=>{this[bt]=function(){return et.store[bt](...arguments),et}});const at=defer(),gt=()=>{const bt=(wt,St)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),at.resolve(St),rt(wt,St)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return bt(null,this.t.bind(this));this.changeLanguage(this.options.lng,bt)};return this.options.resources||!this.options.initImmediate?gt():setTimeout(gt,0),at}loadResources(et){let rt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const it=typeof et=="string"?et:this.language;if(typeof et=="function"&&(rt=et),!this.options.resources||this.options.partialBundledLanguages){if(it&&it.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return rt();const st=[],ut=ht=>{if(!ht||ht==="cimode")return;this.services.languageUtils.toResolveHierarchy(ht).forEach(gt=>{gt!=="cimode"&&st.indexOf(gt)<0&&st.push(gt)})};it?ut(it):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(at=>ut(at)),this.options.preload&&this.options.preload.forEach(ht=>ut(ht)),this.services.backendConnector.load(st,this.options.ns,ht=>{!ht&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),rt(ht)})}else rt(null)}reloadResources(et,tt,rt){const it=defer();return typeof et=="function"&&(rt=et,et=void 0),typeof tt=="function"&&(rt=tt,tt=void 0),et||(et=this.languages),tt||(tt=this.options.ns),rt||(rt=noop),this.services.backendConnector.reload(et,tt,st=>{it.resolve(),rt(st)}),it}use(et){if(!et)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!et.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return et.type==="backend"&&(this.modules.backend=et),(et.type==="logger"||et.log&&et.warn&&et.error)&&(this.modules.logger=et),et.type==="languageDetector"&&(this.modules.languageDetector=et),et.type==="i18nFormat"&&(this.modules.i18nFormat=et),et.type==="postProcessor"&&postProcessor.addPostProcessor(et),et.type==="formatter"&&(this.modules.formatter=et),et.type==="3rdParty"&&this.modules.external.push(et),this}setResolvedLanguage(et){if(!(!et||!this.languages)&&!(["cimode","dev"].indexOf(et)>-1))for(let tt=0;tt<this.languages.length;tt++){const rt=this.languages[tt];if(!(["cimode","dev"].indexOf(rt)>-1)&&this.store.hasLanguageSomeTranslations(rt)){this.resolvedLanguage=rt;break}}}changeLanguage(et,tt){var rt=this;this.isLanguageChangingTo=et;const it=defer();this.emit("languageChanging",et);const st=at=>{this.language=at,this.languages=this.services.languageUtils.toResolveHierarchy(at),this.resolvedLanguage=void 0,this.setResolvedLanguage(at)},ut=(at,gt)=>{gt?(st(gt),this.translator.changeLanguage(gt),this.isLanguageChangingTo=void 0,this.emit("languageChanged",gt),this.logger.log("languageChanged",gt)):this.isLanguageChangingTo=void 0,it.resolve(function(){return rt.t(...arguments)}),tt&&tt(at,function(){return rt.t(...arguments)})},ht=at=>{!et&&!at&&this.services.languageDetector&&(at=[]);const gt=typeof at=="string"?at:this.services.languageUtils.getBestMatchFromCodes(at);gt&&(this.language||st(gt),this.translator.language||this.translator.changeLanguage(gt),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(gt)),this.loadResources(gt,bt=>{ut(bt,gt)})};return!et&&this.services.languageDetector&&!this.services.languageDetector.async?ht(this.services.languageDetector.detect()):!et&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(ht):this.services.languageDetector.detect(ht):ht(et),it}getFixedT(et,tt,rt){var it=this;const st=function(ut,ht){let at;if(typeof ht!="object"){for(var gt=arguments.length,bt=new Array(gt>2?gt-2:0),wt=2;wt<gt;wt++)bt[wt-2]=arguments[wt];at=it.options.overloadTranslationOptionHandler([ut,ht].concat(bt))}else at={...ht};at.lng=at.lng||st.lng,at.lngs=at.lngs||st.lngs,at.ns=at.ns||st.ns,at.keyPrefix!==""&&(at.keyPrefix=at.keyPrefix||rt||st.keyPrefix);const St=it.options.keySeparator||".";let kt;return at.keyPrefix&&Array.isArray(ut)?kt=ut.map(Rt=>`${at.keyPrefix}${St}${Rt}`):kt=at.keyPrefix?`${at.keyPrefix}${St}${ut}`:ut,it.t(kt,at)};return typeof et=="string"?st.lng=et:st.lngs=et,st.ns=tt,st.keyPrefix=rt,st}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(et){this.options.defaultNS=et}hasLoadedNamespace(et){let tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const rt=tt.lng||this.resolvedLanguage||this.languages[0],it=this.options?this.options.fallbackLng:!1,st=this.languages[this.languages.length-1];if(rt.toLowerCase()==="cimode")return!0;const ut=(ht,at)=>{const gt=this.services.backendConnector.state[`${ht}|${at}`];return gt===-1||gt===0||gt===2};if(tt.precheck){const ht=tt.precheck(this,ut);if(ht!==void 0)return ht}return!!(this.hasResourceBundle(rt,et)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||ut(rt,et)&&(!it||ut(st,et)))}loadNamespaces(et,tt){const rt=defer();return this.options.ns?(typeof et=="string"&&(et=[et]),et.forEach(it=>{this.options.ns.indexOf(it)<0&&this.options.ns.push(it)}),this.loadResources(it=>{rt.resolve(),tt&&tt(it)}),rt):(tt&&tt(),Promise.resolve())}loadLanguages(et,tt){const rt=defer();typeof et=="string"&&(et=[et]);const it=this.options.preload||[],st=et.filter(ut=>it.indexOf(ut)<0&&this.services.languageUtils.isSupportedCode(ut));return st.length?(this.options.preload=it.concat(st),this.loadResources(ut=>{rt.resolve(),tt&&tt(ut)}),rt):(tt&&tt(),Promise.resolve())}dir(et){if(et||(et=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!et)return"rtl";const tt=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],rt=this.services&&this.services.languageUtils||new LanguageUtil(get());return tt.indexOf(rt.getLanguagePartFromCode(et))>-1||et.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=arguments.length>1?arguments[1]:void 0;return new I18n(et,tt)}cloneInstance(){let et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:noop;const rt=et.forkResourceStore;rt&&delete et.forkResourceStore;const it={...this.options,...et,isClone:!0},st=new I18n(it);return(et.debug!==void 0||et.prefix!==void 0)&&(st.logger=st.logger.clone(et)),["store","services","language"].forEach(ht=>{st[ht]=this[ht]}),st.services={...this.services},st.services.utils={hasLoadedNamespace:st.hasLoadedNamespace.bind(st)},rt&&(st.store=new ResourceStore(this.store.data,it),st.services.resourceStore=st.store),st.translator=new Translator(st.services,it),st.translator.on("*",function(ht){for(var at=arguments.length,gt=new Array(at>1?at-1:0),bt=1;bt<at;bt++)gt[bt-1]=arguments[bt];st.emit(ht,...gt)}),st.init(it,tt),st.translator.options=it,st.translator.backendConnector.services.utils={hasLoadedNamespace:st.hasLoadedNamespace.bind(st)},st}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const instance=I18n.createInstance();instance.createInstance=I18n.createInstance;instance.createInstance;instance.dir;instance.init;instance.loadResources;instance.reloadResources;instance.use;instance.changeLanguage;instance.getFixedT;instance.t;instance.exists;instance.setDefaultNamespace;instance.hasLoadedNamespace;instance.loadNamespaces;instance.loadLanguages;const locales={en:"English",vi:"Tieng Viet"},resources={en:{translation:{Home:"Home","About us":"About Us","Create order":"Create Order",Cost:"Cost Estimate",Blog:"Blog","Change language":"Change language",English:"English",Vietnamese:"Vietnamese",ContentBanner:"Welcome to Leopard Lorry - a groundbreaking sharing economy platform in the Vietnamese transportation industry. With 5 years of experience in the content field , we are confident to bring you a smart, efficient and economical transportation experience.",Step:"Step","Sign up and log in":"Sign up and log in",Step2:"Step 2","Enter the information you need to search for":"Enter the information you need to search for",Step3:"Step 3","Select the appropriate option":"Select the appropriate option",Step4:"Step 4","Confirm and wait for a response within 24 hours":"Confirm and wait for a response within 24 hours",Step5:"Step 5","Complete payment and delivery":"Complete payment and delivery","How to use our service?":"How to use our service?","Leap and Lead":"Leap and Lead",AboutUsContent1:'Welcome to Leopard Lorry (L&L), a pioneering force in the transportation industry, driven by a passion for innovating domestic logistics. "Bao" leverages the power of the sharing economy to create an innovative platform that optimizes transportation efficiency across Vietnam.',AboutUsContent2:`With a vision to transform the way goods move, "Bao"'s platform connects shippers with a network of trusted carriers, ensuring fast, reliable and cost-effective delivery solutions.`,AboutUsContent3:'Benefits for drivers and businesses: "Bao" offers drivers the opportunity to increase their income with flexible shipments, optimizing time and effort, along with dedicated support through modern applications. For businesses, access to a large transportation network helps reduce costs and optimize the supply chain, while expanding business capabilities effectively.',AboutUsContent4:'Join "Bao" on the journey to redefine transportation. Experience the future of logistics with Leopard Lorry and discover how we can drive success together.',"Our story":"Our story",About:"About","Read more":"Read more",team:"team",members:"members",successfully:"successfully",project:"project",Global:"Global",partners:"partners",q1:"How does Leopard Lorry work?",a1:'"Bao" connects shippers with a network of trusted drivers through an advanced digital platform. Allowing other orders to share the same cargo compartment in a single bill of lading helps to significantly optimize shipping costs',q2:"What are the benefits of using Leopard Lorry's service?",a2:"Customers will save up to 30%, have 20% faster delivery times, and receive flexible, reliable service. Drivers have the opportunity to increase their income by up to 25% and manage their work more easily through the application.",q3:"How can businesses join Leopard Lorry's platform?",a3:'Businesses can register online through the "Bao" website, then will be guided in detail to get started. Currently, there are more than 50 businesses ready to join and satisfied with the service.',q4:"How does Leopard Lorry ensure the safety of goods?",a4:'"Bao" applies strict safety standards and continuously monitors the journey of goods, with a cargo safety rate of 99.8%, ensuring that your goods are always in the best condition.',q5:"How much does it cost to use Leopard Lorry's service?",a5:'The cost depends on the characteristics of each shipment, but "Bao" is committed to providing the most competitive and transparent prices. Customers can receive a quick quote via the app or website.',safe:"Safe",getQuote:"Get a quote",fast:"Fast",global:"Global Forwarding",address:"L&L Tower, District 1, Ho Chi Minh City, Viet Nam.",contactToGetEmail:"Subscribe us for price list",Subscribe:"Subscribe",followUs:"Follow us",safeText:"In the transportation industry, maintaining safe practices is essential not only to protect drivers and passengers but also to ensure the secure delivery of goods and services across various routes.",timeWork:"Mon to Sat",contactUs:"Contact Us",costE:"Cost Estimation",help:"Do you want to hire porters?"}},vi:{translation:{help:"Bn c mun thu bc vc khng",contactUs:"Lin lc vi chng ti",costE:"nh gi gi cc",timeWork:"Th 2 n Th By",Subscribe:"ng k",followUs:"Theo di ngay",contactToGetEmail:"ng k  nhn bo gi",address:"Ta nh L&L, qun 1, thnh ph H Ch Minh, Vit Nam",safeText:"Trong ngnh vn ti, vic duy tr cc bin php an ton l iu cn thit khng ch  bo v ngi li xe v hnh khch m cn  m bo giao hng ha v dch v an ton trn nhiu tuyn ng khc nhau.",global:"Ton cu",fast:"Nhanh chng",getQuote:"Nhn bo gi",safe:"An ton",q3:"Lm th no  doanh nghip tham gia vo nn tng ca Leopard Lorry?",a3:'Doanh nghip c th ng k trc tuyn qua website ca "Bo", sau  s c hng dn chi tit  bt u. Hin ti,  c hn 50 doanh nghip sn sng tham gia v hi lng vi dch v.',q4:"Leopard Lorry m bo an ton hng ha nh th no?",a4:'"Bo" p dng cc tiu chun an ton nghim ngt v theo di hnh trnh hng ha lin tc, vi t l an ton hng ha t 99.8%, m bo hng ha ca bn lun trong tnh trng tt nht.',q5:"Chi ph s dng dch v ca Leopard Lorry l bao nhiu?",a5:'Chi ph ph thuc vo c th tng chuyn hng, nhng "Bo" cam kt mang li mc gi cnh tranh v minh bch nht. Khch hng c th nhn bo gi nhanh chng qua ng dng hoc website.',q1:"Leopard Lorry hot ng nh th no?",a1:'"Bao" kt ni ngi gi hng vi mt mng li ti x ng tin cy thng qua mt nn tng k thut s tin tin. Vic cho php cc n hng khc chia s cng mt khoang hng trong mt vn n gip ti u ha chi ph vn chuyn mt cch ng k.',q2:"Li ch ca vic s dng dch v ca Leopard Lorry l g?",a2:"Khch hng s tit kim c ti 30%, c thi gian giao hng nhanh hn 20%, v nhn c dch v linh hot, ng tin cy. Cc ti x c c hi tng thu nhp ln ti 25% v qun l cng vic ca h d dng hn thng qua ng dng.",team:"Thnh",members:"vin",successfully:"D n",project:"Thnh cng",Global:"i tc",partners:"ton cu","Read more":"Tm hu thm",About:"V","Our story":"Cu chuyn ca chng ti",Home:"Trang ch","About us":"V chng ti","Create order":"To n hng",Cost:"nh gi",Blog:"Bi ng","Change language":"i ngn ng",English:"Ting Anh",Vietnamese:"Ting Vit",ContentBanner:"Cho mng bn n vi Leopard Lorry - nn tng kinh t chia s mang tnh t ph trong ngnh vn ti Vit Nam. Vi 5 nm kinh nghim trong lnh vc ni dung, chng ti t tin mang n cho bn tri nghim di chuyn thng minh, hiu qu v tit kim.",Step:"Bc","Sign up and log in":"ng k v ng nhp",Step2:"Bc 2","Enter the information you need to search for":"Nhp thng tin bn cn tm kim",Step3:"Bc 3","Select the appropriate option":"Chn ty chn ph hp",Step4:"Bc 4","Confirm and wait for a response within 24 hours":"Xc nhn v ch phn hi trong vng 24 gi",Step5:"Bc 5","Complete payment and delivery":"Hon tt thanh ton v giao hng","How to use our service?":"Cch s dng dch v ca chng ti?","Leap and Lead":"Bt kp xu th",AboutUsContent1:'Cho mng bn n vi Leopard Lorry (L&L), mt lc lng tin phong trong ngnh vn ti, c thc y bi am m ci tin logistics ni a. "Bo" tn dng sc mnh ca nn kinh t chia s  to ra mt nn tng sng to, ti u ha hiu qu vn chuyn khp Vit Nam.',AboutUsContent2:'Vi tm nhn chuyn i cch thc di chuyn hng ha, nn tng ca "Bo" kt ni ngi gi hng vi mng li cc nh vn chuyn ng tin cy, m bo gii php giao hng nhanh chng, tin cy v tit kim chi ph.',AboutUsContent3:'Li ch cho cc bc ti v doanh nghip: "Bo" mang n c hi tng thu nhp cho cc bc ti vi cc chuyn hng linh hot, gip ti u ha thi gian v cng sc, cng vi s h tr tn tnh qua ng dng hin i. i vi doanh nghip, vic tip cn mt mng li vn ti rng ln gip gim chi ph v ti u ha chui cung ng, ng thi m rng kh nng kinh doanh mt cch hiu qu.',AboutUsContent4:'Hy cng "Bo" trn hnh trnh ti nh ngha vn ti. Tri nghim tng lai ca logistics vi Leopard Lorry v khm ph cch chng ta c th cng nhau thc y thnh cng. '}}};instance.use(initReactI18next).init({resources,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});var lib={},uaParser_min={exports:{}};(function(_e,et){(function(tt,rt){var it="1.0.39",st="",ut="?",ht="function",at="undefined",gt="object",bt="string",wt="major",St="model",kt="name",Rt="type",It="vendor",Dt="version",Mt="architecture",$t="console",jt="mobile",Nt="tablet",Ut="smarttv",Ht="wearable",Kt="embedded",tr=500,mr="Amazon",vr="Apple",wr="ASUS",yr="BlackBerry",Or="Browser",Nr="Chrome",Lr="Edge",ar="Firefox",hr="Google",Qt="Huawei",ir="LG",Mr="Microsoft",Cr="Motorola",rn="Opera",fn="Samsung",Dn="Sharp",Yn="Sony",eo="Xiaomi",Gn="Zebra",lo="Facebook",mn="Chromium OS",Hn="Mac OS",Rn=" Browser",dn=function(co,Ao){var vo={};for(var Fo in co)Ao[Fo]&&Ao[Fo].length%2===0?vo[Fo]=Ao[Fo].concat(co[Fo]):vo[Fo]=co[Fo];return vo},qn=function(co){for(var Ao={},vo=0;vo<co.length;vo++)Ao[co[vo].toUpperCase()]=co[vo];return Ao},On=function(co,Ao){return typeof co===bt?xo(Ao).indexOf(xo(co))!==-1:!1},xo=function(co){return co.toLowerCase()},Io=function(co){return typeof co===bt?co.replace(/[^\d\.]/g,st).split(".")[0]:rt},$o=function(co,Ao){if(typeof co===bt)return co=co.replace(/^\s\s*/,st),typeof Ao===at?co:co.substring(0,tr)},Zr=function(co,Ao){for(var vo=0,Fo,ds,bs,Yo,Po,gs;vo<Ao.length&&!Po;){var ws=Ao[vo],go=Ao[vo+1];for(Fo=ds=0;Fo<ws.length&&!Po&&ws[Fo];)if(Po=ws[Fo++].exec(co),Po)for(bs=0;bs<go.length;bs++)gs=Po[++ds],Yo=go[bs],typeof Yo===gt&&Yo.length>0?Yo.length===2?typeof Yo[1]==ht?this[Yo[0]]=Yo[1].call(this,gs):this[Yo[0]]=Yo[1]:Yo.length===3?typeof Yo[1]===ht&&!(Yo[1].exec&&Yo[1].test)?this[Yo[0]]=gs?Yo[1].call(this,gs,Yo[2]):rt:this[Yo[0]]=gs?gs.replace(Yo[1],Yo[2]):rt:Yo.length===4&&(this[Yo[0]]=gs?Yo[3].call(this,gs.replace(Yo[1],Yo[2])):rt):this[Yo]=gs||rt;vo+=2}},pn=function(co,Ao){for(var vo in Ao)if(typeof Ao[vo]===gt&&Ao[vo].length>0){for(var Fo=0;Fo<Ao[vo].length;Fo++)if(On(Ao[vo][Fo],co))return vo===ut?rt:vo}else if(On(Ao[vo],co))return vo===ut?rt:vo;return Ao.hasOwnProperty("*")?Ao["*"]:co},sn={"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},wn={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Xn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[Dt,[kt,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[Dt,[kt,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[kt,Dt],[/opios[\/ ]+([\w\.]+)/i],[Dt,[kt,rn+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[Dt,[kt,rn+" GX"]],[/\bopr\/([\w\.]+)/i],[Dt,[kt,rn]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[Dt,[kt,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[kt,Dt],[/quark(?:pc)?\/([-\w\.]+)/i],[Dt,[kt,"Quark"]],[/\bddg\/([\w\.]+)/i],[Dt,[kt,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[Dt,[kt,"UC"+Or]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[Dt,[kt,"WeChat"]],[/konqueror\/([\w\.]+)/i],[Dt,[kt,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[Dt,[kt,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[Dt,[kt,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[Dt,[kt,"Smart Lenovo "+Or]],[/(avast|avg)\/([\w\.]+)/i],[[kt,/(.+)/,"$1 Secure "+Or],Dt],[/\bfocus\/([\w\.]+)/i],[Dt,[kt,ar+" Focus"]],[/\bopt\/([\w\.]+)/i],[Dt,[kt,rn+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[Dt,[kt,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[Dt,[kt,"Dolphin"]],[/coast\/([\w\.]+)/i],[Dt,[kt,rn+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[Dt,[kt,"MIUI "+Or]],[/fxios\/([-\w\.]+)/i],[Dt,[kt,ar]],[/\bqihu|(qi?ho?o?|360)browser/i],[[kt,"360"+Rn]],[/\b(qq)\/([\w\.]+)/i],[[kt,/(.+)/,"$1Browser"],Dt],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[kt,/(.+)/,"$1"+Rn],Dt],[/samsungbrowser\/([\w\.]+)/i],[Dt,[kt,fn+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[kt,/_/g," "],Dt],[/metasr[\/ ]?([\d\.]+)/i],[Dt,[kt,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[kt,"Sogou Mobile"],Dt],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[kt,Dt],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[kt],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[kt,lo],Dt],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[kt,Dt],[/\bgsa\/([\w\.]+) .*safari\//i],[Dt,[kt,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[Dt,[kt,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[Dt,[kt,Nr+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[kt,Nr+" WebView"],Dt],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[Dt,[kt,"Android "+Or]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[kt,Dt],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[Dt,[kt,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[Dt,kt],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[kt,[Dt,pn,sn]],[/(webkit|khtml)\/([\w\.]+)/i],[kt,Dt],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[kt,"Netscape"],Dt],[/(wolvic)\/([\w\.]+)/i],[kt,Dt],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[Dt,[kt,ar+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[kt,[Dt,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[kt,[Dt,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Mt,"amd64"]],[/(ia32(?=;))/i],[[Mt,xo]],[/((?:i[346]|x)86)[;\)]/i],[[Mt,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Mt,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Mt,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Mt,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Mt,/ower/,st,xo]],[/(sun4\w)[;\)]/i],[[Mt,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Mt,xo]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[St,[It,fn],[Rt,Nt]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[St,[It,fn],[Rt,jt]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[St,[It,vr],[Rt,jt]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[St,[It,vr],[Rt,Nt]],[/(macintosh);/i],[St,[It,vr]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[St,[It,Dn],[Rt,jt]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[St,[It,Qt],[Rt,Nt]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[St,[It,Qt],[Rt,jt]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[St,/_/g," "],[It,eo],[Rt,jt]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[St,/_/g," "],[It,eo],[Rt,Nt]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[St,[It,"OPPO"],[Rt,jt]],[/\b(opd2\d{3}a?) bui/i],[St,[It,"OPPO"],[Rt,Nt]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[St,[It,"Vivo"],[Rt,jt]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[St,[It,"Realme"],[Rt,jt]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[St,[It,Cr],[Rt,jt]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[St,[It,Cr],[Rt,Nt]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[St,[It,ir],[Rt,Nt]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[St,[It,ir],[Rt,jt]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[St,[It,"Lenovo"],[Rt,Nt]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[St,/_/g," "],[It,"Nokia"],[Rt,jt]],[/(pixel c)\b/i],[St,[It,hr],[Rt,Nt]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[St,[It,hr],[Rt,jt]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[St,[It,Yn],[Rt,jt]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[St,"Xperia Tablet"],[It,Yn],[Rt,Nt]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[St,[It,"OnePlus"],[Rt,jt]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[St,[It,mr],[Rt,Nt]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[St,/(.+)/g,"Fire Phone $1"],[It,mr],[Rt,jt]],[/(playbook);[-\w\),; ]+(rim)/i],[St,It,[Rt,Nt]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[St,[It,yr],[Rt,jt]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[St,[It,wr],[Rt,Nt]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[St,[It,wr],[Rt,jt]],[/(nexus 9)/i],[St,[It,"HTC"],[Rt,Nt]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[It,[St,/_/g," "],[Rt,jt]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[St,[It,"TCL"],[Rt,Nt]],[/(itel) ((\w+))/i],[[It,xo],St,[Rt,pn,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[St,[It,"Acer"],[Rt,Nt]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[St,[It,"Meizu"],[Rt,jt]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[St,[It,"Ulefone"],[Rt,jt]],[/droid.+; (a(?:015|06[35]|142p?))/i],[St,[It,"Nothing"],[Rt,jt]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[It,St,[Rt,jt]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[It,St,[Rt,Nt]],[/(surface duo)/i],[St,[It,Mr],[Rt,Nt]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[St,[It,"Fairphone"],[Rt,jt]],[/(u304aa)/i],[St,[It,"AT&T"],[Rt,jt]],[/\bsie-(\w*)/i],[St,[It,"Siemens"],[Rt,jt]],[/\b(rct\w+) b/i],[St,[It,"RCA"],[Rt,Nt]],[/\b(venue[\d ]{2,7}) b/i],[St,[It,"Dell"],[Rt,Nt]],[/\b(q(?:mv|ta)\w+) b/i],[St,[It,"Verizon"],[Rt,Nt]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[St,[It,"Barnes & Noble"],[Rt,Nt]],[/\b(tm\d{3}\w+) b/i],[St,[It,"NuVision"],[Rt,Nt]],[/\b(k88) b/i],[St,[It,"ZTE"],[Rt,Nt]],[/\b(nx\d{3}j) b/i],[St,[It,"ZTE"],[Rt,jt]],[/\b(gen\d{3}) b.+49h/i],[St,[It,"Swiss"],[Rt,jt]],[/\b(zur\d{3}) b/i],[St,[It,"Swiss"],[Rt,Nt]],[/\b((zeki)?tb.*\b) b/i],[St,[It,"Zeki"],[Rt,Nt]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[It,"Dragon Touch"],St,[Rt,Nt]],[/\b(ns-?\w{0,9}) b/i],[St,[It,"Insignia"],[Rt,Nt]],[/\b((nxa|next)-?\w{0,9}) b/i],[St,[It,"NextBook"],[Rt,Nt]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[It,"Voice"],St,[Rt,jt]],[/\b(lvtel\-)?(v1[12]) b/i],[[It,"LvTel"],St,[Rt,jt]],[/\b(ph-1) /i],[St,[It,"Essential"],[Rt,jt]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[St,[It,"Envizen"],[Rt,Nt]],[/\b(trio[-\w\. ]+) b/i],[St,[It,"MachSpeed"],[Rt,Nt]],[/\btu_(1491) b/i],[St,[It,"Rotor"],[Rt,Nt]],[/(shield[\w ]+) b/i],[St,[It,"Nvidia"],[Rt,Nt]],[/(sprint) (\w+)/i],[It,St,[Rt,jt]],[/(kin\.[onetw]{3})/i],[[St,/\./g," "],[It,Mr],[Rt,jt]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[St,[It,Gn],[Rt,Nt]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[St,[It,Gn],[Rt,jt]],[/smart-tv.+(samsung)/i],[It,[Rt,Ut]],[/hbbtv.+maple;(\d+)/i],[[St,/^/,"SmartTV"],[It,fn],[Rt,Ut]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[It,ir],[Rt,Ut]],[/(apple) ?tv/i],[It,[St,vr+" TV"],[Rt,Ut]],[/crkey/i],[[St,Nr+"cast"],[It,hr],[Rt,Ut]],[/droid.+aft(\w+)( bui|\))/i],[St,[It,mr],[Rt,Ut]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[St,[It,Dn],[Rt,Ut]],[/(bravia[\w ]+)( bui|\))/i],[St,[It,Yn],[Rt,Ut]],[/(mitv-\w{5}) bui/i],[St,[It,eo],[Rt,Ut]],[/Hbbtv.*(technisat) (.*);/i],[It,St,[Rt,Ut]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[It,$o],[St,$o],[Rt,Ut]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[Rt,Ut]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[It,St,[Rt,$t]],[/droid.+; (shield) bui/i],[St,[It,"Nvidia"],[Rt,$t]],[/(playstation [345portablevi]+)/i],[St,[It,Yn],[Rt,$t]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[St,[It,Mr],[Rt,$t]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[St,[It,fn],[Rt,Ht]],[/((pebble))app/i],[It,St,[Rt,Ht]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[St,[It,vr],[Rt,Ht]],[/droid.+; (glass) \d/i],[St,[It,hr],[Rt,Ht]],[/droid.+; (wt63?0{2,3})\)/i],[St,[It,Gn],[Rt,Ht]],[/(quest( \d| pro)?)/i],[St,[It,lo],[Rt,Ht]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[It,[Rt,Kt]],[/(aeobc)\b/i],[St,[It,mr],[Rt,Kt]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[St,[Rt,jt]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[St,[Rt,Nt]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[Rt,Nt]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[Rt,jt]],[/(android[-\w\. ]{0,9});.+buil/i],[St,[It,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[Dt,[kt,Lr+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[Dt,[kt,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[kt,Dt],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[Dt,kt]],os:[[/microsoft (windows) (vista|xp)/i],[kt,Dt],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[kt,[Dt,pn,wn]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[Dt,pn,wn],[kt,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[Dt,/_/g,"."],[kt,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[kt,Hn],[Dt,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[Dt,kt],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[kt,Dt],[/\(bb(10);/i],[Dt,[kt,yr]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[Dt,[kt,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[Dt,[kt,ar+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[Dt,[kt,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[Dt,[kt,"watchOS"]],[/crkey\/([\d\.]+)/i],[Dt,[kt,Nr+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[kt,mn],Dt],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[kt,Dt],[/(sunos) ?([\w\.\d]*)/i],[[kt,"Solaris"],Dt],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[kt,Dt]]},Fn=function(co,Ao){if(typeof co===gt&&(Ao=co,co=rt),!(this instanceof Fn))return new Fn(co,Ao).getResult();var vo=typeof tt!==at&&tt.navigator?tt.navigator:rt,Fo=co||(vo&&vo.userAgent?vo.userAgent:st),ds=vo&&vo.userAgentData?vo.userAgentData:rt,bs=Ao?dn(Xn,Ao):Xn,Yo=vo&&vo.userAgent==Fo;return this.getBrowser=function(){var Po={};return Po[kt]=rt,Po[Dt]=rt,Zr.call(Po,Fo,bs.browser),Po[wt]=Io(Po[Dt]),Yo&&vo&&vo.brave&&typeof vo.brave.isBrave==ht&&(Po[kt]="Brave"),Po},this.getCPU=function(){var Po={};return Po[Mt]=rt,Zr.call(Po,Fo,bs.cpu),Po},this.getDevice=function(){var Po={};return Po[It]=rt,Po[St]=rt,Po[Rt]=rt,Zr.call(Po,Fo,bs.device),Yo&&!Po[Rt]&&ds&&ds.mobile&&(Po[Rt]=jt),Yo&&Po[St]=="Macintosh"&&vo&&typeof vo.standalone!==at&&vo.maxTouchPoints&&vo.maxTouchPoints>2&&(Po[St]="iPad",Po[Rt]=Nt),Po},this.getEngine=function(){var Po={};return Po[kt]=rt,Po[Dt]=rt,Zr.call(Po,Fo,bs.engine),Po},this.getOS=function(){var Po={};return Po[kt]=rt,Po[Dt]=rt,Zr.call(Po,Fo,bs.os),Yo&&!Po[kt]&&ds&&ds.platform&&ds.platform!="Unknown"&&(Po[kt]=ds.platform.replace(/chrome os/i,mn).replace(/macos/i,Hn)),Po},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Fo},this.setUA=function(Po){return Fo=typeof Po===bt&&Po.length>tr?$o(Po,tr):Po,this},this.setUA(Fo),this};Fn.VERSION=it,Fn.BROWSER=qn([kt,Dt,wt]),Fn.CPU=qn([Mt]),Fn.DEVICE=qn([St,It,Rt,$t,jt,Ut,Nt,Ht,Kt]),Fn.ENGINE=Fn.OS=qn([kt,Dt]),_e.exports&&(et=_e.exports=Fn),et.UAParser=Fn;var ro=typeof tt!==at&&(tt.jQuery||tt.Zepto);if(ro&&!ro.ua){var No=new Fn;ro.ua=No.getResult(),ro.ua.get=function(){return No.getUA()},ro.ua.set=function(co){No.setUA(co);var Ao=No.getResult();for(var vo in Ao)ro.ua[vo]=Ao[vo]}}})(typeof window=="object"?window:commonjsGlobal)})(uaParser_min,uaParser_min.exports);var uaParser_minExports=uaParser_min.exports;Object.defineProperty(lib,"__esModule",{value:!0});function _interopDefault(_e){return _e&&typeof _e=="object"&&"default"in _e?_e.default:_e}var React=reactExports,React__default=_interopDefault(React),UAParser=uaParser_minExports,ClientUAInstance=new UAParser,browser=ClientUAInstance.getBrowser(),cpu=ClientUAInstance.getCPU(),device=ClientUAInstance.getDevice(),engine=ClientUAInstance.getEngine(),os=ClientUAInstance.getOS(),ua=ClientUAInstance.getUA(),setUa=function _e(et){return ClientUAInstance.setUA(et)},parseUserAgent=function _e(et){if(!et){console.error("No userAgent string was provided");return}var tt=new UAParser(et);return{UA:tt,browser:tt.getBrowser(),cpu:tt.getCPU(),device:tt.getDevice(),engine:tt.getEngine(),os:tt.getOS(),ua:tt.getUA(),setUserAgent:function(it){return tt.setUA(it)}}},UAHelper=Object.freeze({ClientUAInstance,browser,cpu,device,engine,os,ua,setUa,parseUserAgent});function ownKeys(_e,et){var tt=Object.keys(_e);if(Object.getOwnPropertySymbols){var rt=Object.getOwnPropertySymbols(_e);et&&(rt=rt.filter(function(it){return Object.getOwnPropertyDescriptor(_e,it).enumerable})),tt.push.apply(tt,rt)}return tt}function _objectSpread2(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et]!=null?arguments[et]:{};et%2?ownKeys(Object(tt),!0).forEach(function(rt){_defineProperty(_e,rt,tt[rt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_e,Object.getOwnPropertyDescriptors(tt)):ownKeys(Object(tt)).forEach(function(rt){Object.defineProperty(_e,rt,Object.getOwnPropertyDescriptor(tt,rt))})}return _e}function _typeof(_e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(et){return typeof et}:_typeof=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},_typeof(_e)}function _classCallCheck(_e,et){if(!(_e instanceof et))throw new TypeError("Cannot call a class as a function")}function _defineProperties(_e,et){for(var tt=0;tt<et.length;tt++){var rt=et[tt];rt.enumerable=rt.enumerable||!1,rt.configurable=!0,"value"in rt&&(rt.writable=!0),Object.defineProperty(_e,rt.key,rt)}}function _createClass(_e,et,tt){return et&&_defineProperties(_e.prototype,et),_e}function _defineProperty(_e,et,tt){return et in _e?Object.defineProperty(_e,et,{value:tt,enumerable:!0,configurable:!0,writable:!0}):_e[et]=tt,_e}function _extends(){return _extends=Object.assign||function(_e){for(var et=1;et<arguments.length;et++){var tt=arguments[et];for(var rt in tt)Object.prototype.hasOwnProperty.call(tt,rt)&&(_e[rt]=tt[rt])}return _e},_extends.apply(this,arguments)}function _inherits(_e,et){if(typeof et!="function"&&et!==null)throw new TypeError("Super expression must either be null or a function");_e.prototype=Object.create(et&&et.prototype,{constructor:{value:_e,writable:!0,configurable:!0}}),et&&_setPrototypeOf(_e,et)}function _getPrototypeOf(_e){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(tt){return tt.__proto__||Object.getPrototypeOf(tt)},_getPrototypeOf(_e)}function _setPrototypeOf(_e,et){return _setPrototypeOf=Object.setPrototypeOf||function(rt,it){return rt.__proto__=it,rt},_setPrototypeOf(_e,et)}function _objectWithoutPropertiesLoose(_e,et){if(_e==null)return{};var tt={},rt=Object.keys(_e),it,st;for(st=0;st<rt.length;st++)it=rt[st],!(et.indexOf(it)>=0)&&(tt[it]=_e[it]);return tt}function _objectWithoutProperties(_e,et){if(_e==null)return{};var tt=_objectWithoutPropertiesLoose(_e,et),rt,it;if(Object.getOwnPropertySymbols){var st=Object.getOwnPropertySymbols(_e);for(it=0;it<st.length;it++)rt=st[it],!(et.indexOf(rt)>=0)&&Object.prototype.propertyIsEnumerable.call(_e,rt)&&(tt[rt]=_e[rt])}return tt}function _assertThisInitialized(_e){if(_e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _e}function _possibleConstructorReturn(_e,et){if(et&&(typeof et=="object"||typeof et=="function"))return et;if(et!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(_e)}function _slicedToArray(_e,et){return _arrayWithHoles(_e)||_iterableToArrayLimit(_e,et)||_unsupportedIterableToArray(_e,et)||_nonIterableRest()}function _arrayWithHoles(_e){if(Array.isArray(_e))return _e}function _iterableToArrayLimit(_e,et){var tt=_e==null?null:typeof Symbol<"u"&&_e[Symbol.iterator]||_e["@@iterator"];if(tt!=null){var rt=[],it=!0,st=!1,ut,ht;try{for(tt=tt.call(_e);!(it=(ut=tt.next()).done)&&(rt.push(ut.value),!(et&&rt.length===et));it=!0);}catch(at){st=!0,ht=at}finally{try{!it&&tt.return!=null&&tt.return()}finally{if(st)throw ht}}return rt}}function _unsupportedIterableToArray(_e,et){if(_e){if(typeof _e=="string")return _arrayLikeToArray(_e,et);var tt=Object.prototype.toString.call(_e).slice(8,-1);if(tt==="Object"&&_e.constructor&&(tt=_e.constructor.name),tt==="Map"||tt==="Set")return Array.from(_e);if(tt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(tt))return _arrayLikeToArray(_e,et)}}function _arrayLikeToArray(_e,et){(et==null||et>_e.length)&&(et=_e.length);for(var tt=0,rt=new Array(et);tt<et;tt++)rt[tt]=_e[tt];return rt}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var DeviceTypes={Mobile:"mobile",Tablet:"tablet",SmartTv:"smarttv",Console:"console",Wearable:"wearable",Embedded:"embedded",Browser:void 0},BrowserTypes={Chrome:"Chrome",Firefox:"Firefox",Opera:"Opera",Yandex:"Yandex",Safari:"Safari",InternetExplorer:"Internet Explorer",Edge:"Edge",Chromium:"Chromium",Ie:"IE",MobileSafari:"Mobile Safari",EdgeChromium:"Edge Chromium",MIUI:"MIUI Browser",SamsungBrowser:"Samsung Browser"},OsTypes={IOS:"iOS",Android:"Android",WindowsPhone:"Windows Phone",Windows:"Windows",MAC_OS:"Mac OS"},InitialDeviceTypes={isMobile:!1,isTablet:!1,isBrowser:!1,isSmartTV:!1,isConsole:!1,isWearable:!1},checkDeviceType=function _e(et){switch(et){case DeviceTypes.Mobile:return{isMobile:!0};case DeviceTypes.Tablet:return{isTablet:!0};case DeviceTypes.SmartTv:return{isSmartTV:!0};case DeviceTypes.Console:return{isConsole:!0};case DeviceTypes.Wearable:return{isWearable:!0};case DeviceTypes.Browser:return{isBrowser:!0};case DeviceTypes.Embedded:return{isEmbedded:!0};default:return InitialDeviceTypes}},setUserAgent=function _e(et){return setUa(et)},setDefaults=function _e(et){var tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none";return et||tt},getNavigatorInstance=function _e(){return typeof window<"u"&&(window.navigator||navigator)?window.navigator||navigator:!1},isIOS13Check=function _e(et){var tt=getNavigatorInstance();return tt&&tt.platform&&(tt.platform.indexOf(et)!==-1||tt.platform==="MacIntel"&&tt.maxTouchPoints>1&&!window.MSStream)},browserPayload=function _e(et,tt,rt,it,st){return{isBrowser:et,browserMajorVersion:setDefaults(tt.major),browserFullVersion:setDefaults(tt.version),browserName:setDefaults(tt.name),engineName:setDefaults(rt.name),engineVersion:setDefaults(rt.version),osName:setDefaults(it.name),osVersion:setDefaults(it.version),userAgent:setDefaults(st)}},mobilePayload=function _e(et,tt,rt,it){return _objectSpread2({},et,{vendor:setDefaults(tt.vendor),model:setDefaults(tt.model),os:setDefaults(rt.name),osVersion:setDefaults(rt.version),ua:setDefaults(it)})},smartTvPayload=function _e(et,tt,rt,it){return{isSmartTV:et,engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(rt.name),osVersion:setDefaults(rt.version),userAgent:setDefaults(it)}},consolePayload=function _e(et,tt,rt,it){return{isConsole:et,engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(rt.name),osVersion:setDefaults(rt.version),userAgent:setDefaults(it)}},wearablePayload=function _e(et,tt,rt,it){return{isWearable:et,engineName:setDefaults(tt.name),engineVersion:setDefaults(tt.version),osName:setDefaults(rt.name),osVersion:setDefaults(rt.version),userAgent:setDefaults(it)}},embeddedPayload=function _e(et,tt,rt,it,st){return{isEmbedded:et,vendor:setDefaults(tt.vendor),model:setDefaults(tt.model),engineName:setDefaults(rt.name),engineVersion:setDefaults(rt.version),osName:setDefaults(it.name),osVersion:setDefaults(it.version),userAgent:setDefaults(st)}};function deviceDetect(_e){var et=_e?parseUserAgent(_e):UAHelper,tt=et.device,rt=et.browser,it=et.engine,st=et.os,ut=et.ua,ht=checkDeviceType(tt.type),at=ht.isBrowser,gt=ht.isMobile,bt=ht.isTablet,wt=ht.isSmartTV,St=ht.isConsole,kt=ht.isWearable,Rt=ht.isEmbedded;if(at)return browserPayload(at,rt,it,st,ut);if(wt)return smartTvPayload(wt,it,st,ut);if(St)return consolePayload(St,it,st,ut);if(gt||bt)return mobilePayload(ht,tt,st,ut);if(kt)return wearablePayload(kt,it,st,ut);if(Rt)return embeddedPayload(Rt,tt,it,st,ut)}var isMobileType=function _e(et){var tt=et.type;return tt===DeviceTypes.Mobile},isTabletType=function _e(et){var tt=et.type;return tt===DeviceTypes.Tablet},isMobileAndTabletType=function _e(et){var tt=et.type;return tt===DeviceTypes.Mobile||tt===DeviceTypes.Tablet},isSmartTVType=function _e(et){var tt=et.type;return tt===DeviceTypes.SmartTv},isBrowserType=function _e(et){var tt=et.type;return tt===DeviceTypes.Browser},isWearableType=function _e(et){var tt=et.type;return tt===DeviceTypes.Wearable},isConsoleType=function _e(et){var tt=et.type;return tt===DeviceTypes.Console},isEmbeddedType=function _e(et){var tt=et.type;return tt===DeviceTypes.Embedded},getMobileVendor=function _e(et){var tt=et.vendor;return setDefaults(tt)},getMobileModel=function _e(et){var tt=et.model;return setDefaults(tt)},getDeviceType=function _e(et){var tt=et.type;return setDefaults(tt,"browser")},isAndroidType=function _e(et){var tt=et.name;return tt===OsTypes.Android},isWindowsType=function _e(et){var tt=et.name;return tt===OsTypes.Windows},isMacOsType=function _e(et){var tt=et.name;return tt===OsTypes.MAC_OS},isWinPhoneType=function _e(et){var tt=et.name;return tt===OsTypes.WindowsPhone},isIOSType=function _e(et){var tt=et.name;return tt===OsTypes.IOS},getOsVersion=function _e(et){var tt=et.version;return setDefaults(tt)},getOsName=function _e(et){var tt=et.name;return setDefaults(tt)},isChromeType=function _e(et){var tt=et.name;return tt===BrowserTypes.Chrome},isFirefoxType=function _e(et){var tt=et.name;return tt===BrowserTypes.Firefox},isChromiumType=function _e(et){var tt=et.name;return tt===BrowserTypes.Chromium},isEdgeType=function _e(et){var tt=et.name;return tt===BrowserTypes.Edge},isYandexType=function _e(et){var tt=et.name;return tt===BrowserTypes.Yandex},isSafariType=function _e(et){var tt=et.name;return tt===BrowserTypes.Safari||tt===BrowserTypes.MobileSafari},isMobileSafariType=function _e(et){var tt=et.name;return tt===BrowserTypes.MobileSafari},isOperaType=function _e(et){var tt=et.name;return tt===BrowserTypes.Opera},isIEType=function _e(et){var tt=et.name;return tt===BrowserTypes.InternetExplorer||tt===BrowserTypes.Ie},isMIUIType=function _e(et){var tt=et.name;return tt===BrowserTypes.MIUI},isSamsungBrowserType=function _e(et){var tt=et.name;return tt===BrowserTypes.SamsungBrowser},getBrowserFullVersion=function _e(et){var tt=et.version;return setDefaults(tt)},getBrowserVersion=function _e(et){var tt=et.major;return setDefaults(tt)},getBrowserName=function _e(et){var tt=et.name;return setDefaults(tt)},getEngineName=function _e(et){var tt=et.name;return setDefaults(tt)},getEngineVersion=function _e(et){var tt=et.version;return setDefaults(tt)},isElectronType=function _e(){var et=getNavigatorInstance(),tt=et&&et.userAgent&&et.userAgent.toLowerCase();return typeof tt=="string"?/electron/.test(tt):!1},isEdgeChromiumType=function _e(et){return typeof et=="string"&&et.indexOf("Edg/")!==-1},getIOS13=function _e(){var et=getNavigatorInstance();return et&&(/iPad|iPhone|iPod/.test(et.platform)||et.platform==="MacIntel"&&et.maxTouchPoints>1)&&!window.MSStream},getIPad13=function _e(){return isIOS13Check("iPad")},getIphone13=function _e(){return isIOS13Check("iPhone")},getIPod13=function _e(){return isIOS13Check("iPod")},getUseragent=function _e(et){return setDefaults(et)};function buildSelectorsObject(_e){var et=_e||UAHelper,tt=et.device,rt=et.browser,it=et.os,st=et.engine,ut=et.ua;return{isSmartTV:isSmartTVType(tt),isConsole:isConsoleType(tt),isWearable:isWearableType(tt),isEmbedded:isEmbeddedType(tt),isMobileSafari:isMobileSafariType(rt)||getIPad13(),isChromium:isChromiumType(rt),isMobile:isMobileAndTabletType(tt)||getIPad13(),isMobileOnly:isMobileType(tt),isTablet:isTabletType(tt)||getIPad13(),isBrowser:isBrowserType(tt),isDesktop:isBrowserType(tt),isAndroid:isAndroidType(it),isWinPhone:isWinPhoneType(it),isIOS:isIOSType(it)||getIPad13(),isChrome:isChromeType(rt),isFirefox:isFirefoxType(rt),isSafari:isSafariType(rt),isOpera:isOperaType(rt),isIE:isIEType(rt),osVersion:getOsVersion(it),osName:getOsName(it),fullBrowserVersion:getBrowserFullVersion(rt),browserVersion:getBrowserVersion(rt),browserName:getBrowserName(rt),mobileVendor:getMobileVendor(tt),mobileModel:getMobileModel(tt),engineName:getEngineName(st),engineVersion:getEngineVersion(st),getUA:getUseragent(ut),isEdge:isEdgeType(rt)||isEdgeChromiumType(ut),isYandex:isYandexType(rt),deviceType:getDeviceType(tt),isIOS13:getIOS13(),isIPad13:getIPad13(),isIPhone13:getIphone13(),isIPod13:getIPod13(),isElectron:isElectronType(),isEdgeChromium:isEdgeChromiumType(ut),isLegacyEdge:isEdgeType(rt)&&!isEdgeChromiumType(ut),isWindows:isWindowsType(it),isMacOs:isMacOsType(it),isMIUI:isMIUIType(rt),isSamsungBrowser:isSamsungBrowserType(rt)}}var isSmartTV=isSmartTVType(device),isConsole=isConsoleType(device),isWearable=isWearableType(device),isEmbedded=isEmbeddedType(device),isMobileSafari=isMobileSafariType(browser)||getIPad13(),isChromium=isChromiumType(browser),isMobile=isMobileAndTabletType(device)||getIPad13(),isMobileOnly=isMobileType(device),isTablet=isTabletType(device)||getIPad13(),isBrowser=isBrowserType(device),isDesktop=isBrowserType(device),isAndroid=isAndroidType(os),isWinPhone=isWinPhoneType(os),isIOS=isIOSType(os)||getIPad13(),isChrome=isChromeType(browser),isFirefox=isFirefoxType(browser),isSafari=isSafariType(browser),isOpera=isOperaType(browser),isIE=isIEType(browser),osVersion=getOsVersion(os),osName=getOsName(os),fullBrowserVersion=getBrowserFullVersion(browser),browserVersion=getBrowserVersion(browser),browserName=getBrowserName(browser),mobileVendor=getMobileVendor(device),mobileModel=getMobileModel(device),engineName=getEngineName(engine),engineVersion=getEngineVersion(engine),getUA=getUseragent(ua),isEdge=isEdgeType(browser)||isEdgeChromiumType(ua),isYandex=isYandexType(browser),deviceType=getDeviceType(device),isIOS13=getIOS13(),isIPad13=getIPad13(),isIPhone13=getIphone13(),isIPod13=getIPod13(),isElectron=isElectronType(),isEdgeChromium=isEdgeChromiumType(ua),isLegacyEdge=isEdgeType(browser)&&!isEdgeChromiumType(ua),isWindows=isWindowsType(os),isMacOs=isMacOsType(os),isMIUI=isMIUIType(browser),isSamsungBrowser=isSamsungBrowserType(browser),getSelectorsByUserAgent=function _e(et){if(!et||typeof et!="string"){console.error("No valid user agent string was provided");return}var tt=parseUserAgent(et),rt=tt.device,it=tt.browser,st=tt.os,ut=tt.engine,ht=tt.ua;return buildSelectorsObject({device:rt,browser:it,os:st,engine:ut,ua:ht})},AndroidView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isAndroid?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},BrowserView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isBrowser?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},IEView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isIE?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},IOSView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isIOS?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},MobileView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isMobile?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},TabletView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isTablet?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},WinPhoneView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isWinPhone?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},MobileOnlyView=function _e(et){var tt=et.renderWithFragment,rt=et.children;et.viewClassName,et.style;var it=_objectWithoutProperties(et,["renderWithFragment","children","viewClassName","style"]);return isMobileOnly?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},SmartTVView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isSmartTV?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},ConsoleView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isConsole?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},WearableView=function _e(et){var tt=et.renderWithFragment,rt=et.children,it=_objectWithoutProperties(et,["renderWithFragment","children"]);return isWearable?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",it,rt):null},CustomView=function _e(et){var tt=et.renderWithFragment,rt=et.children;et.viewClassName,et.style;var it=et.condition,st=_objectWithoutProperties(et,["renderWithFragment","children","viewClassName","style","condition"]);return it?tt?React__default.createElement(React.Fragment,null,rt):React__default.createElement("div",st,rt):null};function withOrientationChange(_e){return function(et){_inherits(tt,et);function tt(rt){var it;return _classCallCheck(this,tt),it=_possibleConstructorReturn(this,_getPrototypeOf(tt).call(this,rt)),it.isEventListenerAdded=!1,it.handleOrientationChange=it.handleOrientationChange.bind(_assertThisInitialized(it)),it.onOrientationChange=it.onOrientationChange.bind(_assertThisInitialized(it)),it.onPageLoad=it.onPageLoad.bind(_assertThisInitialized(it)),it.state={isLandscape:!1,isPortrait:!1},it}return _createClass(tt,[{key:"handleOrientationChange",value:function(){this.isEventListenerAdded||(this.isEventListenerAdded=!0);var it=window.innerWidth>window.innerHeight?90:0;this.setState({isPortrait:it===0,isLandscape:it===90})}},{key:"onOrientationChange",value:function(){this.handleOrientationChange()}},{key:"onPageLoad",value:function(){this.handleOrientationChange()}},{key:"componentDidMount",value:function(){(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(this.isEventListenerAdded?window.removeEventListener("load",this.onPageLoad,!1):(this.handleOrientationChange(),window.addEventListener("load",this.onPageLoad,!1)),window.addEventListener("resize",this.onOrientationChange,!1))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onOrientationChange,!1)}},{key:"render",value:function(){return React__default.createElement(_e,_extends({},this.props,{isLandscape:this.state.isLandscape,isPortrait:this.state.isPortrait}))}}]),tt}(React__default.Component)}function useMobileOrientation(){var _e=React.useState(function(){var st=window.innerWidth>window.innerHeight?90:0;return{isPortrait:st===0,isLandscape:st===90,orientation:st===0?"portrait":"landscape"}}),et=_slicedToArray(_e,2),tt=et[0],rt=et[1],it=React.useCallback(function(){var st=window.innerWidth>window.innerHeight?90:0,ut={isPortrait:st===0,isLandscape:st===90,orientation:st===0?"portrait":"landscape"};tt.orientation!==ut.orientation&&rt(ut)},[tt.orientation]);return React.useEffect(function(){return(typeof window>"u"?"undefined":_typeof(window))!==void 0&&isMobile&&(it(),window.addEventListener("load",it,!1),window.addEventListener("resize",it,!1)),function(){window.removeEventListener("resize",it,!1),window.removeEventListener("load",it,!1)}},[it]),tt}function useDeviceData(_e){var et=_e||window.navigator.userAgent;return parseUserAgent(et)}function useDeviceSelectors(_e){var et=_e||window.navigator.userAgent,tt=useDeviceData(et),rt=buildSelectorsObject(tt);return[rt,tt]}lib.AndroidView=AndroidView;lib.BrowserTypes=BrowserTypes;lib.BrowserView=BrowserView;lib.ConsoleView=ConsoleView;lib.CustomView=CustomView;lib.IEView=IEView;lib.IOSView=IOSView;lib.MobileOnlyView=MobileOnlyView;lib.MobileView=MobileView;lib.OsTypes=OsTypes;lib.SmartTVView=SmartTVView;lib.TabletView=TabletView;lib.WearableView=WearableView;lib.WinPhoneView=WinPhoneView;lib.browserName=browserName;lib.browserVersion=browserVersion;lib.deviceDetect=deviceDetect;lib.deviceType=deviceType;lib.engineName=engineName;lib.engineVersion=engineVersion;lib.fullBrowserVersion=fullBrowserVersion;lib.getSelectorsByUserAgent=getSelectorsByUserAgent;lib.getUA=getUA;lib.isAndroid=isAndroid;lib.isBrowser=isBrowser;lib.isChrome=isChrome;lib.isChromium=isChromium;lib.isConsole=isConsole;lib.isDesktop=isDesktop;lib.isEdge=isEdge;lib.isEdgeChromium=isEdgeChromium;lib.isElectron=isElectron;lib.isEmbedded=isEmbedded;lib.isFirefox=isFirefox;lib.isIE=isIE;lib.isIOS=isIOS;lib.isIOS13=isIOS13;lib.isIPad13=isIPad13;lib.isIPhone13=isIPhone13;lib.isIPod13=isIPod13;lib.isLegacyEdge=isLegacyEdge;lib.isMIUI=isMIUI;lib.isMacOs=isMacOs;var isMobile_1=lib.isMobile=isMobile;lib.isMobileOnly=isMobileOnly;lib.isMobileSafari=isMobileSafari;lib.isOpera=isOpera;lib.isSafari=isSafari;lib.isSamsungBrowser=isSamsungBrowser;lib.isSmartTV=isSmartTV;lib.isTablet=isTablet;lib.isWearable=isWearable;lib.isWinPhone=isWinPhone;lib.isWindows=isWindows;lib.isYandex=isYandex;lib.mobileModel=mobileModel;lib.mobileVendor=mobileVendor;lib.osName=osName;lib.osVersion=osVersion;lib.parseUserAgent=parseUserAgent;lib.setUserAgent=setUserAgent;lib.useDeviceData=useDeviceData;lib.useDeviceSelectors=useDeviceSelectors;lib.useMobileOrientation=useMobileOrientation;lib.withOrientationChange=withOrientationChange;const ChangeLanguage=()=>{const{i18n:_e}=useTranslation(),[et,tt]=reactExports.useState(!1);console.log(locales[_e.language]);const rt=()=>{et?_e.changeLanguage("vi"):_e.changeLanguage("en")};return reactExports.useEffect(()=>{rt()},[et]),jsxRuntimeExports.jsxs("div",{onClick:()=>tt(!et),className:cn("cursor-pointer flex gap-1 text-center p-2 font-medium ",isMobile_1?"items-start justify-start":"items-center justify-center"),children:[et?"VN":"EN",jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(ChevronDown,{size:15})})]})},Header$1=({classContent:_e})=>{var gt,bt,wt;const{t:et}=useTranslation(),tt=useLocation(),rt=useNavigate(),{auth:it}=useAuth();reactExports.useEffect(()=>{window.scrollTo(0,0)},[tt]);const[st,ut]=reactExports.useState(!isMobile_1),ht=()=>{ut(!st)},at=()=>{isMobile_1&&ht()};return jsxRuntimeExports.jsxs("div",{className:cn(" h-19  justify-between flex text-white",_e),children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center cursor-pointer px-5 py-2",onClick:()=>rt(ROUTES.ROOT),children:[jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-14 h-14"}),jsxRuntimeExports.jsx("span",{className:"font-bold tracking-tight text-orangeTheme text-lg",children:"L&L COMPANY"})]}),jsxRuntimeExports.jsx("div",{className:cn(isMobile_1&&"flex justify-center items-center p-2 "),onClick:ht,children:isMobile_1&&jsxRuntimeExports.jsx(AlignJustify,{})}),st&&jsxRuntimeExports.jsxs("div",{className:cn("md:flex gap-8 sm:hidden md:flex-row ",isMobile_1&&"absolute flex-col bg-orangeTheme w-full h-full z-50 items-start justify-start"),children:[jsxRuntimeExports.jsxs("div",{className:cn("flex   md:flex-row  ",isMobile_1?"flex-col justify-start items-start gap-2":"items-center gap-6 justify-center"),children:[isMobile_1&&jsxRuntimeExports.jsx("div",{className:"flex p-2",onClick:ht,children:jsxRuntimeExports.jsx(X,{size:26})}),jsxRuntimeExports.jsx("div",{className:cn("flex md:gap-4 md:flex-row sm:flex-col",isMobile_1&&"flex-col items-start"),children:NAVIGATIONS.map(St=>jsxRuntimeExports.jsx(Link,{to:St.path,className:cn("flex text-center justify-center items-center font-medium cursor-pointer hover:scale-105 px-3 py-1 rounded",tt&&tt.pathname===St.path&&"bg-orangeTheme "),onClick:at,children:et(St.title)},St.id))}),jsxRuntimeExports.jsx(Link,{to:ROUTES.CREATE_ORDER,onClick:at,className:cn("flex gap-1 text-center backdrop-blur-sm font-medium  cursor-pointer  hover:text-orangeTheme border rounded px-2 py-1",tt&&tt.pathname===ROUTES.CREATE_ORDER&&"text-orangeTheme font-semibold border-orangeTheme/60"),children:et("Create order")})]}),jsxRuntimeExports.jsx(ChangeLanguage,{}),jsxRuntimeExports.jsx("div",{className:cn("flex gap-2    pr-4",isMobile_1?"items-start ":"items-center  justify-center"),children:it!=null&&it.user?jsxRuntimeExports.jsxs("div",{className:cn("flex gap-2 px-2 ",isMobile_1?"items-start ":"items-center  justify-center"),children:[jsxRuntimeExports.jsx(UserDropdown,{avatar:((gt=it==null?void 0:it.user)==null?void 0:gt.avatar)??generateImage(((bt=it==null?void 0:it.user)==null?void 0:bt.userName)??""),handleChange:()=>{},onHide:at}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:w-34",children:[jsxRuntimeExports.jsx("span",{className:"truncate text-sm font-semibold",children:(wt=it==null?void 0:it.user)==null?void 0:wt.userName}),jsxRuntimeExports.jsx(Badge,{className:"bg-orangeTheme hover:bg-orangeTheme/60 w-fit",children:"Basic"})]})]}):jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-fit hover:bg-orangeTheme/90",onClick:()=>{at(),rt(ROUTES.LOGIN)},children:"Login"})})]})]})},validateEmail=_e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(_e),getPrice=async({data:_e})=>await post("Product/Search",_e),createOrder=async({data:_e,listCost:et})=>await post("Order/Create_Order",{..._e,...et}),getAllOrderByUserId=async()=>await get$5("Order/GetOrderByUserId"),getOrderByOrderId=async({id:_e})=>await get$5(`Order/GetOrderByOrderId?orderId=${_e}`),getOrderDetailByOrderId=async({id:_e})=>await get$5(`Order/GetOrderDetailByOrderId?orderId=${_e}`),updateDeliveryInformation=async({data:_e})=>await patch("Order/UpdateDeliveryInfo",_e),updateProductInformation=async({data:_e})=>await patchFormData("Order/UpdateProductInfo",_e),confirmOrder=async({data:_e})=>await post("Order/ConfirmOrder",_e),sendCost=async({email:_e})=>await get$5(`User/SendDetailCost?email=${_e}`),Footer$1=()=>{const{t:_e}=useTranslation(),[et,tt]=reactExports.useState(!1),[rt,it]=reactExports.useState(""),st=async()=>{var ht,at;validateEmail(rt)||_t.error("Email is not true"),tt(!0);const ut=await sendCost({email:rt});tt(!1),ut.success?_t.success((ht=ut.result)==null?void 0:ht.message):_t.error((at=ut.result)==null?void 0:at.message),it("")};return jsxRuntimeExports.jsxs("div",{style:{backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),url('https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493308/4_vukkar.png')",backgroundSize:"cover",backgroundPosition:"center"},className:" text-white mt-4 md:px-20 py-5 text-md max-sm:px-4 flex flex-col gap-4  ",children:[jsxRuntimeExports.jsxs("div",{className:" grid md:grid-cols-5 max-sm:grid-cols-2",children:[jsxRuntimeExports.jsxs("div",{className:"md:col-span-1 py-8 max-sm:col-span-2",children:[jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-28 h-28",loading:"lazy"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col",children:[jsxRuntimeExports.jsx("span",{className:"font-black tracking-tight text-orangeTheme text-lg",children:"L&L COMPANY"}),jsxRuntimeExports.jsx("span",{className:"text-wrap",children:_e("address")})]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-2 md:ml-auto flex flex-col justify-center max-sm:col-span-2",children:[jsxRuntimeExports.jsx("p",{className:"py-2 md:text-[20px] uppercase font-medium",children:_e("contactToGetEmail")}),jsxRuntimeExports.jsxs("div",{className:"flex md:ml-auto justify-center items-center",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Enter your email here",className:"rounded-none w-80 text-black",onChange:ut=>it(ut.target.value)}),jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme  rounded-none text-white uppercase hover:text-white hover:bg-orangeTheme/90",onClick:st,children:_e("Subscribe")})]})]}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-1  md:ml-auto flex flex-col md:justify-center  max-sm:justify-start max-sm:its-start max-sm:col-span-1",children:[jsxRuntimeExports.jsx("p",{className:"py-2 md:text-[20px] uppercase font-medium",children:_e("followUs")}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 md:justify-center max-sm:justify-start",children:[jsxRuntimeExports.jsx(Link,{to:"https://www.tiktok.com/@leopard.lorry",className:"bg-transparent flex items-center justify-center rounded-full",children:jsxRuntimeExports.jsx("img",{src:"/icons8-tiktok-96.png",alt:"tiktok-logo",className:"w-10 text-white"})}),jsxRuntimeExports.jsx(Link,{to:"https://www.facebook.com/leopardlorry",className:"bg-transparent flex items-center justify-center rounded-full",children:jsxRuntimeExports.jsx("img",{src:"/facebook.webp",alt:"facebook-logo",className:"w-6"})})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex md:justify-center  md:pl-10 flex-col gap-1 max-sm:col-span-1",children:[jsxRuntimeExports.jsx("p",{className:"py-2 md:text-[20px] uppercase font-medium",children:_e("contactUs")}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-start text-md",children:[jsxRuntimeExports.jsx("p",{children:"+84 837 391 311"}),jsxRuntimeExports.jsx("p",{children:"L&Lcompany@gmail.com"}),jsxRuntimeExports.jsxs("p",{children:[" ",_e("timeWork")]}),jsxRuntimeExports.jsx("p",{children:" 09:30am to 06:00pm"})]})]})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs("div",{className:"text-center pt-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""})," 2024 Copyrights Allrights reserved by"," ",jsxRuntimeExports.jsx("span",{className:"font-semibold text-orangeTheme",children:" L&L company"})]}),et&&jsxRuntimeExports.jsx(Loading,{})]})},Slogan=()=>{const{t:_e}=useTranslation(),et=useNavigate();return jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-10 md:w-2/3 sm:w-full  mx-auto text-white  mt-20 justify-center items-center my-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6 justify-center items-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-avilock flex flex-col md:text-[60px] max-sm:text-[40px] font-medium my-auto justify-center items-center",children:[jsxRuntimeExports.jsx("p",{className:"text-orangeTheme   text-shadow-tight",children:"Leopard Lorry"}),jsxRuntimeExports.jsxs("p",{className:"transform  -translate-y-4 text-shadow-tight",children:['"',_e("Leap and Lead"),'"']})]}),jsxRuntimeExports.jsx("p",{className:"font-medium text-center md:text-md",children:_e("ContentBanner")})]}),jsxRuntimeExports.jsx(Button$1,{className:"w-fit rounded-md capitalize  md:text-lg  max-sm:text-md cursor-pointer gap-2 font-bold tracking-tight bg-orangeTheme hover:bg-orangeTheme/90 px-4 py-3 flex items-center space-x-2",onClick:()=>et(ROUTES.CREATE_ORDER),children:_e("Create order")})]})},STATISTICS=[{id:2,data:6,content:"team members",icon:jsxRuntimeExports.jsx(Users,{size:28}),isMore:!0},{id:3,data:2,content:"successfully project",icon:jsxRuntimeExports.jsx(FolderKanban,{size:28}),isMore:!0},{id:4,data:1,content:"Global partners",icon:jsxRuntimeExports.jsx(GlobeLock,{size:28}),isMore:!0}],StatisticElement=({content:_e,data:et})=>{const{t:tt}=useTranslation(),rt=_e.split(" ");return jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center justify-center",children:[jsxRuntimeExports.jsx("div",{className:"flex  gap-2 items-center justify-center",children:jsxRuntimeExports.jsx("div",{className:"md:text-[60px] max-sm:text-[40px] font-black text-orangeTheme flex",children:et})}),jsxRuntimeExports.jsx("div",{className:"flex flex-col",children:rt.map((it,st)=>jsxRuntimeExports.jsx("p",{className:"md:uppercase capitalize md:text-lg max-sm:text-md tracking-tight font-bold",children:tt(it)},st))})]})},StatisticLine=()=>jsxRuntimeExports.jsx("div",{className:" flex gap-10 w-full justify-center md:py-6 max-sm:py-4 px-2 rounded-full  bg-white shadow-2xl ",children:STATISTICS.map(_e=>jsxRuntimeExports.jsx(StatisticElement,{content:_e.content,icon:_e.icon,data:_e.data,isMore:_e.isMore},_e.id))}),STEPS_USE_WEB=[{id:1,content:"Sign up and log in"},{id:2,content:"Enter the information you need to search for"},{id:3,content:"Select the appropriate option"},{id:4,content:"Confirm and wait for a response within 24 hours"},{id:5,content:"Complete payment and delivery"}],TheWayToUseWeb=()=>{const{t:_e}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-10 w-full h-fit mt-20 py-3",children:[jsxRuntimeExports.jsx("div",{className:"md:col-span-6 p-2 md:pl-24",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-1 rounded-3xl overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"relative bg-slate-100 capitalize flex justify-center items-center",children:jsxRuntimeExports.jsx(StatisticElement,{content:"Year of establishment",icon:jsxRuntimeExports.jsx(CalendarClock,{size:28}),data:2024,isMore:!0})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/3_scjodd.png",alt:"Storage",className:"w-full h-[200px] object-cover"})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/5_nx3apy.png",alt:"Green Truck",className:"w-full h-[200px] object-cover"})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493306/1_khzaht.png",alt:"Red Line",className:"w-full h-[200px] object-cover"})})]})}),jsxRuntimeExports.jsxs("div",{className:"md:col-span-4 p-4",children:[jsxRuntimeExports.jsx("p",{className:"text-[30px] font-black",children:_e("How to use our service?")}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-y-1 justify-center",children:STEPS_USE_WEB.map(et=>jsxRuntimeExports.jsxs("div",{className:"flex gap-2 py-1 rounded",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Check,{className:"text-orangeTheme"})}),jsxRuntimeExports.jsxs("div",{className:cn("flex flex-col gap-1 px-4"),children:[jsxRuntimeExports.jsxs("p",{className:"font-semibold",children:[_e("Step")," ",et.id]}),jsxRuntimeExports.jsx("p",{children:_e(et.content)})]})]},et.id))})]})]})};var COLLAPSIBLE_NAME="Collapsible",[createCollapsibleContext,createCollapsibleScope]=createContextScope(COLLAPSIBLE_NAME),[CollapsibleProvider,useCollapsibleContext]=createCollapsibleContext(COLLAPSIBLE_NAME),Collapsible=reactExports.forwardRef((_e,et)=>{const{__scopeCollapsible:tt,open:rt,defaultOpen:it,disabled:st,onOpenChange:ut,...ht}=_e,[at=!1,gt]=useControllableState({prop:rt,defaultProp:it,onChange:ut});return jsxRuntimeExports.jsx(CollapsibleProvider,{scope:tt,disabled:st,contentId:useId$1(),open:at,onOpenToggle:reactExports.useCallback(()=>gt(bt=>!bt),[gt]),children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$3(at),"data-disabled":st?"":void 0,...ht,ref:et})})});Collapsible.displayName=COLLAPSIBLE_NAME;var TRIGGER_NAME$5="CollapsibleTrigger",CollapsibleTrigger=reactExports.forwardRef((_e,et)=>{const{__scopeCollapsible:tt,...rt}=_e,it=useCollapsibleContext(TRIGGER_NAME$5,tt);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-controls":it.contentId,"aria-expanded":it.open||!1,"data-state":getState$3(it.open),"data-disabled":it.disabled?"":void 0,disabled:it.disabled,...rt,ref:et,onClick:composeEventHandlers(_e.onClick,it.onOpenToggle)})});CollapsibleTrigger.displayName=TRIGGER_NAME$5;var CONTENT_NAME$5="CollapsibleContent",CollapsibleContent=reactExports.forwardRef((_e,et)=>{const{forceMount:tt,...rt}=_e,it=useCollapsibleContext(CONTENT_NAME$5,_e.__scopeCollapsible);return jsxRuntimeExports.jsx(Presence,{present:tt||it.open,children:({present:st})=>jsxRuntimeExports.jsx(CollapsibleContentImpl,{...rt,ref:et,present:st})})});CollapsibleContent.displayName=CONTENT_NAME$5;var CollapsibleContentImpl=reactExports.forwardRef((_e,et)=>{const{__scopeCollapsible:tt,present:rt,children:it,...st}=_e,ut=useCollapsibleContext(CONTENT_NAME$5,tt),[ht,at]=reactExports.useState(rt),gt=reactExports.useRef(null),bt=useComposedRefs(et,gt),wt=reactExports.useRef(0),St=wt.current,kt=reactExports.useRef(0),Rt=kt.current,It=ut.open||ht,Dt=reactExports.useRef(It),Mt=reactExports.useRef();return reactExports.useEffect(()=>{const $t=requestAnimationFrame(()=>Dt.current=!1);return()=>cancelAnimationFrame($t)},[]),useLayoutEffect2(()=>{const $t=gt.current;if($t){Mt.current=Mt.current||{transitionDuration:$t.style.transitionDuration,animationName:$t.style.animationName},$t.style.transitionDuration="0s",$t.style.animationName="none";const jt=$t.getBoundingClientRect();wt.current=jt.height,kt.current=jt.width,Dt.current||($t.style.transitionDuration=Mt.current.transitionDuration,$t.style.animationName=Mt.current.animationName),at(rt)}},[ut.open,rt]),jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState$3(ut.open),"data-disabled":ut.disabled?"":void 0,id:ut.contentId,hidden:!It,...st,ref:bt,style:{"--radix-collapsible-content-height":St?`${St}px`:void 0,"--radix-collapsible-content-width":Rt?`${Rt}px`:void 0,..._e.style},children:It&&it})});function getState$3(_e){return _e?"open":"closed"}var Root$2=Collapsible,Trigger$3=CollapsibleTrigger,Content$1=CollapsibleContent,ACCORDION_NAME="Accordion",ACCORDION_KEYS=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Collection$1,useCollection$1,createCollectionScope$1]=createCollection(ACCORDION_NAME),[createAccordionContext,createAccordionScope]=createContextScope(ACCORDION_NAME,[createCollectionScope$1,createCollapsibleScope]),useCollapsibleScope=createCollapsibleScope(),Accordion$1=React$1.forwardRef((_e,et)=>{const{type:tt,...rt}=_e,it=rt,st=rt;return jsxRuntimeExports.jsx(Collection$1.Provider,{scope:_e.__scopeAccordion,children:tt==="multiple"?jsxRuntimeExports.jsx(AccordionImplMultiple,{...st,ref:et}):jsxRuntimeExports.jsx(AccordionImplSingle,{...it,ref:et})})});Accordion$1.displayName=ACCORDION_NAME;var[AccordionValueProvider,useAccordionValueContext]=createAccordionContext(ACCORDION_NAME),[AccordionCollapsibleProvider,useAccordionCollapsibleContext]=createAccordionContext(ACCORDION_NAME,{collapsible:!1}),AccordionImplSingle=React$1.forwardRef((_e,et)=>{const{value:tt,defaultValue:rt,onValueChange:it=()=>{},collapsible:st=!1,...ut}=_e,[ht,at]=useControllableState({prop:tt,defaultProp:rt,onChange:it});return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_e.__scopeAccordion,value:ht?[ht]:[],onItemOpen:at,onItemClose:React$1.useCallback(()=>st&&at(""),[st,at]),children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_e.__scopeAccordion,collapsible:st,children:jsxRuntimeExports.jsx(AccordionImpl,{...ut,ref:et})})})}),AccordionImplMultiple=React$1.forwardRef((_e,et)=>{const{value:tt,defaultValue:rt,onValueChange:it=()=>{},...st}=_e,[ut=[],ht]=useControllableState({prop:tt,defaultProp:rt,onChange:it}),at=React$1.useCallback(bt=>ht((wt=[])=>[...wt,bt]),[ht]),gt=React$1.useCallback(bt=>ht((wt=[])=>wt.filter(St=>St!==bt)),[ht]);return jsxRuntimeExports.jsx(AccordionValueProvider,{scope:_e.__scopeAccordion,value:ut,onItemOpen:at,onItemClose:gt,children:jsxRuntimeExports.jsx(AccordionCollapsibleProvider,{scope:_e.__scopeAccordion,collapsible:!0,children:jsxRuntimeExports.jsx(AccordionImpl,{...st,ref:et})})})}),[AccordionImplProvider,useAccordionContext]=createAccordionContext(ACCORDION_NAME),AccordionImpl=React$1.forwardRef((_e,et)=>{const{__scopeAccordion:tt,disabled:rt,dir:it,orientation:st="vertical",...ut}=_e,ht=React$1.useRef(null),at=useComposedRefs(ht,et),gt=useCollection$1(tt),wt=useDirection(it)==="ltr",St=composeEventHandlers(_e.onKeyDown,kt=>{var tr;if(!ACCORDION_KEYS.includes(kt.key))return;const Rt=kt.target,It=gt().filter(mr=>{var vr;return!((vr=mr.ref.current)!=null&&vr.disabled)}),Dt=It.findIndex(mr=>mr.ref.current===Rt),Mt=It.length;if(Dt===-1)return;kt.preventDefault();let $t=Dt;const jt=0,Nt=Mt-1,Ut=()=>{$t=Dt+1,$t>Nt&&($t=jt)},Ht=()=>{$t=Dt-1,$t<jt&&($t=Nt)};switch(kt.key){case"Home":$t=jt;break;case"End":$t=Nt;break;case"ArrowRight":st==="horizontal"&&(wt?Ut():Ht());break;case"ArrowDown":st==="vertical"&&Ut();break;case"ArrowLeft":st==="horizontal"&&(wt?Ht():Ut());break;case"ArrowUp":st==="vertical"&&Ht();break}const Kt=$t%Mt;(tr=It[Kt].ref.current)==null||tr.focus()});return jsxRuntimeExports.jsx(AccordionImplProvider,{scope:tt,disabled:rt,direction:it,orientation:st,children:jsxRuntimeExports.jsx(Collection$1.Slot,{scope:tt,children:jsxRuntimeExports.jsx(Primitive.div,{...ut,"data-orientation":st,ref:at,onKeyDown:rt?void 0:St})})})}),ITEM_NAME$1="AccordionItem",[AccordionItemProvider,useAccordionItemContext]=createAccordionContext(ITEM_NAME$1),AccordionItem$1=React$1.forwardRef((_e,et)=>{const{__scopeAccordion:tt,value:rt,...it}=_e,st=useAccordionContext(ITEM_NAME$1,tt),ut=useAccordionValueContext(ITEM_NAME$1,tt),ht=useCollapsibleScope(tt),at=useId$1(),gt=rt&&ut.value.includes(rt)||!1,bt=st.disabled||_e.disabled;return jsxRuntimeExports.jsx(AccordionItemProvider,{scope:tt,open:gt,disabled:bt,triggerId:at,children:jsxRuntimeExports.jsx(Root$2,{"data-orientation":st.orientation,"data-state":getState$2(gt),...ht,...it,ref:et,disabled:bt,open:gt,onOpenChange:wt=>{wt?ut.onItemOpen(rt):ut.onItemClose(rt)}})})});AccordionItem$1.displayName=ITEM_NAME$1;var HEADER_NAME="AccordionHeader",AccordionHeader=React$1.forwardRef((_e,et)=>{const{__scopeAccordion:tt,...rt}=_e,it=useAccordionContext(ACCORDION_NAME,tt),st=useAccordionItemContext(HEADER_NAME,tt);return jsxRuntimeExports.jsx(Primitive.h3,{"data-orientation":it.orientation,"data-state":getState$2(st.open),"data-disabled":st.disabled?"":void 0,...rt,ref:et})});AccordionHeader.displayName=HEADER_NAME;var TRIGGER_NAME$4="AccordionTrigger",AccordionTrigger$1=React$1.forwardRef((_e,et)=>{const{__scopeAccordion:tt,...rt}=_e,it=useAccordionContext(ACCORDION_NAME,tt),st=useAccordionItemContext(TRIGGER_NAME$4,tt),ut=useAccordionCollapsibleContext(TRIGGER_NAME$4,tt),ht=useCollapsibleScope(tt);return jsxRuntimeExports.jsx(Collection$1.ItemSlot,{scope:tt,children:jsxRuntimeExports.jsx(Trigger$3,{"aria-disabled":st.open&&!ut.collapsible||void 0,"data-orientation":it.orientation,id:st.triggerId,...ht,...rt,ref:et})})});AccordionTrigger$1.displayName=TRIGGER_NAME$4;var CONTENT_NAME$4="AccordionContent",AccordionContent$1=React$1.forwardRef((_e,et)=>{const{__scopeAccordion:tt,...rt}=_e,it=useAccordionContext(ACCORDION_NAME,tt),st=useAccordionItemContext(CONTENT_NAME$4,tt),ut=useCollapsibleScope(tt);return jsxRuntimeExports.jsx(Content$1,{role:"region","aria-labelledby":st.triggerId,"data-orientation":it.orientation,...ut,...rt,ref:et,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",..._e.style}})});AccordionContent$1.displayName=CONTENT_NAME$4;function getState$2(_e){return _e?"open":"closed"}var Root2$3=Accordion$1,Item$1=AccordionItem$1,Header=AccordionHeader,Trigger2=AccordionTrigger$1,Content2$3=AccordionContent$1;const Accordion=Root2$3,AccordionItem=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Item$1,{ref:tt,className:cn("border-b",_e),...et}));AccordionItem.displayName="AccordionItem";const AccordionTrigger=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>jsxRuntimeExports.jsx(Header,{className:"flex",children:jsxRuntimeExports.jsxs(Trigger2,{ref:rt,className:cn("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:text-orangeTheme [&[data-state=open]>svg]:rotate-180 px-4",_e),...tt,children:[et,jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));AccordionTrigger.displayName=Trigger2.displayName;const AccordionContent=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>jsxRuntimeExports.jsx(Content2$3,{ref:rt,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...tt,children:jsxRuntimeExports.jsx("div",{className:cn("pb-4 pt-0",_e),children:et})}));AccordionContent.displayName=Content2$3.displayName;const FREQUENT_ASKED_QUESTIONS=[{id:1,title:"q1",content:"a1"},{id:2,title:"q2",content:"a2"},{id:3,title:"q3",content:"a3"},{id:4,title:"q4",content:"a4"},{id:5,title:"q5",content:"a5"}],AccordionLine=({id:_e,title:et,content:tt})=>{const{t:rt}=useTranslation();return jsxRuntimeExports.jsxs(AccordionItem,{value:_e.toString(),className:" items-center space-x-2 w-full",children:[jsxRuntimeExports.jsx(AccordionTrigger,{className:"px-2 py-4 decoration-transparent text-start",children:rt(et)}),jsxRuntimeExports.jsxs(AccordionContent,{className:"p-2",children:[jsxRuntimeExports.jsx("p",{className:"font-black",children:"Answer:"}),jsxRuntimeExports.jsx("p",{children:rt(tt)})]})]})},FrequentAskedQuestion=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6 col-span-1 px-10 py-8",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4",children:[jsxRuntimeExports.jsx(Badge,{className:"w-fit rounded bg-orangeTheme",children:"FAQ"}),jsxRuntimeExports.jsxs("div",{className:"font-bold text-4xl",children:["FREQUENTLY ASKED ",jsxRuntimeExports.jsx("br",{})," QUESTIONS"]})]}),jsxRuntimeExports.jsx(Accordion,{type:"single",collapsible:!0,className:"md:w-[500px] max-sm:w-full rounded",children:FREQUENT_ASKED_QUESTIONS.map(_e=>jsxRuntimeExports.jsx(AccordionLine,{id:_e.id,title:_e.title,content:_e.content},_e.id))})]}),FaqLine=()=>jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 sm:grid-cols-1 w-full py-8",children:[jsxRuntimeExports.jsxs("div",{className:"items-center justify-center flex relative mb-4",children:[jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1728562720/portrait-professor-work-educational-system_u2umnk.jpg",className:"md:w-96 md:h-96 max-sm:h-72 max-sm:w-72 object-cover  rounded-full",alt:"/home-5.png"}),jsxRuntimeExports.jsx("img",{src:"/home-5.png",className:" absolute w-64 h-64  transform translate-x-1/2 translate-y-1/2 max-sm:h-40 max-sm:w-40  object-cover ml-auto rounded-full",alt:"/home-5.png"})]}),jsxRuntimeExports.jsx(FrequentAskedQuestion,{})]}),GetAQuote=()=>{const{t:_e}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"relative bg-cover bg-center w-full h-[300px]  items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{style:{backgroundImage:"url('https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493307/2_nhe9af.png')"},className:"absolute inset-0 bg-cover bg-center filter blur-[5px] z-0"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:" bg-white p-3 rounded-full",children:jsxRuntimeExports.jsx(ArrowDown,{size:26,className:"text-blue-800",strokeWidth:1})}),jsxRuntimeExports.jsxs("p",{className:"uppercase text-[56px] font-black text-white p-2 tracking-tighter",children:[_e("safe")," "]}),jsxRuntimeExports.jsx("p",{className:"text-white pb-2 text-center md:w-2/3 max-sm:w-full",children:_e("safeText")}),jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme hover:bg-orangeTheme/90",children:_e("getQuote")})]})]})},Fast$1=()=>{const{t:_e}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"relative bg-cover my-4 bg-center w-full h-[300px]  items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{style:{backgroundImage:"url('https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493305/7_zaijog.png')"},className:"absolute inset-0 bg-cover bg-center z-0"}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:" bg-white p-3 rounded-full",children:jsxRuntimeExports.jsx(ArrowUp,{size:26,className:"text-blue-800",strokeWidth:1})}),jsxRuntimeExports.jsxs("p",{className:"uppercase text-[56px] font-black text-white p-2 tracking-tighter",children:[_e("fast")," "]})]})]})},Fast=()=>{const{t:_e}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"relative bg-cover bg-center w-full h-[300px]  items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{style:{backgroundImage:"url('https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493308/4_vukkar.png')"},className:"absolute inset-0 bg-cover bg-center z-0  "}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 items-center justify-center flex flex-col",children:[jsxRuntimeExports.jsx("div",{className:" bg-white p-3 rounded-full",children:jsxRuntimeExports.jsx(ArrowUp,{size:26,className:"text-blue-800",strokeWidth:1})}),jsxRuntimeExports.jsxs("p",{className:"uppercase text-[56px] font-black text-white text-center p-2 tracking-tighter",children:[_e("global")," "]})]})]})},HomePage=()=>{const{auth:_e}=useAuth(),et=useNavigate();return reactExports.useEffect(()=>{var tt;((tt=_e.user)==null?void 0:tt.roleID)==1&&et(ROUTES.DASH_BOARD+"truck")},[_e]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center relative",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 md:w-3/5 max-sm:w-full max-sm:mx-4 transform  -translate-y-1/2 ",children:jsxRuntimeExports.jsx(StatisticLine,{})}),jsxRuntimeExports.jsx(TheWayToUseWeb,{}),jsxRuntimeExports.jsx(GetAQuote,{}),jsxRuntimeExports.jsx(Fast$1,{}),jsxRuntimeExports.jsx(Fast,{}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsx(FaqLine,{})]})},HomeLayout=()=>jsxRuntimeExports.jsxs("div",{className:"relative h-full",children:[jsxRuntimeExports.jsxs("div",{style:{backgroundImage:"url('https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493312/6_lwjsxt.png')"},className:"bg-cover bg-center h-[700px] ",children:[jsxRuntimeExports.jsx(Header$1,{}),jsxRuntimeExports.jsx(Slogan,{}),jsxRuntimeExports.jsxs("div",{className:"absolute flex flex-col gap-2 right-2  md:top-64 backdrop-blur-lg bg-transparent",children:[jsxRuntimeExports.jsx(Link,{to:"https://www.tiktok.com/@leopard.lorry",className:"bg-slate-50 p-2 rounded-full",children:jsxRuntimeExports.jsx("img",{src:"/icons8-tiktok-96.png",alt:"tiktok-logo",className:"w-6 "})}),jsxRuntimeExports.jsx(Link,{to:"https://www.facebook.com/leopardlorry",className:"bg-slate-50 p-2 rounded-full",children:jsxRuntimeExports.jsx("img",{src:"/facebook.webp",alt:"facebook-logo",className:"w-6"})})]})]}),jsxRuntimeExports.jsx(HomePage,{}),jsxRuntimeExports.jsx(Footer$1,{})]}),MainLayout=()=>jsxRuntimeExports.jsxs("div",{className:"min-h-screen flex flex-col",children:[jsxRuntimeExports.jsx(Header$1,{classContent:"bg-darkTheme"}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(Outlet,{})}),jsxRuntimeExports.jsx(Footer$1,{})]}),SearchProductSchema=z.object({from:z.string({required_error:"Address is required"}).min(1,"Address is required"),to:z.string({required_error:"Address is required"}).min(1,"Address is required"),length:z.string({required_error:"Length is required"}).min(1,"Length is required"),width:z.string({required_error:"Width is required"}).min(1,"Width is required"),height:z.string({required_error:"Height is required"}).min(1,"Address is required"),weight:z.string({required_error:"Weight is required"}).min(1,"Weight is required"),type:z.string({required_error:"Product Type is required"}).min(1,"Address is required"),time:z.date({required_error:"Product Type is required"})}),UpdateProductSchema=z.object({productName:z.string({required_error:"Product Name is required"}).min(1,"Product Name is required"),image:z.instanceof(File,{message:"Invalid file format"}),orderDetailId:z.string(),productDescription:z.string({required_error:"Product Description is required"}).min(1,"Product Description is required")}).refine(_e=>_e.image instanceof File,{message:"Image of product must be provided",path:["image"]});function clamp(_e,[et,tt]){return Math.min(tt,Math.max(et,_e))}var NAME="VisuallyHidden",VisuallyHidden=reactExports.forwardRef((_e,et)=>jsxRuntimeExports.jsx(Primitive.span,{..._e,ref:et,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",..._e.style}}));VisuallyHidden.displayName=NAME;var OPEN_KEYS=[" ","Enter","ArrowUp","ArrowDown"],SELECTION_KEYS=[" ","Enter"],SELECT_NAME="Select",[Collection,useCollection,createCollectionScope]=createCollection(SELECT_NAME),[createSelectContext,createSelectScope]=createContextScope(SELECT_NAME,[createCollectionScope,createPopperScope]),usePopperScope$1=createPopperScope(),[SelectProvider,useSelectContext]=createSelectContext(SELECT_NAME),[SelectNativeOptionsProvider,useSelectNativeOptionsContext]=createSelectContext(SELECT_NAME),Select$1=_e=>{const{__scopeSelect:et,children:tt,open:rt,defaultOpen:it,onOpenChange:st,value:ut,defaultValue:ht,onValueChange:at,dir:gt,name:bt,autoComplete:wt,disabled:St,required:kt}=_e,Rt=usePopperScope$1(et),[It,Dt]=reactExports.useState(null),[Mt,$t]=reactExports.useState(null),[jt,Nt]=reactExports.useState(!1),Ut=useDirection(gt),[Ht=!1,Kt]=useControllableState({prop:rt,defaultProp:it,onChange:st}),[tr,mr]=useControllableState({prop:ut,defaultProp:ht,onChange:at}),vr=reactExports.useRef(null),wr=It?!!It.closest("form"):!0,[yr,Or]=reactExports.useState(new Set),Nr=Array.from(yr).map(Lr=>Lr.props.value).join(";");return jsxRuntimeExports.jsx(Root2$5,{...Rt,children:jsxRuntimeExports.jsxs(SelectProvider,{required:kt,scope:et,trigger:It,onTriggerChange:Dt,valueNode:Mt,onValueNodeChange:$t,valueNodeHasChildren:jt,onValueNodeHasChildrenChange:Nt,contentId:useId$1(),value:tr,onValueChange:mr,open:Ht,onOpenChange:Kt,dir:Ut,triggerPointerDownPosRef:vr,disabled:St,children:[jsxRuntimeExports.jsx(Collection.Provider,{scope:et,children:jsxRuntimeExports.jsx(SelectNativeOptionsProvider,{scope:_e.__scopeSelect,onNativeOptionAdd:reactExports.useCallback(Lr=>{Or(ar=>new Set(ar).add(Lr))},[]),onNativeOptionRemove:reactExports.useCallback(Lr=>{Or(ar=>{const hr=new Set(ar);return hr.delete(Lr),hr})},[]),children:tt})}),wr?jsxRuntimeExports.jsxs(BubbleSelect,{"aria-hidden":!0,required:kt,tabIndex:-1,name:bt,autoComplete:wt,value:tr,onChange:Lr=>mr(Lr.target.value),disabled:St,children:[tr===void 0?jsxRuntimeExports.jsx("option",{value:""}):null,Array.from(yr)]},Nr):null]})})};Select$1.displayName=SELECT_NAME;var TRIGGER_NAME$3="SelectTrigger",SelectTrigger$1=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,disabled:rt=!1,...it}=_e,st=usePopperScope$1(tt),ut=useSelectContext(TRIGGER_NAME$3,tt),ht=ut.disabled||rt,at=useComposedRefs(et,ut.onTriggerChange),gt=useCollection(tt),[bt,wt,St]=useTypeaheadSearch(Rt=>{const It=gt().filter($t=>!$t.disabled),Dt=It.find($t=>$t.value===ut.value),Mt=findNextItem(It,Rt,Dt);Mt!==void 0&&ut.onValueChange(Mt.value)}),kt=()=>{ht||(ut.onOpenChange(!0),St())};return jsxRuntimeExports.jsx(Anchor,{asChild:!0,...st,children:jsxRuntimeExports.jsx(Primitive.button,{type:"button",role:"combobox","aria-controls":ut.contentId,"aria-expanded":ut.open,"aria-required":ut.required,"aria-autocomplete":"none",dir:ut.dir,"data-state":ut.open?"open":"closed",disabled:ht,"data-disabled":ht?"":void 0,"data-placeholder":shouldShowPlaceholder(ut.value)?"":void 0,...it,ref:at,onClick:composeEventHandlers(it.onClick,Rt=>{Rt.currentTarget.focus()}),onPointerDown:composeEventHandlers(it.onPointerDown,Rt=>{const It=Rt.target;It.hasPointerCapture(Rt.pointerId)&&It.releasePointerCapture(Rt.pointerId),Rt.button===0&&Rt.ctrlKey===!1&&(kt(),ut.triggerPointerDownPosRef.current={x:Math.round(Rt.pageX),y:Math.round(Rt.pageY)},Rt.preventDefault())}),onKeyDown:composeEventHandlers(it.onKeyDown,Rt=>{const It=bt.current!=="";!(Rt.ctrlKey||Rt.altKey||Rt.metaKey)&&Rt.key.length===1&&wt(Rt.key),!(It&&Rt.key===" ")&&OPEN_KEYS.includes(Rt.key)&&(kt(),Rt.preventDefault())})})})});SelectTrigger$1.displayName=TRIGGER_NAME$3;var VALUE_NAME="SelectValue",SelectValue$1=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,className:rt,style:it,children:st,placeholder:ut="",...ht}=_e,at=useSelectContext(VALUE_NAME,tt),{onValueNodeHasChildrenChange:gt}=at,bt=st!==void 0,wt=useComposedRefs(et,at.onValueNodeChange);return useLayoutEffect2(()=>{gt(bt)},[gt,bt]),jsxRuntimeExports.jsx(Primitive.span,{...ht,ref:wt,style:{pointerEvents:"none"},children:shouldShowPlaceholder(at.value)?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ut}):st})});SelectValue$1.displayName=VALUE_NAME;var ICON_NAME="SelectIcon",SelectIcon=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,children:rt,...it}=_e;return jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...it,ref:et,children:rt||""})});SelectIcon.displayName=ICON_NAME;var PORTAL_NAME$3="SelectPortal",SelectPortal=_e=>jsxRuntimeExports.jsx(Portal$4,{asChild:!0,..._e});SelectPortal.displayName=PORTAL_NAME$3;var CONTENT_NAME$3="SelectContent",SelectContent$1=reactExports.forwardRef((_e,et)=>{const tt=useSelectContext(CONTENT_NAME$3,_e.__scopeSelect),[rt,it]=reactExports.useState();if(useLayoutEffect2(()=>{it(new DocumentFragment)},[]),!tt.open){const st=rt;return st?reactDomExports.createPortal(jsxRuntimeExports.jsx(SelectContentProvider,{scope:_e.__scopeSelect,children:jsxRuntimeExports.jsx(Collection.Slot,{scope:_e.__scopeSelect,children:jsxRuntimeExports.jsx("div",{children:_e.children})})}),st):null}return jsxRuntimeExports.jsx(SelectContentImpl,{..._e,ref:et})});SelectContent$1.displayName=CONTENT_NAME$3;var CONTENT_MARGIN=10,[SelectContentProvider,useSelectContentContext]=createSelectContext(CONTENT_NAME$3),CONTENT_IMPL_NAME="SelectContentImpl",SelectContentImpl=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,position:rt="item-aligned",onCloseAutoFocus:it,onEscapeKeyDown:st,onPointerDownOutside:ut,side:ht,sideOffset:at,align:gt,alignOffset:bt,arrowPadding:wt,collisionBoundary:St,collisionPadding:kt,sticky:Rt,hideWhenDetached:It,avoidCollisions:Dt,...Mt}=_e,$t=useSelectContext(CONTENT_NAME$3,tt),[jt,Nt]=reactExports.useState(null),[Ut,Ht]=reactExports.useState(null),Kt=useComposedRefs(et,Gn=>Nt(Gn)),[tr,mr]=reactExports.useState(null),[vr,wr]=reactExports.useState(null),yr=useCollection(tt),[Or,Nr]=reactExports.useState(!1),Lr=reactExports.useRef(!1);reactExports.useEffect(()=>{if(jt)return hideOthers(jt)},[jt]),useFocusGuards();const ar=reactExports.useCallback(Gn=>{const[lo,...mn]=yr().map(dn=>dn.ref.current),[Hn]=mn.slice(-1),Rn=document.activeElement;for(const dn of Gn)if(dn===Rn||(dn==null||dn.scrollIntoView({block:"nearest"}),dn===lo&&Ut&&(Ut.scrollTop=0),dn===Hn&&Ut&&(Ut.scrollTop=Ut.scrollHeight),dn==null||dn.focus(),document.activeElement!==Rn))return},[yr,Ut]),hr=reactExports.useCallback(()=>ar([tr,jt]),[ar,tr,jt]);reactExports.useEffect(()=>{Or&&hr()},[Or,hr]);const{onOpenChange:Qt,triggerPointerDownPosRef:ir}=$t;reactExports.useEffect(()=>{if(jt){let Gn={x:0,y:0};const lo=Hn=>{var Rn,dn;Gn={x:Math.abs(Math.round(Hn.pageX)-(((Rn=ir.current)==null?void 0:Rn.x)??0)),y:Math.abs(Math.round(Hn.pageY)-(((dn=ir.current)==null?void 0:dn.y)??0))}},mn=Hn=>{Gn.x<=10&&Gn.y<=10?Hn.preventDefault():jt.contains(Hn.target)||Qt(!1),document.removeEventListener("pointermove",lo),ir.current=null};return ir.current!==null&&(document.addEventListener("pointermove",lo),document.addEventListener("pointerup",mn,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",lo),document.removeEventListener("pointerup",mn,{capture:!0})}}},[jt,Qt,ir]),reactExports.useEffect(()=>{const Gn=()=>Qt(!1);return window.addEventListener("blur",Gn),window.addEventListener("resize",Gn),()=>{window.removeEventListener("blur",Gn),window.removeEventListener("resize",Gn)}},[Qt]);const[Mr,Cr]=useTypeaheadSearch(Gn=>{const lo=yr().filter(Rn=>!Rn.disabled),mn=lo.find(Rn=>Rn.ref.current===document.activeElement),Hn=findNextItem(lo,Gn,mn);Hn&&setTimeout(()=>Hn.ref.current.focus())}),rn=reactExports.useCallback((Gn,lo,mn)=>{const Hn=!Lr.current&&!mn;($t.value!==void 0&&$t.value===lo||Hn)&&(mr(Gn),Hn&&(Lr.current=!0))},[$t.value]),fn=reactExports.useCallback(()=>jt==null?void 0:jt.focus(),[jt]),Dn=reactExports.useCallback((Gn,lo,mn)=>{const Hn=!Lr.current&&!mn;($t.value!==void 0&&$t.value===lo||Hn)&&wr(Gn)},[$t.value]),Yn=rt==="popper"?SelectPopperPosition:SelectItemAlignedPosition,eo=Yn===SelectPopperPosition?{side:ht,sideOffset:at,align:gt,alignOffset:bt,arrowPadding:wt,collisionBoundary:St,collisionPadding:kt,sticky:Rt,hideWhenDetached:It,avoidCollisions:Dt}:{};return jsxRuntimeExports.jsx(SelectContentProvider,{scope:tt,content:jt,viewport:Ut,onViewportChange:Ht,itemRefCallback:rn,selectedItem:tr,onItemLeave:fn,itemTextRefCallback:Dn,focusSelectedItem:hr,selectedItemText:vr,position:rt,isPositioned:Or,searchRef:Mr,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(FocusScope,{asChild:!0,trapped:$t.open,onMountAutoFocus:Gn=>{Gn.preventDefault()},onUnmountAutoFocus:composeEventHandlers(it,Gn=>{var lo;(lo=$t.trigger)==null||lo.focus({preventScroll:!0}),Gn.preventDefault()}),children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:st,onPointerDownOutside:ut,onFocusOutside:Gn=>Gn.preventDefault(),onDismiss:()=>$t.onOpenChange(!1),children:jsxRuntimeExports.jsx(Yn,{role:"listbox",id:$t.contentId,"data-state":$t.open?"open":"closed",dir:$t.dir,onContextMenu:Gn=>Gn.preventDefault(),...Mt,...eo,onPlaced:()=>Nr(!0),ref:Kt,style:{display:"flex",flexDirection:"column",outline:"none",...Mt.style},onKeyDown:composeEventHandlers(Mt.onKeyDown,Gn=>{const lo=Gn.ctrlKey||Gn.altKey||Gn.metaKey;if(Gn.key==="Tab"&&Gn.preventDefault(),!lo&&Gn.key.length===1&&Cr(Gn.key),["ArrowUp","ArrowDown","Home","End"].includes(Gn.key)){let Hn=yr().filter(Rn=>!Rn.disabled).map(Rn=>Rn.ref.current);if(["ArrowUp","End"].includes(Gn.key)&&(Hn=Hn.slice().reverse()),["ArrowUp","ArrowDown"].includes(Gn.key)){const Rn=Gn.target,dn=Hn.indexOf(Rn);Hn=Hn.slice(dn+1)}setTimeout(()=>ar(Hn)),Gn.preventDefault()}})})})})})})});SelectContentImpl.displayName=CONTENT_IMPL_NAME;var ITEM_ALIGNED_POSITION_NAME="SelectItemAlignedPosition",SelectItemAlignedPosition=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,onPlaced:rt,...it}=_e,st=useSelectContext(CONTENT_NAME$3,tt),ut=useSelectContentContext(CONTENT_NAME$3,tt),[ht,at]=reactExports.useState(null),[gt,bt]=reactExports.useState(null),wt=useComposedRefs(et,Kt=>bt(Kt)),St=useCollection(tt),kt=reactExports.useRef(!1),Rt=reactExports.useRef(!0),{viewport:It,selectedItem:Dt,selectedItemText:Mt,focusSelectedItem:$t}=ut,jt=reactExports.useCallback(()=>{if(st.trigger&&st.valueNode&&ht&&gt&&It&&Dt&&Mt){const Kt=st.trigger.getBoundingClientRect(),tr=gt.getBoundingClientRect(),mr=st.valueNode.getBoundingClientRect(),vr=Mt.getBoundingClientRect();if(st.dir!=="rtl"){const Rn=vr.left-tr.left,dn=mr.left-Rn,qn=Kt.left-dn,On=Kt.width+qn,xo=Math.max(On,tr.width),Io=window.innerWidth-CONTENT_MARGIN,$o=clamp(dn,[CONTENT_MARGIN,Io-xo]);ht.style.minWidth=On+"px",ht.style.left=$o+"px"}else{const Rn=tr.right-vr.right,dn=window.innerWidth-mr.right-Rn,qn=window.innerWidth-Kt.right-dn,On=Kt.width+qn,xo=Math.max(On,tr.width),Io=window.innerWidth-CONTENT_MARGIN,$o=clamp(dn,[CONTENT_MARGIN,Io-xo]);ht.style.minWidth=On+"px",ht.style.right=$o+"px"}const wr=St(),yr=window.innerHeight-CONTENT_MARGIN*2,Or=It.scrollHeight,Nr=window.getComputedStyle(gt),Lr=parseInt(Nr.borderTopWidth,10),ar=parseInt(Nr.paddingTop,10),hr=parseInt(Nr.borderBottomWidth,10),Qt=parseInt(Nr.paddingBottom,10),ir=Lr+ar+Or+Qt+hr,Mr=Math.min(Dt.offsetHeight*5,ir),Cr=window.getComputedStyle(It),rn=parseInt(Cr.paddingTop,10),fn=parseInt(Cr.paddingBottom,10),Dn=Kt.top+Kt.height/2-CONTENT_MARGIN,Yn=yr-Dn,eo=Dt.offsetHeight/2,Gn=Dt.offsetTop+eo,lo=Lr+ar+Gn,mn=ir-lo;if(lo<=Dn){const Rn=Dt===wr[wr.length-1].ref.current;ht.style.bottom="0px";const dn=gt.clientHeight-It.offsetTop-It.offsetHeight,qn=Math.max(Yn,eo+(Rn?fn:0)+dn+hr),On=lo+qn;ht.style.height=On+"px"}else{const Rn=Dt===wr[0].ref.current;ht.style.top="0px";const qn=Math.max(Dn,Lr+It.offsetTop+(Rn?rn:0)+eo)+mn;ht.style.height=qn+"px",It.scrollTop=lo-Dn+It.offsetTop}ht.style.margin=`${CONTENT_MARGIN}px 0`,ht.style.minHeight=Mr+"px",ht.style.maxHeight=yr+"px",rt==null||rt(),requestAnimationFrame(()=>kt.current=!0)}},[St,st.trigger,st.valueNode,ht,gt,It,Dt,Mt,st.dir,rt]);useLayoutEffect2(()=>jt(),[jt]);const[Nt,Ut]=reactExports.useState();useLayoutEffect2(()=>{gt&&Ut(window.getComputedStyle(gt).zIndex)},[gt]);const Ht=reactExports.useCallback(Kt=>{Kt&&Rt.current===!0&&(jt(),$t==null||$t(),Rt.current=!1)},[jt,$t]);return jsxRuntimeExports.jsx(SelectViewportProvider,{scope:tt,contentWrapper:ht,shouldExpandOnScrollRef:kt,onScrollButtonChange:Ht,children:jsxRuntimeExports.jsx("div",{ref:at,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Nt},children:jsxRuntimeExports.jsx(Primitive.div,{...it,ref:wt,style:{boxSizing:"border-box",maxHeight:"100%",...it.style}})})})});SelectItemAlignedPosition.displayName=ITEM_ALIGNED_POSITION_NAME;var POPPER_POSITION_NAME="SelectPopperPosition",SelectPopperPosition=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,align:rt="start",collisionPadding:it=CONTENT_MARGIN,...st}=_e,ut=usePopperScope$1(tt);return jsxRuntimeExports.jsx(Content$2,{...ut,...st,ref:et,align:rt,collisionPadding:it,style:{boxSizing:"border-box",...st.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});SelectPopperPosition.displayName=POPPER_POSITION_NAME;var[SelectViewportProvider,useSelectViewportContext]=createSelectContext(CONTENT_NAME$3,{}),VIEWPORT_NAME="SelectViewport",SelectViewport=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,nonce:rt,...it}=_e,st=useSelectContentContext(VIEWPORT_NAME,tt),ut=useSelectViewportContext(VIEWPORT_NAME,tt),ht=useComposedRefs(et,st.onViewportChange),at=reactExports.useRef(0);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:rt}),jsxRuntimeExports.jsx(Collection.Slot,{scope:tt,children:jsxRuntimeExports.jsx(Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...it,ref:ht,style:{position:"relative",flex:1,overflow:"auto",...it.style},onScroll:composeEventHandlers(it.onScroll,gt=>{const bt=gt.currentTarget,{contentWrapper:wt,shouldExpandOnScrollRef:St}=ut;if(St!=null&&St.current&&wt){const kt=Math.abs(at.current-bt.scrollTop);if(kt>0){const Rt=window.innerHeight-CONTENT_MARGIN*2,It=parseFloat(wt.style.minHeight),Dt=parseFloat(wt.style.height),Mt=Math.max(It,Dt);if(Mt<Rt){const $t=Mt+kt,jt=Math.min(Rt,$t),Nt=$t-jt;wt.style.height=jt+"px",wt.style.bottom==="0px"&&(bt.scrollTop=Nt>0?Nt:0,wt.style.justifyContent="flex-end")}}}at.current=bt.scrollTop})})})]})});SelectViewport.displayName=VIEWPORT_NAME;var GROUP_NAME="SelectGroup",[SelectGroupContextProvider,useSelectGroupContext]=createSelectContext(GROUP_NAME),SelectGroup=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,...rt}=_e,it=useId$1();return jsxRuntimeExports.jsx(SelectGroupContextProvider,{scope:tt,id:it,children:jsxRuntimeExports.jsx(Primitive.div,{role:"group","aria-labelledby":it,...rt,ref:et})})});SelectGroup.displayName=GROUP_NAME;var LABEL_NAME="SelectLabel",SelectLabel$1=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,...rt}=_e,it=useSelectGroupContext(LABEL_NAME,tt);return jsxRuntimeExports.jsx(Primitive.div,{id:it.id,...rt,ref:et})});SelectLabel$1.displayName=LABEL_NAME;var ITEM_NAME="SelectItem",[SelectItemContextProvider,useSelectItemContext]=createSelectContext(ITEM_NAME),SelectItem$1=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,value:rt,disabled:it=!1,textValue:st,...ut}=_e,ht=useSelectContext(ITEM_NAME,tt),at=useSelectContentContext(ITEM_NAME,tt),gt=ht.value===rt,[bt,wt]=reactExports.useState(st??""),[St,kt]=reactExports.useState(!1),Rt=useComposedRefs(et,Mt=>{var $t;return($t=at.itemRefCallback)==null?void 0:$t.call(at,Mt,rt,it)}),It=useId$1(),Dt=()=>{it||(ht.onValueChange(rt),ht.onOpenChange(!1))};if(rt==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return jsxRuntimeExports.jsx(SelectItemContextProvider,{scope:tt,value:rt,disabled:it,textId:It,isSelected:gt,onItemTextChange:reactExports.useCallback(Mt=>{wt($t=>$t||((Mt==null?void 0:Mt.textContent)??"").trim())},[]),children:jsxRuntimeExports.jsx(Collection.ItemSlot,{scope:tt,value:rt,disabled:it,textValue:bt,children:jsxRuntimeExports.jsx(Primitive.div,{role:"option","aria-labelledby":It,"data-highlighted":St?"":void 0,"aria-selected":gt&&St,"data-state":gt?"checked":"unchecked","aria-disabled":it||void 0,"data-disabled":it?"":void 0,tabIndex:it?void 0:-1,...ut,ref:Rt,onFocus:composeEventHandlers(ut.onFocus,()=>kt(!0)),onBlur:composeEventHandlers(ut.onBlur,()=>kt(!1)),onPointerUp:composeEventHandlers(ut.onPointerUp,Dt),onPointerMove:composeEventHandlers(ut.onPointerMove,Mt=>{var $t;it?($t=at.onItemLeave)==null||$t.call(at):Mt.currentTarget.focus({preventScroll:!0})}),onPointerLeave:composeEventHandlers(ut.onPointerLeave,Mt=>{var $t;Mt.currentTarget===document.activeElement&&(($t=at.onItemLeave)==null||$t.call(at))}),onKeyDown:composeEventHandlers(ut.onKeyDown,Mt=>{var jt;((jt=at.searchRef)==null?void 0:jt.current)!==""&&Mt.key===" "||(SELECTION_KEYS.includes(Mt.key)&&Dt(),Mt.key===" "&&Mt.preventDefault())})})})})});SelectItem$1.displayName=ITEM_NAME;var ITEM_TEXT_NAME="SelectItemText",SelectItemText=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,className:rt,style:it,...st}=_e,ut=useSelectContext(ITEM_TEXT_NAME,tt),ht=useSelectContentContext(ITEM_TEXT_NAME,tt),at=useSelectItemContext(ITEM_TEXT_NAME,tt),gt=useSelectNativeOptionsContext(ITEM_TEXT_NAME,tt),[bt,wt]=reactExports.useState(null),St=useComposedRefs(et,Mt=>wt(Mt),at.onItemTextChange,Mt=>{var $t;return($t=ht.itemTextRefCallback)==null?void 0:$t.call(ht,Mt,at.value,at.disabled)}),kt=bt==null?void 0:bt.textContent,Rt=reactExports.useMemo(()=>jsxRuntimeExports.jsx("option",{value:at.value,disabled:at.disabled,children:kt},at.value),[at.disabled,at.value,kt]),{onNativeOptionAdd:It,onNativeOptionRemove:Dt}=gt;return useLayoutEffect2(()=>(It(Rt),()=>Dt(Rt)),[It,Dt,Rt]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Primitive.span,{id:at.textId,...st,ref:St}),at.isSelected&&ut.valueNode&&!ut.valueNodeHasChildren?reactDomExports.createPortal(st.children,ut.valueNode):null]})});SelectItemText.displayName=ITEM_TEXT_NAME;var ITEM_INDICATOR_NAME="SelectItemIndicator",SelectItemIndicator=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,...rt}=_e;return useSelectItemContext(ITEM_INDICATOR_NAME,tt).isSelected?jsxRuntimeExports.jsx(Primitive.span,{"aria-hidden":!0,...rt,ref:et}):null});SelectItemIndicator.displayName=ITEM_INDICATOR_NAME;var SCROLL_UP_BUTTON_NAME="SelectScrollUpButton",SelectScrollUpButton$1=reactExports.forwardRef((_e,et)=>{const tt=useSelectContentContext(SCROLL_UP_BUTTON_NAME,_e.__scopeSelect),rt=useSelectViewportContext(SCROLL_UP_BUTTON_NAME,_e.__scopeSelect),[it,st]=reactExports.useState(!1),ut=useComposedRefs(et,rt.onScrollButtonChange);return useLayoutEffect2(()=>{if(tt.viewport&&tt.isPositioned){let ht=function(){const gt=at.scrollTop>0;st(gt)};const at=tt.viewport;return ht(),at.addEventListener("scroll",ht),()=>at.removeEventListener("scroll",ht)}},[tt.viewport,tt.isPositioned]),it?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._e,ref:ut,onAutoScroll:()=>{const{viewport:ht,selectedItem:at}=tt;ht&&at&&(ht.scrollTop=ht.scrollTop-at.offsetHeight)}}):null});SelectScrollUpButton$1.displayName=SCROLL_UP_BUTTON_NAME;var SCROLL_DOWN_BUTTON_NAME="SelectScrollDownButton",SelectScrollDownButton$1=reactExports.forwardRef((_e,et)=>{const tt=useSelectContentContext(SCROLL_DOWN_BUTTON_NAME,_e.__scopeSelect),rt=useSelectViewportContext(SCROLL_DOWN_BUTTON_NAME,_e.__scopeSelect),[it,st]=reactExports.useState(!1),ut=useComposedRefs(et,rt.onScrollButtonChange);return useLayoutEffect2(()=>{if(tt.viewport&&tt.isPositioned){let ht=function(){const gt=at.scrollHeight-at.clientHeight,bt=Math.ceil(at.scrollTop)<gt;st(bt)};const at=tt.viewport;return ht(),at.addEventListener("scroll",ht),()=>at.removeEventListener("scroll",ht)}},[tt.viewport,tt.isPositioned]),it?jsxRuntimeExports.jsx(SelectScrollButtonImpl,{..._e,ref:ut,onAutoScroll:()=>{const{viewport:ht,selectedItem:at}=tt;ht&&at&&(ht.scrollTop=ht.scrollTop+at.offsetHeight)}}):null});SelectScrollDownButton$1.displayName=SCROLL_DOWN_BUTTON_NAME;var SelectScrollButtonImpl=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,onAutoScroll:rt,...it}=_e,st=useSelectContentContext("SelectScrollButton",tt),ut=reactExports.useRef(null),ht=useCollection(tt),at=reactExports.useCallback(()=>{ut.current!==null&&(window.clearInterval(ut.current),ut.current=null)},[]);return reactExports.useEffect(()=>()=>at(),[at]),useLayoutEffect2(()=>{var bt;const gt=ht().find(wt=>wt.ref.current===document.activeElement);(bt=gt==null?void 0:gt.ref.current)==null||bt.scrollIntoView({block:"nearest"})},[ht]),jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...it,ref:et,style:{flexShrink:0,...it.style},onPointerDown:composeEventHandlers(it.onPointerDown,()=>{ut.current===null&&(ut.current=window.setInterval(rt,50))}),onPointerMove:composeEventHandlers(it.onPointerMove,()=>{var gt;(gt=st.onItemLeave)==null||gt.call(st),ut.current===null&&(ut.current=window.setInterval(rt,50))}),onPointerLeave:composeEventHandlers(it.onPointerLeave,()=>{at()})})}),SEPARATOR_NAME="SelectSeparator",SelectSeparator$1=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,...rt}=_e;return jsxRuntimeExports.jsx(Primitive.div,{"aria-hidden":!0,...rt,ref:et})});SelectSeparator$1.displayName=SEPARATOR_NAME;var ARROW_NAME$1="SelectArrow",SelectArrow=reactExports.forwardRef((_e,et)=>{const{__scopeSelect:tt,...rt}=_e,it=usePopperScope$1(tt),st=useSelectContext(ARROW_NAME$1,tt),ut=useSelectContentContext(ARROW_NAME$1,tt);return st.open&&ut.position==="popper"?jsxRuntimeExports.jsx(Arrow,{...it,...rt,ref:et}):null});SelectArrow.displayName=ARROW_NAME$1;function shouldShowPlaceholder(_e){return _e===""||_e===void 0}var BubbleSelect=reactExports.forwardRef((_e,et)=>{const{value:tt,...rt}=_e,it=reactExports.useRef(null),st=useComposedRefs(et,it),ut=usePrevious$1(tt);return reactExports.useEffect(()=>{const ht=it.current,at=window.HTMLSelectElement.prototype,bt=Object.getOwnPropertyDescriptor(at,"value").set;if(ut!==tt&&bt){const wt=new Event("change",{bubbles:!0});bt.call(ht,tt),ht.dispatchEvent(wt)}},[ut,tt]),jsxRuntimeExports.jsx(VisuallyHidden,{asChild:!0,children:jsxRuntimeExports.jsx("select",{...rt,ref:st,defaultValue:tt})})});BubbleSelect.displayName="BubbleSelect";function useTypeaheadSearch(_e){const et=useCallbackRef$1(_e),tt=reactExports.useRef(""),rt=reactExports.useRef(0),it=reactExports.useCallback(ut=>{const ht=tt.current+ut;et(ht),function at(gt){tt.current=gt,window.clearTimeout(rt.current),gt!==""&&(rt.current=window.setTimeout(()=>at(""),1e3))}(ht)},[et]),st=reactExports.useCallback(()=>{tt.current="",window.clearTimeout(rt.current)},[]);return reactExports.useEffect(()=>()=>window.clearTimeout(rt.current),[]),[tt,it,st]}function findNextItem(_e,et,tt){const it=et.length>1&&Array.from(et).every(gt=>gt===et[0])?et[0]:et,st=tt?_e.indexOf(tt):-1;let ut=wrapArray(_e,Math.max(st,0));it.length===1&&(ut=ut.filter(gt=>gt!==tt));const at=ut.find(gt=>gt.textValue.toLowerCase().startsWith(it.toLowerCase()));return at!==tt?at:void 0}function wrapArray(_e,et){return _e.map((tt,rt)=>_e[(et+rt)%_e.length])}var Root2$2=Select$1,Trigger$2=SelectTrigger$1,Value=SelectValue$1,Icon=SelectIcon,Portal$2=SelectPortal,Content2$2=SelectContent$1,Viewport=SelectViewport,Label=SelectLabel$1,Item=SelectItem$1,ItemText=SelectItemText,ItemIndicator=SelectItemIndicator,ScrollUpButton=SelectScrollUpButton$1,ScrollDownButton=SelectScrollDownButton$1,Separator=SelectSeparator$1;const Select=Root2$2,SelectValue=Value,SelectTrigger=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>jsxRuntimeExports.jsxs(Trigger$2,{ref:rt,className:cn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none  disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",_e),...tt,children:[et,jsxRuntimeExports.jsx(Icon,{asChild:!0,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4 opacity-50"})})]}));SelectTrigger.displayName=Trigger$2.displayName;const SelectScrollUpButton=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(ScrollUpButton,{ref:tt,className:cn("flex cursor-default items-center justify-center py-1",_e),...et,children:jsxRuntimeExports.jsx(ChevronUp,{className:"h-4 w-4"})}));SelectScrollUpButton.displayName=ScrollUpButton.displayName;const SelectScrollDownButton=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(ScrollDownButton,{ref:tt,className:cn("flex cursor-default items-center justify-center py-1",_e),...et,children:jsxRuntimeExports.jsx(ChevronDown,{className:"h-4 w-4"})}));SelectScrollDownButton.displayName=ScrollDownButton.displayName;const SelectContent=reactExports.forwardRef(({className:_e,children:et,position:tt="popper",...rt},it)=>jsxRuntimeExports.jsx(Portal$2,{children:jsxRuntimeExports.jsxs(Content2$2,{ref:it,className:cn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",tt==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",_e),position:tt,...rt,children:[jsxRuntimeExports.jsx(SelectScrollUpButton,{}),jsxRuntimeExports.jsx(Viewport,{className:cn("p-1",tt==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:et}),jsxRuntimeExports.jsx(SelectScrollDownButton,{})]})}));SelectContent.displayName=Content2$2.displayName;const SelectLabel=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Label,{ref:tt,className:cn("py-1.5 pl-8 pr-2 text-sm font-semibold",_e),...et}));SelectLabel.displayName=Label.displayName;const SelectItem=reactExports.forwardRef(({className:_e,children:et,...tt},rt)=>jsxRuntimeExports.jsxs(Item,{ref:rt,className:cn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",_e),...tt,children:[jsxRuntimeExports.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:jsxRuntimeExports.jsx(ItemIndicator,{children:jsxRuntimeExports.jsx(Check,{className:"h-4 w-4"})})}),jsxRuntimeExports.jsx(ItemText,{children:et})]}));SelectItem.displayName=Item.displayName;const SelectSeparator=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Separator,{ref:tt,className:cn("-mx-1 my-1 h-px bg-muted",_e),...et}));SelectSeparator.displayName=Separator.displayName;const FormSelect=({classContent:_e,name:et,content:tt,form:rt,trigger:it,enableOther:st=!1})=>jsxRuntimeExports.jsx(FormField,{control:rt.control,name:et,render:({field:ut})=>jsxRuntimeExports.jsxs(FormItem,{className:cn("relative",_e),children:[jsxRuntimeExports.jsxs(Select,{onValueChange:ut.onChange,defaultValue:ut.value,children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(SelectTrigger,{className:"peer",children:jsxRuntimeExports.jsx(SelectValue,{placeholder:it})})}),jsxRuntimeExports.jsxs(SelectContent,{children:[tt.map((ht,at)=>jsxRuntimeExports.jsx(SelectItem,{value:ht,children:ht},at)),st&&jsxRuntimeExports.jsx(SelectItem,{value:"other",children:"Other "})]})]}),jsxRuntimeExports.jsx(FormLabel,{className:cn("absolute font-normal bg-white blur-10 w-fit px-2 -top-5 py-1 rounded left-3 peer-focus:font-semibold","peer-focus:font-semibold",!ut.value&&"peer-placeholder-shown:font-normal"),children:formatLabel(et)}),jsxRuntimeExports.jsx(FormDescription,{}),jsxRuntimeExports.jsx(FormMessage,{})]})});function toDate(_e){const et=Object.prototype.toString.call(_e);return _e instanceof Date||typeof _e=="object"&&et==="[object Date]"?new _e.constructor(+_e):typeof _e=="number"||et==="[object Number]"||typeof _e=="string"||et==="[object String]"?new Date(_e):new Date(NaN)}function constructFrom(_e,et){return _e instanceof Date?new _e.constructor(et):new Date(et)}function addDays(_e,et){const tt=toDate(_e);return isNaN(et)?constructFrom(_e,NaN):(et&&tt.setDate(tt.getDate()+et),tt)}function addMonths(_e,et){const tt=toDate(_e);if(isNaN(et))return constructFrom(_e,NaN);if(!et)return tt;const rt=tt.getDate(),it=constructFrom(_e,tt.getTime());it.setMonth(tt.getMonth()+et+1,0);const st=it.getDate();return rt>=st?it:(tt.setFullYear(it.getFullYear(),it.getMonth(),rt),tt)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(_e,et){var ht,at,gt,bt;const tt=getDefaultOptions(),rt=(et==null?void 0:et.weekStartsOn)??((at=(ht=et==null?void 0:et.locale)==null?void 0:ht.options)==null?void 0:at.weekStartsOn)??tt.weekStartsOn??((bt=(gt=tt.locale)==null?void 0:gt.options)==null?void 0:bt.weekStartsOn)??0,it=toDate(_e),st=it.getDay(),ut=(st<rt?7:0)+st-rt;return it.setDate(it.getDate()-ut),it.setHours(0,0,0,0),it}function startOfISOWeek(_e){return startOfWeek(_e,{weekStartsOn:1})}function getISOWeekYear(_e){const et=toDate(_e),tt=et.getFullYear(),rt=constructFrom(_e,0);rt.setFullYear(tt+1,0,4),rt.setHours(0,0,0,0);const it=startOfISOWeek(rt),st=constructFrom(_e,0);st.setFullYear(tt,0,4),st.setHours(0,0,0,0);const ut=startOfISOWeek(st);return et.getTime()>=it.getTime()?tt+1:et.getTime()>=ut.getTime()?tt:tt-1}function startOfDay(_e){const et=toDate(_e);return et.setHours(0,0,0,0),et}function getTimezoneOffsetInMilliseconds(_e){const et=toDate(_e),tt=new Date(Date.UTC(et.getFullYear(),et.getMonth(),et.getDate(),et.getHours(),et.getMinutes(),et.getSeconds(),et.getMilliseconds()));return tt.setUTCFullYear(et.getFullYear()),+_e-+tt}function differenceInCalendarDays(_e,et){const tt=startOfDay(_e),rt=startOfDay(et),it=+tt-getTimezoneOffsetInMilliseconds(tt),st=+rt-getTimezoneOffsetInMilliseconds(rt);return Math.round((it-st)/millisecondsInDay)}function startOfISOWeekYear(_e){const et=getISOWeekYear(_e),tt=constructFrom(_e,0);return tt.setFullYear(et,0,4),tt.setHours(0,0,0,0),startOfISOWeek(tt)}function addWeeks(_e,et){const tt=et*7;return addDays(_e,tt)}function addYears(_e,et){return addMonths(_e,et*12)}function max(_e){let et;return _e.forEach(function(tt){const rt=toDate(tt);(et===void 0||et<rt||isNaN(Number(rt)))&&(et=rt)}),et||new Date(NaN)}function min(_e){let et;return _e.forEach(tt=>{const rt=toDate(tt);(!et||et>rt||isNaN(+rt))&&(et=rt)}),et||new Date(NaN)}function isSameDay(_e,et){const tt=startOfDay(_e),rt=startOfDay(et);return+tt==+rt}function isDate(_e){return _e instanceof Date||typeof _e=="object"&&Object.prototype.toString.call(_e)==="[object Date]"}function isValid(_e){if(!isDate(_e)&&typeof _e!="number")return!1;const et=toDate(_e);return!isNaN(Number(et))}function differenceInCalendarMonths(_e,et){const tt=toDate(_e),rt=toDate(et),it=tt.getFullYear()-rt.getFullYear(),st=tt.getMonth()-rt.getMonth();return it*12+st}function differenceInCalendarWeeks(_e,et,tt){const rt=startOfWeek(_e,tt),it=startOfWeek(et,tt),st=+rt-getTimezoneOffsetInMilliseconds(rt),ut=+it-getTimezoneOffsetInMilliseconds(it);return Math.round((st-ut)/millisecondsInWeek)}function endOfMonth(_e){const et=toDate(_e),tt=et.getMonth();return et.setFullYear(et.getFullYear(),tt+1,0),et.setHours(23,59,59,999),et}function startOfMonth(_e){const et=toDate(_e);return et.setDate(1),et.setHours(0,0,0,0),et}function startOfYear(_e){const et=toDate(_e),tt=constructFrom(_e,0);return tt.setFullYear(et.getFullYear(),0,1),tt.setHours(0,0,0,0),tt}function endOfWeek(_e,et){var ht,at,gt,bt;const tt=getDefaultOptions(),rt=(et==null?void 0:et.weekStartsOn)??((at=(ht=et==null?void 0:et.locale)==null?void 0:ht.options)==null?void 0:at.weekStartsOn)??tt.weekStartsOn??((bt=(gt=tt.locale)==null?void 0:gt.options)==null?void 0:bt.weekStartsOn)??0,it=toDate(_e),st=it.getDay(),ut=(st<rt?-7:0)+6-(st-rt);return it.setDate(it.getDate()+ut),it.setHours(23,59,59,999),it}function endOfISOWeek(_e){return endOfWeek(_e,{weekStartsOn:1})}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(_e,et,tt)=>{let rt;const it=formatDistanceLocale[_e];return typeof it=="string"?rt=it:et===1?rt=it.one:rt=it.other.replace("{{count}}",et.toString()),tt!=null&&tt.addSuffix?tt.comparison&&tt.comparison>0?"in "+rt:rt+" ago":rt};function buildFormatLongFn(_e){return(et={})=>{const tt=et.width?String(et.width):_e.defaultWidth;return _e.formats[tt]||_e.formats[_e.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(_e,et,tt,rt)=>formatRelativeLocale[_e];function buildLocalizeFn(_e){return(et,tt)=>{const rt=tt!=null&&tt.context?String(tt.context):"standalone";let it;if(rt==="formatting"&&_e.formattingValues){const ut=_e.defaultFormattingWidth||_e.defaultWidth,ht=tt!=null&&tt.width?String(tt.width):ut;it=_e.formattingValues[ht]||_e.formattingValues[ut]}else{const ut=_e.defaultWidth,ht=tt!=null&&tt.width?String(tt.width):_e.defaultWidth;it=_e.values[ht]||_e.values[ut]}const st=_e.argumentCallback?_e.argumentCallback(et):et;return it[st]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(_e,et)=>{const tt=Number(_e),rt=tt%100;if(rt>20||rt<10)switch(rt%10){case 1:return tt+"st";case 2:return tt+"nd";case 3:return tt+"rd"}return tt+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:_e=>_e-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(_e){return(et,tt={})=>{const rt=tt.width,it=rt&&_e.matchPatterns[rt]||_e.matchPatterns[_e.defaultMatchWidth],st=et.match(it);if(!st)return null;const ut=st[0],ht=rt&&_e.parsePatterns[rt]||_e.parsePatterns[_e.defaultParseWidth],at=Array.isArray(ht)?findIndex(ht,wt=>wt.test(ut)):findKey(ht,wt=>wt.test(ut));let gt;gt=_e.valueCallback?_e.valueCallback(at):at,gt=tt.valueCallback?tt.valueCallback(gt):gt;const bt=et.slice(ut.length);return{value:gt,rest:bt}}}function findKey(_e,et){for(const tt in _e)if(Object.prototype.hasOwnProperty.call(_e,tt)&&et(_e[tt]))return tt}function findIndex(_e,et){for(let tt=0;tt<_e.length;tt++)if(et(_e[tt]))return tt}function buildMatchPatternFn(_e){return(et,tt={})=>{const rt=et.match(_e.matchPattern);if(!rt)return null;const it=rt[0],st=et.match(_e.parsePattern);if(!st)return null;let ut=_e.valueCallback?_e.valueCallback(st[0]):st[0];ut=tt.valueCallback?tt.valueCallback(ut):ut;const ht=et.slice(it.length);return{value:ut,rest:ht}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:_e=>parseInt(_e,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:_e=>_e+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(_e){const et=toDate(_e);return differenceInCalendarDays(et,startOfYear(et))+1}function getISOWeek(_e){const et=toDate(_e),tt=+startOfISOWeek(et)-+startOfISOWeekYear(et);return Math.round(tt/millisecondsInWeek)+1}function getWeekYear(_e,et){var bt,wt,St,kt;const tt=toDate(_e),rt=tt.getFullYear(),it=getDefaultOptions(),st=(et==null?void 0:et.firstWeekContainsDate)??((wt=(bt=et==null?void 0:et.locale)==null?void 0:bt.options)==null?void 0:wt.firstWeekContainsDate)??it.firstWeekContainsDate??((kt=(St=it.locale)==null?void 0:St.options)==null?void 0:kt.firstWeekContainsDate)??1,ut=constructFrom(_e,0);ut.setFullYear(rt+1,0,st),ut.setHours(0,0,0,0);const ht=startOfWeek(ut,et),at=constructFrom(_e,0);at.setFullYear(rt,0,st),at.setHours(0,0,0,0);const gt=startOfWeek(at,et);return tt.getTime()>=ht.getTime()?rt+1:tt.getTime()>=gt.getTime()?rt:rt-1}function startOfWeekYear(_e,et){var ht,at,gt,bt;const tt=getDefaultOptions(),rt=(et==null?void 0:et.firstWeekContainsDate)??((at=(ht=et==null?void 0:et.locale)==null?void 0:ht.options)==null?void 0:at.firstWeekContainsDate)??tt.firstWeekContainsDate??((bt=(gt=tt.locale)==null?void 0:gt.options)==null?void 0:bt.firstWeekContainsDate)??1,it=getWeekYear(_e,et),st=constructFrom(_e,0);return st.setFullYear(it,0,rt),st.setHours(0,0,0,0),startOfWeek(st,et)}function getWeek(_e,et){const tt=toDate(_e),rt=+startOfWeek(tt,et)-+startOfWeekYear(tt,et);return Math.round(rt/millisecondsInWeek)+1}function addLeadingZeros(_e,et){const tt=_e<0?"-":"",rt=Math.abs(_e).toString().padStart(et,"0");return tt+rt}const lightFormatters={y(_e,et){const tt=_e.getFullYear(),rt=tt>0?tt:1-tt;return addLeadingZeros(et==="yy"?rt%100:rt,et.length)},M(_e,et){const tt=_e.getMonth();return et==="M"?String(tt+1):addLeadingZeros(tt+1,2)},d(_e,et){return addLeadingZeros(_e.getDate(),et.length)},a(_e,et){const tt=_e.getHours()/12>=1?"pm":"am";switch(et){case"a":case"aa":return tt.toUpperCase();case"aaa":return tt;case"aaaaa":return tt[0];case"aaaa":default:return tt==="am"?"a.m.":"p.m."}},h(_e,et){return addLeadingZeros(_e.getHours()%12||12,et.length)},H(_e,et){return addLeadingZeros(_e.getHours(),et.length)},m(_e,et){return addLeadingZeros(_e.getMinutes(),et.length)},s(_e,et){return addLeadingZeros(_e.getSeconds(),et.length)},S(_e,et){const tt=et.length,rt=_e.getMilliseconds(),it=Math.trunc(rt*Math.pow(10,tt-3));return addLeadingZeros(it,et.length)}},dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function(_e,et,tt){const rt=_e.getFullYear()>0?1:0;switch(et){case"G":case"GG":case"GGG":return tt.era(rt,{width:"abbreviated"});case"GGGGG":return tt.era(rt,{width:"narrow"});case"GGGG":default:return tt.era(rt,{width:"wide"})}},y:function(_e,et,tt){if(et==="yo"){const rt=_e.getFullYear(),it=rt>0?rt:1-rt;return tt.ordinalNumber(it,{unit:"year"})}return lightFormatters.y(_e,et)},Y:function(_e,et,tt,rt){const it=getWeekYear(_e,rt),st=it>0?it:1-it;if(et==="YY"){const ut=st%100;return addLeadingZeros(ut,2)}return et==="Yo"?tt.ordinalNumber(st,{unit:"year"}):addLeadingZeros(st,et.length)},R:function(_e,et){const tt=getISOWeekYear(_e);return addLeadingZeros(tt,et.length)},u:function(_e,et){const tt=_e.getFullYear();return addLeadingZeros(tt,et.length)},Q:function(_e,et,tt){const rt=Math.ceil((_e.getMonth()+1)/3);switch(et){case"Q":return String(rt);case"QQ":return addLeadingZeros(rt,2);case"Qo":return tt.ordinalNumber(rt,{unit:"quarter"});case"QQQ":return tt.quarter(rt,{width:"abbreviated",context:"formatting"});case"QQQQQ":return tt.quarter(rt,{width:"narrow",context:"formatting"});case"QQQQ":default:return tt.quarter(rt,{width:"wide",context:"formatting"})}},q:function(_e,et,tt){const rt=Math.ceil((_e.getMonth()+1)/3);switch(et){case"q":return String(rt);case"qq":return addLeadingZeros(rt,2);case"qo":return tt.ordinalNumber(rt,{unit:"quarter"});case"qqq":return tt.quarter(rt,{width:"abbreviated",context:"standalone"});case"qqqqq":return tt.quarter(rt,{width:"narrow",context:"standalone"});case"qqqq":default:return tt.quarter(rt,{width:"wide",context:"standalone"})}},M:function(_e,et,tt){const rt=_e.getMonth();switch(et){case"M":case"MM":return lightFormatters.M(_e,et);case"Mo":return tt.ordinalNumber(rt+1,{unit:"month"});case"MMM":return tt.month(rt,{width:"abbreviated",context:"formatting"});case"MMMMM":return tt.month(rt,{width:"narrow",context:"formatting"});case"MMMM":default:return tt.month(rt,{width:"wide",context:"formatting"})}},L:function(_e,et,tt){const rt=_e.getMonth();switch(et){case"L":return String(rt+1);case"LL":return addLeadingZeros(rt+1,2);case"Lo":return tt.ordinalNumber(rt+1,{unit:"month"});case"LLL":return tt.month(rt,{width:"abbreviated",context:"standalone"});case"LLLLL":return tt.month(rt,{width:"narrow",context:"standalone"});case"LLLL":default:return tt.month(rt,{width:"wide",context:"standalone"})}},w:function(_e,et,tt,rt){const it=getWeek(_e,rt);return et==="wo"?tt.ordinalNumber(it,{unit:"week"}):addLeadingZeros(it,et.length)},I:function(_e,et,tt){const rt=getISOWeek(_e);return et==="Io"?tt.ordinalNumber(rt,{unit:"week"}):addLeadingZeros(rt,et.length)},d:function(_e,et,tt){return et==="do"?tt.ordinalNumber(_e.getDate(),{unit:"date"}):lightFormatters.d(_e,et)},D:function(_e,et,tt){const rt=getDayOfYear(_e);return et==="Do"?tt.ordinalNumber(rt,{unit:"dayOfYear"}):addLeadingZeros(rt,et.length)},E:function(_e,et,tt){const rt=_e.getDay();switch(et){case"E":case"EE":case"EEE":return tt.day(rt,{width:"abbreviated",context:"formatting"});case"EEEEE":return tt.day(rt,{width:"narrow",context:"formatting"});case"EEEEEE":return tt.day(rt,{width:"short",context:"formatting"});case"EEEE":default:return tt.day(rt,{width:"wide",context:"formatting"})}},e:function(_e,et,tt,rt){const it=_e.getDay(),st=(it-rt.weekStartsOn+8)%7||7;switch(et){case"e":return String(st);case"ee":return addLeadingZeros(st,2);case"eo":return tt.ordinalNumber(st,{unit:"day"});case"eee":return tt.day(it,{width:"abbreviated",context:"formatting"});case"eeeee":return tt.day(it,{width:"narrow",context:"formatting"});case"eeeeee":return tt.day(it,{width:"short",context:"formatting"});case"eeee":default:return tt.day(it,{width:"wide",context:"formatting"})}},c:function(_e,et,tt,rt){const it=_e.getDay(),st=(it-rt.weekStartsOn+8)%7||7;switch(et){case"c":return String(st);case"cc":return addLeadingZeros(st,et.length);case"co":return tt.ordinalNumber(st,{unit:"day"});case"ccc":return tt.day(it,{width:"abbreviated",context:"standalone"});case"ccccc":return tt.day(it,{width:"narrow",context:"standalone"});case"cccccc":return tt.day(it,{width:"short",context:"standalone"});case"cccc":default:return tt.day(it,{width:"wide",context:"standalone"})}},i:function(_e,et,tt){const rt=_e.getDay(),it=rt===0?7:rt;switch(et){case"i":return String(it);case"ii":return addLeadingZeros(it,et.length);case"io":return tt.ordinalNumber(it,{unit:"day"});case"iii":return tt.day(rt,{width:"abbreviated",context:"formatting"});case"iiiii":return tt.day(rt,{width:"narrow",context:"formatting"});case"iiiiii":return tt.day(rt,{width:"short",context:"formatting"});case"iiii":default:return tt.day(rt,{width:"wide",context:"formatting"})}},a:function(_e,et,tt){const it=_e.getHours()/12>=1?"pm":"am";switch(et){case"a":case"aa":return tt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"aaa":return tt.dayPeriod(it,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return tt.dayPeriod(it,{width:"narrow",context:"formatting"});case"aaaa":default:return tt.dayPeriod(it,{width:"wide",context:"formatting"})}},b:function(_e,et,tt){const rt=_e.getHours();let it;switch(rt===12?it=dayPeriodEnum.noon:rt===0?it=dayPeriodEnum.midnight:it=rt/12>=1?"pm":"am",et){case"b":case"bb":return tt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"bbb":return tt.dayPeriod(it,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return tt.dayPeriod(it,{width:"narrow",context:"formatting"});case"bbbb":default:return tt.dayPeriod(it,{width:"wide",context:"formatting"})}},B:function(_e,et,tt){const rt=_e.getHours();let it;switch(rt>=17?it=dayPeriodEnum.evening:rt>=12?it=dayPeriodEnum.afternoon:rt>=4?it=dayPeriodEnum.morning:it=dayPeriodEnum.night,et){case"B":case"BB":case"BBB":return tt.dayPeriod(it,{width:"abbreviated",context:"formatting"});case"BBBBB":return tt.dayPeriod(it,{width:"narrow",context:"formatting"});case"BBBB":default:return tt.dayPeriod(it,{width:"wide",context:"formatting"})}},h:function(_e,et,tt){if(et==="ho"){let rt=_e.getHours()%12;return rt===0&&(rt=12),tt.ordinalNumber(rt,{unit:"hour"})}return lightFormatters.h(_e,et)},H:function(_e,et,tt){return et==="Ho"?tt.ordinalNumber(_e.getHours(),{unit:"hour"}):lightFormatters.H(_e,et)},K:function(_e,et,tt){const rt=_e.getHours()%12;return et==="Ko"?tt.ordinalNumber(rt,{unit:"hour"}):addLeadingZeros(rt,et.length)},k:function(_e,et,tt){let rt=_e.getHours();return rt===0&&(rt=24),et==="ko"?tt.ordinalNumber(rt,{unit:"hour"}):addLeadingZeros(rt,et.length)},m:function(_e,et,tt){return et==="mo"?tt.ordinalNumber(_e.getMinutes(),{unit:"minute"}):lightFormatters.m(_e,et)},s:function(_e,et,tt){return et==="so"?tt.ordinalNumber(_e.getSeconds(),{unit:"second"}):lightFormatters.s(_e,et)},S:function(_e,et){return lightFormatters.S(_e,et)},X:function(_e,et,tt){const rt=_e.getTimezoneOffset();if(rt===0)return"Z";switch(et){case"X":return formatTimezoneWithOptionalMinutes(rt);case"XXXX":case"XX":return formatTimezone(rt);case"XXXXX":case"XXX":default:return formatTimezone(rt,":")}},x:function(_e,et,tt){const rt=_e.getTimezoneOffset();switch(et){case"x":return formatTimezoneWithOptionalMinutes(rt);case"xxxx":case"xx":return formatTimezone(rt);case"xxxxx":case"xxx":default:return formatTimezone(rt,":")}},O:function(_e,et,tt){const rt=_e.getTimezoneOffset();switch(et){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(rt,":");case"OOOO":default:return"GMT"+formatTimezone(rt,":")}},z:function(_e,et,tt){const rt=_e.getTimezoneOffset();switch(et){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(rt,":");case"zzzz":default:return"GMT"+formatTimezone(rt,":")}},t:function(_e,et,tt){const rt=Math.trunc(_e.getTime()/1e3);return addLeadingZeros(rt,et.length)},T:function(_e,et,tt){const rt=_e.getTime();return addLeadingZeros(rt,et.length)}};function formatTimezoneShort(_e,et=""){const tt=_e>0?"-":"+",rt=Math.abs(_e),it=Math.trunc(rt/60),st=rt%60;return st===0?tt+String(it):tt+String(it)+et+addLeadingZeros(st,2)}function formatTimezoneWithOptionalMinutes(_e,et){return _e%60===0?(_e>0?"-":"+")+addLeadingZeros(Math.abs(_e)/60,2):formatTimezone(_e,et)}function formatTimezone(_e,et=""){const tt=_e>0?"-":"+",rt=Math.abs(_e),it=addLeadingZeros(Math.trunc(rt/60),2),st=addLeadingZeros(rt%60,2);return tt+it+et+st}const dateLongFormatter=(_e,et)=>{switch(_e){case"P":return et.date({width:"short"});case"PP":return et.date({width:"medium"});case"PPP":return et.date({width:"long"});case"PPPP":default:return et.date({width:"full"})}},timeLongFormatter=(_e,et)=>{switch(_e){case"p":return et.time({width:"short"});case"pp":return et.time({width:"medium"});case"ppp":return et.time({width:"long"});case"pppp":default:return et.time({width:"full"})}},dateTimeLongFormatter=(_e,et)=>{const tt=_e.match(/(P+)(p+)?/)||[],rt=tt[1],it=tt[2];if(!it)return dateLongFormatter(_e,et);let st;switch(rt){case"P":st=et.dateTime({width:"short"});break;case"PP":st=et.dateTime({width:"medium"});break;case"PPP":st=et.dateTime({width:"long"});break;case"PPPP":default:st=et.dateTime({width:"full"});break}return st.replace("{{date}}",dateLongFormatter(rt,et)).replace("{{time}}",timeLongFormatter(it,et))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(_e){return dayOfYearTokenRE.test(_e)}function isProtectedWeekYearToken(_e){return weekYearTokenRE.test(_e)}function warnOrThrowProtectedError(_e,et,tt){const rt=message(_e,et,tt);if(console.warn(rt),throwTokens.includes(_e))throw new RangeError(rt)}function message(_e,et,tt){const rt=_e[0]==="Y"?"years":"days of the month";return`Use \`${_e.toLowerCase()}\` instead of \`${_e}\` (in \`${et}\`) for formatting ${rt} to the input \`${tt}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(_e,et,tt){var bt,wt,St,kt,Rt,It,Dt,Mt;const rt=getDefaultOptions(),it=(tt==null?void 0:tt.locale)??rt.locale??enUS,st=(tt==null?void 0:tt.firstWeekContainsDate)??((wt=(bt=tt==null?void 0:tt.locale)==null?void 0:bt.options)==null?void 0:wt.firstWeekContainsDate)??rt.firstWeekContainsDate??((kt=(St=rt.locale)==null?void 0:St.options)==null?void 0:kt.firstWeekContainsDate)??1,ut=(tt==null?void 0:tt.weekStartsOn)??((It=(Rt=tt==null?void 0:tt.locale)==null?void 0:Rt.options)==null?void 0:It.weekStartsOn)??rt.weekStartsOn??((Mt=(Dt=rt.locale)==null?void 0:Dt.options)==null?void 0:Mt.weekStartsOn)??0,ht=toDate(_e);if(!isValid(ht))throw new RangeError("Invalid time value");let at=et.match(longFormattingTokensRegExp).map($t=>{const jt=$t[0];if(jt==="p"||jt==="P"){const Nt=longFormatters[jt];return Nt($t,it.formatLong)}return $t}).join("").match(formattingTokensRegExp).map($t=>{if($t==="''")return{isToken:!1,value:"'"};const jt=$t[0];if(jt==="'")return{isToken:!1,value:cleanEscapedString($t)};if(formatters$1[jt])return{isToken:!0,value:$t};if(jt.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+jt+"`");return{isToken:!1,value:$t}});it.localize.preprocessor&&(at=it.localize.preprocessor(ht,at));const gt={firstWeekContainsDate:st,weekStartsOn:ut,locale:it};return at.map($t=>{if(!$t.isToken)return $t.value;const jt=$t.value;(!(tt!=null&&tt.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(jt)||!(tt!=null&&tt.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(jt))&&warnOrThrowProtectedError(jt,et,String(_e));const Nt=formatters$1[jt[0]];return Nt(ht,jt,it.localize,gt)}).join("")}function cleanEscapedString(_e){const et=_e.match(escapedStringRegExp);return et?et[1].replace(doubleQuoteRegExp,"'"):_e}function getDaysInMonth(_e){const et=toDate(_e),tt=et.getFullYear(),rt=et.getMonth(),it=constructFrom(_e,0);return it.setFullYear(tt,rt+1,0),it.setHours(0,0,0,0),it.getDate()}function getUnixTime(_e){return Math.trunc(+toDate(_e)/1e3)}function lastDayOfMonth(_e){const et=toDate(_e),tt=et.getMonth();return et.setFullYear(et.getFullYear(),tt+1,0),et.setHours(0,0,0,0),et}function getWeeksInMonth(_e,et){return differenceInCalendarWeeks(lastDayOfMonth(_e),startOfMonth(_e),et)+1}function isAfter(_e,et){const tt=toDate(_e),rt=toDate(et);return tt.getTime()>rt.getTime()}function isBefore(_e,et){const tt=toDate(_e),rt=toDate(et);return+tt<+rt}function isSameMonth(_e,et){const tt=toDate(_e),rt=toDate(et);return tt.getFullYear()===rt.getFullYear()&&tt.getMonth()===rt.getMonth()}function isSameYear(_e,et){const tt=toDate(_e),rt=toDate(et);return tt.getFullYear()===rt.getFullYear()}function subDays(_e,et){return addDays(_e,-et)}function setMonth(_e,et){const tt=toDate(_e),rt=tt.getFullYear(),it=tt.getDate(),st=constructFrom(_e,0);st.setFullYear(rt,et,15),st.setHours(0,0,0,0);const ut=getDaysInMonth(st);return tt.setMonth(et,Math.min(it,ut)),tt}function setYear(_e,et){const tt=toDate(_e);return isNaN(+tt)?constructFrom(_e,NaN):(tt.setFullYear(et),tt)}var __assign=function(){return __assign=Object.assign||function(et){for(var tt,rt=1,it=arguments.length;rt<it;rt++){tt=arguments[rt];for(var st in tt)Object.prototype.hasOwnProperty.call(tt,st)&&(et[st]=tt[st])}return et},__assign.apply(this,arguments)};function __rest(_e,et){var tt={};for(var rt in _e)Object.prototype.hasOwnProperty.call(_e,rt)&&et.indexOf(rt)<0&&(tt[rt]=_e[rt]);if(_e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var it=0,rt=Object.getOwnPropertySymbols(_e);it<rt.length;it++)et.indexOf(rt[it])<0&&Object.prototype.propertyIsEnumerable.call(_e,rt[it])&&(tt[rt[it]]=_e[rt[it]]);return tt}function __spreadArray(_e,et,tt){for(var rt=0,it=et.length,st;rt<it;rt++)(st||!(rt in et))&&(st||(st=Array.prototype.slice.call(et,0,rt)),st[rt]=et[rt]);return _e.concat(st||Array.prototype.slice.call(et))}typeof SuppressedError=="function"&&SuppressedError;function isDayPickerMultiple(_e){return _e.mode==="multiple"}function isDayPickerRange(_e){return _e.mode==="range"}function isDayPickerSingle(_e){return _e.mode==="single"}var defaultClassNames={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function formatCaption(_e,et){return format(_e,"LLLL y",et)}function formatDay(_e,et){return format(_e,"d",et)}function formatMonthCaption(_e,et){return format(_e,"LLLL",et)}function formatWeekNumber(_e){return"".concat(_e)}function formatWeekdayName(_e,et){return format(_e,"cccccc",et)}function formatYearCaption(_e,et){return format(_e,"yyyy",et)}var formatters=Object.freeze({__proto__:null,formatCaption,formatDay,formatMonthCaption,formatWeekNumber,formatWeekdayName,formatYearCaption}),labelDay=function(_e,et,tt){return format(_e,"do MMMM (EEEE)",tt)},labelMonthDropdown=function(){return"Month: "},labelNext=function(){return"Go to next month"},labelPrevious=function(){return"Go to previous month"},labelWeekday=function(_e,et){return format(_e,"cccc",et)},labelWeekNumber=function(_e){return"Week n. ".concat(_e)},labelYearDropdown=function(){return"Year: "},labels=Object.freeze({__proto__:null,labelDay,labelMonthDropdown,labelNext,labelPrevious,labelWeekNumber,labelWeekday,labelYearDropdown});function getDefaultContextValues(){var _e="buttons",et=defaultClassNames,tt=enUS,rt={},it={},st=1,ut={},ht=new Date;return{captionLayout:_e,classNames:et,formatters,labels,locale:tt,modifiersClassNames:rt,modifiers:it,numberOfMonths:st,styles:ut,today:ht,mode:"default"}}function parseFromToProps(_e){var et=_e.fromYear,tt=_e.toYear,rt=_e.fromMonth,it=_e.toMonth,st=_e.fromDate,ut=_e.toDate;return rt?st=startOfMonth(rt):et&&(st=new Date(et,0,1)),it?ut=endOfMonth(it):tt&&(ut=new Date(tt,11,31)),{fromDate:st?startOfDay(st):void 0,toDate:ut?startOfDay(ut):void 0}}var DayPickerContext=reactExports.createContext(void 0);function DayPickerProvider(_e){var et,tt=_e.initialProps,rt=getDefaultContextValues(),it=parseFromToProps(tt),st=it.fromDate,ut=it.toDate,ht=(et=tt.captionLayout)!==null&&et!==void 0?et:rt.captionLayout;ht!=="buttons"&&(!st||!ut)&&(ht="buttons");var at;(isDayPickerSingle(tt)||isDayPickerMultiple(tt)||isDayPickerRange(tt))&&(at=tt.onSelect);var gt=__assign(__assign(__assign({},rt),tt),{captionLayout:ht,classNames:__assign(__assign({},rt.classNames),tt.classNames),components:__assign({},tt.components),formatters:__assign(__assign({},rt.formatters),tt.formatters),fromDate:st,labels:__assign(__assign({},rt.labels),tt.labels),mode:tt.mode||rt.mode,modifiers:__assign(__assign({},rt.modifiers),tt.modifiers),modifiersClassNames:__assign(__assign({},rt.modifiersClassNames),tt.modifiersClassNames),onSelect:at,styles:__assign(__assign({},rt.styles),tt.styles),toDate:ut});return jsxRuntimeExports.jsx(DayPickerContext.Provider,{value:gt,children:_e.children})}function useDayPicker(){var _e=reactExports.useContext(DayPickerContext);if(!_e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return _e}function CaptionLabel(_e){var et=useDayPicker(),tt=et.locale,rt=et.classNames,it=et.styles,st=et.formatters.formatCaption;return jsxRuntimeExports.jsx("div",{className:rt.caption_label,style:it.caption_label,"aria-live":"polite",role:"presentation",id:_e.id,children:st(_e.displayMonth,{locale:tt})})}function IconDropdown(_e){return jsxRuntimeExports.jsx("svg",__assign({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},_e,{children:jsxRuntimeExports.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function Dropdown(_e){var et,tt,rt=_e.onChange,it=_e.value,st=_e.children,ut=_e.caption,ht=_e.className,at=_e.style,gt=useDayPicker(),bt=(tt=(et=gt.components)===null||et===void 0?void 0:et.IconDropdown)!==null&&tt!==void 0?tt:IconDropdown;return jsxRuntimeExports.jsxs("div",{className:ht,style:at,children:[jsxRuntimeExports.jsx("span",{className:gt.classNames.vhidden,children:_e["aria-label"]}),jsxRuntimeExports.jsx("select",{name:_e.name,"aria-label":_e["aria-label"],className:gt.classNames.dropdown,style:gt.styles.dropdown,value:it,onChange:rt,children:st}),jsxRuntimeExports.jsxs("div",{className:gt.classNames.caption_label,style:gt.styles.caption_label,"aria-hidden":"true",children:[ut,jsxRuntimeExports.jsx(bt,{className:gt.classNames.dropdown_icon,style:gt.styles.dropdown_icon})]})]})}function MonthsDropdown(_e){var et,tt=useDayPicker(),rt=tt.fromDate,it=tt.toDate,st=tt.styles,ut=tt.locale,ht=tt.formatters.formatMonthCaption,at=tt.classNames,gt=tt.components,bt=tt.labels.labelMonthDropdown;if(!rt)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!it)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var wt=[];if(isSameYear(rt,it))for(var St=startOfMonth(rt),kt=rt.getMonth();kt<=it.getMonth();kt++)wt.push(setMonth(St,kt));else for(var St=startOfMonth(new Date),kt=0;kt<=11;kt++)wt.push(setMonth(St,kt));var Rt=function(Dt){var Mt=Number(Dt.target.value),$t=setMonth(startOfMonth(_e.displayMonth),Mt);_e.onChange($t)},It=(et=gt==null?void 0:gt.Dropdown)!==null&&et!==void 0?et:Dropdown;return jsxRuntimeExports.jsx(It,{name:"months","aria-label":bt(),className:at.dropdown_month,style:st.dropdown_month,onChange:Rt,value:_e.displayMonth.getMonth(),caption:ht(_e.displayMonth,{locale:ut}),children:wt.map(function(Dt){return jsxRuntimeExports.jsx("option",{value:Dt.getMonth(),children:ht(Dt,{locale:ut})},Dt.getMonth())})})}function YearsDropdown(_e){var et,tt=_e.displayMonth,rt=useDayPicker(),it=rt.fromDate,st=rt.toDate,ut=rt.locale,ht=rt.styles,at=rt.classNames,gt=rt.components,bt=rt.formatters.formatYearCaption,wt=rt.labels.labelYearDropdown,St=[];if(!it)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});if(!st)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});for(var kt=it.getFullYear(),Rt=st.getFullYear(),It=kt;It<=Rt;It++)St.push(setYear(startOfYear(new Date),It));var Dt=function($t){var jt=setYear(startOfMonth(tt),Number($t.target.value));_e.onChange(jt)},Mt=(et=gt==null?void 0:gt.Dropdown)!==null&&et!==void 0?et:Dropdown;return jsxRuntimeExports.jsx(Mt,{name:"years","aria-label":wt(),className:at.dropdown_year,style:ht.dropdown_year,onChange:Dt,value:tt.getFullYear(),caption:bt(tt,{locale:ut}),children:St.map(function($t){return jsxRuntimeExports.jsx("option",{value:$t.getFullYear(),children:bt($t,{locale:ut})},$t.getFullYear())})})}function useControlledValue(_e,et){var tt=reactExports.useState(_e),rt=tt[0],it=tt[1],st=et===void 0?rt:et;return[st,it]}function getInitialMonth(_e){var et=_e.month,tt=_e.defaultMonth,rt=_e.today,it=et||tt||rt||new Date,st=_e.toDate,ut=_e.fromDate,ht=_e.numberOfMonths,at=ht===void 0?1:ht;if(st&&differenceInCalendarMonths(st,it)<0){var gt=-1*(at-1);it=addMonths(st,gt)}return ut&&differenceInCalendarMonths(it,ut)<0&&(it=ut),startOfMonth(it)}function useNavigationState(){var _e=useDayPicker(),et=getInitialMonth(_e),tt=useControlledValue(et,_e.month),rt=tt[0],it=tt[1],st=function(ut){var ht;if(!_e.disableNavigation){var at=startOfMonth(ut);it(at),(ht=_e.onMonthChange)===null||ht===void 0||ht.call(_e,at)}};return[rt,st]}function getDisplayMonths(_e,et){for(var tt=et.reverseMonths,rt=et.numberOfMonths,it=startOfMonth(_e),st=startOfMonth(addMonths(it,rt)),ut=differenceInCalendarMonths(st,it),ht=[],at=0;at<ut;at++){var gt=addMonths(it,at);ht.push(gt)}return tt&&(ht=ht.reverse()),ht}function getNextMonth(_e,et){if(!et.disableNavigation){var tt=et.toDate,rt=et.pagedNavigation,it=et.numberOfMonths,st=it===void 0?1:it,ut=rt?st:1,ht=startOfMonth(_e);if(!tt)return addMonths(ht,ut);var at=differenceInCalendarMonths(tt,_e);if(!(at<st))return addMonths(ht,ut)}}function getPreviousMonth(_e,et){if(!et.disableNavigation){var tt=et.fromDate,rt=et.pagedNavigation,it=et.numberOfMonths,st=it===void 0?1:it,ut=rt?st:1,ht=startOfMonth(_e);if(!tt)return addMonths(ht,-ut);var at=differenceInCalendarMonths(ht,tt);if(!(at<=0))return addMonths(ht,-ut)}}var NavigationContext=reactExports.createContext(void 0);function NavigationProvider(_e){var et=useDayPicker(),tt=useNavigationState(),rt=tt[0],it=tt[1],st=getDisplayMonths(rt,et),ut=getNextMonth(rt,et),ht=getPreviousMonth(rt,et),at=function(wt){return st.some(function(St){return isSameMonth(wt,St)})},gt=function(wt,St){at(wt)||(St&&isBefore(wt,St)?it(addMonths(wt,1+et.numberOfMonths*-1)):it(wt))},bt={currentMonth:rt,displayMonths:st,goToMonth:it,goToDate:gt,previousMonth:ht,nextMonth:ut,isDateDisplayed:at};return jsxRuntimeExports.jsx(NavigationContext.Provider,{value:bt,children:_e.children})}function useNavigation(){var _e=reactExports.useContext(NavigationContext);if(!_e)throw new Error("useNavigation must be used within a NavigationProvider");return _e}function CaptionDropdowns(_e){var et,tt=useDayPicker(),rt=tt.classNames,it=tt.styles,st=tt.components,ut=useNavigation().goToMonth,ht=function(bt){ut(addMonths(bt,_e.displayIndex?-_e.displayIndex:0))},at=(et=st==null?void 0:st.CaptionLabel)!==null&&et!==void 0?et:CaptionLabel,gt=jsxRuntimeExports.jsx(at,{id:_e.id,displayMonth:_e.displayMonth});return jsxRuntimeExports.jsxs("div",{className:rt.caption_dropdowns,style:it.caption_dropdowns,children:[jsxRuntimeExports.jsx("div",{className:rt.vhidden,children:gt}),jsxRuntimeExports.jsx(MonthsDropdown,{onChange:ht,displayMonth:_e.displayMonth}),jsxRuntimeExports.jsx(YearsDropdown,{onChange:ht,displayMonth:_e.displayMonth})]})}function IconLeft(_e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},_e,{children:jsxRuntimeExports.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function IconRight(_e){return jsxRuntimeExports.jsx("svg",__assign({width:"16px",height:"16px",viewBox:"0 0 120 120"},_e,{children:jsxRuntimeExports.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Button=reactExports.forwardRef(function(_e,et){var tt=useDayPicker(),rt=tt.classNames,it=tt.styles,st=[rt.button_reset,rt.button];_e.className&&st.push(_e.className);var ut=st.join(" "),ht=__assign(__assign({},it.button_reset),it.button);return _e.style&&Object.assign(ht,_e.style),jsxRuntimeExports.jsx("button",__assign({},_e,{ref:et,type:"button",className:ut,style:ht}))});function Navigation(_e){var et,tt,rt=useDayPicker(),it=rt.dir,st=rt.locale,ut=rt.classNames,ht=rt.styles,at=rt.labels,gt=at.labelPrevious,bt=at.labelNext,wt=rt.components;if(!_e.nextMonth&&!_e.previousMonth)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});var St=gt(_e.previousMonth,{locale:st}),kt=[ut.nav_button,ut.nav_button_previous].join(" "),Rt=bt(_e.nextMonth,{locale:st}),It=[ut.nav_button,ut.nav_button_next].join(" "),Dt=(et=wt==null?void 0:wt.IconRight)!==null&&et!==void 0?et:IconRight,Mt=(tt=wt==null?void 0:wt.IconLeft)!==null&&tt!==void 0?tt:IconLeft;return jsxRuntimeExports.jsxs("div",{className:ut.nav,style:ht.nav,children:[!_e.hidePrevious&&jsxRuntimeExports.jsx(Button,{name:"previous-month","aria-label":St,className:kt,style:ht.nav_button_previous,disabled:!_e.previousMonth,onClick:_e.onPreviousClick,children:it==="rtl"?jsxRuntimeExports.jsx(Dt,{className:ut.nav_icon,style:ht.nav_icon}):jsxRuntimeExports.jsx(Mt,{className:ut.nav_icon,style:ht.nav_icon})}),!_e.hideNext&&jsxRuntimeExports.jsx(Button,{name:"next-month","aria-label":Rt,className:It,style:ht.nav_button_next,disabled:!_e.nextMonth,onClick:_e.onNextClick,children:it==="rtl"?jsxRuntimeExports.jsx(Mt,{className:ut.nav_icon,style:ht.nav_icon}):jsxRuntimeExports.jsx(Dt,{className:ut.nav_icon,style:ht.nav_icon})})]})}function CaptionNavigation(_e){var et=useDayPicker().numberOfMonths,tt=useNavigation(),rt=tt.previousMonth,it=tt.nextMonth,st=tt.goToMonth,ut=tt.displayMonths,ht=ut.findIndex(function(Rt){return isSameMonth(_e.displayMonth,Rt)}),at=ht===0,gt=ht===ut.length-1,bt=et>1&&(at||!gt),wt=et>1&&(gt||!at),St=function(){rt&&st(rt)},kt=function(){it&&st(it)};return jsxRuntimeExports.jsx(Navigation,{displayMonth:_e.displayMonth,hideNext:bt,hidePrevious:wt,nextMonth:it,previousMonth:rt,onPreviousClick:St,onNextClick:kt})}function Caption(_e){var et,tt=useDayPicker(),rt=tt.classNames,it=tt.disableNavigation,st=tt.styles,ut=tt.captionLayout,ht=tt.components,at=(et=ht==null?void 0:ht.CaptionLabel)!==null&&et!==void 0?et:CaptionLabel,gt;return it?gt=jsxRuntimeExports.jsx(at,{id:_e.id,displayMonth:_e.displayMonth}):ut==="dropdown"?gt=jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:_e.displayMonth,id:_e.id}):ut==="dropdown-buttons"?gt=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CaptionDropdowns,{displayMonth:_e.displayMonth,displayIndex:_e.displayIndex,id:_e.id}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:_e.displayMonth,displayIndex:_e.displayIndex,id:_e.id})]}):gt=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(at,{id:_e.id,displayMonth:_e.displayMonth,displayIndex:_e.displayIndex}),jsxRuntimeExports.jsx(CaptionNavigation,{displayMonth:_e.displayMonth,id:_e.id})]}),jsxRuntimeExports.jsx("div",{className:rt.caption,style:st.caption,children:gt})}function Footer(_e){var et=useDayPicker(),tt=et.footer,rt=et.styles,it=et.classNames.tfoot;return tt?jsxRuntimeExports.jsx("tfoot",{className:it,style:rt.tfoot,children:jsxRuntimeExports.jsx("tr",{children:jsxRuntimeExports.jsx("td",{colSpan:8,children:tt})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function getWeekdays(_e,et,tt){for(var rt=tt?startOfISOWeek(new Date):startOfWeek(new Date,{locale:_e,weekStartsOn:et}),it=[],st=0;st<7;st++){var ut=addDays(rt,st);it.push(ut)}return it}function HeadRow(){var _e=useDayPicker(),et=_e.classNames,tt=_e.styles,rt=_e.showWeekNumber,it=_e.locale,st=_e.weekStartsOn,ut=_e.ISOWeek,ht=_e.formatters.formatWeekdayName,at=_e.labels.labelWeekday,gt=getWeekdays(it,st,ut);return jsxRuntimeExports.jsxs("tr",{style:tt.head_row,className:et.head_row,children:[rt&&jsxRuntimeExports.jsx("td",{style:tt.head_cell,className:et.head_cell}),gt.map(function(bt,wt){return jsxRuntimeExports.jsx("th",{scope:"col",className:et.head_cell,style:tt.head_cell,"aria-label":at(bt,{locale:it}),children:ht(bt,{locale:it})},wt)})]})}function Head(){var _e,et=useDayPicker(),tt=et.classNames,rt=et.styles,it=et.components,st=(_e=it==null?void 0:it.HeadRow)!==null&&_e!==void 0?_e:HeadRow;return jsxRuntimeExports.jsx("thead",{style:rt.head,className:tt.head,children:jsxRuntimeExports.jsx(st,{})})}function DayContent(_e){var et=useDayPicker(),tt=et.locale,rt=et.formatters.formatDay;return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:rt(_e.date,{locale:tt})})}var SelectMultipleContext=reactExports.createContext(void 0);function SelectMultipleProvider(_e){if(!isDayPickerMultiple(_e.initialProps)){var et={selected:void 0,modifiers:{disabled:[]}};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:et,children:_e.children})}return jsxRuntimeExports.jsx(SelectMultipleProviderInternal,{initialProps:_e.initialProps,children:_e.children})}function SelectMultipleProviderInternal(_e){var et=_e.initialProps,tt=_e.children,rt=et.selected,it=et.min,st=et.max,ut=function(gt,bt,wt){var St,kt;(St=et.onDayClick)===null||St===void 0||St.call(et,gt,bt,wt);var Rt=!!(bt.selected&&it&&(rt==null?void 0:rt.length)===it);if(!Rt){var It=!!(!bt.selected&&st&&(rt==null?void 0:rt.length)===st);if(!It){var Dt=rt?__spreadArray([],rt):[];if(bt.selected){var Mt=Dt.findIndex(function($t){return isSameDay(gt,$t)});Dt.splice(Mt,1)}else Dt.push(gt);(kt=et.onSelect)===null||kt===void 0||kt.call(et,Dt,gt,bt,wt)}}},ht={disabled:[]};rt&&ht.disabled.push(function(gt){var bt=st&&rt.length>st-1,wt=rt.some(function(St){return isSameDay(St,gt)});return!!(bt&&!wt)});var at={selected:rt,onDayClick:ut,modifiers:ht};return jsxRuntimeExports.jsx(SelectMultipleContext.Provider,{value:at,children:tt})}function useSelectMultiple(){var _e=reactExports.useContext(SelectMultipleContext);if(!_e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return _e}function addToRange(_e,et){var tt=et||{},rt=tt.from,it=tt.to;return rt&&it?isSameDay(it,_e)&&isSameDay(rt,_e)?void 0:isSameDay(it,_e)?{from:it,to:void 0}:isSameDay(rt,_e)?void 0:isAfter(rt,_e)?{from:_e,to:it}:{from:rt,to:_e}:it?isAfter(_e,it)?{from:it,to:_e}:{from:_e,to:it}:rt?isBefore(_e,rt)?{from:_e,to:rt}:{from:rt,to:_e}:{from:_e,to:void 0}}var SelectRangeContext=reactExports.createContext(void 0);function SelectRangeProvider(_e){if(!isDayPickerRange(_e.initialProps)){var et={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:et,children:_e.children})}return jsxRuntimeExports.jsx(SelectRangeProviderInternal,{initialProps:_e.initialProps,children:_e.children})}function SelectRangeProviderInternal(_e){var et=_e.initialProps,tt=_e.children,rt=et.selected,it=rt||{},st=it.from,ut=it.to,ht=et.min,at=et.max,gt=function(kt,Rt,It){var Dt,Mt;(Dt=et.onDayClick)===null||Dt===void 0||Dt.call(et,kt,Rt,It);var $t=addToRange(kt,rt);(Mt=et.onSelect)===null||Mt===void 0||Mt.call(et,$t,kt,Rt,It)},bt={range_start:[],range_end:[],range_middle:[],disabled:[]};if(st?(bt.range_start=[st],ut?(bt.range_end=[ut],isSameDay(st,ut)||(bt.range_middle=[{after:st,before:ut}])):bt.range_end=[st]):ut&&(bt.range_start=[ut],bt.range_end=[ut]),ht&&(st&&!ut&&bt.disabled.push({after:subDays(st,ht-1),before:addDays(st,ht-1)}),st&&ut&&bt.disabled.push({after:st,before:addDays(st,ht-1)}),!st&&ut&&bt.disabled.push({after:subDays(ut,ht-1),before:addDays(ut,ht-1)})),at){if(st&&!ut&&(bt.disabled.push({before:addDays(st,-at+1)}),bt.disabled.push({after:addDays(st,at-1)})),st&&ut){var wt=differenceInCalendarDays(ut,st)+1,St=at-wt;bt.disabled.push({before:subDays(st,St)}),bt.disabled.push({after:addDays(ut,St)})}!st&&ut&&(bt.disabled.push({before:addDays(ut,-at+1)}),bt.disabled.push({after:addDays(ut,at-1)}))}return jsxRuntimeExports.jsx(SelectRangeContext.Provider,{value:{selected:rt,onDayClick:gt,modifiers:bt},children:tt})}function useSelectRange(){var _e=reactExports.useContext(SelectRangeContext);if(!_e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return _e}function matcherToArray(_e){return Array.isArray(_e)?__spreadArray([],_e):_e!==void 0?[_e]:[]}function getCustomModifiers(_e){var et={};return Object.entries(_e).forEach(function(tt){var rt=tt[0],it=tt[1];et[rt]=matcherToArray(it)}),et}var InternalModifier;(function(_e){_e.Outside="outside",_e.Disabled="disabled",_e.Selected="selected",_e.Hidden="hidden",_e.Today="today",_e.RangeStart="range_start",_e.RangeEnd="range_end",_e.RangeMiddle="range_middle"})(InternalModifier||(InternalModifier={}));var Selected=InternalModifier.Selected,Disabled=InternalModifier.Disabled,Hidden=InternalModifier.Hidden,Today=InternalModifier.Today,RangeEnd=InternalModifier.RangeEnd,RangeMiddle=InternalModifier.RangeMiddle,RangeStart=InternalModifier.RangeStart,Outside=InternalModifier.Outside;function getInternalModifiers(_e,et,tt){var rt,it=(rt={},rt[Selected]=matcherToArray(_e.selected),rt[Disabled]=matcherToArray(_e.disabled),rt[Hidden]=matcherToArray(_e.hidden),rt[Today]=[_e.today],rt[RangeEnd]=[],rt[RangeMiddle]=[],rt[RangeStart]=[],rt[Outside]=[],rt);return _e.fromDate&&it[Disabled].push({before:_e.fromDate}),_e.toDate&&it[Disabled].push({after:_e.toDate}),isDayPickerMultiple(_e)?it[Disabled]=it[Disabled].concat(et.modifiers[Disabled]):isDayPickerRange(_e)&&(it[Disabled]=it[Disabled].concat(tt.modifiers[Disabled]),it[RangeStart]=tt.modifiers[RangeStart],it[RangeMiddle]=tt.modifiers[RangeMiddle],it[RangeEnd]=tt.modifiers[RangeEnd]),it}var ModifiersContext=reactExports.createContext(void 0);function ModifiersProvider(_e){var et=useDayPicker(),tt=useSelectMultiple(),rt=useSelectRange(),it=getInternalModifiers(et,tt,rt),st=getCustomModifiers(et.modifiers),ut=__assign(__assign({},it),st);return jsxRuntimeExports.jsx(ModifiersContext.Provider,{value:ut,children:_e.children})}function useModifiers(){var _e=reactExports.useContext(ModifiersContext);if(!_e)throw new Error("useModifiers must be used within a ModifiersProvider");return _e}function isDateInterval(_e){return!!(_e&&typeof _e=="object"&&"before"in _e&&"after"in _e)}function isDateRange(_e){return!!(_e&&typeof _e=="object"&&"from"in _e)}function isDateAfterType(_e){return!!(_e&&typeof _e=="object"&&"after"in _e)}function isDateBeforeType(_e){return!!(_e&&typeof _e=="object"&&"before"in _e)}function isDayOfWeekType(_e){return!!(_e&&typeof _e=="object"&&"dayOfWeek"in _e)}function isDateInRange(_e,et){var tt,rt=et.from,it=et.to;if(rt&&it){var st=differenceInCalendarDays(it,rt)<0;st&&(tt=[it,rt],rt=tt[0],it=tt[1]);var ut=differenceInCalendarDays(_e,rt)>=0&&differenceInCalendarDays(it,_e)>=0;return ut}return it?isSameDay(it,_e):rt?isSameDay(rt,_e):!1}function isDateType(_e){return isDate(_e)}function isArrayOfDates(_e){return Array.isArray(_e)&&_e.every(isDate)}function isMatch(_e,et){return et.some(function(tt){if(typeof tt=="boolean")return tt;if(isDateType(tt))return isSameDay(_e,tt);if(isArrayOfDates(tt))return tt.includes(_e);if(isDateRange(tt))return isDateInRange(_e,tt);if(isDayOfWeekType(tt))return tt.dayOfWeek.includes(_e.getDay());if(isDateInterval(tt)){var rt=differenceInCalendarDays(tt.before,_e),it=differenceInCalendarDays(tt.after,_e),st=rt>0,ut=it<0,ht=isAfter(tt.before,tt.after);return ht?ut&&st:st||ut}return isDateAfterType(tt)?differenceInCalendarDays(_e,tt.after)>0:isDateBeforeType(tt)?differenceInCalendarDays(tt.before,_e)>0:typeof tt=="function"?tt(_e):!1})}function getActiveModifiers(_e,et,tt){var rt=Object.keys(et).reduce(function(st,ut){var ht=et[ut];return isMatch(_e,ht)&&st.push(ut),st},[]),it={};return rt.forEach(function(st){return it[st]=!0}),tt&&!isSameMonth(_e,tt)&&(it.outside=!0),it}function getInitialFocusTarget(_e,et){for(var tt=startOfMonth(_e[0]),rt=endOfMonth(_e[_e.length-1]),it,st,ut=tt;ut<=rt;){var ht=getActiveModifiers(ut,et),at=!ht.disabled&&!ht.hidden;if(!at){ut=addDays(ut,1);continue}if(ht.selected)return ut;ht.today&&!st&&(st=ut),it||(it=ut),ut=addDays(ut,1)}return st||it}var MAX_RETRY=365;function getNextFocus(_e,et){var tt=et.moveBy,rt=et.direction,it=et.context,st=et.modifiers,ut=et.retry,ht=ut===void 0?{count:0,lastFocused:_e}:ut,at=it.weekStartsOn,gt=it.fromDate,bt=it.toDate,wt=it.locale,St={day:addDays,week:addWeeks,month:addMonths,year:addYears,startOfWeek:function(Dt){return it.ISOWeek?startOfISOWeek(Dt):startOfWeek(Dt,{locale:wt,weekStartsOn:at})},endOfWeek:function(Dt){return it.ISOWeek?endOfISOWeek(Dt):endOfWeek(Dt,{locale:wt,weekStartsOn:at})}},kt=St[tt](_e,rt==="after"?1:-1);rt==="before"&&gt?kt=max([gt,kt]):rt==="after"&&bt&&(kt=min([bt,kt]));var Rt=!0;if(st){var It=getActiveModifiers(kt,st);Rt=!It.disabled&&!It.hidden}return Rt?kt:ht.count>MAX_RETRY?ht.lastFocused:getNextFocus(kt,{moveBy:tt,direction:rt,context:it,modifiers:st,retry:__assign(__assign({},ht),{count:ht.count+1})})}var FocusContext=reactExports.createContext(void 0);function FocusProvider(_e){var et=useNavigation(),tt=useModifiers(),rt=reactExports.useState(),it=rt[0],st=rt[1],ut=reactExports.useState(),ht=ut[0],at=ut[1],gt=getInitialFocusTarget(et.displayMonths,tt),bt=it??(ht&&et.isDateDisplayed(ht))?ht:gt,wt=function(){at(it),st(void 0)},St=function(Dt){st(Dt)},kt=useDayPicker(),Rt=function(Dt,Mt){if(it){var $t=getNextFocus(it,{moveBy:Dt,direction:Mt,context:kt,modifiers:tt});isSameDay(it,$t)||(et.goToDate($t,it),St($t))}},It={focusedDay:it,focusTarget:bt,blur:wt,focus:St,focusDayAfter:function(){return Rt("day","after")},focusDayBefore:function(){return Rt("day","before")},focusWeekAfter:function(){return Rt("week","after")},focusWeekBefore:function(){return Rt("week","before")},focusMonthBefore:function(){return Rt("month","before")},focusMonthAfter:function(){return Rt("month","after")},focusYearBefore:function(){return Rt("year","before")},focusYearAfter:function(){return Rt("year","after")},focusStartOfWeek:function(){return Rt("startOfWeek","before")},focusEndOfWeek:function(){return Rt("endOfWeek","after")}};return jsxRuntimeExports.jsx(FocusContext.Provider,{value:It,children:_e.children})}function useFocusContext(){var _e=reactExports.useContext(FocusContext);if(!_e)throw new Error("useFocusContext must be used within a FocusProvider");return _e}function useActiveModifiers(_e,et){var tt=useModifiers(),rt=getActiveModifiers(_e,tt,et);return rt}var SelectSingleContext=reactExports.createContext(void 0);function SelectSingleProvider(_e){if(!isDayPickerSingle(_e.initialProps)){var et={selected:void 0};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:et,children:_e.children})}return jsxRuntimeExports.jsx(SelectSingleProviderInternal,{initialProps:_e.initialProps,children:_e.children})}function SelectSingleProviderInternal(_e){var et=_e.initialProps,tt=_e.children,rt=function(st,ut,ht){var at,gt,bt;if((at=et.onDayClick)===null||at===void 0||at.call(et,st,ut,ht),ut.selected&&!et.required){(gt=et.onSelect)===null||gt===void 0||gt.call(et,void 0,st,ut,ht);return}(bt=et.onSelect)===null||bt===void 0||bt.call(et,st,st,ut,ht)},it={selected:et.selected,onDayClick:rt};return jsxRuntimeExports.jsx(SelectSingleContext.Provider,{value:it,children:tt})}function useSelectSingle(){var _e=reactExports.useContext(SelectSingleContext);if(!_e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return _e}function useDayEventHandlers(_e,et){var tt=useDayPicker(),rt=useSelectSingle(),it=useSelectMultiple(),st=useSelectRange(),ut=useFocusContext(),ht=ut.focusDayAfter,at=ut.focusDayBefore,gt=ut.focusWeekAfter,bt=ut.focusWeekBefore,wt=ut.blur,St=ut.focus,kt=ut.focusMonthBefore,Rt=ut.focusMonthAfter,It=ut.focusYearBefore,Dt=ut.focusYearAfter,Mt=ut.focusStartOfWeek,$t=ut.focusEndOfWeek,jt=function(hr){var Qt,ir,Mr,Cr;isDayPickerSingle(tt)?(Qt=rt.onDayClick)===null||Qt===void 0||Qt.call(rt,_e,et,hr):isDayPickerMultiple(tt)?(ir=it.onDayClick)===null||ir===void 0||ir.call(it,_e,et,hr):isDayPickerRange(tt)?(Mr=st.onDayClick)===null||Mr===void 0||Mr.call(st,_e,et,hr):(Cr=tt.onDayClick)===null||Cr===void 0||Cr.call(tt,_e,et,hr)},Nt=function(hr){var Qt;St(_e),(Qt=tt.onDayFocus)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Ut=function(hr){var Qt;wt(),(Qt=tt.onDayBlur)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Ht=function(hr){var Qt;(Qt=tt.onDayMouseEnter)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Kt=function(hr){var Qt;(Qt=tt.onDayMouseLeave)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},tr=function(hr){var Qt;(Qt=tt.onDayPointerEnter)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},mr=function(hr){var Qt;(Qt=tt.onDayPointerLeave)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},vr=function(hr){var Qt;(Qt=tt.onDayTouchCancel)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},wr=function(hr){var Qt;(Qt=tt.onDayTouchEnd)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},yr=function(hr){var Qt;(Qt=tt.onDayTouchMove)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Or=function(hr){var Qt;(Qt=tt.onDayTouchStart)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Nr=function(hr){var Qt;(Qt=tt.onDayKeyUp)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},Lr=function(hr){var Qt;switch(hr.key){case"ArrowLeft":hr.preventDefault(),hr.stopPropagation(),tt.dir==="rtl"?ht():at();break;case"ArrowRight":hr.preventDefault(),hr.stopPropagation(),tt.dir==="rtl"?at():ht();break;case"ArrowDown":hr.preventDefault(),hr.stopPropagation(),gt();break;case"ArrowUp":hr.preventDefault(),hr.stopPropagation(),bt();break;case"PageUp":hr.preventDefault(),hr.stopPropagation(),hr.shiftKey?It():kt();break;case"PageDown":hr.preventDefault(),hr.stopPropagation(),hr.shiftKey?Dt():Rt();break;case"Home":hr.preventDefault(),hr.stopPropagation(),Mt();break;case"End":hr.preventDefault(),hr.stopPropagation(),$t();break}(Qt=tt.onDayKeyDown)===null||Qt===void 0||Qt.call(tt,_e,et,hr)},ar={onClick:jt,onFocus:Nt,onBlur:Ut,onKeyDown:Lr,onKeyUp:Nr,onMouseEnter:Ht,onMouseLeave:Kt,onPointerEnter:tr,onPointerLeave:mr,onTouchCancel:vr,onTouchEnd:wr,onTouchMove:yr,onTouchStart:Or};return ar}function useSelectedDays(){var _e=useDayPicker(),et=useSelectSingle(),tt=useSelectMultiple(),rt=useSelectRange(),it=isDayPickerSingle(_e)?et.selected:isDayPickerMultiple(_e)?tt.selected:isDayPickerRange(_e)?rt.selected:void 0;return it}function isInternalModifier(_e){return Object.values(InternalModifier).includes(_e)}function getDayClassNames(_e,et){var tt=[_e.classNames.day];return Object.keys(et).forEach(function(rt){var it=_e.modifiersClassNames[rt];if(it)tt.push(it);else if(isInternalModifier(rt)){var st=_e.classNames["day_".concat(rt)];st&&tt.push(st)}}),tt}function getDayStyle(_e,et){var tt=__assign({},_e.styles.day);return Object.keys(et).forEach(function(rt){var it;tt=__assign(__assign({},tt),(it=_e.modifiersStyles)===null||it===void 0?void 0:it[rt])}),tt}function useDayRender(_e,et,tt){var rt,it,st,ut=useDayPicker(),ht=useFocusContext(),at=useActiveModifiers(_e,et),gt=useDayEventHandlers(_e,at),bt=useSelectedDays(),wt=!!(ut.onDayClick||ut.mode!=="default");reactExports.useEffect(function(){var Ht;at.outside||ht.focusedDay&&wt&&isSameDay(ht.focusedDay,_e)&&((Ht=tt.current)===null||Ht===void 0||Ht.focus())},[ht.focusedDay,_e,tt,wt,at.outside]);var St=getDayClassNames(ut,at).join(" "),kt=getDayStyle(ut,at),Rt=!!(at.outside&&!ut.showOutsideDays||at.hidden),It=(st=(it=ut.components)===null||it===void 0?void 0:it.DayContent)!==null&&st!==void 0?st:DayContent,Dt=jsxRuntimeExports.jsx(It,{date:_e,displayMonth:et,activeModifiers:at}),Mt={style:kt,className:St,children:Dt,role:"gridcell"},$t=ht.focusTarget&&isSameDay(ht.focusTarget,_e)&&!at.outside,jt=ht.focusedDay&&isSameDay(ht.focusedDay,_e),Nt=__assign(__assign(__assign({},Mt),(rt={disabled:at.disabled,role:"gridcell"},rt["aria-selected"]=at.selected,rt.tabIndex=jt||$t?0:-1,rt)),gt),Ut={isButton:wt,isHidden:Rt,activeModifiers:at,selectedDays:bt,buttonProps:Nt,divProps:Mt};return Ut}function Day(_e){var et=reactExports.useRef(null),tt=useDayRender(_e.date,_e.displayMonth,et);return tt.isHidden?jsxRuntimeExports.jsx("div",{role:"gridcell"}):tt.isButton?jsxRuntimeExports.jsx(Button,__assign({name:"day",ref:et},tt.buttonProps)):jsxRuntimeExports.jsx("div",__assign({},tt.divProps))}function WeekNumber(_e){var et=_e.number,tt=_e.dates,rt=useDayPicker(),it=rt.onWeekNumberClick,st=rt.styles,ut=rt.classNames,ht=rt.locale,at=rt.labels.labelWeekNumber,gt=rt.formatters.formatWeekNumber,bt=gt(Number(et),{locale:ht});if(!it)return jsxRuntimeExports.jsx("span",{className:ut.weeknumber,style:st.weeknumber,children:bt});var wt=at(Number(et),{locale:ht}),St=function(kt){it(et,tt,kt)};return jsxRuntimeExports.jsx(Button,{name:"week-number","aria-label":wt,className:ut.weeknumber,style:st.weeknumber,onClick:St,children:bt})}function Row(_e){var et,tt,rt=useDayPicker(),it=rt.styles,st=rt.classNames,ut=rt.showWeekNumber,ht=rt.components,at=(et=ht==null?void 0:ht.Day)!==null&&et!==void 0?et:Day,gt=(tt=ht==null?void 0:ht.WeekNumber)!==null&&tt!==void 0?tt:WeekNumber,bt;return ut&&(bt=jsxRuntimeExports.jsx("td",{className:st.cell,style:it.cell,children:jsxRuntimeExports.jsx(gt,{number:_e.weekNumber,dates:_e.dates})})),jsxRuntimeExports.jsxs("tr",{className:st.row,style:it.row,children:[bt,_e.dates.map(function(wt){return jsxRuntimeExports.jsx("td",{className:st.cell,style:it.cell,role:"presentation",children:jsxRuntimeExports.jsx(at,{displayMonth:_e.displayMonth,date:wt})},getUnixTime(wt))})]})}function daysToMonthWeeks(_e,et,tt){for(var rt=tt!=null&&tt.ISOWeek?endOfISOWeek(et):endOfWeek(et,tt),it=tt!=null&&tt.ISOWeek?startOfISOWeek(_e):startOfWeek(_e,tt),st=differenceInCalendarDays(rt,it),ut=[],ht=0;ht<=st;ht++)ut.push(addDays(it,ht));var at=ut.reduce(function(gt,bt){var wt=tt!=null&&tt.ISOWeek?getISOWeek(bt):getWeek(bt,tt),St=gt.find(function(kt){return kt.weekNumber===wt});return St?(St.dates.push(bt),gt):(gt.push({weekNumber:wt,dates:[bt]}),gt)},[]);return at}function getMonthWeeks(_e,et){var tt=daysToMonthWeeks(startOfMonth(_e),endOfMonth(_e),et);if(et!=null&&et.useFixedWeeks){var rt=getWeeksInMonth(_e,et);if(rt<6){var it=tt[tt.length-1],st=it.dates[it.dates.length-1],ut=addWeeks(st,6-rt),ht=daysToMonthWeeks(addWeeks(st,1),ut,et);tt.push.apply(tt,ht)}}return tt}function Table(_e){var et,tt,rt,it=useDayPicker(),st=it.locale,ut=it.classNames,ht=it.styles,at=it.hideHead,gt=it.fixedWeeks,bt=it.components,wt=it.weekStartsOn,St=it.firstWeekContainsDate,kt=it.ISOWeek,Rt=getMonthWeeks(_e.displayMonth,{useFixedWeeks:!!gt,ISOWeek:kt,locale:st,weekStartsOn:wt,firstWeekContainsDate:St}),It=(et=bt==null?void 0:bt.Head)!==null&&et!==void 0?et:Head,Dt=(tt=bt==null?void 0:bt.Row)!==null&&tt!==void 0?tt:Row,Mt=(rt=bt==null?void 0:bt.Footer)!==null&&rt!==void 0?rt:Footer;return jsxRuntimeExports.jsxs("table",{id:_e.id,className:ut.table,style:ht.table,role:"grid","aria-labelledby":_e["aria-labelledby"],children:[!at&&jsxRuntimeExports.jsx(It,{}),jsxRuntimeExports.jsx("tbody",{className:ut.tbody,style:ht.tbody,children:Rt.map(function($t){return jsxRuntimeExports.jsx(Dt,{displayMonth:_e.displayMonth,dates:$t.dates,weekNumber:$t.weekNumber},$t.weekNumber)})}),jsxRuntimeExports.jsx(Mt,{displayMonth:_e.displayMonth})]})}function canUseDOM(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var useIsomorphicLayoutEffect$1=canUseDOM()?reactExports.useLayoutEffect:reactExports.useEffect,serverHandoffComplete=!1,id=0;function genId(){return"react-day-picker-".concat(++id)}function useId(_e){var et,tt=_e??(serverHandoffComplete?genId():null),rt=reactExports.useState(tt),it=rt[0],st=rt[1];return useIsomorphicLayoutEffect$1(function(){it===null&&st(genId())},[]),reactExports.useEffect(function(){serverHandoffComplete===!1&&(serverHandoffComplete=!0)},[]),(et=_e??it)!==null&&et!==void 0?et:void 0}function Month(_e){var et,tt,rt=useDayPicker(),it=rt.dir,st=rt.classNames,ut=rt.styles,ht=rt.components,at=useNavigation().displayMonths,gt=useId(rt.id?"".concat(rt.id,"-").concat(_e.displayIndex):void 0),bt=rt.id?"".concat(rt.id,"-grid-").concat(_e.displayIndex):void 0,wt=[st.month],St=ut.month,kt=_e.displayIndex===0,Rt=_e.displayIndex===at.length-1,It=!kt&&!Rt;it==="rtl"&&(et=[kt,Rt],Rt=et[0],kt=et[1]),kt&&(wt.push(st.caption_start),St=__assign(__assign({},St),ut.caption_start)),Rt&&(wt.push(st.caption_end),St=__assign(__assign({},St),ut.caption_end)),It&&(wt.push(st.caption_between),St=__assign(__assign({},St),ut.caption_between));var Dt=(tt=ht==null?void 0:ht.Caption)!==null&&tt!==void 0?tt:Caption;return jsxRuntimeExports.jsxs("div",{className:wt.join(" "),style:St,children:[jsxRuntimeExports.jsx(Dt,{id:gt,displayMonth:_e.displayMonth,displayIndex:_e.displayIndex}),jsxRuntimeExports.jsx(Table,{id:bt,"aria-labelledby":gt,displayMonth:_e.displayMonth})]},_e.displayIndex)}function Months(_e){var et=useDayPicker(),tt=et.classNames,rt=et.styles;return jsxRuntimeExports.jsx("div",{className:tt.months,style:rt.months,children:_e.children})}function Root$1(_e){var et,tt,rt=_e.initialProps,it=useDayPicker(),st=useFocusContext(),ut=useNavigation(),ht=reactExports.useState(!1),at=ht[0],gt=ht[1];reactExports.useEffect(function(){it.initialFocus&&st.focusTarget&&(at||(st.focus(st.focusTarget),gt(!0)))},[it.initialFocus,at,st.focus,st.focusTarget,st]);var bt=[it.classNames.root,it.className];it.numberOfMonths>1&&bt.push(it.classNames.multiple_months),it.showWeekNumber&&bt.push(it.classNames.with_weeknumber);var wt=__assign(__assign({},it.styles.root),it.style),St=Object.keys(rt).filter(function(Rt){return Rt.startsWith("data-")}).reduce(function(Rt,It){var Dt;return __assign(__assign({},Rt),(Dt={},Dt[It]=rt[It],Dt))},{}),kt=(tt=(et=rt.components)===null||et===void 0?void 0:et.Months)!==null&&tt!==void 0?tt:Months;return jsxRuntimeExports.jsx("div",__assign({className:bt.join(" "),style:wt,dir:it.dir,id:it.id,nonce:rt.nonce,title:rt.title,lang:rt.lang},St,{children:jsxRuntimeExports.jsx(kt,{children:ut.displayMonths.map(function(Rt,It){return jsxRuntimeExports.jsx(Month,{displayIndex:It,displayMonth:Rt},It)})})}))}function RootProvider(_e){var et=_e.children,tt=__rest(_e,["children"]);return jsxRuntimeExports.jsx(DayPickerProvider,{initialProps:tt,children:jsxRuntimeExports.jsx(NavigationProvider,{children:jsxRuntimeExports.jsx(SelectSingleProvider,{initialProps:tt,children:jsxRuntimeExports.jsx(SelectMultipleProvider,{initialProps:tt,children:jsxRuntimeExports.jsx(SelectRangeProvider,{initialProps:tt,children:jsxRuntimeExports.jsx(ModifiersProvider,{children:jsxRuntimeExports.jsx(FocusProvider,{children:et})})})})})})})}function DayPicker(_e){return jsxRuntimeExports.jsx(RootProvider,__assign({},_e,{children:jsxRuntimeExports.jsx(Root$1,{initialProps:_e})}))}function Calendar({className:_e,classNames:et,showOutsideDays:tt=!0,...rt}){return jsxRuntimeExports.jsx(DayPicker,{showOutsideDays:tt,className:cn("p-3",_e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:cn(buttonVariants({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:cn(buttonVariants({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...et},components:{IconLeft:()=>jsxRuntimeExports.jsx(ChevronLeft,{className:"h-4 w-4"}),IconRight:()=>jsxRuntimeExports.jsx(ChevronRight,{className:"h-4 w-4"})},...rt})}Calendar.displayName="Calendar";var POPOVER_NAME="Popover",[createPopoverContext,createPopoverScope]=createContextScope(POPOVER_NAME,[createPopperScope]),usePopperScope=createPopperScope(),[PopoverProvider,usePopoverContext]=createPopoverContext(POPOVER_NAME),Popover$1=_e=>{const{__scopePopover:et,children:tt,open:rt,defaultOpen:it,onOpenChange:st,modal:ut=!1}=_e,ht=usePopperScope(et),at=reactExports.useRef(null),[gt,bt]=reactExports.useState(!1),[wt=!1,St]=useControllableState({prop:rt,defaultProp:it,onChange:st});return jsxRuntimeExports.jsx(Root2$5,{...ht,children:jsxRuntimeExports.jsx(PopoverProvider,{scope:et,contentId:useId$1(),triggerRef:at,open:wt,onOpenChange:St,onOpenToggle:reactExports.useCallback(()=>St(kt=>!kt),[St]),hasCustomAnchor:gt,onCustomAnchorAdd:reactExports.useCallback(()=>bt(!0),[]),onCustomAnchorRemove:reactExports.useCallback(()=>bt(!1),[]),modal:ut,children:tt})})};Popover$1.displayName=POPOVER_NAME;var ANCHOR_NAME="PopoverAnchor",PopoverAnchor=reactExports.forwardRef((_e,et)=>{const{__scopePopover:tt,...rt}=_e,it=usePopoverContext(ANCHOR_NAME,tt),st=usePopperScope(tt),{onCustomAnchorAdd:ut,onCustomAnchorRemove:ht}=it;return reactExports.useEffect(()=>(ut(),()=>ht()),[ut,ht]),jsxRuntimeExports.jsx(Anchor,{...st,...rt,ref:et})});PopoverAnchor.displayName=ANCHOR_NAME;var TRIGGER_NAME$2="PopoverTrigger",PopoverTrigger$1=reactExports.forwardRef((_e,et)=>{const{__scopePopover:tt,...rt}=_e,it=usePopoverContext(TRIGGER_NAME$2,tt),st=usePopperScope(tt),ut=useComposedRefs(et,it.triggerRef),ht=jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":it.open,"aria-controls":it.contentId,"data-state":getState$1(it.open),...rt,ref:ut,onClick:composeEventHandlers(_e.onClick,it.onOpenToggle)});return it.hasCustomAnchor?ht:jsxRuntimeExports.jsx(Anchor,{asChild:!0,...st,children:ht})});PopoverTrigger$1.displayName=TRIGGER_NAME$2;var PORTAL_NAME$2="PopoverPortal",[PortalProvider$1,usePortalContext$1]=createPopoverContext(PORTAL_NAME$2,{forceMount:void 0}),PopoverPortal=_e=>{const{__scopePopover:et,forceMount:tt,children:rt,container:it}=_e,st=usePopoverContext(PORTAL_NAME$2,et);return jsxRuntimeExports.jsx(PortalProvider$1,{scope:et,forceMount:tt,children:jsxRuntimeExports.jsx(Presence,{present:tt||st.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:it,children:rt})})})};PopoverPortal.displayName=PORTAL_NAME$2;var CONTENT_NAME$2="PopoverContent",PopoverContent$1=reactExports.forwardRef((_e,et)=>{const tt=usePortalContext$1(CONTENT_NAME$2,_e.__scopePopover),{forceMount:rt=tt.forceMount,...it}=_e,st=usePopoverContext(CONTENT_NAME$2,_e.__scopePopover);return jsxRuntimeExports.jsx(Presence,{present:rt||st.open,children:st.modal?jsxRuntimeExports.jsx(PopoverContentModal,{...it,ref:et}):jsxRuntimeExports.jsx(PopoverContentNonModal,{...it,ref:et})})});PopoverContent$1.displayName=CONTENT_NAME$2;var PopoverContentModal=reactExports.forwardRef((_e,et)=>{const tt=usePopoverContext(CONTENT_NAME$2,_e.__scopePopover),rt=reactExports.useRef(null),it=useComposedRefs(et,rt),st=reactExports.useRef(!1);return reactExports.useEffect(()=>{const ut=rt.current;if(ut)return hideOthers(ut)},[]),jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,children:jsxRuntimeExports.jsx(PopoverContentImpl,{..._e,ref:it,trapFocus:tt.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(_e.onCloseAutoFocus,ut=>{var ht;ut.preventDefault(),st.current||(ht=tt.triggerRef.current)==null||ht.focus()}),onPointerDownOutside:composeEventHandlers(_e.onPointerDownOutside,ut=>{const ht=ut.detail.originalEvent,at=ht.button===0&&ht.ctrlKey===!0,gt=ht.button===2||at;st.current=gt},{checkForDefaultPrevented:!1}),onFocusOutside:composeEventHandlers(_e.onFocusOutside,ut=>ut.preventDefault(),{checkForDefaultPrevented:!1})})})}),PopoverContentNonModal=reactExports.forwardRef((_e,et)=>{const tt=usePopoverContext(CONTENT_NAME$2,_e.__scopePopover),rt=reactExports.useRef(!1),it=reactExports.useRef(!1);return jsxRuntimeExports.jsx(PopoverContentImpl,{..._e,ref:et,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:st=>{var ut,ht;(ut=_e.onCloseAutoFocus)==null||ut.call(_e,st),st.defaultPrevented||(rt.current||(ht=tt.triggerRef.current)==null||ht.focus(),st.preventDefault()),rt.current=!1,it.current=!1},onInteractOutside:st=>{var at,gt;(at=_e.onInteractOutside)==null||at.call(_e,st),st.defaultPrevented||(rt.current=!0,st.detail.originalEvent.type==="pointerdown"&&(it.current=!0));const ut=st.target;((gt=tt.triggerRef.current)==null?void 0:gt.contains(ut))&&st.preventDefault(),st.detail.originalEvent.type==="focusin"&&it.current&&st.preventDefault()}})}),PopoverContentImpl=reactExports.forwardRef((_e,et)=>{const{__scopePopover:tt,trapFocus:rt,onOpenAutoFocus:it,onCloseAutoFocus:st,disableOutsidePointerEvents:ut,onEscapeKeyDown:ht,onPointerDownOutside:at,onFocusOutside:gt,onInteractOutside:bt,...wt}=_e,St=usePopoverContext(CONTENT_NAME$2,tt),kt=usePopperScope(tt);return useFocusGuards(),jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:rt,onMountAutoFocus:it,onUnmountAutoFocus:st,children:jsxRuntimeExports.jsx(DismissableLayer,{asChild:!0,disableOutsidePointerEvents:ut,onInteractOutside:bt,onEscapeKeyDown:ht,onPointerDownOutside:at,onFocusOutside:gt,onDismiss:()=>St.onOpenChange(!1),children:jsxRuntimeExports.jsx(Content$2,{"data-state":getState$1(St.open),role:"dialog",id:St.contentId,...kt,...wt,ref:et,style:{...wt.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),CLOSE_NAME$1="PopoverClose",PopoverClose=reactExports.forwardRef((_e,et)=>{const{__scopePopover:tt,...rt}=_e,it=usePopoverContext(CLOSE_NAME$1,tt);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rt,ref:et,onClick:composeEventHandlers(_e.onClick,()=>it.onOpenChange(!1))})});PopoverClose.displayName=CLOSE_NAME$1;var ARROW_NAME="PopoverArrow",PopoverArrow=reactExports.forwardRef((_e,et)=>{const{__scopePopover:tt,...rt}=_e,it=usePopperScope(tt);return jsxRuntimeExports.jsx(Arrow,{...it,...rt,ref:et})});PopoverArrow.displayName=ARROW_NAME;function getState$1(_e){return _e?"open":"closed"}var Root2$1=Popover$1,Trigger$1=PopoverTrigger$1,Portal$1=PopoverPortal,Content2$1=PopoverContent$1;const Popover=Root2$1,PopoverTrigger=Trigger$1,PopoverContent=reactExports.forwardRef(({className:_e,align:et="center",sideOffset:tt=4,...rt},it)=>jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsx(Content2$1,{ref:it,align:et,sideOffset:tt,className:cn("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",_e),...rt})}));PopoverContent.displayName=Content2$1.displayName;const FormDatePicker=({classContent:_e,name:et,form:tt,addDay:rt=365,subDay:it=365})=>jsxRuntimeExports.jsx(FormField,{control:tt.control,name:et,render:({field:st})=>jsxRuntimeExports.jsxs(FormItem,{className:cn(" relative",_e),children:[jsxRuntimeExports.jsxs(Popover,{children:[jsxRuntimeExports.jsx(PopoverTrigger,{asChild:!0,children:jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsxs(Button$1,{variant:"outline",className:cn("w-full pl-3 text-left font-normal",!st.value&&"text-muted-foreground"),children:[st.value?format(st.value,"PPP"):jsxRuntimeExports.jsx("span",{children:"Pick a date"}),jsxRuntimeExports.jsx(Calendar$1,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),jsxRuntimeExports.jsx(FormLabel,{className:"absolute font-normal bg-white blur-10 w-fit px-2 -top-5 py-1 rounded left-3 peer-focus:font-semibold",children:formatLabel(et)}),jsxRuntimeExports.jsx(PopoverContent,{className:"w-auto p-0",align:"start",children:jsxRuntimeExports.jsx(Calendar,{mode:"single",selected:st.value,onSelect:st.onChange,disabled:ut=>ut>new Date(addDays(new Date,rt))||ut<new Date("2024-01-01")||ut<new Date(subDays(new Date,it)),initialFocus:!0})})]}),jsxRuntimeExports.jsx(FormDescription,{}),jsxRuntimeExports.jsx(FormMessage,{})]})});function useDebounce(_e,et=500){const[tt,rt]=reactExports.useState(_e);return reactExports.useEffect(()=>{const it=setTimeout(()=>{rt(_e)},et);return()=>{clearTimeout(it)}},[_e,et]),tt}const GOONG_API="ifBTELKALjBVkD41bM2bh5Kly5wXr0rI5M3ideAM",BASE_SEARCH="https://rsapi.goong.io/Place/AutoComplete",BASE_DIRECTION="https://rsapi.goong.io/Direction",BASE_GEOCODING="https://rsapi.goong.io/geocode",searchAddress=async({input:_e})=>{try{const et=await axios.get(`${BASE_SEARCH}?api_key=${GOONG_API}&input=${_e}`);return console.log(_e),et.data}catch(et){throw et}},getLocationByPlaceId=async({placeId:_e})=>{try{return(await axios.get(`${BASE_GEOCODING}?api_key=${GOONG_API}&place_id=${_e}`)).data}catch(et){throw et}},getDirection=async({source:_e,destination:et})=>{try{return(await axios.get(`${BASE_DIRECTION}?api_key=${GOONG_API}&origin=${_e==null?void 0:_e.lat},${_e.lng}&destination=${et==null?void 0:et.lat},${et==null?void 0:et.lng}`)).data}catch(tt){throw tt}},SearchInput=({classContent:_e,name:et,type:tt="text",placeholder:rt,form:it,autoFocus:st=!1,setPlaceId:ut})=>{const ht=it.watch(et),at=useDebounce(ht,500),[gt,bt]=reactExports.useState(!0),[wt,St]=reactExports.useState(null),kt=async()=>{const It=await searchAddress({input:at});St(It.predictions)};reactExports.useEffect(()=>{gt&&at&&kt()},[at,gt,kt]),reactExports.useEffect(()=>{bt(!0)},[at]);const Rt=(It,Dt)=>{it.setValue(et,It),St(null),bt(!1),ut(Dt)};return jsxRuntimeExports.jsxs("div",{className:cn("relative",_e),children:[jsxRuntimeExports.jsx(FormInput,{name:et,form:it,placeholder:rt,autoFocus:st,type:tt}),jsxRuntimeExports.jsxs("div",{className:cn("absolute bg-slate-50 rounded-sm z-20 p-2 transform -translate-y-2 w-full  ",wt===null&&"hidden"),children:[wt&&(wt==null?void 0:wt.length)>0&&(wt==null?void 0:wt.map((It,Dt)=>jsxRuntimeExports.jsx("div",{className:cn("text-sm py-1 px-2 hover:bg-slate-100 rounded"),onClick:()=>Rt(It.description,It.place_id),children:It.description},Dt))),wt&&(wt==null?void 0:wt.length)===0&&jsxRuntimeExports.jsx("div",{children:"Not found any where"})]})]})};var DIALOG_NAME="Dialog",[createDialogContext,createDialogScope]=createContextScope(DIALOG_NAME),[DialogProvider,useDialogContext]=createDialogContext(DIALOG_NAME),Dialog=_e=>{const{__scopeDialog:et,children:tt,open:rt,defaultOpen:it,onOpenChange:st,modal:ut=!0}=_e,ht=reactExports.useRef(null),at=reactExports.useRef(null),[gt=!1,bt]=useControllableState({prop:rt,defaultProp:it,onChange:st});return jsxRuntimeExports.jsx(DialogProvider,{scope:et,triggerRef:ht,contentRef:at,contentId:useId$1(),titleId:useId$1(),descriptionId:useId$1(),open:gt,onOpenChange:bt,onOpenToggle:reactExports.useCallback(()=>bt(wt=>!wt),[bt]),modal:ut,children:tt})};Dialog.displayName=DIALOG_NAME;var TRIGGER_NAME$1="DialogTrigger",DialogTrigger=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,...rt}=_e,it=useDialogContext(TRIGGER_NAME$1,tt),st=useComposedRefs(et,it.triggerRef);return jsxRuntimeExports.jsx(Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":it.open,"aria-controls":it.contentId,"data-state":getState(it.open),...rt,ref:st,onClick:composeEventHandlers(_e.onClick,it.onOpenToggle)})});DialogTrigger.displayName=TRIGGER_NAME$1;var PORTAL_NAME$1="DialogPortal",[PortalProvider,usePortalContext]=createDialogContext(PORTAL_NAME$1,{forceMount:void 0}),DialogPortal=_e=>{const{__scopeDialog:et,forceMount:tt,children:rt,container:it}=_e,st=useDialogContext(PORTAL_NAME$1,et);return jsxRuntimeExports.jsx(PortalProvider,{scope:et,forceMount:tt,children:reactExports.Children.map(rt,ut=>jsxRuntimeExports.jsx(Presence,{present:tt||st.open,children:jsxRuntimeExports.jsx(Portal$4,{asChild:!0,container:it,children:ut})}))})};DialogPortal.displayName=PORTAL_NAME$1;var OVERLAY_NAME$1="DialogOverlay",DialogOverlay=reactExports.forwardRef((_e,et)=>{const tt=usePortalContext(OVERLAY_NAME$1,_e.__scopeDialog),{forceMount:rt=tt.forceMount,...it}=_e,st=useDialogContext(OVERLAY_NAME$1,_e.__scopeDialog);return st.modal?jsxRuntimeExports.jsx(Presence,{present:rt||st.open,children:jsxRuntimeExports.jsx(DialogOverlayImpl,{...it,ref:et})}):null});DialogOverlay.displayName=OVERLAY_NAME$1;var DialogOverlayImpl=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,...rt}=_e,it=useDialogContext(OVERLAY_NAME$1,tt);return jsxRuntimeExports.jsx(ReactRemoveScroll,{as:Slot,allowPinchZoom:!0,shards:[it.contentRef],children:jsxRuntimeExports.jsx(Primitive.div,{"data-state":getState(it.open),...rt,ref:et,style:{pointerEvents:"auto",...rt.style}})})}),CONTENT_NAME$1="DialogContent",DialogContent=reactExports.forwardRef((_e,et)=>{const tt=usePortalContext(CONTENT_NAME$1,_e.__scopeDialog),{forceMount:rt=tt.forceMount,...it}=_e,st=useDialogContext(CONTENT_NAME$1,_e.__scopeDialog);return jsxRuntimeExports.jsx(Presence,{present:rt||st.open,children:st.modal?jsxRuntimeExports.jsx(DialogContentModal,{...it,ref:et}):jsxRuntimeExports.jsx(DialogContentNonModal,{...it,ref:et})})});DialogContent.displayName=CONTENT_NAME$1;var DialogContentModal=reactExports.forwardRef((_e,et)=>{const tt=useDialogContext(CONTENT_NAME$1,_e.__scopeDialog),rt=reactExports.useRef(null),it=useComposedRefs(et,tt.contentRef,rt);return reactExports.useEffect(()=>{const st=rt.current;if(st)return hideOthers(st)},[]),jsxRuntimeExports.jsx(DialogContentImpl,{..._e,ref:it,trapFocus:tt.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:composeEventHandlers(_e.onCloseAutoFocus,st=>{var ut;st.preventDefault(),(ut=tt.triggerRef.current)==null||ut.focus()}),onPointerDownOutside:composeEventHandlers(_e.onPointerDownOutside,st=>{const ut=st.detail.originalEvent,ht=ut.button===0&&ut.ctrlKey===!0;(ut.button===2||ht)&&st.preventDefault()}),onFocusOutside:composeEventHandlers(_e.onFocusOutside,st=>st.preventDefault())})}),DialogContentNonModal=reactExports.forwardRef((_e,et)=>{const tt=useDialogContext(CONTENT_NAME$1,_e.__scopeDialog),rt=reactExports.useRef(!1),it=reactExports.useRef(!1);return jsxRuntimeExports.jsx(DialogContentImpl,{..._e,ref:et,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:st=>{var ut,ht;(ut=_e.onCloseAutoFocus)==null||ut.call(_e,st),st.defaultPrevented||(rt.current||(ht=tt.triggerRef.current)==null||ht.focus(),st.preventDefault()),rt.current=!1,it.current=!1},onInteractOutside:st=>{var at,gt;(at=_e.onInteractOutside)==null||at.call(_e,st),st.defaultPrevented||(rt.current=!0,st.detail.originalEvent.type==="pointerdown"&&(it.current=!0));const ut=st.target;((gt=tt.triggerRef.current)==null?void 0:gt.contains(ut))&&st.preventDefault(),st.detail.originalEvent.type==="focusin"&&it.current&&st.preventDefault()}})}),DialogContentImpl=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,trapFocus:rt,onOpenAutoFocus:it,onCloseAutoFocus:st,...ut}=_e,ht=useDialogContext(CONTENT_NAME$1,tt),at=reactExports.useRef(null),gt=useComposedRefs(et,at);return useFocusGuards(),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(FocusScope,{asChild:!0,loop:!0,trapped:rt,onMountAutoFocus:it,onUnmountAutoFocus:st,children:jsxRuntimeExports.jsx(DismissableLayer,{role:"dialog",id:ht.contentId,"aria-describedby":ht.descriptionId,"aria-labelledby":ht.titleId,"data-state":getState(ht.open),...ut,ref:gt,onDismiss:()=>ht.onOpenChange(!1)})}),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(TitleWarning,{titleId:ht.titleId}),jsxRuntimeExports.jsx(DescriptionWarning$1,{contentRef:at,descriptionId:ht.descriptionId})]})]})}),TITLE_NAME$1="DialogTitle",DialogTitle=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,...rt}=_e,it=useDialogContext(TITLE_NAME$1,tt);return jsxRuntimeExports.jsx(Primitive.h2,{id:it.titleId,...rt,ref:et})});DialogTitle.displayName=TITLE_NAME$1;var DESCRIPTION_NAME$1="DialogDescription",DialogDescription=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,...rt}=_e,it=useDialogContext(DESCRIPTION_NAME$1,tt);return jsxRuntimeExports.jsx(Primitive.p,{id:it.descriptionId,...rt,ref:et})});DialogDescription.displayName=DESCRIPTION_NAME$1;var CLOSE_NAME="DialogClose",DialogClose=reactExports.forwardRef((_e,et)=>{const{__scopeDialog:tt,...rt}=_e,it=useDialogContext(CLOSE_NAME,tt);return jsxRuntimeExports.jsx(Primitive.button,{type:"button",...rt,ref:et,onClick:composeEventHandlers(_e.onClick,()=>it.onOpenChange(!1))})});DialogClose.displayName=CLOSE_NAME;function getState(_e){return _e?"open":"closed"}var TITLE_WARNING_NAME="DialogTitleWarning",[WarningProvider,useWarningContext]=createContext2(TITLE_WARNING_NAME,{contentName:CONTENT_NAME$1,titleName:TITLE_NAME$1,docsSlug:"dialog"}),TitleWarning=({titleId:_e})=>{const et=useWarningContext(TITLE_WARNING_NAME),tt=`\`${et.contentName}\` requires a \`${et.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${et.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${et.docsSlug}`;return reactExports.useEffect(()=>{_e&&(document.getElementById(_e)||console.error(tt))},[tt,_e]),null},DESCRIPTION_WARNING_NAME="DialogDescriptionWarning",DescriptionWarning$1=({contentRef:_e,descriptionId:et})=>{const rt=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${useWarningContext(DESCRIPTION_WARNING_NAME).contentName}}.`;return reactExports.useEffect(()=>{var st;const it=(st=_e.current)==null?void 0:st.getAttribute("aria-describedby");et&&it&&(document.getElementById(et)||console.warn(rt))},[rt,_e,et]),null},Root=Dialog,Trigger=DialogTrigger,Portal=DialogPortal,Overlay=DialogOverlay,Content=DialogContent,Title=DialogTitle,Description=DialogDescription,Close=DialogClose,ROOT_NAME="AlertDialog",[createAlertDialogContext,createAlertDialogScope]=createContextScope(ROOT_NAME,[createDialogScope]),useDialogScope=createDialogScope(),AlertDialog$1=_e=>{const{__scopeAlertDialog:et,...tt}=_e,rt=useDialogScope(et);return jsxRuntimeExports.jsx(Root,{...rt,...tt,modal:!0})};AlertDialog$1.displayName=ROOT_NAME;var TRIGGER_NAME="AlertDialogTrigger",AlertDialogTrigger=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,it=useDialogScope(tt);return jsxRuntimeExports.jsx(Trigger,{...it,...rt,ref:et})});AlertDialogTrigger.displayName=TRIGGER_NAME;var PORTAL_NAME="AlertDialogPortal",AlertDialogPortal$1=_e=>{const{__scopeAlertDialog:et,...tt}=_e,rt=useDialogScope(et);return jsxRuntimeExports.jsx(Portal,{...rt,...tt})};AlertDialogPortal$1.displayName=PORTAL_NAME;var OVERLAY_NAME="AlertDialogOverlay",AlertDialogOverlay$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,it=useDialogScope(tt);return jsxRuntimeExports.jsx(Overlay,{...it,...rt,ref:et})});AlertDialogOverlay$1.displayName=OVERLAY_NAME;var CONTENT_NAME="AlertDialogContent",[AlertDialogContentProvider,useAlertDialogContentContext]=createAlertDialogContext(CONTENT_NAME),AlertDialogContent$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,children:rt,...it}=_e,st=useDialogScope(tt),ut=reactExports.useRef(null),ht=useComposedRefs(et,ut),at=reactExports.useRef(null);return jsxRuntimeExports.jsx(WarningProvider,{contentName:CONTENT_NAME,titleName:TITLE_NAME,docsSlug:"alert-dialog",children:jsxRuntimeExports.jsx(AlertDialogContentProvider,{scope:tt,cancelRef:at,children:jsxRuntimeExports.jsxs(Content,{role:"alertdialog",...st,...it,ref:ht,onOpenAutoFocus:composeEventHandlers(it.onOpenAutoFocus,gt=>{var bt;gt.preventDefault(),(bt=at.current)==null||bt.focus({preventScroll:!0})}),onPointerDownOutside:gt=>gt.preventDefault(),onInteractOutside:gt=>gt.preventDefault(),children:[jsxRuntimeExports.jsx(Slottable,{children:rt}),jsxRuntimeExports.jsx(DescriptionWarning,{contentRef:ut})]})})})});AlertDialogContent$1.displayName=CONTENT_NAME;var TITLE_NAME="AlertDialogTitle",AlertDialogTitle$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,it=useDialogScope(tt);return jsxRuntimeExports.jsx(Title,{...it,...rt,ref:et})});AlertDialogTitle$1.displayName=TITLE_NAME;var DESCRIPTION_NAME="AlertDialogDescription",AlertDialogDescription$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,it=useDialogScope(tt);return jsxRuntimeExports.jsx(Description,{...it,...rt,ref:et})});AlertDialogDescription$1.displayName=DESCRIPTION_NAME;var ACTION_NAME="AlertDialogAction",AlertDialogAction$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,it=useDialogScope(tt);return jsxRuntimeExports.jsx(Close,{...it,...rt,ref:et})});AlertDialogAction$1.displayName=ACTION_NAME;var CANCEL_NAME="AlertDialogCancel",AlertDialogCancel$1=reactExports.forwardRef((_e,et)=>{const{__scopeAlertDialog:tt,...rt}=_e,{cancelRef:it}=useAlertDialogContentContext(CANCEL_NAME,tt),st=useDialogScope(tt),ut=useComposedRefs(et,it);return jsxRuntimeExports.jsx(Close,{...st,...rt,ref:ut})});AlertDialogCancel$1.displayName=CANCEL_NAME;var DescriptionWarning=({contentRef:_e})=>{const et=`\`${CONTENT_NAME}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${CONTENT_NAME}\` by passing a \`${DESCRIPTION_NAME}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${CONTENT_NAME}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return reactExports.useEffect(()=>{var rt;document.getElementById((rt=_e.current)==null?void 0:rt.getAttribute("aria-describedby"))||console.warn(et)},[et,_e]),null},Root2=AlertDialog$1,Portal2=AlertDialogPortal$1,Overlay2=AlertDialogOverlay$1,Content2=AlertDialogContent$1,Action=AlertDialogAction$1,Cancel=AlertDialogCancel$1,Title2=AlertDialogTitle$1,Description2=AlertDialogDescription$1;const AlertDialog=Root2,AlertDialogPortal=Portal2,AlertDialogOverlay=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Overlay2,{className:cn("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",_e),...et,ref:tt}));AlertDialogOverlay.displayName=Overlay2.displayName;const AlertDialogContent=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsxs(AlertDialogPortal,{children:[jsxRuntimeExports.jsx(AlertDialogOverlay,{}),jsxRuntimeExports.jsx(Content2,{ref:tt,className:cn("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",_e),...et})]}));AlertDialogContent.displayName=Content2.displayName;const AlertDialogHeader=({className:_e,...et})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col space-y-2 text-center sm:text-left",_e),...et});AlertDialogHeader.displayName="AlertDialogHeader";const AlertDialogFooter=({className:_e,...et})=>jsxRuntimeExports.jsx("div",{className:cn("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",_e),...et});AlertDialogFooter.displayName="AlertDialogFooter";const AlertDialogTitle=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Title2,{ref:tt,className:cn("text-lg font-semibold",_e),...et}));AlertDialogTitle.displayName=Title2.displayName;const AlertDialogDescription=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Description2,{ref:tt,className:cn("text-sm text-muted-foreground",_e),...et}));AlertDialogDescription.displayName=Description2.displayName;const AlertDialogAction=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Action,{ref:tt,className:cn(buttonVariants(),_e),...et}));AlertDialogAction.displayName=Action.displayName;const AlertDialogCancel=reactExports.forwardRef(({className:_e,...et},tt)=>jsxRuntimeExports.jsx(Cancel,{ref:tt,className:cn(buttonVariants({variant:"outline"}),"mt-2 sm:mt-0",_e),...et}));AlertDialogCancel.displayName=Cancel.displayName;const formatCurrency=_e=>`${new Intl.NumberFormat("vi-VN",{style:"decimal",maximumFractionDigits:0,minimumFractionDigits:0}).format(_e)} VND`,PriceDialog=({price:_e,confirmData:et,open:tt,onClose:rt,infoPriceList:it})=>{const[st,ut]=reactExports.useState(!1),ht=useNavigate(),{auth:at}=useAuth(),gt=async()=>{var wt,St;at.user||(localStorage.setItem("dataSearch",JSON.stringify(et)),ht(ROUTES.LOGIN,{state:{from:location.pathname}})),ut(!0);const bt=await createOrder({data:et,listCost:{listCost:it}});ut(!1),rt(),bt.success?(_t.success((wt=bt==null?void 0:bt.result)==null?void 0:wt.message),ht(ROUTES.MY_ORDER)):_t.error((St=bt==null?void 0:bt.result)==null?void 0:St.message)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertDialog,{open:tt,children:jsxRuntimeExports.jsxs(AlertDialogContent,{className:"max-sm:w-9/12 ",children:[jsxRuntimeExports.jsxs(AlertDialogHeader,{children:[jsxRuntimeExports.jsxs(AlertDialogTitle,{className:"flex justify-center text-orangeTheme font-bold text-2xl ",children:["COST OF YOUR ORDER"," "]}),jsxRuntimeExports.jsxs(AlertDialogDescription,{className:"text-black",children:[jsxRuntimeExports.jsxs("span",{className:"flex font-light items-center justify-start  py-1",children:["Estimated cost: ",jsxRuntimeExports.jsx("span",{className:"px-3 py-2  ml-2  font-medium",children:formatCurrency(_e)})," ",jsxRuntimeExports.jsx("span",{children:"(Recommend)"})]}),jsxRuntimeExports.jsxs("span",{className:"items-center block justify-center font-medium py-1",children:[" ","Do you want to find shipper to delivery your package?"]}),jsxRuntimeExports.jsx("span",{className:"text-xs block",children:"The cost can be higher if we can't looking for a driver properly with this package. If it has any change, we will send you an email!"})]})]}),jsxRuntimeExports.jsx(AlertDialogFooter,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-4 items-center ",children:[jsxRuntimeExports.jsx(AlertDialogCancel,{className:"hover:bg-orangeTheme/10 text-orangeTheme hover:text-orangeTheme items-center ",onClick:()=>rt(),children:"Cancel"}),jsxRuntimeExports.jsx(AlertDialogAction,{className:"bg-orangeTheme  hover:bg-orangeTheme/90 items-center ",onClick:gt,children:"Confirm"})]})})]})}),st&&jsxRuntimeExports.jsx(Loading,{})]})},SearchElement=()=>{const[_e,et]=reactExports.useState(0),[tt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1),[ut,ht]=reactExports.useState(""),[at,gt]=reactExports.useState(""),[bt,wt]=reactExports.useState({}),{auth:St}=useAuth(),kt=useForm({resolver:t(SearchProductSchema),defaultValues:{from:"",to:"",weight:"",height:"",width:"",length:"",type:"",time:new Date(Date.now())}}),[Rt,It]=reactExports.useState({}),Dt=()=>{rt(!1)},Mt=async $t=>{var wr,yr,Or,Nr,Lr,ar,hr,Qt,ir,Mr,Cr,rn,fn,Dn,Yn,eo,Gn;if(ut===""||at==="")return _t.error("Please choose a valid search product");st(!0);const jt=await getLocationByPlaceId({placeId:ut}),Nt=await getLocationByPlaceId({placeId:at}),Ut=jt.results[0].geometry.location,Ht=Nt.results[0].geometry.location,tr=(await getDirection({source:Ut,destination:Ht})).routes[0].legs[0].distance.value/1e3,mr={...$t,distance:tr,height:Number($t.height),width:Number($t.width),weight:Number($t.weight),length:Number($t.length)},vr=await getPrice({data:mr});st(!1),vr.success?(et((Lr=(wr=vr==null?void 0:vr.result)==null?void 0:wr.data)==null?void 0:Lr.vehicleCost[(Nr=(Or=(yr=vr==null?void 0:vr.result)==null?void 0:yr.data)==null?void 0:Or.vehicleTypes[0])==null?void 0:Nr.vehicleTypeId]),rt(!0),It({...mr,longFrom:Ut.lng.toString(),latFrom:Ut.lat.toString(),longTo:Ht.lng.toString(),latTo:Ht.lat.toString(),pickupTime:mr.time,email:(ar=St==null?void 0:St.user)==null?void 0:ar.email,totalAmount:(Cr=(hr=vr==null?void 0:vr.result)==null?void 0:hr.data)==null?void 0:Cr.vehicleCost[(Mr=(ir=(Qt=vr==null?void 0:vr.result)==null?void 0:Qt.data)==null?void 0:ir.vehicleTypes[0])==null?void 0:Mr.vehicleTypeId],vehicleTypeId:(Dn=(fn=(rn=vr==null?void 0:vr.result)==null?void 0:rn.data)==null?void 0:fn.vehicleTypes[0])==null?void 0:Dn.vehicleTypeId.toString()}),wt({...(eo=(Yn=vr==null?void 0:vr.result)==null?void 0:Yn.data)==null?void 0:eo.vehicleCost})):_t.error((Gn=vr==null?void 0:vr.result)==null?void 0:Gn.message)};return jsxRuntimeExports.jsxs(Form,{...kt,children:[jsxRuntimeExports.jsx("form",{onSubmit:kt.handleSubmit(Mt),className:"md:w-2/3 max-sm:w-full max-sm:mx-4 bg-white backdrop-blur rounded-md",children:jsxRuntimeExports.jsxs("div",{className:"md:w-full  grid grid-cols-6  gap-x-4 gap-y-4 border  rounded-md py-8 px-3  ",children:[jsxRuntimeExports.jsx(SearchInput,{name:"from",form:kt,placeholder:"Ex: 124 Hoang Huu Nam, Tan Phu",classContent:"md:col-span-3 max-sm:col-span-6",setPlaceId:ht,autoFocus:!0}),jsxRuntimeExports.jsx(SearchInput,{name:"to",form:kt,placeholder:"Ex: 143 Hoang Van Thu, Phu Nhuan",classContent:"col-span-3 max-sm:col-span-6",setPlaceId:gt}),jsxRuntimeExports.jsx(FormInput,{name:"width",form:kt,placeholder:"Ex: 1.2m",classContent:"col-span-2 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"length",form:kt,placeholder:"Ex: 1m",classContent:"col-span-2 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"height",form:kt,placeholder:"Ex: 2m",classContent:"col-span-2 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"weight",form:kt,placeholder:"Ex: 100kg",classContent:"col-span-2 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormSelect,{form:kt,content:["Hang kho","Hang Dong Lanh","Thuc Pham"],name:"type",trigger:"Select type of product",enableOther:!0,classContent:"col-span-2 max-sm:col-span-3"}),jsxRuntimeExports.jsx(FormDatePicker,{name:"time",form:kt,addDay:7,subDay:1,classContent:"col-span-2 max-sm:col-span-3"}),jsxRuntimeExports.jsx("div",{className:"col-span-6 flex justify-end ",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-fit hover:bg-orangeTheme/90 px-6 ",type:"submit",children:"Search"})})]})}),it&&jsxRuntimeExports.jsx(Loading,{}),tt&&jsxRuntimeExports.jsx(PriceDialog,{price:_e,confirmData:Rt,open:tt,onClose:Dt,infoPriceList:bt})]})},ServicePage=()=>jsxRuntimeExports.jsx("div",{className:" h-[600px] bg-cover py-10 flex items-center justify-center ",style:{backgroundImage:"url(https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/3_scjodd.png)"},children:jsxRuntimeExports.jsx(SearchElement,{})}),EstimatedCost=({setData:_e})=>{const[et,tt]=reactExports.useState(!1),[rt,it]=reactExports.useState(""),[st,ut]=reactExports.useState(""),ht=useForm({resolver:t(SearchProductSchema),defaultValues:{from:"",to:"",weight:"",height:"",width:"",length:"",type:"",time:new Date(Date.now())}}),at=async gt=>{var $t,jt;if(rt===""||st==="")return _t.error("Please choose a valid search product");tt(!0);const bt=await getLocationByPlaceId({placeId:rt}),wt=await getLocationByPlaceId({placeId:st}),St=bt.results[0].geometry.location,kt=wt.results[0].geometry.location,It=(await getDirection({source:St,destination:kt})).routes[0].legs[0].distance.value/1e3,Dt={...gt,distance:It,height:Number(gt.height),width:Number(gt.width),weight:Number(gt.weight),length:Number(gt.length)},Mt=await getPrice({data:Dt});tt(!1),Mt.success?_e(($t=Mt.result)==null?void 0:$t.data):_t.error((jt=Mt==null?void 0:Mt.result)==null?void 0:jt.message)};return useTranslation(),jsxRuntimeExports.jsxs(Form,{...ht,children:[jsxRuntimeExports.jsx("form",{onSubmit:ht.handleSubmit(at),className:" w-full bg-white backdrop-blur rounded-md",children:jsxRuntimeExports.jsxs("div",{className:"md:w-full  grid grid-cols-6  gap-x-4 gap-y-4  py-8 px-3  ",children:[jsxRuntimeExports.jsx(SearchInput,{name:"from",form:ht,placeholder:"Ex: 124 Hoang Huu Nam, Tan Phu",classContent:"md:col-span-6 max-sm:col-span-6",setPlaceId:it,autoFocus:!0}),jsxRuntimeExports.jsx(SearchInput,{name:"to",form:ht,placeholder:"Ex: 143 Hoang Van Thu, Phu Nhuan",classContent:"col-span-6 max-sm:col-span-6",setPlaceId:ut}),jsxRuntimeExports.jsx(FormInput,{name:"width",form:ht,placeholder:"Ex: 1.2m",classContent:"col-span-3 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"length",form:ht,placeholder:"Ex: 1m",classContent:"col-span-3 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"height",form:ht,placeholder:"Ex: 2m",classContent:"col-span-3 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"weight",form:ht,placeholder:"Ex: 100kg",classContent:"col-span-3 max-sm:col-span-3",type:"number"}),jsxRuntimeExports.jsx(FormSelect,{form:ht,content:["Hang kho","Hang Dong Lanh","Thuc Pham"],name:"type",trigger:"Select type of product",enableOther:!0,classContent:"col-span-3 max-sm:col-span-3"}),jsxRuntimeExports.jsx(FormDatePicker,{name:"time",form:ht,addDay:7,subDay:1,classContent:"col-span-3 max-sm:col-span-6"}),jsxRuntimeExports.jsx(FormSwitch,{name:"isInsurance",content:"Cargo insurance",form:ht,classContent:"md:col-span-6"}),jsxRuntimeExports.jsx(FormSwitch,{name:"isHelp",content:"Do you want to hire porters?",form:ht,classContent:"md:col-span-6 max-sm:col-span-6"}),jsxRuntimeExports.jsx("div",{className:"col-span-6 flex justify-end ",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-fit hover:bg-orangeTheme/90 px-6 ",type:"submit",children:"Estimate"})})]})}),et&&jsxRuntimeExports.jsx(Loading,{})]})},coins="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAHm0lEQVR4nO1aaWxUVRQ+0LIWEBCUfSuUAQyGmAAilkgpTGkxxAQS0B/+wcQfbvzQP/5TExLZVEAEBIU304VVAthtZgotXdIWUMGkFEGGLUixoewF+pnz5k1nOu++bbZCnJN8SZc3993vu+eec+65Q5SwhCUsYQlLWMKibfDM6Y+S9OVwZWyFK7McbrsX7oW3UZbzCGXZj+DOug23/SJc846hePZmSJSFAupDz7IB1AXFc5bBlVkCT3YrynJgCoXTAQcx7kOifDjJzmPRs2QoSX8PbvtfpkkHY89gvwDBOAWJ3qKn3VA6eypc82vDIs44mCYiH4BExdhJ4+lpNLjmrYAn+45MpHwpcPkgcO8q0LhFn7TbDhTNBPa+oE8+gBZItJyeqr3umrehndDpr4AHTWi31haFrB0onw1UvgLUTAXqpgD1k4F6G1CbBlSOBTzDgMP9gbxkM0Ks6vTYACbvzsj3EVzkW/VQu7IfqJ4GnJgMnJhkEjbg2Ehgf2+jLbGpU0VAydwtMvmji4HrRzsSf/gvcO5zC6Q1wEIUdNcT4otOIv/G+z7ybwI3azuS/6cUODUjcvJ+1E0EDvXTE+Ht+Ed7z8J7sgDe3SEunw+cmBI98sEo0QyUt5BLqfETwKWkujOrALQFyHt/jA3xYBQN0ooHVfEhXzxnhS/VLQEeNgfIN1VYW/ny0cAvfYDDzwE1E6yJoLUdJPLCQStjVkZDjvpKhXexIED+/jXg1HTzBDjt5XYNTPxAivWYUNBNLyY0YRd9DA8lR1eA4jnLZPJV7wJPHgYEaPzUGoFCgRtXjLaeHYxqBYlOYBdNjJ4ArszSwN5XrOVPazmeVz8vST1Zq17AMKoT/JWjgxZFTv7Q7AHtpzoudZt/A+56gd+XRCeIMY7HwAt8nvAITnonMgFK0pera3m7/gTrJwE144HyUYBrCPDrwI57PxR7evgEcg8Djo/xeYuuCDYgP9m8CBLlhC+AK2OrSgCu7bUmxyT0yJoFB7vKcdrv4SyiPHtnO+HSd4Sb2zTeK9FtOMgWpgCZ5SoB+GCjtTLRIO/Hwb76QjsINzYTGlb7cGVHCrA/RWu8+rCyA1xZl1QC8KlO6Po2wNklegJwvaAlwPEx8sr7yTMubOrmm4N2kPzIugDurBaVAHyk1VyZodEhzxmjSmcL1KbJbh8swLlvkgIZZ7fwINWEbdTXogDZj1QC8HleL0ixCM4IyXOfQDfQ2tC4tqMAZ9d26eAhGuOvjEwAt93nZkapqmw44AhjO3B011t5BW11tg7kVQIwOIao33Emsi1QNNNEmlJQ+qJ1AUyQZzyuSVMJ0L4F/KhOFb9jJ71kQQC7t4MA3MMzcs9IBOBJmxj7vme0SoALm7qrn93bM7JgCL60CO3ecg/PjABH+lsX4OgIU2PfOjRUJcCVnwRZo0jYbs8zL0DRa9/LlxbBfXtuYJoRYF8v6wIUDzY19jWpn0qAGwUD1c9WjBK956R5ASTKUkfpZF/RYzRR0eHHCAf7mQqA575NUglwt2Sk+vkqQRyQ6IZ5AQqoj3xdFToIH0j0JioXRSQ+/VWOATzDxbmaKzkDAW4XDldngHVd0VY7UdxDUAvwwLQAbPJdnWqivY09gLeK/3neDtwNChXJPQQoSLYUA7xbeqkEuPqzRtkcFQGcZBe6q5EX+AuSijHG3sJj8QnSaPWLRqjIy+5frDGX6gi3QHtLjA8ToQNx354VNhMQo4AnNRNxfmOyivzfm3tofy7SIOg3vqUVegE3KuMkALu5aPU5JlhsxJhPg8EGBx0Rp65BMSfPKU5E/tJ2g1gkKoQk+pDCMeyk8UqvTT1o4fOxI79nkJB847quaD2uUzlWjxOnWidNCUsANjhpqWYO5+0gSkUR7Hktt2e0HDaoSKNxGBIZJPpSt5VlJjuYiPaigOdH0x4Dj+PMI5qfRJ9QpAbOCnxFrVfR7eut5HQTFWNQhccBzbu1pyZxxnWnQSnOp1XxzXJTVG+P4KDPTJ3vuYHJPTw+RfLk6m0yWT7S8qmODzZc24vKW9XKi+r9YOi1xJz0QdTIh6THZkMhgrq3oZ0cM+CA13LEYM+zuAc0+4F1KKAkioUhl1IhUaEe+eDurVVc3p6C1opU4z2vdW8YSVvcisFBi7nKEq18OMS5wtMtcvypThztg2+HsileBl/ZvAAS5UKiezyJ0O6tHs6uIVzdSLgrdfc1M7iU5XqeS24G/8x/4+JL3O3pSD7e3yIJNvxAvbGL5p9fT+vOrqHChtXU2LCamhtWU2vD1/S4cQ21XVhPuLLBt0Xu7iC0ScaxxCRuxXXlwzHkUprwkBU56uCgCfQsGDyUzE1KOUdHSlyiG5zqYhbtY2lK52klJDodBvk/uMJ75r9p7jc+rMhe4etEnYRENyHRQxk+T+FMkyc/s4smt38wYQlLWGdbDyIaQERDiWgsEU0iomlENIuIXieidCKaS0QZRLRAQY4C/+8ZyjPpymdmKWNMUsYcqryD39Xp1odI/qrqDCKaH0QmXpivvJvnkBJv8i8TyZVWzlMCnsvUeAow9f8uAClu15lbILMztwAJTCsIvhoSBBlaQdD/f38Q5M/GNAj+B0b5+nPnuvJrAAAAAElFTkSuQmCC",Price=({data:_e})=>{var et,tt,rt,it,st,ut;return console.log(_e),jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center justify-center gap-10",children:[jsxRuntimeExports.jsxs("div",{className:"flex border  p-4 justify-between md:w-3/4 max-sm:w-full",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-[50px] font-black text-orangeTheme",children:formatCurrency(_e==null?void 0:_e.vehicleCost[(et=_e==null?void 0:_e.vehicleTypes[0])==null?void 0:et.vehicleTypeId])}),jsxRuntimeExports.jsxs("p",{className:"text-sm",children:["Your package was recommend with truck that has type ",(tt=_e==null?void 0:_e.vehicleTypes[0])==null?void 0:tt.vehicleTypeName]})]}),jsxRuntimeExports.jsx("img",{src:coins,alt:"coins"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col text-sm w-3/4 border p-4 gap-3 max-sm:w-full ",children:[jsxRuntimeExports.jsx("p",{children:"In some case, we can't matching your package with the recommend truck so you can pay more a little bit to matching with another type truck, such as:"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{children:["Type ",(rt=_e==null?void 0:_e.vehicleTypes[1])==null?void 0:rt.vehicleTypeName," has price: "]}),jsxRuntimeExports.jsx("span",{className:"text-orangeTheme font-medium",children:formatCurrency(_e==null?void 0:_e.vehicleCost[(it=_e==null?void 0:_e.vehicleTypes[1])==null?void 0:it.vehicleTypeId])})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("span",{children:["Type ",(st=_e==null?void 0:_e.vehicleTypes[2])==null?void 0:st.vehicleTypeName," has price: "]}),jsxRuntimeExports.jsx("span",{className:"text-orangeTheme font-medium",children:formatCurrency(_e==null?void 0:_e.vehicleCost[(ut=_e==null?void 0:_e.vehicleTypes[2])==null?void 0:ut.vehicleTypeId])})]})]})]})},CostPage=()=>{const{t:_e}=useTranslation(),[et,tt]=reactExports.useState(null);return jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center gap-4 ",children:[jsxRuntimeExports.jsx("div",{style:{backgroundImage:"url(https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493308/4_vukkar.png)"},className:"bg-cover bg-center md:flex items-center w-full h-[300px] max-sm:grid max-sm:grid-cols-2",children:jsxRuntimeExports.jsx("p",{className:"flex text-start justify-center items-start px-10 md:text-[60px] max-sm:text-[50px] font-black text-white max-sm:col-span-2 max-sm:text-3xl",children:_e("costE")})}),jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2  md:w-full max-sm:col-span-1 p-2",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1 md:ml-10 border-r-2",children:[jsxRuntimeExports.jsx("p",{className:"text-[40px] font-black",children:"INFORMATION"}),jsxRuntimeExports.jsx(EstimatedCost,{setData:tt})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 md:ml-10 gap-4",children:[jsxRuntimeExports.jsx("p",{className:"text-[40px] font-black uppercase ",children:"ESTIMATION"}),et?jsxRuntimeExports.jsx(Price,{data:et}):jsxRuntimeExports.jsx("p",{className:"font-medium justify-center items-center flex",children:"Please enter your package information to estimate the cost!"}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center p-6",children:jsxRuntimeExports.jsx("img",{src:"/logoLL.png",alt:"logo",className:"w-20 h-20"})})]})]})]})},AuthorBlog=({name:_e,time:et,detail:tt})=>jsxRuntimeExports.jsxs("div",{className:cn("flex transform -translate-y-1/2 font-medium",tt?"md:w-[600px] sm: w-[400px]":" w-[400px]"),children:[jsxRuntimeExports.jsxs("div",{className:" flex gap-2 bg-orange-400 w-64  py-4 justify-center",children:[jsxRuntimeExports.jsx(User,{}),jsxRuntimeExports.jsx("p",{className:"truncate",children:_e})]}),jsxRuntimeExports.jsxs("div",{className:" flex gap-2 bg-orangeTheme w-64  py-4 justify-center",children:[jsxRuntimeExports.jsx(Clock,{}),jsxRuntimeExports.jsx("p",{children:et})]})]}),BlogCover=({blog:_e})=>jsxRuntimeExports.jsxs("div",{className:"w-[550px] p-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx("img",{src:"/blog-1.png",alt:"blog-1",className:"object-cover w-full h-[300px]  "}),jsxRuntimeExports.jsx(AuthorBlog,{name:_e.author,time:_e.postedAt})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"line-clamp-2 font-medium text-2xl",children:_e.title}),jsxRuntimeExports.jsxs("p",{className:"line-clamp-3",children:[" ",_e.content]})]}),jsxRuntimeExports.jsxs(Button$1,{className:"flex gap-2 rounded-none bg-white hover:bg-slate-50 w-fit text-black hover:scale-105",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:"Read more"}),jsxRuntimeExports.jsx(SquareArrowUpRight,{strokeWidth:1})]})]}),SubscribeNewLetter=()=>{const[_e,et]=reactExports.useState("");return console.log(_e),jsxRuntimeExports.jsxs("div",{className:"bg-orange-400 w-full h-[300px] flex px-20 flex-wrap",children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col justify-center  text-white",children:[jsxRuntimeExports.jsx("p",{className:"font-bold text-4xl ",children:"Subscribe Our Newsletter"}),jsxRuntimeExports.jsx("p",{children:"Stay in touch with us to get latest news. "})]}),jsxRuntimeExports.jsxs("div",{className:"flex ml-auto justify-center items-center",children:[jsxRuntimeExports.jsx(Input,{placeholder:"Enter your email here",className:"rounded-none w-80",onChange:tt=>et(tt.target.value)}),jsxRuntimeExports.jsx(Button$1,{className:"bg-slate-50  rounded-none text-black hover:text-white",children:"Subscribe"})]})]})},BLOG={thumbnail:"/blog-1.png",title:"Improve Workflow with Bluecollar Construction with Bluecollar Construction",author:"John Kennis",content:"Pellentesque vehicula eros neque, maximus mattis est sagittis Nulla facilisi. In sed pretium dynamically target high-payoff intellectual capital for customized technologies objectively integrate emerging core competencies before process-centric communities dramatically evisculate holistic innovation rather than client-centric data.Pellentesque vehicula eros neque, maximus mattis est sagittis Nulla facilisi. In sed pretium dynamically target high-payoff intellectual capital for customized technologies objectively integrate emerging core competencies before process-centric communities dramatically evisculate holistic innovation rather than client-centric data.",postedAt:"April 2, 2023",numberOfReviews:124,ratingAverage:4.2,category:"Petro"},BlogPage=()=>jsxRuntimeExports.jsxs("div",{className:"mt-6",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("p",{className:"font-semibold text-4xl px-20",children:"Latest posts"})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center md:gap-20  sm:gap-8 py-10",children:[jsxRuntimeExports.jsx(BlogCover,{blog:BLOG}),jsxRuntimeExports.jsx(BlogCover,{blog:BLOG})]}),jsxRuntimeExports.jsx(SubscribeNewLetter,{})]}),AboutUsPage=()=>{const{t:_e}=useTranslation();return jsxRuntimeExports.jsxs("div",{className:"bg-white mt-5 w-full grid md:grid-cols-2 max-sm:grid-cols-1  max-sm:justify-center max-sm:items-center mb-5",children:[jsxRuntimeExports.jsxs("div",{className:"relative flex justify-center items-center col-span-1 justify-self-end md:w-[550px] md:h-[450px] max-sm:w-[450px] max-sm:h-[350px] ",children:[jsxRuntimeExports.jsx("div",{className:"absolute border-4 border-orange-500  mr-20  md:w-[400px] md:h-[400px] max-sm:w-[300px] max-sm:h-[300px]"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493306/1_khzaht.png",alt:"Red truck",className:"w-60 h-42 rounded-md"})}),jsxRuntimeExports.jsx("div",{className:"relative",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493309/10_tcydwd.png",alt:"Purple truck",className:"md:w-[350px] md:h-[200px] rounded-md max-sm:w-64 max-sm:h-44 max-sm:tranform max-sm:translate-x-1/3"})}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0",children:jsxRuntimeExports.jsx("img",{src:"https://res.cloudinary.com/dtcaf7prf/image/upload/v1729493310/5_nx3apy.png",alt:"Green truck",className:"w-60 h-44 rounded-md"})})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 bg-white p-6 shadow-md rounded-lg",children:[jsxRuntimeExports.jsx("h2",{className:"text-orange-500 font-semibold text-xl mb-2",children:_e("Our story")}),jsxRuntimeExports.jsxs("h1",{className:"text-3xl font-bold mb-4 uppercase",children:[_e("About")," L&L"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:_e("AboutUsContent1")}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:_e("AboutUsContent2")}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:_e("AboutUsContent3")}),jsxRuntimeExports.jsxs("p",{className:"text-gray-600 leading-relaxed mb-4",children:[_e("AboutUsContent4")," "]}),jsxRuntimeExports.jsx("div",{className:"flex justify-end",children:jsxRuntimeExports.jsx("button",{className:"bg-orange-500 text-white font-bold py-2 px-4 rounded-md",children:_e("Read more")})})]})]})},ProfilePage=()=>{var ht,at,gt,bt,wt,St,kt,Rt;const{auth:_e}=useAuth(),[et,tt]=reactExports.useState(!1),[rt,it]=reactExports.useState(null);console.log((ht=_e==null?void 0:_e.user)==null?void 0:ht.phoneNumber);const st=useForm({resolver:t(UpdateUserInfoSchema),defaultValues:{userName:((at=_e==null?void 0:_e.user)==null?void 0:at.userName)||"",fullName:((gt=_e==null?void 0:_e.user)==null?void 0:gt.fullName)||"",city:((bt=_e==null?void 0:_e.user)==null?void 0:bt.city)||"",address:((wt=_e==null?void 0:_e.user)==null?void 0:wt.address)||"",gender:((St=_e==null?void 0:_e.user)==null?void 0:St.gender)||"",birthDate:(kt=_e==null?void 0:_e.user)!=null&&kt.birthDate?new Date(_e.user.birthDate):new Date,phoneNumber:((Rt=_e==null?void 0:_e.user)==null?void 0:Rt.phoneNumber)||"",avatar:void 0}});reactExports.useEffect(()=>{_e!=null&&_e.user&&(st.reset({userName:_e.user.userName,fullName:_e.user.fullName,city:_e.user.city,address:_e.user.address,gender:_e.user.gender,birthDate:_e.user.birthDate?new Date(_e.user.birthDate):new Date,phoneNumber:_e.user.phoneNumber,avatar:void 0}),_e.user.avatar&&it(_e.user.avatar))},[_e,st]);const ut=async It=>{var Dt,Mt;try{tt(!0);const $t=new FormData;$t.append("userName",It.userName),$t.append("fullName",It.fullName),$t.append("phoneNumber",It.phoneNumber.toString()),$t.append("city",It.city),$t.append("address",It.address),$t.append("gender",It.gender);const jt=new Date(It.birthDate).toISOString();$t.append("birthDate",jt),It.avatar&&$t.append("avatar",It.avatar);const Nt=await updateUserInformation({email:((Dt=_e==null?void 0:_e.user)==null?void 0:Dt.email)||"",data:$t});if(Nt.success&&_t.success(((Mt=Nt.result)==null?void 0:Mt.message)||"test"),It.avatar){const Ut=new FileReader;Ut.onloadend=()=>{it(Ut.result)},Ut.readAsDataURL(It.avatar)}}catch($t){console.error("Error updating user info:",$t)}finally{tt(!1)}};return et?jsxRuntimeExports.jsx(Loading,{}):_e!=null&&_e.user?jsxRuntimeExports.jsxs("div",{className:"container flex flex-col mt-6 px-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User Profile"}),jsxRuntimeExports.jsx(Form,{...st,children:jsxRuntimeExports.jsxs("form",{onSubmit:st.handleSubmit(ut),className:"w-full flex flex-col gap-y-3",children:[jsxRuntimeExports.jsx(FormInput,{name:"userName",form:st,placeholder:"User Name"}),jsxRuntimeExports.jsx(FormInput,{name:"fullName",form:st,placeholder:"Full Name"}),jsxRuntimeExports.jsx(FormInput,{name:"phoneNumber",form:st,placeholder:"Phone Number",type:"number"}),jsxRuntimeExports.jsx(FormInput,{name:"city",form:st,placeholder:"City"}),jsxRuntimeExports.jsx(FormInput,{name:"address",form:st,placeholder:"Address"}),jsxRuntimeExports.jsx(FormDatePicker,{name:"birthDate",form:st,addDay:0,subDay:365*100}),jsxRuntimeExports.jsx(FormField,{control:st.control,name:"gender",render:({field:It})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Gender"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsxs(Select,{onValueChange:Dt=>It.onChange(Dt),value:It.value||"",children:[jsxRuntimeExports.jsx(SelectTrigger,{children:jsxRuntimeExports.jsx(SelectValue,{placeholder:"Select Gender"})}),jsxRuntimeExports.jsxs(SelectContent,{children:[jsxRuntimeExports.jsx(SelectItem,{value:"Male",children:"Male"}),jsxRuntimeExports.jsx(SelectItem,{value:"Female",children:"Female"}),jsxRuntimeExports.jsx(SelectItem,{value:"Other",children:"Other"})]})]})}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-10",children:[jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(FormField,{control:st.control,name:"avatar",render:({field:It})=>jsxRuntimeExports.jsxs(FormItem,{children:[jsxRuntimeExports.jsx(FormLabel,{children:"Avatar"}),jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{type:"file",accept:"image/*",onChange:Dt=>{if(It.onChange(Dt.target.files?Dt.target.files[0]:void 0),Dt.target.files){const Mt=Dt.target.files[0],$t=new FileReader;$t.onloadend=()=>{it($t.result)},$t.readAsDataURL(Mt)}}})}),jsxRuntimeExports.jsx(FormMessage,{})]})})}),rt&&jsxRuntimeExports.jsx("div",{className:"mb-4",children:jsxRuntimeExports.jsx("img",{src:rt,alt:"Avatar Preview",className:"w-24 h-24 rounded-full object-cover"})})]}),jsxRuntimeExports.jsx(Button$1,{type:"submit",children:"Update Profile"})]})})]}):jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx(Loading,{})})},BlogContent=({blog:_e})=>jsxRuntimeExports.jsxs("div",{className:"md:mx-40 sm:mx-4 flex flex-col gap-4",children:[jsxRuntimeExports.jsx("div",{className:"bg-orangeTheme text-white text-4xl font-semibold text-start px-4 flex justify-center py-10",children:jsxRuntimeExports.jsx("p",{children:_e.title})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col  items-center",children:[jsxRuntimeExports.jsx("img",{src:_e.thumbnail,alt:"blog-image",className:"w-full object-cover"}),jsxRuntimeExports.jsx(AuthorBlog,{name:_e.author,time:_e.postedAt,detail:!0})]}),jsxRuntimeExports.jsx("div",{children:_e.content})]}),RelatedBlog=({category:_e})=>(console.log(_e),jsxRuntimeExports.jsxs("div",{className:" md:mx-36 sm:mx-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between py-6",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-semibold",children:"Related Posts"}),jsxRuntimeExports.jsx(Button$1,{className:"rounded-none bg-orangeTheme hover:bg-orangeTheme/95 px-3",children:"More Posts"})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-8",children:[jsxRuntimeExports.jsx(BlogCover,{blog:BLOG}),jsxRuntimeExports.jsx(BlogCover,{blog:BLOG})]})]})),formatReview=_e=>_e<=1?"Very Bad":_e>1&&_e<=2?"Bad":_e>2&&_e<=3?"Average":_e>3&&_e<=4?"Good":_e>4&&_e<5?"Excellent":_e===5?"Amazing":"Rating out of range",formatDate=_e=>{const et=new Date(_e);et.setDate(et.getDate()+1);const tt={year:"numeric",month:"long",day:"numeric"};return et.toLocaleDateString("vi-VN",tt)},ReviewLine=({review:_e})=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4 justify-center",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(UserAvatar,{avatar:_e.avatar})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col ",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("span",{className:"font-semibold",children:formatReview(_e.rating)}),jsxRuntimeExports.jsx(Separator$2,{orientation:"vertical"}),jsxRuntimeExports.jsx("span",{children:_e.author}),jsxRuntimeExports.jsx("span",{className:"ml-auto font-medium text-sm",children:formatDate(_e.reviewedAt)})]}),jsxRuntimeExports.jsx("p",{children:_e.content})]})]}),jsxRuntimeExports.jsx(Separator$2,{})]}),REVIEW={id:1,avatar:"https://github.com/shadcn.png",author:"Erin Septimus",reviewedAt:"2021-03-01T00:00:00.000Z",rating:5,content:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."},ReviewBlog=({blog:_e})=>jsxRuntimeExports.jsxs("div",{className:"md:mx-20 sm:mx-4",children:[jsxRuntimeExports.jsx("p",{className:"text-lg font-semibold text-center py-4",children:"Reviews"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 items-center py-4",children:[jsxRuntimeExports.jsx("p",{className:"font-black text-4xl",children:_e.ratingAverage}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"font-bold",children:formatReview(_e.ratingAverage)}),jsxRuntimeExports.jsxs("p",{children:[_e.numberOfReviews," reviewers"]})]})]}),jsxRuntimeExports.jsx(Separator$2,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[jsxRuntimeExports.jsx(ReviewLine,{review:REVIEW}),jsxRuntimeExports.jsx(ReviewLine,{review:REVIEW}),jsxRuntimeExports.jsx(ReviewLine,{review:REVIEW}),jsxRuntimeExports.jsx(ReviewLine,{review:REVIEW})]})]}),CommentLine=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:mx-20 sm:mx-4 ",children:[jsxRuntimeExports.jsx("p",{className:"bg-black text-white w-fit mr-auto px-2 py-1 font-medium text-sm",children:"Comment"}),jsxRuntimeExports.jsx(Input,{placeholder:"Your comment here",className:"w-full rounded-none"}),jsxRuntimeExports.jsx(Button$1,{className:"rounded-none bg-orangeTheme text-white hover:bg-orangeTheme/95 w-fit ml-auto",children:"Send"})]}),BlogDetailPage=()=>jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-6",children:[jsxRuntimeExports.jsx(BlogContent,{blog:BLOG}),jsxRuntimeExports.jsx(RelatedBlog,{category:BLOG.category}),jsxRuntimeExports.jsx(SubscribeNewLetter,{}),jsxRuntimeExports.jsx(CommentLine,{}),jsxRuntimeExports.jsx(ReviewBlog,{blog:BLOG})]}),TableOrder=({data:_e})=>{const et=useNavigate();return jsxRuntimeExports.jsxs(Table$1,{children:[jsxRuntimeExports.jsx(TableCaption,{className:"font-medium text-lg",children:"A list of your orders."}),jsxRuntimeExports.jsx(TableHeader,{children:jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableHead,{className:"w-[200px]",children:"Order"}),jsxRuntimeExports.jsx(TableHead,{children:"Status"}),jsxRuntimeExports.jsx(TableHead,{children:"Publish Date"}),jsxRuntimeExports.jsx(TableHead,{className:"text-right",children:"Cost"}),jsxRuntimeExports.jsx(TableHead,{})]})}),jsxRuntimeExports.jsx(TableBody,{children:_e&&_e.length>0?_e.map((tt,rt)=>jsxRuntimeExports.jsxs(TableRow,{children:[jsxRuntimeExports.jsx(TableCell,{className:"font-medium ",children:tt.orderCode}),jsxRuntimeExports.jsx(TableCell,{children:tt.status}),jsxRuntimeExports.jsx(TableCell,{children:formatDate(tt.orderDate)}),jsxRuntimeExports.jsx(TableCell,{className:"text-right",children:formatCurrency(tt.totalAmount)}),jsxRuntimeExports.jsx(TableCell,{children:jsxRuntimeExports.jsx("span",{onClick:()=>et(`${ROUTES.ORDER_DETAIL}/${tt.orderId}`),children:jsxRuntimeExports.jsx(ChevronRight,{strokeWidth:1,className:"text-right font-thin cursor-pointer ml-auto"})})})]},rt)):jsxRuntimeExports.jsx(TableRow,{className:"flex text-center w-full mx-auto py-2 text-orangeTheme font-medium",children:"You don't have any order"})})]})},MyOrderPage=()=>{const[_e,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState([]),it=async()=>{var ut,ht;et(!0);const st=await getAllOrderByUserId();et(!1),st.success?rt((ut=st==null?void 0:st.result)==null?void 0:ut.data):_t.error((ht=st==null?void 0:st.result)==null?void 0:ht.message)};return reactExports.useEffect(()=>{it()},[]),_e?jsxRuntimeExports.jsx(Loading,{}):jsxRuntimeExports.jsx("div",{className:"items-center justify-center flex mt-20 w-2/3 mx-auto ",children:jsxRuntimeExports.jsx(TableOrder,{data:tt})})},processState=[{id:1,title:"Processing"},{id:2,title:"In Process"},{id:3,title:"Paid"},{id:4,title:"In Route"},{id:5,title:"Received"},{id:6,title:"Delivered"},{id:7,title:"Completed"}];var processStateEnum=(_e=>(_e[_e.Processing=1]="Processing",_e[_e.InProcess=2]="InProcess",_e[_e.Paid=3]="Paid",_e[_e.InRoute=4]="InRoute",_e[_e.Received=5]="Received",_e[_e.Delivered=6]="Delivered",_e[_e.Completed=7]="Completed",_e))(processStateEnum||{});const ProcessState=({title:_e,id:et,length:tt,status:rt})=>jsxRuntimeExports.jsx("div",{className:"col-span-1 relative flex flex-col h-20 justify-center items-center",children:jsxRuntimeExports.jsxs("div",{className:"absolute w-full z-20 flex flex-col justify-center items-center",children:[jsxRuntimeExports.jsx("p",{className:"sm:transform sm:translate-x-20 sm:translate-y-10 md:transform-none",children:_e}),jsxRuntimeExports.jsx("div",{className:"flex w-full mt-2 justify-center items-center",children:jsxRuntimeExports.jsx("div",{className:cn("  rounded-full  w-8 h-8 p-1 flex justify-center items-center",rt>=et&&" bg-orangeTheme",rt<et&&"bg-darkTheme "),children:rt>=et&&jsxRuntimeExports.jsx(Check,{className:"text-white",size:26})})}),et<tt&&jsxRuntimeExports.jsx("span",{className:cn("md:w-4/5 z-0 md:h-1 transform md:translate-x-[62%] md:-translate-y-4 sm:w-1 sm:h-12 ",rt>et?"bg-orangeTheme":"bg-slate-300")})]})}),ProcessHeader=({status:_e})=>jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-7 bg-slate-50 mx-10 rounded p-2 my-4",children:processState.map((et,tt)=>jsxRuntimeExports.jsx(ProcessState,{title:et.title,id:et.id,length:processState.length,status:_e},tt))}),TruckInformation=({driver:_e})=>jsxRuntimeExports.jsx("div",{className:"flex  flex-col p-4",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1  max-sm:col-span-2 px-4 gap-4 flex justify-center items-center",children:[jsxRuntimeExports.jsx("img",{src:generateImage((_e==null?void 0:_e.fullName)??""),alt:"",className:"w-20 h-20 rounded-md"}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 px-4 gap-4  max-sm:col-span-2",children:[jsxRuntimeExports.jsx("p",{className:"col-span-2",children:_e==null?void 0:_e.fullName}),jsxRuntimeExports.jsx("p",{className:"col-span-2",children:_e==null?void 0:_e.phone})]})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-xl",children:"Ventom car"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 border border-1 border-orangeTheme px-3 py-1 rounded-full",children:[jsxRuntimeExports.jsx(Star,{className:"text-orangeTheme ",size:24,strokeWidth:"2"}),jsxRuntimeExports.jsx("p",{className:"font-semibold",children:"4.5"})]})]}),jsxRuntimeExports.jsx(Separator$2,{className:"my-3"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 ",children:[jsxRuntimeExports.jsx("p",{className:"col-span-1 font-medium",children:"Payload Capacity"}),jsxRuntimeExports.jsx("p",{className:"col-span-2",children:"3,000 pounds"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3",children:[jsxRuntimeExports.jsx("p",{className:"col-span-1  font-medium",children:"Truck Dimensions"}),jsxRuntimeExports.jsx("p",{className:"col-span-2",children:"130cm x 170cm x 130cm"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3",children:[jsxRuntimeExports.jsx("p",{className:"col-span-1  font-medium",children:"Type of truck"}),jsxRuntimeExports.jsx("p",{className:"col-span-2",children:"Box truck"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3",children:[jsxRuntimeExports.jsx("p",{className:"col-span-1  font-medium",children:"Number of plate"}),jsxRuntimeExports.jsx("p",{className:"col-span-2",children:"69GD-367328"})]})]})]})]})}),ProductInformation=({order:_e,setIsUpdatedOrder:et})=>{var at,gt,bt,wt,St,kt,Rt,It;const[tt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1),ut=useForm({resolver:t(UpdateProductSchema),defaultValues:{productName:"",productDescription:"",image:void 0}});ut.setValue("orderDetailId",(_e==null?void 0:_e.orderDetailId.toString())??"0");const ht=async Dt=>{var jt,Nt;rt(!0);const Mt=new FormData;Mt.append("productName",Dt.productName),Mt.append("productDescription",Dt.productDescription),Mt.append("orderDetailId",Dt.orderDetailId),Dt.image&&Mt.append("image",Dt.image);const $t=await updateProductInformation({data:Mt});rt(!1),$t.success?(st(!0),_t.success((jt=$t==null?void 0:$t.result)==null?void 0:jt.message),et()):_t.error((Nt=$t==null?void 0:$t.result)==null?void 0:Nt.message)};return reactExports.useEffect(()=>{},[ut.formState.isSubmitting]),jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6 px-4",children:[tt&&jsxRuntimeExports.jsx(Loading,{}),!it&&((at=_e==null?void 0:_e.productInfo)==null?void 0:at.productName)===null?jsxRuntimeExports.jsxs("div",{className:"flex flex-col mt-6 px-4",children:[jsxRuntimeExports.jsx(Form,{...ut,children:jsxRuntimeExports.jsx("form",{onSubmit:ut.handleSubmit(ht),className:"w-full flex flex-col gap-y-3",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:[jsxRuntimeExports.jsx(FormInput,{name:"productName",form:ut,placeholder:"Ex: Item name",classContent:"col-span-1 max-sm:col-span-2",autoFocus:!0}),jsxRuntimeExports.jsx(FormInput,{name:"productDescription",form:ut,placeholder:"Ex: Item description",classContent:"col-span-1 max-sm:col-span-2"}),jsxRuntimeExports.jsx(FormField,{control:ut.control,name:"image",render:({field:Dt})=>jsxRuntimeExports.jsxs(FormItem,{className:cn("relative col-span-1 max-sm:col-span-2"),children:[jsxRuntimeExports.jsx(FormControl,{children:jsxRuntimeExports.jsx(Input,{className:"bg-white",type:"file",accept:".jpg, .jpeg, .png",onChange:Mt=>Dt.onChange(Mt.target.files?Mt.target.files[0]:null)})}),jsxRuntimeExports.jsx(FormLabel,{className:"absolute font-normal bg-white blur-10 w-fit px-2 -top-5 py-1 rounded left-3 peer-focus:font-semibold",children:formatLabel("image")}),jsxRuntimeExports.jsx(FormDescription,{}),jsxRuntimeExports.jsx(FormMessage,{})]})}),jsxRuntimeExports.jsx("div",{className:"ml-auto col-span-2",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-fit hover:bg-orangeTheme/90",type:"submit",disabled:ut.formState.isSubmitting,children:"Update"})})]})})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 col-span-1 max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium max-sm:col-span-2",children:"Total Weight:"}),jsxRuntimeExports.jsx("p",{className:"col-span-3 max-sm:col-span-2",children:(gt=_e==null?void 0:_e.productInfo)==null?void 0:gt.weight})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 col-span-1 max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium max-sm:col-span-2",children:"Total dimension:"}),jsxRuntimeExports.jsxs("p",{className:"col-span-3 max-sm:col-span-2",children:[(bt=_e==null?void 0:_e.productInfo)==null?void 0:bt.totalDismension," (m)"]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4 pl-4",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1 max-sm:col-span-2",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 ",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium  max-sm:col-span-2",children:"Product name"}),jsxRuntimeExports.jsx("p",{className:"col-span-3  max-sm:col-span-2",children:(wt=_e==null?void 0:_e.productInfo)==null?void 0:wt.productName})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4  max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium  max-sm:col-span-2",children:"Product description"}),jsxRuntimeExports.jsx("p",{className:"col-span-3  max-sm:col-span-2",children:(St=_e==null?void 0:_e.productInfo)==null?void 0:St.productDescription})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4  max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium  max-sm:col-span-2",children:"Total Weight:"}),jsxRuntimeExports.jsx("p",{className:"col-span-3  max-sm:col-span-2",children:(kt=_e==null?void 0:_e.productInfo)==null?void 0:kt.weight})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4  max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1 font-medium max-sm:col-span-2",children:"Total dimension:"}),jsxRuntimeExports.jsxs("p",{className:"col-span-3  max-sm:col-span-2",children:[(Rt=_e==null?void 0:_e.productInfo)==null?void 0:Rt.totalDismension," (m)"]})]})]}),jsxRuntimeExports.jsx("div",{className:"col-span-1  max-sm:col-span-2",children:jsxRuntimeExports.jsx("img",{src:(It=_e==null?void 0:_e.productInfo)==null?void 0:It.image,loading:"lazy",alt:"",className:"col-span-1  max-sm:col-span-2 w-1/2 h-40 object-cover"})})]})]})},UpdateCustomerInformation=({order:_e,setIsUpdatedOrder:et})=>{var at,gt,bt,wt,St,kt;const[tt,rt]=reactExports.useState(!1),[it,st]=reactExports.useState(!1),ut=useForm({resolver:t(UpdateInfoSchema),defaultValues:{receiverPhone:"",receiverName:"",senderName:(at=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:at.senderName,senderPhone:""}});ut.setValue("orderDetailId",(_e==null?void 0:_e.orderDetailId.toString())??"0"),ut.setValue("deliveryInfoId",(_e==null?void 0:_e.deliveryInfoId.toString())??"0");const ht=async Rt=>{var Dt,Mt;rt(!0);const It=await updateDeliveryInformation({data:Rt});rt(!1),It.success?(st(!0),_t.success((Dt=It==null?void 0:It.result)==null?void 0:Dt.message),et()):_t.error((Mt=It==null?void 0:It.result)==null?void 0:Mt.message)};return reactExports.useEffect(()=>{},[ut.formState.isSubmitting]),jsxRuntimeExports.jsxs("div",{className:"mt-6 mx-4",children:[tt&&jsxRuntimeExports.jsx(Loading,{}),!it&&((gt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:gt.receiverName)===null?jsxRuntimeExports.jsx(Form,{...ut,children:jsxRuntimeExports.jsx("form",{onSubmit:ut.handleSubmit(ht),children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-y-4 gap-x-8",children:[jsxRuntimeExports.jsx(FormInput,{name:"senderName",form:ut,placeholder:"Ex: Tran Van A",classContent:"col-span-1  max-sm:col-span-2"}),jsxRuntimeExports.jsx(FormInput,{name:"receiverName",form:ut,placeholder:"Ex: Tran Van A",classContent:"col-span-1  max-sm:col-span-2"}),jsxRuntimeExports.jsx(FormInput,{name:"senderPhone",form:ut,placeholder:"Ex: 0823 645 654",classContent:"col-span-1  max-sm:col-span-2"}),jsxRuntimeExports.jsx(FormInput,{name:"receiverPhone",form:ut,placeholder:"Ex: 0823 645 654",classContent:"col-span-1  max-sm:col-span-2"}),jsxRuntimeExports.jsx("div",{className:"ml-auto col-span-2",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-fit hover:bg-orangeTheme/90",type:"submit",disabled:ut.formState.isSubmitting,children:"Save"})})]})})}):jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 ",children:[jsxRuntimeExports.jsxs("div",{className:"col-span-1 max-sm:col-span-2 text-md",children:[jsxRuntimeExports.jsx("p",{className:"font-medium ",children:"Sender"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1  font-medium",children:"Name:"}),jsxRuntimeExports.jsx("p",{className:"col-span-4",children:(bt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:bt.senderName})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1  font-medium",children:"Phone Number:"}),jsxRuntimeExports.jsx("p",{className:"col-span-4",children:(wt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:wt.senderPhone})]})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 max-sm:col-span-2 text-md",children:[jsxRuntimeExports.jsx("p",{className:"font-medium",children:"Receiver"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1  font-medium",children:"Name:"}),jsxRuntimeExports.jsx("p",{className:"col-span-4",children:(St=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:St.receiverName})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-5",children:[jsxRuntimeExports.jsx("span",{className:"col-span-1  font-medium",children:"Phone Number:"}),jsxRuntimeExports.jsx("p",{className:"col-span-4",children:(kt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:kt.receiverPhone})]})]})]})]})},WaitingConfirm=()=>jsxRuntimeExports.jsx("div",{className:"items-center justify-center  flex",children:jsxRuntimeExports.jsx("p",{className:"text-lg font-medium",children:" Waiting confirm from shipper..."})}),scriptRel="modulepreload",assetsURL=function(_e){return"/"+_e},seen={},__vitePreload=function _e(et,tt,rt){let it=Promise.resolve();if(tt&&tt.length>0){document.getElementsByTagName("link");const ut=document.querySelector("meta[property=csp-nonce]"),ht=(ut==null?void 0:ut.nonce)||(ut==null?void 0:ut.getAttribute("nonce"));it=Promise.allSettled(tt.map(at=>{if(at=assetsURL(at),at in seen)return;seen[at]=!0;const gt=at.endsWith(".css"),bt=gt?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${at}"]${bt}`))return;const wt=document.createElement("link");if(wt.rel=gt?"stylesheet":scriptRel,gt||(wt.as="script"),wt.crossOrigin="",wt.href=at,ht&&wt.setAttribute("nonce",ht),document.head.appendChild(wt),gt)return new Promise((St,kt)=>{wt.addEventListener("load",St),wt.addEventListener("error",()=>kt(new Error(`Unable to preload CSS for ${at}`)))})}))}function st(ut){const ht=new Event("vite:preloadError",{cancelable:!0});if(ht.payload=ut,window.dispatchEvent(ht),!ht.defaultPrevented)throw ut}return it.then(ut=>{for(const ht of ut||[])ht.status==="rejected"&&st(ht.reason);return et().catch(st)})},MountedMapsContext=reactExports.createContext(null);function arePointsEqual(_e,et){const tt=Array.isArray(_e)?_e[0]:_e?_e.x:0,rt=Array.isArray(_e)?_e[1]:_e?_e.y:0,it=Array.isArray(et)?et[0]:et?et.x:0,st=Array.isArray(et)?et[1]:et?et.y:0;return tt===it&&rt===st}function deepEqual(_e,et){if(_e===et)return!0;if(!_e||!et)return!1;if(Array.isArray(_e)){if(!Array.isArray(et)||_e.length!==et.length)return!1;for(let tt=0;tt<_e.length;tt++)if(!deepEqual(_e[tt],et[tt]))return!1;return!0}else if(Array.isArray(et))return!1;if(typeof _e=="object"&&typeof et=="object"){const tt=Object.keys(_e),rt=Object.keys(et);if(tt.length!==rt.length)return!1;for(const it of tt)if(!et.hasOwnProperty(it)||!deepEqual(_e[it],et[it]))return!1;return!0}return!1}function cloneTransform(_e){const et=_e.clone();return et.pixelsToGLUnits=_e.pixelsToGLUnits,et}function syncProjection(_e,et){if(!_e.getProjection)return;const tt=_e.getProjection(),rt=et.getProjection();deepEqual(tt,rt)||et.setProjection(tt)}function transformToViewState(_e){return{longitude:_e.center.lng,latitude:_e.center.lat,zoom:_e.zoom,pitch:_e.pitch,bearing:_e.bearing,padding:_e.padding}}function applyViewStateToTransform(_e,et){const tt=et.viewState||et;let rt=!1;if("longitude"in tt&&"latitude"in tt){const it=_e.center;_e.center=new it.constructor(tt.longitude,tt.latitude),rt=rt||it!==_e.center}if("zoom"in tt){const it=_e.zoom;_e.zoom=tt.zoom,rt=rt||it!==_e.zoom}if("bearing"in tt){const it=_e.bearing;_e.bearing=tt.bearing,rt=rt||it!==_e.bearing}if("pitch"in tt){const it=_e.pitch;_e.pitch=tt.pitch,rt=rt||it!==_e.pitch}return tt.padding&&!_e.isPaddingEqual(tt.padding)&&(rt=!0,_e.padding=tt.padding),rt}const refProps=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function normalizeStyle(_e){if(!_e)return null;if(typeof _e=="string"||("toJS"in _e&&(_e=_e.toJS()),!_e.layers))return _e;const et={};for(const rt of _e.layers)et[rt.id]=rt;const tt=_e.layers.map(rt=>{let it=null;"interactive"in rt&&(it=Object.assign({},rt),delete it.interactive);const st=et[rt.ref];if(st){it=it||Object.assign({},rt),delete it.ref;for(const ut of refProps)ut in st&&(it[ut]=st[ut])}return it||rt});return{..._e,layers:tt}}var define_process_env_default={};const DEFAULT_STYLE={version:8,sources:{},layers:[]},pointerEvents={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},cameraEvents={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},otherEvents={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},settingNames=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],handlerNames=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Mapbox{constructor(et,tt,rt){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=it=>{const st=this.props[otherEvents[it.type]];st?st(it):it.type==="error"&&console.error(it.error)},this._onPointerEvent=it=>{(it.type==="mousemove"||it.type==="mouseout")&&this._updateHover(it);const st=this.props[pointerEvents[it.type]];st&&(this.props.interactiveLayerIds&&it.type!=="mouseover"&&it.type!=="mouseout"&&(it.features=this._hoveredFeatures||this._queryRenderedFeatures(it.point)),st(it),delete it.features)},this._onCameraEvent=it=>{if(!this._internalUpdate){const st=this.props[cameraEvents[it.type]];st&&st(it)}it.type in this._deferredEvents&&(this._deferredEvents[it.type]=!1)},this._MapClass=et,this.props=tt,this._initialize(rt)}get map(){return this._map}get transform(){return this._renderTransform}setProps(et){const tt=this.props;this.props=et;const rt=this._updateSettings(et,tt);rt&&this._createShadowTransform(this._map);const it=this._updateSize(et),st=this._updateViewState(et,!0);this._updateStyle(et,tt),this._updateStyleComponents(et,tt),this._updateHandlers(et,tt),(rt||it||st&&!this._map.isMoving())&&this.redraw()}static reuse(et,tt){const rt=Mapbox.savedMaps.pop();if(!rt)return null;const it=rt.map,st=it.getContainer();for(tt.className=st.className;st.childNodes.length>0;)tt.appendChild(st.childNodes[0]);it._container=tt;const ut=it._resizeObserver;ut&&(ut.disconnect(),ut.observe(tt)),rt.setProps({...et,styleDiffing:!1}),it.resize();const{initialViewState:ht}=et;return ht&&(ht.bounds?it.fitBounds(ht.bounds,{...ht.fitBoundsOptions,duration:0}):rt._updateViewState(ht,!1)),it.isStyleLoaded()?it.fire("load"):it.once("styledata",()=>it.fire("load")),it._update(),rt}_initialize(et){const{props:tt}=this,{mapStyle:rt=DEFAULT_STYLE}=tt,it={...tt,...tt.initialViewState,accessToken:tt.mapboxAccessToken||getAccessTokenFromEnv()||null,container:et,style:normalizeStyle(rt)},st=it.initialViewState||it.viewState||it;if(Object.assign(it,{center:[st.longitude||0,st.latitude||0],zoom:st.zoom||0,pitch:st.pitch||0,bearing:st.bearing||0}),tt.gl){const bt=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=bt,tt.gl)}const ut=new this._MapClass(it);st.padding&&ut.setPadding(st.padding),tt.cursor&&(ut.getCanvas().style.cursor=tt.cursor),this._createShadowTransform(ut);const ht=ut._render;ut._render=bt=>{this._inRender=!0,ht.call(ut,bt),this._inRender=!1};const at=ut._renderTaskQueue.run;ut._renderTaskQueue.run=bt=>{at.call(ut._renderTaskQueue,bt),this._onBeforeRepaint()},ut.on("render",()=>this._onAfterRepaint());const gt=ut.fire;ut.fire=this._fireEvent.bind(this,gt),ut.on("resize",()=>{this._renderTransform.resize(ut.transform.width,ut.transform.height)}),ut.on("styledata",()=>{this._updateStyleComponents(this.props,{}),syncProjection(ut.transform,this._renderTransform)}),ut.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const bt in pointerEvents)ut.on(bt,this._onPointerEvent);for(const bt in cameraEvents)ut.on(bt,this._onCameraEvent);for(const bt in otherEvents)ut.on(bt,this._onEvent);this._map=ut}recycle(){const tt=this.map.getContainer().querySelector("[mapboxgl-children]");tt==null||tt.remove(),Mapbox.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const et=this._map;!this._inRender&&et.style&&(et._frame&&(et._frame.cancel(),et._frame=null),et._render())}_createShadowTransform(et){const tt=cloneTransform(et.transform);et.painter.transform=tt,this._renderTransform=tt}_updateSize(et){const{viewState:tt}=et;if(tt){const rt=this._map;if(tt.width!==rt.transform.width||tt.height!==rt.transform.height)return rt.resize(),!0}return!1}_updateViewState(et,tt){if(this._internalUpdate)return!1;const rt=this._map,it=this._renderTransform,{zoom:st,pitch:ut,bearing:ht}=it,at=rt.isMoving();at&&(it.cameraElevationReference="sea");const gt=applyViewStateToTransform(it,{...transformToViewState(rt.transform),...et});if(at&&(it.cameraElevationReference="ground"),gt&&tt){const bt=this._deferredEvents;bt.move=!0,bt.zoom||(bt.zoom=st!==it.zoom),bt.rotate||(bt.rotate=ht!==it.bearing),bt.pitch||(bt.pitch=ut!==it.pitch)}return at||applyViewStateToTransform(rt.transform,et),gt}_updateSettings(et,tt){const rt=this._map;let it=!1;for(const st of settingNames)if(st in et&&!deepEqual(et[st],tt[st])){it=!0;const ut=rt[`set${st[0].toUpperCase()}${st.slice(1)}`];ut==null||ut.call(rt,et[st])}return it}_updateStyle(et,tt){if(et.cursor!==tt.cursor&&(this._map.getCanvas().style.cursor=et.cursor||""),et.mapStyle!==tt.mapStyle){const{mapStyle:rt=DEFAULT_STYLE,styleDiffing:it=!0}=et,st={diff:it};return"localIdeographFontFamily"in et&&(st.localIdeographFontFamily=et.localIdeographFontFamily),this._map.setStyle(normalizeStyle(rt),st),!0}return!1}_updateStyleComponents(et,tt){const rt=this._map;let it=!1;return rt.isStyleLoaded()&&("light"in et&&rt.setLight&&!deepEqual(et.light,tt.light)&&(it=!0,rt.setLight(et.light)),"fog"in et&&rt.setFog&&!deepEqual(et.fog,tt.fog)&&(it=!0,rt.setFog(et.fog)),"terrain"in et&&rt.setTerrain&&!deepEqual(et.terrain,tt.terrain)&&(!et.terrain||rt.getSource(et.terrain.source))&&(it=!0,rt.setTerrain(et.terrain))),it}_updateHandlers(et,tt){var rt,it;const st=this._map;let ut=!1;for(const ht of handlerNames){const at=(rt=et[ht])!==null&&rt!==void 0?rt:!0,gt=(it=tt[ht])!==null&&it!==void 0?it:!0;deepEqual(at,gt)||(ut=!0,at?st[ht].enable(at):st[ht].disable())}return ut}_queryRenderedFeatures(et){const tt=this._map,rt=tt.transform,{interactiveLayerIds:it=[]}=this.props;try{return tt.transform=this._renderTransform,tt.queryRenderedFeatures(et,{layers:it.filter(tt.getLayer.bind(tt))})}catch{return[]}finally{tt.transform=rt}}_updateHover(et){var tt;const{props:rt}=this;if(rt.interactiveLayerIds&&(rt.onMouseMove||rt.onMouseEnter||rt.onMouseLeave)){const st=et.type,ut=((tt=this._hoveredFeatures)===null||tt===void 0?void 0:tt.length)>0,ht=this._queryRenderedFeatures(et.point),at=ht.length>0;!at&&ut&&(et.type="mouseleave",this._onPointerEvent(et)),this._hoveredFeatures=ht,at&&!ut&&(et.type="mouseenter",this._onPointerEvent(et)),et.type=st}else this._hoveredFeatures=null}_fireEvent(et,tt,rt){const it=this._map,st=it.transform,ut=typeof tt=="string"?tt:tt.type;return ut==="move"&&this._updateViewState(this.props,!1),ut in cameraEvents&&(typeof tt=="object"&&(tt.viewState=transformToViewState(st)),this._map.isMoving())?(it.transform=this._renderTransform,et.call(it,tt,rt),it.transform=st,it):(et.call(it,tt,rt),it)}_onBeforeRepaint(){const et=this._map;this._internalUpdate=!0;for(const rt in this._deferredEvents)this._deferredEvents[rt]&&et.fire(rt);this._internalUpdate=!1;const tt=this._map.transform;et.transform=this._renderTransform,this._onAfterRepaint=()=>{syncProjection(this._renderTransform,tt),et.transform=tt}}}Mapbox.savedMaps=[];function getAccessTokenFromEnv(){let _e=null;if(typeof location<"u"){const et=/access_token=([^&\/]*)/.exec(location.search);_e=et&&et[1]}try{_e=_e||define_process_env_default.MapboxAccessToken}catch{}try{_e=_e||define_process_env_default.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return _e}const skipMethods=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function createRef(_e){if(!_e)return null;const et=_e.map,tt={getMap:()=>et,getCenter:()=>_e.transform.center,getZoom:()=>_e.transform.zoom,getBearing:()=>_e.transform.bearing,getPitch:()=>_e.transform.pitch,getPadding:()=>_e.transform.padding,getBounds:()=>_e.transform.getBounds(),project:rt=>{const it=et.transform;et.transform=_e.transform;const st=et.project(rt);return et.transform=it,st},unproject:rt=>{const it=et.transform;et.transform=_e.transform;const st=et.unproject(rt);return et.transform=it,st},queryTerrainElevation:(rt,it)=>{const st=et.transform;et.transform=_e.transform;const ut=et.queryTerrainElevation(rt,it);return et.transform=st,ut},queryRenderedFeatures:(rt,it)=>{const st=et.transform;et.transform=_e.transform;const ut=et.queryRenderedFeatures(rt,it);return et.transform=st,ut}};for(const rt of getMethodNames(et))!(rt in tt)&&!skipMethods.includes(rt)&&(tt[rt]=et[rt].bind(et));return tt}function getMethodNames(_e){const et=new Set;let tt=_e;for(;tt;){for(const rt of Object.getOwnPropertyNames(tt))rt[0]!=="_"&&typeof _e[rt]=="function"&&rt!=="fire"&&rt!=="setEventedParent"&&et.add(rt);tt=Object.getPrototypeOf(tt)}return Array.from(et)}const useIsomorphicLayoutEffect=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect,globalSettings=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function setGlobals(_e,et){for(const rt of globalSettings)rt in et&&(_e[rt]=et[rt]);const{RTLTextPlugin:tt="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=et;tt&&_e.getRTLTextPluginStatus&&_e.getRTLTextPluginStatus()==="unavailable"&&_e.setRTLTextPlugin(tt,rt=>{rt&&console.error(rt)},!0)}const MapContext=reactExports.createContext(null);function Map$2(_e,et,tt){const rt=reactExports.useContext(MountedMapsContext),[it,st]=reactExports.useState(null),ut=reactExports.useRef(),{current:ht}=reactExports.useRef({mapLib:null,map:null});reactExports.useEffect(()=>{const bt=_e.mapLib;let wt=!0,St;return Promise.resolve(bt||tt).then(kt=>{if(!wt)return;if(!kt)throw new Error("Invalid mapLib");const Rt="Map"in kt?kt:kt.default;if(!Rt.Map)throw new Error("Invalid mapLib");if(setGlobals(Rt,_e),!Rt.supported||Rt.supported(_e))_e.reuseMaps&&(St=Mapbox.reuse(_e,ut.current)),St||(St=new Mapbox(Rt.Map,_e,ut.current)),ht.map=createRef(St),ht.mapLib=Rt,st(St),rt==null||rt.onMapMount(ht.map,_e.id);else throw new Error("Map is not supported by this browser")}).catch(kt=>{const{onError:Rt}=_e;Rt?Rt({type:"error",target:null,originalEvent:null,error:kt}):console.error(kt)}),()=>{wt=!1,St&&(rt==null||rt.onMapUnmount(_e.id),_e.reuseMaps?St.recycle():St.destroy())}},[]),useIsomorphicLayoutEffect(()=>{it&&it.setProps(_e)}),reactExports.useImperativeHandle(et,()=>ht.map,[it]);const at=reactExports.useMemo(()=>({position:"relative",width:"100%",height:"100%",..._e.style}),[_e.style]),gt={height:"100%"};return reactExports.createElement("div",{id:_e.id,ref:ut,style:at},it&&reactExports.createElement(MapContext.Provider,{value:ht},reactExports.createElement("div",{"mapboxgl-children":"",style:gt},_e.children)))}const unitlessNumber=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function applyReactStyle(_e,et){if(!_e||!et)return;const tt=_e.style;for(const rt in et){const it=et[rt];Number.isFinite(it)&&!unitlessNumber.test(rt)?tt[rt]=`${it}px`:tt[rt]=it}}function Marker$1(_e,et){const{map:tt,mapLib:rt}=reactExports.useContext(MapContext),it=reactExports.useRef({props:_e});it.current.props=_e;const st=reactExports.useMemo(()=>{let It=!1;reactExports.Children.forEach(_e.children,$t=>{$t&&(It=!0)});const Dt={..._e,element:It?document.createElement("div"):null},Mt=new rt.Marker(Dt);return Mt.setLngLat([_e.longitude,_e.latitude]),Mt.getElement().addEventListener("click",$t=>{var jt,Nt;(Nt=(jt=it.current.props).onClick)===null||Nt===void 0||Nt.call(jt,{type:"click",target:Mt,originalEvent:$t})}),Mt.on("dragstart",$t=>{var jt,Nt;const Ut=$t;Ut.lngLat=st.getLngLat(),(Nt=(jt=it.current.props).onDragStart)===null||Nt===void 0||Nt.call(jt,Ut)}),Mt.on("drag",$t=>{var jt,Nt;const Ut=$t;Ut.lngLat=st.getLngLat(),(Nt=(jt=it.current.props).onDrag)===null||Nt===void 0||Nt.call(jt,Ut)}),Mt.on("dragend",$t=>{var jt,Nt;const Ut=$t;Ut.lngLat=st.getLngLat(),(Nt=(jt=it.current.props).onDragEnd)===null||Nt===void 0||Nt.call(jt,Ut)}),Mt},[]);reactExports.useEffect(()=>(st.addTo(tt.getMap()),()=>{st.remove()}),[]);const{longitude:ut,latitude:ht,offset:at,style:gt,draggable:bt=!1,popup:wt=null,rotation:St=0,rotationAlignment:kt="auto",pitchAlignment:Rt="auto"}=_e;return reactExports.useEffect(()=>{applyReactStyle(st.getElement(),gt)},[gt]),reactExports.useImperativeHandle(et,()=>st,[]),(st.getLngLat().lng!==ut||st.getLngLat().lat!==ht)&&st.setLngLat([ut,ht]),at&&!arePointsEqual(st.getOffset(),at)&&st.setOffset(at),st.isDraggable()!==bt&&st.setDraggable(bt),st.getRotation()!==St&&st.setRotation(St),st.getRotationAlignment()!==kt&&st.setRotationAlignment(kt),st.getPitchAlignment()!==Rt&&st.setPitchAlignment(Rt),st.getPopup()!==wt&&st.setPopup(wt),reactDomExports.createPortal(_e.children,st.getElement())}const _Marker=reactExports.memo(reactExports.forwardRef(Marker$1));function getClassList(_e){return new Set(_e?_e.trim().split(/\s+/):[])}function Popup(_e,et){const{map:tt,mapLib:rt}=reactExports.useContext(MapContext),it=reactExports.useMemo(()=>document.createElement("div"),[]),st=reactExports.useRef({props:_e});st.current.props=_e;const ut=reactExports.useMemo(()=>{const ht={..._e},at=new rt.Popup(ht);return at.setLngLat([_e.longitude,_e.latitude]),at.once("open",gt=>{var bt,wt;(wt=(bt=st.current.props).onOpen)===null||wt===void 0||wt.call(bt,gt)}),at},[]);if(reactExports.useEffect(()=>{const ht=at=>{var gt,bt;(bt=(gt=st.current.props).onClose)===null||bt===void 0||bt.call(gt,at)};return ut.on("close",ht),ut.setDOMContent(it).addTo(tt.getMap()),()=>{ut.off("close",ht),ut.isOpen()&&ut.remove()}},[]),reactExports.useEffect(()=>{applyReactStyle(ut.getElement(),_e.style)},[_e.style]),reactExports.useImperativeHandle(et,()=>ut,[]),ut.isOpen()&&((ut.getLngLat().lng!==_e.longitude||ut.getLngLat().lat!==_e.latitude)&&ut.setLngLat([_e.longitude,_e.latitude]),_e.offset&&!deepEqual(ut.options.offset,_e.offset)&&ut.setOffset(_e.offset),(ut.options.anchor!==_e.anchor||ut.options.maxWidth!==_e.maxWidth)&&(ut.options.anchor=_e.anchor,ut.setMaxWidth(_e.maxWidth)),ut.options.className!==_e.className)){const ht=getClassList(ut.options.className),at=getClassList(_e.className);for(const gt of ht)at.has(gt)||ut.removeClassName(gt);for(const gt of at)ht.has(gt)||ut.addClassName(gt);ut.options.className=_e.className}return reactDomExports.createPortal(_e.children,it)}reactExports.memo(reactExports.forwardRef(Popup));function useControl(_e,et,tt,rt){const it=reactExports.useContext(MapContext),st=reactExports.useMemo(()=>_e(it),[]);return reactExports.useEffect(()=>{const ut=et,ht=typeof et=="function"&&typeof tt=="function"?et:null,at=typeof et=="function"?et:null,{map:gt}=it;return gt.hasControl(st)||(gt.addControl(st,ut==null?void 0:ut.position),ht&&ht(it)),()=>{at&&at(it),gt.hasControl(st)&&gt.removeControl(st)}},[]),st}function AttributionControl(_e){const et=useControl(({mapLib:tt})=>new tt.AttributionControl(_e),{position:_e.position});return reactExports.useEffect(()=>{applyReactStyle(et._container,_e.style)},[_e.style]),null}reactExports.memo(AttributionControl);function FullscreenControl$1(_e){const et=useControl(({mapLib:tt})=>new tt.FullscreenControl({container:_e.containerId&&document.getElementById(_e.containerId)}),{position:_e.position});return reactExports.useEffect(()=>{applyReactStyle(et._controlContainer,_e.style)},[_e.style]),null}const _FullscreenControl=reactExports.memo(FullscreenControl$1);function GeolocateControl$1(_e,et){const tt=reactExports.useRef({props:_e}),rt=useControl(({mapLib:it})=>{const st=new it.GeolocateControl(_e),ut=st._setupUI;return st._setupUI=ht=>{st._container.hasChildNodes()||ut(ht)},st.on("geolocate",ht=>{var at,gt;(gt=(at=tt.current.props).onGeolocate)===null||gt===void 0||gt.call(at,ht)}),st.on("error",ht=>{var at,gt;(gt=(at=tt.current.props).onError)===null||gt===void 0||gt.call(at,ht)}),st.on("outofmaxbounds",ht=>{var at,gt;(gt=(at=tt.current.props).onOutOfMaxBounds)===null||gt===void 0||gt.call(at,ht)}),st.on("trackuserlocationstart",ht=>{var at,gt;(gt=(at=tt.current.props).onTrackUserLocationStart)===null||gt===void 0||gt.call(at,ht)}),st.on("trackuserlocationend",ht=>{var at,gt;(gt=(at=tt.current.props).onTrackUserLocationEnd)===null||gt===void 0||gt.call(at,ht)}),st},{position:_e.position});return tt.current.props=_e,reactExports.useImperativeHandle(et,()=>rt,[]),reactExports.useEffect(()=>{applyReactStyle(rt._container,_e.style)},[_e.style]),null}const _GeolocateControl=reactExports.memo(reactExports.forwardRef(GeolocateControl$1));function NavigationControl$1(_e){const et=useControl(({mapLib:tt})=>new tt.NavigationControl(_e),{position:_e.position});return reactExports.useEffect(()=>{applyReactStyle(et._container,_e.style)},[_e.style]),null}const _NavigationControl=reactExports.memo(NavigationControl$1);function ScaleControl$1(_e){const et=useControl(({mapLib:st})=>new st.ScaleControl(_e),{position:_e.position}),tt=reactExports.useRef(_e),rt=tt.current;tt.current=_e;const{style:it}=_e;return _e.maxWidth!==void 0&&_e.maxWidth!==rt.maxWidth&&(et.options.maxWidth=_e.maxWidth),_e.unit!==void 0&&_e.unit!==rt.unit&&et.setUnit(_e.unit),reactExports.useEffect(()=>{applyReactStyle(et._container,it)},[it]),null}const _ScaleControl=reactExports.memo(ScaleControl$1);function assert(_e,et){if(!_e)throw new Error(et)}function updateLayer(_e,et,tt,rt){if(assert(tt.id===rt.id,"layer id changed"),assert(tt.type===rt.type,"layer type changed"),tt.type==="custom"||rt.type==="custom")return;const{layout:it={},paint:st={},filter:ut,minzoom:ht,maxzoom:at,beforeId:gt}=tt;if(gt!==rt.beforeId&&_e.moveLayer(et,gt),it!==rt.layout){const bt=rt.layout||{};for(const wt in it)deepEqual(it[wt],bt[wt])||_e.setLayoutProperty(et,wt,it[wt]);for(const wt in bt)it.hasOwnProperty(wt)||_e.setLayoutProperty(et,wt,void 0)}if(st!==rt.paint){const bt=rt.paint||{};for(const wt in st)deepEqual(st[wt],bt[wt])||_e.setPaintProperty(et,wt,st[wt]);for(const wt in bt)st.hasOwnProperty(wt)||_e.setPaintProperty(et,wt,void 0)}deepEqual(ut,rt.filter)||_e.setFilter(et,ut),(ht!==rt.minzoom||at!==rt.maxzoom)&&_e.setLayerZoomRange(et,ht,at)}function createLayer(_e,et,tt){if(_e.style&&_e.style._loaded&&(!("source"in tt)||_e.getSource(tt.source))){const rt={...tt,id:et};delete rt.beforeId,_e.addLayer(rt,tt.beforeId)}}let layerCounter=0;function Layer$1(_e){const et=reactExports.useContext(MapContext).map.getMap(),tt=reactExports.useRef(_e),[,rt]=reactExports.useState(0),it=reactExports.useMemo(()=>_e.id||`jsx-layer-${layerCounter++}`,[]);if(reactExports.useEffect(()=>{if(et){const ut=()=>rt(ht=>ht+1);return et.on("styledata",ut),ut(),()=>{et.off("styledata",ut),et.style&&et.style._loaded&&et.getLayer(it)&&et.removeLayer(it)}}},[et]),et&&et.style&&et.getLayer(it))try{updateLayer(et,it,_e,tt.current)}catch(ut){console.warn(ut)}else createLayer(et,it,_e);return tt.current=_e,null}let sourceCounter=0;function createSource(_e,et,tt){if(_e.style&&_e.style._loaded){const rt={...tt};return delete rt.id,delete rt.children,_e.addSource(et,rt),_e.getSource(et)}return null}function updateSource(_e,et,tt){assert(et.id===tt.id,"source id changed"),assert(et.type===tt.type,"source type changed");let rt="",it=0;for(const ut in et)ut!=="children"&&ut!=="id"&&!deepEqual(tt[ut],et[ut])&&(rt=ut,it++);if(!it)return;const st=et.type;if(st==="geojson")_e.setData(et.data);else if(st==="image")_e.updateImage({url:et.url,coordinates:et.coordinates});else if("setCoordinates"in _e&&it===1&&rt==="coordinates")_e.setCoordinates(et.coordinates);else if("setUrl"in _e)switch(rt){case"url":_e.setUrl(et.url);break;case"tiles":_e.setTiles(et.tiles);break}else console.warn(`Unable to update <Source> prop: ${rt}`)}function Source$1(_e){const et=reactExports.useContext(MapContext).map.getMap(),tt=reactExports.useRef(_e),[,rt]=reactExports.useState(0),it=reactExports.useMemo(()=>_e.id||`jsx-source-${sourceCounter++}`,[]);reactExports.useEffect(()=>{if(et){const ut=()=>setTimeout(()=>rt(ht=>ht+1),0);return et.on("styledata",ut),ut(),()=>{var ht;if(et.off("styledata",ut),et.style&&et.style._loaded&&et.getSource(it)){const at=(ht=et.getStyle())===null||ht===void 0?void 0:ht.layers;if(at)for(const gt of at)gt.source===it&&et.removeLayer(gt.id);et.removeSource(it)}}}},[et]);let st=et&&et.style&&et.getSource(it);return st?updateSource(st,_e,tt.current):st=createSource(et,it,_e),tt.current=_e,st&&reactExports.Children.map(_e.children,ut=>ut&&reactExports.cloneElement(ut,{source:it}))||null}const mapLib=__vitePreload(()=>Promise.resolve().then(()=>mapboxGl$1),void 0),Map$1=reactExports.forwardRef(function(et,tt){return Map$2(et,tt,mapLib)}),Marker=_Marker,FullscreenControl=_FullscreenControl,NavigationControl=_NavigationControl,GeolocateControl=_GeolocateControl,ScaleControl=_ScaleControl,Layer=Layer$1,Source=Source$1;var polyline$1={exports:{}};(function(_e){var et={};function tt(st){return Math.floor(Math.abs(st)+.5)*(st>=0?1:-1)}function rt(st,ut,ht){st=tt(st*ht),ut=tt(ut*ht);var at=(st-ut)*2;at<0&&(at=-at-1);for(var gt="";at>=32;)gt+=String.fromCharCode((32|at&31)+63),at/=32;return gt+=String.fromCharCode((at|0)+63),gt}et.decode=function(st,ut){for(var ht=0,at=0,gt=0,bt=[],wt=0,St=0,kt=null,Rt,It,Dt=Math.pow(10,Number.isInteger(ut)?ut:5);ht<st.length;){kt=null,wt=1,St=0;do kt=st.charCodeAt(ht++)-63,St+=(kt&31)*wt,wt*=32;while(kt>=32);Rt=St&1?(-St-1)/2:St/2,wt=1,St=0;do kt=st.charCodeAt(ht++)-63,St+=(kt&31)*wt,wt*=32;while(kt>=32);It=St&1?(-St-1)/2:St/2,at+=Rt,gt+=It,bt.push([at/Dt,gt/Dt])}return bt},et.encode=function(st,ut){if(!st.length)return"";for(var ht=Math.pow(10,Number.isInteger(ut)?ut:5),at=rt(st[0][0],0,ht)+rt(st[0][1],0,ht),gt=1;gt<st.length;gt++){var bt=st[gt],wt=st[gt-1];at+=rt(bt[0],wt[0],ht),at+=rt(bt[1],wt[1],ht)}return at};function it(st){for(var ut=[],ht=0;ht<st.length;ht++){var at=st[ht].slice();ut.push([at[1],at[0]])}return ut}et.fromGeoJSON=function(st,ut){if(st&&st.type==="Feature"&&(st=st.geometry),!st||st.type!=="LineString")throw new Error("Input must be a GeoJSON LineString");return et.encode(it(st.coordinates),ut)},et.toGeoJSON=function(st,ut){var ht=et.decode(st,ut);return{type:"LineString",coordinates:it(ht)}},_e.exports&&(_e.exports=et)})(polyline$1);var polylineExports=polyline$1.exports;const polyline=getDefaultExportFromCjs(polylineExports);var mapboxGl$2={exports:{}};(function(_e,et){var tt={};(function(rt,it){_e.exports=it()})(commonjsGlobal,function(){var rt,it,st;function ut(at,gt){if(!rt)rt=gt;else if(!it)it=gt;else{var bt="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+rt+")(sharedChunk); ("+it+")(sharedChunk); self.onerror = null;",wt={};rt(wt),st=gt(wt),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(st.workerUrl=window.URL.createObjectURL(new Blob([bt],{type:"text/javascript"})))}}ut(["exports"],function(at){var gt="3.6.0";let bt;const wt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(bt==null){const ot=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{bt=tt.API_URL_REGEX!=null?new RegExp(tt.API_URL_REGEX):ot}catch{bt=ot}}return bt},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!wt.API_URL)return null;try{const ot=new URL(wt.API_URL);return ot.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":ot.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function St(ot){return wt.API_URL_REGEX.test(ot)}function kt(ot){return ot.indexOf("mapbox:")===0}function Rt(ot){return wt.API_CDN_URL_REGEX.test(ot)}function It(ot){return wt.API_SPRITE_REGEX.test(ot)}function Dt(ot){return wt.API_STYLE_REGEX.test(ot)&&!It(ot)}const Mt={create:"create",load:"load",fullLoad:"fullLoad"},$t={mark(ot){performance.mark(ot)},measure(ot,nt,lt){performance.measure(ot,nt,lt)}};function jt(ot){const nt=ot.name.split("?")[0];return Rt(nt)&&nt.includes("mapbox-gl.js")?"javascript":Rt(nt)&&nt.includes("mapbox-gl.css")?"css":function(lt){return wt.API_FONTS_REGEX.test(lt)}(nt)?"fontRange":It(nt)?"sprite":Dt(nt)?"style":function(lt){return wt.API_TILEJSON_REGEX.test(lt)}(nt)?"tilejson":"other"}function Nt(ot){return ot&&ot.__esModule&&Object.prototype.hasOwnProperty.call(ot,"default")?ot.default:ot}var Ut={},Ht={};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.setMatrixArrayType=function(ot){Ht.ARRAY_TYPE=tr=ot},Ht.toRadian=function(ot){return ot*vr},Ht.equals=function(ot,nt){return Math.abs(ot-nt)<=Kt*Math.max(1,Math.abs(ot),Math.abs(nt))},Ht.RANDOM=Ht.ARRAY_TYPE=Ht.EPSILON=void 0;var Kt=1e-6;Ht.EPSILON=Kt;var tr=typeof Float32Array<"u"?Float32Array:Array;Ht.ARRAY_TYPE=tr;var mr=Math.random;Ht.RANDOM=mr;var vr=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var ot=0,nt=arguments.length;nt--;)ot+=arguments[nt]*arguments[nt];return Math.sqrt(ot)});var wr={};function yr(ot){return yr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},yr(ot)}Object.defineProperty(wr,"__esModule",{value:!0}),wr.create=function(){var ot=new Or.ARRAY_TYPE(4);return Or.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0),ot[0]=1,ot[3]=1,ot},wr.clone=function(ot){var nt=new Or.ARRAY_TYPE(4);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt},wr.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot},wr.identity=function(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot},wr.fromValues=function(ot,nt,lt,dt){var ft=new Or.ARRAY_TYPE(4);return ft[0]=ot,ft[1]=nt,ft[2]=lt,ft[3]=dt,ft},wr.set=function(ot,nt,lt,dt,ft){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot},wr.transpose=function(ot,nt){if(ot===nt){var lt=nt[1];ot[1]=nt[2],ot[2]=lt}else ot[0]=nt[0],ot[1]=nt[2],ot[2]=nt[1],ot[3]=nt[3];return ot},wr.invert=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=lt*mt-ft*dt;return yt?(ot[0]=mt*(yt=1/yt),ot[1]=-dt*yt,ot[2]=-ft*yt,ot[3]=lt*yt,ot):null},wr.adjoint=function(ot,nt){var lt=nt[0];return ot[0]=nt[3],ot[1]=-nt[1],ot[2]=-nt[2],ot[3]=lt,ot},wr.determinant=function(ot){return ot[0]*ot[3]-ot[2]*ot[1]},wr.multiply=Lr,wr.rotate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=Math.sin(lt),At=Math.cos(lt);return ot[0]=dt*At+mt*Et,ot[1]=ft*At+yt*Et,ot[2]=dt*-Et+mt*At,ot[3]=ft*-Et+yt*At,ot},wr.scale=function(ot,nt,lt){var dt=nt[1],ft=nt[2],mt=nt[3],yt=lt[0],Et=lt[1];return ot[0]=nt[0]*yt,ot[1]=dt*yt,ot[2]=ft*Et,ot[3]=mt*Et,ot},wr.fromRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=dt,ot[1]=lt,ot[2]=-lt,ot[3]=dt,ot},wr.fromScaling=function(ot,nt){return ot[0]=nt[0],ot[1]=0,ot[2]=0,ot[3]=nt[1],ot},wr.str=function(ot){return"mat2("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+")"},wr.frob=function(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3])},wr.LDU=function(ot,nt,lt,dt){return ot[2]=dt[2]/dt[0],lt[0]=dt[0],lt[1]=dt[1],lt[3]=dt[3]-ot[2]*lt[1],[ot,nt,lt]},wr.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot},wr.subtract=ar,wr.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]},wr.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=nt[0],Et=nt[1],At=nt[2],Ct=nt[3];return Math.abs(lt-yt)<=Or.EPSILON*Math.max(1,Math.abs(lt),Math.abs(yt))&&Math.abs(dt-Et)<=Or.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Et))&&Math.abs(ft-At)<=Or.EPSILON*Math.max(1,Math.abs(ft),Math.abs(At))&&Math.abs(mt-Ct)<=Or.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Ct))},wr.multiplyScalar=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot},wr.multiplyScalarAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot[3]=nt[3]+lt[3]*dt,ot},wr.sub=wr.mul=void 0;var Or=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||yr(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=Nr(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function Nr(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(Nr=function(dt){return dt?lt:nt})(ot)}function Lr(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=lt[0],At=lt[1],Ct=lt[2],Lt=lt[3];return ot[0]=dt*Et+mt*At,ot[1]=ft*Et+yt*At,ot[2]=dt*Ct+mt*Lt,ot[3]=ft*Ct+yt*Lt,ot}function ar(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot[3]=nt[3]-lt[3],ot}wr.mul=Lr,wr.sub=ar;var hr={};function Qt(ot){return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Qt(ot)}Object.defineProperty(hr,"__esModule",{value:!0}),hr.create=function(){var ot=new ir.ARRAY_TYPE(6);return ir.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0,ot[4]=0,ot[5]=0),ot[0]=1,ot[3]=1,ot},hr.clone=function(ot){var nt=new ir.ARRAY_TYPE(6);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt[4]=ot[4],nt[5]=ot[5],nt},hr.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[4]=nt[4],ot[5]=nt[5],ot},hr.identity=function(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=0,ot[5]=0,ot},hr.fromValues=function(ot,nt,lt,dt,ft,mt){var yt=new ir.ARRAY_TYPE(6);return yt[0]=ot,yt[1]=nt,yt[2]=lt,yt[3]=dt,yt[4]=ft,yt[5]=mt,yt},hr.set=function(ot,nt,lt,dt,ft,mt,yt){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot[4]=mt,ot[5]=yt,ot},hr.invert=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=lt*mt-dt*ft;return At?(ot[0]=mt*(At=1/At),ot[1]=-dt*At,ot[2]=-ft*At,ot[3]=lt*At,ot[4]=(ft*Et-mt*yt)*At,ot[5]=(dt*yt-lt*Et)*At,ot):null},hr.determinant=function(ot){return ot[0]*ot[3]-ot[1]*ot[2]},hr.multiply=Cr,hr.rotate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=Math.sin(lt),Lt=Math.cos(lt);return ot[0]=dt*Lt+mt*Ct,ot[1]=ft*Lt+yt*Ct,ot[2]=dt*-Ct+mt*Lt,ot[3]=ft*-Ct+yt*Lt,ot[4]=Et,ot[5]=At,ot},hr.scale=function(ot,nt,lt){var dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=lt[0],Ct=lt[1];return ot[0]=nt[0]*At,ot[1]=dt*At,ot[2]=ft*Ct,ot[3]=mt*Ct,ot[4]=yt,ot[5]=Et,ot},hr.translate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=lt[0],Lt=lt[1];return ot[0]=dt,ot[1]=ft,ot[2]=mt,ot[3]=yt,ot[4]=dt*Ct+mt*Lt+Et,ot[5]=ft*Ct+yt*Lt+At,ot},hr.fromRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=dt,ot[1]=lt,ot[2]=-lt,ot[3]=dt,ot[4]=0,ot[5]=0,ot},hr.fromScaling=function(ot,nt){return ot[0]=nt[0],ot[1]=0,ot[2]=0,ot[3]=nt[1],ot[4]=0,ot[5]=0,ot},hr.fromTranslation=function(ot,nt){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=nt[0],ot[5]=nt[1],ot},hr.str=function(ot){return"mat2d("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+")"},hr.frob=function(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],1)},hr.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot[4]=nt[4]+lt[4],ot[5]=nt[5]+lt[5],ot},hr.subtract=rn,hr.multiplyScalar=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot[4]=nt[4]*lt,ot[5]=nt[5]*lt,ot},hr.multiplyScalarAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot[3]=nt[3]+lt[3]*dt,ot[4]=nt[4]+lt[4]*dt,ot[5]=nt[5]+lt[5]*dt,ot},hr.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]&&ot[4]===nt[4]&&ot[5]===nt[5]},hr.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=ot[4],Et=ot[5],At=nt[0],Ct=nt[1],Lt=nt[2],Bt=nt[3],zt=nt[4],Wt=nt[5];return Math.abs(lt-At)<=ir.EPSILON*Math.max(1,Math.abs(lt),Math.abs(At))&&Math.abs(dt-Ct)<=ir.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Ct))&&Math.abs(ft-Lt)<=ir.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Lt))&&Math.abs(mt-Bt)<=ir.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Bt))&&Math.abs(yt-zt)<=ir.EPSILON*Math.max(1,Math.abs(yt),Math.abs(zt))&&Math.abs(Et-Wt)<=ir.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Wt))},hr.sub=hr.mul=void 0;var ir=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Qt(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=Mr(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function Mr(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(Mr=function(dt){return dt?lt:nt})(ot)}function Cr(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=lt[0],Lt=lt[1],Bt=lt[2],zt=lt[3],Wt=lt[4],qt=lt[5];return ot[0]=dt*Ct+mt*Lt,ot[1]=ft*Ct+yt*Lt,ot[2]=dt*Bt+mt*zt,ot[3]=ft*Bt+yt*zt,ot[4]=dt*Wt+mt*qt+Et,ot[5]=ft*Wt+yt*qt+At,ot}function rn(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot[3]=nt[3]-lt[3],ot[4]=nt[4]-lt[4],ot[5]=nt[5]-lt[5],ot}hr.mul=Cr,hr.sub=rn;var fn={};function Dn(ot){return Dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Dn(ot)}Object.defineProperty(fn,"__esModule",{value:!0}),fn.create=function(){var ot=new Yn.ARRAY_TYPE(9);return Yn.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0,ot[3]=0,ot[5]=0,ot[6]=0,ot[7]=0),ot[0]=1,ot[4]=1,ot[8]=1,ot},fn.fromMat4=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[4],ot[4]=nt[5],ot[5]=nt[6],ot[6]=nt[8],ot[7]=nt[9],ot[8]=nt[10],ot},fn.clone=function(ot){var nt=new Yn.ARRAY_TYPE(9);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt[4]=ot[4],nt[5]=ot[5],nt[6]=ot[6],nt[7]=ot[7],nt[8]=ot[8],nt},fn.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[4]=nt[4],ot[5]=nt[5],ot[6]=nt[6],ot[7]=nt[7],ot[8]=nt[8],ot},fn.fromValues=function(ot,nt,lt,dt,ft,mt,yt,Et,At){var Ct=new Yn.ARRAY_TYPE(9);return Ct[0]=ot,Ct[1]=nt,Ct[2]=lt,Ct[3]=dt,Ct[4]=ft,Ct[5]=mt,Ct[6]=yt,Ct[7]=Et,Ct[8]=At,Ct},fn.set=function(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot[4]=mt,ot[5]=yt,ot[6]=Et,ot[7]=At,ot[8]=Ct,ot},fn.identity=function(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=1,ot[5]=0,ot[6]=0,ot[7]=0,ot[8]=1,ot},fn.transpose=function(ot,nt){if(ot===nt){var lt=nt[1],dt=nt[2],ft=nt[5];ot[1]=nt[3],ot[2]=nt[6],ot[3]=lt,ot[5]=nt[7],ot[6]=dt,ot[7]=ft}else ot[0]=nt[0],ot[1]=nt[3],ot[2]=nt[6],ot[3]=nt[1],ot[4]=nt[4],ot[5]=nt[7],ot[6]=nt[2],ot[7]=nt[5],ot[8]=nt[8];return ot},fn.invert=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=nt[6],Ct=nt[7],Lt=nt[8],Bt=Lt*yt-Et*Ct,zt=-Lt*mt+Et*At,Wt=Ct*mt-yt*At,qt=lt*Bt+dt*zt+ft*Wt;return qt?(ot[0]=Bt*(qt=1/qt),ot[1]=(-Lt*dt+ft*Ct)*qt,ot[2]=(Et*dt-ft*yt)*qt,ot[3]=zt*qt,ot[4]=(Lt*lt-ft*At)*qt,ot[5]=(-Et*lt+ft*mt)*qt,ot[6]=Wt*qt,ot[7]=(-Ct*lt+dt*At)*qt,ot[8]=(yt*lt-dt*mt)*qt,ot):null},fn.adjoint=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=nt[6],Ct=nt[7],Lt=nt[8];return ot[0]=yt*Lt-Et*Ct,ot[1]=ft*Ct-dt*Lt,ot[2]=dt*Et-ft*yt,ot[3]=Et*At-mt*Lt,ot[4]=lt*Lt-ft*At,ot[5]=ft*mt-lt*Et,ot[6]=mt*Ct-yt*At,ot[7]=dt*At-lt*Ct,ot[8]=lt*yt-dt*mt,ot},fn.determinant=function(ot){var nt=ot[3],lt=ot[4],dt=ot[5],ft=ot[6],mt=ot[7],yt=ot[8];return ot[0]*(yt*lt-dt*mt)+ot[1]*(-yt*nt+dt*ft)+ot[2]*(mt*nt-lt*ft)},fn.multiply=Gn,fn.translate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=nt[8],zt=lt[0],Wt=lt[1];return ot[0]=dt,ot[1]=ft,ot[2]=mt,ot[3]=yt,ot[4]=Et,ot[5]=At,ot[6]=zt*dt+Wt*yt+Ct,ot[7]=zt*ft+Wt*Et+Lt,ot[8]=zt*mt+Wt*At+Bt,ot},fn.rotate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=nt[8],zt=Math.sin(lt),Wt=Math.cos(lt);return ot[0]=Wt*dt+zt*yt,ot[1]=Wt*ft+zt*Et,ot[2]=Wt*mt+zt*At,ot[3]=Wt*yt-zt*dt,ot[4]=Wt*Et-zt*ft,ot[5]=Wt*At-zt*mt,ot[6]=Ct,ot[7]=Lt,ot[8]=Bt,ot},fn.scale=function(ot,nt,lt){var dt=lt[0],ft=lt[1];return ot[0]=dt*nt[0],ot[1]=dt*nt[1],ot[2]=dt*nt[2],ot[3]=ft*nt[3],ot[4]=ft*nt[4],ot[5]=ft*nt[5],ot[6]=nt[6],ot[7]=nt[7],ot[8]=nt[8],ot},fn.fromTranslation=function(ot,nt){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=1,ot[5]=0,ot[6]=nt[0],ot[7]=nt[1],ot[8]=1,ot},fn.fromRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=dt,ot[1]=lt,ot[2]=0,ot[3]=-lt,ot[4]=dt,ot[5]=0,ot[6]=0,ot[7]=0,ot[8]=1,ot},fn.fromScaling=function(ot,nt){return ot[0]=nt[0],ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=nt[1],ot[5]=0,ot[6]=0,ot[7]=0,ot[8]=1,ot},fn.fromMat2d=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=0,ot[3]=nt[2],ot[4]=nt[3],ot[5]=0,ot[6]=nt[4],ot[7]=nt[5],ot[8]=1,ot},fn.fromQuat=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=lt+lt,Et=dt+dt,At=ft+ft,Ct=lt*yt,Lt=dt*yt,Bt=dt*Et,zt=ft*yt,Wt=ft*Et,qt=ft*At,Xt=mt*yt,Jt=mt*Et,nr=mt*At;return ot[0]=1-Bt-qt,ot[3]=Lt-nr,ot[6]=zt+Jt,ot[1]=Lt+nr,ot[4]=1-Ct-qt,ot[7]=Wt-Xt,ot[2]=zt-Jt,ot[5]=Wt+Xt,ot[8]=1-Ct-Bt,ot},fn.normalFromMat4=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=nt[6],Ct=nt[7],Lt=nt[8],Bt=nt[9],zt=nt[10],Wt=nt[11],qt=nt[12],Xt=nt[13],Jt=nt[14],nr=nt[15],gr=lt*Et-dt*yt,pr=lt*At-ft*yt,xr=lt*Ct-mt*yt,Pr=dt*At-ft*Et,Rr=dt*Ct-mt*Et,Dr=ft*Ct-mt*At,Hr=Lt*Xt-Bt*qt,Jr=Lt*Jt-zt*qt,an=Lt*nr-Wt*qt,Qr=Bt*Jt-zt*Xt,yn=Bt*nr-Wt*Xt,Cn=zt*nr-Wt*Jt,xn=gr*Cn-pr*yn+xr*Qr+Pr*an-Rr*Jr+Dr*Hr;return xn?(ot[0]=(Et*Cn-At*yn+Ct*Qr)*(xn=1/xn),ot[1]=(At*an-yt*Cn-Ct*Jr)*xn,ot[2]=(yt*yn-Et*an+Ct*Hr)*xn,ot[3]=(ft*yn-dt*Cn-mt*Qr)*xn,ot[4]=(lt*Cn-ft*an+mt*Jr)*xn,ot[5]=(dt*an-lt*yn-mt*Hr)*xn,ot[6]=(Xt*Dr-Jt*Rr+nr*Pr)*xn,ot[7]=(Jt*xr-qt*Dr-nr*pr)*xn,ot[8]=(qt*Rr-Xt*xr+nr*gr)*xn,ot):null},fn.projection=function(ot,nt,lt){return ot[0]=2/nt,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=-2/lt,ot[5]=0,ot[6]=-1,ot[7]=1,ot[8]=1,ot},fn.str=function(ot){return"mat3("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+", "+ot[6]+", "+ot[7]+", "+ot[8]+")"},fn.frob=function(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6],ot[7],ot[8])},fn.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot[4]=nt[4]+lt[4],ot[5]=nt[5]+lt[5],ot[6]=nt[6]+lt[6],ot[7]=nt[7]+lt[7],ot[8]=nt[8]+lt[8],ot},fn.subtract=lo,fn.multiplyScalar=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot[4]=nt[4]*lt,ot[5]=nt[5]*lt,ot[6]=nt[6]*lt,ot[7]=nt[7]*lt,ot[8]=nt[8]*lt,ot},fn.multiplyScalarAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot[3]=nt[3]+lt[3]*dt,ot[4]=nt[4]+lt[4]*dt,ot[5]=nt[5]+lt[5]*dt,ot[6]=nt[6]+lt[6]*dt,ot[7]=nt[7]+lt[7]*dt,ot[8]=nt[8]+lt[8]*dt,ot},fn.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]&&ot[4]===nt[4]&&ot[5]===nt[5]&&ot[6]===nt[6]&&ot[7]===nt[7]&&ot[8]===nt[8]},fn.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=ot[4],Et=ot[5],At=ot[6],Ct=ot[7],Lt=ot[8],Bt=nt[0],zt=nt[1],Wt=nt[2],qt=nt[3],Xt=nt[4],Jt=nt[5],nr=nt[6],gr=nt[7],pr=nt[8];return Math.abs(lt-Bt)<=Yn.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Bt))&&Math.abs(dt-zt)<=Yn.EPSILON*Math.max(1,Math.abs(dt),Math.abs(zt))&&Math.abs(ft-Wt)<=Yn.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Wt))&&Math.abs(mt-qt)<=Yn.EPSILON*Math.max(1,Math.abs(mt),Math.abs(qt))&&Math.abs(yt-Xt)<=Yn.EPSILON*Math.max(1,Math.abs(yt),Math.abs(Xt))&&Math.abs(Et-Jt)<=Yn.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Jt))&&Math.abs(At-nr)<=Yn.EPSILON*Math.max(1,Math.abs(At),Math.abs(nr))&&Math.abs(Ct-gr)<=Yn.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(gr))&&Math.abs(Lt-pr)<=Yn.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(pr))},fn.sub=fn.mul=void 0;var Yn=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Dn(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=eo(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function eo(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(eo=function(dt){return dt?lt:nt})(ot)}function Gn(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=nt[8],zt=lt[0],Wt=lt[1],qt=lt[2],Xt=lt[3],Jt=lt[4],nr=lt[5],gr=lt[6],pr=lt[7],xr=lt[8];return ot[0]=zt*dt+Wt*yt+qt*Ct,ot[1]=zt*ft+Wt*Et+qt*Lt,ot[2]=zt*mt+Wt*At+qt*Bt,ot[3]=Xt*dt+Jt*yt+nr*Ct,ot[4]=Xt*ft+Jt*Et+nr*Lt,ot[5]=Xt*mt+Jt*At+nr*Bt,ot[6]=gr*dt+pr*yt+xr*Ct,ot[7]=gr*ft+pr*Et+xr*Lt,ot[8]=gr*mt+pr*At+xr*Bt,ot}function lo(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot[3]=nt[3]-lt[3],ot[4]=nt[4]-lt[4],ot[5]=nt[5]-lt[5],ot[6]=nt[6]-lt[6],ot[7]=nt[7]-lt[7],ot[8]=nt[8]-lt[8],ot}fn.mul=Gn,fn.sub=lo;var mn={};function Hn(ot){return Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Hn(ot)}Object.defineProperty(mn,"__esModule",{value:!0}),mn.create=function(){var ot=new Rn.ARRAY_TYPE(16);return Rn.ARRAY_TYPE!=Float32Array&&(ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0),ot[0]=1,ot[5]=1,ot[10]=1,ot[15]=1,ot},mn.clone=function(ot){var nt=new Rn.ARRAY_TYPE(16);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt[4]=ot[4],nt[5]=ot[5],nt[6]=ot[6],nt[7]=ot[7],nt[8]=ot[8],nt[9]=ot[9],nt[10]=ot[10],nt[11]=ot[11],nt[12]=ot[12],nt[13]=ot[13],nt[14]=ot[14],nt[15]=ot[15],nt},mn.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[4]=nt[4],ot[5]=nt[5],ot[6]=nt[6],ot[7]=nt[7],ot[8]=nt[8],ot[9]=nt[9],ot[10]=nt[10],ot[11]=nt[11],ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15],ot},mn.fromValues=function(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt){var Jt=new Rn.ARRAY_TYPE(16);return Jt[0]=ot,Jt[1]=nt,Jt[2]=lt,Jt[3]=dt,Jt[4]=ft,Jt[5]=mt,Jt[6]=yt,Jt[7]=Et,Jt[8]=At,Jt[9]=Ct,Jt[10]=Lt,Jt[11]=Bt,Jt[12]=zt,Jt[13]=Wt,Jt[14]=qt,Jt[15]=Xt,Jt},mn.set=function(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot[4]=mt,ot[5]=yt,ot[6]=Et,ot[7]=At,ot[8]=Ct,ot[9]=Lt,ot[10]=Bt,ot[11]=zt,ot[12]=Wt,ot[13]=qt,ot[14]=Xt,ot[15]=Jt,ot},mn.identity=qn,mn.transpose=function(ot,nt){if(ot===nt){var lt=nt[1],dt=nt[2],ft=nt[3],mt=nt[6],yt=nt[7],Et=nt[11];ot[1]=nt[4],ot[2]=nt[8],ot[3]=nt[12],ot[4]=lt,ot[6]=nt[9],ot[7]=nt[13],ot[8]=dt,ot[9]=mt,ot[11]=nt[14],ot[12]=ft,ot[13]=yt,ot[14]=Et}else ot[0]=nt[0],ot[1]=nt[4],ot[2]=nt[8],ot[3]=nt[12],ot[4]=nt[1],ot[5]=nt[5],ot[6]=nt[9],ot[7]=nt[13],ot[8]=nt[2],ot[9]=nt[6],ot[10]=nt[10],ot[11]=nt[14],ot[12]=nt[3],ot[13]=nt[7],ot[14]=nt[11],ot[15]=nt[15];return ot},mn.invert=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=nt[6],Ct=nt[7],Lt=nt[8],Bt=nt[9],zt=nt[10],Wt=nt[11],qt=nt[12],Xt=nt[13],Jt=nt[14],nr=nt[15],gr=lt*Et-dt*yt,pr=lt*At-ft*yt,xr=lt*Ct-mt*yt,Pr=dt*At-ft*Et,Rr=dt*Ct-mt*Et,Dr=ft*Ct-mt*At,Hr=Lt*Xt-Bt*qt,Jr=Lt*Jt-zt*qt,an=Lt*nr-Wt*qt,Qr=Bt*Jt-zt*Xt,yn=Bt*nr-Wt*Xt,Cn=zt*nr-Wt*Jt,xn=gr*Cn-pr*yn+xr*Qr+Pr*an-Rr*Jr+Dr*Hr;return xn?(ot[0]=(Et*Cn-At*yn+Ct*Qr)*(xn=1/xn),ot[1]=(ft*yn-dt*Cn-mt*Qr)*xn,ot[2]=(Xt*Dr-Jt*Rr+nr*Pr)*xn,ot[3]=(zt*Rr-Bt*Dr-Wt*Pr)*xn,ot[4]=(At*an-yt*Cn-Ct*Jr)*xn,ot[5]=(lt*Cn-ft*an+mt*Jr)*xn,ot[6]=(Jt*xr-qt*Dr-nr*pr)*xn,ot[7]=(Lt*Dr-zt*xr+Wt*pr)*xn,ot[8]=(yt*yn-Et*an+Ct*Hr)*xn,ot[9]=(dt*an-lt*yn-mt*Hr)*xn,ot[10]=(qt*Rr-Xt*xr+nr*gr)*xn,ot[11]=(Bt*xr-Lt*Rr-Wt*gr)*xn,ot[12]=(Et*Jr-yt*Qr-At*Hr)*xn,ot[13]=(lt*Qr-dt*Jr+ft*Hr)*xn,ot[14]=(Xt*pr-qt*Pr-Jt*gr)*xn,ot[15]=(Lt*Pr-Bt*pr+zt*gr)*xn,ot):null},mn.adjoint=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=nt[4],Et=nt[5],At=nt[6],Ct=nt[7],Lt=nt[8],Bt=nt[9],zt=nt[10],Wt=nt[11],qt=nt[12],Xt=nt[13],Jt=nt[14],nr=nt[15];return ot[0]=Et*(zt*nr-Wt*Jt)-Bt*(At*nr-Ct*Jt)+Xt*(At*Wt-Ct*zt),ot[1]=-(dt*(zt*nr-Wt*Jt)-Bt*(ft*nr-mt*Jt)+Xt*(ft*Wt-mt*zt)),ot[2]=dt*(At*nr-Ct*Jt)-Et*(ft*nr-mt*Jt)+Xt*(ft*Ct-mt*At),ot[3]=-(dt*(At*Wt-Ct*zt)-Et*(ft*Wt-mt*zt)+Bt*(ft*Ct-mt*At)),ot[4]=-(yt*(zt*nr-Wt*Jt)-Lt*(At*nr-Ct*Jt)+qt*(At*Wt-Ct*zt)),ot[5]=lt*(zt*nr-Wt*Jt)-Lt*(ft*nr-mt*Jt)+qt*(ft*Wt-mt*zt),ot[6]=-(lt*(At*nr-Ct*Jt)-yt*(ft*nr-mt*Jt)+qt*(ft*Ct-mt*At)),ot[7]=lt*(At*Wt-Ct*zt)-yt*(ft*Wt-mt*zt)+Lt*(ft*Ct-mt*At),ot[8]=yt*(Bt*nr-Wt*Xt)-Lt*(Et*nr-Ct*Xt)+qt*(Et*Wt-Ct*Bt),ot[9]=-(lt*(Bt*nr-Wt*Xt)-Lt*(dt*nr-mt*Xt)+qt*(dt*Wt-mt*Bt)),ot[10]=lt*(Et*nr-Ct*Xt)-yt*(dt*nr-mt*Xt)+qt*(dt*Ct-mt*Et),ot[11]=-(lt*(Et*Wt-Ct*Bt)-yt*(dt*Wt-mt*Bt)+Lt*(dt*Ct-mt*Et)),ot[12]=-(yt*(Bt*Jt-zt*Xt)-Lt*(Et*Jt-At*Xt)+qt*(Et*zt-At*Bt)),ot[13]=lt*(Bt*Jt-zt*Xt)-Lt*(dt*Jt-ft*Xt)+qt*(dt*zt-ft*Bt),ot[14]=-(lt*(Et*Jt-At*Xt)-yt*(dt*Jt-ft*Xt)+qt*(dt*At-ft*Et)),ot[15]=lt*(Et*zt-At*Bt)-yt*(dt*zt-ft*Bt)+Lt*(dt*At-ft*Et),ot},mn.determinant=function(ot){var nt=ot[0],lt=ot[1],dt=ot[2],ft=ot[3],mt=ot[4],yt=ot[5],Et=ot[6],At=ot[7],Ct=ot[8],Lt=ot[9],Bt=ot[10],zt=ot[11],Wt=ot[12],qt=ot[13],Xt=ot[14],Jt=ot[15];return(nt*yt-lt*mt)*(Bt*Jt-zt*Xt)-(nt*Et-dt*mt)*(Lt*Jt-zt*qt)+(nt*At-ft*mt)*(Lt*Xt-Bt*qt)+(lt*Et-dt*yt)*(Ct*Jt-zt*Wt)-(lt*At-ft*yt)*(Ct*Xt-Bt*Wt)+(dt*At-ft*Et)*(Ct*qt-Lt*Wt)},mn.multiply=On,mn.translate=function(ot,nt,lt){var dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt=lt[0],Jt=lt[1],nr=lt[2];return nt===ot?(ot[12]=nt[0]*Xt+nt[4]*Jt+nt[8]*nr+nt[12],ot[13]=nt[1]*Xt+nt[5]*Jt+nt[9]*nr+nt[13],ot[14]=nt[2]*Xt+nt[6]*Jt+nt[10]*nr+nt[14],ot[15]=nt[3]*Xt+nt[7]*Jt+nt[11]*nr+nt[15]):(ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=nt[8],zt=nt[9],Wt=nt[10],qt=nt[11],ot[0]=dt=nt[0],ot[1]=ft,ot[2]=mt,ot[3]=yt,ot[4]=Et,ot[5]=At,ot[6]=Ct,ot[7]=Lt,ot[8]=Bt,ot[9]=zt,ot[10]=Wt,ot[11]=qt,ot[12]=dt*Xt+Et*Jt+Bt*nr+nt[12],ot[13]=ft*Xt+At*Jt+zt*nr+nt[13],ot[14]=mt*Xt+Ct*Jt+Wt*nr+nt[14],ot[15]=yt*Xt+Lt*Jt+qt*nr+nt[15]),ot},mn.scale=function(ot,nt,lt){var dt=lt[0],ft=lt[1],mt=lt[2];return ot[0]=nt[0]*dt,ot[1]=nt[1]*dt,ot[2]=nt[2]*dt,ot[3]=nt[3]*dt,ot[4]=nt[4]*ft,ot[5]=nt[5]*ft,ot[6]=nt[6]*ft,ot[7]=nt[7]*ft,ot[8]=nt[8]*mt,ot[9]=nt[9]*mt,ot[10]=nt[10]*mt,ot[11]=nt[11]*mt,ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15],ot},mn.rotate=function(ot,nt,lt,dt){var ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn=dt[0],Cn=dt[1],xn=dt[2],$n=Math.hypot(yn,Cn,xn);return $n<Rn.EPSILON?null:(yn*=$n=1/$n,Cn*=$n,xn*=$n,ft=Math.sin(lt),mt=Math.cos(lt),At=nt[1],Ct=nt[2],Lt=nt[3],zt=nt[5],Wt=nt[6],qt=nt[7],Jt=nt[9],nr=nt[10],gr=nt[11],pr=yn*yn*(yt=1-mt)+mt,Rr=yn*Cn*yt-xn*ft,Dr=Cn*Cn*yt+mt,Hr=xn*Cn*yt+yn*ft,Jr=yn*xn*yt+Cn*ft,an=Cn*xn*yt-yn*ft,Qr=xn*xn*yt+mt,ot[0]=(Et=nt[0])*pr+(Bt=nt[4])*(xr=Cn*yn*yt+xn*ft)+(Xt=nt[8])*(Pr=xn*yn*yt-Cn*ft),ot[1]=At*pr+zt*xr+Jt*Pr,ot[2]=Ct*pr+Wt*xr+nr*Pr,ot[3]=Lt*pr+qt*xr+gr*Pr,ot[4]=Et*Rr+Bt*Dr+Xt*Hr,ot[5]=At*Rr+zt*Dr+Jt*Hr,ot[6]=Ct*Rr+Wt*Dr+nr*Hr,ot[7]=Lt*Rr+qt*Dr+gr*Hr,ot[8]=Et*Jr+Bt*an+Xt*Qr,ot[9]=At*Jr+zt*an+Jt*Qr,ot[10]=Ct*Jr+Wt*an+nr*Qr,ot[11]=Lt*Jr+qt*an+gr*Qr,nt!==ot&&(ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15]),ot)},mn.rotateX=function(ot,nt,lt){var dt=Math.sin(lt),ft=Math.cos(lt),mt=nt[4],yt=nt[5],Et=nt[6],At=nt[7],Ct=nt[8],Lt=nt[9],Bt=nt[10],zt=nt[11];return nt!==ot&&(ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15]),ot[4]=mt*ft+Ct*dt,ot[5]=yt*ft+Lt*dt,ot[6]=Et*ft+Bt*dt,ot[7]=At*ft+zt*dt,ot[8]=Ct*ft-mt*dt,ot[9]=Lt*ft-yt*dt,ot[10]=Bt*ft-Et*dt,ot[11]=zt*ft-At*dt,ot},mn.rotateY=function(ot,nt,lt){var dt=Math.sin(lt),ft=Math.cos(lt),mt=nt[0],yt=nt[1],Et=nt[2],At=nt[3],Ct=nt[8],Lt=nt[9],Bt=nt[10],zt=nt[11];return nt!==ot&&(ot[4]=nt[4],ot[5]=nt[5],ot[6]=nt[6],ot[7]=nt[7],ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15]),ot[0]=mt*ft-Ct*dt,ot[1]=yt*ft-Lt*dt,ot[2]=Et*ft-Bt*dt,ot[3]=At*ft-zt*dt,ot[8]=mt*dt+Ct*ft,ot[9]=yt*dt+Lt*ft,ot[10]=Et*dt+Bt*ft,ot[11]=At*dt+zt*ft,ot},mn.rotateZ=function(ot,nt,lt){var dt=Math.sin(lt),ft=Math.cos(lt),mt=nt[0],yt=nt[1],Et=nt[2],At=nt[3],Ct=nt[4],Lt=nt[5],Bt=nt[6],zt=nt[7];return nt!==ot&&(ot[8]=nt[8],ot[9]=nt[9],ot[10]=nt[10],ot[11]=nt[11],ot[12]=nt[12],ot[13]=nt[13],ot[14]=nt[14],ot[15]=nt[15]),ot[0]=mt*ft+Ct*dt,ot[1]=yt*ft+Lt*dt,ot[2]=Et*ft+Bt*dt,ot[3]=At*ft+zt*dt,ot[4]=Ct*ft-mt*dt,ot[5]=Lt*ft-yt*dt,ot[6]=Bt*ft-Et*dt,ot[7]=zt*ft-At*dt,ot},mn.fromTranslation=function(ot,nt){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=1,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=1,ot[11]=0,ot[12]=nt[0],ot[13]=nt[1],ot[14]=nt[2],ot[15]=1,ot},mn.fromScaling=function(ot,nt){return ot[0]=nt[0],ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=nt[1],ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=nt[2],ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot},mn.fromRotation=function(ot,nt,lt){var dt,ft,mt,yt=lt[0],Et=lt[1],At=lt[2],Ct=Math.hypot(yt,Et,At);return Ct<Rn.EPSILON?null:(yt*=Ct=1/Ct,Et*=Ct,At*=Ct,dt=Math.sin(nt),ft=Math.cos(nt),ot[0]=yt*yt*(mt=1-ft)+ft,ot[1]=Et*yt*mt+At*dt,ot[2]=At*yt*mt-Et*dt,ot[3]=0,ot[4]=yt*Et*mt-At*dt,ot[5]=Et*Et*mt+ft,ot[6]=At*Et*mt+yt*dt,ot[7]=0,ot[8]=yt*At*mt+Et*dt,ot[9]=Et*At*mt-yt*dt,ot[10]=At*At*mt+ft,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot)},mn.fromXRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=dt,ot[6]=lt,ot[7]=0,ot[8]=0,ot[9]=-lt,ot[10]=dt,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot},mn.fromYRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=dt,ot[1]=0,ot[2]=-lt,ot[3]=0,ot[4]=0,ot[5]=1,ot[6]=0,ot[7]=0,ot[8]=lt,ot[9]=0,ot[10]=dt,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot},mn.fromZRotation=function(ot,nt){var lt=Math.sin(nt),dt=Math.cos(nt);return ot[0]=dt,ot[1]=lt,ot[2]=0,ot[3]=0,ot[4]=-lt,ot[5]=dt,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=1,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot},mn.fromRotationTranslation=xo,mn.fromQuat2=function(ot,nt){var lt=new Rn.ARRAY_TYPE(3),dt=-nt[0],ft=-nt[1],mt=-nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=dt*dt+ft*ft+mt*mt+yt*yt;return Bt>0?(lt[0]=2*(Et*yt+Lt*dt+At*mt-Ct*ft)/Bt,lt[1]=2*(At*yt+Lt*ft+Ct*dt-Et*mt)/Bt,lt[2]=2*(Ct*yt+Lt*mt+Et*ft-At*dt)/Bt):(lt[0]=2*(Et*yt+Lt*dt+At*mt-Ct*ft),lt[1]=2*(At*yt+Lt*ft+Ct*dt-Et*mt),lt[2]=2*(Ct*yt+Lt*mt+Et*ft-At*dt)),xo(ot,nt,lt),ot},mn.getTranslation=function(ot,nt){return ot[0]=nt[12],ot[1]=nt[13],ot[2]=nt[14],ot},mn.getScaling=Io,mn.getRotation=function(ot,nt){var lt=new Rn.ARRAY_TYPE(3);Io(lt,nt);var dt=1/lt[0],ft=1/lt[1],mt=1/lt[2],yt=nt[0]*dt,Et=nt[1]*ft,At=nt[2]*mt,Ct=nt[4]*dt,Lt=nt[5]*ft,Bt=nt[6]*mt,zt=nt[8]*dt,Wt=nt[9]*ft,qt=nt[10]*mt,Xt=yt+Lt+qt,Jt=0;return Xt>0?(Jt=2*Math.sqrt(Xt+1),ot[3]=.25*Jt,ot[0]=(Bt-Wt)/Jt,ot[1]=(zt-At)/Jt,ot[2]=(Et-Ct)/Jt):yt>Lt&&yt>qt?(Jt=2*Math.sqrt(1+yt-Lt-qt),ot[3]=(Bt-Wt)/Jt,ot[0]=.25*Jt,ot[1]=(Et+Ct)/Jt,ot[2]=(zt+At)/Jt):Lt>qt?(Jt=2*Math.sqrt(1+Lt-yt-qt),ot[3]=(zt-At)/Jt,ot[0]=(Et+Ct)/Jt,ot[1]=.25*Jt,ot[2]=(Bt+Wt)/Jt):(Jt=2*Math.sqrt(1+qt-yt-Lt),ot[3]=(Et-Ct)/Jt,ot[0]=(zt+At)/Jt,ot[1]=(Bt+Wt)/Jt,ot[2]=.25*Jt),ot},mn.fromRotationTranslationScale=function(ot,nt,lt,dt){var ft=nt[0],mt=nt[1],yt=nt[2],Et=nt[3],At=ft+ft,Ct=mt+mt,Lt=yt+yt,Bt=ft*At,zt=ft*Ct,Wt=ft*Lt,qt=mt*Ct,Xt=mt*Lt,Jt=yt*Lt,nr=Et*At,gr=Et*Ct,pr=Et*Lt,xr=dt[0],Pr=dt[1],Rr=dt[2];return ot[0]=(1-(qt+Jt))*xr,ot[1]=(zt+pr)*xr,ot[2]=(Wt-gr)*xr,ot[3]=0,ot[4]=(zt-pr)*Pr,ot[5]=(1-(Bt+Jt))*Pr,ot[6]=(Xt+nr)*Pr,ot[7]=0,ot[8]=(Wt+gr)*Rr,ot[9]=(Xt-nr)*Rr,ot[10]=(1-(Bt+qt))*Rr,ot[11]=0,ot[12]=lt[0],ot[13]=lt[1],ot[14]=lt[2],ot[15]=1,ot},mn.fromRotationTranslationScaleOrigin=function(ot,nt,lt,dt,ft){var mt=nt[0],yt=nt[1],Et=nt[2],At=nt[3],Ct=mt+mt,Lt=yt+yt,Bt=Et+Et,zt=mt*Ct,Wt=mt*Lt,qt=mt*Bt,Xt=yt*Lt,Jt=yt*Bt,nr=Et*Bt,gr=At*Ct,pr=At*Lt,xr=At*Bt,Pr=dt[0],Rr=dt[1],Dr=dt[2],Hr=ft[0],Jr=ft[1],an=ft[2],Qr=(1-(Xt+nr))*Pr,yn=(Wt+xr)*Pr,Cn=(qt-pr)*Pr,xn=(Wt-xr)*Rr,$n=(1-(zt+nr))*Rr,gn=(Jt+gr)*Rr,En=(qt+pr)*Dr,jn=(Jt-gr)*Dr,vn=(1-(zt+Xt))*Dr;return ot[0]=Qr,ot[1]=yn,ot[2]=Cn,ot[3]=0,ot[4]=xn,ot[5]=$n,ot[6]=gn,ot[7]=0,ot[8]=En,ot[9]=jn,ot[10]=vn,ot[11]=0,ot[12]=lt[0]+Hr-(Qr*Hr+xn*Jr+En*an),ot[13]=lt[1]+Jr-(yn*Hr+$n*Jr+jn*an),ot[14]=lt[2]+an-(Cn*Hr+gn*Jr+vn*an),ot[15]=1,ot},mn.fromQuat=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=lt+lt,Et=dt+dt,At=ft+ft,Ct=lt*yt,Lt=dt*yt,Bt=dt*Et,zt=ft*yt,Wt=ft*Et,qt=ft*At,Xt=mt*yt,Jt=mt*Et,nr=mt*At;return ot[0]=1-Bt-qt,ot[1]=Lt+nr,ot[2]=zt-Jt,ot[3]=0,ot[4]=Lt-nr,ot[5]=1-Ct-qt,ot[6]=Wt+Xt,ot[7]=0,ot[8]=zt+Jt,ot[9]=Wt-Xt,ot[10]=1-Ct-Bt,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot},mn.frustum=function(ot,nt,lt,dt,ft,mt,yt){var Et=1/(lt-nt),At=1/(ft-dt),Ct=1/(mt-yt);return ot[0]=2*mt*Et,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=2*mt*At,ot[6]=0,ot[7]=0,ot[8]=(lt+nt)*Et,ot[9]=(ft+dt)*At,ot[10]=(yt+mt)*Ct,ot[11]=-1,ot[12]=0,ot[13]=0,ot[14]=yt*mt*2*Ct,ot[15]=0,ot},mn.perspectiveNO=$o,mn.perspectiveZO=function(ot,nt,lt,dt,ft){var mt,yt=1/Math.tan(nt/2);return ot[0]=yt/lt,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=yt,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[11]=-1,ot[12]=0,ot[13]=0,ot[15]=0,ft!=null&&ft!==1/0?(ot[10]=ft*(mt=1/(dt-ft)),ot[14]=ft*dt*mt):(ot[10]=-1,ot[14]=-dt),ot},mn.perspectiveFromFieldOfView=function(ot,nt,lt,dt){var ft=Math.tan(nt.upDegrees*Math.PI/180),mt=Math.tan(nt.downDegrees*Math.PI/180),yt=Math.tan(nt.leftDegrees*Math.PI/180),Et=Math.tan(nt.rightDegrees*Math.PI/180),At=2/(yt+Et),Ct=2/(ft+mt);return ot[0]=At,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=Ct,ot[6]=0,ot[7]=0,ot[8]=-(yt-Et)*At*.5,ot[9]=(ft-mt)*Ct*.5,ot[10]=dt/(lt-dt),ot[11]=-1,ot[12]=0,ot[13]=0,ot[14]=dt*lt/(lt-dt),ot[15]=0,ot},mn.orthoNO=Zr,mn.orthoZO=function(ot,nt,lt,dt,ft,mt,yt){var Et=1/(nt-lt),At=1/(dt-ft),Ct=1/(mt-yt);return ot[0]=-2*Et,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=-2*At,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=Ct,ot[11]=0,ot[12]=(nt+lt)*Et,ot[13]=(ft+dt)*At,ot[14]=mt*Ct,ot[15]=1,ot},mn.lookAt=function(ot,nt,lt,dt){var ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt=nt[0],Xt=nt[1],Jt=nt[2],nr=dt[0],gr=dt[1],pr=dt[2],xr=lt[0],Pr=lt[1],Rr=lt[2];return Math.abs(qt-xr)<Rn.EPSILON&&Math.abs(Xt-Pr)<Rn.EPSILON&&Math.abs(Jt-Rr)<Rn.EPSILON?qn(ot):(Lt=qt-xr,Bt=Xt-Pr,zt=Jt-Rr,ft=gr*(zt*=Wt=1/Math.hypot(Lt,Bt,zt))-pr*(Bt*=Wt),mt=pr*(Lt*=Wt)-nr*zt,yt=nr*Bt-gr*Lt,(Wt=Math.hypot(ft,mt,yt))?(ft*=Wt=1/Wt,mt*=Wt,yt*=Wt):(ft=0,mt=0,yt=0),Et=Bt*yt-zt*mt,At=zt*ft-Lt*yt,Ct=Lt*mt-Bt*ft,(Wt=Math.hypot(Et,At,Ct))?(Et*=Wt=1/Wt,At*=Wt,Ct*=Wt):(Et=0,At=0,Ct=0),ot[0]=ft,ot[1]=Et,ot[2]=Lt,ot[3]=0,ot[4]=mt,ot[5]=At,ot[6]=Bt,ot[7]=0,ot[8]=yt,ot[9]=Ct,ot[10]=zt,ot[11]=0,ot[12]=-(ft*qt+mt*Xt+yt*Jt),ot[13]=-(Et*qt+At*Xt+Ct*Jt),ot[14]=-(Lt*qt+Bt*Xt+zt*Jt),ot[15]=1,ot)},mn.targetTo=function(ot,nt,lt,dt){var ft=nt[0],mt=nt[1],yt=nt[2],Et=dt[0],At=dt[1],Ct=dt[2],Lt=ft-lt[0],Bt=mt-lt[1],zt=yt-lt[2],Wt=Lt*Lt+Bt*Bt+zt*zt;Wt>0&&(Lt*=Wt=1/Math.sqrt(Wt),Bt*=Wt,zt*=Wt);var qt=At*zt-Ct*Bt,Xt=Ct*Lt-Et*zt,Jt=Et*Bt-At*Lt;return(Wt=qt*qt+Xt*Xt+Jt*Jt)>0&&(qt*=Wt=1/Math.sqrt(Wt),Xt*=Wt,Jt*=Wt),ot[0]=qt,ot[1]=Xt,ot[2]=Jt,ot[3]=0,ot[4]=Bt*Jt-zt*Xt,ot[5]=zt*qt-Lt*Jt,ot[6]=Lt*Xt-Bt*qt,ot[7]=0,ot[8]=Lt,ot[9]=Bt,ot[10]=zt,ot[11]=0,ot[12]=ft,ot[13]=mt,ot[14]=yt,ot[15]=1,ot},mn.str=function(ot){return"mat4("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+", "+ot[6]+", "+ot[7]+", "+ot[8]+", "+ot[9]+", "+ot[10]+", "+ot[11]+", "+ot[12]+", "+ot[13]+", "+ot[14]+", "+ot[15]+")"},mn.frob=function(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3],ot[4],ot[5],ot[6],ot[7],ot[8],ot[9],ot[10],ot[11],ot[12],ot[13],ot[14],ot[15])},mn.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot[4]=nt[4]+lt[4],ot[5]=nt[5]+lt[5],ot[6]=nt[6]+lt[6],ot[7]=nt[7]+lt[7],ot[8]=nt[8]+lt[8],ot[9]=nt[9]+lt[9],ot[10]=nt[10]+lt[10],ot[11]=nt[11]+lt[11],ot[12]=nt[12]+lt[12],ot[13]=nt[13]+lt[13],ot[14]=nt[14]+lt[14],ot[15]=nt[15]+lt[15],ot},mn.subtract=pn,mn.multiplyScalar=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot[4]=nt[4]*lt,ot[5]=nt[5]*lt,ot[6]=nt[6]*lt,ot[7]=nt[7]*lt,ot[8]=nt[8]*lt,ot[9]=nt[9]*lt,ot[10]=nt[10]*lt,ot[11]=nt[11]*lt,ot[12]=nt[12]*lt,ot[13]=nt[13]*lt,ot[14]=nt[14]*lt,ot[15]=nt[15]*lt,ot},mn.multiplyScalarAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot[3]=nt[3]+lt[3]*dt,ot[4]=nt[4]+lt[4]*dt,ot[5]=nt[5]+lt[5]*dt,ot[6]=nt[6]+lt[6]*dt,ot[7]=nt[7]+lt[7]*dt,ot[8]=nt[8]+lt[8]*dt,ot[9]=nt[9]+lt[9]*dt,ot[10]=nt[10]+lt[10]*dt,ot[11]=nt[11]+lt[11]*dt,ot[12]=nt[12]+lt[12]*dt,ot[13]=nt[13]+lt[13]*dt,ot[14]=nt[14]+lt[14]*dt,ot[15]=nt[15]+lt[15]*dt,ot},mn.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]&&ot[4]===nt[4]&&ot[5]===nt[5]&&ot[6]===nt[6]&&ot[7]===nt[7]&&ot[8]===nt[8]&&ot[9]===nt[9]&&ot[10]===nt[10]&&ot[11]===nt[11]&&ot[12]===nt[12]&&ot[13]===nt[13]&&ot[14]===nt[14]&&ot[15]===nt[15]},mn.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=ot[4],Et=ot[5],At=ot[6],Ct=ot[7],Lt=ot[8],Bt=ot[9],zt=ot[10],Wt=ot[11],qt=ot[12],Xt=ot[13],Jt=ot[14],nr=ot[15],gr=nt[0],pr=nt[1],xr=nt[2],Pr=nt[3],Rr=nt[4],Dr=nt[5],Hr=nt[6],Jr=nt[7],an=nt[8],Qr=nt[9],yn=nt[10],Cn=nt[11],xn=nt[12],$n=nt[13],gn=nt[14],En=nt[15];return Math.abs(lt-gr)<=Rn.EPSILON*Math.max(1,Math.abs(lt),Math.abs(gr))&&Math.abs(dt-pr)<=Rn.EPSILON*Math.max(1,Math.abs(dt),Math.abs(pr))&&Math.abs(ft-xr)<=Rn.EPSILON*Math.max(1,Math.abs(ft),Math.abs(xr))&&Math.abs(mt-Pr)<=Rn.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Pr))&&Math.abs(yt-Rr)<=Rn.EPSILON*Math.max(1,Math.abs(yt),Math.abs(Rr))&&Math.abs(Et-Dr)<=Rn.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Dr))&&Math.abs(At-Hr)<=Rn.EPSILON*Math.max(1,Math.abs(At),Math.abs(Hr))&&Math.abs(Ct-Jr)<=Rn.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(Jr))&&Math.abs(Lt-an)<=Rn.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(an))&&Math.abs(Bt-Qr)<=Rn.EPSILON*Math.max(1,Math.abs(Bt),Math.abs(Qr))&&Math.abs(zt-yn)<=Rn.EPSILON*Math.max(1,Math.abs(zt),Math.abs(yn))&&Math.abs(Wt-Cn)<=Rn.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(Cn))&&Math.abs(qt-xn)<=Rn.EPSILON*Math.max(1,Math.abs(qt),Math.abs(xn))&&Math.abs(Xt-$n)<=Rn.EPSILON*Math.max(1,Math.abs(Xt),Math.abs($n))&&Math.abs(Jt-gn)<=Rn.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(gn))&&Math.abs(nr-En)<=Rn.EPSILON*Math.max(1,Math.abs(nr),Math.abs(En))},mn.sub=mn.mul=mn.ortho=mn.perspective=void 0;var Rn=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Hn(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=dn(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function dn(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(dn=function(dt){return dt?lt:nt})(ot)}function qn(ot){return ot[0]=1,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=1,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=1,ot[11]=0,ot[12]=0,ot[13]=0,ot[14]=0,ot[15]=1,ot}function On(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=nt[8],zt=nt[9],Wt=nt[10],qt=nt[11],Xt=nt[12],Jt=nt[13],nr=nt[14],gr=nt[15],pr=lt[0],xr=lt[1],Pr=lt[2],Rr=lt[3];return ot[0]=pr*dt+xr*Et+Pr*Bt+Rr*Xt,ot[1]=pr*ft+xr*At+Pr*zt+Rr*Jt,ot[2]=pr*mt+xr*Ct+Pr*Wt+Rr*nr,ot[3]=pr*yt+xr*Lt+Pr*qt+Rr*gr,ot[4]=(pr=lt[4])*dt+(xr=lt[5])*Et+(Pr=lt[6])*Bt+(Rr=lt[7])*Xt,ot[5]=pr*ft+xr*At+Pr*zt+Rr*Jt,ot[6]=pr*mt+xr*Ct+Pr*Wt+Rr*nr,ot[7]=pr*yt+xr*Lt+Pr*qt+Rr*gr,ot[8]=(pr=lt[8])*dt+(xr=lt[9])*Et+(Pr=lt[10])*Bt+(Rr=lt[11])*Xt,ot[9]=pr*ft+xr*At+Pr*zt+Rr*Jt,ot[10]=pr*mt+xr*Ct+Pr*Wt+Rr*nr,ot[11]=pr*yt+xr*Lt+Pr*qt+Rr*gr,ot[12]=(pr=lt[12])*dt+(xr=lt[13])*Et+(Pr=lt[14])*Bt+(Rr=lt[15])*Xt,ot[13]=pr*ft+xr*At+Pr*zt+Rr*Jt,ot[14]=pr*mt+xr*Ct+Pr*Wt+Rr*nr,ot[15]=pr*yt+xr*Lt+Pr*qt+Rr*gr,ot}function xo(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=dt+dt,At=ft+ft,Ct=mt+mt,Lt=dt*Et,Bt=dt*At,zt=dt*Ct,Wt=ft*At,qt=ft*Ct,Xt=mt*Ct,Jt=yt*Et,nr=yt*At,gr=yt*Ct;return ot[0]=1-(Wt+Xt),ot[1]=Bt+gr,ot[2]=zt-nr,ot[3]=0,ot[4]=Bt-gr,ot[5]=1-(Lt+Xt),ot[6]=qt+Jt,ot[7]=0,ot[8]=zt+nr,ot[9]=qt-Jt,ot[10]=1-(Lt+Wt),ot[11]=0,ot[12]=lt[0],ot[13]=lt[1],ot[14]=lt[2],ot[15]=1,ot}function Io(ot,nt){var lt=nt[4],dt=nt[5],ft=nt[6],mt=nt[8],yt=nt[9],Et=nt[10];return ot[0]=Math.hypot(nt[0],nt[1],nt[2]),ot[1]=Math.hypot(lt,dt,ft),ot[2]=Math.hypot(mt,yt,Et),ot}function $o(ot,nt,lt,dt,ft){var mt,yt=1/Math.tan(nt/2);return ot[0]=yt/lt,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=yt,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[11]=-1,ot[12]=0,ot[13]=0,ot[15]=0,ft!=null&&ft!==1/0?(ot[10]=(ft+dt)*(mt=1/(dt-ft)),ot[14]=2*ft*dt*mt):(ot[10]=-1,ot[14]=-2*dt),ot}function Zr(ot,nt,lt,dt,ft,mt,yt){var Et=1/(nt-lt),At=1/(dt-ft),Ct=1/(mt-yt);return ot[0]=-2*Et,ot[1]=0,ot[2]=0,ot[3]=0,ot[4]=0,ot[5]=-2*At,ot[6]=0,ot[7]=0,ot[8]=0,ot[9]=0,ot[10]=2*Ct,ot[11]=0,ot[12]=(nt+lt)*Et,ot[13]=(ft+dt)*At,ot[14]=(yt+mt)*Ct,ot[15]=1,ot}function pn(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot[3]=nt[3]-lt[3],ot[4]=nt[4]-lt[4],ot[5]=nt[5]-lt[5],ot[6]=nt[6]-lt[6],ot[7]=nt[7]-lt[7],ot[8]=nt[8]-lt[8],ot[9]=nt[9]-lt[9],ot[10]=nt[10]-lt[10],ot[11]=nt[11]-lt[11],ot[12]=nt[12]-lt[12],ot[13]=nt[13]-lt[13],ot[14]=nt[14]-lt[14],ot[15]=nt[15]-lt[15],ot}mn.perspective=$o,mn.ortho=Zr,mn.mul=On,mn.sub=pn;var sn={},wn={};function Xn(ot){return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Xn(ot)}Object.defineProperty(wn,"__esModule",{value:!0}),wn.create=No,wn.clone=function(ot){var nt=new Fn.ARRAY_TYPE(3);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt},wn.length=co,wn.fromValues=function(ot,nt,lt){var dt=new Fn.ARRAY_TYPE(3);return dt[0]=ot,dt[1]=nt,dt[2]=lt,dt},wn.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot},wn.set=function(ot,nt,lt,dt){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot},wn.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot},wn.subtract=Ao,wn.multiply=vo,wn.divide=Fo,wn.ceil=function(ot,nt){return ot[0]=Math.ceil(nt[0]),ot[1]=Math.ceil(nt[1]),ot[2]=Math.ceil(nt[2]),ot},wn.floor=function(ot,nt){return ot[0]=Math.floor(nt[0]),ot[1]=Math.floor(nt[1]),ot[2]=Math.floor(nt[2]),ot},wn.min=function(ot,nt,lt){return ot[0]=Math.min(nt[0],lt[0]),ot[1]=Math.min(nt[1],lt[1]),ot[2]=Math.min(nt[2],lt[2]),ot},wn.max=function(ot,nt,lt){return ot[0]=Math.max(nt[0],lt[0]),ot[1]=Math.max(nt[1],lt[1]),ot[2]=Math.max(nt[2],lt[2]),ot},wn.round=function(ot,nt){return ot[0]=Math.round(nt[0]),ot[1]=Math.round(nt[1]),ot[2]=Math.round(nt[2]),ot},wn.scale=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot},wn.scaleAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot},wn.distance=ds,wn.squaredDistance=bs,wn.squaredLength=Yo,wn.negate=function(ot,nt){return ot[0]=-nt[0],ot[1]=-nt[1],ot[2]=-nt[2],ot},wn.inverse=function(ot,nt){return ot[0]=1/nt[0],ot[1]=1/nt[1],ot[2]=1/nt[2],ot},wn.normalize=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=lt*lt+dt*dt+ft*ft;return mt>0&&(mt=1/Math.sqrt(mt)),ot[0]=nt[0]*mt,ot[1]=nt[1]*mt,ot[2]=nt[2]*mt,ot},wn.dot=Po,wn.cross=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=lt[0],Et=lt[1],At=lt[2];return ot[0]=ft*At-mt*Et,ot[1]=mt*yt-dt*At,ot[2]=dt*Et-ft*yt,ot},wn.lerp=function(ot,nt,lt,dt){var ft=nt[0],mt=nt[1],yt=nt[2];return ot[0]=ft+dt*(lt[0]-ft),ot[1]=mt+dt*(lt[1]-mt),ot[2]=yt+dt*(lt[2]-yt),ot},wn.hermite=function(ot,nt,lt,dt,ft,mt){var yt=mt*mt,Et=yt*(2*mt-3)+1,At=yt*(mt-2)+mt,Ct=yt*(mt-1),Lt=yt*(3-2*mt);return ot[0]=nt[0]*Et+lt[0]*At+dt[0]*Ct+ft[0]*Lt,ot[1]=nt[1]*Et+lt[1]*At+dt[1]*Ct+ft[1]*Lt,ot[2]=nt[2]*Et+lt[2]*At+dt[2]*Ct+ft[2]*Lt,ot},wn.bezier=function(ot,nt,lt,dt,ft,mt){var yt=1-mt,Et=yt*yt,At=mt*mt,Ct=Et*yt,Lt=3*mt*Et,Bt=3*At*yt,zt=At*mt;return ot[0]=nt[0]*Ct+lt[0]*Lt+dt[0]*Bt+ft[0]*zt,ot[1]=nt[1]*Ct+lt[1]*Lt+dt[1]*Bt+ft[1]*zt,ot[2]=nt[2]*Ct+lt[2]*Lt+dt[2]*Bt+ft[2]*zt,ot},wn.random=function(ot,nt){nt=nt||1;var lt=2*Fn.RANDOM()*Math.PI,dt=2*Fn.RANDOM()-1,ft=Math.sqrt(1-dt*dt)*nt;return ot[0]=Math.cos(lt)*ft,ot[1]=Math.sin(lt)*ft,ot[2]=dt*nt,ot},wn.transformMat4=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=lt[3]*dt+lt[7]*ft+lt[11]*mt+lt[15];return ot[0]=(lt[0]*dt+lt[4]*ft+lt[8]*mt+lt[12])/(yt=yt||1),ot[1]=(lt[1]*dt+lt[5]*ft+lt[9]*mt+lt[13])/yt,ot[2]=(lt[2]*dt+lt[6]*ft+lt[10]*mt+lt[14])/yt,ot},wn.transformMat3=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2];return ot[0]=dt*lt[0]+ft*lt[3]+mt*lt[6],ot[1]=dt*lt[1]+ft*lt[4]+mt*lt[7],ot[2]=dt*lt[2]+ft*lt[5]+mt*lt[8],ot},wn.transformQuat=function(ot,nt,lt){var dt=lt[0],ft=lt[1],mt=lt[2],yt=nt[0],Et=nt[1],At=nt[2],Ct=ft*At-mt*Et,Lt=mt*yt-dt*At,Bt=dt*Et-ft*yt,zt=ft*Bt-mt*Lt,Wt=mt*Ct-dt*Bt,qt=dt*Lt-ft*Ct,Xt=2*lt[3];return Lt*=Xt,Bt*=Xt,Wt*=2,qt*=2,ot[0]=yt+(Ct*=Xt)+(zt*=2),ot[1]=Et+Lt+Wt,ot[2]=At+Bt+qt,ot},wn.rotateX=function(ot,nt,lt,dt){var ft=[],mt=[];return ft[0]=nt[0]-lt[0],ft[1]=nt[1]-lt[1],ft[2]=nt[2]-lt[2],mt[0]=ft[0],mt[1]=ft[1]*Math.cos(dt)-ft[2]*Math.sin(dt),mt[2]=ft[1]*Math.sin(dt)+ft[2]*Math.cos(dt),ot[0]=mt[0]+lt[0],ot[1]=mt[1]+lt[1],ot[2]=mt[2]+lt[2],ot},wn.rotateY=function(ot,nt,lt,dt){var ft=[],mt=[];return ft[0]=nt[0]-lt[0],ft[1]=nt[1]-lt[1],ft[2]=nt[2]-lt[2],mt[0]=ft[2]*Math.sin(dt)+ft[0]*Math.cos(dt),mt[1]=ft[1],mt[2]=ft[2]*Math.cos(dt)-ft[0]*Math.sin(dt),ot[0]=mt[0]+lt[0],ot[1]=mt[1]+lt[1],ot[2]=mt[2]+lt[2],ot},wn.rotateZ=function(ot,nt,lt,dt){var ft=[],mt=[];return ft[0]=nt[0]-lt[0],ft[1]=nt[1]-lt[1],ft[2]=nt[2]-lt[2],mt[0]=ft[0]*Math.cos(dt)-ft[1]*Math.sin(dt),mt[1]=ft[0]*Math.sin(dt)+ft[1]*Math.cos(dt),mt[2]=ft[2],ot[0]=mt[0]+lt[0],ot[1]=mt[1]+lt[1],ot[2]=mt[2]+lt[2],ot},wn.angle=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=nt[0],yt=nt[1],Et=nt[2],At=Math.sqrt(lt*lt+dt*dt+ft*ft)*Math.sqrt(mt*mt+yt*yt+Et*Et),Ct=At&&Po(ot,nt)/At;return Math.acos(Math.min(Math.max(Ct,-1),1))},wn.zero=function(ot){return ot[0]=0,ot[1]=0,ot[2]=0,ot},wn.str=function(ot){return"vec3("+ot[0]+", "+ot[1]+", "+ot[2]+")"},wn.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]},wn.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=nt[0],yt=nt[1],Et=nt[2];return Math.abs(lt-mt)<=Fn.EPSILON*Math.max(1,Math.abs(lt),Math.abs(mt))&&Math.abs(dt-yt)<=Fn.EPSILON*Math.max(1,Math.abs(dt),Math.abs(yt))&&Math.abs(ft-Et)<=Fn.EPSILON*Math.max(1,Math.abs(ft),Math.abs(Et))},wn.forEach=wn.sqrLen=wn.len=wn.sqrDist=wn.dist=wn.div=wn.mul=wn.sub=void 0;var Fn=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Xn(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=ro(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function ro(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(ro=function(dt){return dt?lt:nt})(ot)}function No(){var ot=new Fn.ARRAY_TYPE(3);return Fn.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0),ot}function co(ot){return Math.hypot(ot[0],ot[1],ot[2])}function Ao(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot}function vo(ot,nt,lt){return ot[0]=nt[0]*lt[0],ot[1]=nt[1]*lt[1],ot[2]=nt[2]*lt[2],ot}function Fo(ot,nt,lt){return ot[0]=nt[0]/lt[0],ot[1]=nt[1]/lt[1],ot[2]=nt[2]/lt[2],ot}function ds(ot,nt){return Math.hypot(nt[0]-ot[0],nt[1]-ot[1],nt[2]-ot[2])}function bs(ot,nt){var lt=nt[0]-ot[0],dt=nt[1]-ot[1],ft=nt[2]-ot[2];return lt*lt+dt*dt+ft*ft}function Yo(ot){var nt=ot[0],lt=ot[1],dt=ot[2];return nt*nt+lt*lt+dt*dt}function Po(ot,nt){return ot[0]*nt[0]+ot[1]*nt[1]+ot[2]*nt[2]}wn.sub=Ao,wn.mul=vo,wn.div=Fo,wn.dist=ds,wn.sqrDist=bs,wn.len=co,wn.sqrLen=Yo;var gs,ws=(gs=No(),function(ot,nt,lt,dt,ft,mt){var yt,Et;for(nt||(nt=3),lt||(lt=0),Et=dt?Math.min(dt*nt+lt,ot.length):ot.length,yt=lt;yt<Et;yt+=nt)gs[0]=ot[yt],gs[1]=ot[yt+1],gs[2]=ot[yt+2],ft(gs,gs,mt),ot[yt]=gs[0],ot[yt+1]=gs[1],ot[yt+2]=gs[2];return ot});wn.forEach=ws;var go={};function Su(ot){return Su=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Su(ot)}Object.defineProperty(go,"__esModule",{value:!0}),go.create=du,go.clone=function(ot){var nt=new zs.ARRAY_TYPE(4);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt},go.fromValues=function(ot,nt,lt,dt){var ft=new zs.ARRAY_TYPE(4);return ft[0]=ot,ft[1]=nt,ft[2]=lt,ft[3]=dt,ft},go.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot},go.set=function(ot,nt,lt,dt,ft){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot},go.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot},go.subtract=Pl,go.multiply=Vu,go.divide=Uu,go.ceil=function(ot,nt){return ot[0]=Math.ceil(nt[0]),ot[1]=Math.ceil(nt[1]),ot[2]=Math.ceil(nt[2]),ot[3]=Math.ceil(nt[3]),ot},go.floor=function(ot,nt){return ot[0]=Math.floor(nt[0]),ot[1]=Math.floor(nt[1]),ot[2]=Math.floor(nt[2]),ot[3]=Math.floor(nt[3]),ot},go.min=function(ot,nt,lt){return ot[0]=Math.min(nt[0],lt[0]),ot[1]=Math.min(nt[1],lt[1]),ot[2]=Math.min(nt[2],lt[2]),ot[3]=Math.min(nt[3],lt[3]),ot},go.max=function(ot,nt,lt){return ot[0]=Math.max(nt[0],lt[0]),ot[1]=Math.max(nt[1],lt[1]),ot[2]=Math.max(nt[2],lt[2]),ot[3]=Math.max(nt[3],lt[3]),ot},go.round=function(ot,nt){return ot[0]=Math.round(nt[0]),ot[1]=Math.round(nt[1]),ot[2]=Math.round(nt[2]),ot[3]=Math.round(nt[3]),ot},go.scale=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot},go.scaleAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot[2]=nt[2]+lt[2]*dt,ot[3]=nt[3]+lt[3]*dt,ot},go.distance=Gu,go.squaredDistance=cp,go.length=jp,go.squaredLength=Dp,go.negate=function(ot,nt){return ot[0]=-nt[0],ot[1]=-nt[1],ot[2]=-nt[2],ot[3]=-nt[3],ot},go.inverse=function(ot,nt){return ot[0]=1/nt[0],ot[1]=1/nt[1],ot[2]=1/nt[2],ot[3]=1/nt[3],ot},go.normalize=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=lt*lt+dt*dt+ft*ft+mt*mt;return yt>0&&(yt=1/Math.sqrt(yt)),ot[0]=lt*yt,ot[1]=dt*yt,ot[2]=ft*yt,ot[3]=mt*yt,ot},go.dot=function(ot,nt){return ot[0]*nt[0]+ot[1]*nt[1]+ot[2]*nt[2]+ot[3]*nt[3]},go.cross=function(ot,nt,lt,dt){var ft=lt[0]*dt[1]-lt[1]*dt[0],mt=lt[0]*dt[2]-lt[2]*dt[0],yt=lt[0]*dt[3]-lt[3]*dt[0],Et=lt[1]*dt[2]-lt[2]*dt[1],At=lt[1]*dt[3]-lt[3]*dt[1],Ct=lt[2]*dt[3]-lt[3]*dt[2],Lt=nt[0],Bt=nt[1],zt=nt[2],Wt=nt[3];return ot[0]=Bt*Ct-zt*At+Wt*Et,ot[1]=-Lt*Ct+zt*yt-Wt*mt,ot[2]=Lt*At-Bt*yt+Wt*ft,ot[3]=-Lt*Et+Bt*mt-zt*ft,ot},go.lerp=function(ot,nt,lt,dt){var ft=nt[0],mt=nt[1],yt=nt[2],Et=nt[3];return ot[0]=ft+dt*(lt[0]-ft),ot[1]=mt+dt*(lt[1]-mt),ot[2]=yt+dt*(lt[2]-yt),ot[3]=Et+dt*(lt[3]-Et),ot},go.random=function(ot,nt){var lt,dt,ft,mt,yt,Et;nt=nt||1;do yt=(lt=2*zs.RANDOM()-1)*lt+(dt=2*zs.RANDOM()-1)*dt;while(yt>=1);do Et=(ft=2*zs.RANDOM()-1)*ft+(mt=2*zs.RANDOM()-1)*mt;while(Et>=1);var At=Math.sqrt((1-yt)/Et);return ot[0]=nt*lt,ot[1]=nt*dt,ot[2]=nt*ft*At,ot[3]=nt*mt*At,ot},go.transformMat4=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3];return ot[0]=lt[0]*dt+lt[4]*ft+lt[8]*mt+lt[12]*yt,ot[1]=lt[1]*dt+lt[5]*ft+lt[9]*mt+lt[13]*yt,ot[2]=lt[2]*dt+lt[6]*ft+lt[10]*mt+lt[14]*yt,ot[3]=lt[3]*dt+lt[7]*ft+lt[11]*mt+lt[15]*yt,ot},go.transformQuat=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=lt[0],Et=lt[1],At=lt[2],Ct=lt[3],Lt=Ct*dt+Et*mt-At*ft,Bt=Ct*ft+At*dt-yt*mt,zt=Ct*mt+yt*ft-Et*dt,Wt=-yt*dt-Et*ft-At*mt;return ot[0]=Lt*Ct+Wt*-yt+Bt*-At-zt*-Et,ot[1]=Bt*Ct+Wt*-Et+zt*-yt-Lt*-At,ot[2]=zt*Ct+Wt*-At+Lt*-Et-Bt*-yt,ot[3]=nt[3],ot},go.zero=function(ot){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=0,ot},go.str=function(ot){return"vec4("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+")"},go.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]},go.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=nt[0],Et=nt[1],At=nt[2],Ct=nt[3];return Math.abs(lt-yt)<=zs.EPSILON*Math.max(1,Math.abs(lt),Math.abs(yt))&&Math.abs(dt-Et)<=zs.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Et))&&Math.abs(ft-At)<=zs.EPSILON*Math.max(1,Math.abs(ft),Math.abs(At))&&Math.abs(mt-Ct)<=zs.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Ct))},go.forEach=go.sqrLen=go.len=go.sqrDist=go.dist=go.div=go.mul=go.sub=void 0;var zs=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Su(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=Il(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function Il(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(Il=function(dt){return dt?lt:nt})(ot)}function du(){var ot=new zs.ARRAY_TYPE(4);return zs.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=0),ot}function Pl(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot[2]=nt[2]-lt[2],ot[3]=nt[3]-lt[3],ot}function Vu(ot,nt,lt){return ot[0]=nt[0]*lt[0],ot[1]=nt[1]*lt[1],ot[2]=nt[2]*lt[2],ot[3]=nt[3]*lt[3],ot}function Uu(ot,nt,lt){return ot[0]=nt[0]/lt[0],ot[1]=nt[1]/lt[1],ot[2]=nt[2]/lt[2],ot[3]=nt[3]/lt[3],ot}function Gu(ot,nt){return Math.hypot(nt[0]-ot[0],nt[1]-ot[1],nt[2]-ot[2],nt[3]-ot[3])}function cp(ot,nt){var lt=nt[0]-ot[0],dt=nt[1]-ot[1],ft=nt[2]-ot[2],mt=nt[3]-ot[3];return lt*lt+dt*dt+ft*ft+mt*mt}function jp(ot){return Math.hypot(ot[0],ot[1],ot[2],ot[3])}function Dp(ot){var nt=ot[0],lt=ot[1],dt=ot[2],ft=ot[3];return nt*nt+lt*lt+dt*dt+ft*ft}go.sub=Pl,go.mul=Vu,go.div=Uu,go.dist=Gu,go.sqrDist=cp,go.len=jp,go.sqrLen=Dp;var Wu=function(){var ot=du();return function(nt,lt,dt,ft,mt,yt){var Et,At;for(lt||(lt=4),dt||(dt=0),At=ft?Math.min(ft*lt+dt,nt.length):nt.length,Et=dt;Et<At;Et+=lt)ot[0]=nt[Et],ot[1]=nt[Et+1],ot[2]=nt[Et+2],ot[3]=nt[Et+3],mt(ot,ot,yt),nt[Et]=ot[0],nt[Et+1]=ot[1],nt[Et+2]=ot[2],nt[Et+3]=ot[3];return nt}}();function Lp(ot){return Lp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Lp(ot)}go.forEach=Wu,Object.defineProperty(sn,"__esModule",{value:!0}),sn.create=Np,sn.identity=function(ot){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot},sn.setAxisAngle=Is,sn.getAxisAngle=function(ot,nt){var lt=2*Math.acos(nt[3]),dt=Math.sin(lt/2);return dt>Yl.EPSILON?(ot[0]=nt[0]/dt,ot[1]=nt[1]/dt,ot[2]=nt[2]/dt):(ot[0]=1,ot[1]=0,ot[2]=0),lt},sn.getAngle=function(ot,nt){var lt=jr(ot,nt);return Math.acos(2*lt*lt-1)},sn.multiply=Cm,sn.rotateX=function(ot,nt,lt){lt*=.5;var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=Math.sin(lt),At=Math.cos(lt);return ot[0]=dt*At+yt*Et,ot[1]=ft*At+mt*Et,ot[2]=mt*At-ft*Et,ot[3]=yt*At-dt*Et,ot},sn.rotateY=function(ot,nt,lt){lt*=.5;var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=Math.sin(lt),At=Math.cos(lt);return ot[0]=dt*At-mt*Et,ot[1]=ft*At+yt*Et,ot[2]=mt*At+dt*Et,ot[3]=yt*At-ft*Et,ot},sn.rotateZ=function(ot,nt,lt){lt*=.5;var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=Math.sin(lt),At=Math.cos(lt);return ot[0]=dt*At+ft*Et,ot[1]=ft*At-dt*Et,ot[2]=mt*At+yt*Et,ot[3]=yt*At-mt*Et,ot},sn.calculateW=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2];return ot[0]=lt,ot[1]=dt,ot[2]=ft,ot[3]=Math.sqrt(Math.abs(1-lt*lt-dt*dt-ft*ft)),ot},sn.exp=Gr,sn.ln=or,sn.pow=function(ot,nt,lt){return or(ot,nt),Br(ot,ot,lt),Gr(ot,ot),ot},sn.slerp=dr,sn.random=function(ot){var nt=Yl.RANDOM(),lt=Yl.RANDOM(),dt=Yl.RANDOM(),ft=Math.sqrt(1-nt),mt=Math.sqrt(nt);return ot[0]=ft*Math.sin(2*Math.PI*lt),ot[1]=ft*Math.cos(2*Math.PI*lt),ot[2]=mt*Math.sin(2*Math.PI*dt),ot[3]=mt*Math.cos(2*Math.PI*dt),ot},sn.invert=function(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=lt*lt+dt*dt+ft*ft+mt*mt,Et=yt?1/yt:0;return ot[0]=-lt*Et,ot[1]=-dt*Et,ot[2]=-ft*Et,ot[3]=mt*Et,ot},sn.conjugate=function(ot,nt){return ot[0]=-nt[0],ot[1]=-nt[1],ot[2]=-nt[2],ot[3]=nt[3],ot},sn.fromMat3=Sr,sn.fromEuler=function(ot,nt,lt,dt){var ft=.5*Math.PI/180;nt*=ft,lt*=ft,dt*=ft;var mt=Math.sin(nt),yt=Math.cos(nt),Et=Math.sin(lt),At=Math.cos(lt),Ct=Math.sin(dt),Lt=Math.cos(dt);return ot[0]=mt*At*Lt-yt*Et*Ct,ot[1]=yt*Et*Lt+mt*At*Ct,ot[2]=yt*At*Ct-mt*Et*Lt,ot[3]=yt*At*Lt+mt*Et*Ct,ot},sn.str=function(ot){return"quat("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+")"},sn.setAxes=sn.sqlerp=sn.rotationTo=sn.equals=sn.exactEquals=sn.normalize=sn.sqrLen=sn.squaredLength=sn.len=sn.length=sn.lerp=sn.dot=sn.scale=sn.mul=sn.add=sn.set=sn.copy=sn.fromValues=sn.clone=void 0;var Yl=up(Ht),J0=up(fn),Xl=up(wn),Vs=up(go);function Pm(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(Pm=function(dt){return dt?lt:nt})(ot)}function up(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Lp(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=Pm(nt);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}function Np(){var ot=new Yl.ARRAY_TYPE(4);return Yl.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0),ot[3]=1,ot}function Is(ot,nt,lt){lt*=.5;var dt=Math.sin(lt);return ot[0]=dt*nt[0],ot[1]=dt*nt[1],ot[2]=dt*nt[2],ot[3]=Math.cos(lt),ot}function Cm(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=lt[0],At=lt[1],Ct=lt[2],Lt=lt[3];return ot[0]=dt*Lt+yt*Et+ft*Ct-mt*At,ot[1]=ft*Lt+yt*At+mt*Et-dt*Ct,ot[2]=mt*Lt+yt*Ct+dt*At-ft*Et,ot[3]=yt*Lt-dt*Et-ft*At-mt*Ct,ot}function Gr(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=Math.sqrt(lt*lt+dt*dt+ft*ft),Et=Math.exp(mt),At=yt>0?Et*Math.sin(yt)/yt:0;return ot[0]=lt*At,ot[1]=dt*At,ot[2]=ft*At,ot[3]=Et*Math.cos(yt),ot}function or(ot,nt){var lt=nt[0],dt=nt[1],ft=nt[2],mt=nt[3],yt=Math.sqrt(lt*lt+dt*dt+ft*ft),Et=yt>0?Math.atan2(yt,mt)/yt:0;return ot[0]=lt*Et,ot[1]=dt*Et,ot[2]=ft*Et,ot[3]=.5*Math.log(lt*lt+dt*dt+ft*ft+mt*mt),ot}function dr(ot,nt,lt,dt){var ft,mt,yt,Et,At,Ct=nt[0],Lt=nt[1],Bt=nt[2],zt=nt[3],Wt=lt[0],qt=lt[1],Xt=lt[2],Jt=lt[3];return(mt=Ct*Wt+Lt*qt+Bt*Xt+zt*Jt)<0&&(mt=-mt,Wt=-Wt,qt=-qt,Xt=-Xt,Jt=-Jt),1-mt>Yl.EPSILON?(ft=Math.acos(mt),yt=Math.sin(ft),Et=Math.sin((1-dt)*ft)/yt,At=Math.sin(dt*ft)/yt):(Et=1-dt,At=dt),ot[0]=Et*Ct+At*Wt,ot[1]=Et*Lt+At*qt,ot[2]=Et*Bt+At*Xt,ot[3]=Et*zt+At*Jt,ot}function Sr(ot,nt){var lt,dt=nt[0]+nt[4]+nt[8];if(dt>0)lt=Math.sqrt(dt+1),ot[3]=.5*lt,ot[0]=(nt[5]-nt[7])*(lt=.5/lt),ot[1]=(nt[6]-nt[2])*lt,ot[2]=(nt[1]-nt[3])*lt;else{var ft=0;nt[4]>nt[0]&&(ft=1),nt[8]>nt[3*ft+ft]&&(ft=2);var mt=(ft+1)%3,yt=(ft+2)%3;lt=Math.sqrt(nt[3*ft+ft]-nt[3*mt+mt]-nt[3*yt+yt]+1),ot[ft]=.5*lt,ot[3]=(nt[3*mt+yt]-nt[3*yt+mt])*(lt=.5/lt),ot[mt]=(nt[3*mt+ft]+nt[3*ft+mt])*lt,ot[yt]=(nt[3*yt+ft]+nt[3*ft+yt])*lt}return ot}sn.clone=Vs.clone,sn.fromValues=Vs.fromValues,sn.copy=Vs.copy,sn.set=Vs.set,sn.add=Vs.add,sn.mul=Cm;var Br=Vs.scale;sn.scale=Br;var jr=Vs.dot;sn.dot=jr,sn.lerp=Vs.lerp;var Kr=Vs.length;sn.length=Kr,sn.len=Kr;var un=Vs.squaredLength;sn.squaredLength=un,sn.sqrLen=un;var qr=Vs.normalize;sn.normalize=qr,sn.exactEquals=Vs.exactEquals,sn.equals=Vs.equals;var on,Pn,An,Zn=(on=Xl.create(),Pn=Xl.fromValues(1,0,0),An=Xl.fromValues(0,1,0),function(ot,nt,lt){var dt=Xl.dot(nt,lt);return dt<-.999999?(Xl.cross(on,Pn,nt),Xl.len(on)<1e-6&&Xl.cross(on,An,nt),Xl.normalize(on,on),Is(ot,on,Math.PI),ot):dt>.999999?(ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot):(Xl.cross(on,nt,lt),ot[0]=on[0],ot[1]=on[1],ot[2]=on[2],ot[3]=1+dt,qr(ot,ot))});sn.rotationTo=Zn;var so,po,Xo=(so=Np(),po=Np(),function(ot,nt,lt,dt,ft,mt){return dr(so,nt,ft,mt),dr(po,lt,dt,mt),dr(ot,so,po,2*mt*(1-mt)),ot});sn.sqlerp=Xo;var Co,qo=(Co=J0.create(),function(ot,nt,lt,dt){return Co[0]=lt[0],Co[3]=lt[1],Co[6]=lt[2],Co[1]=dt[0],Co[4]=dt[1],Co[7]=dt[2],Co[2]=-nt[0],Co[5]=-nt[1],Co[8]=-nt[2],qr(ot,Sr(ot,Co))});sn.setAxes=qo;var no={};function us(ot){return us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},us(ot)}Object.defineProperty(no,"__esModule",{value:!0}),no.create=function(){var ot=new Jo.ARRAY_TYPE(8);return Jo.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0,ot[2]=0,ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0),ot[3]=1,ot},no.clone=function(ot){var nt=new Jo.ARRAY_TYPE(8);return nt[0]=ot[0],nt[1]=ot[1],nt[2]=ot[2],nt[3]=ot[3],nt[4]=ot[4],nt[5]=ot[5],nt[6]=ot[6],nt[7]=ot[7],nt},no.fromValues=function(ot,nt,lt,dt,ft,mt,yt,Et){var At=new Jo.ARRAY_TYPE(8);return At[0]=ot,At[1]=nt,At[2]=lt,At[3]=dt,At[4]=ft,At[5]=mt,At[6]=yt,At[7]=Et,At},no.fromRotationTranslationValues=function(ot,nt,lt,dt,ft,mt,yt){var Et=new Jo.ARRAY_TYPE(8);Et[0]=ot,Et[1]=nt,Et[2]=lt,Et[3]=dt;var At=.5*ft,Ct=.5*mt,Lt=.5*yt;return Et[4]=At*dt+Ct*lt-Lt*nt,Et[5]=Ct*dt+Lt*ot-At*lt,Et[6]=Lt*dt+At*nt-Ct*ot,Et[7]=-At*ot-Ct*nt-Lt*lt,Et},no.fromRotationTranslation=Hs,no.fromTranslation=function(ot,nt){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=.5*nt[0],ot[5]=.5*nt[1],ot[6]=.5*nt[2],ot[7]=0,ot},no.fromRotation=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0,ot},no.fromMat4=function(ot,nt){var lt=Wo.create();Es.getRotation(lt,nt);var dt=new Jo.ARRAY_TYPE(3);return Es.getTranslation(dt,nt),Hs(ot,lt,dt),ot},no.copy=El,no.identity=function(ot){return ot[0]=0,ot[1]=0,ot[2]=0,ot[3]=1,ot[4]=0,ot[5]=0,ot[6]=0,ot[7]=0,ot},no.set=function(ot,nt,lt,dt,ft,mt,yt,Et,At){return ot[0]=nt,ot[1]=lt,ot[2]=dt,ot[3]=ft,ot[4]=mt,ot[5]=yt,ot[6]=Et,ot[7]=At,ot},no.getDual=function(ot,nt){return ot[0]=nt[4],ot[1]=nt[5],ot[2]=nt[6],ot[3]=nt[7],ot},no.setDual=function(ot,nt){return ot[4]=nt[0],ot[5]=nt[1],ot[6]=nt[2],ot[7]=nt[3],ot},no.getTranslation=function(ot,nt){var lt=nt[4],dt=nt[5],ft=nt[6],mt=nt[7],yt=-nt[0],Et=-nt[1],At=-nt[2],Ct=nt[3];return ot[0]=2*(lt*Ct+mt*yt+dt*At-ft*Et),ot[1]=2*(dt*Ct+mt*Et+ft*yt-lt*At),ot[2]=2*(ft*Ct+mt*At+lt*Et-dt*yt),ot},no.translate=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=.5*lt[0],At=.5*lt[1],Ct=.5*lt[2],Lt=nt[4],Bt=nt[5],zt=nt[6],Wt=nt[7];return ot[0]=dt,ot[1]=ft,ot[2]=mt,ot[3]=yt,ot[4]=yt*Et+ft*Ct-mt*At+Lt,ot[5]=yt*At+mt*Et-dt*Ct+Bt,ot[6]=yt*Ct+dt*At-ft*Et+zt,ot[7]=-dt*Et-ft*At-mt*Ct+Wt,ot},no.rotateX=function(ot,nt,lt){var dt=-nt[0],ft=-nt[1],mt=-nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=Et*yt+Lt*dt+At*mt-Ct*ft,zt=At*yt+Lt*ft+Ct*dt-Et*mt,Wt=Ct*yt+Lt*mt+Et*ft-At*dt,qt=Lt*yt-Et*dt-At*ft-Ct*mt;return Wo.rotateX(ot,nt,lt),ot[4]=Bt*(yt=ot[3])+qt*(dt=ot[0])+zt*(mt=ot[2])-Wt*(ft=ot[1]),ot[5]=zt*yt+qt*ft+Wt*dt-Bt*mt,ot[6]=Wt*yt+qt*mt+Bt*ft-zt*dt,ot[7]=qt*yt-Bt*dt-zt*ft-Wt*mt,ot},no.rotateY=function(ot,nt,lt){var dt=-nt[0],ft=-nt[1],mt=-nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=Et*yt+Lt*dt+At*mt-Ct*ft,zt=At*yt+Lt*ft+Ct*dt-Et*mt,Wt=Ct*yt+Lt*mt+Et*ft-At*dt,qt=Lt*yt-Et*dt-At*ft-Ct*mt;return Wo.rotateY(ot,nt,lt),ot[4]=Bt*(yt=ot[3])+qt*(dt=ot[0])+zt*(mt=ot[2])-Wt*(ft=ot[1]),ot[5]=zt*yt+qt*ft+Wt*dt-Bt*mt,ot[6]=Wt*yt+qt*mt+Bt*ft-zt*dt,ot[7]=qt*yt-Bt*dt-zt*ft-Wt*mt,ot},no.rotateZ=function(ot,nt,lt){var dt=-nt[0],ft=-nt[1],mt=-nt[2],yt=nt[3],Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=Et*yt+Lt*dt+At*mt-Ct*ft,zt=At*yt+Lt*ft+Ct*dt-Et*mt,Wt=Ct*yt+Lt*mt+Et*ft-At*dt,qt=Lt*yt-Et*dt-At*ft-Ct*mt;return Wo.rotateZ(ot,nt,lt),ot[4]=Bt*(yt=ot[3])+qt*(dt=ot[0])+zt*(mt=ot[2])-Wt*(ft=ot[1]),ot[5]=zt*yt+qt*ft+Wt*dt-Bt*mt,ot[6]=Wt*yt+qt*mt+Bt*ft-zt*dt,ot[7]=qt*yt-Bt*dt-zt*ft-Wt*mt,ot},no.rotateByQuatAppend=function(ot,nt,lt){var dt=lt[0],ft=lt[1],mt=lt[2],yt=lt[3],Et=nt[0],At=nt[1],Ct=nt[2],Lt=nt[3];return ot[0]=Et*yt+Lt*dt+At*mt-Ct*ft,ot[1]=At*yt+Lt*ft+Ct*dt-Et*mt,ot[2]=Ct*yt+Lt*mt+Et*ft-At*dt,ot[3]=Lt*yt-Et*dt-At*ft-Ct*mt,ot[4]=(Et=nt[4])*yt+(Lt=nt[7])*dt+(At=nt[5])*mt-(Ct=nt[6])*ft,ot[5]=At*yt+Lt*ft+Ct*dt-Et*mt,ot[6]=Ct*yt+Lt*mt+Et*ft-At*dt,ot[7]=Lt*yt-Et*dt-At*ft-Ct*mt,ot},no.rotateByQuatPrepend=function(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=lt[0],At=lt[1],Ct=lt[2],Lt=lt[3];return ot[0]=dt*Lt+yt*Et+ft*Ct-mt*At,ot[1]=ft*Lt+yt*At+mt*Et-dt*Ct,ot[2]=mt*Lt+yt*Ct+dt*At-ft*Et,ot[3]=yt*Lt-dt*Et-ft*At-mt*Ct,ot[4]=dt*(Lt=lt[7])+yt*(Et=lt[4])+ft*(Ct=lt[6])-mt*(At=lt[5]),ot[5]=ft*Lt+yt*At+mt*Et-dt*Ct,ot[6]=mt*Lt+yt*Ct+dt*At-ft*Et,ot[7]=yt*Lt-dt*Et-ft*At-mt*Ct,ot},no.rotateAroundAxis=function(ot,nt,lt,dt){if(Math.abs(dt)<Jo.EPSILON)return El(ot,nt);var ft=Math.hypot(lt[0],lt[1],lt[2]);dt*=.5;var mt=Math.sin(dt),yt=mt*lt[0]/ft,Et=mt*lt[1]/ft,At=mt*lt[2]/ft,Ct=Math.cos(dt),Lt=nt[0],Bt=nt[1],zt=nt[2],Wt=nt[3];ot[0]=Lt*Ct+Wt*yt+Bt*At-zt*Et,ot[1]=Bt*Ct+Wt*Et+zt*yt-Lt*At,ot[2]=zt*Ct+Wt*At+Lt*Et-Bt*yt,ot[3]=Wt*Ct-Lt*yt-Bt*Et-zt*At;var qt=nt[4],Xt=nt[5],Jt=nt[6],nr=nt[7];return ot[4]=qt*Ct+nr*yt+Xt*At-Jt*Et,ot[5]=Xt*Ct+nr*Et+Jt*yt-qt*At,ot[6]=Jt*Ct+nr*At+qt*Et-Xt*yt,ot[7]=nr*Ct-qt*yt-Xt*Et-Jt*At,ot},no.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot[2]=nt[2]+lt[2],ot[3]=nt[3]+lt[3],ot[4]=nt[4]+lt[4],ot[5]=nt[5]+lt[5],ot[6]=nt[6]+lt[6],ot[7]=nt[7]+lt[7],ot},no.multiply=dp,no.scale=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot[2]=nt[2]*lt,ot[3]=nt[3]*lt,ot[4]=nt[4]*lt,ot[5]=nt[5]*lt,ot[6]=nt[6]*lt,ot[7]=nt[7]*lt,ot},no.lerp=function(ot,nt,lt,dt){var ft=1-dt;return Q0(nt,lt)<0&&(dt=-dt),ot[0]=nt[0]*ft+lt[0]*dt,ot[1]=nt[1]*ft+lt[1]*dt,ot[2]=nt[2]*ft+lt[2]*dt,ot[3]=nt[3]*ft+lt[3]*dt,ot[4]=nt[4]*ft+lt[4]*dt,ot[5]=nt[5]*ft+lt[5]*dt,ot[6]=nt[6]*ft+lt[6]*dt,ot[7]=nt[7]*ft+lt[7]*dt,ot},no.invert=function(ot,nt){var lt=km(nt);return ot[0]=-nt[0]/lt,ot[1]=-nt[1]/lt,ot[2]=-nt[2]/lt,ot[3]=nt[3]/lt,ot[4]=-nt[4]/lt,ot[5]=-nt[5]/lt,ot[6]=-nt[6]/lt,ot[7]=nt[7]/lt,ot},no.conjugate=function(ot,nt){return ot[0]=-nt[0],ot[1]=-nt[1],ot[2]=-nt[2],ot[3]=nt[3],ot[4]=-nt[4],ot[5]=-nt[5],ot[6]=-nt[6],ot[7]=nt[7],ot},no.normalize=function(ot,nt){var lt=km(nt);if(lt>0){lt=Math.sqrt(lt);var dt=nt[0]/lt,ft=nt[1]/lt,mt=nt[2]/lt,yt=nt[3]/lt,Et=nt[4],At=nt[5],Ct=nt[6],Lt=nt[7],Bt=dt*Et+ft*At+mt*Ct+yt*Lt;ot[0]=dt,ot[1]=ft,ot[2]=mt,ot[3]=yt,ot[4]=(Et-dt*Bt)/lt,ot[5]=(At-ft*Bt)/lt,ot[6]=(Ct-mt*Bt)/lt,ot[7]=(Lt-yt*Bt)/lt}return ot},no.str=function(ot){return"quat2("+ot[0]+", "+ot[1]+", "+ot[2]+", "+ot[3]+", "+ot[4]+", "+ot[5]+", "+ot[6]+", "+ot[7]+")"},no.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]&&ot[2]===nt[2]&&ot[3]===nt[3]&&ot[4]===nt[4]&&ot[5]===nt[5]&&ot[6]===nt[6]&&ot[7]===nt[7]},no.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=ot[2],mt=ot[3],yt=ot[4],Et=ot[5],At=ot[6],Ct=ot[7],Lt=nt[0],Bt=nt[1],zt=nt[2],Wt=nt[3],qt=nt[4],Xt=nt[5],Jt=nt[6],nr=nt[7];return Math.abs(lt-Lt)<=Jo.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Lt))&&Math.abs(dt-Bt)<=Jo.EPSILON*Math.max(1,Math.abs(dt),Math.abs(Bt))&&Math.abs(ft-zt)<=Jo.EPSILON*Math.max(1,Math.abs(ft),Math.abs(zt))&&Math.abs(mt-Wt)<=Jo.EPSILON*Math.max(1,Math.abs(mt),Math.abs(Wt))&&Math.abs(yt-qt)<=Jo.EPSILON*Math.max(1,Math.abs(yt),Math.abs(qt))&&Math.abs(Et-Xt)<=Jo.EPSILON*Math.max(1,Math.abs(Et),Math.abs(Xt))&&Math.abs(At-Jt)<=Jo.EPSILON*Math.max(1,Math.abs(At),Math.abs(Jt))&&Math.abs(Ct-nr)<=Jo.EPSILON*Math.max(1,Math.abs(Ct),Math.abs(nr))},no.sqrLen=no.squaredLength=no.len=no.length=no.dot=no.mul=no.setReal=no.getReal=void 0;var Jo=Ls(Ht),Wo=Ls(sn),Es=Ls(mn);function Ss(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(Ss=function(dt){return dt?lt:nt})(ot)}function Ls(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||us(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=Ss(nt);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}function Hs(ot,nt,lt){var dt=.5*lt[0],ft=.5*lt[1],mt=.5*lt[2],yt=nt[0],Et=nt[1],At=nt[2],Ct=nt[3];return ot[0]=yt,ot[1]=Et,ot[2]=At,ot[3]=Ct,ot[4]=dt*Ct+ft*At-mt*Et,ot[5]=ft*Ct+mt*yt-dt*At,ot[6]=mt*Ct+dt*Et-ft*yt,ot[7]=-dt*yt-ft*Et-mt*At,ot}function El(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot[2]=nt[2],ot[3]=nt[3],ot[4]=nt[4],ot[5]=nt[5],ot[6]=nt[6],ot[7]=nt[7],ot}function dp(ot,nt,lt){var dt=nt[0],ft=nt[1],mt=nt[2],yt=nt[3],Et=lt[4],At=lt[5],Ct=lt[6],Lt=lt[7],Bt=nt[4],zt=nt[5],Wt=nt[6],qt=nt[7],Xt=lt[0],Jt=lt[1],nr=lt[2],gr=lt[3];return ot[0]=dt*gr+yt*Xt+ft*nr-mt*Jt,ot[1]=ft*gr+yt*Jt+mt*Xt-dt*nr,ot[2]=mt*gr+yt*nr+dt*Jt-ft*Xt,ot[3]=yt*gr-dt*Xt-ft*Jt-mt*nr,ot[4]=dt*Lt+yt*Et+ft*Ct-mt*At+Bt*gr+qt*Xt+zt*nr-Wt*Jt,ot[5]=ft*Lt+yt*At+mt*Et-dt*Ct+zt*gr+qt*Jt+Wt*Xt-Bt*nr,ot[6]=mt*Lt+yt*Ct+dt*At-ft*Et+Wt*gr+qt*nr+Bt*Jt-zt*Xt,ot[7]=yt*Lt-dt*Et-ft*At-mt*Ct+qt*gr-Bt*Xt-zt*Jt-Wt*nr,ot}no.getReal=Wo.copy,no.setReal=Wo.copy,no.mul=dp;var Q0=Wo.dot;no.dot=Q0;var ex=Wo.length;no.length=ex,no.len=ex;var km=Wo.squaredLength;no.squaredLength=km,no.sqrLen=km;var Mo={};function Ly(ot){return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Ly(ot)}Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.create=rx,Mo.clone=function(ot){var nt=new Hu.ARRAY_TYPE(2);return nt[0]=ot[0],nt[1]=ot[1],nt},Mo.fromValues=function(ot,nt){var lt=new Hu.ARRAY_TYPE(2);return lt[0]=ot,lt[1]=nt,lt},Mo.copy=function(ot,nt){return ot[0]=nt[0],ot[1]=nt[1],ot},Mo.set=function(ot,nt,lt){return ot[0]=nt,ot[1]=lt,ot},Mo.add=function(ot,nt,lt){return ot[0]=nt[0]+lt[0],ot[1]=nt[1]+lt[1],ot},Mo.subtract=nx,Mo.multiply=ix,Mo.divide=ox,Mo.ceil=function(ot,nt){return ot[0]=Math.ceil(nt[0]),ot[1]=Math.ceil(nt[1]),ot},Mo.floor=function(ot,nt){return ot[0]=Math.floor(nt[0]),ot[1]=Math.floor(nt[1]),ot},Mo.min=function(ot,nt,lt){return ot[0]=Math.min(nt[0],lt[0]),ot[1]=Math.min(nt[1],lt[1]),ot},Mo.max=function(ot,nt,lt){return ot[0]=Math.max(nt[0],lt[0]),ot[1]=Math.max(nt[1],lt[1]),ot},Mo.round=function(ot,nt){return ot[0]=Math.round(nt[0]),ot[1]=Math.round(nt[1]),ot},Mo.scale=function(ot,nt,lt){return ot[0]=nt[0]*lt,ot[1]=nt[1]*lt,ot},Mo.scaleAndAdd=function(ot,nt,lt,dt){return ot[0]=nt[0]+lt[0]*dt,ot[1]=nt[1]+lt[1]*dt,ot},Mo.distance=ax,Mo.squaredDistance=sx,Mo.length=Rm,Mo.squaredLength=Im,Mo.negate=function(ot,nt){return ot[0]=-nt[0],ot[1]=-nt[1],ot},Mo.inverse=function(ot,nt){return ot[0]=1/nt[0],ot[1]=1/nt[1],ot},Mo.normalize=function(ot,nt){var lt=nt[0],dt=nt[1],ft=lt*lt+dt*dt;return ft>0&&(ft=1/Math.sqrt(ft)),ot[0]=nt[0]*ft,ot[1]=nt[1]*ft,ot},Mo.dot=function(ot,nt){return ot[0]*nt[0]+ot[1]*nt[1]},Mo.cross=function(ot,nt,lt){var dt=nt[0]*lt[1]-nt[1]*lt[0];return ot[0]=ot[1]=0,ot[2]=dt,ot},Mo.lerp=function(ot,nt,lt,dt){var ft=nt[0],mt=nt[1];return ot[0]=ft+dt*(lt[0]-ft),ot[1]=mt+dt*(lt[1]-mt),ot},Mo.random=function(ot,nt){nt=nt||1;var lt=2*Hu.RANDOM()*Math.PI;return ot[0]=Math.cos(lt)*nt,ot[1]=Math.sin(lt)*nt,ot},Mo.transformMat2=function(ot,nt,lt){var dt=nt[0],ft=nt[1];return ot[0]=lt[0]*dt+lt[2]*ft,ot[1]=lt[1]*dt+lt[3]*ft,ot},Mo.transformMat2d=function(ot,nt,lt){var dt=nt[0],ft=nt[1];return ot[0]=lt[0]*dt+lt[2]*ft+lt[4],ot[1]=lt[1]*dt+lt[3]*ft+lt[5],ot},Mo.transformMat3=function(ot,nt,lt){var dt=nt[0],ft=nt[1];return ot[0]=lt[0]*dt+lt[3]*ft+lt[6],ot[1]=lt[1]*dt+lt[4]*ft+lt[7],ot},Mo.transformMat4=function(ot,nt,lt){var dt=nt[0],ft=nt[1];return ot[0]=lt[0]*dt+lt[4]*ft+lt[12],ot[1]=lt[1]*dt+lt[5]*ft+lt[13],ot},Mo.rotate=function(ot,nt,lt,dt){var ft=nt[0]-lt[0],mt=nt[1]-lt[1],yt=Math.sin(dt),Et=Math.cos(dt);return ot[0]=ft*Et-mt*yt+lt[0],ot[1]=ft*yt+mt*Et+lt[1],ot},Mo.angle=function(ot,nt){var lt=ot[0],dt=ot[1],ft=nt[0],mt=nt[1],yt=Math.sqrt(lt*lt+dt*dt)*Math.sqrt(ft*ft+mt*mt);return Math.acos(Math.min(Math.max(yt&&(lt*ft+dt*mt)/yt,-1),1))},Mo.zero=function(ot){return ot[0]=0,ot[1]=0,ot},Mo.str=function(ot){return"vec2("+ot[0]+", "+ot[1]+")"},Mo.exactEquals=function(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]},Mo.equals=function(ot,nt){var lt=ot[0],dt=ot[1],ft=nt[0],mt=nt[1];return Math.abs(lt-ft)<=Hu.EPSILON*Math.max(1,Math.abs(lt),Math.abs(ft))&&Math.abs(dt-mt)<=Hu.EPSILON*Math.max(1,Math.abs(dt),Math.abs(mt))},Mo.forEach=Mo.sqrLen=Mo.sqrDist=Mo.dist=Mo.div=Mo.mul=Mo.sub=Mo.len=void 0;var Hu=function(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Ly(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=tx(void 0);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}(Ht);function tx(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return(tx=function(dt){return dt?lt:nt})(ot)}function rx(){var ot=new Hu.ARRAY_TYPE(2);return Hu.ARRAY_TYPE!=Float32Array&&(ot[0]=0,ot[1]=0),ot}function nx(ot,nt,lt){return ot[0]=nt[0]-lt[0],ot[1]=nt[1]-lt[1],ot}function ix(ot,nt,lt){return ot[0]=nt[0]*lt[0],ot[1]=nt[1]*lt[1],ot}function ox(ot,nt,lt){return ot[0]=nt[0]/lt[0],ot[1]=nt[1]/lt[1],ot}function ax(ot,nt){return Math.hypot(nt[0]-ot[0],nt[1]-ot[1])}function sx(ot,nt){var lt=nt[0]-ot[0],dt=nt[1]-ot[1];return lt*lt+dt*dt}function Rm(ot){return Math.hypot(ot[0],ot[1])}function Im(ot){var nt=ot[0],lt=ot[1];return nt*nt+lt*lt}Mo.len=Rm,Mo.sub=nx,Mo.mul=ix,Mo.div=ox,Mo.dist=ax,Mo.sqrDist=sx,Mo.sqrLen=Im;var Ny=function(){var ot=rx();return function(nt,lt,dt,ft,mt,yt){var Et,At;for(lt||(lt=2),dt||(dt=0),At=ft?Math.min(ft*lt+dt,nt.length):nt.length,Et=dt;Et<At;Et+=lt)ot[0]=nt[Et],ot[1]=nt[Et+1],mt(ot,ot,yt),nt[Et]=ot[0],nt[Et+1]=ot[1];return nt}}();function Fy(ot){return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(nt){return typeof nt}:function(nt){return nt&&typeof Symbol=="function"&&nt.constructor===Symbol&&nt!==Symbol.prototype?"symbol":typeof nt},Fy(ot)}Mo.forEach=Ny,Object.defineProperty(Ut,"__esModule",{value:!0}),at.aB=Ut.vec4=at.$=Ut.vec3=Ut.vec2=Ut.quat2=at.aw=Ut.quat=at.ae=Ut.mat4=at.bE=Ut.mat3=Ut.mat2d=at.aD=Ut.mat2=Ut.glMatrix=void 0;var zv=Ll(Ht);Ut.glMatrix=zv;var Vv=Ll(wr);at.aD=Ut.mat2=Vv;var Fp=Ll(hr);Ut.mat2d=Fp;var Ho=Ll(fn);at.bE=Ut.mat3=Ho;var G1=Ll(mn);at.ae=Ut.mat4=G1;var W1=Ll(sn);at.aw=Ut.quat=W1;var H1=Ll(no);Ut.quat2=H1;var Uv=Ll(Mo);Ut.vec2=Uv;var Z1=Ll(wn);at.$=Ut.vec3=Z1;var lx=Ll(go);function $m(ot){if(typeof WeakMap!="function")return null;var nt=new WeakMap,lt=new WeakMap;return($m=function(dt){return dt?lt:nt})(ot)}function Ll(ot,nt){if(ot&&ot.__esModule)return ot;if(ot===null||Fy(ot)!=="object"&&typeof ot!="function")return{default:ot};var lt=$m(nt);if(lt&&lt.has(ot))return lt.get(ot);var dt={},ft=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var mt in ot)if(mt!=="default"&&Object.prototype.hasOwnProperty.call(ot,mt)){var yt=ft?Object.getOwnPropertyDescriptor(ot,mt):null;yt&&(yt.get||yt.set)?Object.defineProperty(dt,mt,yt):dt[mt]=ot[mt]}return dt.default=ot,lt&&lt.set(ot,dt),dt}at.aB=Ut.vec4=lx;var Gv=Wv;function Wv(ot,nt,lt,dt){this.cx=3*ot,this.bx=3*(lt-ot)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*nt,this.by=3*(dt-nt)-this.cy,this.ay=1-this.cy-this.by,this.p1x=ot,this.p1y=nt,this.p2x=lt,this.p2y=dt}Wv.prototype={sampleCurveX:function(ot){return((this.ax*ot+this.bx)*ot+this.cx)*ot},sampleCurveY:function(ot){return((this.ay*ot+this.by)*ot+this.cy)*ot},sampleCurveDerivativeX:function(ot){return(3*this.ax*ot+2*this.bx)*ot+this.cx},solveCurveX:function(ot,nt){if(nt===void 0&&(nt=1e-6),ot<0)return 0;if(ot>1)return 1;for(var lt=ot,dt=0;dt<8;dt++){var ft=this.sampleCurveX(lt)-ot;if(Math.abs(ft)<nt)return lt;var mt=this.sampleCurveDerivativeX(lt);if(Math.abs(mt)<1e-6)break;lt-=ft/mt}var yt=0,Et=1;for(lt=ot,dt=0;dt<20&&(ft=this.sampleCurveX(lt),!(Math.abs(ft-ot)<nt));dt++)ot>ft?yt=lt:Et=lt,lt=.5*(Et-yt)+yt;return lt},solve:function(ot,nt){return this.sampleCurveY(this.solveCurveX(ot,nt))}};var ux=Nt(Gv),Mm=hp;function hp(ot,nt){this.x=ot,this.y=nt}hp.prototype={clone:function(){return new hp(this.x,this.y)},add:function(ot){return this.clone()._add(ot)},sub:function(ot){return this.clone()._sub(ot)},multByPoint:function(ot){return this.clone()._multByPoint(ot)},divByPoint:function(ot){return this.clone()._divByPoint(ot)},mult:function(ot){return this.clone()._mult(ot)},div:function(ot){return this.clone()._div(ot)},rotate:function(ot){return this.clone()._rotate(ot)},rotateAround:function(ot,nt){return this.clone()._rotateAround(ot,nt)},matMult:function(ot){return this.clone()._matMult(ot)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(ot){return this.x===ot.x&&this.y===ot.y},dist:function(ot){return Math.sqrt(this.distSqr(ot))},distSqr:function(ot){var nt=ot.x-this.x,lt=ot.y-this.y;return nt*nt+lt*lt},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(ot){return Math.atan2(this.y-ot.y,this.x-ot.x)},angleWith:function(ot){return this.angleWithSep(ot.x,ot.y)},angleWithSep:function(ot,nt){return Math.atan2(this.x*nt-this.y*ot,this.x*ot+this.y*nt)},_matMult:function(ot){var nt=ot[2]*this.x+ot[3]*this.y;return this.x=ot[0]*this.x+ot[1]*this.y,this.y=nt,this},_add:function(ot){return this.x+=ot.x,this.y+=ot.y,this},_sub:function(ot){return this.x-=ot.x,this.y-=ot.y,this},_mult:function(ot){return this.x*=ot,this.y*=ot,this},_div:function(ot){return this.x/=ot,this.y/=ot,this},_multByPoint:function(ot){return this.x*=ot.x,this.y*=ot.y,this},_divByPoint:function(ot){return this.x/=ot.x,this.y/=ot.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var ot=this.y;return this.y=this.x,this.x=-ot,this},_rotate:function(ot){var nt=Math.cos(ot),lt=Math.sin(ot),dt=lt*this.x+nt*this.y;return this.x=nt*this.x-lt*this.y,this.y=dt,this},_rotateAround:function(ot,nt){var lt=Math.cos(ot),dt=Math.sin(ot),ft=nt.y+dt*(this.x-nt.x)+lt*(this.y-nt.y);return this.x=nt.x+lt*(this.x-nt.x)-dt*(this.y-nt.y),this.y=ft,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},hp.convert=function(ot){return ot instanceof hp?ot:Array.isArray(ot)?new hp(ot[0],ot[1]):ot};var Vn=Nt(Mm);function Bp(ot,nt){if(Array.isArray(ot)){if(!Array.isArray(nt)||ot.length!==nt.length)return!1;for(let lt=0;lt<ot.length;lt++)if(!Bp(ot[lt],nt[lt]))return!1;return!0}if(typeof ot=="object"&&ot!==null&&nt!==null){if(typeof nt!="object"||Object.keys(ot).length!==Object.keys(nt).length)return!1;for(const lt in ot)if(!Bp(ot[lt],nt[lt]))return!1;return!0}return ot===nt}const Hv=Math.PI/180,zp=180/Math.PI;function zo(ot){return ot*Hv}function Cl(ot){return ot*zp}const Om=[[0,0],[1,0],[1,1],[0,1]];function By(ot){if(ot<=0)return 0;if(ot>=1)return 1;const nt=ot*ot,lt=nt*ot;return 4*(ot<.5?lt:3*(ot-nt)+lt-.75)}function zy(ot,nt,lt,dt){const ft=new ux(ot,nt,lt,dt);return function(mt){return ft.solve(mt)}}const iu=zy(.25,.1,.25,1);function jo(ot,nt,lt){return Math.min(lt,Math.max(nt,ot))}function dx(ot,nt,lt){return(lt=jo((lt-ot)/(nt-ot),0,1))*lt*(3-2*lt)}function Vp(ot,nt,lt){const dt=lt-nt,ft=((ot-nt)%dt+dt)%dt+nt;return ft===nt?lt:ft}function jm(ot,nt,lt){if(!ot.length)return lt(null,[]);let dt=ot.length;const ft=new Array(ot.length);let mt=null;ot.forEach((yt,Et)=>{nt(yt,(At,Ct)=>{At&&(mt=At),ft[Et]=Ct,--dt==0&&lt(mt,ft)})})}function hx(ot){const nt=[];for(const lt in ot)nt.push(ot[lt]);return nt}function Zs(ot,...nt){for(const lt of nt)for(const dt in lt)ot[dt]=lt[dt];return ot}let Zv=1;function Vy(){return Zv++}function Up(){return function ot(nt){return nt?(nt^Math.random()*(16>>nt/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,ot)}()}function fp(ot){return ot<=1?1:Math.pow(2,Math.ceil(Math.log(ot)/Math.LN2))}function fx(ot){return!!ot&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(ot)}function Uy(ot,nt){ot.forEach(lt=>{nt[lt]&&(nt[lt]=nt[lt].bind(nt))})}function Dm(ot,nt){return ot.indexOf(nt,ot.length-nt.length)!==-1}function Lm(ot,nt,lt){const dt={};for(const ft in ot)dt[ft]=nt.call(this,ot[ft],ft,ot);return dt}function qs(ot,nt,lt){const dt={};for(const ft in ot)nt.call(this,ot[ft],ft,ot)&&(dt[ft]=ot[ft]);return dt}function Rl(ot){return Array.isArray(ot)?ot.map(Rl):typeof ot=="object"&&ot?Lm(ot,Rl):ot}const Ks={};function Ts(ot){Ks[ot]||(typeof console<"u"&&console.warn(ot),Ks[ot]=!0)}function Zu(ot,nt,lt){return(lt.y-ot.y)*(nt.x-ot.x)>(nt.y-ot.y)*(lt.x-ot.x)}function q1(ot){let nt=0;for(let lt,dt,ft=0,mt=ot.length,yt=mt-1;ft<mt;yt=ft++)lt=ot[ft],dt=ot[yt],nt+=(dt.x-lt.x)*(lt.y+dt.y);return nt}function Gp([ot,nt,lt]){const dt=zo(nt+90),ft=zo(lt);return{x:ot*Math.cos(dt)*Math.sin(ft),y:ot*Math.sin(dt)*Math.sin(ft),z:ot*Math.cos(ft),azimuthal:nt,polar:lt}}function Wp(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Nm(ot){const nt={};if(ot.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(lt,dt,ft,mt)=>{const yt=ft||mt;return nt[dt]=!yt||yt.toLowerCase(),""}),nt["max-age"]){const lt=parseInt(nt["max-age"],10);isNaN(lt)?delete nt["max-age"]:nt["max-age"]=lt}return nt}let px,Fm,qu,Bm,Ku,zm,Vm=null;function Gy(ot){try{const nt=self[ot];return nt.setItem("_mapbox_test_",1),nt.removeItem("_mapbox_test_"),!0}catch{return!1}}function Yu(ot,nt){return[ot[4*nt],ot[4*nt+1],ot[4*nt+2],ot[4*nt+3]]}function Wy(ot,nt,lt,dt){for(;nt<lt;){const ft=nt+lt>>1;ot[ft]<dt?nt=ft+1:lt=ft}return nt}function Hy(ot,nt,lt,dt){for(;nt<lt;){const ft=nt+lt>>1;ot[ft]<=dt?nt=ft+1:lt=ft}return nt}function qv(ot){return ot>0?1/(1.001-ot):1+ot}function Kv(ot){return ot>0?1-1/(1.001-ot):-ot}function mx(){return px==null&&(px=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),px}const Ys={now:()=>Bm!==void 0?Bm:performance.now(),setNow(ot){Bm=ot},restoreNow(){Bm=void 0},frame(ot){const nt=requestAnimationFrame(ot);return{cancel:()=>cancelAnimationFrame(nt)}},getImageData(ot,nt=0){const{width:lt,height:dt}=ot;Ku||(Ku=document.createElement("canvas"));const ft=Ku.getContext("2d",{willReadFrequently:!0});if(!ft)throw new Error("failed to create canvas 2d context");return(lt>Ku.width||dt>Ku.height)&&(Ku.width=lt,Ku.height=dt),ft.clearRect(-nt,-nt,lt+2*nt,dt+2*nt),ft.drawImage(ot,0,0,lt,dt),ft.getImageData(-nt,-nt,lt+2*nt,dt+2*nt)},resolveURL:ot=>(Fm||(Fm=document.createElement("a")),Fm.href=ot,Fm.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(qu==null&&(qu=window.matchMedia("(prefers-reduced-motion: reduce)")),qu.matches)},hasCanvasFingerprintNoise(){if(zm!==void 0)return zm;if(!mx())return zm=!1,!1;const ot=new OffscreenCanvas(85,1),nt=ot.getContext("2d",{willReadFrequently:!0});let lt=0;for(let ft=0;ft<ot.width;++ft)nt.fillStyle=`rgba(${lt++},${lt++},${lt++}, 255)`,nt.fillRect(ft,0,1,1);const dt=nt.getImageData(0,0,ot.width,ot.height);lt=0;for(let ft=0;ft<dt.data.length;++ft)if(ft%4!=3&&lt++!==dt.data[ft])return zm=!0,!0;return zm=!1,!1}};function Yv(ot,nt){const lt=ot.indexOf("?");if(lt<0)return`${ot}?${new URLSearchParams(nt).toString()}`;const dt=new URLSearchParams(ot.slice(lt));for(const ft in nt)dt.set(ft,nt[ft]);return`${ot.slice(0,lt)}?${dt.toString()}`}function gx(ot,nt={persistentParams:[]}){const lt=ot.indexOf("?");if(lt<0)return ot;const dt=new URLSearchParams,ft=new URLSearchParams(ot.slice(lt));for(const yt of nt.persistentParams){const Et=ft.get(yt);Et&&dt.set(yt,Et)}const mt=dt.toString();return`${ot.slice(0,lt)}${mt.length>0?`?${mt}`:""}`}const Xv="mapbox-tiles";let yx=500,xx=50;const Jv=["language","worldview","jobid"];let hu,Zy;function Qv(){try{return caches}catch{}}function Um(){const ot=Qv();ot&&!hu&&(hu=ot.open(Xv))}let qy=1/0;const Ky={supported:!1,testSupport:function(ot){!Yy&&Hp&&(e_?vx(ot):Gm=ot)}};let Gm,Hp,Yy=!1,e_=!1;const t_=typeof self<"u"?self:{};function vx(ot){const nt=ot.createTexture();ot.bindTexture(ot.TEXTURE_2D,nt);try{if(ot.texImage2D(ot.TEXTURE_2D,0,ot.RGBA,ot.RGBA,ot.UNSIGNED_BYTE,Hp),ot.isContextLost())return;Ky.supported=!0}catch{}ot.deleteTexture(nt),Yy=!0}t_.document&&(Hp=t_.document.createElement("img"),Hp.onload=function(){Gm&&vx(Gm),Gm=null,e_=!0},Hp.onerror=function(){Yy=!0,Gm=null},Hp.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Wm={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Wm);class Xy extends Error{constructor(nt,lt,dt){lt===401&&St(dt)&&(nt+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(nt),this.status=lt,this.url=dt}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const _x=Wp()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,fu=function(ot,nt){if(!(/^file:/.test(lt=ot.url)||/^file:/.test(_x())&&!/^\w+:/.test(lt))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(dt,ft){const mt=new AbortController,yt=new Request(dt.url,{method:dt.method||"GET",body:dt.body,credentials:dt.credentials,headers:dt.headers,referrer:_x(),referrerPolicy:dt.referrerPolicy,signal:mt.signal});let Et=!1,At=!1;const Ct=(Lt=yt.url).indexOf("sku=")>0&&St(Lt);var Lt;dt.type==="json"&&yt.headers.set("Accept","application/json");const Bt=(Wt,qt,Xt)=>{if(At)return;if(Wt&&Wt.message!=="SecurityError"&&Ts(Wt.toString()),qt&&Xt)return zt(qt);const Jt=Date.now();fetch(yt).then(nr=>{if(nr.ok){const gr=Ct?nr.clone():null;return zt(nr,gr,Jt)}return ft(new Xy(nr.statusText,nr.status,dt.url))}).catch(nr=>{nr.name!=="AbortError"&&ft(new Error(`${nr.message} ${dt.url}`))})},zt=(Wt,qt,Xt)=>{(dt.type==="arrayBuffer"?Wt.arrayBuffer():dt.type==="json"?Wt.json():Wt.text()).then(Jt=>{At||(qt&&Xt&&function(nr,gr,pr){if(Um(),!hu)return;const xr=Nm(gr.headers.get("Cache-Control")||"");if(xr["no-store"])return;const Pr={status:gr.status,statusText:gr.statusText,headers:new Headers};gr.headers.forEach((Hr,Jr)=>Pr.headers.set(Jr,Hr)),xr["max-age"]&&Pr.headers.set("Expires",new Date(pr+1e3*xr["max-age"]).toUTCString());const Rr=Pr.headers.get("Expires");if(!Rr||new Date(Rr).getTime()-pr<42e4)return;let Dr=gx(nr.url,{persistentParams:Jv});if(gr.status===206){const Hr=nr.headers.get("Range");if(!Hr)return;Pr.status=200,Dr=Yv(Dr,{range:Hr})}(function(Hr,Jr){if(Zy===void 0)try{new Response(new ReadableStream),Zy=!0}catch{Zy=!1}Zy?Jr(Hr.body):Hr.blob().then(Jr)})(gr,Hr=>{const Jr=new Response((an=gr.status)!==200&&an!==404&&[101,103,204,205,304].includes(an)?null:Hr,Pr);var an;Um(),hu&&hu.then(Qr=>Qr.put(Dr,Jr)).catch(Qr=>Ts(Qr.message))})}(yt,qt,Xt),Et=!0,ft(null,Jt,Wt.headers.get("Cache-Control"),Wt.headers.get("Expires")))}).catch(Jt=>{At||ft(new Error(Jt.message))})};return Ct?function(Wt,qt){if(Um(),!hu)return qt(null);hu.then(Xt=>{let Jt=gx(Wt.url,{persistentParams:Jv});const nr=Wt.headers.get("Range");nr&&(Jt=Yv(Jt,{range:nr})),Xt.match(Jt).then(gr=>{const pr=function(xr){if(!xr)return!1;const Pr=new Date(xr.headers.get("Expires")||0),Rr=Nm(xr.headers.get("Cache-Control")||"");return Pr>Date.now()&&!Rr["no-cache"]}(gr);Xt.delete(Jt),pr&&Xt.put(Jt,gr.clone()),qt(null,gr,pr)}).catch(qt)}).catch(qt)}(yt,Bt):Bt(null,null),{cancel:()=>{At=!0,Et||mt.abort()}}}(ot,nt);if(Wp()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",ot,nt,void 0,!0)}var lt;return function(dt,ft){const mt=new XMLHttpRequest;mt.open(dt.method||"GET",dt.url,!0),dt.type==="arrayBuffer"&&(mt.responseType="arraybuffer");for(const yt in dt.headers)mt.setRequestHeader(yt,dt.headers[yt]);return dt.type==="json"&&(mt.responseType="text",mt.setRequestHeader("Accept","application/json")),mt.withCredentials=dt.credentials==="include",mt.onerror=()=>{ft(new Error(mt.statusText))},mt.onload=()=>{if((mt.status>=200&&mt.status<300||mt.status===0)&&mt.response!==null){let yt=mt.response;if(dt.type==="json")try{yt=JSON.parse(mt.response)}catch(Et){return ft(Et)}ft(null,yt,mt.getResponseHeader("Cache-Control"),mt.getResponseHeader("Expires"))}else ft(new Xy(mt.statusText,mt.status,dt.url))},mt.send(dt.body),{cancel:()=>mt.abort()}}(ot,nt)},pp=function(ot,nt){return fu(Zs(ot,{type:"arrayBuffer"}),nt)};function K1(ot){const nt=document.createElement("a");return nt.href=ot,nt.protocol===location.protocol&&nt.host===location.host}const r_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Hm,Zp;Hm=[],Zp=0;const Zm=function(ot,nt){if(Ky.supported&&(ot.headers||(ot.headers={}),ot.headers.accept="image/webp,*/*"),Zp>=wt.MAX_PARALLEL_IMAGE_REQUESTS){const mt={requestParameters:ot,callback:nt,cancelled:!1,cancel(){this.cancelled=!0}};return Hm.push(mt),mt}Zp++;let lt=!1;const dt=()=>{if(!lt)for(lt=!0,Zp--;Hm.length&&Zp<wt.MAX_PARALLEL_IMAGE_REQUESTS;){const mt=Hm.shift(),{requestParameters:yt,callback:Et,cancelled:At}=mt;At||(mt.cancel=Zm(yt,Et).cancel)}},ft=pp(ot,(mt,yt,Et,At)=>{dt(),mt?nt(mt):yt&&(self.createImageBitmap?function(Ct,Lt){const Bt=new Blob([new Uint8Array(Ct)],{type:"image/png"});createImageBitmap(Bt).then(zt=>{Lt(null,zt)}).catch(zt=>{Lt(new Error(`Could not load image because of ${zt.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(yt,(Ct,Lt)=>nt(Ct,Lt,Et,At)):function(Ct,Lt){const Bt=new Image;Bt.onload=()=>{Lt(null,Bt),URL.revokeObjectURL(Bt.src),Bt.onload=null,requestAnimationFrame(()=>{Bt.src=r_})},Bt.onerror=()=>Lt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const zt=new Blob([new Uint8Array(Ct)],{type:"image/png"});Bt.src=Ct.byteLength?URL.createObjectURL(zt):r_}(yt,(Ct,Lt)=>nt(Ct,Lt,Et,At)))});return{cancel:()=>{ft.cancel(),dt()}}},bx="01",wx="NO_ACCESS_TOKEN",Y1=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Jl(ot){const nt=ot.match(Y1);if(!nt)throw new Error("Unable to parse URL object");return{protocol:nt[1],authority:nt[2],path:nt[3]||"/",params:nt[4]?nt[4].split("&"):[]}}function mp(ot){const nt=ot.params.length?`?${ot.params.join("&")}`:"";return`${ot.protocol}://${ot.authority}${ot.path}${nt}`}const Ex="mapbox.eventData";function n_(ot){if(!ot)return null;const nt=ot.split(".");if(!nt||nt.length!==3)return null;try{return JSON.parse(decodeURIComponent(atob(nt[1]).split("").map(lt=>"%"+("00"+lt.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class gp{constructor(nt){this.type=nt,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(nt){const lt=n_(wt.ACCESS_TOKEN);let dt="";return dt=lt&&lt.u?btoa(encodeURIComponent(lt.u).replace(/%([0-9A-F]{2})/g,(ft,mt)=>String.fromCharCode(+("0x"+mt)))):wt.ACCESS_TOKEN||"",nt?`${Ex}.${nt}:${dt}`:`${Ex}:${dt}`}fetchEventData(){const nt=Gy("localStorage"),lt=this.getStorageKey(),dt=this.getStorageKey("uuid");if(nt)try{const ft=localStorage.getItem(lt);ft&&(this.eventData=JSON.parse(ft));const mt=localStorage.getItem(dt);mt&&(this.anonId=mt)}catch{Ts("Unable to read from LocalStorage")}}saveEventData(){const nt=Gy("localStorage"),lt=this.getStorageKey(),dt=this.getStorageKey("uuid"),ft=this.anonId;if(nt&&ft)try{localStorage.setItem(dt,ft),Object.keys(this.eventData).length>=1&&localStorage.setItem(lt,JSON.stringify(this.eventData))}catch{Ts("Unable to write to LocalStorage")}}processRequests(nt){}postEvent(nt,lt,dt,ft){if(!wt.EVENTS_URL)return;const mt=Jl(wt.EVENTS_URL);mt.params.push(`access_token=${ft||wt.ACCESS_TOKEN||""}`);const yt={event:this.type,created:new Date(nt).toISOString()},Et=lt?Zs(yt,lt):yt,At={url:mp(mt),headers:{"Content-Type":"text/plain"},body:JSON.stringify([Et])};this.pendingRequest=function(Ct,Lt){return fu(Zs(Ct,{method:"POST"}),Lt)}(At,Ct=>{this.pendingRequest=null,dt(Ct),this.saveEventData(),this.processRequests(ft)})}queueRequest(nt,lt){this.queue.push(nt),this.processRequests(lt)}}const i_=new class extends gp{constructor(ot){super("appUserTurnstile"),this._customAccessToken=ot}postTurnstileEvent(ot,nt){wt.EVENTS_URL&&wt.ACCESS_TOKEN&&Array.isArray(ot)&&ot.some(lt=>kt(lt)||St(lt))&&this.queueRequest(Date.now(),nt)}processRequests(ot){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const nt=n_(wt.ACCESS_TOKEN),lt=nt?nt.u:wt.ACCESS_TOKEN;let dt=lt!==this.eventData.tokenU;fx(this.anonId)||(this.anonId=Up(),dt=!0);const ft=this.queue.shift();if(this.eventData.lastSuccess){const mt=new Date(this.eventData.lastSuccess),yt=new Date(ft),Et=(ft-this.eventData.lastSuccess)/864e5;dt=dt||Et>=1||Et<-1||mt.getDate()!==yt.getDate()}else dt=!0;dt?this.postEvent(ft,{sdkIdentifier:"mapbox-gl-js",sdkVersion:gt,skuId:bx,"enabled.telemetry":!1,userId:this.anonId},mt=>{mt||(this.eventData.lastSuccess=ft,this.eventData.tokenU=lt)},ot):this.processRequests()}},Sx=i_.postTurnstileEvent.bind(i_),qp=new class extends gp{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(ot,nt,lt,dt){this.skuToken=nt,this.errorCb=dt,wt.EVENTS_URL&&(lt||wt.ACCESS_TOKEN?this.queueRequest({id:ot,timestamp:Date.now()},lt):this.errorCb(new Error(wx)))}processRequests(ot){if(this.pendingRequest||this.queue.length===0)return;const{id:nt,timestamp:lt}=this.queue.shift();nt&&this.success[nt]||(this.anonId||this.fetchEventData(),fx(this.anonId)||(this.anonId=Up()),this.postEvent(lt,{sdkIdentifier:"mapbox-gl-js",sdkVersion:gt,skuId:bx,skuToken:this.skuToken,userId:this.anonId},dt=>{dt?this.errorCb(dt):nt&&(this.success[nt]=!0)},ot))}remove(){this.errorCb=null}},o_=qp.postMapLoadEvent.bind(qp),qm=new class extends gp{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(ot){let nt=this.mapInstanceIdMap.get(ot);return nt||(nt=Up(),this.mapInstanceIdMap.set(ot,nt)),nt}getEventId(ot){const nt=this.eventIdPerMapInstanceMap.get(ot)||0;return this.eventIdPerMapInstanceMap.set(ot,nt+1),nt}postStyleLoadEvent(ot,nt){const{map:lt,style:dt,importedStyles:ft}=nt;if(!wt.EVENTS_URL||!ot&&!wt.ACCESS_TOKEN)return;const mt=this.getMapInstanceId(lt),yt={mapInstanceId:mt,eventId:this.getEventId(mt),style:dt};ft.length&&(yt.importedStyles=ft),this.queueRequest({timestamp:Date.now(),payload:yt},ot)}processRequests(ot){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:nt,payload:lt}=this.queue.shift();this.postEvent(nt,lt,()=>{},ot)}},a_=qm.postStyleLoadEvent.bind(qm),s_=new class extends gp{constructor(){super("gljs.performance")}postPerformanceEvent(ot,nt){wt.EVENTS_URL&&(ot||wt.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:nt},ot)}processRequests(ot){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:nt,performanceData:lt}=this.queue.shift(),dt=function(ft){const mt=performance.getEntriesByType("resource"),yt=performance.getEntriesByType("mark"),Et=function(Wt){const qt={};if(Wt){for(const Xt in Wt)if(Xt!=="other")for(const Jt of Wt[Xt]){const nr=`${Xt}ResolveRangeMin`,gr=`${Xt}ResolveRangeMax`,pr=`${Xt}RequestCount`,xr=`${Xt}RequestCachedCount`;qt[nr]=Math.min(qt[nr]||1/0,Jt.startTime),qt[gr]=Math.max(qt[gr]||-1/0,Jt.responseEnd);const Pr=Rr=>{qt[Rr]===void 0&&(qt[Rr]=0),++qt[Rr]};Jt.transferSize!==void 0&&Jt.transferSize===0&&Pr(xr),Pr(pr)}}return qt}(function(Wt,qt){const Xt={};if(Wt)for(const Jt of Wt){const nr=qt(Jt);Xt[nr]===void 0&&(Xt[nr]=[]),Xt[nr].push(Jt)}return Xt}(mt,jt)),At=window.devicePixelRatio,Ct=navigator.connection||navigator.mozConnection||navigator.webkitConnection,Lt=Ct?Ct.effectiveType:void 0,Bt={counters:[],metadata:[],attributes:[]},zt=(Wt,qt,Xt)=>{Xt!=null&&Wt.push({name:qt,value:Xt.toString()})};for(const Wt in Et)zt(Bt.counters,Wt,Et[Wt]);if(ft.interactionRange[0]!==1/0&&ft.interactionRange[1]!==-1/0&&(zt(Bt.counters,"interactionRangeMin",ft.interactionRange[0]),zt(Bt.counters,"interactionRangeMax",ft.interactionRange[1])),yt)for(const Wt of Object.keys(Mt)){const qt=Mt[Wt],Xt=yt.find(Jt=>Jt.name===qt);Xt&&zt(Bt.counters,qt,Xt.startTime)}return zt(Bt.counters,"visibilityHidden",ft.visibilityHidden),zt(Bt.attributes,"style",function(Wt){if(Wt)for(const qt of Wt){const Xt=qt.name.split("?")[0];if(Dt(Xt)){const Jt=Xt.split("/").slice(-2);if(Jt.length===2)return`mapbox://styles/${Jt[0]}/${Jt[1]}`}}}(mt)),zt(Bt.attributes,"terrainEnabled",ft.terrainEnabled?"true":"false"),zt(Bt.attributes,"fogEnabled",ft.fogEnabled?"true":"false"),zt(Bt.attributes,"projection",ft.projection),zt(Bt.attributes,"zoom",ft.zoom),zt(Bt.metadata,"devicePixelRatio",At),zt(Bt.metadata,"connectionEffectiveType",Lt),zt(Bt.metadata,"navigatorUserAgent",navigator.userAgent),zt(Bt.metadata,"screenWidth",window.screen.width),zt(Bt.metadata,"screenHeight",window.screen.height),zt(Bt.metadata,"windowWidth",window.innerWidth),zt(Bt.metadata,"windowHeight",window.innerHeight),zt(Bt.metadata,"mapWidth",ft.width/At),zt(Bt.metadata,"mapHeight",ft.height/At),zt(Bt.metadata,"webglRenderer",ft.renderer),zt(Bt.metadata,"webglVendor",ft.vendor),zt(Bt.metadata,"sdkVersion",gt),zt(Bt.metadata,"sdkIdentifier","mapbox-gl-js"),Bt}(lt);for(const ft of dt.metadata);for(const ft of dt.counters);for(const ft of dt.attributes);this.postEvent(nt,dt,()=>{},ot)}},X1=s_.postPerformanceEvent.bind(s_),Km=new class extends gp{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(ot,nt,lt,dt){if(!wt.API_URL||!wt.SESSION_PATH)return;const ft=Jl(wt.API_URL+wt.SESSION_PATH);ft.params.push(`sku=${nt||""}`),ft.params.push(`access_token=${dt||wt.ACCESS_TOKEN||""}`);const mt={url:mp(ft),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(yt,Et){return fu(Zs(yt,{method:"GET"}),Et)}(mt,yt=>{this.pendingRequest=null,lt(yt),this.saveEventData(),this.processRequests(dt)})}getSessionAPI(ot,nt,lt,dt){this.skuToken=nt,this.errorCb=dt,wt.SESSION_PATH&&wt.API_URL&&(lt||wt.ACCESS_TOKEN?this.queueRequest({id:ot,timestamp:Date.now()},lt):this.errorCb(new Error(wx)))}processRequests(ot){if(this.pendingRequest||this.queue.length===0)return;const{id:nt,timestamp:lt}=this.queue.shift();nt&&this.success[nt]||this.getSession(lt,this.skuToken,dt=>{dt?this.errorCb(dt):nt&&(this.success[nt]=!0)},ot)}remove(){this.errorCb=null}},Tx=Km.getSessionAPI.bind(Km),Ym=new Set;var yp={exports:{}},Kp={exports:function(ot,nt){var lt,dt,ft,mt,yt,Et,At,Ct;for(dt=ot.length-(lt=3&ot.length),ft=nt,yt=3432918353,Et=461845907,Ct=0;Ct<dt;)At=255&ot.charCodeAt(Ct)|(255&ot.charCodeAt(++Ct))<<8|(255&ot.charCodeAt(++Ct))<<16|(255&ot.charCodeAt(++Ct))<<24,++Ct,ft=27492+(65535&(mt=5*(65535&(ft=(ft^=At=(65535&(At=(At=(65535&At)*yt+(((At>>>16)*yt&65535)<<16)&4294967295)<<15|At>>>17))*Et+(((At>>>16)*Et&65535)<<16)&4294967295)<<13|ft>>>19))+((5*(ft>>>16)&65535)<<16)&4294967295))+((58964+(mt>>>16)&65535)<<16);switch(At=0,lt){case 3:At^=(255&ot.charCodeAt(Ct+2))<<16;case 2:At^=(255&ot.charCodeAt(Ct+1))<<8;case 1:ft^=At=(65535&(At=(At=(65535&(At^=255&ot.charCodeAt(Ct)))*yt+(((At>>>16)*yt&65535)<<16)&4294967295)<<15|At>>>17))*Et+(((At>>>16)*Et&65535)<<16)&4294967295}return ft^=ot.length,ft=2246822507*(65535&(ft^=ft>>>16))+((2246822507*(ft>>>16)&65535)<<16)&4294967295,ft=3266489909*(65535&(ft^=ft>>>13))+((3266489909*(ft>>>16)&65535)<<16)&4294967295,(ft^=ft>>>16)>>>0}},J1={exports:function(ot,nt){for(var lt,dt=ot.length,ft=nt^dt,mt=0;dt>=4;)lt=1540483477*(65535&(lt=255&ot.charCodeAt(mt)|(255&ot.charCodeAt(++mt))<<8|(255&ot.charCodeAt(++mt))<<16|(255&ot.charCodeAt(++mt))<<24))+((1540483477*(lt>>>16)&65535)<<16),ft=1540483477*(65535&ft)+((1540483477*(ft>>>16)&65535)<<16)^(lt=1540483477*(65535&(lt^=lt>>>24))+((1540483477*(lt>>>16)&65535)<<16)),dt-=4,++mt;switch(dt){case 3:ft^=(255&ot.charCodeAt(mt+2))<<16;case 2:ft^=(255&ot.charCodeAt(mt+1))<<8;case 1:ft=1540483477*(65535&(ft^=255&ot.charCodeAt(mt)))+((1540483477*(ft>>>16)&65535)<<16)}return ft=1540483477*(65535&(ft^=ft>>>13))+((1540483477*(ft>>>16)&65535)<<16),(ft^=ft>>>15)>>>0}},l_=Kp.exports,Q1=J1.exports;yp.exports=l_,yp.exports.murmur3=l_,yp.exports.murmur2=Q1;var Jy=Nt(yp.exports);class pu{constructor(nt,...lt){Zs(this,lt[0]||{}),this.type=nt}}class Xm extends pu{constructor(nt,lt={}){super("error",Zs({error:nt},lt))}}function Qy(ot,nt,lt){lt[ot]&&lt[ot].indexOf(nt)!==-1||(lt[ot]=lt[ot]||[],lt[ot].push(nt))}function Ax(ot,nt,lt){if(lt&&lt[ot]){const dt=lt[ot].indexOf(nt);dt!==-1&&lt[ot].splice(dt,1)}}class xp{on(nt,lt){return this._listeners=this._listeners||{},Qy(nt,lt,this._listeners),this}off(nt,lt){return Ax(nt,lt,this._listeners),Ax(nt,lt,this._oneTimeListeners),this}once(nt,lt){return lt?(this._oneTimeListeners=this._oneTimeListeners||{},Qy(nt,lt,this._oneTimeListeners),this):new Promise(dt=>this.once(nt,dt))}fire(nt,lt){const dt=typeof nt=="string"?new pu(nt,lt):nt,ft=dt.type;if(this.listens(ft)){dt.target=this;const mt=this._listeners&&this._listeners[ft]?this._listeners[ft].slice():[];for(const At of mt)At.call(this,dt);const yt=this._oneTimeListeners&&this._oneTimeListeners[ft]?this._oneTimeListeners[ft].slice():[];for(const At of yt)Ax(ft,At,this._oneTimeListeners),At.call(this,dt);const Et=this._eventedParent;Et&&(Zs(dt,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Et.fire(dt))}else dt instanceof Xm&&console.error(dt.error);return this}listens(nt){return!!(this._listeners&&this._listeners[nt]&&this._listeners[nt].length>0||this._oneTimeListeners&&this._oneTimeListeners[nt]&&this._oneTimeListeners[nt].length>0||this._eventedParent&&this._eventedParent.listens(nt))}setEventedParent(nt,lt){return this._eventedParent=nt,this._eventedParentData=lt,this}}at.G=void 0;var c_={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function e0(ot){return(ot=Math.round(ot))<0?0:ot>255?255:ot}function Px(ot){return e0(ot[ot.length-1]==="%"?parseFloat(ot)/100*255:parseInt(ot))}function r0(ot){return(nt=ot[ot.length-1]==="%"?parseFloat(ot)/100:parseFloat(ot))<0?0:nt>1?1:nt;var nt}function Cx(ot,nt,lt){return lt<0?lt+=1:lt>1&&(lt-=1),6*lt<1?ot+(nt-ot)*lt*6:2*lt<1?nt:3*lt<2?ot+(nt-ot)*(2/3-lt)*6:ot}try{at.G={}.parseCSSColor=function(ot){var nt,lt=ot.replace(/ /g,"").toLowerCase();if(lt in c_)return c_[lt].slice();if(lt[0]==="#")return lt.length===4?(nt=parseInt(lt.substr(1),16))>=0&&nt<=4095?[(3840&nt)>>4|(3840&nt)>>8,240&nt|(240&nt)>>4,15&nt|(15&nt)<<4,1]:null:lt.length===7&&(nt=parseInt(lt.substr(1),16))>=0&&nt<=16777215?[(16711680&nt)>>16,(65280&nt)>>8,255&nt,1]:null;var dt=lt.indexOf("("),ft=lt.indexOf(")");if(dt!==-1&&ft+1===lt.length){var mt=lt.substr(0,dt),yt=lt.substr(dt+1,ft-(dt+1)).split(","),Et=1;switch(mt){case"rgba":if(yt.length!==4)return null;Et=r0(yt.pop());case"rgb":return yt.length!==3?null:[Px(yt[0]),Px(yt[1]),Px(yt[2]),Et];case"hsla":if(yt.length!==4)return null;Et=r0(yt.pop());case"hsl":if(yt.length!==3)return null;var At=(parseFloat(yt[0])%360+360)%360/360,Ct=r0(yt[1]),Lt=r0(yt[2]),Bt=Lt<=.5?Lt*(Ct+1):Lt+Ct-Lt*Ct,zt=2*Lt-Bt;return[e0(255*Cx(zt,Bt,At+1/3)),e0(255*Cx(zt,Bt,At)),e0(255*Cx(zt,Bt,At-1/3)),Et];default:return null}}return null}}catch{}class ga{constructor(nt,lt,dt,ft=1){this.r=nt,this.g=lt,this.b=dt,this.a=ft}static parse(nt){if(!nt)return;if(nt instanceof ga)return nt;if(typeof nt!="string")return;const lt=at.G(nt);return lt?new ga(lt[0]/255*lt[3],lt[1]/255*lt[3],lt[2]/255*lt[3],lt[3]):void 0}toString(){const[nt,lt,dt,ft]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(nt)},${Math.round(lt)},${Math.round(dt)},${ft})`}toRenderColor(nt){const{r:lt,g:dt,b:ft,a:mt}=this;return new _b(nt,lt,dt,ft,mt)}}class _b{constructor(nt,lt,dt,ft,mt){if(nt){const yt=nt.image.height,Et=yt*yt;lt=mt===0?0:lt/mt*(yt-1),dt=mt===0?0:dt/mt*(yt-1),ft=mt===0?0:ft/mt*(yt-1);const At=Math.floor(lt),Ct=Math.floor(dt),Lt=Math.floor(ft),Bt=Math.ceil(lt),zt=Math.ceil(dt),Wt=Math.ceil(ft),qt=lt-At,Xt=dt-Ct,Jt=ft-Lt,nr=nt.image.data,gr=4*(At+Ct*Et+Lt*yt),pr=4*(At+Ct*Et+Wt*yt),xr=4*(At+zt*Et+Lt*yt),Pr=4*(At+zt*Et+Wt*yt),Rr=4*(Bt+Ct*Et+Lt*yt),Dr=4*(Bt+Ct*Et+Wt*yt),Hr=4*(Bt+zt*Et+Lt*yt),Jr=4*(Bt+zt*Et+Wt*yt);if(gr<0||Jr>=nr.length)throw new Error("out of range");this.r=ho(ho(ho(nr[gr],nr[pr],Jt),ho(nr[xr],nr[Pr],Jt),Xt),ho(ho(nr[Rr],nr[Dr],Jt),ho(nr[Hr],nr[Jr],Jt),Xt),qt)/255*mt,this.g=ho(ho(ho(nr[gr+1],nr[pr+1],Jt),ho(nr[xr+1],nr[Pr+1],Jt),Xt),ho(ho(nr[Rr+1],nr[Dr+1],Jt),ho(nr[Hr+1],nr[Jr+1],Jt),Xt),qt)/255*mt,this.b=ho(ho(ho(nr[gr+2],nr[pr+2],Jt),ho(nr[xr+2],nr[Pr+2],Jt),Xt),ho(ho(nr[Rr+2],nr[Dr+2],Jt),ho(nr[Hr+2],nr[Jr+2],Jt),Xt),qt)/255*mt,this.a=mt}else this.r=lt,this.g=dt,this.b=ft,this.a=mt}toArray(){const{r:nt,g:lt,b:dt,a:ft}=this;return ft===0?[0,0,0,0]:[255*nt/ft,255*lt/ft,255*dt/ft,ft]}toArray01(){const{r:nt,g:lt,b:dt,a:ft}=this;return ft===0?[0,0,0,0]:[nt/ft,lt/ft,dt/ft,ft]}toArray01Scaled(nt){const{r:lt,g:dt,b:ft,a:mt}=this;return mt===0?[0,0,0]:[lt/mt*nt,dt/mt*nt,ft/mt*nt]}toArray01PremultipliedAlpha(){const{r:nt,g:lt,b:dt,a:ft}=this;return[nt,lt,dt,ft]}toArray01Linear(){const{r:nt,g:lt,b:dt,a:ft}=this;return ft===0?[0,0,0,0]:[Math.pow(nt/ft,2.2),Math.pow(lt/ft,2.2),Math.pow(dt/ft,2.2),ft]}}function ho(ot,nt,lt){return ot*(1-lt)+nt*lt}function Rx(ot,nt,lt){return ot.map((dt,ft)=>ho(dt,nt[ft],lt))}ga.black=new ga(0,0,0,1),ga.white=new ga(1,1,1,1),ga.transparent=new ga(0,0,0,0),ga.red=new ga(1,0,0,1),ga.blue=new ga(0,0,1,1);var Jm=Object.freeze({__proto__:null,array:Rx,color:function(ot,nt,lt){return new ga(ho(ot.r,nt.r,lt),ho(ot.g,nt.g,lt),ho(ot.b,nt.b,lt),ho(ot.a,nt.a,lt))},number:ho});function Yp(ot,...nt){for(const lt of nt)for(const dt in lt)ot[dt]=lt[dt];return ot}class mu extends Error{constructor(nt,lt){super(lt),this.message=lt,this.key=nt}}class Ix{constructor(nt,lt=[]){this.parent=nt,this.bindings={};for(const[dt,ft]of lt)this.bindings[dt]=ft}concat(nt){return new Ix(this,nt)}get(nt){if(this.bindings[nt])return this.bindings[nt];if(this.parent)return this.parent.get(nt);throw new Error(`${nt} not found in scope.`)}has(nt){return!!this.bindings[nt]||!!this.parent&&this.parent.has(nt)}}const Nl={kind:"null"},Jn={kind:"number"},Zo={kind:"string"},_a={kind:"boolean"},Ql={kind:"color"},Xp={kind:"object"},Qo={kind:"value"},n0={kind:"collator"},Jp={kind:"formatted"},vp={kind:"resolvedImage"};function Xs(ot,nt){return{kind:"array",itemType:ot,N:nt}}function xs(ot){if(ot.kind==="array"){const nt=xs(ot.itemType);return typeof ot.N=="number"?`array<${nt}, ${ot.N}>`:ot.itemType.kind==="value"?"array":`array<${nt}>`}return ot.kind}const $x=[Nl,Jn,Zo,_a,Ql,Jp,Xp,Xs(Qo),vp];function Qm(ot,nt){if(nt.kind==="error")return null;if(ot.kind==="array"){if(nt.kind==="array"&&(nt.N===0&&nt.itemType.kind==="value"||!Qm(ot.itemType,nt.itemType))&&(typeof ot.N!="number"||ot.N===nt.N))return null}else{if(ot.kind===nt.kind)return null;if(ot.kind==="value"){for(const lt of $x)if(!Qm(lt,nt))return null}}return`Expected ${xs(ot)} but found ${xs(nt)} instead.`}function _c(ot,nt){return nt.some(lt=>lt.kind===ot.kind)}function _g(ot,nt){return nt.some(lt=>lt==="null"?ot===null:lt==="array"?Array.isArray(ot):lt==="object"?ot&&!Array.isArray(ot)&&typeof ot=="object":lt===typeof ot)}class i0{constructor(nt,lt,dt){this.sensitivity=nt?lt?"variant":"case":lt?"accent":"base",this.locale=dt,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(nt,lt){return this.collator.compare(nt,lt)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class o0{constructor(nt,lt,dt,ft,mt){this.text=nt.normalize?nt.normalize():nt,this.image=lt,this.scale=dt,this.fontStack=ft,this.textColor=mt}}class Sl{constructor(nt){this.sections=nt}static fromString(nt){return new Sl([new o0(nt,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(nt=>nt.text.length!==0||nt.image&&nt.image.namePrimary.length!==0)}static factory(nt){return nt instanceof Sl?nt:Sl.fromString(nt)}toString(){return this.sections.length===0?"":this.sections.map(nt=>nt.text).join("")}serialize(){const nt=["format"];for(const lt of this.sections){if(lt.image){nt.push(["image",lt.image.namePrimary]);continue}nt.push(lt.text);const dt={};lt.fontStack&&(dt["text-font"]=["literal",lt.fontStack.split(",")]),lt.scale&&(dt["font-scale"]=lt.scale),lt.textColor&&(dt["text-color"]=["rgba"].concat(lt.textColor.toRenderColor(null).toArray())),nt.push(dt)}return nt}}class Fl{constructor(nt){this.namePrimary=nt.namePrimary,nt.nameSecondary&&(this.nameSecondary=nt.nameSecondary),this.available=nt.available}toString(){return this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}static fromString(nt,lt){return nt?new Fl({namePrimary:nt,nameSecondary:lt,available:!1}):null}serialize(){return this.nameSecondary?["image",this.namePrimary,this.nameSecondary]:["image",this.namePrimary]}}function u_(ot,nt,lt,dt){return typeof ot=="number"&&ot>=0&&ot<=255&&typeof nt=="number"&&nt>=0&&nt<=255&&typeof lt=="number"&&lt>=0&&lt<=255?dt===void 0||typeof dt=="number"&&dt>=0&&dt<=1?null:`Invalid rgba value [${[ot,nt,lt,dt].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof dt=="number"?[ot,nt,lt,dt]:[ot,nt,lt]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Qp(ot){if(ot===null||typeof ot=="string"||typeof ot=="boolean"||typeof ot=="number"||ot instanceof ga||ot instanceof i0||ot instanceof Sl||ot instanceof Fl)return!0;if(Array.isArray(ot)){for(const nt of ot)if(!Qp(nt))return!1;return!0}if(typeof ot=="object"){for(const nt in ot)if(!Qp(ot[nt]))return!1;return!0}return!1}function $s(ot){if(ot===null)return Nl;if(typeof ot=="string")return Zo;if(typeof ot=="boolean")return _a;if(typeof ot=="number")return Jn;if(ot instanceof ga)return Ql;if(ot instanceof i0)return n0;if(ot instanceof Sl)return Jp;if(ot instanceof Fl)return vp;if(Array.isArray(ot)){const nt=ot.length;let lt;for(const dt of ot){const ft=$s(dt);if(lt){if(lt===ft)continue;lt=Qo;break}lt=ft}return Xs(lt||Qo,nt)}return Xp}function ou(ot){const nt=typeof ot;return ot===null?"":nt==="string"||nt==="number"||nt==="boolean"?String(ot):ot instanceof ga||ot instanceof Sl||ot instanceof Fl?ot.toString():JSON.stringify(ot)}class au{constructor(nt,lt){this.type=nt,this.value=lt}static parse(nt,lt){if(nt.length!==2)return lt.error(`'literal' expression requires exactly one argument, but found ${nt.length-1} instead.`);if(!Qp(nt[1]))return lt.error("invalid value");const dt=nt[1];let ft=$s(dt);const mt=lt.expectedType;return ft.kind!=="array"||ft.N!==0||!mt||mt.kind!=="array"||typeof mt.N=="number"&&mt.N!==0||(ft=mt),new au(ft,dt)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ga?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof Sl?this.value.serialize():this.value}}class Os{constructor(nt){this.name="ExpressionEvaluationError",this.message=nt}toJSON(){return this.message}}const Mx={string:Zo,number:Jn,boolean:_a,object:Xp};class Bl{constructor(nt,lt){this.type=nt,this.args=lt}static parse(nt,lt){if(nt.length<2)return lt.error("Expected at least one argument.");let dt,ft=1;const mt=nt[0];if(mt==="array"){let Et,At;if(nt.length>2){const Ct=nt[1];if(typeof Ct!="string"||!(Ct in Mx)||Ct==="object")return lt.error('The item type argument of "array" must be one of string, number, boolean',1);Et=Mx[Ct],ft++}else Et=Qo;if(nt.length>3){if(nt[2]!==null&&(typeof nt[2]!="number"||nt[2]<0||nt[2]!==Math.floor(nt[2])))return lt.error('The length argument to "array" must be a positive integer literal',2);At=nt[2],ft++}dt=Xs(Et,At)}else dt=Mx[mt];const yt=[];for(;ft<nt.length;ft++){const Et=lt.parse(nt[ft],ft,Qo);if(!Et)return null;yt.push(Et)}return new Bl(dt,yt)}evaluate(nt){for(let lt=0;lt<this.args.length;lt++){const dt=this.args[lt].evaluate(nt);if(!Qm(this.type,$s(dt)))return dt;if(lt===this.args.length-1)throw new Os(`The expression ${JSON.stringify(this.args[lt].serialize())} evaluated to ${xs($s(dt))} but was expected to be of type ${xs(this.type)}.`)}return null}eachChild(nt){this.args.forEach(nt)}outputDefined(){return this.args.every(nt=>nt.outputDefined())}serialize(){const nt=this.type,lt=[nt.kind];if(nt.kind==="array"){const dt=nt.itemType;if(dt.kind==="string"||dt.kind==="number"||dt.kind==="boolean"){lt.push(dt.kind);const ft=nt.N;(typeof ft=="number"||this.args.length>1)&&lt.push(ft)}}return lt.concat(this.args.map(dt=>dt.serialize()))}}class _p{constructor(nt){this.type=Jp,this.sections=nt}static parse(nt,lt){if(nt.length<2)return lt.error("Expected at least one argument.");const dt=nt[1];if(!Array.isArray(dt)&&typeof dt=="object")return lt.error("First argument must be an image or text section.");const ft=[];let mt=!1;for(let yt=1;yt<=nt.length-1;++yt){const Et=nt[yt];if(mt&&typeof Et=="object"&&!Array.isArray(Et)){mt=!1;let At=null;if(Et["font-scale"]&&(At=lt.parse(Et["font-scale"],1,Jn),!At))return null;let Ct=null;if(Et["text-font"]&&(Ct=lt.parse(Et["text-font"],1,Xs(Zo)),!Ct))return null;let Lt=null;if(Et["text-color"]&&(Lt=lt.parse(Et["text-color"],1,Ql),!Lt))return null;const Bt=ft[ft.length-1];Bt.scale=At,Bt.font=Ct,Bt.textColor=Lt}else{const At=lt.parse(nt[yt],1,Qo);if(!At)return null;const Ct=At.type.kind;if(Ct!=="string"&&Ct!=="value"&&Ct!=="null"&&Ct!=="resolvedImage")return lt.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");mt=!0,ft.push({content:At,scale:null,font:null,textColor:null})}}return new _p(ft)}evaluate(nt){return new Sl(this.sections.map(lt=>{const dt=lt.content.evaluate(nt);return $s(dt)===vp?new o0("",dt,null,null,null):new o0(ou(dt),null,lt.scale?lt.scale.evaluate(nt):null,lt.font?lt.font.evaluate(nt).join(","):null,lt.textColor?lt.textColor.evaluate(nt):null)}))}eachChild(nt){for(const lt of this.sections)nt(lt.content),lt.scale&&nt(lt.scale),lt.font&&nt(lt.font),lt.textColor&&nt(lt.textColor)}outputDefined(){return!1}serialize(){const nt=["format"];for(const lt of this.sections){nt.push(lt.content.serialize());const dt={};lt.scale&&(dt["font-scale"]=lt.scale.serialize()),lt.font&&(dt["text-font"]=lt.font.serialize()),lt.textColor&&(dt["text-color"]=lt.textColor.serialize()),nt.push(dt)}return nt}}class Tu{constructor(nt,lt){this.type=vp,this.inputPrimary=nt,this.inputSecondary=lt}static parse(nt,lt){if(nt.length<2)return lt.error("Expected two or more arguments.");const dt=lt.parse(nt[1],1,Zo);if(!dt)return lt.error("No image name provided.");if(nt.length===2)return new Tu(dt);const ft=lt.parse(nt[2],1,Zo);return ft?new Tu(dt,ft):lt.error("Secondary image variant is not a string.")}evaluate(nt){const lt=Fl.fromString(this.inputPrimary.evaluate(nt),this.inputSecondary?this.inputSecondary.evaluate(nt):void 0);return lt&&nt.availableImages&&(lt.available=nt.availableImages.indexOf(lt.namePrimary)>-1,lt.nameSecondary&&lt.available&&nt.availableImages&&(lt.available=nt.availableImages.indexOf(lt.nameSecondary)>-1)),lt}eachChild(nt){nt(this.inputPrimary),this.inputSecondary&&nt(this.inputSecondary)}outputDefined(){return!1}serialize(){return this.inputSecondary?["image",this.inputPrimary.serialize(),this.inputSecondary.serialize()]:["image",this.inputPrimary.serialize()]}}function Xu(ot){return ot instanceof Number?"number":ot instanceof String?"string":ot instanceof Boolean?"boolean":Array.isArray(ot)?"array":ot===null?"null":typeof ot}const ew={"to-boolean":_a,"to-color":Ql,"to-number":Jn,"to-string":Zo};class Au{constructor(nt,lt){this.type=nt,this.args=lt}static parse(nt,lt){if(nt.length<2)return lt.error("Expected at least one argument.");const dt=nt[0],ft=[];let mt=Nl;if(dt==="to-array"){if(!Array.isArray(nt[1]))return null;const yt=nt[1].length;if(lt.expectedType){if(lt.expectedType.kind!=="array")return lt.error(`Expected ${lt.expectedType.kind} but found array.`);mt=Xs(lt.expectedType.itemType,yt)}else{if(!(yt>0&&Qp(nt[1][0])))return null;mt=Xs($s(nt[1][0]),yt)}for(let Et=0;Et<yt;Et++){const At=nt[1][Et];let Ct;if(Xu(At)==="array")Ct=lt.parse(At,void 0,mt.itemType);else{const Lt=Xu(At);if(Lt!==mt.itemType.kind)return lt.error(`Expected ${mt.itemType.kind} but found ${Lt}.`);Ct=lt.registry.literal.parse(["literal",At===void 0?null:At],lt)}if(!Ct)return null;ft.push(Ct)}}else{if((dt==="to-boolean"||dt==="to-string")&&nt.length!==2)return lt.error("Expected one argument.");mt=ew[dt];for(let yt=1;yt<nt.length;yt++){const Et=lt.parse(nt[yt],yt,Qo);if(!Et)return null;ft.push(Et)}}return new Au(mt,ft)}evaluate(nt){if(this.type.kind==="boolean")return!!this.args[0].evaluate(nt);if(this.type.kind==="color"){let lt,dt;for(const ft of this.args){if(lt=ft.evaluate(nt),dt=null,lt instanceof ga)return lt;if(typeof lt=="string"){const mt=nt.parseColor(lt);if(mt)return mt}else if(Array.isArray(lt)&&(dt=lt.length<3||lt.length>4?`Invalid rbga value ${JSON.stringify(lt)}: expected an array containing either three or four numeric values.`:u_(lt[0],lt[1],lt[2],lt[3]),!dt))return new ga(lt[0]/255,lt[1]/255,lt[2]/255,lt[3])}throw new Os(dt||`Could not parse color from value '${typeof lt=="string"?lt:String(JSON.stringify(lt))}'`)}if(this.type.kind==="number"){let lt=null;for(const dt of this.args){if(lt=dt.evaluate(nt),lt===null)return 0;const ft=Number(lt);if(!isNaN(ft))return ft}throw new Os(`Could not convert ${JSON.stringify(lt)} to number.`)}return this.type.kind==="formatted"?Sl.fromString(ou(this.args[0].evaluate(nt))):this.type.kind==="resolvedImage"?Fl.fromString(ou(this.args[0].evaluate(nt))):this.type.kind==="array"?this.args.map(lt=>lt.evaluate(nt)):ou(this.args[0].evaluate(nt))}eachChild(nt){this.args.forEach(nt)}outputDefined(){return this.args.every(nt=>nt.outputDefined())}serialize(){if(this.type.kind==="formatted")return new _p([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Tu(this.args[0]).serialize();const nt=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(lt=>{nt.push(lt.serialize())}),nt}}const tw=["Unknown","Point","LineString","Polygon"];class Ox{constructor(nt,lt){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=nt,this.options=lt}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?tw[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(nt){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const nt=this.featureDistanceData.center,lt=this.featureDistanceData.scale,{x:dt,y:ft}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(dt*lt-nt[0])+this.featureDistanceData.bearing[1]*(ft*lt-nt[1])}return 0}parseColor(nt){let lt=this._parseColorCache[nt];return lt||(lt=this._parseColorCache[nt]=ga.parse(nt)),lt}getConfig(nt){return this.options?this.options.get(nt):null}}class $l{constructor(nt,lt,dt,ft,mt){this.name=nt,this.type=lt,this._evaluate=dt,this.args=ft,this._overloadIndex=mt}evaluate(nt){if(!this._evaluate){const lt=$l.definitions[this.name];this._evaluate=Array.isArray(lt)?lt[2]:lt.overloads[this._overloadIndex][1]}return this._evaluate(nt,this.args)}eachChild(nt){this.args.forEach(nt)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(nt=>nt.serialize()))}static parse(nt,lt){const dt=nt[0],ft=$l.definitions[dt];if(!ft)return lt.error(`Unknown expression "${dt}". If you wanted a literal array, use ["literal", [...]].`,0);const mt=Array.isArray(ft)?ft[0]:ft.type,yt=Array.isArray(ft)?[[ft[1],ft[2]]]:ft.overloads,Et=[];let At=null,Ct=-1;for(const[Lt,Bt]of yt){if(Array.isArray(Lt)&&Lt.length!==nt.length-1)continue;Et.push(Lt),Ct++,At=new P_(lt.registry,lt.path,null,lt.scope,void 0,lt._scope,lt.options);const zt=[];let Wt=!1;for(let qt=1;qt<nt.length;qt++){const Xt=nt[qt],Jt=Array.isArray(Lt)?Lt[qt-1]:Lt.type,nr=At.parse(Xt,1+zt.length,Jt);if(!nr){Wt=!0;break}zt.push(nr)}if(!Wt)if(Array.isArray(Lt)&&Lt.length!==zt.length)At.error(`Expected ${Lt.length} arguments, but found ${zt.length} instead.`);else{for(let qt=0;qt<zt.length;qt++){const Xt=Array.isArray(Lt)?Lt[qt]:Lt.type,Jt=zt[qt];At.concat(qt+1).checkSubtype(Xt,Jt.type)}if(At.errors.length===0)return new $l(dt,mt,Bt,zt,Ct)}}if(Et.length===1)lt.errors.push(...At.errors);else{const Lt=(Et.length?Et:yt.map(([zt])=>zt)).map(rw).join(" | "),Bt=[];for(let zt=1;zt<nt.length;zt++){const Wt=lt.parse(nt[zt],1+Bt.length);if(!Wt)return null;Bt.push(xs(Wt.type))}lt.error(`Expected arguments of type ${Lt}, but found (${Bt.join(", ")}) instead.`)}return null}static register(nt,lt){$l.definitions=lt;for(const dt in lt)nt[dt]=$l}}function rw(ot){return Array.isArray(ot)?`(${ot.map(xs).join(", ")})`:`(${xs(ot.type)}...)`}class ey{constructor(nt,lt,dt){this.type=n0,this.locale=dt,this.caseSensitive=nt,this.diacriticSensitive=lt}static parse(nt,lt){if(nt.length!==2)return lt.error("Expected one argument.");const dt=nt[1];if(typeof dt!="object"||Array.isArray(dt))return lt.error("Collator options argument must be an object.");const ft=lt.parse(dt["case-sensitive"]!==void 0&&dt["case-sensitive"],1,_a);if(!ft)return null;const mt=lt.parse(dt["diacritic-sensitive"]!==void 0&&dt["diacritic-sensitive"],1,_a);if(!mt)return null;let yt=null;return dt.locale&&(yt=lt.parse(dt.locale,1,Zo),!yt)?null:new ey(ft,mt,yt)}evaluate(nt){return new i0(this.caseSensitive.evaluate(nt),this.diacriticSensitive.evaluate(nt),this.locale?this.locale.evaluate(nt):null)}eachChild(nt){nt(this.caseSensitive),nt(this.diacriticSensitive),this.locale&&nt(this.locale)}outputDefined(){return!1}serialize(){const nt={};return nt["case-sensitive"]=this.caseSensitive.serialize(),nt["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(nt.locale=this.locale.serialize()),["collator",nt]}}function xa(ot,nt,lt=0,dt=ot.length-1,ft=d_){for(;dt>lt;){if(dt-lt>600){const At=dt-lt+1,Ct=nt-lt+1,Lt=Math.log(At),Bt=.5*Math.exp(2*Lt/3),zt=.5*Math.sqrt(Lt*Bt*(At-Bt)/At)*(Ct-At/2<0?-1:1);xa(ot,nt,Math.max(lt,Math.floor(nt-Ct*Bt/At+zt)),Math.min(dt,Math.floor(nt+(At-Ct)*Bt/At+zt)),ft)}const mt=ot[nt];let yt=lt,Et=dt;for(em(ot,lt,nt),ft(ot[dt],mt)>0&&em(ot,lt,dt);yt<Et;){for(em(ot,yt,Et),yt++,Et--;ft(ot[yt],mt)<0;)yt++;for(;ft(ot[Et],mt)>0;)Et--}ft(ot[lt],mt)===0?em(ot,lt,Et):(Et++,em(ot,Et,dt)),Et<=nt&&(lt=Et+1),nt<=Et&&(dt=Et-1)}}function em(ot,nt,lt){const dt=ot[nt];ot[nt]=ot[lt],ot[lt]=dt}function d_(ot,nt){return ot<nt?-1:ot>nt?1:0}function nw(ot){let nt=0;for(let lt,dt,ft=0,mt=ot.length,yt=mt-1;ft<mt;yt=ft++)lt=ot[ft],dt=ot[yt],nt+=(dt.x-lt.x)*(lt.y+dt.y);return nt}function ty(ot,nt){ot[0]=Math.min(ot[0],nt[0]),ot[1]=Math.min(ot[1],nt[1]),ot[2]=Math.max(ot[2],nt[0]),ot[3]=Math.max(ot[3],nt[1])}function Ju(ot,nt){return!(ot[0]<=nt[0]||ot[2]>=nt[2]||ot[1]<=nt[1]||ot[3]>=nt[3])}function a0(ot,nt,lt){const dt=ot[0]-nt[0],ft=ot[1]-nt[1],mt=ot[0]-lt[0],yt=ot[1]-lt[1];return dt*yt-mt*ft==0&&dt*mt<=0&&ft*yt<=0}function Pu(ot,nt,lt=!1){let dt=!1;for(let Et=0,At=nt.length;Et<At;Et++){const Ct=nt[Et];for(let Lt=0,Bt=Ct.length,zt=Bt-1;Lt<Bt;zt=Lt++){const Wt=Ct[zt],qt=Ct[Lt];if(a0(ot,Wt,qt))return lt;(mt=Wt)[1]>(ft=ot)[1]!=(yt=qt)[1]>ft[1]&&ft[0]<(yt[0]-mt[0])*(ft[1]-mt[1])/(yt[1]-mt[1])+mt[0]&&(dt=!dt)}}var ft,mt,yt;return dt}function h_(ot,nt,lt,dt){const ft=dt[0]-lt[0],mt=dt[1]-lt[1],yt=(ot[0]-lt[0])*mt-ft*(ot[1]-lt[1]),Et=(nt[0]-lt[0])*mt-ft*(nt[1]-lt[1]);return yt>0&&Et<0||yt<0&&Et>0}function ry(ot,nt,lt,dt){return(ft=[dt[0]-lt[0],dt[1]-lt[1]])[0]*(mt=[nt[0]-ot[0],nt[1]-ot[1]])[1]-ft[1]*mt[0]!=0&&!(!h_(ot,nt,lt,dt)||!h_(lt,dt,ot,nt));var ft,mt}const Js=8192;function iw(ot,nt){const lt=(180+ot[0])/360,dt=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ot[1]*Math.PI/360)))/360,ft=Math.pow(2,nt.z);return[Math.round(lt*ft*Js),Math.round(dt*ft*Js)]}function f_(ot,nt){for(let lt=0;lt<nt.length;lt++)if(Pu(ot,nt[lt]))return!0;return!1}function ny(ot,nt,lt){for(const dt of lt)for(let ft=0,mt=dt.length,yt=mt-1;ft<mt;yt=ft++)if(ry(ot,nt,dt[yt],dt[ft]))return!0;return!1}function s0(ot,nt){for(let lt=0;lt<ot.length;++lt)if(!Pu(ot[lt],nt))return!1;for(let lt=0;lt<ot.length-1;++lt)if(ny(ot[lt],ot[lt+1],nt))return!1;return!0}function ow(ot,nt){for(let lt=0;lt<nt.length;lt++)if(s0(ot,nt[lt]))return!0;return!1}function jx(ot,nt,lt){const dt=[];for(let ft=0;ft<ot.length;ft++){const mt=[];for(let yt=0;yt<ot[ft].length;yt++){const Et=iw(ot[ft][yt],lt);ty(nt,Et),mt.push(Et)}dt.push(mt)}return dt}function p_(ot,nt,lt){const dt=[];for(let ft=0;ft<ot.length;ft++){const mt=jx(ot[ft],nt,lt);dt.push(mt)}return dt}function Dx(ot,nt,lt,dt){if(ot[0]<lt[0]||ot[0]>lt[2]){const ft=.5*dt;let mt=ot[0]-lt[0]>ft?-dt:lt[0]-ot[0]>ft?dt:0;mt===0&&(mt=ot[0]-lt[2]>ft?-dt:lt[2]-ot[0]>ft?dt:0),ot[0]+=mt}ty(nt,ot)}function l0(ot,nt,lt,dt){const ft=Math.pow(2,dt.z)*Js,mt=[dt.x*Js,dt.y*Js],yt=[];if(!ot)return yt;for(const Et of ot)for(const At of Et){const Ct=[At.x+mt[0],At.y+mt[1]];Dx(Ct,nt,lt,ft),yt.push(Ct)}return yt}function m_(ot,nt,lt,dt){const ft=Math.pow(2,dt.z)*Js,mt=[dt.x*Js,dt.y*Js],yt=[];if(!ot)return yt;for(const At of ot){const Ct=[];for(const Lt of At){const Bt=[Lt.x+mt[0],Lt.y+mt[1]];ty(nt,Bt),Ct.push(Bt)}yt.push(Ct)}if(nt[2]-nt[0]<=ft/2){(Et=nt)[0]=Et[1]=1/0,Et[2]=Et[3]=-1/0;for(const At of yt)for(const Ct of At)Dx(Ct,nt,lt,ft)}var Et;return yt}class gu{constructor(nt,lt){this.type=_a,this.geojson=nt,this.geometries=lt}static parse(nt,lt){if(nt.length!==2)return lt.error(`'within' expression requires exactly one argument, but found ${nt.length-1} instead.`);if(Qp(nt[1])){const dt=nt[1];if(dt.type==="FeatureCollection")for(let ft=0;ft<dt.features.length;++ft){const mt=dt.features[ft].geometry.type;if(mt==="Polygon"||mt==="MultiPolygon")return new gu(dt,dt.features[ft].geometry)}else if(dt.type==="Feature"){const ft=dt.geometry.type;if(ft==="Polygon"||ft==="MultiPolygon")return new gu(dt,dt.geometry)}else if(dt.type==="Polygon"||dt.type==="MultiPolygon")return new gu(dt,dt)}return lt.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(nt){if(nt.geometry()!=null&&nt.canonicalID()!=null){if(nt.geometryType()==="Point")return function(lt,dt){const ft=[1/0,1/0,-1/0,-1/0],mt=[1/0,1/0,-1/0,-1/0],yt=lt.canonicalID();if(!yt)return!1;if(dt.type==="Polygon"){const Et=jx(dt.coordinates,mt,yt),At=l0(lt.geometry(),ft,mt,yt);if(!Ju(ft,mt))return!1;for(const Ct of At)if(!Pu(Ct,Et))return!1}if(dt.type==="MultiPolygon"){const Et=p_(dt.coordinates,mt,yt),At=l0(lt.geometry(),ft,mt,yt);if(!Ju(ft,mt))return!1;for(const Ct of At)if(!f_(Ct,Et))return!1}return!0}(nt,this.geometries);if(nt.geometryType()==="LineString")return function(lt,dt){const ft=[1/0,1/0,-1/0,-1/0],mt=[1/0,1/0,-1/0,-1/0],yt=lt.canonicalID();if(!yt)return!1;if(dt.type==="Polygon"){const Et=jx(dt.coordinates,mt,yt),At=m_(lt.geometry(),ft,mt,yt);if(!Ju(ft,mt))return!1;for(const Ct of At)if(!s0(Ct,Et))return!1}if(dt.type==="MultiPolygon"){const Et=p_(dt.coordinates,mt,yt),At=m_(lt.geometry(),ft,mt,yt);if(!Ju(ft,mt))return!1;for(const Ct of At)if(!ow(Ct,Et))return!1}return!0}(nt,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const c0={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},g_=1/298.257223563,y_=g_*(2-g_),iy=Math.PI/180;class oy{static fromTile(nt,lt,dt){const ft=Math.PI*(1-2*(nt+.5)/Math.pow(2,lt)),mt=Math.atan(.5*(Math.exp(ft)-Math.exp(-ft)))/iy;return new oy(mt,dt)}static get units(){return c0}constructor(nt,lt){if(nt===void 0)throw new Error("No latitude given.");if(lt&&!c0[lt])throw new Error(`Unknown unit ${lt}. Use one of: ${Object.keys(c0).join(", ")}`);const dt=6378.137*iy*(lt?c0[lt]:1),ft=Math.cos(nt*iy),mt=1/(1-y_*(1-ft*ft)),yt=Math.sqrt(mt);this.kx=dt*yt*ft,this.ky=dt*yt*mt*(1-y_)}distance(nt,lt){const dt=zl(nt[0]-lt[0])*this.kx,ft=(nt[1]-lt[1])*this.ky;return Math.sqrt(dt*dt+ft*ft)}bearing(nt,lt){const dt=zl(lt[0]-nt[0])*this.kx;return Math.atan2(dt,(lt[1]-nt[1])*this.ky)/iy}destination(nt,lt,dt){const ft=dt*iy;return this.offset(nt,Math.sin(ft)*lt,Math.cos(ft)*lt)}offset(nt,lt,dt){return[nt[0]+lt/this.kx,nt[1]+dt/this.ky]}lineDistance(nt){let lt=0;for(let dt=0;dt<nt.length-1;dt++)lt+=this.distance(nt[dt],nt[dt+1]);return lt}area(nt){let lt=0;for(let dt=0;dt<nt.length;dt++){const ft=nt[dt];for(let mt=0,yt=ft.length,Et=yt-1;mt<yt;Et=mt++)lt+=zl(ft[mt][0]-ft[Et][0])*(ft[mt][1]+ft[Et][1])*(dt?-1:1)}return Math.abs(lt)/2*this.kx*this.ky}along(nt,lt){let dt=0;if(lt<=0)return nt[0];for(let ft=0;ft<nt.length-1;ft++){const mt=nt[ft],yt=nt[ft+1],Et=this.distance(mt,yt);if(dt+=Et,dt>lt)return Lx(mt,yt,(lt-(dt-Et))/Et)}return nt[nt.length-1]}pointToSegmentDistance(nt,lt,dt){let[ft,mt]=lt,yt=zl(dt[0]-ft)*this.kx,Et=(dt[1]-mt)*this.ky;if(yt!==0||Et!==0){const At=(zl(nt[0]-ft)*this.kx*yt+(nt[1]-mt)*this.ky*Et)/(yt*yt+Et*Et);At>1?(ft=dt[0],mt=dt[1]):At>0&&(ft+=yt/this.kx*At,mt+=Et/this.ky*At)}return yt=zl(nt[0]-ft)*this.kx,Et=(nt[1]-mt)*this.ky,Math.sqrt(yt*yt+Et*Et)}pointOnLine(nt,lt){let dt=1/0,ft=nt[0][0],mt=nt[0][1],yt=0,Et=0;for(let At=0;At<nt.length-1;At++){let Ct=nt[At][0],Lt=nt[At][1],Bt=zl(nt[At+1][0]-Ct)*this.kx,zt=(nt[At+1][1]-Lt)*this.ky,Wt=0;Bt===0&&zt===0||(Wt=(zl(lt[0]-Ct)*this.kx*Bt+(lt[1]-Lt)*this.ky*zt)/(Bt*Bt+zt*zt),Wt>1?(Ct=nt[At+1][0],Lt=nt[At+1][1]):Wt>0&&(Ct+=Bt/this.kx*Wt,Lt+=zt/this.ky*Wt)),Bt=zl(lt[0]-Ct)*this.kx,zt=(lt[1]-Lt)*this.ky;const qt=Bt*Bt+zt*zt;qt<dt&&(dt=qt,ft=Ct,mt=Lt,yt=At,Et=Wt)}return{point:[ft,mt],index:yt,t:Math.max(0,Math.min(1,Et))}}lineSlice(nt,lt,dt){let ft=this.pointOnLine(dt,nt),mt=this.pointOnLine(dt,lt);if(ft.index>mt.index||ft.index===mt.index&&ft.t>mt.t){const Ct=ft;ft=mt,mt=Ct}const yt=[ft.point],Et=ft.index+1,At=mt.index;!x_(dt[Et],yt[0])&&Et<=At&&yt.push(dt[Et]);for(let Ct=Et+1;Ct<=At;Ct++)yt.push(dt[Ct]);return x_(dt[At],mt.point)||yt.push(mt.point),yt}lineSliceAlong(nt,lt,dt){let ft=0;const mt=[];for(let yt=0;yt<dt.length-1;yt++){const Et=dt[yt],At=dt[yt+1],Ct=this.distance(Et,At);if(ft+=Ct,ft>nt&&mt.length===0&&mt.push(Lx(Et,At,(nt-(ft-Ct))/Ct)),ft>=lt)return mt.push(Lx(Et,At,(lt-(ft-Ct))/Ct)),mt;ft>nt&&mt.push(At)}return mt}bufferPoint(nt,lt){const dt=lt/this.ky,ft=lt/this.kx;return[nt[0]-ft,nt[1]-dt,nt[0]+ft,nt[1]+dt]}bufferBBox(nt,lt){const dt=lt/this.ky,ft=lt/this.kx;return[nt[0]-ft,nt[1]-dt,nt[2]+ft,nt[3]+dt]}insideBBox(nt,lt){return zl(nt[0]-lt[0])>=0&&zl(nt[0]-lt[2])<=0&&nt[1]>=lt[1]&&nt[1]<=lt[3]}}function x_(ot,nt){return ot[0]===nt[0]&&ot[1]===nt[1]}function Lx(ot,nt,lt){const dt=zl(nt[0]-ot[0]);return[ot[0]+dt*lt,ot[1]+(nt[1]-ot[1])*lt]}function zl(ot){for(;ot<-180;)ot+=360;for(;ot>180;)ot-=360;return ot}class Qu{constructor(nt=[],lt=(dt,ft)=>dt<ft?-1:dt>ft?1:0){if(this.data=nt,this.length=this.data.length,this.compare=lt,this.length>0)for(let dt=(this.length>>1)-1;dt>=0;dt--)this._down(dt)}push(nt){this.data.push(nt),this._up(this.length++)}pop(){if(this.length===0)return;const nt=this.data[0],lt=this.data.pop();return--this.length>0&&(this.data[0]=lt,this._down(0)),nt}peek(){return this.data[0]}_up(nt){const{data:lt,compare:dt}=this,ft=lt[nt];for(;nt>0;){const mt=nt-1>>1,yt=lt[mt];if(dt(ft,yt)>=0)break;lt[nt]=yt,nt=mt}lt[nt]=ft}_down(nt){const{data:lt,compare:dt}=this,ft=this.length>>1,mt=lt[nt];for(;nt<ft;){let yt=1+(nt<<1);const Et=yt+1;if(Et<this.length&&dt(lt[Et],lt[yt])<0&&(yt=Et),dt(lt[yt],mt)>=0)break;lt[nt]=lt[yt],nt=yt}lt[nt]=mt}}var Ln=8192;function v_(ot,nt){return nt.dist-ot.dist}const ay=100,Nx=50;function __(ot){const nt=[1/0,1/0,-1/0,-1/0];if(nt.length!==ot.length)return!1;for(let lt=0;lt<nt.length;lt++)if(nt[lt]!==ot[lt])return!1;return!0}function u0(ot){return ot[1]-ot[0]+1}function Cu(ot,nt){const lt=ot[1]>=ot[0]&&ot[1]<nt;return lt||console.warn("Distance Expression: Index is out of range"),lt}function Fx(ot,nt){if(ot[0]>ot[1])return[null,null];const lt=u0(ot);if(nt){if(lt===2)return[ot,null];const dt=Math.floor(lt/2);return[[ot[0],ot[0]+dt],[ot[0]+dt,ot[1]]]}{if(lt===1)return[ot,null];const dt=Math.floor(lt/2)-1;return[[ot[0],ot[0]+dt],[ot[0]+dt+1,ot[1]]]}}function Vl(ot,nt){const lt=[1/0,1/0,-1/0,-1/0];if(!Cu(nt,ot.length))return lt;for(let dt=nt[0];dt<=nt[1];++dt)ty(lt,ot[dt]);return lt}function d0(ot){const nt=[1/0,1/0,-1/0,-1/0];for(let lt=0;lt<ot.length;++lt)for(let dt=0;dt<ot[lt].length;++dt)ty(nt,ot[lt][dt]);return nt}function tm(ot,nt,lt){if(__(ot)||__(nt))return NaN;let dt=0,ft=0;return ot[2]<nt[0]&&(dt=nt[0]-ot[2]),ot[0]>nt[2]&&(dt=ot[0]-nt[2]),ot[1]>nt[3]&&(ft=ot[1]-nt[3]),ot[3]<nt[1]&&(ft=nt[1]-ot[3]),lt.distance([0,0],[dt,ft])}function b_(ot){return 360*ot-180}function w_(ot){return 360/Math.PI*Math.atan(Math.exp((180-360*ot)*Math.PI/180))-90}function Ul(ot,nt){const lt=Math.pow(2,nt.z),dt=(ot.y/Ln+nt.y)/lt;return[b_((ot.x/Ln+nt.x)/lt),w_(dt)]}function E_(ot,nt){const lt=[];for(let dt=0;dt<ot.length;++dt)lt.push(Ul(ot[dt],nt));return lt}function S_(ot,nt,lt){const dt=lt.pointOnLine(nt,ot).point;return lt.distance(ot,dt)}function Bx(ot,nt,lt,dt,ft){const mt=lt.slice(dt[0],dt[1]+1);let yt=1/0;for(let Et=nt[0];Et<=nt[1];++Et)if((yt=Math.min(yt,S_(ot[Et],mt,ft)))===0)return 0;return yt}function rm(ot,nt,lt,dt,ft){const mt=Math.min(ft.pointToSegmentDistance(ot,lt,dt),ft.pointToSegmentDistance(nt,lt,dt)),yt=Math.min(ft.pointToSegmentDistance(lt,ot,nt),ft.pointToSegmentDistance(dt,ot,nt));return Math.min(mt,yt)}function aw(ot,nt,lt,dt,ft){if(!Cu(nt,ot.length)||!Cu(dt,lt.length))return NaN;let mt=1/0;for(let yt=nt[0];yt<nt[1];++yt)for(let Et=dt[0];Et<dt[1];++Et){if(ry(ot[yt],ot[yt+1],lt[Et],lt[Et+1]))return 0;mt=Math.min(mt,rm(ot[yt],ot[yt+1],lt[Et],lt[Et+1],ft))}return mt}function sw(ot,nt,lt,dt,ft){if(!Cu(nt,ot.length)||!Cu(dt,lt.length))return NaN;let mt=1/0;for(let yt=nt[0];yt<=nt[1];++yt)for(let Et=dt[0];Et<=dt[1];++Et)if((mt=Math.min(mt,ft.distance(ot[yt],lt[Et])))===0)return mt;return mt}function lw(ot,nt,lt){if(Pu(ot,nt,!0))return 0;let dt=1/0;for(const ft of nt){const mt=ft.length;if(mt<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(ft[0]!==ft[mt-1]&&(dt=Math.min(dt,lt.pointToSegmentDistance(ot,ft[mt-1],ft[0])))===0||(dt=Math.min(dt,S_(ot,ft,lt)))===0)return dt}return dt}function cw(ot,nt,lt,dt){if(!Cu(nt,ot.length))return NaN;for(let mt=nt[0];mt<=nt[1];++mt)if(Pu(ot[mt],lt,!0))return 0;let ft=1/0;for(let mt=nt[0];mt<nt[1];++mt)for(const yt of lt)for(let Et=0,At=yt.length,Ct=At-1;Et<At;Ct=Et++){if(ry(ot[mt],ot[mt+1],yt[Ct],yt[Et]))return 0;ft=Math.min(ft,rm(ot[mt],ot[mt+1],yt[Ct],yt[Et],dt))}return ft}function T_(ot,nt){for(const lt of ot)for(let dt=0;dt<=lt.length-1;++dt)if(Pu(lt[dt],nt,!0))return!0;return!1}function h0(ot,nt,lt,dt=1/0){const ft=d0(ot),mt=d0(nt);if(dt!==1/0&&tm(ft,mt,lt)>=dt)return dt;if(Ju(ft,mt)){if(T_(ot,nt))return 0}else if(T_(nt,ot))return 0;let yt=dt;for(const Et of ot)for(let At=0,Ct=Et.length,Lt=Ct-1;At<Ct;Lt=At++)for(const Bt of nt)for(let zt=0,Wt=Bt.length,qt=Wt-1;zt<Wt;qt=zt++){if(ry(Et[Lt],Et[At],Bt[qt],Bt[zt]))return 0;yt=Math.min(yt,rm(Et[Lt],Et[At],Bt[qt],Bt[zt],lt))}return yt}function bp(ot,nt,lt,dt,ft,mt,yt){if(mt===null||yt===null)return;const Et=tm(Vl(dt,mt),Vl(ft,yt),lt);Et<nt&&ot.push({dist:Et,range1:mt,range2:yt})}function Gl(ot,nt,lt,dt,ft=1/0){let mt=Math.min(dt.distance(ot[0],lt[0][0]),ft);if(mt===0)return mt;const yt=new Qu([{dist:0,range1:[0,ot.length-1],range2:[0,0]}],v_),Et=nt?Nx:ay,At=d0(lt);for(;yt.length;){const Ct=yt.pop();if(Ct.dist>=mt)continue;const Lt=Ct.range1;if(u0(Lt)<=Et){if(!Cu(Lt,ot.length))return NaN;if(nt){const Bt=cw(ot,Lt,lt,dt);if((mt=Math.min(mt,Bt))===0)return mt}else for(let Bt=Lt[0];Bt<=Lt[1];++Bt){const zt=lw(ot[Bt],lt,dt);if((mt=Math.min(mt,zt))===0)return mt}}else{const Bt=Fx(Lt,nt);if(Bt[0]!==null){const zt=tm(Vl(ot,Bt[0]),At,dt);zt<mt&&yt.push({dist:zt,range1:Bt[0],range2:[0,0]})}if(Bt[1]!==null){const zt=tm(Vl(ot,Bt[1]),At,dt);zt<mt&&yt.push({dist:zt,range1:Bt[1],range2:[0,0]})}}}return mt}function sy(ot,nt,lt,dt,ft,mt=1/0){let yt=Math.min(mt,ft.distance(ot[0],lt[0]));if(yt===0)return yt;const Et=new Qu([{dist:0,range1:[0,ot.length-1],range2:[0,lt.length-1]}],v_),At=nt?Nx:ay,Ct=dt?Nx:ay;for(;Et.length;){const Lt=Et.pop();if(Lt.dist>=yt)continue;const Bt=Lt.range1,zt=Lt.range2;if(u0(Bt)<=At&&u0(zt)<=Ct){if(!Cu(Bt,ot.length)||!Cu(zt,lt.length))return NaN;if(nt&&dt?yt=Math.min(yt,aw(ot,Bt,lt,zt,ft)):nt||dt?nt&&!dt?yt=Math.min(yt,Bx(lt,zt,ot,Bt,ft)):!nt&&dt&&(yt=Math.min(yt,Bx(ot,Bt,lt,zt,ft))):yt=Math.min(yt,sw(ot,Bt,lt,zt,ft)),yt===0)return yt}else{const Wt=Fx(Bt,nt),qt=Fx(zt,dt);bp(Et,yt,ft,ot,lt,Wt[0],qt[0]),bp(Et,yt,ft,ot,lt,Wt[0],qt[1]),bp(Et,yt,ft,ot,lt,Wt[1],qt[0]),bp(Et,yt,ft,ot,lt,Wt[1],qt[1])}}return yt}function zx(ot,nt,lt,dt,ft=1/0){let mt=ft;const yt=Vl(ot,[0,ot.length-1]);for(const Et of lt)if(!(mt!==1/0&&tm(yt,Vl(Et,[0,Et.length-1]),dt)>=mt)&&(mt=Math.min(mt,sy(ot,nt,Et,!0,dt,mt)),mt===0))return mt;return mt}function f0(ot,nt,lt,dt,ft=1/0){let mt=ft;const yt=Vl(ot,[0,ot.length-1]);for(const Et of lt){if(mt!==1/0&&tm(yt,d0(Et),dt)>=mt)continue;const At=Gl(ot,nt,Et,dt,mt);if(isNaN(At))return At;if((mt=Math.min(mt,At))===0)return mt}return mt}function Vx(ot){return ot==="Point"||ot==="MultiPoint"||ot==="LineString"||ot==="MultiLineString"||ot==="Polygon"||ot==="MultiPolygon"}class wp{constructor(nt,lt){this.type=Jn,this.geojson=nt,this.geometries=lt}static parse(nt,lt){if(nt.length!==2)return lt.error(`'distance' expression requires either one argument, but found ' ${nt.length-1} instead.`);if(Qp(nt[1])){const dt=nt[1];if(dt.type==="FeatureCollection"){for(let ft=0;ft<dt.features.length;++ft)if(Vx(dt.features[ft].geometry.type))return new wp(dt,dt.features[ft].geometry)}else if(dt.type==="Feature"){if(Vx(dt.geometry.type))return new wp(dt,dt.geometry)}else if(Vx(dt.type))return new wp(dt,dt)}return lt.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(nt){const lt=nt.geometry(),dt=nt.canonicalID();if(lt!=null&&dt!=null){if(nt.geometryType()==="Point")return function(ft,mt,yt){const Et=[];for(const Ct of ft)for(const Lt of Ct)Et.push(Ul(Lt,mt));const At=new oy(Et[0][1],"meters");return yt.type==="Point"||yt.type==="MultiPoint"||yt.type==="LineString"?sy(Et,!1,yt.type==="Point"?[yt.coordinates]:yt.coordinates,yt.type==="LineString",At):yt.type==="MultiLineString"?zx(Et,!1,yt.coordinates,At):yt.type==="Polygon"||yt.type==="MultiPolygon"?f0(Et,!1,yt.type==="Polygon"?[yt.coordinates]:yt.coordinates,At):null}(lt,dt,this.geometries);if(nt.geometryType()==="LineString")return function(ft,mt,yt){const Et=[];for(const Ct of ft){const Lt=[];for(const Bt of Ct)Lt.push(Ul(Bt,mt));Et.push(Lt)}const At=new oy(Et[0][0][1],"meters");if(yt.type==="Point"||yt.type==="MultiPoint"||yt.type==="LineString")return zx(yt.type==="Point"?[yt.coordinates]:yt.coordinates,yt.type==="LineString",Et,At);if(yt.type==="MultiLineString"){let Ct=1/0;for(let Lt=0;Lt<yt.coordinates.length;Lt++){const Bt=zx(yt.coordinates[Lt],!0,Et,At,Ct);if(isNaN(Bt))return Bt;if((Ct=Math.min(Ct,Bt))===0)return Ct}return Ct}if(yt.type==="Polygon"||yt.type==="MultiPolygon"){let Ct=1/0;for(let Lt=0;Lt<Et.length;Lt++){const Bt=f0(Et[Lt],!0,yt.type==="Polygon"?[yt.coordinates]:yt.coordinates,At,Ct);if(isNaN(Bt))return Bt;if((Ct=Math.min(Ct,Bt))===0)return Ct}return Ct}return null}(lt,dt,this.geometries);if(nt.geometryType()==="Polygon")return function(ft,mt,yt){const Et=[];for(const Ct of function(Lt,Bt){const zt=Lt.length;if(zt<=1)return[Lt];const Wt=[];let qt,Xt;for(let Jt=0;Jt<zt;Jt++){const nr=nw(Lt[Jt]);nr!==0&&(Lt[Jt].area=Math.abs(nr),Xt===void 0&&(Xt=nr<0),Xt===nr<0?(qt&&Wt.push(qt),qt=[Lt[Jt]]):qt.push(Lt[Jt]))}return qt&&Wt.push(qt),Wt}(ft)){const Lt=[];for(let Bt=0;Bt<Ct.length;++Bt)Lt.push(E_(Ct[Bt],mt));Et.push(Lt)}const At=new oy(Et[0][0][0][1],"meters");if(yt.type==="Point"||yt.type==="MultiPoint"||yt.type==="LineString")return f0(yt.type==="Point"?[yt.coordinates]:yt.coordinates,yt.type==="LineString",Et,At);if(yt.type==="MultiLineString"){let Ct=1/0;for(let Lt=0;Lt<yt.coordinates.length;Lt++){const Bt=f0(yt.coordinates[Lt],!0,Et,At,Ct);if(isNaN(Bt))return Bt;if((Ct=Math.min(Ct,Bt))===0)return Ct}return Ct}return yt.type==="Polygon"||yt.type==="MultiPolygon"?function(Ct,Lt,Bt){let zt=1/0;for(const Wt of Ct)for(const qt of Lt){const Xt=h0(Wt,qt,Bt,zt);if(isNaN(Xt))return Xt;if((zt=Math.min(zt,Xt))===0)return zt}return zt}(yt.type==="Polygon"?[yt.coordinates]:yt.coordinates,Et,At):null}(lt,dt,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function ly(ot,nt){switch(ot){case"string":return ou(nt);case"number":return+nt;case"boolean":return!!nt;case"color":return ga.parse(nt);case"formatted":return Sl.fromString(ou(nt));case"resolvedImage":return Fl.fromString(ou(nt))}return nt}function A_(ot,nt,lt,dt){return dt!==void 0&&(ot=dt*Math.round(ot/dt)),nt!==void 0&&ot<nt&&(ot=nt),lt!==void 0&&ot>lt&&(ot=lt),ot}class _d{constructor(nt,lt,dt){this.type=nt,this.key=lt,this.scope=dt}static parse(nt,lt){let dt=lt.expectedType;if(dt==null&&(dt=Qo),nt.length<2||nt.length>3)return lt.error("Invalid number of arguments for 'config' expression.");const ft=lt.parse(nt[1],1);if(!(ft instanceof au))return lt.error("Key name of 'config' expression must be a string literal.");if(nt.length>=3){const mt=lt.parse(nt[2],2);return mt instanceof au?new _d(dt,ou(ft.value),ou(mt.value)):lt.error("Scope of 'config' expression must be a string literal.")}return new _d(dt,ou(ft.value))}evaluate(nt){const lt=[this.key,this.scope,nt.scope].filter(Boolean).join(""),dt=nt.getConfig(lt);if(!dt)return null;const{type:ft,value:mt,values:yt,minValue:Et,maxValue:At,stepValue:Ct}=dt,Lt=dt.default.evaluate(nt);let Bt=Lt;if(mt){const zt=nt.scope;nt.scope=(zt||"").split("").slice(1).join(""),Bt=mt.evaluate(nt),nt.scope=zt}return ft&&(Bt=ly(ft,Bt)),Bt===void 0||Et===void 0&&At===void 0&&Ct===void 0||(typeof Bt=="number"?Bt=A_(Bt,Et,At,Ct):Array.isArray(Bt)&&(Bt=Bt.map(zt=>typeof zt=="number"?A_(zt,Et,At,Ct):zt))),mt!==void 0&&Bt!==void 0&&yt&&!yt.includes(Bt)&&(Bt=Lt,ft&&(Bt=ly(ft,Bt))),(ft&&ft!==this.type||Bt!==void 0&&$s(Bt)!==this.type)&&(Bt=ly(this.type.kind,Bt)),Bt}eachChild(){}outputDefined(){return!1}serialize(){const nt=["config",this.key];return this.scope&&nt.concat(this.key),nt}}function cy(ot){if(ot instanceof $l&&(ot.name==="get"&&ot.args.length===1||ot.name==="feature-state"||ot.name==="has"&&ot.args.length===1||ot.name==="properties"||ot.name==="geometry-type"||ot.name==="id"||/^filter-/.test(ot.name))||ot instanceof gu||ot instanceof wp)return!1;let nt=!0;return ot.eachChild(lt=>{nt&&!cy(lt)&&(nt=!1)}),nt}function p0(ot){if(ot instanceof $l&&ot.name==="feature-state")return!1;let nt=!0;return ot.eachChild(lt=>{nt&&!p0(lt)&&(nt=!1)}),nt}function uy(ot){if(ot instanceof _d)return new Set([ot.key]);let nt=new Set;return ot.eachChild(lt=>{nt=new Set([...nt,...uy(lt)])}),nt}function dy(ot,nt){if(ot instanceof $l&&nt.indexOf(ot.name)>=0)return!1;let lt=!0;return ot.eachChild(dt=>{lt&&!dy(dt,nt)&&(lt=!1)}),lt}class hy{constructor(nt,lt){this.type=lt.type,this.name=nt,this.boundExpression=lt}static parse(nt,lt){if(nt.length!==2||typeof nt[1]!="string")return lt.error("'var' expression requires exactly one string literal argument.");const dt=nt[1];return lt.scope.has(dt)?new hy(dt,lt.scope.get(dt)):lt.error(`Unknown variable "${dt}". Make sure "${dt}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(nt){return this.boundExpression.evaluate(nt)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class m0{constructor(nt,lt=[],dt,ft=new Ix,mt=[],yt,Et){this.registry=nt,this.path=lt,this.key=lt.map(At=>`[${At}]`).join(""),this.scope=ft,this.errors=mt,this.expectedType=dt,this._scope=yt,this.options=Et}parse(nt,lt,dt,ft,mt={}){return lt||dt?this.concat(lt,dt,ft)._parse(nt,mt):this._parse(nt,mt)}_parse(nt,lt){function dt(ft,mt,yt){return yt==="assert"?new Bl(mt,[ft]):yt==="coerce"?new Au(mt,[ft]):ft}if(nt!==null&&typeof nt!="string"&&typeof nt!="boolean"&&typeof nt!="number"||(nt=["literal",nt]),Array.isArray(nt)){if(nt.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ft=typeof nt[0]=="string"?this.registry[nt[0]]:void 0;if(ft){let mt=ft.parse(nt,this);if(!mt)return null;if(this.expectedType){const yt=this.expectedType,Et=mt.type;if(yt.kind!=="string"&&yt.kind!=="number"&&yt.kind!=="boolean"&&yt.kind!=="object"&&yt.kind!=="array"||Et.kind!=="value")if(yt.kind!=="color"&&yt.kind!=="formatted"&&yt.kind!=="resolvedImage"||Et.kind!=="value"&&Et.kind!=="string"){if(this.checkSubtype(yt,Et))return null}else mt=dt(mt,yt,lt.typeAnnotation||"coerce");else mt=dt(mt,yt,lt.typeAnnotation||"assert")}if(!(mt instanceof au)&&mt.type.kind!=="resolvedImage"&&fy(mt)){const yt=new Ox(this._scope,this.options);try{mt=new au(mt.type,mt.evaluate(yt))}catch(Et){return this.error(Et.message),null}}return mt}return Au.parse(["to-array",nt],this)}return this.error(nt===void 0?"'undefined' value invalid. Use null instead.":typeof nt=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof nt} instead.`)}concat(nt,lt,dt){const ft=typeof nt=="number"?this.path.concat(nt):this.path,mt=dt?this.scope.concat(dt):this.scope;return new m0(this.registry,ft,lt||null,mt,this.errors,this._scope,this.options)}error(nt,...lt){const dt=`${this.key}${lt.map(ft=>`[${ft}]`).join("")}`;this.errors.push(new mu(dt,nt))}checkSubtype(nt,lt){const dt=Qm(nt,lt);return dt&&this.error(dt),dt}}var P_=m0;function fy(ot){if(ot instanceof hy)return fy(ot.boundExpression);if(ot instanceof $l&&ot.name==="error"||ot instanceof ey||ot instanceof gu||ot instanceof wp||ot instanceof _d)return!1;const nt=ot instanceof Au||ot instanceof Bl;let lt=!0;return ot.eachChild(dt=>{lt=nt?lt&&fy(dt):lt&&dt instanceof au}),!!lt&&cy(ot)&&dy(ot,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function Ep(ot,nt){const lt=ot.length-1;let dt,ft,mt=0,yt=lt,Et=0;for(;mt<=yt;)if(Et=Math.floor((mt+yt)/2),dt=ot[Et],ft=ot[Et+1],dt<=nt){if(Et===lt||nt<ft)return Et;mt=Et+1}else{if(!(dt>nt))throw new Os("Input is not a number.");yt=Et-1}return 0}class im{constructor(nt,lt,dt){this.type=nt,this.input=lt,this.labels=[],this.outputs=[];for(const[ft,mt]of dt)this.labels.push(ft),this.outputs.push(mt)}static parse(nt,lt){if(nt.length-1<4)return lt.error(`Expected at least 4 arguments, but found only ${nt.length-1}.`);if((nt.length-1)%2!=0)return lt.error("Expected an even number of arguments.");const dt=lt.parse(nt[1],1,Jn);if(!dt)return null;const ft=[];let mt=null;lt.expectedType&&lt.expectedType.kind!=="value"&&(mt=lt.expectedType);for(let yt=1;yt<nt.length;yt+=2){const Et=yt===1?-1/0:nt[yt],At=nt[yt+1],Ct=yt,Lt=yt+1;if(typeof Et!="number")return lt.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ct);if(ft.length&&ft[ft.length-1][0]>=Et)return lt.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ct);const Bt=lt.parse(At,Lt,mt);if(!Bt)return null;mt=mt||Bt.type,ft.push([Et,Bt])}return new im(mt,dt,ft)}evaluate(nt){const lt=this.labels,dt=this.outputs;if(lt.length===1)return dt[0].evaluate(nt);const ft=this.input.evaluate(nt);if(ft<=lt[0])return dt[0].evaluate(nt);const mt=lt.length;return ft>=lt[mt-1]?dt[mt-1].evaluate(nt):dt[Ep(lt,ft)].evaluate(nt)}eachChild(nt){nt(this.input);for(const lt of this.outputs)nt(lt)}outputDefined(){return this.outputs.every(nt=>nt.outputDefined())}serialize(){const nt=["step",this.input.serialize()];for(let lt=0;lt<this.labels.length;lt++)lt>0&&nt.push(this.labels[lt]),nt.push(this.outputs[lt].serialize());return nt}}const C_=.95047,Ux=1.08883,k_=4/29,_h=6/29,R_=3*_h*_h,uw=_h*_h*_h,dw=Math.PI/180,hw=180/Math.PI;function g0(ot){return ot>uw?Math.pow(ot,1/3):ot/R_+k_}function Gx(ot){return ot>_h?ot*ot*ot:R_*(ot-k_)}function Wx(ot){return 255*(ot<=.0031308?12.92*ot:1.055*Math.pow(ot,1/2.4)-.055)}function Hx(ot){return(ot/=255)<=.04045?ot/12.92:Math.pow((ot+.055)/1.055,2.4)}function I_(ot){const nt=Hx(ot.r),lt=Hx(ot.g),dt=Hx(ot.b),ft=g0((.4124564*nt+.3575761*lt+.1804375*dt)/C_),mt=g0((.2126729*nt+.7151522*lt+.072175*dt)/1);return{l:116*mt-16,a:500*(ft-mt),b:200*(mt-g0((.0193339*nt+.119192*lt+.9503041*dt)/Ux)),alpha:ot.a}}function $_(ot){let nt=(ot.l+16)/116,lt=isNaN(ot.a)?nt:nt+ot.a/500,dt=isNaN(ot.b)?nt:nt-ot.b/200;return nt=1*Gx(nt),lt=C_*Gx(lt),dt=Ux*Gx(dt),new ga(Wx(3.2404542*lt-1.5371385*nt-.4985314*dt),Wx(-.969266*lt+1.8760108*nt+.041556*dt),Wx(.0556434*lt-.2040259*nt+1.0572252*dt),ot.alpha)}function fw(ot,nt,lt){const dt=nt-ot;return ot+lt*(dt>180||dt<-180?dt-360*Math.round(dt/360):dt)}const py={forward:I_,reverse:$_,interpolate:function(ot,nt,lt){return{l:ho(ot.l,nt.l,lt),a:ho(ot.a,nt.a,lt),b:ho(ot.b,nt.b,lt),alpha:ho(ot.alpha,nt.alpha,lt)}}},my={forward:function(ot){const{l:nt,a:lt,b:dt}=I_(ot),ft=Math.atan2(dt,lt)*hw;return{h:ft<0?ft+360:ft,c:Math.sqrt(lt*lt+dt*dt),l:nt,alpha:ot.a}},reverse:function(ot){const nt=ot.h*dw,lt=ot.c;return $_({l:ot.l,a:Math.cos(nt)*lt,b:Math.sin(nt)*lt,alpha:ot.alpha})},interpolate:function(ot,nt,lt){return{h:fw(ot.h,nt.h,lt),c:ho(ot.c,nt.c,lt),l:ho(ot.l,nt.l,lt),alpha:ho(ot.alpha,nt.alpha,lt)}}};var gy=Object.freeze({__proto__:null,hcl:my,lab:py});class Wl{constructor(nt,lt,dt,ft,mt){this.type=nt,this.operator=lt,this.interpolation=dt,this.input=ft,this.labels=[],this.outputs=[];for(const[yt,Et]of mt)this.labels.push(yt),this.outputs.push(Et)}static interpolationFactor(nt,lt,dt,ft){let mt=0;if(nt.name==="exponential")mt=Zx(lt,nt.base,dt,ft);else if(nt.name==="linear")mt=Zx(lt,1,dt,ft);else if(nt.name==="cubic-bezier"){const yt=nt.controlPoints;mt=new ux(yt[0],yt[1],yt[2],yt[3]).solve(Zx(lt,1,dt,ft))}return mt}static parse(nt,lt){let[dt,ft,mt,...yt]=nt;if(!Array.isArray(ft)||ft.length===0)return lt.error("Expected an interpolation type expression.",1);if(ft[0]==="linear")ft={name:"linear"};else if(ft[0]==="exponential"){const Ct=ft[1];if(typeof Ct!="number")return lt.error("Exponential interpolation requires a numeric base.",1,1);ft={name:"exponential",base:Ct}}else{if(ft[0]!=="cubic-bezier")return lt.error(`Unknown interpolation type ${String(ft[0])}`,1,0);{const Ct=ft.slice(1);if(Ct.length!==4||Ct.some(Lt=>typeof Lt!="number"||Lt<0||Lt>1))return lt.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ft={name:"cubic-bezier",controlPoints:Ct}}}if(nt.length-1<4)return lt.error(`Expected at least 4 arguments, but found only ${nt.length-1}.`);if((nt.length-1)%2!=0)return lt.error("Expected an even number of arguments.");if(mt=lt.parse(mt,2,Jn),!mt)return null;const Et=[];let At=null;dt==="interpolate-hcl"||dt==="interpolate-lab"?At=Ql:lt.expectedType&&lt.expectedType.kind!=="value"&&(At=lt.expectedType);for(let Ct=0;Ct<yt.length;Ct+=2){const Lt=yt[Ct],Bt=yt[Ct+1],zt=Ct+3,Wt=Ct+4;if(typeof Lt!="number")return lt.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',zt);if(Et.length&&Et[Et.length-1][0]>=Lt)return lt.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',zt);const qt=lt.parse(Bt,Wt,At);if(!qt)return null;At=At||qt.type,Et.push([Lt,qt])}return At.kind==="number"||At.kind==="color"||At.kind==="array"&&At.itemType.kind==="number"&&typeof At.N=="number"?new Wl(At,dt,ft,mt,Et):lt.error(`Type ${xs(At)} is not interpolatable.`)}evaluate(nt){const lt=this.labels,dt=this.outputs;if(lt.length===1)return dt[0].evaluate(nt);const ft=this.input.evaluate(nt);if(ft<=lt[0])return dt[0].evaluate(nt);const mt=lt.length;if(ft>=lt[mt-1])return dt[mt-1].evaluate(nt);const yt=Ep(lt,ft),Et=Wl.interpolationFactor(this.interpolation,ft,lt[yt],lt[yt+1]),At=dt[yt].evaluate(nt),Ct=dt[yt+1].evaluate(nt);return this.operator==="interpolate"?Jm[this.type.kind.toLowerCase()](At,Ct,Et):this.operator==="interpolate-hcl"?my.reverse(my.interpolate(my.forward(At),my.forward(Ct),Et)):py.reverse(py.interpolate(py.forward(At),py.forward(Ct),Et))}eachChild(nt){nt(this.input);for(const lt of this.outputs)nt(lt)}outputDefined(){return this.outputs.every(nt=>nt.outputDefined())}serialize(){let nt;nt=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const lt=[this.operator,nt,this.input.serialize()];for(let dt=0;dt<this.labels.length;dt++)lt.push(this.labels[dt],this.outputs[dt].serialize());return lt}}function Zx(ot,nt,lt,dt){const ft=dt-lt,mt=ot-lt;return ft===0?0:nt===1?mt/ft:(Math.pow(nt,mt)-1)/(Math.pow(nt,ft)-1)}class Sp{constructor(nt,lt){this.type=nt,this.args=lt}static parse(nt,lt){if(nt.length<2)return lt.error("Expectected at least one argument.");let dt=null;const ft=lt.expectedType;ft&&ft.kind!=="value"&&(dt=ft);const mt=[];for(const Et of nt.slice(1)){const At=lt.parse(Et,1+mt.length,dt,void 0,{typeAnnotation:"omit"});if(!At)return null;dt=dt||At.type,mt.push(At)}const yt=ft&&mt.some(Et=>Qm(ft,Et.type));return new Sp(yt?Qo:dt,mt)}evaluate(nt){let lt,dt=null,ft=0;for(const mt of this.args){if(ft++,dt=mt.evaluate(nt),dt&&dt instanceof Fl&&!dt.available&&(lt||(lt=dt),dt=null,ft===this.args.length))return lt;if(dt!==null)break}return dt}eachChild(nt){this.args.forEach(nt)}outputDefined(){return this.args.every(nt=>nt.outputDefined())}serialize(){const nt=["coalesce"];return this.eachChild(lt=>{nt.push(lt.serialize())}),nt}}class y0{constructor(nt,lt){this.type=lt.type,this.bindings=[].concat(nt),this.result=lt}evaluate(nt){return this.result.evaluate(nt)}eachChild(nt){for(const lt of this.bindings)nt(lt[1]);nt(this.result)}static parse(nt,lt){if(nt.length<4)return lt.error(`Expected at least 3 arguments, but found ${nt.length-1} instead.`);const dt=[];for(let mt=1;mt<nt.length-1;mt+=2){const yt=nt[mt];if(typeof yt!="string")return lt.error(`Expected string, but found ${typeof yt} instead.`,mt);if(/[^a-zA-Z0-9_]/.test(yt))return lt.error("Variable names must contain only alphanumeric characters or '_'.",mt);const Et=lt.parse(nt[mt+1],mt+1);if(!Et)return null;dt.push([yt,Et])}const ft=lt.parse(nt[nt.length-1],nt.length-1,lt.expectedType,dt);return ft?new y0(dt,ft):null}outputDefined(){return this.result.outputDefined()}serialize(){const nt=["let"];for(const[lt,dt]of this.bindings)nt.push(lt,dt.serialize());return nt.push(this.result.serialize()),nt}}class x0{constructor(nt,lt,dt){this.type=nt,this.index=lt,this.input=dt}static parse(nt,lt){if(nt.length!==3)return lt.error(`Expected 2 arguments, but found ${nt.length-1} instead.`);const dt=lt.parse(nt[1],1,Jn),ft=lt.parse(nt[2],2,Xs(lt.expectedType||Qo));return dt&&ft?new x0(ft.type.itemType,dt,ft):null}evaluate(nt){const lt=this.index.evaluate(nt),dt=this.input.evaluate(nt);if(lt<0)throw new Os(`Array index out of bounds: ${lt} < 0.`);if(lt>=dt.length)throw new Os(`Array index out of bounds: ${lt} > ${dt.length-1}.`);if(lt!==Math.floor(lt))throw new Os(`Array index must be an integer, but found ${lt} instead.`);return dt[lt]}eachChild(nt){nt(this.index),nt(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class qx{constructor(nt,lt){this.type=_a,this.needle=nt,this.haystack=lt}static parse(nt,lt){if(nt.length!==3)return lt.error(`Expected 2 arguments, but found ${nt.length-1} instead.`);const dt=lt.parse(nt[1],1,Qo),ft=lt.parse(nt[2],2,Qo);return dt&&ft?_c(dt.type,[_a,Zo,Jn,Nl,Qo])?new qx(dt,ft):lt.error(`Expected first argument to be of type boolean, string, number or null, but found ${xs(dt.type)} instead`):null}evaluate(nt){const lt=this.needle.evaluate(nt),dt=this.haystack.evaluate(nt);if(dt==null)return!1;if(!_g(lt,["boolean","string","number","null"]))throw new Os(`Expected first argument to be of type boolean, string, number or null, but found ${xs($s(lt))} instead.`);if(!_g(dt,["string","array"]))throw new Os(`Expected second argument to be of type array or string, but found ${xs($s(dt))} instead.`);return dt.indexOf(lt)>=0}eachChild(nt){nt(this.needle),nt(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class yy{constructor(nt,lt,dt){this.type=Jn,this.needle=nt,this.haystack=lt,this.fromIndex=dt}static parse(nt,lt){if(nt.length<=2||nt.length>=5)return lt.error(`Expected 3 or 4 arguments, but found ${nt.length-1} instead.`);const dt=lt.parse(nt[1],1,Qo),ft=lt.parse(nt[2],2,Qo);if(!dt||!ft)return null;if(!_c(dt.type,[_a,Zo,Jn,Nl,Qo]))return lt.error(`Expected first argument to be of type boolean, string, number or null, but found ${xs(dt.type)} instead`);if(nt.length===4){const mt=lt.parse(nt[3],3,Jn);return mt?new yy(dt,ft,mt):null}return new yy(dt,ft)}evaluate(nt){const lt=this.needle.evaluate(nt),dt=this.haystack.evaluate(nt);if(!_g(lt,["boolean","string","number","null"]))throw new Os(`Expected first argument to be of type boolean, string, number or null, but found ${xs($s(lt))} instead.`);if(!_g(dt,["string","array"]))throw new Os(`Expected second argument to be of type array or string, but found ${xs($s(dt))} instead.`);if(this.fromIndex){const ft=this.fromIndex.evaluate(nt);return dt.indexOf(lt,ft)}return dt.indexOf(lt)}eachChild(nt){nt(this.needle),nt(this.haystack),this.fromIndex&&nt(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const nt=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),nt]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class v0{constructor(nt,lt,dt,ft,mt,yt){this.inputType=nt,this.type=lt,this.input=dt,this.cases=ft,this.outputs=mt,this.otherwise=yt}static parse(nt,lt){if(nt.length<5)return lt.error(`Expected at least 4 arguments, but found only ${nt.length-1}.`);if(nt.length%2!=1)return lt.error("Expected an even number of arguments.");let dt,ft;lt.expectedType&&lt.expectedType.kind!=="value"&&(ft=lt.expectedType);const mt={},yt=[];for(let Ct=2;Ct<nt.length-1;Ct+=2){let Lt=nt[Ct];const Bt=nt[Ct+1];Array.isArray(Lt)||(Lt=[Lt]);const zt=lt.concat(Ct);if(Lt.length===0)return zt.error("Expected at least one branch label.");for(const qt of Lt){if(typeof qt!="number"&&typeof qt!="string")return zt.error("Branch labels must be numbers or strings.");if(typeof qt=="number"&&Math.abs(qt)>Number.MAX_SAFE_INTEGER)return zt.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof qt=="number"&&Math.floor(qt)!==qt)return zt.error("Numeric branch labels must be integer values.");if(dt){if(zt.checkSubtype(dt,$s(qt)))return null}else dt=$s(qt);if(mt[String(qt)]!==void 0)return zt.error("Branch labels must be unique.");mt[String(qt)]=yt.length}const Wt=lt.parse(Bt,Ct,ft);if(!Wt)return null;ft=ft||Wt.type,yt.push(Wt)}const Et=lt.parse(nt[1],1,Qo);if(!Et)return null;const At=lt.parse(nt[nt.length-1],nt.length-1,ft);return At?Et.type.kind!=="value"&&lt.concat(1).checkSubtype(dt,Et.type)?null:new v0(dt,ft,Et,mt,yt,At):null}evaluate(nt){const lt=this.input.evaluate(nt);return($s(lt)===this.inputType&&this.outputs[this.cases[lt]]||this.otherwise).evaluate(nt)}eachChild(nt){nt(this.input),this.outputs.forEach(nt),nt(this.otherwise)}outputDefined(){return this.outputs.every(nt=>nt.outputDefined())&&this.otherwise.outputDefined()}serialize(){const nt=["match",this.input.serialize()],lt=Object.keys(this.cases).sort(),dt=[],ft={};for(const yt of lt){const Et=ft[this.cases[yt]];Et===void 0?(ft[this.cases[yt]]=dt.length,dt.push([this.cases[yt],[yt]])):dt[Et][1].push(yt)}const mt=yt=>this.inputType.kind==="number"?Number(yt):yt;for(const[yt,Et]of dt)nt.push(Et.length===1?mt(Et[0]):Et.map(mt)),nt.push(this.outputs[yt].serialize());return nt.push(this.otherwise.serialize()),nt}}class _0{constructor(nt,lt,dt){this.type=nt,this.branches=lt,this.otherwise=dt}static parse(nt,lt){if(nt.length<4)return lt.error(`Expected at least 3 arguments, but found only ${nt.length-1}.`);if(nt.length%2!=0)return lt.error("Expected an odd number of arguments.");let dt;lt.expectedType&&lt.expectedType.kind!=="value"&&(dt=lt.expectedType);const ft=[];for(let yt=1;yt<nt.length-1;yt+=2){const Et=lt.parse(nt[yt],yt,_a);if(!Et)return null;const At=lt.parse(nt[yt+1],yt+1,dt);if(!At)return null;ft.push([Et,At]),dt=dt||At.type}const mt=lt.parse(nt[nt.length-1],nt.length-1,dt);return mt?new _0(dt,ft,mt):null}evaluate(nt){for(const[lt,dt]of this.branches)if(lt.evaluate(nt))return dt.evaluate(nt);return this.otherwise.evaluate(nt)}eachChild(nt){for(const[lt,dt]of this.branches)nt(lt),nt(dt);nt(this.otherwise)}outputDefined(){return this.branches.every(([nt,lt])=>lt.outputDefined())&&this.otherwise.outputDefined()}serialize(){const nt=["case"];return this.eachChild(lt=>{nt.push(lt.serialize())}),nt}}class xy{constructor(nt,lt,dt,ft){this.type=nt,this.input=lt,this.beginIndex=dt,this.endIndex=ft}static parse(nt,lt){if(nt.length<=2||nt.length>=5)return lt.error(`Expected 3 or 4 arguments, but found ${nt.length-1} instead.`);const dt=lt.parse(nt[1],1,Qo),ft=lt.parse(nt[2],2,Jn);if(!dt||!ft)return null;if(!_c(dt.type,[Xs(Qo),Zo,Qo]))return lt.error(`Expected first argument to be of type array or string, but found ${xs(dt.type)} instead`);if(nt.length===4){const mt=lt.parse(nt[3],3,Jn);return mt?new xy(dt.type,dt,ft,mt):null}return new xy(dt.type,dt,ft)}evaluate(nt){const lt=this.input.evaluate(nt),dt=this.beginIndex.evaluate(nt);if(!_g(lt,["string","array"]))throw new Os(`Expected first argument to be of type array or string, but found ${xs($s(lt))} instead.`);if(this.endIndex){const ft=this.endIndex.evaluate(nt);return lt.slice(dt,ft)}return lt.slice(dt)}eachChild(nt){nt(this.input),nt(this.beginIndex),this.endIndex&&nt(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const nt=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),nt]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function b0(ot,nt){return ot==="=="||ot==="!="?nt.kind==="boolean"||nt.kind==="string"||nt.kind==="number"||nt.kind==="null"||nt.kind==="value":nt.kind==="string"||nt.kind==="number"||nt.kind==="value"}function w0(ot,nt,lt,dt){return dt.compare(nt,lt)===0}function om(ot,nt,lt){const dt=ot!=="=="&&ot!=="!=";return class TC{constructor(mt,yt,Et){this.type=_a,this.lhs=mt,this.rhs=yt,this.collator=Et,this.hasUntypedArgument=mt.type.kind==="value"||yt.type.kind==="value"}static parse(mt,yt){if(mt.length!==3&&mt.length!==4)return yt.error("Expected two or three arguments.");const Et=mt[0];let At=yt.parse(mt[1],1,Qo);if(!At)return null;if(!b0(Et,At.type))return yt.concat(1).error(`"${Et}" comparisons are not supported for type '${xs(At.type)}'.`);let Ct=yt.parse(mt[2],2,Qo);if(!Ct)return null;if(!b0(Et,Ct.type))return yt.concat(2).error(`"${Et}" comparisons are not supported for type '${xs(Ct.type)}'.`);if(At.type.kind!==Ct.type.kind&&At.type.kind!=="value"&&Ct.type.kind!=="value")return yt.error(`Cannot compare types '${xs(At.type)}' and '${xs(Ct.type)}'.`);dt&&(At.type.kind==="value"&&Ct.type.kind!=="value"?At=new Bl(Ct.type,[At]):At.type.kind!=="value"&&Ct.type.kind==="value"&&(Ct=new Bl(At.type,[Ct])));let Lt=null;if(mt.length===4){if(At.type.kind!=="string"&&Ct.type.kind!=="string"&&At.type.kind!=="value"&&Ct.type.kind!=="value")return yt.error("Cannot use collator to compare non-string types.");if(Lt=yt.parse(mt[3],3,n0),!Lt)return null}return new TC(At,Ct,Lt)}evaluate(mt){const yt=this.lhs.evaluate(mt),Et=this.rhs.evaluate(mt);if(dt&&this.hasUntypedArgument){const At=$s(yt),Ct=$s(Et);if(At.kind!==Ct.kind||At.kind!=="string"&&At.kind!=="number")throw new Os(`Expected arguments for "${ot}" to be (string, string) or (number, number), but found (${At.kind}, ${Ct.kind}) instead.`)}if(this.collator&&!dt&&this.hasUntypedArgument){const At=$s(yt),Ct=$s(Et);if(At.kind!=="string"||Ct.kind!=="string")return nt(mt,yt,Et)}return this.collator?lt(mt,yt,Et,this.collator.evaluate(mt)):nt(mt,yt,Et)}eachChild(mt){mt(this.lhs),mt(this.rhs),this.collator&&mt(this.collator)}outputDefined(){return!0}serialize(){const mt=[ot];return this.eachChild(yt=>{mt.push(yt.serialize())}),mt}}}const pw=om("==",function(ot,nt,lt){return nt===lt},w0),M_=om("!=",function(ot,nt,lt){return nt!==lt},function(ot,nt,lt,dt){return!w0(0,nt,lt,dt)}),mw=om("<",function(ot,nt,lt){return nt<lt},function(ot,nt,lt,dt){return dt.compare(nt,lt)<0}),gw=om(">",function(ot,nt,lt){return nt>lt},function(ot,nt,lt,dt){return dt.compare(nt,lt)>0}),yw=om("<=",function(ot,nt,lt){return nt<=lt},function(ot,nt,lt,dt){return dt.compare(nt,lt)<=0}),xw=om(">=",function(ot,nt,lt){return nt>=lt},function(ot,nt,lt,dt){return dt.compare(nt,lt)>=0});class Kx{constructor(nt,lt,dt,ft,mt,yt){this.type=Zo,this.number=nt,this.locale=lt,this.currency=dt,this.unit=ft,this.minFractionDigits=mt,this.maxFractionDigits=yt}static parse(nt,lt){if(nt.length!==3)return lt.error("Expected two arguments.");const dt=lt.parse(nt[1],1,Jn);if(!dt)return null;const ft=nt[2];if(typeof ft!="object"||Array.isArray(ft))return lt.error("NumberFormat options argument must be an object.");let mt=null;if(ft.locale&&(mt=lt.parse(ft.locale,1,Zo),!mt))return null;let yt=null;if(ft.currency&&(yt=lt.parse(ft.currency,1,Zo),!yt))return null;let Et=null;if(ft.unit&&(Et=lt.parse(ft.unit,1,Zo),!Et))return null;let At=null;if(ft["min-fraction-digits"]&&(At=lt.parse(ft["min-fraction-digits"],1,Jn),!At))return null;let Ct=null;return ft["max-fraction-digits"]&&(Ct=lt.parse(ft["max-fraction-digits"],1,Jn),!Ct)?null:new Kx(dt,mt,yt,Et,At,Ct)}evaluate(nt){return new Intl.NumberFormat(this.locale?this.locale.evaluate(nt):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(nt):void 0,unit:this.unit?this.unit.evaluate(nt):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(nt):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(nt):void 0}).format(this.number.evaluate(nt))}eachChild(nt){nt(this.number),this.locale&&nt(this.locale),this.currency&&nt(this.currency),this.unit&&nt(this.unit),this.minFractionDigits&&nt(this.minFractionDigits),this.maxFractionDigits&&nt(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const nt={};return this.locale&&(nt.locale=this.locale.serialize()),this.currency&&(nt.currency=this.currency.serialize()),this.unit&&(nt.unit=this.unit.serialize()),this.minFractionDigits&&(nt["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(nt["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),nt]}}class Yx{constructor(nt){this.type=Jn,this.input=nt}static parse(nt,lt){if(nt.length!==2)return lt.error(`Expected 1 argument, but found ${nt.length-1} instead.`);const dt=lt.parse(nt[1],1);return dt?dt.type.kind!=="array"&&dt.type.kind!=="string"&&dt.type.kind!=="value"?lt.error(`Expected argument of type string or array, but found ${xs(dt.type)} instead.`):new Yx(dt):null}evaluate(nt){const lt=this.input.evaluate(nt);if(typeof lt=="string"||Array.isArray(lt))return lt.length;throw new Os(`Expected value to be of type string or array, but found ${xs($s(lt))} instead.`)}eachChild(nt){nt(this.input)}outputDefined(){return!1}serialize(){const nt=["length"];return this.eachChild(lt=>{nt.push(lt.serialize())}),nt}}function O_(ot){return function(){ot=1831565813+(ot|=0)|0;let nt=Math.imul(ot^ot>>>15,1|ot);return nt=nt+Math.imul(nt^nt>>>7,61|nt)^nt,((nt^nt>>>14)>>>0)/4294967296}}const am={"==":pw,"!=":M_,">":gw,"<":mw,">=":xw,"<=":yw,array:Bl,at:x0,boolean:Bl,case:_0,coalesce:Sp,collator:ey,format:_p,image:Tu,in:qx,"index-of":yy,interpolate:Wl,"interpolate-hcl":Wl,"interpolate-lab":Wl,length:Yx,let:y0,literal:au,match:v0,number:Bl,"number-format":Kx,object:Bl,slice:xy,step:im,string:Bl,"to-boolean":Au,"to-color":Au,"to-number":Au,"to-string":Au,var:hy,within:gu,distance:wp,config:_d};function j_(ot,[nt,lt,dt,ft]){nt=nt.evaluate(ot),lt=lt.evaluate(ot),dt=dt.evaluate(ot);const mt=ft?ft.evaluate(ot):1,yt=u_(nt,lt,dt,mt);if(yt)throw new Os(yt);return new ga(nt/255*mt,lt/255*mt,dt/255*mt,mt)}function vw(ot,[nt,lt,dt,ft]){nt=nt.evaluate(ot),lt=lt.evaluate(ot),dt=dt.evaluate(ot);const mt=ft?ft.evaluate(ot):1,yt=function(Ct,Lt,Bt,zt){return typeof Ct=="number"&&Ct>=0&&Ct<=360?typeof Lt=="number"&&Lt>=0&&Lt<=100&&typeof Bt=="number"&&Bt>=0&&Bt<=100?zt===void 0||typeof zt=="number"&&zt>=0&&zt<=1?null:`Invalid hsla value [${[Ct,Lt,Bt,zt].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof zt=="number"?[Ct,Lt,Bt,zt]:[Ct,Lt,Bt]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof zt=="number"?[Ct,Lt,Bt,zt]:[Ct,Lt,Bt]).join(", ")}]: 'h' must be between 0 and 360.`}(nt,lt,dt,mt);if(yt)throw new Os(yt);const Et=`hsla(${nt}, ${lt}%, ${dt}%, ${mt})`,At=ga.parse(Et);if(!At)throw new Os(`Failed to parse HSLA color: ${Et}`);return At}function xt(ot,nt){return ot in nt}function ct(ot,nt){const lt=nt[ot];return lt===void 0?null:lt}function pt(ot){return{type:ot}}function vt(ot){return{result:"success",value:ot}}function Tt(ot){return{result:"error",value:ot}}function Pt(ot,nt){return!!ot&&!!ot.parameters&&ot.parameters.indexOf(nt)>-1}function Ot(ot){return ot["property-type"]==="data-driven"}function Ft(ot){return Pt(ot.expression,"measure-light")}function Vt(ot){return Pt(ot.expression,"zoom")}function Gt(ot){return!!ot.expression&&ot.expression.interpolated}function Zt(ot){return typeof ot=="object"&&ot!==null&&!Array.isArray(ot)}function Yt(ot){return ot}function er(ot,nt){const lt=nt.type==="color",dt=ot.stops&&typeof ot.stops[0][0]=="object",ft=dt||!(dt||ot.property!==void 0),mt=ot.type||(Gt(nt)?"exponential":"interval");if(lt&&((ot=Yp({},ot)).stops&&(ot.stops=ot.stops.map(Ct=>[Ct[0],ga.parse(Ct[1])])),ot.default=ga.parse(ot.default?ot.default:nt.default)),ot.colorSpace&&ot.colorSpace!=="rgb"&&!gy[ot.colorSpace])throw new Error(`Unknown color space: ${ot.colorSpace}`);let yt,Et,At;if(mt==="exponential")yt=cr;else if(mt==="interval")yt=lr;else if(mt==="categorical"){yt=sr,Et=Object.create(null);for(const Ct of ot.stops)Et[Ct[0]]=Ct[1];At=typeof ot.stops[0][0]}else{if(mt!=="identity")throw new Error(`Unknown function type "${mt}"`);yt=ur}if(dt){const Ct={},Lt=[];for(let Wt=0;Wt<ot.stops.length;Wt++){const qt=ot.stops[Wt],Xt=qt[0].zoom;Ct[Xt]===void 0&&(Ct[Xt]={zoom:Xt,type:ot.type,property:ot.property,default:ot.default,stops:[]},Lt.push(Xt)),Ct[Xt].stops.push([qt[0].value,qt[1]])}const Bt=[];for(const Wt of Lt)Bt.push([Ct[Wt].zoom,er(Ct[Wt],nt)]);const zt={name:"linear"};return{kind:"composite",interpolationType:zt,interpolationFactor:Wl.interpolationFactor.bind(void 0,zt),zoomStops:Bt.map(Wt=>Wt[0]),evaluate:({zoom:Wt},qt)=>cr({stops:Bt,base:ot.base},nt,Wt).evaluate(Wt,qt)}}if(ft){const Ct=mt==="exponential"?{name:"exponential",base:ot.base!==void 0?ot.base:1}:null;return{kind:"camera",interpolationType:Ct,interpolationFactor:Wl.interpolationFactor.bind(void 0,Ct),zoomStops:ot.stops.map(Lt=>Lt[0]),evaluate:({zoom:Lt})=>yt(ot,nt,Lt,Et,At)}}return{kind:"source",evaluate(Ct,Lt){const Bt=Lt&&Lt.properties?Lt.properties[ot.property]:void 0;return Bt===void 0?rr(ot.default,nt.default):yt(ot,nt,Bt,Et,At)}}}function rr(ot,nt,lt){return ot!==void 0?ot:nt!==void 0?nt:lt!==void 0?lt:void 0}function sr(ot,nt,lt,dt,ft){return rr(typeof lt===ft?dt[lt]:void 0,ot.default,nt.default)}function lr(ot,nt,lt){if(Xu(lt)!=="number")return rr(ot.default,nt.default);const dt=ot.stops.length;if(dt===1||lt<=ot.stops[0][0])return ot.stops[0][1];if(lt>=ot.stops[dt-1][0])return ot.stops[dt-1][1];const ft=Ep(ot.stops.map(mt=>mt[0]),lt);return ot.stops[ft][1]}function cr(ot,nt,lt){const dt=ot.base!==void 0?ot.base:1;if(Xu(lt)!=="number")return rr(ot.default,nt.default);const ft=ot.stops.length;if(ft===1||lt<=ot.stops[0][0])return ot.stops[0][1];if(lt>=ot.stops[ft-1][0])return ot.stops[ft-1][1];const mt=Ep(ot.stops.map(Lt=>Lt[0]),lt),yt=function(Lt,Bt,zt,Wt){const qt=Wt-zt,Xt=Lt-zt;return qt===0?0:Bt===1?Xt/qt:(Math.pow(Bt,Xt)-1)/(Math.pow(Bt,qt)-1)}(lt,dt,ot.stops[mt][0],ot.stops[mt+1][0]),Et=ot.stops[mt][1],At=ot.stops[mt+1][1];let Ct=Jm[nt.type]||Yt;if(ot.colorSpace&&ot.colorSpace!=="rgb"){const Lt=gy[ot.colorSpace];Ct=(Bt,zt)=>Lt.reverse(Lt.interpolate(Lt.forward(Bt),Lt.forward(zt),yt))}return typeof Et.evaluate=="function"?{evaluate(...Lt){const Bt=Et.evaluate.apply(void 0,Lt),zt=At.evaluate.apply(void 0,Lt);if(Bt!==void 0&&zt!==void 0)return Ct(Bt,zt,yt)}}:Ct(Et,At,yt)}function ur(ot,nt,lt){return nt.type==="color"?lt=ga.parse(lt):nt.type==="formatted"?lt=Sl.fromString(lt.toString()):nt.type==="resolvedImage"?lt=Fl.fromString(lt.toString()):Xu(lt)===nt.type||nt.type==="enum"&&nt.values[lt]||(lt=void 0),rr(lt,ot.default,nt.default)}$l.register(am,{error:[{kind:"error"},[Zo],(ot,[nt])=>{throw new Os(nt.evaluate(ot))}],typeof:[Zo,[Qo],(ot,[nt])=>xs($s(nt.evaluate(ot)))],"to-rgba":[Xs(Jn,4),[Ql],(ot,[nt])=>nt.evaluate(ot).toRenderColor(null).toArray()],rgb:[Ql,[Jn,Jn,Jn],j_],rgba:[Ql,[Jn,Jn,Jn,Jn],j_],hsl:[Ql,[Jn,Jn,Jn],vw],hsla:[Ql,[Jn,Jn,Jn,Jn],vw],has:{type:_a,overloads:[[[Zo],(ot,[nt])=>xt(nt.evaluate(ot),ot.properties())],[[Zo,Xp],(ot,[nt,lt])=>xt(nt.evaluate(ot),lt.evaluate(ot))]]},get:{type:Qo,overloads:[[[Zo],(ot,[nt])=>ct(nt.evaluate(ot),ot.properties())],[[Zo,Xp],(ot,[nt,lt])=>ct(nt.evaluate(ot),lt.evaluate(ot))]]},"feature-state":[Qo,[Zo],(ot,[nt])=>ct(nt.evaluate(ot),ot.featureState||{})],properties:[Xp,[],ot=>ot.properties()],"geometry-type":[Zo,[],ot=>ot.geometryType()],id:[Qo,[],ot=>ot.id()],zoom:[Jn,[],ot=>ot.globals.zoom],pitch:[Jn,[],ot=>ot.globals.pitch||0],"distance-from-center":[Jn,[],ot=>ot.distanceFromCenter()],"measure-light":[Jn,[Zo],(ot,[nt])=>ot.measureLight(nt.evaluate(ot))],"heatmap-density":[Jn,[],ot=>ot.globals.heatmapDensity||0],"line-progress":[Jn,[],ot=>ot.globals.lineProgress||0],"raster-value":[Jn,[],ot=>ot.globals.rasterValue||0],"raster-particle-speed":[Jn,[],ot=>ot.globals.rasterParticleSpeed||0],"sky-radial-progress":[Jn,[],ot=>ot.globals.skyRadialProgress||0],accumulated:[Qo,[],ot=>ot.globals.accumulated===void 0?null:ot.globals.accumulated],"+":[Jn,pt(Jn),(ot,nt)=>{let lt=0;for(const dt of nt)lt+=dt.evaluate(ot);return lt}],"*":[Jn,pt(Jn),(ot,nt)=>{let lt=1;for(const dt of nt)lt*=dt.evaluate(ot);return lt}],"-":{type:Jn,overloads:[[[Jn,Jn],(ot,[nt,lt])=>nt.evaluate(ot)-lt.evaluate(ot)],[[Jn],(ot,[nt])=>-nt.evaluate(ot)]]},"/":[Jn,[Jn,Jn],(ot,[nt,lt])=>nt.evaluate(ot)/lt.evaluate(ot)],"%":[Jn,[Jn,Jn],(ot,[nt,lt])=>nt.evaluate(ot)%lt.evaluate(ot)],ln2:[Jn,[],()=>Math.LN2],pi:[Jn,[],()=>Math.PI],e:[Jn,[],()=>Math.E],"^":[Jn,[Jn,Jn],(ot,[nt,lt])=>Math.pow(nt.evaluate(ot),lt.evaluate(ot))],sqrt:[Jn,[Jn],(ot,[nt])=>Math.sqrt(nt.evaluate(ot))],log10:[Jn,[Jn],(ot,[nt])=>Math.log(nt.evaluate(ot))/Math.LN10],ln:[Jn,[Jn],(ot,[nt])=>Math.log(nt.evaluate(ot))],log2:[Jn,[Jn],(ot,[nt])=>Math.log(nt.evaluate(ot))/Math.LN2],sin:[Jn,[Jn],(ot,[nt])=>Math.sin(nt.evaluate(ot))],cos:[Jn,[Jn],(ot,[nt])=>Math.cos(nt.evaluate(ot))],tan:[Jn,[Jn],(ot,[nt])=>Math.tan(nt.evaluate(ot))],asin:[Jn,[Jn],(ot,[nt])=>Math.asin(nt.evaluate(ot))],acos:[Jn,[Jn],(ot,[nt])=>Math.acos(nt.evaluate(ot))],atan:[Jn,[Jn],(ot,[nt])=>Math.atan(nt.evaluate(ot))],min:[Jn,pt(Jn),(ot,nt)=>Math.min(...nt.map(lt=>lt.evaluate(ot)))],max:[Jn,pt(Jn),(ot,nt)=>Math.max(...nt.map(lt=>lt.evaluate(ot)))],abs:[Jn,[Jn],(ot,[nt])=>Math.abs(nt.evaluate(ot))],round:[Jn,[Jn],(ot,[nt])=>{const lt=nt.evaluate(ot);return lt<0?-Math.round(-lt):Math.round(lt)}],floor:[Jn,[Jn],(ot,[nt])=>Math.floor(nt.evaluate(ot))],ceil:[Jn,[Jn],(ot,[nt])=>Math.ceil(nt.evaluate(ot))],"filter-==":[_a,[Zo,Qo],(ot,[nt,lt])=>ot.properties()[nt.value]===lt.value],"filter-id-==":[_a,[Qo],(ot,[nt])=>ot.id()===nt.value],"filter-type-==":[_a,[Zo],(ot,[nt])=>ot.geometryType()===nt.value],"filter-<":[_a,[Zo,Qo],(ot,[nt,lt])=>{const dt=ot.properties()[nt.value],ft=lt.value;return typeof dt==typeof ft&&dt<ft}],"filter-id-<":[_a,[Qo],(ot,[nt])=>{const lt=ot.id(),dt=nt.value;return typeof lt==typeof dt&&lt<dt}],"filter->":[_a,[Zo,Qo],(ot,[nt,lt])=>{const dt=ot.properties()[nt.value],ft=lt.value;return typeof dt==typeof ft&&dt>ft}],"filter-id->":[_a,[Qo],(ot,[nt])=>{const lt=ot.id(),dt=nt.value;return typeof lt==typeof dt&&lt>dt}],"filter-<=":[_a,[Zo,Qo],(ot,[nt,lt])=>{const dt=ot.properties()[nt.value],ft=lt.value;return typeof dt==typeof ft&&dt<=ft}],"filter-id-<=":[_a,[Qo],(ot,[nt])=>{const lt=ot.id(),dt=nt.value;return typeof lt==typeof dt&&lt<=dt}],"filter->=":[_a,[Zo,Qo],(ot,[nt,lt])=>{const dt=ot.properties()[nt.value],ft=lt.value;return typeof dt==typeof ft&&dt>=ft}],"filter-id->=":[_a,[Qo],(ot,[nt])=>{const lt=ot.id(),dt=nt.value;return typeof lt==typeof dt&&lt>=dt}],"filter-has":[_a,[Qo],(ot,[nt])=>nt.value in ot.properties()],"filter-has-id":[_a,[],ot=>ot.id()!==null&&ot.id()!==void 0],"filter-type-in":[_a,[Xs(Zo)],(ot,[nt])=>nt.value.indexOf(ot.geometryType())>=0],"filter-id-in":[_a,[Xs(Qo)],(ot,[nt])=>nt.value.indexOf(ot.id())>=0],"filter-in-small":[_a,[Zo,Xs(Qo)],(ot,[nt,lt])=>lt.value.indexOf(ot.properties()[nt.value])>=0],"filter-in-large":[_a,[Zo,Xs(Qo)],(ot,[nt,lt])=>function(dt,ft,mt,yt){for(;mt<=yt;){const Et=mt+yt>>1;if(ft[Et]===dt)return!0;ft[Et]>dt?yt=Et-1:mt=Et+1}return!1}(ot.properties()[nt.value],lt.value,0,lt.value.length-1)],all:{type:_a,overloads:[[[_a,_a],(ot,[nt,lt])=>nt.evaluate(ot)&&lt.evaluate(ot)],[pt(_a),(ot,nt)=>{for(const lt of nt)if(!lt.evaluate(ot))return!1;return!0}]]},any:{type:_a,overloads:[[[_a,_a],(ot,[nt,lt])=>nt.evaluate(ot)||lt.evaluate(ot)],[pt(_a),(ot,nt)=>{for(const lt of nt)if(lt.evaluate(ot))return!0;return!1}]]},"!":[_a,[_a],(ot,[nt])=>!nt.evaluate(ot)],"is-supported-script":[_a,[Zo],(ot,[nt])=>{const lt=ot.globals&&ot.globals.isSupportedScript;return!lt||lt(nt.evaluate(ot))}],upcase:[Zo,[Zo],(ot,[nt])=>nt.evaluate(ot).toUpperCase()],downcase:[Zo,[Zo],(ot,[nt])=>nt.evaluate(ot).toLowerCase()],concat:[Zo,pt(Qo),(ot,nt)=>nt.map(lt=>ou(lt.evaluate(ot))).join("")],"resolved-locale":[Zo,[n0],(ot,[nt])=>nt.evaluate(ot).resolvedLocale()],random:[Jn,[Jn,Jn,Qo],(ot,nt)=>{const[lt,dt,ft]=nt.map(yt=>yt.evaluate(ot));if(lt>dt||lt===dt)return lt;let mt;if(typeof ft=="string")mt=function(yt){let Et=0;if(yt.length===0)return Et;for(let At=0;At<yt.length;At++)Et=(Et<<5)-Et+yt.charCodeAt(At),Et|=0;return Et}(ft);else{if(typeof ft!="number")throw new Os(`Invalid seed input: ${ft}`);mt=ft}return lt+O_(mt)()*(dt-lt)}]});class br{constructor(nt,lt,dt,ft){this.expression=nt,this._warningHistory={},this._evaluator=new Ox(dt,ft),this._defaultValue=lt?function(mt){return mt.type==="color"&&(Zt(mt.default)||Array.isArray(mt.default))?new ga(0,0,0,0):mt.type==="color"?ga.parse(mt.default)||null:mt.default===void 0?null:mt.default}(lt):null,this._enumValues=lt&&lt.type==="enum"?lt.values:null}evaluateWithoutErrorHandling(nt,lt,dt,ft,mt,yt,Et,At){return this._evaluator.globals=nt,this._evaluator.feature=lt,this._evaluator.featureState=dt,this._evaluator.canonical=ft||null,this._evaluator.availableImages=mt||null,this._evaluator.formattedSection=yt,this._evaluator.featureTileCoord=Et||null,this._evaluator.featureDistanceData=At||null,this.expression.evaluate(this._evaluator)}evaluate(nt,lt,dt,ft,mt,yt,Et,At){this._evaluator.globals=nt,this._evaluator.feature=lt||null,this._evaluator.featureState=dt||null,this._evaluator.canonical=ft||null,this._evaluator.availableImages=mt||null,this._evaluator.formattedSection=yt||null,this._evaluator.featureTileCoord=Et||null,this._evaluator.featureDistanceData=At||null;try{const Ct=this.expression.evaluate(this._evaluator);if(Ct==null||typeof Ct=="number"&&Ct!=Ct)return this._defaultValue;if(this._enumValues&&!(Ct in this._enumValues))throw new Os(`Expected value to be one of ${Object.keys(this._enumValues).map(Lt=>JSON.stringify(Lt)).join(", ")}, but found ${JSON.stringify(Ct)} instead.`);return Ct}catch(Ct){return this._warningHistory[Ct.message]||(this._warningHistory[Ct.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${Ct.message}`)),this._defaultValue}}}function Er(ot){return Array.isArray(ot)&&ot.length>0&&typeof ot[0]=="string"&&ot[0]in am}function _r(ot,nt,lt,dt){const ft=new P_(am,[],nt?function(yt){const Et={color:Ql,string:Zo,number:Jn,enum:Zo,boolean:_a,formatted:Jp,resolvedImage:vp};return yt.type==="array"?Xs(Et[yt.value]||Qo,yt.length):Et[yt.type]}(nt):void 0,void 0,void 0,lt,dt),mt=ft.parse(ot,void 0,void 0,void 0,nt&&nt.type==="string"?{typeAnnotation:"coerce"}:void 0);return mt?vt(new br(mt,nt,lt,dt)):Tt(ft.errors)}class $r{constructor(nt,lt,dt){this.kind=nt,this._styleExpression=lt,this.isLightConstant=dt,this.isStateDependent=nt!=="constant"&&!p0(lt.expression),this.configDependencies=uy(lt.expression)}evaluateWithoutErrorHandling(nt,lt,dt,ft,mt,yt){return this._styleExpression.evaluateWithoutErrorHandling(nt,lt,dt,ft,mt,yt)}evaluate(nt,lt,dt,ft,mt,yt){return this._styleExpression.evaluate(nt,lt,dt,ft,mt,yt)}}class Tr{constructor(nt,lt,dt,ft,mt){this.kind=nt,this.zoomStops=dt,this._styleExpression=lt,this.isStateDependent=nt!=="camera"&&!p0(lt.expression),this.isLightConstant=mt,this.configDependencies=uy(lt.expression),this.interpolationType=ft}evaluateWithoutErrorHandling(nt,lt,dt,ft,mt,yt){return this._styleExpression.evaluateWithoutErrorHandling(nt,lt,dt,ft,mt,yt)}evaluate(nt,lt,dt,ft,mt,yt){return this._styleExpression.evaluate(nt,lt,dt,ft,mt,yt)}interpolationFactor(nt,lt,dt){return this.interpolationType?Wl.interpolationFactor(this.interpolationType,nt,lt,dt):0}}function Ar(ot,nt,lt,dt){if((ot=_r(ot,nt,lt,dt)).result==="error")return ot;const ft=ot.value.expression,mt=cy(ft);if(!mt&&!Ot(nt))return Tt([new mu("","data expressions not supported")]);const yt=dy(ft,["zoom","pitch","distance-from-center"]);if(!yt&&!Vt(nt))return Tt([new mu("","zoom expressions not supported")]);const Et=dy(ft,["measure-light"]);if(!Et&&!Ft(nt))return Tt([new mu("","measure-light expression not supported")]);const At=nt.expression&&nt.expression.relaxZoomRestriction,Ct=zr(ft);return Ct||yt||At?Ct instanceof mu?Tt([Ct]):Ct instanceof Wl&&!Gt(nt)?Tt([new mu("",'"interpolate" expressions cannot be used with this property')]):vt(Ct?new Tr(mt?"camera":"composite",ot.value,Ct.labels,Ct instanceof Wl?Ct.interpolation:void 0,Et):new $r(mt?"constant":"source",ot.value,Et)):Tt([new mu("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Fr{constructor(nt,lt){this._parameters=nt,this._specification=lt,Yp(this,er(this._parameters,this._specification))}static deserialize(nt){return new Fr(nt._parameters,nt._specification)}static serialize(nt){return{_parameters:nt._parameters,_specification:nt._specification}}}function zr(ot){let nt=null;if(ot instanceof y0)nt=zr(ot.result);else if(ot instanceof Sp){for(const lt of ot.args)if(nt=zr(lt),nt)break}else(ot instanceof im||ot instanceof Wl)&&ot.input instanceof $l&&ot.input.name==="zoom"&&(nt=ot);return nt instanceof mu||ot.eachChild(lt=>{const dt=zr(lt);dt instanceof mu?nt=dt:nt&&dt&&nt!==dt&&(nt=new mu("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),nt}var Yr=Ir,Vr=3;function Ir(ot,nt,lt){var dt=this.cells=[];if(ot instanceof ArrayBuffer){this.arrayBuffer=ot;var ft=new Int32Array(this.arrayBuffer);ot=ft[0],this.d=(nt=ft[1])+2*(lt=ft[2]);for(var mt=0;mt<this.d*this.d;mt++){var yt=ft[Vr+mt],Et=ft[Vr+mt+1];dt.push(yt===Et?null:ft.subarray(yt,Et))}var At=ft[Vr+dt.length+1];this.keys=ft.subarray(ft[Vr+dt.length],At),this.bboxes=ft.subarray(At),this.insert=this._insertReadonly}else{this.d=nt+2*lt;for(var Ct=0;Ct<this.d*this.d;Ct++)dt.push([]);this.keys=[],this.bboxes=[]}this.n=nt,this.extent=ot,this.padding=lt,this.scale=nt/ot,this.uid=0;var Lt=lt/nt*ot;this.min=-Lt,this.max=ot+Lt}Ir.prototype.insert=function(ot,nt,lt,dt,ft){this._forEachCell(nt,lt,dt,ft,this._insertCell,this.uid++),this.keys.push(ot),this.bboxes.push(nt),this.bboxes.push(lt),this.bboxes.push(dt),this.bboxes.push(ft)},Ir.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ir.prototype._insertCell=function(ot,nt,lt,dt,ft,mt){this.cells[ft].push(mt)},Ir.prototype.query=function(ot,nt,lt,dt,ft){var mt=this.min,yt=this.max;if(ot<=mt&&nt<=mt&&yt<=lt&&yt<=dt&&!ft)return Array.prototype.slice.call(this.keys);var Et=[];return this._forEachCell(ot,nt,lt,dt,this._queryCell,Et,{},ft),Et},Ir.prototype._queryCell=function(ot,nt,lt,dt,ft,mt,yt,Et){var At=this.cells[ft];if(At!==null)for(var Ct=this.keys,Lt=this.bboxes,Bt=0;Bt<At.length;Bt++){var zt=At[Bt];if(yt[zt]===void 0){var Wt=4*zt;(Et?Et(Lt[Wt+0],Lt[Wt+1],Lt[Wt+2],Lt[Wt+3]):ot<=Lt[Wt+2]&&nt<=Lt[Wt+3]&&lt>=Lt[Wt+0]&&dt>=Lt[Wt+1])?(yt[zt]=!0,mt.push(Ct[zt])):yt[zt]=!1}}},Ir.prototype._forEachCell=function(ot,nt,lt,dt,ft,mt,yt,Et){for(var At=this._convertToCellCoord(ot),Ct=this._convertToCellCoord(nt),Lt=this._convertToCellCoord(lt),Bt=this._convertToCellCoord(dt),zt=At;zt<=Lt;zt++)for(var Wt=Ct;Wt<=Bt;Wt++){var qt=this.d*Wt+zt;if((!Et||Et(this._convertFromCellCoord(zt),this._convertFromCellCoord(Wt),this._convertFromCellCoord(zt+1),this._convertFromCellCoord(Wt+1)))&&ft.call(this,ot,nt,lt,dt,qt,mt,yt,Et))return}},Ir.prototype._convertFromCellCoord=function(ot){return(ot-this.padding)/this.scale},Ir.prototype._convertToCellCoord=function(ot){return Math.max(0,Math.min(this.d-1,Math.floor(ot*this.scale)+this.padding))},Ir.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var ot=this.cells,nt=Vr+this.cells.length+1+1,lt=0,dt=0;dt<this.cells.length;dt++)lt+=this.cells[dt].length;var ft=new Int32Array(nt+lt+this.keys.length+this.bboxes.length);ft[0]=this.extent,ft[1]=this.n,ft[2]=this.padding;for(var mt=nt,yt=0;yt<ot.length;yt++){var Et=ot[yt];ft[Vr+yt]=mt,ft.set(Et,mt),mt+=Et.length}return ft[Vr+ot.length]=mt,ft.set(this.keys,mt),ft[Vr+ot.length+1]=mt+=this.keys.length,ft.set(this.bboxes,mt),mt+=this.bboxes.length,ft.buffer};var nn=Nt(Yr);const en={};function Wr(ot,nt,lt={}){Object.defineProperty(ot,"_classRegistryKey",{value:nt,writable:!1}),en[nt]={klass:ot,omit:lt.omit||[]}}Wr(Object,"Object"),nn.serialize=function(ot,nt){const lt=ot.toArrayBuffer();return nt&&nt.add(lt),{buffer:lt}},nn.deserialize=function(ot){return new nn(ot.buffer)},Object.defineProperty(nn,"name",{value:"Grid"}),Wr(nn,"Grid"),Wr(ga,"Color"),Wr(Error,"Error"),Wr(Sl,"Formatted"),Wr(o0,"FormattedSection"),Wr(Xy,"AJAXError"),Wr(Fl,"ResolvedImage"),Wr(Fr,"StylePropertyFunction"),Wr(br,"StyleExpression",{omit:["_evaluator"]}),Wr(Tr,"ZoomDependentExpression"),Wr($r,"ZoomConstantExpression"),Wr($l,"CompoundExpression",{omit:["_evaluate"]});for(const ot in am)en[am[ot]._classRegistryKey]||Wr(am[ot],`Expression${ot}`);function Tn(ot){return ot&&typeof ArrayBuffer<"u"&&(ot instanceof ArrayBuffer||ot.constructor&&ot.constructor.name==="ArrayBuffer")}function _n(ot){return self.ImageBitmap&&ot instanceof ImageBitmap}function Xr(ot,nt){if(ot==null||typeof ot=="boolean"||typeof ot=="number"||typeof ot=="string"||ot instanceof Boolean||ot instanceof Number||ot instanceof String||ot instanceof Date||ot instanceof RegExp)return ot;if(Tn(ot)||_n(ot))return nt&&nt.add(ot),ot;if(ArrayBuffer.isView(ot)){const lt=ot;return nt&&nt.add(lt.buffer),lt}if(ot instanceof ImageData)return nt&&nt.add(ot.data.buffer),ot;if(Array.isArray(ot)){const lt=[];for(const dt of ot)lt.push(Xr(dt,nt));return lt}if(ot instanceof Map){const lt={$name:"Map"};for(const[dt,ft]of ot.entries())lt[dt]=Xr(ft);return lt}if(ot instanceof Set){const lt={$name:"Set"};let dt=0;for(const ft of ot.values())lt[++dt]=Xr(ft);return lt}if(typeof ot=="object"){const lt=ot.constructor,dt=lt._classRegistryKey;if(!dt)throw new Error(`can't serialize object of unregistered class ${dt}`);const ft=lt.serialize?lt.serialize(ot,nt):{};if(!lt.serialize){for(const mt in ot)ot.hasOwnProperty(mt)&&(en[dt].omit.indexOf(mt)>=0||(ft[mt]=Xr(ot[mt],nt)));ot instanceof Error&&(ft.message=ot.message)}if(ft.$name)throw new Error("$name property is reserved for worker serialization logic.");return dt!=="Object"&&(ft.$name=dt),ft}throw new Error("can't serialize object of type "+typeof ot)}function hn(ot){if(ot==null||typeof ot=="boolean"||typeof ot=="number"||typeof ot=="string"||ot instanceof Boolean||ot instanceof Number||ot instanceof String||ot instanceof Date||ot instanceof RegExp||Tn(ot)||_n(ot)||ArrayBuffer.isView(ot)||ot instanceof ImageData)return ot;if(Array.isArray(ot))return ot.map(hn);if(typeof ot=="object"){const nt=ot.$name||"Object";if(nt==="Map"){const ft=new Map;for(const mt of Object.keys(ot))mt!=="$name"&&ft.set(mt,hn(ot[mt]));return ft}if(nt==="Set"){const ft=new Set;for(const mt of Object.keys(ot))mt!=="$name"&&ft.add(hn(ot[mt]));return ft}const{klass:lt}=en[nt];if(!lt)throw new Error(`can't deserialize unregistered class ${nt}`);if(lt.deserialize)return lt.deserialize(ot);const dt=Object.create(lt.prototype);for(const ft of Object.keys(ot))ft!=="$name"&&(dt[ft]=hn(ot[ft]));return dt}throw new Error("can't deserialize object of type "+typeof ot)}const Ur={"Latin-1 Supplement":ot=>ot>=128&&ot<=255,Arabic:ot=>ot>=1536&&ot<=1791,"Arabic Supplement":ot=>ot>=1872&&ot<=1919,"Arabic Extended-A":ot=>ot>=2208&&ot<=2303,"Hangul Jamo":ot=>ot>=4352&&ot<=4607,"Unified Canadian Aboriginal Syllabics":ot=>ot>=5120&&ot<=5759,Khmer:ot=>ot>=6016&&ot<=6143,"Unified Canadian Aboriginal Syllabics Extended":ot=>ot>=6320&&ot<=6399,"General Punctuation":ot=>ot>=8192&&ot<=8303,"Letterlike Symbols":ot=>ot>=8448&&ot<=8527,"Number Forms":ot=>ot>=8528&&ot<=8591,"Miscellaneous Technical":ot=>ot>=8960&&ot<=9215,"Control Pictures":ot=>ot>=9216&&ot<=9279,"Optical Character Recognition":ot=>ot>=9280&&ot<=9311,"Enclosed Alphanumerics":ot=>ot>=9312&&ot<=9471,"Geometric Shapes":ot=>ot>=9632&&ot<=9727,"Miscellaneous Symbols":ot=>ot>=9728&&ot<=9983,"Miscellaneous Symbols and Arrows":ot=>ot>=11008&&ot<=11263,"CJK Radicals Supplement":ot=>ot>=11904&&ot<=12031,"Kangxi Radicals":ot=>ot>=12032&&ot<=12255,"Ideographic Description Characters":ot=>ot>=12272&&ot<=12287,"CJK Symbols and Punctuation":ot=>ot>=12288&&ot<=12351,Hiragana:ot=>ot>=12352&&ot<=12447,Katakana:ot=>ot>=12448&&ot<=12543,Bopomofo:ot=>ot>=12544&&ot<=12591,"Hangul Compatibility Jamo":ot=>ot>=12592&&ot<=12687,Kanbun:ot=>ot>=12688&&ot<=12703,"Bopomofo Extended":ot=>ot>=12704&&ot<=12735,"CJK Strokes":ot=>ot>=12736&&ot<=12783,"Katakana Phonetic Extensions":ot=>ot>=12784&&ot<=12799,"Enclosed CJK Letters and Months":ot=>ot>=12800&&ot<=13055,"CJK Compatibility":ot=>ot>=13056&&ot<=13311,"CJK Unified Ideographs Extension A":ot=>ot>=13312&&ot<=19903,"Yijing Hexagram Symbols":ot=>ot>=19904&&ot<=19967,"CJK Unified Ideographs":ot=>ot>=19968&&ot<=40959,"Yi Syllables":ot=>ot>=40960&&ot<=42127,"Yi Radicals":ot=>ot>=42128&&ot<=42191,"Hangul Jamo Extended-A":ot=>ot>=43360&&ot<=43391,"Hangul Syllables":ot=>ot>=44032&&ot<=55215,"Hangul Jamo Extended-B":ot=>ot>=55216&&ot<=55295,"Private Use Area":ot=>ot>=57344&&ot<=63743,"CJK Compatibility Ideographs":ot=>ot>=63744&&ot<=64255,"Arabic Presentation Forms-A":ot=>ot>=64336&&ot<=65023,"Vertical Forms":ot=>ot>=65040&&ot<=65055,"CJK Compatibility Forms":ot=>ot>=65072&&ot<=65103,"Small Form Variants":ot=>ot>=65104&&ot<=65135,"Arabic Presentation Forms-B":ot=>ot>=65136&&ot<=65279,"Halfwidth and Fullwidth Forms":ot=>ot>=65280&&ot<=65519,"CJK Unified Ideographs Extension B":ot=>ot>=131072&&ot<=173791};function bn(ot){for(const nt of ot)if(Un(nt.charCodeAt(0)))return!0;return!1}function Sn(ot){for(const nt of ot)if(!zn(nt.charCodeAt(0)))return!1;return!0}function zn(ot){return!(Ur.Arabic(ot)||Ur["Arabic Supplement"](ot)||Ur["Arabic Extended-A"](ot)||Ur["Arabic Presentation Forms-A"](ot)||Ur["Arabic Presentation Forms-B"](ot))}function Un(ot){return!(ot!==746&&ot!==747&&(ot<4352||!(Ur["Bopomofo Extended"](ot)||Ur.Bopomofo(ot)||Ur["CJK Compatibility Forms"](ot)&&!(ot>=65097&&ot<=65103)||Ur["CJK Compatibility Ideographs"](ot)||Ur["CJK Compatibility"](ot)||Ur["CJK Radicals Supplement"](ot)||Ur["CJK Strokes"](ot)||!(!Ur["CJK Symbols and Punctuation"](ot)||ot>=12296&&ot<=12305||ot>=12308&&ot<=12319||ot===12336)||Ur["CJK Unified Ideographs Extension A"](ot)||Ur["CJK Unified Ideographs"](ot)||Ur["Enclosed CJK Letters and Months"](ot)||Ur["Hangul Compatibility Jamo"](ot)||Ur["Hangul Jamo Extended-A"](ot)||Ur["Hangul Jamo Extended-B"](ot)||Ur["Hangul Jamo"](ot)||Ur["Hangul Syllables"](ot)||Ur.Hiragana(ot)||Ur["Ideographic Description Characters"](ot)||Ur.Kanbun(ot)||Ur["Kangxi Radicals"](ot)||Ur["Katakana Phonetic Extensions"](ot)||Ur.Katakana(ot)&&ot!==12540||!(!Ur["Halfwidth and Fullwidth Forms"](ot)||ot===65288||ot===65289||ot===65293||ot>=65306&&ot<=65310||ot===65339||ot===65341||ot===65343||ot>=65371&&ot<=65503||ot===65507||ot>=65512&&ot<=65519)||!(!Ur["Small Form Variants"](ot)||ot>=65112&&ot<=65118||ot>=65123&&ot<=65126)||Ur["Unified Canadian Aboriginal Syllabics"](ot)||Ur["Unified Canadian Aboriginal Syllabics Extended"](ot)||Ur["Vertical Forms"](ot)||Ur["Yijing Hexagram Symbols"](ot)||Ur["Yi Syllables"](ot)||Ur["Yi Radicals"](ot))))}function Qn(ot){return!(Un(ot)||function(nt){return!!(Ur["Latin-1 Supplement"](nt)&&(nt===167||nt===169||nt===174||nt===177||nt===188||nt===189||nt===190||nt===215||nt===247)||Ur["General Punctuation"](nt)&&(nt===8214||nt===8224||nt===8225||nt===8240||nt===8241||nt===8251||nt===8252||nt===8258||nt===8263||nt===8264||nt===8265||nt===8273)||Ur["Letterlike Symbols"](nt)||Ur["Number Forms"](nt)||Ur["Miscellaneous Technical"](nt)&&(nt>=8960&&nt<=8967||nt>=8972&&nt<=8991||nt>=8996&&nt<=9e3||nt===9003||nt>=9085&&nt<=9114||nt>=9150&&nt<=9165||nt===9167||nt>=9169&&nt<=9179||nt>=9186&&nt<=9215)||Ur["Control Pictures"](nt)&&nt!==9251||Ur["Optical Character Recognition"](nt)||Ur["Enclosed Alphanumerics"](nt)||Ur["Geometric Shapes"](nt)||Ur["Miscellaneous Symbols"](nt)&&!(nt>=9754&&nt<=9759)||Ur["Miscellaneous Symbols and Arrows"](nt)&&(nt>=11026&&nt<=11055||nt>=11088&&nt<=11097||nt>=11192&&nt<=11243)||Ur["CJK Symbols and Punctuation"](nt)||Ur.Katakana(nt)||Ur["Private Use Area"](nt)||Ur["CJK Compatibility Forms"](nt)||Ur["Small Form Variants"](nt)||Ur["Halfwidth and Fullwidth Forms"](nt)||nt===8734||nt===8756||nt===8757||nt>=9984&&nt<=10087||nt>=10102&&nt<=10131||nt===65532||nt===65533)}(ot))}function Wn(ot){return ot>=1424&&ot<=2303||Ur["Arabic Presentation Forms-A"](ot)||Ur["Arabic Presentation Forms-B"](ot)}function uo(ot,nt){return!(!nt&&Wn(ot)||ot>=2304&&ot<=3583||ot>=3840&&ot<=4255||Ur.Khmer(ot))}function So(ot){for(const nt of ot)if(Wn(nt.charCodeAt(0)))return!0;return!1}const fo="deferred",ko="loading",Vo="loaded";let ss=null,rs="unavailable",Uo=null;const ts=function(ot){ot&&typeof ot=="string"&&ot.indexOf("NetworkError")>-1&&(rs="error"),ss&&ss(ot)};function Oo(){Do.fire(new pu("pluginStateChange",{pluginStatus:rs,pluginURL:Uo}))}const Do=new xp,To=function(){return rs},Ko=function(){if(rs!==fo||!Uo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");rs=ko,Oo(),Uo&&pp({url:Uo},ot=>{ot?ts(ot):(rs=Vo,Oo())})},Lo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>rs===Vo||Lo.applyArabicShaping!=null,isLoading:()=>rs===ko,setState(ot){rs=ot.pluginStatus,Uo=ot.pluginURL},isParsed:()=>Lo.applyArabicShaping!=null&&Lo.processBidirectionalText!=null&&Lo.processStyledBidirectionalText!=null,getPluginURL:()=>Uo};class yo{constructor(nt,lt){this.zoom=nt,lt?(this.now=lt.now,this.fadeDuration=lt.fadeDuration,this.transition=lt.transition,this.pitch=lt.pitch,this.brightness=lt.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(nt){return function(lt,dt){for(const ft of lt)if(!uo(ft.charCodeAt(0),dt))return!1;return!0}(nt,Lo.isLoaded())}}class As{constructor(nt,lt,dt,ft){this.property=nt,this.value=lt,this.expression=function(mt,yt,Et,At){if(Zt(mt))return new Fr(mt,yt);if(Er(mt)||Array.isArray(mt)&&mt.length>0){const Ct=Ar(mt,yt,Et,At);if(Ct.result==="error")throw new Error(Ct.value.map(Lt=>`${Lt.key}: ${Lt.message}`).join(", "));return Ct.value}{let Ct=mt;return typeof mt=="string"&&yt.type==="color"&&(Ct=ga.parse(mt)),{kind:"constant",configDependencies:new Set,evaluate:()=>Ct}}}(lt===void 0?nt.specification.default:lt,nt.specification,dt,ft)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(nt,lt,dt){return this.property.possiblyEvaluate(this,nt,lt,dt)}}class Ps{constructor(nt,lt,dt){this.property=nt,this.value=new As(nt,void 0,lt,dt)}transitioned(nt,lt){return new yl(this.property,this.value,lt,Zs({},nt.transition,this.transition),nt.now)}untransitioned(){return new yl(this.property,this.value,null,{},0)}}class Qs{constructor(nt,lt,dt){this._properties=nt,this._values=Object.create(nt.defaultTransitionablePropertyValues),this._scope=lt,this._options=dt,this.configDependencies=new Set}getValue(nt){return Rl(this._values[nt].value.value)}setValue(nt,lt){this._values.hasOwnProperty(nt)||(this._values[nt]=new Ps(this._values[nt].property,this._scope,this._options)),this._values[nt].value=new As(this._values[nt].property,lt===null?void 0:Rl(lt),this._scope,this._options),this._values[nt].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[nt].value.expression.configDependencies]))}setTransitionOrValue(nt,lt){lt&&(this._options=lt);const dt=this._properties.properties;if(nt)for(const ft in nt){const mt=nt[ft];if(Dm(ft,"-transition")){const yt=ft.slice(0,-11);dt[yt]&&this.setTransition(yt,mt)}else dt.hasOwnProperty(ft)&&this.setValue(ft,mt)}}getTransition(nt){return Rl(this._values[nt].transition)}setTransition(nt,lt){this._values.hasOwnProperty(nt)||(this._values[nt]=new Ps(this._values[nt].property)),this._values[nt].transition=Rl(lt)||void 0}serialize(){const nt={};for(const lt of Object.keys(this._values)){const dt=this.getValue(lt);dt!==void 0&&(nt[lt]=dt);const ft=this.getTransition(lt);ft!==void 0&&(nt[`${lt}-transition`]=ft)}return nt}transitioned(nt,lt){const dt=new Us(this._properties);for(const ft of Object.keys(this._values))dt._values[ft]=this._values[ft].transitioned(nt,lt._values[ft]);return dt}untransitioned(){const nt=new Us(this._properties);for(const lt of Object.keys(this._values))nt._values[lt]=this._values[lt].untransitioned();return nt}}class yl{constructor(nt,lt,dt,ft,mt){const yt=ft.delay||0,Et=ft.duration||0;mt=mt||0,this.property=nt,this.value=lt,this.begin=mt+yt,this.end=this.begin+Et,nt.specification.transition&&(ft.delay||ft.duration)&&(this.prior=dt)}possiblyEvaluate(nt,lt,dt){const ft=nt.now||0,mt=this.value.possiblyEvaluate(nt,lt,dt),yt=this.prior;if(yt){if(ft>this.end)return this.prior=null,mt;if(this.value.isDataDriven())return this.prior=null,mt;if(ft<this.begin)return yt.possiblyEvaluate(nt,lt,dt);{const Et=(ft-this.begin)/(this.end-this.begin);return this.property.interpolate(yt.possiblyEvaluate(nt,lt,dt),mt,By(Et))}}return mt}}class Us{constructor(nt){this._properties=nt,this._values=Object.create(nt.defaultTransitioningPropertyValues)}possiblyEvaluate(nt,lt,dt){const ft=new Gs(this._properties);for(const mt of Object.keys(this._values))ft._values[mt]=this._values[mt].possiblyEvaluate(nt,lt,dt);return ft}hasTransition(){for(const nt of Object.keys(this._values))if(this._values[nt].prior)return!0;return!1}}class xl{constructor(nt,lt,dt){this._properties=nt,this._values=Object.create(nt.defaultPropertyValues),this._scope=lt,this._options=dt,this.configDependencies=new Set}getValue(nt){return Rl(this._values[nt].value)}setValue(nt,lt){this._values[nt]=new As(this._values[nt].property,lt===null?void 0:Rl(lt),this._scope,this._options),this._values[nt].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[nt].expression.configDependencies]))}serialize(){const nt={};for(const lt of Object.keys(this._values)){const dt=this.getValue(lt);dt!==void 0&&(nt[lt]=dt)}return nt}possiblyEvaluate(nt,lt,dt){const ft=new Gs(this._properties);for(const mt of Object.keys(this._values))ft._values[mt]=this._values[mt].possiblyEvaluate(nt,lt,dt);return ft}}class Ns{constructor(nt,lt,dt){this.property=nt,this.value=lt,this.parameters=dt}isConstant(){return this.value.kind==="constant"}constantOr(nt){return this.value.kind==="constant"?this.value.value:nt}evaluate(nt,lt,dt,ft){return this.property.evaluate(this.value,this.parameters,nt,lt,dt,ft)}}class Gs{constructor(nt){this._properties=nt,this._values=Object.create(nt.defaultPossiblyEvaluatedValues)}get(nt){return this._values[nt]}}class In{constructor(nt){this.specification=nt}possiblyEvaluate(nt,lt){return nt.expression.evaluate(lt)}interpolate(nt,lt,dt){const ft=Jm[this.specification.type];return ft?ft(nt,lt,dt):nt}}class to{constructor(nt,lt){this.specification=nt,this.overrides=lt}possiblyEvaluate(nt,lt,dt,ft){return new Ns(this,nt.expression.kind==="constant"||nt.expression.kind==="camera"?{kind:"constant",value:nt.expression.evaluate(lt,null,{},dt,ft)}:nt.expression,lt)}interpolate(nt,lt,dt){if(nt.value.kind!=="constant"||lt.value.kind!=="constant")return nt;if(nt.value.value===void 0||lt.value.value===void 0)return new Ns(this,{kind:"constant",value:void 0},nt.parameters);const ft=Jm[this.specification.type];return ft?new Ns(this,{kind:"constant",value:ft(nt.value.value,lt.value.value,dt)},nt.parameters):nt}evaluate(nt,lt,dt,ft,mt,yt){return nt.kind==="constant"?nt.value:nt.evaluate(lt,dt,ft,mt,yt)}}class Tl{constructor(nt){this.specification=nt}possiblyEvaluate(nt,lt,dt,ft){return!!nt.expression.evaluate(lt,null,{},dt,ft)}interpolate(){return!1}}class is{constructor(nt){this.properties=nt,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const lt=new yo(0,{});for(const dt in nt){const ft=nt[dt];ft.specification.overridable&&this.overridableProperties.push(dt);const mt=this.defaultPropertyValues[dt]=new As(ft,void 0),yt=this.defaultTransitionablePropertyValues[dt]=new Ps(ft);this.defaultTransitioningPropertyValues[dt]=yt.untransitioned(),this.defaultPossiblyEvaluatedValues[dt]=mt.possiblyEvaluate(lt)}}}Wr(to,"DataDrivenProperty"),Wr(In,"DataConstantProperty"),Wr(Tl,"ColorRampProperty");var tn=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"expression":{},"property-type":"data-constant"},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{"experimental":true}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant","experimental":true},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant","experimental":true}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"private":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-line-alignment":{"type":"enum","values":{"inside":1,"outside":1,"center":1},"default":"center","property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function ku(ot){return ot instanceof Number||ot instanceof String||ot instanceof Boolean?ot.valueOf():ot}function su(ot){if(Array.isArray(ot))return ot.map(su);if(ot instanceof Object&&!(ot instanceof Number||ot instanceof String||ot instanceof Boolean)){const nt={};for(const lt in ot)nt[lt]=su(ot[lt]);return nt}return ku(ot)}function Ru(ot){if(ot===!0||ot===!1)return!0;if(!Array.isArray(ot)||ot.length===0)return!1;switch(ot[0]){case"has":return ot.length>=2&&ot[1]!=="$id"&&ot[1]!=="$type";case"in":return ot.length>=3&&(typeof ot[1]!="string"||Array.isArray(ot[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return ot.length!==3||Array.isArray(ot[1])||Array.isArray(ot[2]);case"any":case"all":for(const nt of ot.slice(1))if(!Ru(nt)&&typeof nt!="boolean")return!1;return!0;default:return!0}}function Iu(ot,nt="fill"){if(ot==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Ru(ot)||(ot=sm(ot));const lt=ot;let dt=!0;try{dt=function(Ct){if(!_f(Ct))return Ct;let Lt=su(Ct);return S0(Lt),Lt=E0(Lt),Lt}(lt)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(lt,null,2)}
        `)}const ft=tn[`filter_${nt}`],mt=_r(dt,ft);let yt=null;if(mt.result==="error")throw new Error(mt.value.map(Ct=>`${Ct.key}: ${Ct.message}`).join(", "));yt=(Ct,Lt,Bt)=>mt.value.evaluate(Ct,Lt,{},Bt);let Et=null,At=null;if(dt!==lt){const Ct=_r(lt,ft);if(Ct.result==="error")throw new Error(Ct.value.map(Lt=>`${Lt.key}: ${Lt.message}`).join(", "));Et=(Lt,Bt,zt,Wt,qt)=>Ct.value.evaluate(Lt,Bt,{},zt,void 0,void 0,Wt,qt),At=!cy(Ct.value.expression)}return{filter:yt,dynamicFilter:Et||void 0,needGeometry:T0(dt),needFeature:!!At}}function E0(ot){if(!Array.isArray(ot))return ot;const nt=function(lt){if(Xx.has(lt[0])){for(let dt=1;dt<lt.length;dt++)if(_f(lt[dt]))return!0}return lt}(ot);return nt===!0?nt:nt.map(lt=>E0(lt))}function S0(ot){let nt=!1;const lt=[];if(ot[0]==="case"){for(let dt=1;dt<ot.length-1;dt+=2)nt=nt||_f(ot[dt]),lt.push(ot[dt+1]);lt.push(ot[ot.length-1])}else if(ot[0]==="match"){nt=nt||_f(ot[1]);for(let dt=2;dt<ot.length-1;dt+=2)lt.push(ot[dt+1]);lt.push(ot[ot.length-1])}else if(ot[0]==="step"){nt=nt||_f(ot[1]);for(let dt=1;dt<ot.length-1;dt+=2)lt.push(ot[dt+1])}nt&&(ot.length=0,ot.push("any",...lt));for(let dt=1;dt<ot.length;dt++)S0(ot[dt])}function _f(ot){if(!Array.isArray(ot))return!1;if((nt=ot[0])==="pitch"||nt==="distance-from-center")return!0;var nt;for(let lt=1;lt<ot.length;lt++)if(_f(ot[lt]))return!0;return!1}const Xx=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Tp(ot,nt){return ot<nt?-1:ot>nt?1:0}function T0(ot){if(!Array.isArray(ot))return!1;if(ot[0]==="within"||ot[0]==="distance")return!0;for(let nt=1;nt<ot.length;nt++)if(T0(ot[nt]))return!0;return!1}function sm(ot){if(!ot)return!0;const nt=ot[0];return ot.length<=1?nt!=="any":nt==="=="?_w(ot[1],ot[2],"=="):nt==="!="?D_(_w(ot[1],ot[2],"==")):nt==="<"||nt===">"||nt==="<="||nt===">="?_w(ot[1],ot[2],nt):nt==="any"?(lt=ot.slice(1),["any"].concat(lt.map(sm))):nt==="all"?["all"].concat(ot.slice(1).map(sm)):nt==="none"?["all"].concat(ot.slice(1).map(sm).map(D_)):nt==="in"?lS(ot[1],ot.slice(2)):nt==="!in"?D_(lS(ot[1],ot.slice(2))):nt==="has"?cS(ot[1]):nt!=="!has"||D_(cS(ot[1]));var lt}function _w(ot,nt,lt){switch(ot){case"$type":return[`filter-type-${lt}`,nt];case"$id":return[`filter-id-${lt}`,nt];default:return[`filter-${lt}`,ot,nt]}}function lS(ot,nt){if(nt.length===0)return!1;switch(ot){case"$type":return["filter-type-in",["literal",nt]];case"$id":return["filter-id-in",["literal",nt]];default:return nt.length>200&&!nt.some(lt=>typeof lt!=typeof nt[0])?["filter-in-large",ot,["literal",nt.sort(Tp)]]:["filter-in-small",ot,["literal",nt]]}}function cS(ot){switch(ot){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",ot]}}function D_(ot){return["!",ot]}const L_="";function uS(ot,nt){return nt?`${ot}${L_}${nt}`:ot}const dS="-transition",AC=new Set(["fill","line","background","hillshade","raster"]);class Hl extends xp{constructor(nt,lt,dt,ft,mt){if(super(),this.id=nt.id,this.fqid=uS(this.id,dt),this.type=nt.type,this.scope=dt,this.lut=ft,this.options=mt,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,nt.type!=="custom"&&(this.metadata=nt.metadata,this.minzoom=nt.minzoom,this.maxzoom=nt.maxzoom,nt.type!=="background"&&nt.type!=="sky"&&nt.type!=="slot"&&(this.source=nt.source,this.sourceLayer=nt["source-layer"],this.filter=nt.filter),nt.slot&&(this.slot=nt.slot),lt.layout&&(this._unevaluatedLayout=new xl(lt.layout,this.scope,mt),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),lt.paint)){this._transitionablePaint=new Qs(lt.paint,this.scope,mt);for(const yt in nt.paint)this.setPaintProperty(yt,nt.paint[yt]);for(const yt in nt.layout)this.setLayoutProperty(yt,nt.layout[yt]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Gs(lt.paint)}}onAdd(nt){}onRemove(nt){}isDraped(nt){return AC.has(this.type)}getLayoutProperty(nt){return nt==="visibility"?this.visibility:this._unevaluatedLayout.getValue(nt)}setLayoutProperty(nt,lt){if(this.type==="custom"&&nt==="visibility")return void(this.visibility=lt);const dt=this._unevaluatedLayout;dt._properties.properties[nt]&&(dt.setValue(nt,lt),this.configDependencies=new Set([...this.configDependencies,...dt.configDependencies]),nt==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0})}getPaintProperty(nt){return Dm(nt,dS)?this._transitionablePaint.getTransition(nt.slice(0,-11)):this._transitionablePaint.getValue(nt)}setPaintProperty(nt,lt){const dt=this._transitionablePaint,ft=dt._properties.properties;if(Dm(nt,dS)){const Bt=nt.slice(0,-11);return ft[Bt]&&dt.setTransition(Bt,lt||void 0),!1}if(!ft[nt])return!1;const mt=dt._values[nt],yt=mt.value.isDataDriven(),Et=mt.value;dt.setValue(nt,lt),this.configDependencies=new Set([...this.configDependencies,...dt.configDependencies]),this._handleSpecialPaintPropertyUpdate(nt);const At=dt._values[nt].value,Ct=At.isDataDriven(),Lt=Dm(nt,"pattern")||nt==="line-dasharray";return Ct||yt||Lt||this._handleOverridablePaintPropertyUpdate(nt,Et,At)}_handleSpecialPaintPropertyUpdate(nt){}getProgramIds(){return null}getDefaultProgramParams(nt,lt,dt){return null}_handleOverridablePaintPropertyUpdate(nt,lt,dt){return!1}isHidden(nt){return!!(this.minzoom&&nt<this.minzoom)||!!(this.maxzoom&&nt>=this.maxzoom)||this.visibility==="none"}updateTransitions(nt){this._transitioningPaint=this._transitionablePaint.transitioned(nt,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(nt,lt){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(nt,void 0,lt)),this.paint=this._transitioningPaint.possiblyEvaluate(nt,void 0,lt)}serialize(){return qs({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(nt,lt)=>!(nt===void 0||lt==="layout"&&!Object.keys(nt).length||lt==="paint"&&!Object.keys(nt).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const nt in this.paint._values){const lt=this.paint.get(nt);if(lt instanceof Ns&&Ot(lt.property.specification)&&(lt.value.kind==="source"||lt.value.kind==="composite")&&lt.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Iu(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(nt){this._stats&&(nt.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(nt){}queryIntersectsFeature(nt,lt,dt,ft,mt,yt,Et,At,Ct){}queryIntersectsMatchingFeature(nt,lt,dt,ft){}}const PC={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Jx{constructor(nt,lt){this._structArray=nt,this._pos1=lt*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class hs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(nt,lt){return nt._trim(),lt&&(nt.isTransferred=!0,lt.add(nt.arrayBuffer)),{length:nt.length,arrayBuffer:nt.arrayBuffer}}static deserialize(nt){const lt=Object.create(this.prototype);return lt.arrayBuffer=nt.arrayBuffer,lt.length=nt.length,lt.capacity=nt.arrayBuffer.byteLength/lt.bytesPerElement,lt._refreshViews(),lt}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(nt){this.reserve(nt),this.length=nt}reserve(nt){if(nt>this.capacity){this.capacity=Math.max(nt,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const lt=this.uint8;this._refreshViews(),lt&&this.uint8.set(lt)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...nt){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...nt){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ba(ot,nt=1){let lt=0,dt=0;return{members:ot.map(ft=>{const mt=PC[ft.type].BYTES_PER_ELEMENT,yt=lt=hS(lt,Math.max(nt,mt)),Et=ft.components||1;return dt=Math.max(dt,mt),lt+=mt*Et,{name:ft.name,type:ft.type,components:Et,offset:yt}}),size:hS(lt,Math.max(dt,nt)),alignment:nt}}function hS(ot,nt){return Math.ceil(ot/nt)*nt}class $u extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,nt,lt)}emplace(nt,lt,dt){const ft=2*nt;return this.int16[ft+0]=lt,this.int16[ft+1]=dt,nt}}$u.prototype.bytesPerElement=4,Wr($u,"StructArrayLayout2i4");class N_ extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt){const ft=this.length;return this.resize(ft+1),this.emplace(ft,nt,lt,dt)}emplace(nt,lt,dt,ft){const mt=3*nt;return this.int16[mt+0]=lt,this.int16[mt+1]=dt,this.int16[mt+2]=ft,nt}}N_.prototype.bytesPerElement=6,Wr(N_,"StructArrayLayout3i6");class Ap extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft){const mt=this.length;return this.resize(mt+1),this.emplace(mt,nt,lt,dt,ft)}emplace(nt,lt,dt,ft,mt){const yt=4*nt;return this.int16[yt+0]=lt,this.int16[yt+1]=dt,this.int16[yt+2]=ft,this.int16[yt+3]=mt,nt}}Ap.prototype.bytesPerElement=8,Wr(Ap,"StructArrayLayout4i8");class bw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt){const yt=this.length;return this.resize(yt+1),this.emplace(yt,nt,lt,dt,ft,mt)}emplace(nt,lt,dt,ft,mt,yt){const Et=5*nt;return this.int16[Et+0]=lt,this.int16[Et+1]=dt,this.int16[Et+2]=ft,this.int16[Et+3]=mt,this.int16[Et+4]=yt,nt}}bw.prototype.bytesPerElement=10,Wr(bw,"StructArrayLayout5i10");class ww extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et){const At=this.length;return this.resize(At+1),this.emplace(At,nt,lt,dt,ft,mt,yt,Et)}emplace(nt,lt,dt,ft,mt,yt,Et,At){const Ct=6*nt,Lt=12*nt,Bt=3*nt;return this.int16[Ct+0]=lt,this.int16[Ct+1]=dt,this.uint8[Lt+4]=ft,this.uint8[Lt+5]=mt,this.uint8[Lt+6]=yt,this.uint8[Lt+7]=Et,this.float32[Bt+2]=At,nt}}ww.prototype.bytesPerElement=12,Wr(ww,"StructArrayLayout2i4ub1f12");class lm extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft){const mt=this.length;return this.resize(mt+1),this.emplace(mt,nt,lt,dt,ft)}emplace(nt,lt,dt,ft,mt){const yt=4*nt;return this.float32[yt+0]=lt,this.float32[yt+1]=dt,this.float32[yt+2]=ft,this.float32[yt+3]=mt,nt}}lm.prototype.bytesPerElement=16,Wr(lm,"StructArrayLayout4f16");class cm extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt){const ft=this.length;return this.resize(ft+1),this.emplace(ft,nt,lt,dt)}emplace(nt,lt,dt,ft){const mt=3*nt;return this.float32[mt+0]=lt,this.float32[mt+1]=dt,this.float32[mt+2]=ft,nt}}cm.prototype.bytesPerElement=12,Wr(cm,"StructArrayLayout3f12");class um extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt){const yt=this.length;return this.resize(yt+1),this.emplace(yt,nt,lt,dt,ft,mt)}emplace(nt,lt,dt,ft,mt,yt){const Et=6*nt,At=3*nt;return this.uint16[Et+0]=lt,this.uint16[Et+1]=dt,this.uint16[Et+2]=ft,this.uint16[Et+3]=mt,this.float32[At+2]=yt,nt}}um.prototype.bytesPerElement=12,Wr(um,"StructArrayLayout4ui1f12");class F_ extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft){const mt=this.length;return this.resize(mt+1),this.emplace(mt,nt,lt,dt,ft)}emplace(nt,lt,dt,ft,mt){const yt=4*nt;return this.uint16[yt+0]=lt,this.uint16[yt+1]=dt,this.uint16[yt+2]=ft,this.uint16[yt+3]=mt,nt}}F_.prototype.bytesPerElement=8,Wr(F_,"StructArrayLayout4ui8");class B_ extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt){const Et=this.length;return this.resize(Et+1),this.emplace(Et,nt,lt,dt,ft,mt,yt)}emplace(nt,lt,dt,ft,mt,yt,Et){const At=6*nt;return this.int16[At+0]=lt,this.int16[At+1]=dt,this.int16[At+2]=ft,this.int16[At+3]=mt,this.int16[At+4]=yt,this.int16[At+5]=Et,nt}}B_.prototype.bytesPerElement=12,Wr(B_,"StructArrayLayout6i12");class Ew extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt){const Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt)}emplace(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt){const qt=12*nt;return this.int16[qt+0]=lt,this.int16[qt+1]=dt,this.int16[qt+2]=ft,this.int16[qt+3]=mt,this.uint16[qt+4]=yt,this.uint16[qt+5]=Et,this.uint16[qt+6]=At,this.uint16[qt+7]=Ct,this.int16[qt+8]=Lt,this.int16[qt+9]=Bt,this.int16[qt+10]=zt,this.int16[qt+11]=Wt,nt}}Ew.prototype.bytesPerElement=24,Wr(Ew,"StructArrayLayout4i4ui4i24");class Sw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt){const Et=this.length;return this.resize(Et+1),this.emplace(Et,nt,lt,dt,ft,mt,yt)}emplace(nt,lt,dt,ft,mt,yt,Et){const At=10*nt,Ct=5*nt;return this.int16[At+0]=lt,this.int16[At+1]=dt,this.int16[At+2]=ft,this.float32[Ct+2]=mt,this.float32[Ct+3]=yt,this.float32[Ct+4]=Et,nt}}Sw.prototype.bytesPerElement=20,Wr(Sw,"StructArrayLayout3i3f20");class Tw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,nt)}emplace(nt,lt){return this.uint32[1*nt+0]=lt,nt}}Tw.prototype.bytesPerElement=4,Wr(Tw,"StructArrayLayout1ul4");class dm extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,nt,lt)}emplace(nt,lt,dt){const ft=2*nt;return this.uint16[ft+0]=lt,this.uint16[ft+1]=dt,nt}}dm.prototype.bytesPerElement=4,Wr(dm,"StructArrayLayout2ui4");class Aw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt){const qt=this.length;return this.resize(qt+1),this.emplace(qt,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt)}emplace(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt){const Xt=20*nt,Jt=10*nt;return this.int16[Xt+0]=lt,this.int16[Xt+1]=dt,this.int16[Xt+2]=ft,this.int16[Xt+3]=mt,this.int16[Xt+4]=yt,this.float32[Jt+3]=Et,this.float32[Jt+4]=At,this.float32[Jt+5]=Ct,this.float32[Jt+6]=Lt,this.int16[Xt+14]=Bt,this.uint32[Jt+8]=zt,this.uint16[Xt+18]=Wt,this.uint16[Xt+19]=qt,nt}}Aw.prototype.bytesPerElement=40,Wr(Aw,"StructArrayLayout5i4f1i1ul2ui40");class z_ extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et){const At=this.length;return this.resize(At+1),this.emplace(At,nt,lt,dt,ft,mt,yt,Et)}emplace(nt,lt,dt,ft,mt,yt,Et,At){const Ct=8*nt;return this.int16[Ct+0]=lt,this.int16[Ct+1]=dt,this.int16[Ct+2]=ft,this.int16[Ct+4]=mt,this.int16[Ct+5]=yt,this.int16[Ct+6]=Et,this.int16[Ct+7]=At,nt}}z_.prototype.bytesPerElement=16,Wr(z_,"StructArrayLayout3i2i2i16");class Pw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt){const yt=this.length;return this.resize(yt+1),this.emplace(yt,nt,lt,dt,ft,mt)}emplace(nt,lt,dt,ft,mt,yt){const Et=4*nt,At=8*nt;return this.float32[Et+0]=lt,this.float32[Et+1]=dt,this.float32[Et+2]=ft,this.int16[At+6]=mt,this.int16[At+7]=yt,nt}}Pw.prototype.bytesPerElement=16,Wr(Pw,"StructArrayLayout2f1f2i16");class Cw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft){const mt=this.length;return this.resize(mt+1),this.emplace(mt,nt,lt,dt,ft)}emplace(nt,lt,dt,ft,mt){const yt=12*nt,Et=3*nt;return this.uint8[yt+0]=lt,this.uint8[yt+1]=dt,this.float32[Et+1]=ft,this.float32[Et+2]=mt,nt}}Cw.prototype.bytesPerElement=12,Wr(Cw,"StructArrayLayout2ub2f12");class Fs extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt){const ft=this.length;return this.resize(ft+1),this.emplace(ft,nt,lt,dt)}emplace(nt,lt,dt,ft){const mt=3*nt;return this.uint16[mt+0]=lt,this.uint16[mt+1]=dt,this.uint16[mt+2]=ft,nt}}Fs.prototype.bytesPerElement=6,Wr(Fs,"StructArrayLayout3ui6");class kw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr){const Rr=this.length;return this.resize(Rr+1),this.emplace(Rr,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr)}emplace(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr,Rr){const Dr=30*nt,Hr=15*nt,Jr=60*nt;return this.int16[Dr+0]=lt,this.int16[Dr+1]=dt,this.int16[Dr+2]=ft,this.float32[Hr+2]=mt,this.float32[Hr+3]=yt,this.uint16[Dr+8]=Et,this.uint16[Dr+9]=At,this.uint32[Hr+5]=Ct,this.uint32[Hr+6]=Lt,this.uint32[Hr+7]=Bt,this.uint16[Dr+16]=zt,this.uint16[Dr+17]=Wt,this.uint16[Dr+18]=qt,this.float32[Hr+10]=Xt,this.float32[Hr+11]=Jt,this.uint8[Jr+48]=nr,this.uint8[Jr+49]=gr,this.uint8[Jr+50]=pr,this.uint32[Hr+13]=xr,this.int16[Dr+28]=Pr,this.uint8[Jr+58]=Rr,nt}}kw.prototype.bytesPerElement=60,Wr(kw,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Rw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn,$n,gn){const En=this.length;return this.resize(En+1),this.emplace(En,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn,$n,gn)}emplace(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr,gr,pr,xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn,$n,gn,En){const jn=20*nt,vn=40*nt,Bn=80*nt;return this.float32[jn+0]=lt,this.float32[jn+1]=dt,this.int16[vn+4]=ft,this.int16[vn+5]=mt,this.int16[vn+6]=yt,this.int16[vn+7]=Et,this.int16[vn+8]=At,this.int16[vn+9]=Ct,this.int16[vn+10]=Lt,this.int16[vn+11]=Bt,this.int16[vn+12]=zt,this.uint16[vn+13]=Wt,this.uint16[vn+14]=qt,this.uint16[vn+15]=Xt,this.uint16[vn+16]=Jt,this.uint16[vn+17]=nr,this.uint16[vn+18]=gr,this.uint16[vn+19]=pr,this.uint16[vn+20]=xr,this.uint16[vn+21]=Pr,this.uint16[vn+22]=Rr,this.uint16[vn+23]=Dr,this.uint16[vn+24]=Hr,this.uint16[vn+25]=Jr,this.uint16[vn+26]=an,this.uint16[vn+27]=Qr,this.uint32[jn+14]=yn,this.float32[jn+15]=Cn,this.float32[jn+16]=xn,this.float32[jn+17]=$n,this.float32[jn+18]=gn,this.uint8[Bn+76]=En,nt}}Rw.prototype.bytesPerElement=80,Wr(Rw,"StructArrayLayout2f9i15ui1ul4f1ub80");class A0 extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,nt)}emplace(nt,lt){return this.float32[1*nt+0]=lt,nt}}A0.prototype.bytesPerElement=4,Wr(A0,"StructArrayLayout1f4");class vy extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt){const yt=this.length;return this.resize(yt+1),this.emplace(yt,nt,lt,dt,ft,mt)}emplace(nt,lt,dt,ft,mt,yt){const Et=5*nt;return this.float32[Et+0]=lt,this.float32[Et+1]=dt,this.float32[Et+2]=ft,this.float32[Et+3]=mt,this.float32[Et+4]=yt,nt}}vy.prototype.bytesPerElement=20,Wr(vy,"StructArrayLayout5f20");class Iw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et){const At=this.length;return this.resize(At+1),this.emplace(At,nt,lt,dt,ft,mt,yt,Et)}emplace(nt,lt,dt,ft,mt,yt,Et,At){const Ct=7*nt;return this.float32[Ct+0]=lt,this.float32[Ct+1]=dt,this.float32[Ct+2]=ft,this.float32[Ct+3]=mt,this.float32[Ct+4]=yt,this.float32[Ct+5]=Et,this.float32[Ct+6]=At,nt}}Iw.prototype.bytesPerElement=28,Wr(Iw,"StructArrayLayout7f28");class $w extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft){const mt=this.length;return this.resize(mt+1),this.emplace(mt,nt,lt,dt,ft)}emplace(nt,lt,dt,ft,mt){const yt=6*nt;return this.uint32[3*nt+0]=lt,this.uint16[yt+2]=dt,this.uint16[yt+3]=ft,this.uint16[yt+4]=mt,nt}}$w.prototype.bytesPerElement=12,Wr($w,"StructArrayLayout1ul3ui12");class Qx extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,nt)}emplace(nt,lt){return this.uint16[1*nt+0]=lt,nt}}Qx.prototype.bytesPerElement=2,Wr(Qx,"StructArrayLayout1ui2");class ev extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt){const dt=this.length;return this.resize(dt+1),this.emplace(dt,nt,lt)}emplace(nt,lt,dt){const ft=2*nt;return this.float32[ft+0]=lt,this.float32[ft+1]=dt,nt}}ev.prototype.bytesPerElement=8,Wr(ev,"StructArrayLayout2f8");class Mw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt){const nr=this.length;return this.resize(nr+1),this.emplace(nr,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt)}emplace(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr){const gr=16*nt;return this.float32[gr+0]=lt,this.float32[gr+1]=dt,this.float32[gr+2]=ft,this.float32[gr+3]=mt,this.float32[gr+4]=yt,this.float32[gr+5]=Et,this.float32[gr+6]=At,this.float32[gr+7]=Ct,this.float32[gr+8]=Lt,this.float32[gr+9]=Bt,this.float32[gr+10]=zt,this.float32[gr+11]=Wt,this.float32[gr+12]=qt,this.float32[gr+13]=Xt,this.float32[gr+14]=Jt,this.float32[gr+15]=nr,nt}}Mw.prototype.bytesPerElement=64,Wr(Mw,"StructArrayLayout16f64");class V_ extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(nt,lt,dt,ft,mt,yt,Et){const At=this.length;return this.resize(At+1),this.emplace(At,nt,lt,dt,ft,mt,yt,Et)}emplace(nt,lt,dt,ft,mt,yt,Et,At){const Ct=10*nt,Lt=5*nt;return this.uint16[Ct+0]=lt,this.uint16[Ct+1]=dt,this.uint16[Ct+2]=ft,this.uint16[Ct+3]=mt,this.float32[Lt+2]=yt,this.float32[Lt+3]=Et,this.float32[Lt+4]=At,nt}}V_.prototype.bytesPerElement=20,Wr(V_,"StructArrayLayout4ui3f20");class Ow extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,nt)}emplace(nt,lt){return this.int16[1*nt+0]=lt,nt}}Ow.prototype.bytesPerElement=2,Wr(Ow,"StructArrayLayout1i2");class jw extends hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(nt){const lt=this.length;return this.resize(lt+1),this.emplace(lt,nt)}emplace(nt,lt){return this.uint8[1*nt+0]=lt,nt}}jw.prototype.bytesPerElement=1,Wr(jw,"StructArrayLayout1ub1");class fS extends Jx{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}fS.prototype.size=40;class Dw extends Aw{get(nt){return new fS(this,nt)}}Wr(Dw,"CollisionBoxArray");class pS extends Jx{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(nt){this._structArray.uint8[this._pos1+49]=nt}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(nt){this._structArray.uint8[this._pos1+50]=nt}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(nt){this._structArray.uint32[this._pos4+13]=nt}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(nt){this._structArray.uint8[this._pos1+58]=nt}}pS.prototype.size=60;class mS extends kw{get(nt){return new pS(this,nt)}}Wr(mS,"PlacedSymbolArray");class gS extends Jx{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(nt){this._structArray.uint32[this._pos4+14]=nt}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(nt){this._structArray.float32[this._pos4+18]=nt}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}gS.prototype.size=80;class yS extends Rw{get(nt){return new gS(this,nt)}}Wr(yS,"SymbolInstanceArray");class xS extends A0{getoffsetX(nt){return this.float32[1*nt+0]}}Wr(xS,"GlyphOffsetArray");class vS extends $u{getx(nt){return this.int16[2*nt+0]}gety(nt){return this.int16[2*nt+1]}}Wr(vS,"SymbolLineVertexArray");class _S extends Jx{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}_S.prototype.size=12;class bS extends $w{get(nt){return new _S(this,nt)}}Wr(bS,"FeatureIndexArray");class wS extends dm{geta_centroid_pos0(nt){return this.uint16[2*nt+0]}geta_centroid_pos1(nt){return this.uint16[2*nt+1]}}Wr(wS,"FillExtrusionCentroidArray");class ES extends Jx{get a_join_normal_inside_polygon0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside_polygon1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside_polygon2(){return this._structArray.int16[this._pos2+2]}get a_join_normal_inside_polygon3(){return this._structArray.int16[this._pos2+3]}}ES.prototype.size=8;class SS extends Ap{get(nt){return new ES(this,nt)}}Wr(SS,"FillExtrusionWallArray");const CC=ba([{name:"a_pos",components:2,type:"Int16"}],4),kC=ba([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class ms{constructor(nt=[]){this.segments=nt}_prepareSegment(nt,lt,dt,ft){let mt=this.segments[this.segments.length-1];return nt>ms.MAX_VERTEX_ARRAY_LENGTH&&Ts(`Max vertices per segment is ${ms.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${nt}`),(!mt||mt.vertexLength+nt>ms.MAX_VERTEX_ARRAY_LENGTH||mt.sortKey!==ft)&&(mt={vertexOffset:lt,primitiveOffset:dt,vertexLength:0,primitiveLength:0},ft!==void 0&&(mt.sortKey=ft),this.segments.push(mt)),mt}prepareSegment(nt,lt,dt,ft){return this._prepareSegment(nt,lt.length,dt.length,ft)}get(){return this.segments}destroy(){for(const nt of this.segments)for(const lt in nt.vaos)nt.vaos[lt].destroy()}static simpleSegment(nt,lt,dt,ft){return new ms([{vertexOffset:nt,primitiveOffset:lt,vertexLength:dt,primitiveLength:ft,vaos:{},sortKey:0}])}}function TS(ot,nt){return 256*(ot=jo(Math.floor(ot),0,255))+jo(Math.floor(nt),0,255)}ms.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Wr(ms,"SegmentVector");const RC=ba([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),IC=ba([{name:"a_dash",components:4,type:"Uint16"}]);class tv{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(nt,lt,dt,ft){this.ids.push(AS(nt)),this.positions.push(lt,dt,ft)}eachPosition(nt,lt){const dt=AS(nt);let ft=0,mt=this.ids.length-1;for(;ft<mt;){const yt=ft+mt>>1;this.ids[yt]>=dt?mt=yt:ft=yt+1}for(;this.ids[ft]===dt;)lt(this.positions[3*ft],this.positions[3*ft+1],this.positions[3*ft+2]),ft++}static serialize(nt,lt){const dt=new Float64Array(nt.ids),ft=new Uint32Array(nt.positions);return Lw(dt,ft,0,dt.length-1),lt&&(lt.add(dt.buffer),lt.add(ft.buffer)),{ids:dt,positions:ft}}static deserialize(nt){const lt=new tv;let dt;lt.ids=nt.ids,lt.positions=nt.positions;for(const ft of lt.ids)ft!==dt&&lt.uniqueIds.push(ft),dt=ft;return lt.indexed=!0,lt}}function AS(ot){const nt=+ot;return!isNaN(nt)&&Number.MIN_SAFE_INTEGER<=nt&&nt<=Number.MAX_SAFE_INTEGER?nt:Jy(String(ot))}function Lw(ot,nt,lt,dt){for(;lt<dt;){const ft=ot[lt+dt>>1];let mt=lt-1,yt=dt+1;for(;;){do mt++;while(ot[mt]<ft);do yt--;while(ot[yt]>ft);if(mt>=yt)break;U_(ot,mt,yt),U_(nt,3*mt,3*yt),U_(nt,3*mt+1,3*yt+1),U_(nt,3*mt+2,3*yt+2)}yt-lt<dt-yt?(Lw(ot,nt,lt,yt),lt=yt+1):(Lw(ot,nt,yt+1,dt),dt=yt)}}function U_(ot,nt,lt){const dt=ot[nt];ot[nt]=ot[lt],ot[lt]=dt}Wr(tv,"FeaturePositionMap");class Pp{constructor(nt){this.gl=nt.gl,this.initialized=!1}fetchUniformLocation(nt,lt){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(nt,lt),this.initialized=!0),!!this.location}set(nt,lt,dt){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class G_ extends Pp{constructor(nt){super(nt),this.current=0}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&this.current!==dt&&(this.current=dt,this.gl.uniform1i(this.location,dt))}}class Ml extends Pp{constructor(nt){super(nt),this.current=0}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&this.current!==dt&&(this.current=dt,this.gl.uniform1f(this.location,dt))}}class Cp extends Pp{constructor(nt){super(nt),this.current=[0,0]}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&(dt[0]===this.current[0]&&dt[1]===this.current[1]||(this.current=dt,this.gl.uniform2f(this.location,dt[0],dt[1])))}}class Nw extends Pp{constructor(nt){super(nt),this.current=[0,0,0]}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&(dt[0]===this.current[0]&&dt[1]===this.current[1]&&dt[2]===this.current[2]||(this.current=dt,this.gl.uniform3f(this.location,dt[0],dt[1],dt[2])))}}class Fw extends Pp{constructor(nt){super(nt),this.current=[0,0,0,0]}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&(dt[0]===this.current[0]&&dt[1]===this.current[1]&&dt[2]===this.current[2]&&dt[3]===this.current[3]||(this.current=dt,this.gl.uniform4f(this.location,dt[0],dt[1],dt[2],dt[3])))}}class PS extends Pp{constructor(nt){super(nt),this.current=ga.transparent.toRenderColor(null)}set(nt,lt,dt){this.fetchUniformLocation(nt,lt)&&(dt.r===this.current.r&&dt.g===this.current.g&&dt.b===this.current.b&&dt.a===this.current.a||(this.current=dt,this.gl.uniform4f(this.location,dt.r,dt.g,dt.b,dt.a)))}}const $C=new Float32Array(16);class rv extends Pp{constructor(nt){super(nt),this.current=$C}set(nt,lt,dt){if(this.fetchUniformLocation(nt,lt)){if(dt[12]!==this.current[12]||dt[0]!==this.current[0])return this.current=dt,void this.gl.uniformMatrix4fv(this.location,!1,dt);for(let ft=1;ft<16;ft++)if(dt[ft]!==this.current[ft]){this.current=dt,this.gl.uniformMatrix4fv(this.location,!1,dt);break}}}}const MC=new Float32Array(9),OC=new Float32Array(4);class Bw extends Pp{constructor(nt){super(nt),this.current=OC}set(nt,lt,dt){if(this.fetchUniformLocation(nt,lt)){for(let ft=0;ft<4;ft++)if(dt[ft]!==this.current[ft]){this.current=dt,this.gl.uniformMatrix2fv(this.location,!1,dt);break}}}}function zw(ot){return[TS(255*ot.r,255*ot.g),TS(255*ot.b,255*ot.a)]}class nv{constructor(nt,lt,dt,ft){this.value=nt,this.uniformNames=lt.map(mt=>`u_${mt}`),this.type=dt,this.context=ft}setUniform(nt,lt,dt,ft,mt){const yt=ft.constantOr(this.value);lt.set(nt,mt,yt instanceof ga?yt.toRenderColor(this.context.lut):yt)}getBinding(nt,lt){return this.type==="color"?new PS(nt):new Ml(nt)}}class P0{constructor(nt,lt){this.uniformNames=lt.map(dt=>`u_${dt}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(nt){this.pixelRatio=nt.pixelRatio||1,this.pattern=nt.tl.concat(nt.br)}setUniform(nt,lt,dt,ft,mt){const yt=mt==="u_pattern"||mt==="u_dash"?this.pattern:mt==="u_pixel_ratio"?this.pixelRatio:null;yt&&lt.set(nt,mt,yt)}getBinding(nt,lt){return lt==="u_pattern"||lt==="u_dash"?new Fw(nt):new Ml(nt)}}class kp{constructor(nt,lt,dt,ft){this.expression=nt,this.type=dt,this.maxValue=0,this.paintVertexAttributes=lt.map(mt=>({name:`a_${mt}`,type:"Float32",components:dt==="color"?2:1,offset:0})),this.paintVertexArray=new ft}populatePaintArray(nt,lt,dt,ft,mt,yt,Et){const At=this.paintVertexArray.length,Ct=this.expression.evaluate(new yo(0,{brightness:yt}),lt,{},mt,ft,Et);this.paintVertexArray.resize(nt),this._setPaintValue(At,nt,Ct,this.context)}updatePaintArray(nt,lt,dt,ft,mt,yt,Et){const At=this.expression.evaluate({zoom:0,brightness:Et},dt,ft,void 0,mt);this._setPaintValue(nt,lt,At,this.context)}_setPaintValue(nt,lt,dt,ft){if(this.type==="color"){const mt=zw(dt.toRenderColor(ft.lut));for(let yt=nt;yt<lt;yt++)this.paintVertexArray.emplace(yt,mt[0],mt[1])}else{for(let mt=nt;mt<lt;mt++)this.paintVertexArray.emplace(mt,dt);this.maxValue=Math.max(this.maxValue,Math.abs(dt))}}upload(nt){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=nt.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Mu{constructor(nt,lt,dt,ft,mt,yt){this.expression=nt,this.uniformNames=lt.map(Et=>`u_${Et}_t`),this.type=dt,this.useIntegerZoom=ft,this.context=mt,this.maxValue=0,this.paintVertexAttributes=lt.map(Et=>({name:`a_${Et}`,type:"Float32",components:dt==="color"?4:2,offset:0})),this.paintVertexArray=new yt}populatePaintArray(nt,lt,dt,ft,mt,yt,Et){const At=this.expression.evaluate(new yo(this.context.zoom,{brightness:yt}),lt,{},mt,ft,Et),Ct=this.expression.evaluate(new yo(this.context.zoom+1,{brightness:yt}),lt,{},mt,ft,Et),Lt=this.paintVertexArray.length;this.paintVertexArray.resize(nt),this._setPaintValue(Lt,nt,At,Ct,this.context)}updatePaintArray(nt,lt,dt,ft,mt,yt,Et){const At=this.expression.evaluate({zoom:this.context.zoom,brightness:Et},dt,ft,void 0,mt),Ct=this.expression.evaluate({zoom:this.context.zoom+1,brightness:Et},dt,ft,void 0,mt);this._setPaintValue(nt,lt,At,Ct,this.context)}_setPaintValue(nt,lt,dt,ft,mt){if(this.type==="color"){const yt=zw(dt.toRenderColor(mt.lut)),Et=zw(dt.toRenderColor(mt.lut));for(let At=nt;At<lt;At++)this.paintVertexArray.emplace(At,yt[0],yt[1],Et[0],Et[1])}else{for(let yt=nt;yt<lt;yt++)this.paintVertexArray.emplace(yt,dt,ft);this.maxValue=Math.max(this.maxValue,Math.abs(dt),Math.abs(ft))}}upload(nt){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=nt.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(nt,lt,dt,ft,mt){const yt=this.useIntegerZoom?Math.floor(dt.zoom):dt.zoom,Et=jo(this.expression.interpolationFactor(yt,this.context.zoom,this.context.zoom+1),0,1);lt.set(nt,mt,Et)}getBinding(nt,lt){return new Ml(nt)}}class hm{constructor(nt,lt,dt,ft,mt){this.expression=nt,this.layerId=mt,this.paintVertexAttributes=(dt==="array"?IC:RC).members;for(let yt=0;yt<lt.length;++yt);this.paintVertexArray=new ft}populatePaintArray(nt,lt,dt,ft){const mt=this.paintVertexArray.length;this.paintVertexArray.resize(nt),this._setPaintValues(mt,nt,lt.patterns&&lt.patterns[this.layerId],dt)}updatePaintArray(nt,lt,dt,ft,mt,yt,Et){this._setPaintValues(nt,lt,dt.patterns&&dt.patterns[this.layerId],yt)}_setPaintValues(nt,lt,dt,ft){if(!ft||!dt)return;const mt=ft[dt];if(!mt)return;const{tl:yt,br:Et,pixelRatio:At}=mt;for(let Ct=nt;Ct<lt;Ct++)this.paintVertexArray.emplace(Ct,yt[0],yt[1],Et[0],Et[1],At)}upload(nt){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=nt.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class _y{constructor(nt,lt,dt=()=>!0){this.binders={},this._buffers=[],this.context=lt;const ft=[];for(const mt in nt.paint._values){const yt=nt.paint.get(mt);if(!dt(mt)||!(yt instanceof Ns&&Ot(yt.property.specification)))continue;const Et=DC(mt,nt.type),At=yt.value,Ct=yt.property.specification.type,Lt=!!yt.property.useIntegerZoom,Bt=mt==="line-dasharray"||mt.endsWith("pattern"),zt=mt==="line-dasharray"&&nt.layout.get("line-cap").value.kind!=="constant";if(At.kind!=="constant"||zt)if(At.kind==="source"||zt||Bt){const Wt=CS(mt,Ct,"source");this.binders[mt]=Bt?new hm(At,Et,Ct,Wt,nt.id):new kp(At,Et,Ct,Wt),ft.push(`/a_${mt}`)}else{const Wt=CS(mt,Ct,"composite");this.binders[mt]=new Mu(At,Et,Ct,Lt,lt,Wt),ft.push(`/z_${mt}`)}else this.binders[mt]=Bt?new P0(At.value,Et):new nv(At.value,Et,Ct,lt),ft.push(`/u_${mt}`)}this.cacheKey=ft.sort().join("")}getMaxValue(nt){const lt=this.binders[nt];return lt instanceof kp||lt instanceof Mu?lt.maxValue:0}populatePaintArrays(nt,lt,dt,ft,mt,yt,Et){for(const At in this.binders){const Ct=this.binders[At];Ct.context=this.context,(Ct instanceof kp||Ct instanceof Mu||Ct instanceof hm)&&Ct.populatePaintArray(nt,lt,dt,ft,mt,yt,Et)}}setConstantPatternPositions(nt){for(const lt in this.binders){const dt=this.binders[lt];dt instanceof P0&&dt.setConstantPatternPositions(nt)}}updatePaintArrays(nt,lt,dt,ft,mt,yt,Et,At){let Ct=!1;const Lt=Object.keys(nt),Bt=Lt.length!==0,zt=Bt?Lt:lt.uniqueIds;this.context.lut=mt.lut;for(const Wt in this.binders){const qt=this.binders[Wt];if(qt.context=this.context,(qt instanceof kp||qt instanceof Mu||qt instanceof hm)&&(qt.expression.isStateDependent===!0||qt.expression.isLightConstant===!1)){const Xt=mt.paint.get(Wt);qt.expression=Xt.value;for(const Jt of zt){const nr=nt[Jt.toString()];lt.eachPosition(Jt,(gr,pr,xr)=>{const Pr=ft.feature(gr);qt.updatePaintArray(pr,xr,Pr,nr,yt,Et,At)})}if(!Bt)for(const Jt of dt.uniqueIds){const nr=nt[Jt.toString()];dt.eachPosition(Jt,(gr,pr,xr)=>{const Pr=ft.feature(gr);qt.updatePaintArray(pr,xr,Pr,nr,yt,Et,At)})}Ct=!0}}return Ct}defines(){const nt=[];for(const lt in this.binders){const dt=this.binders[lt];(dt instanceof nv||dt instanceof P0)&&nt.push(...dt.uniformNames.map(ft=>`#define HAS_UNIFORM_${ft}`))}return nt}getBinderAttributes(){const nt=[];for(const lt in this.binders){const dt=this.binders[lt];if(dt instanceof kp||dt instanceof Mu||dt instanceof hm)for(let ft=0;ft<dt.paintVertexAttributes.length;ft++)nt.push(dt.paintVertexAttributes[ft].name)}return nt}getBinderUniforms(){const nt=[];for(const lt in this.binders){const dt=this.binders[lt];if(dt instanceof nv||dt instanceof P0||dt instanceof Mu)for(const ft of dt.uniformNames)nt.push(ft)}return nt}getPaintVertexBuffers(){return this._buffers}getUniforms(nt){const lt=[];for(const dt in this.binders){const ft=this.binders[dt];if(ft instanceof nv||ft instanceof P0||ft instanceof Mu)for(const mt of ft.uniformNames)lt.push({name:mt,property:dt,binding:ft.getBinding(nt,mt)})}return lt}setUniforms(nt,lt,dt,ft,mt){for(const{name:yt,property:Et,binding:At}of dt)this.binders[Et].setUniform(nt,At,mt,ft.get(Et),yt)}updatePaintBuffers(){this._buffers=[];for(const nt in this.binders){const lt=this.binders[nt];(lt instanceof kp||lt instanceof Mu||lt instanceof hm)&&lt.paintVertexBuffer&&this._buffers.push(lt.paintVertexBuffer)}}upload(nt){for(const lt in this.binders){const dt=this.binders[lt];(dt instanceof kp||dt instanceof Mu||dt instanceof hm)&&dt.upload(nt)}this.updatePaintBuffers()}destroy(){for(const nt in this.binders){const lt=this.binders[nt];(lt instanceof kp||lt instanceof Mu||lt instanceof hm)&&lt.destroy()}}}class fm{constructor(nt,lt,dt=()=>!0){this.programConfigurations={};for(const ft of nt)this.programConfigurations[ft.id]=new _y(ft,lt,dt);this.needsUpload=!1,this._featureMap=new tv,this._featureMapWithoutIds=new tv,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(nt,lt,dt,ft,mt,yt,Et,At){for(const Ct in this.programConfigurations)this.programConfigurations[Ct].populatePaintArrays(nt,lt,ft,mt,yt,Et,At);lt.id!==void 0?this._featureMap.add(lt.id,dt,this._bufferOffset,nt):(this._featureMapWithoutIds.add(this._idlessCounter,dt,this._bufferOffset,nt),this._idlessCounter+=1),this._bufferOffset=nt,this.needsUpload=!0}updatePaintArrays(nt,lt,dt,ft,mt,yt){for(const Et of dt)this.needsUpload=this.programConfigurations[Et.id].updatePaintArrays(nt,this._featureMap,this._featureMapWithoutIds,lt,Et,ft,mt,yt||0)||this.needsUpload}get(nt){return this.programConfigurations[nt]}upload(nt){if(this.needsUpload){for(const lt in this.programConfigurations)this.programConfigurations[lt].upload(nt);this.needsUpload=!1}}destroy(){for(const nt in this.programConfigurations)this.programConfigurations[nt].destroy()}}const jC={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function DC(ot,nt){return jC[ot]||[ot.replace(`${nt}-`,"").replace(/-/g,"_")]}const LC={"line-pattern":{source:um,composite:um},"fill-pattern":{source:um,composite:um},"fill-extrusion-pattern":{source:um,composite:um},"line-dasharray":{source:F_,composite:F_}},NC={color:{source:ev,composite:lm},number:{source:A0,composite:ev}};function CS(ot,nt,lt){const dt=LC[ot];return dt&&dt[lt]||NC[nt][lt]}Wr(nv,"ConstantBinder"),Wr(P0,"PatternConstantBinder"),Wr(kp,"SourceExpressionBinder"),Wr(hm,"PatternCompositeBinder"),Wr(Mu,"CompositeExpressionBinder"),Wr(_y,"ProgramConfiguration",{omit:["_buffers"]}),Wr(fm,"ProgramConfigurationSet");const Ol=Ln/Math.PI/2,Vw=5,kS=6,FC=16383,C0=64,Uw=[C0,32,16],yu=-Ol,xu=Ol;function k0(ot,nt,lt,dt=Ol){return lt=zo(lt),[ot*Math.sin(lt)*dt,-nt*dt,ot*Math.cos(lt)*dt]}function by(ot,nt,lt){return k0(Math.cos(zo(ot)),Math.sin(zo(ot)),nt,lt)}const R0=63710088e-1,Gw=2*Math.PI*R0;class na{constructor(nt,lt){if(isNaN(nt)||isNaN(lt))throw new Error(`Invalid LngLat object: (${nt}, ${lt})`);if(this.lng=+nt,this.lat=+lt,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new na(Vp(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(nt){const lt=Math.PI/180,dt=this.lat*lt,ft=nt.lat*lt,mt=Math.sin(dt)*Math.sin(ft)+Math.cos(dt)*Math.cos(ft)*Math.cos((nt.lng-this.lng)*lt);return R0*Math.acos(Math.min(mt,1))}toBounds(nt=0){const lt=360*nt/40075017,dt=lt/Math.cos(Math.PI/180*this.lat);return new pm({lng:this.lng-dt,lat:this.lat-lt},{lng:this.lng+dt,lat:this.lat+lt})}toEcef(nt){return by(this.lat,this.lng,Ol+nt*Ol/R0)}static convert(nt){if(nt instanceof na)return nt;if(Array.isArray(nt)&&(nt.length===2||nt.length===3))return new na(Number(nt[0]),Number(nt[1]));if(!Array.isArray(nt)&&typeof nt=="object"&&nt!==null)return new na(Number("lng"in nt?nt.lng:nt.lon),Number(nt.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class pm{constructor(nt,lt){if(nt)if(lt)this.setSouthWest(nt).setNorthEast(lt);else if(nt.length===4){const dt=nt;this.setSouthWest([dt[0],dt[1]]).setNorthEast([dt[2],dt[3]])}else{const dt=nt;this.setSouthWest(dt[0]).setNorthEast(dt[1])}}setNorthEast(nt){return this._ne=nt instanceof na?new na(nt.lng,nt.lat):na.convert(nt),this}setSouthWest(nt){return this._sw=nt instanceof na?new na(nt.lng,nt.lat):na.convert(nt),this}extend(nt){const lt=this._sw,dt=this._ne;let ft,mt;if(nt instanceof na)ft=nt,mt=nt;else{if(!(nt instanceof pm))return Array.isArray(nt)?nt.length===4||nt.every(Array.isArray)?this.extend(pm.convert(nt)):this.extend(na.convert(nt)):typeof nt=="object"&&nt!==null&&nt.hasOwnProperty("lat")&&(nt.hasOwnProperty("lon")||nt.hasOwnProperty("lng"))?this.extend(na.convert(nt)):this;if(ft=nt._sw,mt=nt._ne,!ft||!mt)return this}return lt||dt?(lt.lng=Math.min(ft.lng,lt.lng),lt.lat=Math.min(ft.lat,lt.lat),dt.lng=Math.max(mt.lng,dt.lng),dt.lat=Math.max(mt.lat,dt.lat)):(this._sw=new na(ft.lng,ft.lat),this._ne=new na(mt.lng,mt.lat)),this}getCenter(){return new na((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new na(this.getWest(),this.getNorth())}getSouthEast(){return new na(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(nt){const{lng:lt,lat:dt}=na.convert(nt);let ft=this._sw.lng<=lt&&lt<=this._ne.lng;return this._sw.lng>this._ne.lng&&(ft=this._sw.lng>=lt&&lt>=this._ne.lng),this._sw.lat<=dt&&dt<=this._ne.lat&&ft}static convert(nt){return!nt||nt instanceof pm?nt:new pm(nt)}}var RS={};(function(ot,nt){(function(lt){function dt(mt,yt,Et){var At=ft(256*mt,256*(yt=Math.pow(2,Et)-yt-1),Et),Ct=ft(256*(mt+1),256*(yt+1),Et);return At[0]+","+At[1]+","+Ct[0]+","+Ct[1]}function ft(mt,yt,Et){var At=2*Math.PI*6378137/256/Math.pow(2,Et);return[mt*At-2*Math.PI*6378137/2,yt*At-2*Math.PI*6378137/2]}lt.getURL=function(mt,yt,Et,At,Ct,Lt){return Lt=Lt||{},mt+"?"+["bbox="+dt(Et,At,Ct),"format="+(Lt.format||"image/png"),"service="+(Lt.service||"WMS"),"version="+(Lt.version||"1.1.1"),"request="+(Lt.request||"GetMap"),"srs="+(Lt.srs||"EPSG:3857"),"width="+(Lt.width||256),"height="+(Lt.height||256),"layers="+yt].join("&")},lt.getTileBBox=dt,lt.getMercCoords=ft,Object.defineProperty(lt,"__esModule",{value:!0})})(nt)})(0,RS);var BC=RS;class wy{constructor(nt,lt,dt){this.z=nt,this.x=lt,this.y=dt,this.key=I0(0,nt,nt,lt,dt)}equals(nt){return this.z===nt.z&&this.x===nt.x&&this.y===nt.y}url(nt,lt){const dt=BC.getTileBBox(this.x,this.y,this.z),ft=function(mt,yt,Et){let At,Ct="";for(let Lt=mt;Lt>0;Lt--)At=1<<Lt-1,Ct+=(yt&At?1:0)+(Et&At?2:0);return Ct}(this.z,this.x,this.y);return nt[(this.x+this.y)%nt.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(lt==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ft).replace("{bbox-epsg-3857}",dt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class IS{constructor(nt,lt){this.wrap=nt,this.canonical=lt,this.key=I0(nt,lt.z,lt.z,lt.x,lt.y)}}class js{constructor(nt,lt,dt,ft,mt){this.overscaledZ=nt,this.wrap=lt,this.canonical=new wy(dt,+ft,+mt),this.key=lt===0&&nt===dt?this.canonical.key:I0(lt,nt,dt,ft,mt)}equals(nt){return this.overscaledZ===nt.overscaledZ&&this.wrap===nt.wrap&&this.canonical.equals(nt.canonical)}scaledTo(nt){const lt=this.canonical.z-nt;return nt>this.canonical.z?new js(nt,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new js(nt,this.wrap,nt,this.canonical.x>>lt,this.canonical.y>>lt)}calculateScaledKey(nt,lt=!0){if(this.overscaledZ===nt&&lt)return this.key;if(nt>this.canonical.z)return I0(this.wrap*+lt,nt,this.canonical.z,this.canonical.x,this.canonical.y);{const dt=this.canonical.z-nt;return I0(this.wrap*+lt,nt,nt,this.canonical.x>>dt,this.canonical.y>>dt)}}isChildOf(nt){if(nt.wrap!==this.wrap)return!1;const lt=this.canonical.z-nt.canonical.z;return nt.overscaledZ===0||nt.overscaledZ<this.overscaledZ&&nt.canonical.z<this.canonical.z&&nt.canonical.x===this.canonical.x>>lt&&nt.canonical.y===this.canonical.y>>lt}children(nt){if(this.overscaledZ>=nt)return[new js(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const lt=this.canonical.z+1,dt=2*this.canonical.x,ft=2*this.canonical.y;return[new js(lt,this.wrap,lt,dt,ft),new js(lt,this.wrap,lt,dt+1,ft),new js(lt,this.wrap,lt,dt,ft+1),new js(lt,this.wrap,lt,dt+1,ft+1)]}isLessThan(nt){return this.wrap<nt.wrap||!(this.wrap>nt.wrap)&&(this.overscaledZ<nt.overscaledZ||!(this.overscaledZ>nt.overscaledZ)&&(this.canonical.x<nt.canonical.x||!(this.canonical.x>nt.canonical.x)&&this.canonical.y<nt.canonical.y))}wrapped(){return new js(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(nt){return new js(this.overscaledZ,nt,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new IS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function I0(ot,nt,lt,dt,ft){const mt=1<<Math.min(lt,22);let yt=mt*(ft%mt)+dt%mt;return ot&&lt<22&&(yt+=mt*mt*((ot<0?-2*ot-1:2*ot)%(1<<2*(22-lt)))),16*(32*yt+lt)+(nt-lt)}const zC=[ot=>{let nt=ot.canonical.x-1,lt=ot.wrap;return nt<0&&(nt=(1<<ot.canonical.z)-1,lt--),new js(ot.overscaledZ,lt,ot.canonical.z,nt,ot.canonical.y)},ot=>{let nt=ot.canonical.x+1,lt=ot.wrap;return nt===1<<ot.canonical.z&&(nt=0,lt++),new js(ot.overscaledZ,lt,ot.canonical.z,nt,ot.canonical.y)},ot=>new js(ot.overscaledZ,ot.wrap,ot.canonical.z,ot.canonical.x,(ot.canonical.y===0?1<<ot.canonical.z:ot.canonical.y)-1),ot=>new js(ot.overscaledZ,ot.wrap,ot.canonical.z,ot.canonical.x,ot.canonical.y===(1<<ot.canonical.z)-1?0:ot.canonical.y+1)];Wr(wy,"CanonicalTileID"),Wr(js,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const VC=0,UC=25.5;function Ww(ot){return Gw*Math.cos(ot*Math.PI/180)}function ep(ot){return(180+ot)/360}function tp(ot){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ot*Math.PI/360)))/360}function Dl(ot,nt){return ot/Ww(nt)}function Zl(ot){return 360*ot-180}function Ws(ot){return 360/Math.PI*Math.atan(Math.exp((180-360*ot)*Math.PI/180))-90}function $S(ot,nt){return ot*Ww(Ws(nt))}const Cs=85.051129;function MS(ot){return Math.cos(zo(jo(ot,-Cs,Cs)))}function Ey(ot,nt){const lt=jo(nt,VC,UC),dt=Math.pow(2,lt);return MS(ot)*Gw/(512*dt)}function OS(ot){return 1/Math.cos(ot*Math.PI/180)}function W_(ot,nt=0){const lt=Math.exp(Math.PI*(1-(ot.y+nt/Ln)/(1<<ot.z)*2));return 80150034*lt/(lt*lt+1)/Ln/(1<<ot.z)}class Al{constructor(nt,lt,dt=0){this.x=+nt,this.y=+lt,this.z=+dt}static fromLngLat(nt,lt=0){const dt=na.convert(nt);return new Al(ep(dt.lng),tp(dt.lat),Dl(lt,dt.lat))}toLngLat(){return new na(Zl(this.x),Ws(this.y))}toAltitude(){return $S(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Gw*OS(Ws(this.y))}}function Hw(ot,nt,lt,dt,ft,mt,yt,Et,At){const Ct=(nt+dt)/2,Lt=(lt+ft)/2,Bt=new Vn(Ct,Lt);Et(Bt),function(zt,Wt,qt,Xt,Jt,nr){const gr=qt-Jt,pr=Xt-nr;return Math.abs((Xt-Wt)*gr-(qt-zt)*pr)/Math.hypot(gr,pr)}(Bt.x,Bt.y,mt.x,mt.y,yt.x,yt.y)>=At?(Hw(ot,nt,lt,Ct,Lt,mt,Bt,Et,At),Hw(ot,Ct,Lt,dt,ft,Bt,yt,Et,At)):ot.push(yt)}function jS(ot,nt,lt){let dt=ot[0],ft=dt.x,mt=dt.y;nt(dt);const yt=[dt];for(let Et=1;Et<ot.length;Et++){const At=ot[Et],{x:Ct,y:Lt}=At;nt(At),Hw(yt,ft,mt,Ct,Lt,dt,At,nt,lt),ft=Ct,mt=Lt,dt=At}return yt}function Zw(ot,nt,lt,dt){if(dt(nt,lt)){const ft=nt.add(lt)._mult(.5);Zw(ot,nt,ft,dt),Zw(ot,ft,lt,dt)}else ot.push(lt)}function GC(ot,nt){let lt=ot[0];const dt=[lt];for(let ft=1;ft<ot.length;ft++){const mt=ot[ft];Zw(dt,lt,mt,nt),lt=mt}return dt}const qw=Math.pow(2,14)-1,DS=-qw-1;function WC(ot,nt){const lt=Math.round(ot.x*nt),dt=Math.round(ot.y*nt);return ot.x=jo(lt,DS,qw),ot.y=jo(dt,DS,qw),(lt<ot.x||lt>ot.x+1||dt<ot.y||dt>ot.y+1)&&Ts("Geometry exceeds allowed extent, reduce your vector tile buffer size"),ot}function Ou(ot,nt,lt){const dt=ot.loadGeometry(),ft=ot.extent,mt=Ln/ft;if(nt&&lt&&lt.projection.isReprojectedInTileSpace){const yt=1<<nt.z,{scale:Et,x:At,y:Ct,projection:Lt}=lt,Bt=zt=>{const Wt=Zl((nt.x+zt.x/ft)/yt),qt=Ws((nt.y+zt.y/ft)/yt),Xt=Lt.project(Wt,qt);zt.x=(Xt.x*Et-At)*ft,zt.y=(Xt.y*Et-Ct)*ft};for(let zt=0;zt<dt.length;zt++)if(ot.type!==1)dt[zt]=jS(dt[zt],Bt,1);else{const Wt=[];for(const qt of dt[zt])qt.x<0||qt.x>=ft||qt.y<0||qt.y>=ft||(Bt(qt),Wt.push(qt));dt[zt]=Wt}}for(const yt of dt)for(const Et of yt)WC(Et,mt);return dt}function Rp(ot,nt){return{type:ot.type,id:ot.id,properties:ot.properties,geometry:nt?Ou(ot):[]}}function H_(ot,nt,lt,dt,ft){ot.emplaceBack(2*nt+(dt+1)/2,2*lt+(ft+1)/2)}function Z_(ot,nt,lt){ot.emplaceBack(nt.x,nt.y,nt.z,lt[0]*16384,lt[1]*16384,lt[2]*16384)}class Kw{constructor(nt){this.zoom=nt.zoom,this.overscaling=nt.overscaling,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.index=nt.index,this.hasPattern=!1,this.projection=nt.projection,this.layoutVertexArray=new $u,this.indexArray=new Fs,this.segments=new ms,this.programConfigurations=new fm(nt.layers,{zoom:nt.zoom,lut:nt.lut}),this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id)}updateFootprints(nt,lt){}populate(nt,lt,dt,ft){const mt=this.layers[0],yt=[];let Et=null;mt.type==="circle"&&(Et=mt.layout.get("circle-sort-key"));for(const{feature:Ct,id:Lt,index:Bt,sourceLayerIndex:zt}of nt){const Wt=this.layers[0]._featureFilter.needGeometry,qt=Rp(Ct,Wt);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),qt,dt))continue;const Xt=Et?Et.evaluate(qt,{},dt):void 0,Jt={id:Lt,properties:Ct.properties,type:Ct.type,sourceLayerIndex:zt,index:Bt,geometry:Wt?qt.geometry:Ou(Ct,dt,ft),patterns:{},sortKey:Xt};yt.push(Jt)}Et&&yt.sort((Ct,Lt)=>Ct.sortKey-Lt.sortKey);let At=null;ft.projection.name==="globe"&&(this.globeExtVertexArray=new B_,At=ft.projection);for(const Ct of yt){const{geometry:Lt,index:Bt,sourceLayerIndex:zt}=Ct,Wt=nt[Bt].feature;this.addFeature(Ct,Lt,Bt,lt.availableImages,dt,At,lt.brightness),lt.featureIndex.insert(Wt,Lt,Bt,zt,this.index)}}update(nt,lt,dt,ft,mt){const yt=Object.keys(nt).length!==0;yt&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(nt,lt,yt?this.stateDependentLayers:this.layers,dt,ft,mt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(nt){this.uploaded||(this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,CC.members),this.indexBuffer=nt.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=nt.createVertexBuffer(this.globeExtVertexArray,kC.members))),this.programConfigurations.upload(nt),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(nt,lt,dt,ft,mt,yt,Et){for(const At of lt)for(const Ct of At){const Lt=Ct.x,Bt=Ct.y;if(Lt<0||Lt>=Ln||Bt<0||Bt>=Ln)continue;if(yt){const qt=yt.projectTilePoint(Lt,Bt,mt),Xt=yt.upVector(mt,Lt,Bt),Jt=this.globeExtVertexArray;Z_(Jt,qt,Xt),Z_(Jt,qt,Xt),Z_(Jt,qt,Xt),Z_(Jt,qt,Xt)}const zt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,nt.sortKey),Wt=zt.vertexLength;H_(this.layoutVertexArray,Lt,Bt,-1,-1),H_(this.layoutVertexArray,Lt,Bt,1,-1),H_(this.layoutVertexArray,Lt,Bt,1,1),H_(this.layoutVertexArray,Lt,Bt,-1,1),this.indexArray.emplaceBack(Wt,Wt+1,Wt+2),this.indexArray.emplaceBack(Wt,Wt+2,Wt+3),zt.vertexLength+=4,zt.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,nt,dt,{},ft,mt,Et)}}function Yw(ot,nt){for(let lt=0;lt<ot.length;lt++)if(mm(nt,ot[lt]))return!0;for(let lt=0;lt<nt.length;lt++)if(mm(ot,nt[lt]))return!0;return!!Xw(ot,nt)}function HC(ot,nt,lt){return!!mm(ot,nt)||!!Jw(nt,ot,lt)}function LS(ot,nt){if(ot.length===1)return FS(nt,ot[0]);for(let lt=0;lt<nt.length;lt++){const dt=nt[lt];for(let ft=0;ft<dt.length;ft++)if(mm(ot,dt[ft]))return!0}for(let lt=0;lt<ot.length;lt++)if(FS(nt,ot[lt]))return!0;for(let lt=0;lt<nt.length;lt++)if(Xw(ot,nt[lt]))return!0;return!1}function ZC(ot,nt,lt){if(ot.length>1){if(Xw(ot,nt))return!0;for(let dt=0;dt<nt.length;dt++)if(Jw(nt[dt],ot,lt))return!0}for(let dt=0;dt<ot.length;dt++)if(Jw(ot[dt],nt,lt))return!0;return!1}function Xw(ot,nt){if(ot.length===0||nt.length===0)return!1;for(let lt=0;lt<ot.length-1;lt++){const dt=ot[lt],ft=ot[lt+1];for(let mt=0;mt<nt.length-1;mt++)if(qC(dt,ft,nt[mt],nt[mt+1]))return!0}return!1}function qC(ot,nt,lt,dt){return Zu(ot,lt,dt)!==Zu(nt,lt,dt)&&Zu(ot,nt,lt)!==Zu(ot,nt,dt)}function Jw(ot,nt,lt){const dt=lt*lt;if(nt.length===1)return ot.distSqr(nt[0])<dt;for(let ft=1;ft<nt.length;ft++)if(NS(ot,nt[ft-1],nt[ft])<dt)return!0;return!1}function NS(ot,nt,lt){const dt=nt.distSqr(lt);if(dt===0)return ot.distSqr(nt);const ft=((ot.x-nt.x)*(lt.x-nt.x)+(ot.y-nt.y)*(lt.y-nt.y))/dt;return ot.distSqr(ft<0?nt:ft>1?lt:lt.sub(nt)._mult(ft)._add(nt))}function FS(ot,nt){let lt,dt,ft,mt=!1;for(let yt=0;yt<ot.length;yt++){lt=ot[yt];for(let Et=0,At=lt.length-1;Et<lt.length;At=Et++)dt=lt[Et],ft=lt[At],dt.y>nt.y!=ft.y>nt.y&&nt.x<(ft.x-dt.x)*(nt.y-dt.y)/(ft.y-dt.y)+dt.x&&(mt=!mt)}return mt}function mm(ot,nt){let lt=!1;for(let dt=0,ft=ot.length-1;dt<ot.length;ft=dt++){const mt=ot[dt],yt=ot[ft];mt.y>nt.y!=yt.y>nt.y&&nt.x<(yt.x-mt.x)*(nt.y-mt.y)/(yt.y-mt.y)+mt.x&&(lt=!lt)}return lt}function BS(ot,nt,lt,dt,ft){for(const yt of ot)if(nt<=yt.x&&lt<=yt.y&&dt>=yt.x&&ft>=yt.y)return!0;const mt=[new Vn(nt,lt),new Vn(nt,ft),new Vn(dt,ft),new Vn(dt,lt)];if(ot.length>2){for(const yt of mt)if(mm(ot,yt))return!0}for(let yt=0;yt<ot.length-1;yt++)if(KC(ot[yt],ot[yt+1],mt))return!0;return!1}function KC(ot,nt,lt){const dt=lt[0],ft=lt[2];if(ot.x<dt.x&&nt.x<dt.x||ot.x>ft.x&&nt.x>ft.x||ot.y<dt.y&&nt.y<dt.y||ot.y>ft.y&&nt.y>ft.y)return!1;const mt=Zu(ot,nt,lt[0]);return mt!==Zu(ot,nt,lt[1])||mt!==Zu(ot,nt,lt[2])||mt!==Zu(ot,nt,lt[3])}function $0(ot,nt,lt,dt,ft,mt){let yt=nt.y-ot.y,Et=ot.x-nt.x;if(mt=mt||0){const At=yt*yt+Et*Et;if(At===0)return!0;const Ct=Math.sqrt(At);yt/=Ct,Et/=Ct}return!((lt.x-ot.x)*yt+(lt.y-ot.y)*Et-mt<0||(dt.x-ot.x)*yt+(dt.y-ot.y)*Et-mt<0||(ft.x-ot.x)*yt+(ft.y-ot.y)*Et-mt<0)}function Qw(ot,nt,lt,dt,ft,mt,yt){return!($0(ot,nt,dt,ft,mt,yt)||$0(nt,lt,dt,ft,mt,yt)||$0(lt,ot,dt,ft,mt,yt)||$0(dt,ft,ot,nt,lt,yt)||$0(ft,mt,ot,nt,lt,yt)||$0(mt,dt,ot,nt,lt,yt))}function M0(ot,nt,lt){const dt=nt.paint.get(ot).value;return dt.kind==="constant"?dt.value:lt.programConfigurations.get(nt.id).getMaxValue(ot)}function q_(ot){return Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1])}function zS(ot,nt,lt,dt,ft){if(!nt[0]&&!nt[1])return ot;const mt=Vn.convert(nt)._mult(ft);lt==="viewport"&&mt._rotate(-dt);const yt=[];for(let Et=0;Et<ot.length;Et++)yt.push(ot[Et].sub(mt));return yt}function VS(ot,nt,lt,dt){const ft=Vn.convert(ot)._mult(dt);return nt==="viewport"&&ft._rotate(-lt),ft}let US,GS;Wr(Kw,"CircleBucket",{omit:["layers"]});class eE{constructor(nt,lt){this.pos=nt,this.dir=lt}intersectsPlane(nt,lt,dt){const ft=at.$.dot(lt,this.dir);if(Math.abs(ft)<1e-6)return!1;const mt=((nt[0]-this.pos[0])*lt[0]+(nt[1]-this.pos[1])*lt[1]+(nt[2]-this.pos[2])*lt[2])/ft;return dt[0]=this.pos[0]+this.dir[0]*mt,dt[1]=this.pos[1]+this.dir[1]*mt,dt[2]=this.pos[2]+this.dir[2]*mt,!0}closestPointOnSphere(nt,lt,dt){if(at.$.equals(this.pos,nt)||lt===0)return dt[0]=dt[1]=dt[2]=0,!1;const[ft,mt,yt]=this.dir,Et=this.pos[0]-nt[0],At=this.pos[1]-nt[1],Ct=this.pos[2]-nt[2],Lt=ft*ft+mt*mt+yt*yt,Bt=2*(Et*ft+At*mt+Ct*yt),zt=Bt*Bt-4*Lt*(Et*Et+At*At+Ct*Ct-lt*lt);if(zt<0){const Wt=Math.max(-Bt/2,0),qt=Et+ft*Wt,Xt=At+mt*Wt,Jt=Ct+yt*Wt,nr=Math.hypot(qt,Xt,Jt);return dt[0]=qt*lt/nr,dt[1]=Xt*lt/nr,dt[2]=Jt*lt/nr,!1}{const Wt=(-Bt-Math.sqrt(zt))/(2*Lt);if(Wt<0){const qt=Math.hypot(Et,At,Ct);return dt[0]=Et*lt/qt,dt[1]=At*lt/qt,dt[2]=Ct*lt/qt,!1}return dt[0]=Et+ft*Wt,dt[1]=At+mt*Wt,dt[2]=Ct+yt*Wt,!0}}}class tE{constructor(nt,lt,dt,ft,mt){this.TL=nt,this.TR=lt,this.BR=dt,this.BL=ft,this.horizon=mt}static fromInvProjectionMatrix(nt,lt,dt){const ft=[-1,1,1],mt=[1,1,1],yt=[1,-1,1],Et=[-1,-1,1],At=at.$.transformMat4(ft,ft,nt),Ct=at.$.transformMat4(mt,mt,nt),Lt=at.$.transformMat4(yt,yt,nt),Bt=at.$.transformMat4(Et,Et,nt);return new tE(At,Ct,Lt,Bt,lt/dt)}}function iv(ot,nt,lt){let dt=1/0,ft=-1/0;const mt=[];for(const yt of ot){at.$.sub(mt,yt,nt);const Et=at.$.dot(mt,lt);dt=Math.min(dt,Et),ft=Math.max(ft,Et)}return[dt,ft]}function WS(ot,nt){let lt=!0;for(let dt=0;dt<ot.planes.length;dt++){const ft=ot.planes[dt];let mt=0;for(let yt=0;yt<nt.length;yt++)mt+=at.$.dot(ft,nt[yt])+ft[3]>=0;if(mt===0)return 0;mt!==nt.length&&(lt=!1)}return lt?2:1}function HS(ot,nt){for(const lt of ot.projections){const dt=iv(nt,ot.points[0],lt.axis);if(lt.projection[1]<dt[0]||lt.projection[0]>dt[1])return 0}return 1}function ZS(ot,nt){let lt=0;const dt=[0,0,0,0];for(let ft=0;ft<ot.length;ft++)dt[0]=ot[ft][0],dt[1]=ot[ft][1],dt[2]=ot[ft][2],dt[3]=1,at.aB.dot(dt,nt)>=0&&lt++;return lt}class rE{constructor(nt,lt){this.points=nt||new Array(8).fill([0,0,0]),this.planes=lt||new Array(6).fill([0,0,0,0]),this.bounds=fs.fromPoints(this.points),this.projections=[],this.frustumEdges=[at.$.sub([],this.points[2],this.points[3]),at.$.sub([],this.points[0],this.points[3]),at.$.sub([],this.points[4],this.points[0]),at.$.sub([],this.points[5],this.points[1]),at.$.sub([],this.points[6],this.points[2]),at.$.sub([],this.points[7],this.points[3])];for(const dt of this.frustumEdges){const ft=[0,-dt[2],dt[1]],mt=[dt[2],0,-dt[0]];this.projections.push({axis:ft,projection:iv(this.points,this.points[0],ft)}),this.projections.push({axis:mt,projection:iv(this.points,this.points[0],mt)})}}static fromInvProjectionMatrix(nt,lt,dt,ft){const mt=Math.pow(2,dt),yt=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(Ct=>{const Lt=at.aB.transformMat4([],Ct,nt),Bt=1/Lt[3]/lt*mt;return at.aB.mul(Lt,Lt,[Bt,Bt,ft?1/Lt[3]:Bt,Bt])}),Et=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(Ct=>{const Lt=at.$.sub([],yt[Ct[0]],yt[Ct[1]]),Bt=at.$.sub([],yt[Ct[2]],yt[Ct[1]]),zt=at.$.normalize([],at.$.cross([],Lt,Bt)),Wt=-at.$.dot(zt,yt[Ct[1]]);return zt.concat(Wt)}),At=[];for(let Ct=0;Ct<yt.length;Ct++)At.push([yt[Ct][0],yt[Ct][1],yt[Ct][2]]);return new rE(At,Et)}intersectsPrecise(nt,lt,dt){for(let ft=0;ft<lt.length;ft++)if(!ZS(nt,lt[ft]))return 0;for(let ft=0;ft<this.planes.length;ft++)if(!ZS(nt,this.planes[ft]))return 0;for(const ft of dt)for(const mt of this.frustumEdges){const yt=at.$.cross([],ft,mt),Et=at.$.length(yt);if(Et===0)continue;at.$.scale(yt,yt,1/Et);const At=iv(this.points,this.points[0],yt),Ct=iv(nt,this.points[0],yt);if(At[0]>Ct[1]||Ct[0]>At[1])return 0}return 1}containsPoint(nt){for(const lt of this.planes){const dt=lt[3];if(at.$.dot([lt[0],lt[1],lt[2]],nt)+dt<0)return!1}return!0}}class fs{static fromPoints(nt){const lt=[1/0,1/0,1/0],dt=[-1/0,-1/0,-1/0];for(const ft of nt)at.$.min(lt,lt,ft),at.$.max(dt,dt,ft);return new fs(lt,dt)}static fromTileIdAndHeight(nt,lt,dt){const ft=1<<nt.canonical.z,mt=nt.canonical.x,yt=nt.canonical.y;return new fs([mt/ft,yt/ft,lt],[(mt+1)/ft,(yt+1)/ft,dt])}static applyTransform(nt,lt){const dt=nt.getCorners();for(let ft=0;ft<dt.length;++ft)at.$.transformMat4(dt[ft],dt[ft],lt);return fs.fromPoints(dt)}static applyTransformFast(nt,lt){const dt=[lt[12],lt[13],lt[14]],ft=[...dt];for(let mt=0;mt<3;mt++)for(let yt=0;yt<3;yt++){const Et=lt[4*yt+mt],At=Et*nt.min[yt],Ct=Et*nt.max[yt];dt[mt]+=Math.min(At,Ct),ft[mt]+=Math.max(At,Ct)}return new fs(dt,ft)}static projectAabbCorners(nt,lt){const dt=nt.getCorners();for(let ft=0;ft<dt.length;++ft)at.$.transformMat4(dt[ft],dt[ft],lt);return dt}constructor(nt,lt){this.min=nt,this.max=lt,this.center=at.$.scale([],at.$.add([],this.min,this.max),.5)}quadrant(nt){const lt=[nt%2==0,nt<2],dt=at.$.clone(this.min),ft=at.$.clone(this.max);for(let mt=0;mt<lt.length;mt++)dt[mt]=lt[mt]?this.min[mt]:this.center[mt],ft[mt]=lt[mt]?this.center[mt]:this.max[mt];return ft[2]=this.max[2],new fs(dt,ft)}distanceX(nt){return Math.max(Math.min(this.max[0],nt[0]),this.min[0])-nt[0]}distanceY(nt){return Math.max(Math.min(this.max[1],nt[1]),this.min[1])-nt[1]}distanceZ(nt){return Math.max(Math.min(this.max[2],nt[2]),this.min[2])-nt[2]}getCorners(){const nt=this.min,lt=this.max;return[[nt[0],nt[1],nt[2]],[lt[0],nt[1],nt[2]],[lt[0],lt[1],nt[2]],[nt[0],lt[1],nt[2]],[nt[0],nt[1],lt[2]],[lt[0],nt[1],lt[2]],[lt[0],lt[1],lt[2]],[nt[0],lt[1],lt[2]]]}intersects(nt){return this.intersectsAabb(nt.bounds)?WS(nt,this.getCorners()):0}intersectsFlat(nt){return this.intersectsAabb(nt.bounds)?WS(nt,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(nt,lt){return lt||this.intersects(nt)?HS(nt,this.getCorners()):0}intersectsPreciseFlat(nt,lt){return lt||this.intersectsFlat(nt)?HS(nt,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(nt){for(let lt=0;lt<3;++lt)if(this.min[lt]>nt.max[lt]||nt.min[lt]>this.max[lt])return!1;return!0}intersectsAabbXY(nt){return!(this.min[0]>nt.max[0]||nt.min[0]>this.max[0]||this.min[1]>nt.max[1]||nt.min[1]>this.max[1])}encapsulate(nt){for(let lt=0;lt<3;lt++)this.min[lt]=Math.min(this.min[lt],nt.min[lt]),this.max[lt]=Math.max(this.max[lt],nt.max[lt])}encapsulatePoint(nt){for(let lt=0;lt<3;lt++)this.min[lt]=Math.min(this.min[lt],nt[lt]),this.max[lt]=Math.max(this.max[lt],nt[lt])}closestPoint(nt){return[Math.max(Math.min(this.max[0],nt[0]),this.min[0]),Math.max(Math.min(this.max[1],nt[1]),this.min[1]),Math.max(Math.min(this.max[2],nt[2]),this.min[2])]}}Wr(fs,"Aabb");const YC=ba([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:K_}=YC,qS=ba([{name:"a_pos_3",components:3,type:"Int16"}]);var ov=ba([{name:"a_pos",type:"Int16",components:2}]);function Y_(ot){return ot*Ol/R0}const XC=[new fs([yu,yu,yu],[xu,xu,xu]),new fs([yu,yu,yu],[0,0,xu]),new fs([0,yu,yu],[xu,0,xu]),new fs([yu,0,yu],[0,xu,xu]),new fs([0,0,yu],[xu,xu,xu])];function KS(ot,nt,lt,dt=!0){const ft=at.$.scale([],ot._camera.position,ot.worldSize),mt=[nt,lt,1,1];at.aB.transformMat4(mt,mt,ot.pixelMatrixInverse),at.aB.scale(mt,mt,1/mt[3]);const yt=at.$.sub([],mt,ft),Et=at.$.normalize([],yt),At=ot.globeMatrix,Ct=[At[12],At[13],At[14]],Lt=at.$.sub([],Ct,ft),Bt=at.$.length(Lt),zt=at.$.normalize([],Lt),Wt=ot.worldSize/(2*Math.PI),qt=at.$.dot(zt,Et),Xt=Math.asin(Wt/Bt);if(Xt<Math.acos(qt)){if(!dt)return null;const Qr=[],yn=[];at.$.scale(Qr,Et,Bt/qt),at.$.normalize(yn,at.$.sub(yn,Qr,Lt)),at.$.normalize(Et,at.$.add(Et,Lt,at.$.scale(Et,yn,Math.tan(Xt)*Bt)))}const Jt=[];new eE(ft,Et).closestPointOnSphere(Ct,Wt,Jt);const nr=at.$.normalize([],Yu(At,0)),gr=at.$.normalize([],Yu(At,1)),pr=at.$.normalize([],Yu(At,2)),xr=at.$.dot(nr,Jt),Pr=at.$.dot(gr,Jt),Rr=at.$.dot(pr,Jt),Dr=Cl(Math.asin(-Pr/Wt));let Hr=Cl(Math.atan2(xr,Rr));Hr=ot.center.lng+function(Qr,yn){const Cn=(yn-Qr+180)%360-180;return Cn<-180?Cn+360:Cn}(ot.center.lng,Hr);const Jr=ep(Hr),an=jo(tp(Dr),0,1);return new Al(Jr,an)}class JC{constructor(nt,lt,dt){this.a=at.$.sub([],nt,dt),this.b=at.$.sub([],lt,dt),this.center=dt;const ft=at.$.normalize([],this.a),mt=at.$.normalize([],this.b);this.angle=Math.acos(at.$.dot(ft,mt))}}function nE(ot,nt){if(ot.angle===0)return null;let lt;return lt=ot.a[nt]===0?1/ot.angle*.5*Math.PI:1/ot.angle*Math.atan(ot.b[nt]/ot.a[nt]/Math.sin(ot.angle)-1/Math.tan(ot.angle)),lt<0||lt>1?null:function(dt,ft,mt,yt){const Et=Math.sin(mt);return dt*(Math.sin((1-yt)*mt)/Et)+ft*(Math.sin(yt*mt)/Et)}(ot.a[nt],ot.b[nt],ot.angle,jo(lt,0,1))+ot.center[nt]}function rp(ot){if(ot.z<=1)return XC[ot.z+2*ot.y+ot.x];const nt=iE(X_(ot));return fs.fromPoints(nt)}function Ip(ot,nt,lt){return at.$.scale(ot,ot,1-lt),at.$.scaleAndAdd(ot,ot,nt,lt)}function YS(ot,nt){const lt=$p(nt.zoom);if(lt===0)return rp(ot);const dt=X_(ot),ft=iE(dt),mt=ep(dt.getWest())*nt.worldSize,yt=ep(dt.getEast())*nt.worldSize,Et=tp(dt.getNorth())*nt.worldSize,At=tp(dt.getSouth())*nt.worldSize,Ct=[mt,Et,0],Lt=[yt,Et,0],Bt=[mt,At,0],zt=[yt,At,0],Wt=at.ae.invert([],nt.globeMatrix);return at.$.transformMat4(Ct,Ct,Wt),at.$.transformMat4(Lt,Lt,Wt),at.$.transformMat4(Bt,Bt,Wt),at.$.transformMat4(zt,zt,Wt),ft[0]=Ip(ft[0],Bt,lt),ft[1]=Ip(ft[1],zt,lt),ft[2]=Ip(ft[2],Lt,lt),ft[3]=Ip(ft[3],Ct,lt),fs.fromPoints(ft)}function XS(ot,nt,lt){for(const dt of ot)at.$.transformMat4(dt,dt,nt),at.$.scale(dt,dt,lt)}function JS(ot,nt,lt,dt){const ft=nt/ot.worldSize,mt=ot.globeMatrix;if(lt.z<=1){const Jr=rp(lt).getCorners();return XS(Jr,mt,ft),fs.fromPoints(Jr)}const yt=X_(lt,dt),Et=iE(yt,Ol+Y_(ot._tileCoverLift));XS(Et,mt,ft);const At=Number.MAX_VALUE,Ct=[-At,-At,-At],Lt=[At,At,At];if(yt.contains(ot.center)){for(const Qr of Et)at.$.min(Lt,Lt,Qr),at.$.max(Ct,Ct,Qr);Ct[2]=0;const Jr=ot.point,an=[Jr.x*ft,Jr.y*ft,0];return at.$.min(Lt,Lt,an),at.$.max(Ct,Ct,an),new fs(Lt,Ct)}if(ot._tileCoverLift>0){for(const Jr of Et)at.$.min(Lt,Lt,Jr),at.$.max(Ct,Ct,Jr);return new fs(Lt,Ct)}const Bt=[mt[12]*ft,mt[13]*ft,mt[14]*ft],zt=yt.getCenter(),Wt=jo(ot.center.lat,-Cs,Cs),qt=jo(zt.lat,-Cs,Cs),Xt=ep(ot.center.lng),Jt=tp(Wt);let nr=Xt-ep(zt.lng);const gr=Jt-tp(qt);nr>.5?nr-=1:nr<-.5&&(nr+=1);let pr=0;if(Math.abs(nr)>Math.abs(gr))pr=nr>=0?1:3;else{pr=gr>=0?0:2;const Jr=[mt[4]*ft,mt[5]*ft,mt[6]*ft],an=-Math.sin(zo(gr>=0?yt.getSouth():yt.getNorth()))*Ol;at.$.scaleAndAdd(Bt,Bt,Jr,an)}const xr=Et[pr],Pr=Et[(pr+1)%4],Rr=new JC(xr,Pr,Bt),Dr=[nE(Rr,0)||xr[0],nE(Rr,1)||xr[1],nE(Rr,2)||xr[2]],Hr=$p(ot.zoom);if(Hr>0){const Jr=function({x:Qr,y:yn,z:Cn},xn,$n,gn,En){const jn=1/(1<<Cn);let vn=Qr*jn,Bn=vn+jn,Mn=yn*jn,kn=Mn+jn,ao=0;const io=(vn+Bn)/2-gn;return io>.5?ao=-1:io<-.5&&(ao=1),vn=((vn+ao)*xn-(gn*=xn))*$n+gn,Bn=((Bn+ao)*xn-gn)*$n+gn,Mn=(Mn*xn-(En*=xn))*$n+En,kn=(kn*xn-En)*$n+En,[[vn,kn,0],[Bn,kn,0],[Bn,Mn,0],[vn,Mn,0]]}(lt,nt,ot._pixelsPerMercatorPixel,Xt,Jt);for(let Qr=0;Qr<Et.length;Qr++)Ip(Et[Qr],Jr[Qr],Hr);const an=at.$.add([],Jr[pr],Jr[(pr+1)%4]);at.$.scale(an,an,.5),Ip(Dr,an,Hr)}for(const Jr of Et)at.$.min(Lt,Lt,Jr),at.$.max(Ct,Ct,Jr);return Lt[2]=Math.min(xr[2],Pr[2]),at.$.min(Lt,Lt,Dr),at.$.max(Ct,Ct,Dr),new fs(Lt,Ct)}function X_({x:ot,y:nt,z:lt},dt=!1){const ft=1/(1<<lt),mt=new na(Zl(ot*ft),nt===(1<<lt)-1&&dt?-90:Ws((nt+1)*ft)),yt=new na(Zl((ot+1)*ft),nt===0&&dt?90:Ws(nt*ft));return new pm(mt,yt)}function iE(ot,nt=Ol){const lt=zo(ot.getNorth()),dt=zo(ot.getSouth()),ft=Math.cos(lt),mt=Math.cos(dt),yt=Math.sin(lt),Et=Math.sin(dt),At=ot.getWest(),Ct=ot.getEast();return[k0(mt,Et,At,nt),k0(mt,Et,Ct,nt),k0(ft,yt,Ct,nt),k0(ft,yt,At,nt)]}function av(ot,nt,lt,dt){const ft=1<<lt.z,mt=(ot/Ln+lt.x)/ft;return by(Ws((nt/Ln+lt.y)/ft),Zl(mt),dt)}function J_({min:ot,max:nt}){return FC/Math.max(nt[0]-ot[0],nt[1]-ot[1],nt[2]-ot[2])}const QS=new Float64Array(16);function sv(ot){const nt=J_(ot),lt=at.ae.fromScaling(QS,[nt,nt,nt]);return at.ae.translate(lt,lt,at.$.negate([],ot.min))}function oE(ot){const nt=at.ae.fromTranslation(QS,ot.min),lt=1/J_(ot);return at.ae.scale(nt,nt,[lt,lt,lt])}function aE(ot){const nt=Ln/(2*Math.PI);return ot/(2*Math.PI)/nt}function eT(ot,nt){return Ln/(512*Math.pow(2,ot))*J_(rp(nt))}function tT(ot,nt,lt,dt,ft){const mt=aE(lt),yt=[ot,nt,-lt/(2*Math.PI)],Et=at.ae.identity(new Float64Array(16));return at.ae.translate(Et,Et,yt),at.ae.scale(Et,Et,[mt,mt,mt]),at.ae.rotateX(Et,Et,zo(-ft)),at.ae.rotateY(Et,Et,zo(-dt)),Et}function $p(ot){return dx(Vw,kS,ot)}function rT(ot,nt){const lt=by(nt.lat,nt.lng),dt=function(mt){const yt=by(mt._center.lat,mt._center.lng),Et=at.$.fromValues(0,1,0);let At=at.$.cross([],Et,yt);const Ct=at.ae.fromRotation([],-mt.angle,yt);At=at.$.transformMat4(At,At,Ct),at.ae.fromRotation(Ct,-mt._pitch,At);const Lt=at.$.normalize([],yt);return at.$.scale(Lt,Lt,Y_(mt.cameraToCenterDistance/mt.pixelsPerMeter)),at.$.transformMat4(Lt,Lt,Ct),at.$.add([],yt,Lt)}(ot),ft=at.$.subtract([],dt,lt);return at.$.angle(ft,lt)}function sE(ot,nt){return rT(ot,nt)>Math.PI/2*1.01}const nT=zo(85),QC=Math.cos(nT),_k=Math.sin(nT),eR=at.ae.create(),iT=ot=>{const nt=[];return ot.paint.get("circle-pitch-alignment")==="map"&&nt.push("PITCH_WITH_MAP"),ot.paint.get("circle-pitch-scale")==="map"&&nt.push("SCALE_WITH_MAP"),nt};function oT(ot,nt,lt,dt,ft,mt,yt,Et,At){if(mt&&ot.queryGeometry.isAboveHorizon)return!1;mt&&(At*=ot.pixelToTileUnitsFactor);const Ct=ot.tileID.canonical,Lt=lt.projection.upVectorScale(Ct,lt.center.lat,lt.worldSize).metersToTile;for(const Bt of nt)for(const zt of Bt){const Wt=zt.add(Et),qt=ft&&lt.elevation?lt.elevation.exaggeration()*ft.getElevationAt(Wt.x,Wt.y,!0):0,Xt=lt.projection.projectTilePoint(Wt.x,Wt.y,Ct);if(qt>0){const pr=lt.projection.upVector(Ct,Wt.x,Wt.y);Xt.x+=pr[0]*Lt*qt,Xt.y+=pr[1]*Lt*qt,Xt.z+=pr[2]*Lt*qt}const Jt=mt?Wt:tR(Xt.x,Xt.y,Xt.z,dt),nr=mt?ot.tilespaceRays.map(pr=>nR(pr,qt)):ot.queryGeometry.screenGeometry,gr=at.aB.transformMat4([],[Xt.x,Xt.y,Xt.z,1],dt);if(!yt&&mt?At*=gr[3]/lt.cameraToCenterDistance:yt&&!mt&&(At*=lt.cameraToCenterDistance/gr[3]),mt){const pr=Ws((zt.y/Ln+Ct.y)/(1<<Ct.z));At/=lt.projection.pixelsPerMeter(pr,1)/Dl(1,pr)}if(HC(nr,Jt,At))return!0}return!1}function tR(ot,nt,lt,dt){const ft=at.aB.transformMat4([],[ot,nt,lt,1],dt);return new Vn(ft[0]/ft[3],ft[1]/ft[3])}const aT=at.$.fromValues(0,0,0),rR=at.$.fromValues(0,0,1);function nR(ot,nt){const lt=at.$.create();return aT[2]=nt,ot.intersectsPlane(aT,rR,lt),new Vn(lt[0],lt[1])}class sT extends Kw{}function lT(ot,{width:nt,height:lt},dt,ft){if(ft){if(ft instanceof Uint8ClampedArray)ft=new Uint8Array(ft.buffer);else if(ft.length!==nt*lt*dt)throw new RangeError("mismatched image size")}else ft=new Uint8Array(nt*lt*dt);return ot.width=nt,ot.height=lt,ot.data=ft,ot}function cT(ot,nt,lt){const{width:dt,height:ft}=nt;dt===ot.width&&ft===ot.height||(lE(ot,nt,{x:0,y:0},{x:0,y:0},{width:Math.min(ot.width,dt),height:Math.min(ot.height,ft)},lt,null),ot.width=dt,ot.height=ft,ot.data=nt.data)}function lE(ot,nt,lt,dt,ft,mt,yt,Et){if(ft.width===0||ft.height===0)return nt;if(ft.width>ot.width||ft.height>ot.height||lt.x>ot.width-ft.width||lt.y>ot.height-ft.height)throw new RangeError("out of range source coordinates for image copy");if(ft.width>nt.width||ft.height>nt.height||dt.x>nt.width-ft.width||dt.y>nt.height-ft.height)throw new RangeError("out of range destination coordinates for image copy");const At=ot.data,Ct=nt.data,Lt=mt===4&&Et;for(let Bt=0;Bt<ft.height;Bt++){const zt=((lt.y+Bt)*ot.width+lt.x)*mt,Wt=((dt.y+Bt)*nt.width+dt.x)*mt;if(Lt)for(let qt=0;qt<ft.width;qt++){const Xt=zt+qt*mt+3,Jt=Wt+qt*mt;Ct[Jt+0]=255,Ct[Jt+1]=255,Ct[Jt+2]=255,Ct[Jt+3]=At[Xt]}else if(yt)for(let qt=0;qt<ft.width;qt++){const Xt=zt+qt*mt,Jt=Wt+qt*mt,nr=At[Xt+3],gr=new ga(At[Xt+0]/255*nr,At[Xt+1]/255*nr,At[Xt+2]/255*nr,nr).toRenderColor(yt).toArray();Ct[Jt+0]=gr[0],Ct[Jt+1]=gr[1],Ct[Jt+2]=gr[2],Ct[Jt+3]=gr[3]}else for(let qt=0;qt<ft.width*mt;qt++)Ct[Wt+qt]=At[zt+qt]}return nt}Wr(sT,"HeatmapBucket",{omit:["layers"]});class gm{constructor(nt,lt){lT(this,nt,1,lt)}resize(nt){cT(this,new gm(nt),1)}clone(){return new gm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(nt,lt,dt,ft,mt){lE(nt,lt,dt,ft,mt,1,null)}}class lu{constructor(nt,lt){lT(this,nt,4,lt)}resize(nt){cT(this,new lu(nt),4)}replace(nt,lt){lt?this.data.set(nt):this.data=nt instanceof Uint8ClampedArray?new Uint8Array(nt.buffer):nt}clone(){return new lu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(nt,lt,dt,ft,mt,yt,Et){lE(nt,lt,dt,ft,mt,4,yt,Et)}}class uT{constructor(nt,lt){this.width=nt.width,this.height=nt.height,this.data=lt instanceof Uint8Array?new Float32Array(lt.buffer):lt}}let dT,hT,fT,pT;function lv(ot){const nt={},lt=ot.resolution||256,dt=ot.clips?ot.clips.length:1,ft=ot.image||new lu({width:lt,height:dt}),mt=(yt,Et,At)=>{nt[ot.evaluationKey]=At;const Ct=ot.expression.evaluate(nt);Ct&&(ft.data[yt+Et+0]=Math.floor(255*Ct.r/Ct.a),ft.data[yt+Et+1]=Math.floor(255*Ct.g/Ct.a),ft.data[yt+Et+2]=Math.floor(255*Ct.b/Ct.a),ft.data[yt+Et+3]=Math.floor(255*Ct.a))};if(ot.clips)for(let yt=0,Et=0;yt<dt;++yt,Et+=4*lt)for(let At=0,Ct=0;At<lt;At++,Ct+=4){const Lt=At/(lt-1),{start:Bt,end:zt}=ot.clips[yt];mt(Et,Ct,Bt*(1-Lt)+zt*Lt)}else for(let yt=0,Et=0;yt<lt;yt++,Et+=4)mt(0,Et,yt/(lt-1));return ft}Wr(gm,"AlphaImage"),Wr(lu,"RGBAImage");const iR=ba([{name:"a_pos",components:2,type:"Int16"}],4),{members:oR}=iR;function cv(ot,nt,lt=2){const dt=nt&&nt.length,ft=dt?nt[0]*lt:ot.length;let mt=mT(ot,0,ft,lt,!0);const yt=[];if(!mt||mt.next===mt.prev)return yt;let Et,At,Ct;if(dt&&(mt=function(Lt,Bt,zt,Wt){const qt=[];for(let Xt=0,Jt=Bt.length;Xt<Jt;Xt++){const nr=mT(Lt,Bt[Xt]*Wt,Xt<Jt-1?Bt[Xt+1]*Wt:Lt.length,Wt,!1);nr===nr.next&&(nr.steiner=!0),qt.push(fR(nr))}qt.sort(uR);for(let Xt=0;Xt<qt.length;Xt++)zt=dR(qt[Xt],zt);return zt}(ot,nt,mt,lt)),ot.length>80*lt){Et=1/0,At=1/0;let Lt=-1/0,Bt=-1/0;for(let zt=lt;zt<ft;zt+=lt){const Wt=ot[zt],qt=ot[zt+1];Wt<Et&&(Et=Wt),qt<At&&(At=qt),Wt>Lt&&(Lt=Wt),qt>Bt&&(Bt=qt)}Ct=Math.max(Lt-Et,Bt-At),Ct=Ct!==0?32767/Ct:0}return uv(mt,yt,lt,Et,At,Ct,0),yt}function mT(ot,nt,lt,dt,ft){let mt;if(ft===function(yt,Et,At,Ct){let Lt=0;for(let Bt=Et,zt=At-Ct;Bt<At;Bt+=Ct)Lt+=(yt[zt]-yt[Bt])*(yt[Bt+1]+yt[zt+1]),zt=Bt;return Lt}(ot,nt,lt,dt)>0)for(let yt=nt;yt<lt;yt+=dt)mt=xT(yt/dt|0,ot[yt],ot[yt+1],mt);else for(let yt=lt-dt;yt>=nt;yt-=dt)mt=xT(yt/dt|0,ot[yt],ot[yt+1],mt);return mt&&Q_(mt,mt.next)&&(hv(mt),mt=mt.next),mt}function Sy(ot,nt){if(!ot)return ot;nt||(nt=ot);let lt,dt=ot;do if(lt=!1,dt.steiner||!Q_(dt,dt.next)&&Ds(dt.prev,dt,dt.next)!==0)dt=dt.next;else{if(hv(dt),dt=nt=dt.prev,dt===dt.next)break;lt=!0}while(lt||dt!==nt);return nt}function uv(ot,nt,lt,dt,ft,mt,yt){if(!ot)return;!yt&&mt&&function(At,Ct,Lt,Bt){let zt=At;do zt.z===0&&(zt.z=cE(zt.x,zt.y,Ct,Lt,Bt)),zt.prevZ=zt.prev,zt.nextZ=zt.next,zt=zt.next;while(zt!==At);zt.prevZ.nextZ=null,zt.prevZ=null,function(Wt){let qt,Xt=1;do{let Jt,nr=Wt;Wt=null;let gr=null;for(qt=0;nr;){qt++;let pr=nr,xr=0;for(let Rr=0;Rr<Xt&&(xr++,pr=pr.nextZ,pr);Rr++);let Pr=Xt;for(;xr>0||Pr>0&&pr;)xr!==0&&(Pr===0||!pr||nr.z<=pr.z)?(Jt=nr,nr=nr.nextZ,xr--):(Jt=pr,pr=pr.nextZ,Pr--),gr?gr.nextZ=Jt:Wt=Jt,Jt.prevZ=gr,gr=Jt;nr=pr}gr.nextZ=null,Xt*=2}while(qt>1)}(zt)}(ot,dt,ft,mt);let Et=ot;for(;ot.prev!==ot.next;){const At=ot.prev,Ct=ot.next;if(mt?sR(ot,dt,ft,mt):aR(ot))nt.push(At.i,ot.i,Ct.i),hv(ot),ot=Ct.next,Et=Ct.next;else if((ot=Ct)===Et){yt?yt===1?uv(ot=lR(Sy(ot),nt),nt,lt,dt,ft,mt,2):yt===2&&cR(ot,nt,lt,dt,ft,mt):uv(Sy(ot),nt,lt,dt,ft,mt,1);break}}}function aR(ot){const nt=ot.prev,lt=ot,dt=ot.next;if(Ds(nt,lt,dt)>=0)return!1;const ft=nt.x,mt=lt.x,yt=dt.x,Et=nt.y,At=lt.y,Ct=dt.y,Lt=ft<mt?ft<yt?ft:yt:mt<yt?mt:yt,Bt=Et<At?Et<Ct?Et:Ct:At<Ct?At:Ct,zt=ft>mt?ft>yt?ft:yt:mt>yt?mt:yt,Wt=Et>At?Et>Ct?Et:Ct:At>Ct?At:Ct;let qt=dt.next;for(;qt!==nt;){if(qt.x>=Lt&&qt.x<=zt&&qt.y>=Bt&&qt.y<=Wt&&O0(ft,Et,mt,At,yt,Ct,qt.x,qt.y)&&Ds(qt.prev,qt,qt.next)>=0)return!1;qt=qt.next}return!0}function sR(ot,nt,lt,dt){const ft=ot.prev,mt=ot,yt=ot.next;if(Ds(ft,mt,yt)>=0)return!1;const Et=ft.x,At=mt.x,Ct=yt.x,Lt=ft.y,Bt=mt.y,zt=yt.y,Wt=Et<At?Et<Ct?Et:Ct:At<Ct?At:Ct,qt=Lt<Bt?Lt<zt?Lt:zt:Bt<zt?Bt:zt,Xt=Et>At?Et>Ct?Et:Ct:At>Ct?At:Ct,Jt=Lt>Bt?Lt>zt?Lt:zt:Bt>zt?Bt:zt,nr=cE(Wt,qt,nt,lt,dt),gr=cE(Xt,Jt,nt,lt,dt);let pr=ot.prevZ,xr=ot.nextZ;for(;pr&&pr.z>=nr&&xr&&xr.z<=gr;){if(pr.x>=Wt&&pr.x<=Xt&&pr.y>=qt&&pr.y<=Jt&&pr!==ft&&pr!==yt&&O0(Et,Lt,At,Bt,Ct,zt,pr.x,pr.y)&&Ds(pr.prev,pr,pr.next)>=0||(pr=pr.prevZ,xr.x>=Wt&&xr.x<=Xt&&xr.y>=qt&&xr.y<=Jt&&xr!==ft&&xr!==yt&&O0(Et,Lt,At,Bt,Ct,zt,xr.x,xr.y)&&Ds(xr.prev,xr,xr.next)>=0))return!1;xr=xr.nextZ}for(;pr&&pr.z>=nr;){if(pr.x>=Wt&&pr.x<=Xt&&pr.y>=qt&&pr.y<=Jt&&pr!==ft&&pr!==yt&&O0(Et,Lt,At,Bt,Ct,zt,pr.x,pr.y)&&Ds(pr.prev,pr,pr.next)>=0)return!1;pr=pr.prevZ}for(;xr&&xr.z<=gr;){if(xr.x>=Wt&&xr.x<=Xt&&xr.y>=qt&&xr.y<=Jt&&xr!==ft&&xr!==yt&&O0(Et,Lt,At,Bt,Ct,zt,xr.x,xr.y)&&Ds(xr.prev,xr,xr.next)>=0)return!1;xr=xr.nextZ}return!0}function lR(ot,nt){let lt=ot;do{const dt=lt.prev,ft=lt.next.next;!Q_(dt,ft)&&gT(dt,lt,lt.next,ft)&&dv(dt,ft)&&dv(ft,dt)&&(nt.push(dt.i,lt.i,ft.i),hv(lt),hv(lt.next),lt=ot=ft),lt=lt.next}while(lt!==ot);return Sy(lt)}function cR(ot,nt,lt,dt,ft,mt){let yt=ot;do{let Et=yt.next.next;for(;Et!==yt.prev;){if(yt.i!==Et.i&&pR(yt,Et)){let At=yT(yt,Et);return yt=Sy(yt,yt.next),At=Sy(At,At.next),uv(yt,nt,lt,dt,ft,mt,0),void uv(At,nt,lt,dt,ft,mt,0)}Et=Et.next}yt=yt.next}while(yt!==ot)}function uR(ot,nt){return ot.x-nt.x}function dR(ot,nt){const lt=function(ft,mt){let yt=mt;const Et=ft.x,At=ft.y;let Ct,Lt=-1/0;do{if(At<=yt.y&&At>=yt.next.y&&yt.next.y!==yt.y){const Xt=yt.x+(At-yt.y)*(yt.next.x-yt.x)/(yt.next.y-yt.y);if(Xt<=Et&&Xt>Lt&&(Lt=Xt,Ct=yt.x<yt.next.x?yt:yt.next,Xt===Et))return Ct}yt=yt.next}while(yt!==mt);if(!Ct)return null;const Bt=Ct,zt=Ct.x,Wt=Ct.y;let qt=1/0;yt=Ct;do{if(Et>=yt.x&&yt.x>=zt&&Et!==yt.x&&O0(At<Wt?Et:Lt,At,zt,Wt,At<Wt?Lt:Et,At,yt.x,yt.y)){const Xt=Math.abs(At-yt.y)/(Et-yt.x);dv(yt,ft)&&(Xt<qt||Xt===qt&&(yt.x>Ct.x||yt.x===Ct.x&&hR(Ct,yt)))&&(Ct=yt,qt=Xt)}yt=yt.next}while(yt!==Bt);return Ct}(ot,nt);if(!lt)return nt;const dt=yT(lt,ot);return Sy(dt,dt.next),Sy(lt,lt.next)}function hR(ot,nt){return Ds(ot.prev,ot,nt.prev)<0&&Ds(nt.next,ot,ot.next)<0}function cE(ot,nt,lt,dt,ft){return(ot=1431655765&((ot=858993459&((ot=252645135&((ot=16711935&((ot=(ot-lt)*ft|0)|ot<<8))|ot<<4))|ot<<2))|ot<<1))|(nt=1431655765&((nt=858993459&((nt=252645135&((nt=16711935&((nt=(nt-dt)*ft|0)|nt<<8))|nt<<4))|nt<<2))|nt<<1))<<1}function fR(ot){let nt=ot,lt=ot;do(nt.x<lt.x||nt.x===lt.x&&nt.y<lt.y)&&(lt=nt),nt=nt.next;while(nt!==ot);return lt}function O0(ot,nt,lt,dt,ft,mt,yt,Et){return(ft-yt)*(nt-Et)>=(ot-yt)*(mt-Et)&&(ot-yt)*(dt-Et)>=(lt-yt)*(nt-Et)&&(lt-yt)*(mt-Et)>=(ft-yt)*(dt-Et)}function pR(ot,nt){return ot.next.i!==nt.i&&ot.prev.i!==nt.i&&!function(lt,dt){let ft=lt;do{if(ft.i!==lt.i&&ft.next.i!==lt.i&&ft.i!==dt.i&&ft.next.i!==dt.i&&gT(ft,ft.next,lt,dt))return!0;ft=ft.next}while(ft!==lt);return!1}(ot,nt)&&(dv(ot,nt)&&dv(nt,ot)&&function(lt,dt){let ft=lt,mt=!1;const yt=(lt.x+dt.x)/2,Et=(lt.y+dt.y)/2;do ft.y>Et!=ft.next.y>Et&&ft.next.y!==ft.y&&yt<(ft.next.x-ft.x)*(Et-ft.y)/(ft.next.y-ft.y)+ft.x&&(mt=!mt),ft=ft.next;while(ft!==lt);return mt}(ot,nt)&&(Ds(ot.prev,ot,nt.prev)||Ds(ot,nt.prev,nt))||Q_(ot,nt)&&Ds(ot.prev,ot,ot.next)>0&&Ds(nt.prev,nt,nt.next)>0)}function Ds(ot,nt,lt){return(nt.y-ot.y)*(lt.x-nt.x)-(nt.x-ot.x)*(lt.y-nt.y)}function Q_(ot,nt){return ot.x===nt.x&&ot.y===nt.y}function gT(ot,nt,lt,dt){const ft=r1(Ds(ot,nt,lt)),mt=r1(Ds(ot,nt,dt)),yt=r1(Ds(lt,dt,ot)),Et=r1(Ds(lt,dt,nt));return ft!==mt&&yt!==Et||!(ft!==0||!e1(ot,lt,nt))||!(mt!==0||!e1(ot,dt,nt))||!(yt!==0||!e1(lt,ot,dt))||!(Et!==0||!e1(lt,nt,dt))}function e1(ot,nt,lt){return nt.x<=Math.max(ot.x,lt.x)&&nt.x>=Math.min(ot.x,lt.x)&&nt.y<=Math.max(ot.y,lt.y)&&nt.y>=Math.min(ot.y,lt.y)}function r1(ot){return ot>0?1:ot<0?-1:0}function dv(ot,nt){return Ds(ot.prev,ot,ot.next)<0?Ds(ot,nt,ot.next)>=0&&Ds(ot,ot.prev,nt)>=0:Ds(ot,nt,ot.prev)<0||Ds(ot,ot.next,nt)<0}function yT(ot,nt){const lt=uE(ot.i,ot.x,ot.y),dt=uE(nt.i,nt.x,nt.y),ft=ot.next,mt=nt.prev;return ot.next=nt,nt.prev=ot,lt.next=ft,ft.prev=lt,dt.next=lt,lt.prev=dt,mt.next=dt,dt.prev=mt,dt}function xT(ot,nt,lt,dt){const ft=uE(ot,nt,lt);return dt?(ft.next=dt.next,ft.prev=dt,dt.next.prev=ft,dt.next=ft):(ft.prev=ft,ft.next=ft),ft}function hv(ot){ot.next.prev=ot.prev,ot.prev.next=ot.next,ot.prevZ&&(ot.prevZ.nextZ=ot.nextZ),ot.nextZ&&(ot.nextZ.prevZ=ot.prevZ)}function uE(ot,nt,lt){return{i:ot,x:nt,y:lt,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function n1(ot,nt){const lt=ot.length;if(lt<=1)return[ot];const dt=[];let ft,mt;for(let yt=0;yt<lt;yt++){const Et=q1(ot[yt]);Et!==0&&(ot[yt].area=Math.abs(Et),mt===void 0&&(mt=Et<0),mt===Et<0?(ft&&dt.push(ft),ft=[ot[yt]]):ft.push(ot[yt]))}if(ft&&dt.push(ft),nt>1)for(let yt=0;yt<dt.length;yt++)dt[yt].length<=nt||(xa(dt[yt],nt,1,dt[yt].length-1,mR),dt[yt]=dt[yt].slice(0,nt));return dt}function mR(ot,nt){return nt.area-ot.area}function dE(ot,nt,lt){const dt=lt.patternDependencies;let ft=!1;for(const mt of nt){const yt=mt.paint.get(`${ot}-pattern`);yt.isConstant()||(ft=!0);const Et=yt.constantOr(null);Et&&(ft=!0,dt[Et]=!0)}return ft}function hE(ot,nt,lt,dt,ft){const mt=ft.patternDependencies;for(const yt of nt){const Et=yt.paint.get(`${ot}-pattern`).value;if(Et.kind!=="constant"){let At=Et.evaluate({zoom:dt},lt,{},ft.availableImages);At=At&&At.name?At.name:At,mt[At]=!0,lt.patterns[yt.id]=At}}return lt}class i1{constructor(nt){this.zoom=nt.zoom,this.overscaling=nt.overscaling,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.index=nt.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new $u,this.indexArray=new Fs,this.indexArray2=new dm,this.programConfigurations=new fm(nt.layers,{zoom:nt.zoom,lut:nt.lut}),this.segments=new ms,this.segments2=new ms,this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id),this.projection=nt.projection}updateFootprints(nt,lt){}populate(nt,lt,dt,ft){this.hasPattern=dE("fill",this.layers,lt);const mt=this.layers[0].layout.get("fill-sort-key"),yt=[];for(const{feature:Et,id:At,index:Ct,sourceLayerIndex:Lt}of nt){const Bt=this.layers[0]._featureFilter.needGeometry,zt=Rp(Et,Bt);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),zt,dt))continue;const Wt=mt?mt.evaluate(zt,{},dt,lt.availableImages):void 0,qt={id:At,properties:Et.properties,type:Et.type,sourceLayerIndex:Lt,index:Ct,geometry:Bt?zt.geometry:Ou(Et,dt,ft),patterns:{},sortKey:Wt};yt.push(qt)}mt&&yt.sort((Et,At)=>Et.sortKey-At.sortKey);for(const Et of yt){const{geometry:At,index:Ct,sourceLayerIndex:Lt}=Et;if(this.hasPattern){const Bt=hE("fill",this.layers,Et,this.zoom,lt);this.patternFeatures.push(Bt)}else this.addFeature(Et,At,Ct,dt,{},lt.availableImages,lt.brightness);lt.featureIndex.insert(nt[Ct].feature,At,Ct,Lt,this.index)}}update(nt,lt,dt,ft,mt){const yt=Object.keys(nt).length!==0;yt&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(nt,lt,yt?this.stateDependentLayers:this.layers,dt,ft,mt)}addFeatures(nt,lt,dt,ft,mt,yt){for(const Et of this.patternFeatures)this.addFeature(Et,Et.geometry,Et.index,lt,dt,ft,yt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(nt){this.uploaded||(this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,oR),this.indexBuffer=nt.createIndexBuffer(this.indexArray),this.indexBuffer2=nt.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(nt),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(nt,lt,dt,ft,mt,yt=[],Et){for(const At of n1(lt,500)){let Ct=0;for(const Xt of At)Ct+=Xt.length;const Lt=this.segments.prepareSegment(Ct,this.layoutVertexArray,this.indexArray),Bt=Lt.vertexLength,zt=[],Wt=[];for(const Xt of At){if(Xt.length===0)continue;Xt!==At[0]&&Wt.push(zt.length/2);const Jt=this.segments2.prepareSegment(Xt.length,this.layoutVertexArray,this.indexArray2),nr=Jt.vertexLength;this.layoutVertexArray.emplaceBack(Xt[0].x,Xt[0].y),this.indexArray2.emplaceBack(nr+Xt.length-1,nr),zt.push(Xt[0].x),zt.push(Xt[0].y);for(let gr=1;gr<Xt.length;gr++)this.layoutVertexArray.emplaceBack(Xt[gr].x,Xt[gr].y),this.indexArray2.emplaceBack(nr+gr-1,nr+gr),zt.push(Xt[gr].x),zt.push(Xt[gr].y);Jt.vertexLength+=Xt.length,Jt.primitiveLength+=Xt.length}const qt=cv(zt,Wt);for(let Xt=0;Xt<qt.length;Xt+=3)this.indexArray.emplaceBack(Bt+qt[Xt],Bt+qt[Xt+1],Bt+qt[Xt+2]);Lt.vertexLength+=Ct,Lt.primitiveLength+=qt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,nt,dt,mt,yt,ft,Et)}}let vT,_T,bT,wT;Wr(i1,"FillBucket",{omit:["layers","patternFeatures"]});class fE{constructor(nt,lt,dt,ft){if(this.triangleCount=lt.length/3,this.min=new Vn(0,0),this.max=new Vn(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||nt.length===0)return;const[mt,yt]=[nt[0].clone(),nt[0].clone()];for(let Bt=1;Bt<nt.length;++Bt){const zt=nt[Bt];mt.x=Math.min(mt.x,zt.x),mt.y=Math.min(mt.y,zt.y),yt.x=Math.max(yt.x,zt.x),yt.y=Math.max(yt.y,zt.y)}if(ft){const Bt=Math.ceil(Math.max(yt.x-mt.x,yt.y-mt.y)/ft);dt=Math.max(dt,Bt)}if(dt===0)return;this.min=mt,this.max=yt;const Et=this.max.sub(this.min);Et.x=Math.max(Et.x,1),Et.y=Math.max(Et.y,1);const At=Math.max(Et.x,Et.y)/dt;this.cellsX=Math.max(1,Math.ceil(Et.x/At)),this.cellsY=Math.max(1,Math.ceil(Et.y/At)),this.xScale=1/At,this.yScale=1/At;const Ct=[];for(let Bt=0;Bt<this.triangleCount;Bt++){const zt=nt[lt[3*Bt+0]].sub(this.min),Wt=nt[lt[3*Bt+1]].sub(this.min),qt=nt[lt[3*Bt+2]].sub(this.min),Xt=np(Math.floor(Math.min(zt.x,Wt.x,qt.x)),this.xScale,this.cellsX),Jt=np(Math.floor(Math.max(zt.x,Wt.x,qt.x)),this.xScale,this.cellsX),nr=np(Math.floor(Math.min(zt.y,Wt.y,qt.y)),this.yScale,this.cellsY),gr=np(Math.floor(Math.max(zt.y,Wt.y,qt.y)),this.yScale,this.cellsY),pr=new Vn(0,0),xr=new Vn(0,0),Pr=new Vn(0,0),Rr=new Vn(0,0);for(let Dr=nr;Dr<=gr;++Dr){pr.y=xr.y=Dr*At,Pr.y=Rr.y=(Dr+1)*At;for(let Hr=Xt;Hr<=Jt;++Hr)pr.x=Pr.x=Hr*At,xr.x=Rr.x=(Hr+1)*At,(Qw(zt,Wt,qt,pr,xr,Rr)||Qw(zt,Wt,qt,pr,Rr,Pr))&&Ct.push({cellIdx:Dr*this.cellsX+Hr,triIdx:Bt})}}if(Ct.length===0)return;Ct.sort((Bt,zt)=>Bt.cellIdx-zt.cellIdx||Bt.triIdx-zt.triIdx);let Lt=0;for(;Lt<Ct.length;){const Bt=Ct[Lt].cellIdx,zt={start:this.payload.length,len:0};for(;Lt<Ct.length&&Ct[Lt].cellIdx===Bt;)++zt.len,this.payload.push(Ct[Lt++].triIdx);this.cells[Bt]=zt}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(nt,lt){if(this.triangleCount===0||this.cells.length===0||nt.x>this.max.x||this.min.x>nt.x||nt.y>this.max.y||this.min.y>nt.y)return;const dt=np(nt.x-this.min.x,this.xScale,this.cellsX),ft=np(nt.y-this.min.y,this.yScale,this.cellsY),mt=this.cells[ft*this.cellsX+dt];if(mt){this._lazyInitLookup();for(let yt=0;yt<mt.len;yt++){const Et=this.payload[mt.start+yt],At=Math.floor(Et/8),Ct=1<<Et%8;if(!(this.lookup[At]&Ct)&&(this.lookup[At]|=Ct,lt.push(Et),lt.length===this.triangleCount))return}}}query(nt,lt,dt){if(this.triangleCount===0||this.cells.length===0||nt.x>this.max.x||this.min.x>lt.x||nt.y>this.max.y||this.min.y>lt.y)return;this._lazyInitLookup();const ft=np(nt.x-this.min.x,this.xScale,this.cellsX),mt=np(lt.x-this.min.x,this.xScale,this.cellsX),yt=np(nt.y-this.min.y,this.yScale,this.cellsY),Et=np(lt.y-this.min.y,this.yScale,this.cellsY);for(let At=yt;At<=Et;At++)for(let Ct=ft;Ct<=mt;Ct++){const Lt=this.cells[At*this.cellsX+Ct];if(Lt)for(let Bt=0;Bt<Lt.len;Bt++){const zt=this.payload[Lt.start+Bt],Wt=Math.floor(zt/8),qt=1<<zt%8;if(!(this.lookup[Wt]&qt)&&(this.lookup[Wt]|=qt,dt.push(zt),dt.length===this.triangleCount))return}}}}function np(ot,nt,lt){return Math.max(0,Math.min(lt-1,Math.floor(ot*nt)))}Wr(fE,"TriangleGridIndex");class ET{constructor(nt){this.zoom=nt.zoom,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.index=nt.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id),this.footprints=[]}updateFootprints(nt,lt){for(const dt of this.footprints)lt.push({footprint:dt,id:nt})}populate(nt,lt,dt,ft){const mt=[];for(const{feature:yt,id:Et,index:At,sourceLayerIndex:Ct}of nt){const Lt=this.layers[0]._featureFilter.needGeometry,Bt=Rp(yt,Lt);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),Bt,dt))continue;const zt={id:Et,properties:yt.properties,type:yt.type,sourceLayerIndex:Ct,index:At,geometry:Lt?Bt.geometry:Ou(yt,dt,ft),patterns:{}};mt.push(zt)}for(const yt of mt){const{geometry:Et,index:At,sourceLayerIndex:Ct}=yt;this.addFeature(yt,Et,At,dt,{},lt.availableImages,lt.brightness),lt.featureIndex.insert(nt[At].feature,Et,At,Ct,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(nt){}update(nt,lt,dt,ft,mt){}destroy(){}addFeature(nt,lt,dt,ft,mt,yt=[],Et){for(const At of n1(lt,2)){const Ct=[],Lt=[],Bt=[],zt=new Vn(1/0,1/0),Wt=new Vn(-1/0,-1/0);for(const Jt of At)if(Jt.length!==0){Jt!==At[0]&&Bt.push(Lt.length/2);for(let nr=0;nr<Jt.length;nr++)Lt.push(Jt[nr].x),Lt.push(Jt[nr].y),Ct.push(Jt[nr]),zt.x=Math.min(zt.x,Jt[nr].x),zt.y=Math.min(zt.y,Jt[nr].y),Wt.x=Math.max(Wt.x,Jt[nr].x),Wt.y=Math.max(Wt.y,Jt[nr].y)}const qt=cv(Lt,Bt),Xt=new fE(Ct,qt,8,256);this.footprints.push({vertices:Ct,indices:qt,grid:Xt,min:zt,max:Wt})}}}Wr(ET,"ClipBucket",{omit:["layers"]});const gR=ba([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),yR=ba([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),xR=ba([{name:"a_centroid_pos",components:2,type:"Uint16"}]),vR=ba([{name:"a_join_normal_inside_polygon",components:4,type:"Int16"}]),_R=ba([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),bR=ba([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:wR}=gR;var o1={},ER=Mm,ST=j0;function j0(ot,nt,lt,dt,ft){this.properties={},this.extent=lt,this.type=0,this._pbf=ot,this._geometry=-1,this._keys=dt,this._values=ft,ot.readFields(SR,this,nt)}function SR(ot,nt,lt){ot==1?nt.id=lt.readVarint():ot==2?function(dt,ft){for(var mt=dt.readVarint()+dt.pos;dt.pos<mt;){var yt=ft._keys[dt.readVarint()],Et=ft._values[dt.readVarint()];ft.properties[yt]=Et}}(lt,nt):ot==3?nt.type=lt.readVarint():ot==4&&(nt._geometry=lt.pos)}function TR(ot){for(var nt,lt,dt=0,ft=0,mt=ot.length,yt=mt-1;ft<mt;yt=ft++)dt+=((lt=ot[yt]).x-(nt=ot[ft]).x)*(nt.y+lt.y);return dt}j0.types=["Unknown","Point","LineString","Polygon"],j0.prototype.loadGeometry=function(){var ot=this._pbf;ot.pos=this._geometry;for(var nt,lt=ot.readVarint()+ot.pos,dt=1,ft=0,mt=0,yt=0,Et=[];ot.pos<lt;){if(ft<=0){var At=ot.readVarint();dt=7&At,ft=At>>3}if(ft--,dt===1||dt===2)mt+=ot.readSVarint(),yt+=ot.readSVarint(),dt===1&&(nt&&Et.push(nt),nt=[]),nt.push(new ER(mt,yt));else{if(dt!==7)throw new Error("unknown command "+dt);nt&&nt.push(nt[0].clone())}}return nt&&Et.push(nt),Et},j0.prototype.bbox=function(){var ot=this._pbf;ot.pos=this._geometry;for(var nt=ot.readVarint()+ot.pos,lt=1,dt=0,ft=0,mt=0,yt=1/0,Et=-1/0,At=1/0,Ct=-1/0;ot.pos<nt;){if(dt<=0){var Lt=ot.readVarint();lt=7&Lt,dt=Lt>>3}if(dt--,lt===1||lt===2)(ft+=ot.readSVarint())<yt&&(yt=ft),ft>Et&&(Et=ft),(mt+=ot.readSVarint())<At&&(At=mt),mt>Ct&&(Ct=mt);else if(lt!==7)throw new Error("unknown command "+lt)}return[yt,At,Et,Ct]},j0.prototype.toGeoJSON=function(ot,nt,lt){var dt,ft,mt=this.extent*Math.pow(2,lt),yt=this.extent*ot,Et=this.extent*nt,At=this.loadGeometry(),Ct=j0.types[this.type];function Lt(Wt){for(var qt=0;qt<Wt.length;qt++){var Xt=Wt[qt];Wt[qt]=[360*(Xt.x+yt)/mt-180,360/Math.PI*Math.atan(Math.exp((180-360*(Xt.y+Et)/mt)*Math.PI/180))-90]}}switch(this.type){case 1:var Bt=[];for(dt=0;dt<At.length;dt++)Bt[dt]=At[dt][0];Lt(At=Bt);break;case 2:for(dt=0;dt<At.length;dt++)Lt(At[dt]);break;case 3:for(At=function(Wt){var qt=Wt.length;if(qt<=1)return[Wt];for(var Xt,Jt,nr=[],gr=0;gr<qt;gr++){var pr=TR(Wt[gr]);pr!==0&&(Jt===void 0&&(Jt=pr<0),Jt===pr<0?(Xt&&nr.push(Xt),Xt=[Wt[gr]]):Xt.push(Wt[gr]))}return Xt&&nr.push(Xt),nr}(At),dt=0;dt<At.length;dt++)for(ft=0;ft<At[dt].length;ft++)Lt(At[dt][ft])}At.length===1?At=At[0]:Ct="Multi"+Ct;var zt={type:"Feature",geometry:{type:Ct,coordinates:At},properties:this.properties};return"id"in this&&(zt.id=this.id),zt};var AR=ST,TT=AT;function AT(ot,nt){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=ot,this._keys=[],this._values=[],this._features=[],ot.readFields(PR,this,nt),this.length=this._features.length}function PR(ot,nt,lt){ot===15?nt.version=lt.readVarint():ot===1?nt.name=lt.readString():ot===5?nt.extent=lt.readVarint():ot===2?nt._features.push(lt.pos):ot===3?nt._keys.push(lt.readString()):ot===4&&nt._values.push(function(dt){for(var ft=null,mt=dt.readVarint()+dt.pos;dt.pos<mt;){var yt=dt.readVarint()>>3;ft=yt===1?dt.readString():yt===2?dt.readFloat():yt===3?dt.readDouble():yt===4?dt.readVarint64():yt===5?dt.readVarint():yt===6?dt.readSVarint():yt===7?dt.readBoolean():null}return ft}(lt))}AT.prototype.feature=function(ot){if(ot<0||ot>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[ot];var nt=this._pbf.readVarint()+this._pbf.pos;return new AR(this._pbf,nt,this.extent,this._keys,this._values)};var CR=TT;function kR(ot,nt,lt){if(ot===3){var dt=new CR(lt,lt.readVarint()+lt.pos);dt.length&&(nt[dt.name]=dt)}}var pE=o1.VectorTile=function(ot,nt){this.layers=ot.readFields(kR,{},nt)},a1=o1.VectorTileFeature=ST;o1.VectorTileLayer=TT;class Ty extends Vn{constructor(nt,lt,dt){super(nt,lt),this.z=dt}}class PT extends Ty{constructor(nt,lt,dt,ft){super(nt,lt,dt),this.w=ft}}function s1(ot,nt,lt,dt){const ft=[],mt=dt===0?(yt,Et,At,Ct,Lt,Bt)=>{yt.push(new Vn(Bt,At+(Bt-Et)/(Ct-Et)*(Lt-At)))}:(yt,Et,At,Ct,Lt,Bt)=>{yt.push(new Vn(Et+(Bt-At)/(Lt-At)*(Ct-Et),Bt))};for(const yt of ot){const Et=[];for(const At of yt){if(At.length<=2)continue;const Ct=[];for(let zt=0;zt<At.length-1;zt++){const Wt=At[zt].x,qt=At[zt].y,Xt=At[zt+1].x,Jt=At[zt+1].y,nr=dt===0?Wt:qt,gr=dt===0?Xt:Jt;nr<nt?gr>nt&&mt(Ct,Wt,qt,Xt,Jt,nt):nr>lt?gr<lt&&mt(Ct,Wt,qt,Xt,Jt,lt):Ct.push(At[zt]),gr<nt&&nr>=nt&&mt(Ct,Wt,qt,Xt,Jt,nt),gr>lt&&nr<=lt&&mt(Ct,Wt,qt,Xt,Jt,lt)}let Lt=At[At.length-1];const Bt=dt===0?Lt.x:Lt.y;Bt>=nt&&Bt<=lt&&Ct.push(Lt),Ct.length&&(Lt=Ct[Ct.length-1],Ct[0].x===Lt.x&&Ct[0].y===Lt.y||Ct.push(Ct[0]),Et.push(Ct))}Et.length&&ft.push(Et)}return ft}function CT(ot,nt,lt,dt){const ft=lt==="x"?"y":"x",mt=(dt-ot[lt])/(nt[lt]-ot[lt]);ot[ft]=ot[ft]+(nt[ft]-ot[ft])*mt,ot[lt]=dt,ot.hasOwnProperty("z")&&(ot.z=ho(ot.z,nt.z,mt)),ot.hasOwnProperty("w")&&(ot.w=ho(ot.w,nt.w,mt))}function kT(ot,nt,lt,dt){const ft=lt,mt=dt;for(const yt of["x","y"]){let Et=ot,At=nt;Et[yt]>=At[yt]&&(Et=nt,At=ot),Et[yt]<ft&&At[yt]>ft&&CT(Et,At,yt,ft),Et[yt]<mt&&At[yt]>mt&&CT(At,Et,yt,mt)}}const l1=Number.MAX_SAFE_INTEGER;function RT(ot,nt,lt,dt){return ot.order<nt||ot.order===l1||!(ot.clipMask&lt)||function(ft,mt){return mt.length!==0&&mt.find(yt=>yt===ft)===void 0}(dt,ot.clipScope)}function c1(ot,nt){return ot.x-nt.x||ot.y-nt.y}function IT(ot,nt){return c1(ot.min,nt.min)===0&&c1(ot.max,nt.max)===0}function mE(ot,nt){return!(ot.min.x>nt.max.x||ot.max.x<nt.min.x||ot.min.y>nt.max.y||ot.max.y<nt.min.y)}function gE(ot,nt){if(ot.length!==nt.length)return!1;for(let lt=0;lt<ot.length;lt++)if(ot[lt].sourceId!==nt[lt].sourceId||!IT(ot[lt],nt[lt])||ot[lt].order!==nt[lt].order||ot[lt].clipMask!==nt[lt].clipMask||!Bp(ot[lt].clipScope,nt[lt].clipScope))return!1;return!0}function $T(ot,nt,lt){const dt=1/Ln,ft=1/(1<<lt.canonical.z),mt=(nt.x*dt+lt.canonical.x)*ft+lt.wrap,yt=(nt.y*dt+lt.canonical.y)*ft;return{min:new Vn((ot.x*dt+lt.canonical.x)*ft+lt.wrap,(ot.y*dt+lt.canonical.y)*ft),max:new Vn(mt,yt)}}function RR(ot,nt,lt){const dt=1<<lt.canonical.z,ft=((nt.x-lt.wrap)*dt-lt.canonical.x)*Ln,mt=(nt.y*dt-lt.canonical.y)*Ln;return{min:new Vn(((ot.x-lt.wrap)*dt-lt.canonical.x)*Ln,(ot.y*dt-lt.canonical.y)*Ln),max:new Vn(ft,mt)}}function MT(ot,nt,lt,dt,ft,mt,yt){const Et=ot.indices,At=ot.vertices,Ct=[];for(let Lt=dt;Lt<dt+ft;Lt+=3){const Bt=nt[lt[Lt+0]+mt],zt=nt[lt[Lt+1]+mt],Wt=nt[lt[Lt+2]+mt],qt=Math.min(Bt.x,zt.x,Wt.x),Xt=Math.max(Bt.x,zt.x,Wt.x),Jt=Math.min(Bt.y,zt.y,Wt.y),nr=Math.max(Bt.y,zt.y,Wt.y);Ct.length=0,ot.grid.query(new Vn(qt,Jt),new Vn(Xt,nr),Ct);for(let gr=0;gr<Ct.length;gr++){const pr=Ct[gr];if(Qw(At[Et[3*pr+0]],At[Et[3*pr+1]],At[Et[3*pr+2]],Bt,zt,Wt,yt))return!0}}return!1}function OT(ot,nt,lt,dt){if(!ot||!lt)return!1;let ft=ot.vertices;if(!nt.canonical.equals(dt.canonical)||nt.wrap!==dt.wrap){if(lt.vertices.length<ot.vertices.length)return OT(lt,dt,ot,nt);const mt=nt.canonical,yt=dt.canonical,Et=Math.pow(2,yt.z-mt.z);ft=ot.vertices.map(At=>new Vn((At.x+mt.x*Ln)*Et-yt.x*Ln,(At.y+mt.y*Ln)*Et-yt.y*Ln))}return MT(lt,ft,ot.indices,0,ot.indices.length,0,0)}function jT(ot,nt,lt,dt){const ft=Math.pow(2,dt.z-lt.z);return new Vn((ot+lt.x*Ln)*ft-dt.x*Ln,(nt+lt.y*Ln)*ft-dt.y*Ln)}function DT(ot,nt){const lt=[];nt.footprint.grid.queryPoint(ot,lt);const dt=nt.footprint.indices,ft=nt.footprint.vertices;for(let mt=0;mt<lt.length;mt++){const yt=lt[mt];if(mm([ft[dt[3*yt+0]],ft[dt[3*yt+1]],ft[dt[3*yt+2]]],ot))return!0}return!1}class LT{constructor(nt){this.size=nt,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(nt,lt){const dt=this.toIdx(nt,lt);return{min:this.minimums[dt],max:this.maximums[dt]}}isLeaf(nt,lt){return this.leaves[this.toIdx(nt,lt)]}toIdx(nt,lt){return lt*this.size+nt}}function NT(ot,nt,lt,dt){let ft=0,mt=Number.MAX_VALUE;for(let yt=0;yt<3;yt++)if(Math.abs(dt[yt])<1e-15){if(lt[yt]<ot[yt]||lt[yt]>nt[yt])return null}else{const Et=1/dt[yt];let At=(ot[yt]-lt[yt])*Et,Ct=(nt[yt]-lt[yt])*Et;if(At>Ct){const Lt=At;At=Ct,Ct=Lt}if(At>ft&&(ft=At),Ct<mt&&(mt=Ct),ft>mt)return null}return ft}function FT(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt){const Bt=dt-ot,zt=ft-nt,Wt=mt-lt,qt=yt-ot,Xt=Et-nt,Jt=At-lt,nr=Lt[1]*Jt-Lt[2]*Xt,gr=Lt[2]*qt-Lt[0]*Jt,pr=Lt[0]*Xt-Lt[1]*qt,xr=Bt*nr+zt*gr+Wt*pr;if(Math.abs(xr)<1e-15)return null;const Pr=1/xr,Rr=Ct[0]-ot,Dr=Ct[1]-nt,Hr=Ct[2]-lt,Jr=(Rr*nr+Dr*gr+Hr*pr)*Pr;if(Jr<0||Jr>1)return null;const an=Dr*Wt-Hr*zt,Qr=Hr*Bt-Rr*Wt,yn=Rr*zt-Dr*Bt,Cn=(Lt[0]*an+Lt[1]*Qr+Lt[2]*yn)*Pr;return Cn<0||Jr+Cn>1?null:(qt*an+Xt*Qr+Jt*yn)*Pr}function BT(ot,nt,lt){return(ot-nt)/(lt-nt)}function zT(ot,nt,lt,dt,ft,mt,yt,Et,At){const Ct=1<<lt,Lt=mt-dt,Bt=yt-ft,zt=(ot+1)/Ct*Lt+dt,Wt=(nt+0)/Ct*Bt+ft,qt=(nt+1)/Ct*Bt+ft;Et[0]=(ot+0)/Ct*Lt+dt,Et[1]=Wt,At[0]=zt,At[1]=qt}class VT{constructor(nt){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=nt,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const lt=function(mt){const yt=Math.ceil(Math.log2(mt.dim/8)),Et=[];let At=Math.ceil(Math.pow(2,yt));const Ct=1/At,Lt=(Wt,qt,Xt,Jt,nr)=>{const gr=Jt?1:0,pr=(Wt+1)*Xt-gr,xr=qt*Xt,Pr=(qt+1)*Xt-gr;nr[0]=Wt*Xt,nr[1]=xr,nr[2]=pr,nr[3]=Pr};let Bt=new LT(At);const zt=[];for(let Wt=0;Wt<At*At;Wt++){Lt(Wt%At,Math.floor(Wt/At),Ct,!1,zt);const qt=ym(zt[0],zt[1],mt),Xt=ym(zt[2],zt[1],mt),Jt=ym(zt[2],zt[3],mt),nr=ym(zt[0],zt[3],mt);Bt.minimums.push(Math.min(qt,Xt,Jt,nr)),Bt.maximums.push(Math.max(qt,Xt,Jt,nr)),Bt.leaves.push(1)}for(Et.push(Bt),At/=2;At>=1;At/=2){const Wt=Et[Et.length-1];Bt=new LT(At);for(let qt=0;qt<At*At;qt++){Lt(qt%At,Math.floor(qt/At),2,!0,zt);const Xt=Wt.getElevation(zt[0],zt[1]),Jt=Wt.getElevation(zt[2],zt[1]),nr=Wt.getElevation(zt[2],zt[3]),gr=Wt.getElevation(zt[0],zt[3]),pr=Wt.isLeaf(zt[0],zt[1]),xr=Wt.isLeaf(zt[2],zt[1]),Pr=Wt.isLeaf(zt[2],zt[3]),Rr=Wt.isLeaf(zt[0],zt[3]),Dr=Math.min(Xt.min,Jt.min,nr.min,gr.min),Hr=Math.max(Xt.max,Jt.max,nr.max,gr.max),Jr=pr&&xr&&Pr&&Rr;Bt.maximums.push(Hr),Bt.minimums.push(Dr),Bt.leaves.push(Hr-Dr<=5&&Jr?1:0)}Et.push(Bt)}return Et}(this.dem),dt=lt.length-1,ft=lt[dt];this._addNode(ft.minimums[0],ft.maximums[0],ft.leaves[0]),this._construct(lt,0,0,dt,0)}raycastRoot(nt,lt,dt,ft,mt,yt,Et=1){return NT([nt,lt,-100],[dt,ft,this.maximums[0]*Et],mt,yt)}raycast(nt,lt,dt,ft,mt,yt,Et=1){if(!this.nodeCount)return null;const At=this.raycastRoot(nt,lt,dt,ft,mt,yt,Et);if(At==null)return null;const Ct=[],Lt=[],Bt=[],zt=[],Wt=[{idx:0,t:At,nodex:0,nodey:0,depth:0}];for(;Wt.length>0;){const{idx:qt,t:Xt,nodex:Jt,nodey:nr,depth:gr}=Wt.pop();if(this.leaves[qt]){zT(Jt,nr,gr,nt,lt,dt,ft,Bt,zt);const xr=1<<gr,Pr=(Jt+0)/xr,Rr=(Jt+1)/xr,Dr=(nr+0)/xr,Hr=(nr+1)/xr,Jr=ym(Pr,Dr,this.dem)*Et,an=ym(Rr,Dr,this.dem)*Et,Qr=ym(Rr,Hr,this.dem)*Et,yn=ym(Pr,Hr,this.dem)*Et,Cn=FT(Bt[0],Bt[1],Jr,zt[0],Bt[1],an,zt[0],zt[1],Qr,mt,yt),xn=FT(zt[0],zt[1],Qr,Bt[0],zt[1],yn,Bt[0],Bt[1],Jr,mt,yt),$n=Math.min(Cn!==null?Cn:Number.MAX_VALUE,xn!==null?xn:Number.MAX_VALUE);if($n!==Number.MAX_VALUE)return $n;{const gn=at.$.scaleAndAdd([],mt,yt,Xt);if(UT(Jr,an,yn,Qr,BT(gn[0],Bt[0],zt[0]),BT(gn[1],Bt[1],zt[1]))>=gn[2])return Xt}continue}let pr=0;for(let xr=0;xr<this._siblingOffset.length;xr++){zT((Jt<<1)+this._siblingOffset[xr][0],(nr<<1)+this._siblingOffset[xr][1],gr+1,nt,lt,dt,ft,Bt,zt),Bt[2]=-100,zt[2]=this.maximums[this.childOffsets[qt]+xr]*Et;const Pr=NT(Bt,zt,mt,yt);if(Pr!=null){const Rr=Pr;Ct[xr]=Rr;let Dr=!1;for(let Hr=0;Hr<pr&&!Dr;Hr++)Rr>=Ct[Lt[Hr]]&&(Lt.splice(Hr,0,xr),Dr=!0);Dr||(Lt[pr]=xr),pr++}}for(let xr=0;xr<pr;xr++){const Pr=Lt[xr];Wt.push({idx:this.childOffsets[qt]+Pr,t:Ct[Pr],nodex:(Jt<<1)+this._siblingOffset[Pr][0],nodey:(nr<<1)+this._siblingOffset[Pr][1],depth:gr+1})}}return null}_addNode(nt,lt,dt){return this.minimums.push(nt),this.maximums.push(lt),this.leaves.push(dt),this.childOffsets.push(0),this.nodeCount++}_construct(nt,lt,dt,ft,mt){if(nt[ft].isLeaf(lt,dt)===1)return;this.childOffsets[mt]||(this.childOffsets[mt]=this.nodeCount);const yt=ft-1,Et=nt[yt];let At=0,Ct=0;for(let Lt=0;Lt<this._siblingOffset.length;Lt++){const Bt=2*lt+this._siblingOffset[Lt][0],zt=2*dt+this._siblingOffset[Lt][1],Wt=Et.getElevation(Bt,zt),qt=Et.isLeaf(Bt,zt),Xt=this._addNode(Wt.min,Wt.max,qt);qt&&(At|=1<<Lt),Ct||(Ct=Xt)}for(let Lt=0;Lt<this._siblingOffset.length;Lt++)At&1<<Lt||this._construct(nt,2*lt+this._siblingOffset[Lt][0],2*dt+this._siblingOffset[Lt][1],yt,Ct+Lt)}}function UT(ot,nt,lt,dt,ft,mt){return ho(ho(ot,lt,mt),ho(nt,dt,mt),ft)}function ym(ot,nt,lt){const dt=lt.dim,ft=jo(ot*dt-.5,0,dt-1),mt=jo(nt*dt-.5,0,dt-1),yt=Math.floor(ft),Et=Math.floor(mt),At=Math.min(yt+1,dt-1),Ct=Math.min(Et+1,dt-1);return UT(lt.get(yt,Et),lt.get(At,Et),lt.get(yt,Ct),lt.get(At,Ct),ft-yt,mt-Et)}const IR={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function $R(ot,nt,lt){return(256*ot*256+256*nt+lt)/10-1e4}function MR(ot,nt,lt){return 256*ot+nt+lt/256-32768}class u1{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(nt,lt,dt,ft=!1){if(this.uid=nt,lt.height!==lt.width)throw new RangeError("DEM tiles must be square");if(dt&&dt!=="mapbox"&&dt!=="terrarium")return Ts(`"${dt}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=lt.height;const mt=this.dim=lt.height-2,yt=new Uint32Array(lt.data.buffer);if(this.pixels=new Uint8Array(lt.data.buffer),this.floatView=new Float32Array(lt.data.buffer),this.borderReady=ft,this._modifiedForSources={},!ft){for(let At=0;At<mt;At++)yt[this._idx(-1,At)]=yt[this._idx(0,At)],yt[this._idx(mt,At)]=yt[this._idx(mt-1,At)],yt[this._idx(At,-1)]=yt[this._idx(At,0)],yt[this._idx(At,mt)]=yt[this._idx(At,mt-1)];yt[this._idx(-1,-1)]=yt[this._idx(0,0)],yt[this._idx(mt,-1)]=yt[this._idx(mt-1,0)],yt[this._idx(-1,mt)]=yt[this._idx(0,mt-1)],yt[this._idx(mt,mt)]=yt[this._idx(mt-1,mt-1)]}const Et=dt==="terrarium"?MR:$R;for(let At=0;At<yt.length;++At){const Ct=4*At;this.floatView[At]=Et(this.pixels[Ct],this.pixels[Ct+1],this.pixels[Ct+2])}this._timestamp=Ys.now()}_buildQuadTree(){this._tree=new VT(this)}get(nt,lt,dt=!1){dt&&(nt=jo(nt,-1,this.dim),lt=jo(lt,-1,this.dim));const ft=this._idx(nt,lt);return this.floatView[ft]}set(nt,lt,dt){const ft=this._idx(nt,lt),mt=this.floatView[ft];return this.floatView[ft]=dt,dt-mt}static getUnpackVector(nt){return IR[nt]}_idx(nt,lt){if(nt<-1||nt>=this.dim+1||lt<-1||lt>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(lt+1)*this.stride+(nt+1)}static pack(nt,lt){const dt=[0,0,0,0],ft=u1.getUnpackVector(lt);let mt=Math.floor((nt+ft[3])/ft[2]);return dt[2]=mt%256,mt=Math.floor(mt/256),dt[1]=mt%256,mt=Math.floor(mt/256),dt[0]=mt,dt}getPixels(){return new uT({width:this.stride,height:this.stride},this.pixels)}backfillBorder(nt,lt,dt){if(this.dim!==nt.dim)throw new Error("dem dimension mismatch");let ft=lt*this.dim,mt=lt*this.dim+this.dim,yt=dt*this.dim,Et=dt*this.dim+this.dim;switch(lt){case-1:ft=mt-1;break;case 1:mt=ft+1}switch(dt){case-1:yt=Et-1;break;case 1:Et=yt+1}const At=-lt*this.dim,Ct=-dt*this.dim;for(let Lt=yt;Lt<Et;Lt++)for(let Bt=ft;Bt<mt;Bt++){const zt=4*this._idx(Bt,Lt),Wt=4*this._idx(Bt+At,Lt+Ct);this.pixels[zt+0]=nt.pixels[Wt+0],this.pixels[zt+1]=nt.pixels[Wt+1],this.pixels[zt+2]=nt.pixels[Wt+2],this.pixels[zt+3]=nt.pixels[Wt+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Wr(u1,"DEMData"),Wr(VT,"DemMinMaxQuadTree",{omit:["dem"]});class D0{constructor(nt,lt,dt){this._demTile=nt,this._dem=this._demTile.dem,this._scale=lt,this._offset=dt}static create(nt,lt,dt){const ft=dt||nt.findDEMTileFor(lt);if(!ft||!ft.dem)return;const mt=ft.dem,yt=ft.tileID,Et=1<<lt.canonical.z-yt.canonical.z;return new D0(ft,mt.dim/Ln/Et,[(lt.canonical.x/Et-yt.canonical.x)*mt.dim,(lt.canonical.y/Et-yt.canonical.y)*mt.dim])}tileCoordToPixel(nt,lt){const dt=lt*this._scale+this._offset[1],ft=Math.floor(nt*this._scale+this._offset[0]),mt=Math.floor(dt);return new Vn(ft,mt)}getElevationAt(nt,lt,dt,ft){const mt=nt*this._scale+this._offset[0],yt=lt*this._scale+this._offset[1],Et=Math.floor(mt),At=Math.floor(yt),Ct=this._dem;return ft=!!ft,dt?ho(ho(Ct.get(Et,At,ft),Ct.get(Et,At+1,ft),yt-At),ho(Ct.get(Et+1,At,ft),Ct.get(Et+1,At+1,ft),yt-At),mt-Et):Ct.get(Et,At,ft)}getElevationAtPixel(nt,lt,dt){return this._dem.get(nt,lt,!!dt)}getMeterToDEM(nt){return(1<<this._demTile.tileID.canonical.z)*Dl(1,nt)*this._dem.stride}}const GT={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7},OR=a1.types,jR=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-line-alignment"],DR=["fill-extrusion-flood-light-ground-radius"],LR=Math.pow(2,13),NR=Math.pow(2,15)-1,WT=new Vn(0,1),xm=2147483648;function fv(ot,nt,lt,dt,ft,mt,yt,Et){ot.emplaceBack((nt<<1)+yt,(lt<<1)+mt,(Math.floor(dt*LR)<<1)+ft,Math.round(Et))}function pv(ot,nt,lt,dt){ot.emplaceBack(nt.x*Ln,nt.y*Ln,lt?0:1,dt?1:0)}function d1(ot,nt,lt,dt,ft,mt){ot.emplaceBack(nt.x,nt.y,(lt.x<<1)+dt,(lt.y<<1)+ft,mt)}function mv(ot,nt,lt){ot.emplaceBack(nt.x,nt.y,nt.z,lt[0]*16384,lt[1]*16384,lt[2]*16384)}class HT{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class ZT{constructor(){this.centroidXY=new Vn(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Vn(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Vn(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Vn(this.max.x-this.min.x,this.max.y-this.min.y)}}class qT{constructor(){this.acc=new Vn(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(nt,lt){nt.min.x===Number.MAX_VALUE&&(nt.min.x=nt.max.x=lt.x,nt.min.y=nt.max.y=lt.y)}appendEdge(nt,lt,dt){this.accCount++,this.acc._add(lt);let ft=!!this.borders;lt.x<nt.min.x?(nt.min.x=lt.x,ft=!0):lt.x>nt.max.x&&(nt.max.x=lt.x,ft=!0),lt.y<nt.min.y?(nt.min.y=lt.y,ft=!0):lt.y>nt.max.y&&(nt.max.y=lt.y,ft=!0),((lt.x===0||lt.x===Ln)&&lt.x===dt.x)!=((lt.y===0||lt.y===Ln)&&lt.y===dt.y)&&this.processBorderOverlap(lt,dt),ft&&this.checkBorderIntersection(lt,dt)}checkBorderIntersection(nt,lt){lt.x<0!=nt.x<0&&this.addBorderIntersection(0,ho(lt.y,nt.y,(0-lt.x)/(nt.x-lt.x))),lt.x>Ln!=nt.x>Ln&&this.addBorderIntersection(1,ho(lt.y,nt.y,(Ln-lt.x)/(nt.x-lt.x))),lt.y<0!=nt.y<0&&this.addBorderIntersection(2,ho(lt.x,nt.x,(0-lt.y)/(nt.y-lt.y))),lt.y>Ln!=nt.y>Ln&&this.addBorderIntersection(3,ho(lt.x,nt.x,(Ln-lt.y)/(nt.y-lt.y)))}addBorderIntersection(nt,lt){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const dt=this.borders[nt];lt<dt[0]&&(dt[0]=lt),lt>dt[1]&&(dt[1]=lt)}processBorderOverlap(nt,lt){if(nt.x===lt.x){if(nt.y===lt.y)return;const dt=nt.x===0?0:1;this.addBorderIntersection(dt,lt.y),this.addBorderIntersection(dt,nt.y)}else{const dt=nt.y===0?2:3;this.addBorderIntersection(dt,lt.x),this.addBorderIntersection(dt,nt.x)}}centroid(){return this.accCount===0?new Vn(0,0):new Vn(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((nt,lt)=>nt+ +(lt[0]!==Number.MAX_VALUE),0):0}}function KT(ot,nt){const lt=ot.add(nt)._unit(),dt=jo(ot.x*lt.x+ot.y*lt.y,-1,1);var ft,mt,yt;return ft=Math.acos(dt),Math.min(4,Math.max(-4,Math.tan(ft)))/4*NR*((mt=ot).x*(yt=nt).y-mt.y*yt.x<0?-1:1)}const FR=[ot=>ot.x<0,ot=>ot.x>Ln,ot=>ot.y<0,ot=>ot.y>Ln];function BR(ot,nt,lt,dt){const ft=[4];if(dt===0)return ft;lt._mult(dt);const mt=ot.sub(lt),yt=nt.sub(lt),Et=[ot,nt,mt,yt];for(let At=0;At<4;At++)for(const Ct of Et)if(FR[At](Ct)){ft.push(At);break}return ft}class YT{constructor(nt){this.vertexArray=new bw,this.indexArray=new Fs,this.programConfigurations=new fm(nt.layers,{zoom:nt.zoom,lut:nt.lut},lt=>DR.includes(lt)),this._segments=new ms,this.hiddenByLandmarkVertexArray=new jw,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new ms}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(nt,lt,dt,ft=!1){const mt=nt.length;if(mt>2){let yt=Math.max(0,this._segments.get().length-1);const Et=this._segments._prepareSegment(4*mt,this.vertexArray.length,2*this._segmentToGroundQuads[yt].length);let At;yt!==this._segments.get().length-1&&(yt++,this._segmentToGroundQuads[yt]=[],this._segmentToRegionTriCounts[yt]=[0,0,0,0,0]);{const Ct=nt[0],Lt=nt[1];At=KT(Ct.sub(nt[mt-1])._perp()._unit(),Lt.sub(Ct)._perp()._unit())}for(let Ct=0;Ct<mt;Ct++){const Lt=Ct===mt-1?0:Ct+1,Bt=nt[Ct],zt=nt[Lt],Wt=nt[Lt===mt-1?0:Lt+1],qt=zt.sub(Bt)._perp()._unit(),Xt=KT(qt,Wt.sub(zt)._perp()._unit()),Jt=At,nr=Xt;if(yE(Bt,zt,lt)||ft&&QT(Bt,lt)&&QT(zt,lt)){At=Xt;continue}const gr=Et.vertexLength;d1(this.vertexArray,Bt,zt,1,1,Jt),d1(this.vertexArray,Bt,zt,1,0,Jt),d1(this.vertexArray,Bt,zt,0,1,nr),d1(this.vertexArray,Bt,zt,0,0,nr),Et.vertexLength+=4;const pr=BR(Bt,zt,qt,dt);for(const xr of pr)this._segmentToGroundQuads[yt].push({id:gr,region:xr}),this._segmentToRegionTriCounts[yt][xr]+=2,Et.primitiveLength+=2;At=Xt}}}prepareBorderSegments(){if(!this.hasData())return;const nt=this._segments.get(),lt=nt.length;for(let dt=0;dt<lt;dt++)this._segmentToGroundQuads[dt].sort((ft,mt)=>ft.region-mt.region);for(let dt=0;dt<lt;dt++){const ft=this._segmentToGroundQuads[dt],mt=nt[dt],yt=this._segmentToRegionTriCounts[dt];yt.reduce((At,Ct)=>At+Ct,0);let Et=0;for(let At=0;At<=4;At++){const Ct=yt[At];if(Ct!==0){let Lt=this.regionSegments[At];Lt||(Lt=this.regionSegments[At]=new ms);const Bt={vertexOffset:mt.vertexOffset,primitiveOffset:mt.primitiveOffset+Et,vertexLength:mt.vertexLength,primitiveLength:Ct};Lt.get().push(Bt)}Et+=Ct}for(let At=0;At<ft.length;At++){const Ct=ft[At].id;this.indexArray.emplaceBack(Ct,Ct+1,Ct+3),this.indexArray.emplaceBack(Ct,Ct+3,Ct+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(nt,lt,dt,ft,mt,yt){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,nt,lt,dt,ft,mt,yt)}upload(nt){this.hasData()&&(this.vertexBuffer=nt.createVertexBuffer(this.vertexArray,yR.members),this.indexBuffer=nt.createIndexBuffer(this.indexArray))}uploadPaintProperties(nt){this.hasData()&&this.programConfigurations.upload(nt)}update(nt,lt,dt,ft,mt,yt){this.hasData()&&this.programConfigurations.updatePaintArrays(nt,lt,dt,ft,mt,yt)}updateHiddenByLandmark(nt){if(!this.hasData())return;const lt=nt.groundVertexCount+nt.groundVertexArrayOffset;if(nt.groundVertexCount===0)return;const dt=nt.flags&xm?1:0;for(let ft=nt.groundVertexArrayOffset;ft<lt;++ft)this.hiddenByLandmarkVertexArray.emplace(ft,dt);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(nt){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=nt.createVertexBuffer(this.hiddenByLandmarkVertexArray,_R.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let nt=0;nt<=4;nt++){const lt=this.regionSegments[nt];lt&&lt.destroy()}}}}class h1{constructor(nt){this.zoom=nt.zoom,this.canonical=nt.canonical,this.overscaling=nt.overscaling,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.index=nt.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=nt.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new Fs,this.footprintVertices=new $u,this.footprintSegments=[],this.layoutVertexArray=new Ap,this.centroidVertexArray=new wS,this.wallVertexArray=new SS,this.indexArray=new Fs,this.programConfigurations=new fm(nt.layers,{zoom:nt.zoom,lut:nt.lut},lt=>jR.includes(lt)),this.segments=new ms,this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id),this.groundEffect=new YT(nt),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(nt,lt){}populate(nt,lt,dt,ft){this.features=[],this.hasPattern=dE("fill-extrusion",this.layers,lt),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=W_(dt),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:mt,id:yt,index:Et,sourceLayerIndex:At}of nt){const Ct=this.layers[0]._featureFilter.needGeometry,Lt=Rp(mt,Ct);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),Lt,dt))continue;const Bt={id:yt,sourceLayerIndex:At,index:Et,geometry:Ct?Lt.geometry:Ou(mt,dt,ft),properties:mt.properties,type:mt.type,patterns:{}},zt=this.layoutVertexArray.length;if(this.hasPattern)this.features.push(hE("fill-extrusion",this.layers,Bt,this.zoom,lt));else if(this.wallMode)for(const Wt of Bt.geometry)this.addFeature(Bt,[Wt],Et,dt,{},lt.availableImages,ft,lt.brightness);else this.addFeature(Bt,Bt.geometry,Et,dt,{},lt.availableImages,ft,lt.brightness);lt.featureIndex.insert(mt,Bt.geometry,Et,At,this.index,zt)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(nt,lt,dt,ft,mt,yt){for(const Et of this.features){const{geometry:At}=Et;if(this.wallMode)for(const Ct of At)this.addFeature(Et,[Ct],Et.index,lt,dt,ft,mt,yt);else this.addFeature(Et,At,Et.index,lt,dt,ft,mt,yt)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(nt,lt,dt,ft,mt){const yt=Object.keys(nt).length!==0;if(yt&&!this.stateDependentLayers.length)return;const Et=yt?this.stateDependentLayers:this.layers;this.programConfigurations.updatePaintArrays(nt,lt,Et,dt,ft,mt),this.groundEffect.update(nt,lt,Et,dt,ft,mt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(nt){this.uploaded||(this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,wR),this.indexBuffer=nt.createIndexBuffer(this.indexArray),this.wallVertexBuffer=nt.createVertexBuffer(this.wallVertexArray,vR.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=nt.createVertexBuffer(this.layoutVertexExtArray,bR.members,!0)),this.groundEffect.upload(nt)),this.groundEffect.uploadPaintProperties(nt),this.programConfigurations.upload(nt),this.uploaded=!0}uploadCentroid(nt){this.groundEffect.uploadHiddenByLandmark(nt),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=nt.createVertexBuffer(this.centroidVertexArray,xR.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(nt,lt,dt,ft,mt,yt,Et,At){const Ct=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(nt,{})/this.tileToMeter,Lt=[new Vn(0,0),new Vn(Ln,Ln)],Bt=Et.projection,zt=Bt.name==="globe",Wt=this.wallMode||OR[nt.type]==="Polygon",qt=new qT;qt.centroidDataIndex=this.centroidData.length;const Xt=new ZT,Jt=this.layers[0].paint.get("fill-extrusion-base").evaluate(nt,{},ft)<=0,nr=this.layers[0].paint.get("fill-extrusion-height").evaluate(nt,{},ft);let gr;if(Xt.height=nr,Xt.vertexArrayOffset=this.layoutVertexArray.length,Xt.groundVertexArrayOffset=this.groundEffect.vertexArray.length,zt&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new B_),this.wallMode){if(zt)return void Ts("Non zero fill-extrusion-line-width is not yet supported on globe.");if(lt.length!==1)return;gr=function(an){const Qr=an[0].x===an[an.length-1].x&&an[0].y===an[an.length-1].y;(function(io){let Kn=0;const Nn=io.length;for(let mo=0;mo<Nn;mo++)Kn+=(io[(mo+1)%Nn].x-io[mo].x)*(io[(mo+1)%Nn].y+io[mo].y);return Kn>=0})(an)||(an=an.reverse());const Cn={isPolygon:Qr,geometry:[],joinNormals:[]},xn=[],$n=[],gn=[];let En=an.length;if(En<(Qr?3:2))return Cn;for(;En>=2&&an[En-1].equals(an[En-2]);)En--;let jn,vn,Bn,Mn,kn,ao=0;for(;ao<En-1&&an[ao].equals(an[ao+1]);)ao++;Qr&&(jn=an[En-2],kn=an[ao].sub(jn)._unit()._perp());for(let io=ao;io<En;io++){if(Bn=io===En-1?Qr?an[ao+1]:void 0:an[io+1],Bn&&an[io].equals(Bn))continue;kn&&(Mn=kn),jn&&(vn=jn),jn=an[io],kn=Bn?Bn.sub(jn)._unit()._perp():Mn,Mn=Mn||kn;const Kn=Mn.add(kn);Kn.x===0&&Kn.y===0||Kn._unit();const Nn=Kn.x*kn.x+Kn.y*kn.y,mo=Nn!==0?1/Nn:1/0,oo=Mn.x*kn.y-Mn.y*kn.x>0;let _i="miter";_i==="miter"&&mo>2&&(_i="bevel");const _o=(wo,bo,Ro,Go)=>{const Bo=new Vn(wo.x,wo.y),ns=new Vn(wo.x,wo.y);Bo.x-=bo.x*Go,Bo.y-=bo.y*Go,ns.x-=bo.x*Math.max(Ro,1),ns.y-=bo.y*Math.max(Ro,1),gn.push(bo),xn.push(Bo),$n.push(ns)};if(_i==="miter")Kn._mult(mo),_o(jn,Kn,1,0);else{const wo=-Math.sqrt(mo*mo-1),bo=oo?wo:0,Ro=oo?0:wo;vn&&_o(jn,Mn,bo,Ro),Bn&&_o(jn,kn,bo,Ro)}}return Cn.geometry=[...xn,...$n.reverse(),xn[0]],Cn.joinNormals=[...gn,...gn.reverse(),gn[gn.length-1]],Cn}(lt[0]),lt=[gr.geometry]}const pr=(an,Qr)=>an<(Qr.length-1)/2||an===Qr.length-1,xr=this.wallMode?[lt]:n1(lt,500);for(let an=xr.length-1;an>=0;an--){const Qr=xr[an];(Qr.length===0||(Pr=Qr[0]).every(yn=>yn.x<=0)||Pr.every(yn=>yn.x>=Ln)||Pr.every(yn=>yn.y<=0)||Pr.every(yn=>yn.y>=Ln))&&xr.splice(an,1)}var Pr;let Rr;if(zt)Rr=nA(xr,Lt,ft);else{Rr=[];for(const an of xr)Rr.push({polygon:an,bounds:Lt})}const Dr=Wt?this.edgeRadius:0,Hr=Dr>0&&this.zoom<17,Jr=(an,Qr)=>{if(an.length===0)return!1;const yn=an[an.length-1];return Qr.x===yn.x&&Qr.y===yn.y};for(const{polygon:an,bounds:Qr}of Rr){let yn=0,Cn=0;for(const En of an)Wt&&!En[0].equals(En[En.length-1])&&En.push(En[0]),Cn+=Wt?En.length-1:En.length;const xn=this.segments.prepareSegment((Wt?5:4)*Cn,this.layoutVertexArray,this.indexArray);Xt.footprintSegIdx<0&&(Xt.footprintSegIdx=this.footprintSegments.length),Xt.polygonSegIdx<0&&(Xt.polygonSegIdx=this.polygonSegments.length);const $n={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},gn=new HT;if(gn.vertexOffset=this.footprintVertices.length,gn.indexOffset=3*this.footprintIndices.length,gn.ringIndices=[],Wt){const En=[],jn=[];yn=xn.vertexLength;for(let Bn=0;Bn<an.length;Bn++){const Mn=an[Bn];Mn.length&&Bn!==0&&jn.push(En.length/2);const kn=[];let ao,io;ao=Mn[1].sub(Mn[0])._perp()._unit(),gn.ringIndices.push(Mn.length-1);for(let Kn=1;Kn<Mn.length;Kn++){const Nn=Mn[Kn],mo=Mn[Kn===Mn.length-1?1:Kn+1],oo=Nn.clone();if(Dr){io=mo.sub(Nn)._perp()._unit();const _i=ao.add(io)._unit(),_o=Dr*Math.min(4,1/(ao.x*_i.x+ao.y*_i.y));oo.x+=_o*_i.x,oo.y+=_o*_i.y,oo.x=Math.round(oo.x),oo.y=Math.round(oo.y),ao=io}if(!Jt||Dr!==0&&!Hr||Jr(kn,oo)||kn.push(oo),fv(this.layoutVertexArray,oo.x,oo.y,0,0,1,1,0),this.wallMode){const _i=pr(Kn,Mn);pv(this.wallVertexArray,gr.joinNormals[Kn],_i,gr.isPolygon)}xn.vertexLength++,this.footprintVertices.emplaceBack(Nn.x,Nn.y),En.push(Nn.x,Nn.y),zt&&mv(this.layoutVertexExtArray,Bt.projectTilePoint(oo.x,oo.y,ft),Bt.upVector(ft,oo.x,oo.y))}Jt&&(Dr===0||Hr)&&(kn.length!==0&&Jr(kn,kn[0])&&kn.pop(),this.groundEffect.addData(kn,Qr,Ct))}const vn=cv(En,jn);for(let Bn=0;Bn<vn.length;Bn+=3)this.footprintIndices.emplaceBack(gn.vertexOffset+vn[Bn+0],gn.vertexOffset+vn[Bn+1],gn.vertexOffset+vn[Bn+2]),this.indexArray.emplaceBack(yn+vn[Bn],yn+vn[Bn+2],yn+vn[Bn+1]),xn.primitiveLength++;gn.indexCount+=vn.length,gn.vertexCount+=this.footprintVertices.length-gn.vertexOffset}for(let En=0;En<an.length;En++){const jn=an[En];qt.startRing(Xt,jn[0]);let vn=jn.length>4&&eA(jn[jn.length-2],jn[0],jn[1]),Bn=Dr?zR(jn[jn.length-2],jn[0],jn[1],Dr):0;const Mn=[];let kn,ao,io;ao=jn[1].sub(jn[0])._perp()._unit();let Kn=!0;for(let Nn=1,mo=0;Nn<jn.length;Nn++){let oo=jn[Nn-1],_i=jn[Nn];const _o=jn[Nn===jn.length-1?1:Nn+1];if(qt.appendEdge(Xt,_i,oo),yE(_i,oo,Qr)){Dr&&(ao=_o.sub(_i)._perp()._unit(),Kn=!Kn);continue}const wo=_i.sub(oo)._perp(),bo=wo.x/(Math.abs(wo.x)+Math.abs(wo.y)),Ro=wo.y>0?1:0,Go=oo.dist(_i);if(mo+Go>32768&&(mo=0),Dr){io=_o.sub(_i)._perp()._unit();let Eo=JT(oo,_i,_o,XT(ao,io),Dr);isNaN(Eo)&&(Eo=0);const $a=_i.sub(oo)._unit();oo=oo.add($a.mult(Bn))._round(),_i=_i.add($a.mult(-Eo))._round(),Bn=Eo,ao=io,Jt&&this.zoom>=17&&(Jr(Mn,oo)||Mn.push(oo),Jr(Mn,_i)||Mn.push(_i))}const Bo=xn.vertexLength,ns=jn.length>4&&eA(oo,_i,_o);let as=tA(mo,vn,Kn);if(fv(this.layoutVertexArray,oo.x,oo.y,bo,Ro,0,0,as),fv(this.layoutVertexArray,oo.x,oo.y,bo,Ro,0,1,as),this.wallMode){const Eo=pr(Nn-1,jn),$a=gr.joinNormals[Nn-1];pv(this.wallVertexArray,$a,!Eo,gr.isPolygon),pv(this.wallVertexArray,$a,!Eo,gr.isPolygon)}if(mo+=Go,as=tA(mo,ns,!Kn),vn=ns,fv(this.layoutVertexArray,_i.x,_i.y,bo,Ro,0,0,as),fv(this.layoutVertexArray,_i.x,_i.y,bo,Ro,0,1,as),this.wallMode){const Eo=pr(Nn,jn),$a=gr.joinNormals[Nn];pv(this.wallVertexArray,$a,!Eo,gr.isPolygon),pv(this.wallVertexArray,$a,!Eo,gr.isPolygon)}if(xn.vertexLength+=4,this.indexArray.emplaceBack(Bo+0,Bo+1,Bo+2),this.indexArray.emplaceBack(Bo+1,Bo+3,Bo+2),xn.primitiveLength+=2,Dr){const Eo=yn+(Nn===1?jn.length-2:Nn-2),$a=Nn===1?yn:Eo+1;if(this.indexArray.emplaceBack(Bo+1,Eo,Bo+3),this.indexArray.emplaceBack(Eo,$a,Bo+3),xn.primitiveLength+=2,kn===void 0&&(kn=Bo),!yE(_o,jn[Nn],Qr)){const es=Nn===jn.length-1?kn:xn.vertexLength;this.indexArray.emplaceBack(Bo+2,Bo+3,es),this.indexArray.emplaceBack(Bo+3,es+1,es),this.indexArray.emplaceBack(Bo+3,$a,es+1),xn.primitiveLength+=3}Kn=!Kn}if(zt){const Eo=this.layoutVertexExtArray,$a=Bt.projectTilePoint(oo.x,oo.y,ft),es=Bt.projectTilePoint(_i.x,_i.y,ft),cs=Bt.upVector(ft,oo.x,oo.y),vs=Bt.upVector(ft,_i.x,_i.y);mv(Eo,$a,cs),mv(Eo,$a,cs),mv(Eo,es,vs),mv(Eo,es,vs)}}Wt&&(yn+=jn.length-1),Jt&&Dr&&this.zoom>=17&&(Mn.length!==0&&Jr(Mn,Mn[0])&&Mn.pop(),this.groundEffect.addData(Mn,Qr,Ct,Dr>0))}this.footprintSegments.push(gn),$n.triangleCount=this.indexArray.length-$n.triangleArrayOffset,this.polygonSegments.push($n),++Xt.footprintSegLen,++Xt.polygonSegLen}if(Xt.vertexCount=this.layoutVertexArray.length-Xt.vertexArrayOffset,Xt.groundVertexCount=this.groundEffect.vertexArray.length-Xt.groundVertexArrayOffset,Xt.vertexCount!==0){if(Xt.centroidXY=qt.borders?WT:this.encodeCentroid(qt,Xt),this.centroidData.push(Xt),qt.borders){this.featuresOnBorder.push(qt);const an=this.featuresOnBorder.length-1;for(let Qr=0;Qr<qt.borders.length;Qr++)qt.borders[Qr][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[Qr].push(an)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,nt,dt,mt,yt,ft,At),this.groundEffect.addPaintPropertiesData(nt,dt,mt,yt,ft,At),this.maxHeight=Math.max(this.maxHeight,nr)}}sortBorders(){for(let nt=0;nt<this.borderFeatureIndices.length;nt++)this.borderFeatureIndices[nt].sort((lt,dt)=>this.featuresOnBorder[lt].borders[nt][0]-this.featuresOnBorder[dt].borders[nt][0])}splitToSubtiles(){const nt=[];for(let Et=0;Et<this.centroidData.length;Et++){const At=this.centroidData[Et],Ct=+(At.min.y+At.max.y>Ln),Lt=2*Ct+(+(At.min.x+At.max.x>Ln)^Ct);for(let Bt=0;Bt<At.polygonSegLen;Bt++){const zt=At.polygonSegIdx+Bt;nt.push({centroidIdx:Et,subtile:Lt,polygonSegmentIdx:zt,triangleSegmentIdx:this.polygonSegments[zt].triangleSegIdx})}}const lt=new Fs;nt.sort((Et,At)=>Et.triangleSegmentIdx===At.triangleSegmentIdx?Et.subtile-At.subtile:Et.triangleSegmentIdx-At.triangleSegmentIdx);let dt=0,ft=0,mt=0;for(const Et of nt){if(Et.triangleSegmentIdx!==dt)break;mt++}const yt=nt.length;for(;ft!==nt.length;){dt=nt[ft].triangleSegmentIdx;let Et=0,At=ft,Ct=ft;for(let Lt=At;Lt<mt&&nt[Lt].subtile===Et;Lt++)Ct++;for(;At!==mt;){const Lt=nt[At];Et=Lt.subtile;const Bt=this.centroidData[Lt.centroidIdx].min.clone(),zt=this.centroidData[Lt.centroidIdx].max.clone(),Wt={vertexOffset:this.segments.segments[dt].vertexOffset,primitiveOffset:lt.length,vertexLength:this.segments.segments[dt].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let qt=At;qt<Ct;qt++){const Xt=nt[qt],Jt=this.polygonSegments[Xt.polygonSegmentIdx],nr=this.centroidData[Xt.centroidIdx].min,gr=this.centroidData[Xt.centroidIdx].max,pr=this.indexArray.uint16;for(let xr=Jt.triangleArrayOffset;xr<Jt.triangleArrayOffset+Jt.triangleCount;xr++)lt.emplaceBack(pr[3*xr],pr[3*xr+1],pr[3*xr+2]);Wt.primitiveLength+=Jt.triangleCount,Bt.x=Math.min(Bt.x,nr.x),Bt.y=Math.min(Bt.y,nr.y),zt.x=Math.max(zt.x,gr.x),zt.y=Math.max(zt.y,gr.y)}Wt.primitiveLength>0&&this.triangleSubSegments.push({segment:Wt,min:Bt,max:zt}),At=Ct;for(let qt=At;qt<mt&&nt[qt].subtile===nt[At].subtile;qt++)Ct++}ft=mt;for(let Lt=ft;Lt<yt&&nt[Lt].triangleSegmentIdx===nt[ft].triangleSegmentIdx;Lt++)mt++}lt._trim(),this.indexArray=lt}getVisibleSegments(nt,lt,dt){const ft=new ms;if(this.wallMode){for(const Xt of this.triangleSubSegments)ft.segments.push(Xt.segment);return ft}let mt=0,yt=0;const Et=1<<nt.canonical.z;if(lt){const Xt=lt.getMinMaxForTile(nt);Xt&&(mt=Xt.min,yt=Xt.max)}yt+=this.maxHeight;const At=nt.toUnwrapped();let Ct;const Lt=[At.canonical.x/Et+At.wrap,At.canonical.y/Et],Bt=[(At.canonical.x+1)/Et+At.wrap,(At.canonical.y+1)/Et],zt=(Xt,Jt,nr)=>[Xt[0]*(1-nr[0])+Jt[0]*nr[0],Xt[1]*(1-nr[1])+Jt[1]*nr[1]],Wt=[],qt=[];for(const Xt of this.triangleSubSegments){Wt[0]=Xt.min.x/Ln,Wt[1]=Xt.min.y/Ln,qt[0]=Xt.max.x/Ln,qt[1]=Xt.max.y/Ln;const Jt=zt(Lt,Bt,Wt),nr=zt(Lt,Bt,qt);if(new fs([Jt[0],Jt[1],mt],[nr[0],nr[1],yt]).intersectsPrecise(dt)===0){Ct&&(ft.segments.push(Ct),Ct=void 0);continue}const gr=Xt.segment;Ct&&Ct.vertexOffset!==gr.vertexOffset&&(ft.segments.push(Ct),Ct=void 0),Ct?(Ct.vertexLength+=gr.vertexLength,Ct.primitiveLength+=gr.primitiveLength):Ct={vertexOffset:gr.vertexOffset,primitiveLength:gr.primitiveLength,vertexLength:gr.vertexLength,primitiveOffset:gr.primitiveOffset,sortKey:void 0,vaos:{}}}return Ct&&ft.segments.push(Ct),ft}encodeCentroid(nt,lt){const dt=nt.centroid(),ft=lt.span(),mt=Math.min(7,Math.round(ft.x*this.tileToMeter/10)),yt=Math.min(7,Math.round(ft.y*this.tileToMeter/10));return new Vn(jo(dt.x,1,Ln-1)<<3|mt,jo(dt.y,1,Ln-1)<<3|yt)}encodeBorderCentroid(nt){if(!nt.borders)return new Vn(0,0);const lt=nt.borders,dt=Number.MAX_VALUE;if(lt[0][0]!==dt||lt[1][0]!==dt){const ft=lt[0][0]!==dt?0:1;return new Vn(6|(lt[0][0]!==dt?0:65528),(lt[ft][0]+lt[ft][1])/2<<3|6)}{const ft=lt[2][0]!==dt?2:3;return new Vn((lt[ft][0]+lt[ft][1])/2<<3|6,6|(lt[2][0]!==dt?0:65528))}}showCentroid(nt){const lt=this.centroidData[nt.centroidDataIndex];lt.flags&=xm,lt.centroidXY.x=0,lt.centroidXY.y=0,this.writeCentroidToBuffer(lt)}writeCentroidToBuffer(nt){this.groundEffect.updateHiddenByLandmark(nt);const lt=nt.vertexArrayOffset,dt=nt.vertexCount+nt.vertexArrayOffset,ft=nt.flags&xm?WT:nt.centroidXY,mt=this.centroidVertexArray.geta_centroid_pos0(lt);if(this.centroidVertexArray.geta_centroid_pos1(lt)!==ft.y||mt!==ft.x){for(let yt=lt;yt<dt;++yt)this.centroidVertexArray.emplace(yt,ft.x,ft.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const nt of this.centroidData)this.writeCentroidToBuffer(nt)}updateReplacement(nt,lt,dt){if(lt.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=lt.updateTime;const ft=lt.getReplacementRegionsForTile(nt.toUnwrapped());if(gE(this.activeReplacements,ft))return;if(this.activeReplacements=ft,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const yt of this.centroidData)yt.flags&=2147483647;const mt=[];for(const yt of this.activeReplacements){if(yt.order<dt)continue;const Et=Math.pow(2,yt.footprintTileId.canonical.z-nt.canonical.z);for(const At of this.centroidData)if(!(At.flags&xm||yt.min.x>At.max.x||At.min.x>yt.max.x||yt.min.y>At.max.y||At.min.y>yt.max.y))for(let Ct=0;Ct<At.footprintSegLen;Ct++){const Lt=this.footprintSegments[At.footprintSegIdx+Ct];if(mt.length=0,VR(this.footprintVertices,Lt.vertexOffset,Lt.vertexCount,yt.footprintTileId.canonical,nt.canonical,mt),MT(yt.footprint,mt,this.footprintIndices.uint16,Lt.indexOffset,Lt.indexCount,-Lt.vertexOffset,-Et)){At.flags|=xm;break}}}for(const yt of this.centroidData)this.writeCentroidToBuffer(yt);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(nt,lt,dt){let ft=!1;for(let mt=0;mt<dt.footprintSegLen;mt++){const yt=this.footprintSegments[dt.footprintSegIdx+mt];let Et=0;for(const At of yt.ringIndices){for(let Ct=Et,Lt=At+Et-1;Ct<At+Et;Lt=Ct++){const Bt=this.footprintVertices.int16[2*(Ct+yt.vertexOffset)+0],zt=this.footprintVertices.int16[2*(Ct+yt.vertexOffset)+1],Wt=this.footprintVertices.int16[2*(Lt+yt.vertexOffset)+1];zt>lt!=Wt>lt&&nt<(this.footprintVertices.int16[2*(Lt+yt.vertexOffset)+0]-Bt)*(lt-zt)/(Wt-zt)+Bt&&(ft=!ft)}Et=At}}return ft}getHeightAtTileCoord(nt,lt){let dt=Number.NEGATIVE_INFINITY,ft=!0;const mt=4*(nt+Ln)*Ln+(lt+Ln);if(this.partLookup.hasOwnProperty(mt)){const yt=this.partLookup[mt];return yt?{height:yt.height,hidden:!!(yt.flags&xm)}:void 0}for(const yt of this.centroidData)nt>yt.max.x||yt.min.x>nt||lt>yt.max.y||yt.min.y>lt||this.footprintContainsPoint(nt,lt,yt)&&yt&&yt.height>dt&&(dt=yt.height,this.partLookup[mt]=yt,ft=!!(yt.flags&xm));if(dt!==Number.NEGATIVE_INFINITY)return{height:dt,hidden:ft};this.partLookup[mt]=void 0}}function XT(ot,nt){const lt=ot.add(nt)._unit();return ot.x*lt.x+ot.y*lt.y}function zR(ot,nt,lt,dt){const ft=nt.sub(ot)._perp()._unit(),mt=lt.sub(nt)._perp()._unit();return JT(ot,nt,lt,XT(ft,mt),dt)}function JT(ot,nt,lt,dt,ft){const mt=Math.sqrt(1-dt*dt);return Math.min(ot.dist(nt)/3,nt.dist(lt)/3,ft*mt/dt)}function yE(ot,nt,lt){return ot.x<lt[0].x&&nt.x<lt[0].x||ot.x>lt[1].x&&nt.x>lt[1].x||ot.y<lt[0].y&&nt.y<lt[0].y||ot.y>lt[1].y&&nt.y>lt[1].y}function QT(ot,nt){return ot.x<nt[0].x||ot.x>nt[1].x||ot.y<nt[0].y||ot.y>nt[1].y}function eA(ot,nt,lt){if(ot.x<0||ot.x>=Ln||nt.x<0||nt.x>=Ln||lt.x<0||lt.x>=Ln)return!1;const dt=lt.sub(nt),ft=dt.perp(),mt=ot.sub(nt);return(dt.x*mt.x+dt.y*mt.y)/Math.sqrt((dt.x*dt.x+dt.y*dt.y)*(mt.x*mt.x+mt.y*mt.y))>-.866&&ft.x*mt.x+ft.y*mt.y<0}function tA(ot,nt,lt){const dt=nt?2|ot:-3&ot;return lt?1|dt:-2&dt}function rA(){const ot=Math.PI/32,nt=Math.tan(ot),lt=R0;return lt*Math.sqrt(1+2*nt*nt)-lt}function nA(ot,nt,lt){const dt=1<<lt.z,ft=Zl(lt.x/dt),mt=Zl((lt.x+1)/dt),yt=Ws(lt.y/dt),Et=Ws((lt.y+1)/dt);return function(At,Ct,Lt,Bt,zt=0,Wt){const qt=[];if(!At.length||!Lt||!Bt)return qt;const Xt=(Rr,Dr)=>{for(const Hr of Rr)qt.push({polygon:Hr,bounds:Dr})},Jt=Math.ceil(Math.log2(Lt)),nr=Math.ceil(Math.log2(Bt)),gr=Jt-nr,pr=[];for(let Rr=0;Rr<Math.abs(gr);Rr++)pr.push(gr>0?0:1);for(let Rr=0;Rr<Math.min(Jt,nr);Rr++)pr.push(0),pr.push(1);let xr=At;if(xr=s1(xr,Ct[0].y-zt,Ct[1].y+zt,1),xr=s1(xr,Ct[0].x-zt,Ct[1].x+zt,0),!xr.length)return qt;const Pr=[];for(pr.length?Pr.push({polygons:xr,bounds:Ct,depth:0}):Xt(xr,Ct);Pr.length;){const Rr=Pr.pop(),Dr=Rr.depth,Hr=pr[Dr],Jr=Rr.bounds[0],an=Rr.bounds[1],Qr=Hr===0?Jr.x:Jr.y,yn=Hr===0?an.x:an.y,Cn=Wt?Wt(Hr,Qr,yn):.5*(Qr+yn),xn=s1(Rr.polygons,Qr-zt,Cn+zt,Hr),$n=s1(Rr.polygons,Cn-zt,yn+zt,Hr);if(xn.length){const gn=[Jr,new Vn(Hr===0?Cn:an.x,Hr===1?Cn:an.y)];pr.length>Dr+1?Pr.push({polygons:xn,bounds:gn,depth:Dr+1}):Xt(xn,gn)}if($n.length){const gn=[new Vn(Hr===0?Cn:Jr.x,Hr===1?Cn:Jr.y),an];pr.length>Dr+1?Pr.push({polygons:$n,bounds:gn,depth:Dr+1}):Xt($n,gn)}}return qt}(ot,nt,Math.ceil((mt-ft)/11.25),Math.ceil((yt-Et)/11.25),1,(At,Ct,Lt)=>{if(At===0)return .5*(Ct+Lt);{const Bt=Ws((lt.y+Ct/Ln)/dt);return(tp(.5*(Ws((lt.y+Lt/Ln)/dt)+Bt))*dt-lt.y)*Ln}})}function VR(ot,nt,lt,dt,ft,mt){const yt=Math.pow(2,dt.z-ft.z);for(let Et=0;Et<lt;Et++){let At=ot.int16[2*(Et+nt)+0],Ct=ot.int16[2*(Et+nt)+1];At=(At+ft.x*Ln)*yt-dt.x*Ln,Ct=(Ct+ft.y*Ln)*yt-dt.y*Ln,mt.push(new Vn(At,Ct))}}let iA,oA;function gv(ot,nt){return ot.x*nt.x+ot.y*nt.y}function aA(ot,nt){if(ot.length===1){let lt=0;const dt=nt[lt++];let ft;for(;!ft||dt.equals(ft);)if(ft=nt[lt++],!ft)return 1/0;for(;lt<nt.length;lt++){const mt=nt[lt],yt=ot[0],Et=ft.sub(dt),At=mt.sub(dt),Ct=yt.sub(dt),Lt=gv(Et,Et),Bt=gv(Et,At),zt=gv(At,At),Wt=gv(Ct,Et),qt=gv(Ct,At),Xt=Lt*zt-Bt*Bt,Jt=(zt*Wt-Bt*qt)/Xt,nr=(Lt*qt-Bt*Wt)/Xt,gr=dt.z*(1-Jt-nr)+ft.z*Jt+mt.z*nr;if(isFinite(gr))return gr}return 1/0}{let lt=1/0;for(const dt of nt)lt=Math.min(lt,dt.z);return lt}}function sA(ot,nt,lt,dt,ft,mt,yt,Et){const At=yt*ft.getElevationAt(ot,nt,!0,!0),Ct=mt[0]!==0,Lt=Ct?mt[1]===0?yt*(mt[0]/7-450):yt*function(Bt,zt,Wt){const qt=Math.floor(zt[0]/8),Xt=Math.floor(zt[1]/8),Jt=10*(zt[0]-8*qt),nr=10*(zt[1]-8*Xt),gr=Bt.getElevationAt(qt,Xt,!0,!0),pr=Bt.getMeterToDEM(Wt),xr=Math.floor(.5*(Jt*pr-1)),Pr=Math.floor(.5*(nr*pr-1)),Rr=Bt.tileCoordToPixel(qt,Xt),Dr=2*xr+1,Hr=2*Pr+1,Jr=function($n,gn,En,jn,vn){return[$n.getElevationAtPixel(gn,En,!0),$n.getElevationAtPixel(gn+vn,En,!0),$n.getElevationAtPixel(gn,En+vn,!0),$n.getElevationAtPixel(gn+jn,En+vn,!0)]}(Bt,Rr.x-xr,Rr.y-Pr,Dr,Hr),an=Math.abs(Jr[0]-Jr[1]),Qr=Math.abs(Jr[2]-Jr[3]),yn=Math.abs(Jr[0]-Jr[2])+Math.abs(Jr[1]-Jr[3]),Cn=Math.min(.25,.5*pr*(an+Qr)/Dr),xn=Math.min(.25,.5*pr*yn/Hr);return gr+Math.max(Cn*Jt,xn*nr)}(ft,mt,Et):At;return{base:At+(lt===0)?-1:lt,top:Ct?Math.max(Lt+dt,At+lt+2):At+dt}}Wr(h1,"FillExtrusionBucket",{omit:["layers","features"]}),Wr(ZT,"PartData"),Wr(HT,"FootprintSegment"),Wr(qT,"BorderCentroidData"),Wr(YT,"GroundEffect");const UR=ba([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:GR}=UR,WR=ba([{name:"a_packed",components:4,type:"Float32"}]),{members:HR}=WR,ZR=ba([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:qR}=ZR,KR=ba([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),YR=ba([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),XR=ba([{name:"a_projected_pos",components:4,type:"Float32"}],4);ba([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const lA=ba([{name:"a_z_offset",components:1,type:"Float32"}],4),JR=ba([{name:"a_texb",components:2,type:"Uint16"}]),QR=ba([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),eI=ba([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_z_offset",components:1,type:"Float32"}]);ba([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cA=ba([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),tI=ba([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ba([{name:"triangle",components:3,type:"Uint16"}]),ba([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ba([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),ba([{type:"Float32",name:"offsetX"}]),ba([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);class uA{constructor(nt,lt){this.width=nt,this.height=lt,this.nextRow=0,this.image=new gm({width:nt,height:lt}),this.positions={},this.uploaded=!1}getDash(nt,lt){const dt=this.getKey(nt,lt);return this.positions[dt]}trim(){const nt=this.width,lt=this.height=fp(this.nextRow);this.image.resize({width:nt,height:lt})}getKey(nt,lt){return nt.join(",")+lt}getDashRanges(nt,lt,dt){const ft=[];let mt=nt.length%2==1?-nt[nt.length-1]*dt:0,yt=nt[0]*dt,Et=!0;ft.push({left:mt,right:yt,isDash:Et,zeroLength:nt[0]===0});let At=nt[0];for(let Ct=1;Ct<nt.length;Ct++){Et=!Et;const Lt=nt[Ct];mt=At*dt,At+=Lt,yt=At*dt,ft.push({left:mt,right:yt,isDash:Et,zeroLength:Lt===0})}return ft}addRoundDash(nt,lt,dt){const ft=lt/2;for(let mt=-dt;mt<=dt;mt++){const yt=this.width*(this.nextRow+dt+mt);let Et=0,At=nt[Et];for(let Ct=0;Ct<this.width;Ct++){Ct/At.right>1&&(At=nt[++Et]);const Lt=Math.abs(Ct-At.left),Bt=Math.abs(Ct-At.right),zt=Math.min(Lt,Bt);let Wt;const qt=mt/dt*(ft+1);if(At.isDash){const Xt=ft-Math.abs(qt);Wt=Math.sqrt(zt*zt+Xt*Xt)}else Wt=ft-Math.sqrt(zt*zt+qt*qt);this.image.data[yt+Ct]=Math.max(0,Math.min(255,Wt+128))}}}addRegularDash(nt,lt){for(let At=nt.length-1;At>=0;--At){const Ct=nt[At],Lt=nt[At+1];Ct.zeroLength?nt.splice(At,1):Lt&&Lt.isDash===Ct.isDash&&(Lt.left=Ct.left,nt.splice(At,1))}const dt=nt[0],ft=nt[nt.length-1];dt.isDash===ft.isDash&&(dt.left=ft.left-this.width,ft.right=dt.right+this.width);const mt=this.width*this.nextRow;let yt=0,Et=nt[yt];for(let At=0;At<this.width;At++){At/Et.right>1&&(Et=nt[++yt]);const Ct=Math.abs(At-Et.left),Lt=Math.abs(At-Et.right),Bt=Math.min(Ct,Lt);this.image.data[mt+At]=Math.max(0,Math.min(255,(Et.isDash?Bt:-Bt)+lt+128))}}addDash(nt,lt){const dt=this.getKey(nt,lt);if(this.positions[dt])return this.positions[dt];const ft=lt==="round",mt=ft?7:0,yt=2*mt+1;if(this.nextRow+yt>this.height)return Ts("LineAtlas out of space"),null;nt.length===0&&nt.push(1);let Et=0;for(let Lt=0;Lt<nt.length;Lt++)nt[Lt]<0&&(Ts("Negative value is found in line dasharray, replacing values with 0"),nt[Lt]=0),Et+=nt[Lt];if(Et!==0){const Lt=this.width/Et,Bt=this.getDashRanges(nt,this.width,Lt);ft?this.addRoundDash(Bt,Lt,mt):this.addRegularDash(Bt,lt==="square"?.5*Lt:0)}const At=this.nextRow+mt;this.nextRow+=yt;const Ct={tl:[At,mt],br:[Et,0]};return this.positions[dt]=Ct,Ct}}Wr(uA,"LineAtlas");const rI=a1.types,nI=Math.cos(Math.PI/180*37.5),iI=Math.cos(Math.PI/180*5);class f1{constructor(nt){this.zoom=nt.zoom,this.overscaling=nt.overscaling,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.index=nt.index,this.projection=nt.projection,this.hasPattern=!1,this.hasZOffset=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(lt=>{this.gradients[lt.id]={}}),this.layoutVertexArray=new ww,this.layoutVertexArray2=new lm,this.patternVertexArray=new cm,this.indexArray=new Fs,this.programConfigurations=new fm(nt.layers,{zoom:nt.zoom,lut:nt.lut}),this.segments=new ms,this.maxLineLength=0,this.zOffsetVertexArray=new A0,this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id),this.tessellationStep=nt.tessellationStep?nt.tessellationStep:Ln/64}updateFootprints(nt,lt){}populate(nt,lt,dt,ft){this.hasPattern=dE("line",this.layers,lt);const mt=this.layers[0].layout.get("line-sort-key"),yt=this.layers[0].layout.get("line-z-offset");this.hasZOffset=!yt.isConstant()||!!yt.constantOr(0);const Et=[];for(const{feature:Bt,id:zt,index:Wt,sourceLayerIndex:qt}of nt){const Xt=this.layers[0]._featureFilter.needGeometry,Jt=Rp(Bt,Xt);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),Jt,dt))continue;const nr=mt?mt.evaluate(Jt,{},dt):void 0,gr={id:zt,properties:Bt.properties,type:Bt.type,sourceLayerIndex:qt,index:Wt,geometry:Xt?Jt.geometry:Ou(Bt,dt,ft),patterns:{},sortKey:nr};Et.push(gr)}mt&&Et.sort((Bt,zt)=>Bt.sortKey-zt.sortKey);const{lineAtlas:At,featureIndex:Ct}=lt,Lt=this.addConstantDashes(At);for(const Bt of Et){const{geometry:zt,index:Wt,sourceLayerIndex:qt}=Bt;if(Lt&&this.addFeatureDashes(Bt,At),this.hasPattern){const Xt=hE("line",this.layers,Bt,this.zoom,lt);this.patternFeatures.push(Xt)}else this.addFeature(Bt,zt,Wt,dt,At.positions,lt.availableImages,lt.brightness);Ct.insert(nt[Wt].feature,zt,Wt,qt,this.index)}}addConstantDashes(nt){let lt=!1;for(const dt of this.layers){const ft=dt.paint.get("line-dasharray").value,mt=dt.layout.get("line-cap").value;if(ft.kind!=="constant"||mt.kind!=="constant")lt=!0;else{const yt=mt.value,Et=ft.value;if(!Et)continue;nt.addDash(Et,yt)}}return lt}addFeatureDashes(nt,lt){const dt=this.zoom;for(const ft of this.layers){const mt=ft.paint.get("line-dasharray").value,yt=ft.layout.get("line-cap").value;if(mt.kind==="constant"&&yt.kind==="constant")continue;let Et,At;if(mt.kind==="constant"){if(Et=mt.value,!Et)continue}else Et=mt.evaluate({zoom:dt},nt);At=yt.kind==="constant"?yt.value:yt.evaluate({zoom:dt},nt),lt.addDash(Et,At),nt.patterns[ft.id]=lt.getKey(Et,At)}}update(nt,lt,dt,ft,mt){const yt=Object.keys(nt).length!==0;yt&&!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(nt,lt,yt?this.stateDependentLayers:this.layers,dt,ft,mt)}addFeatures(nt,lt,dt,ft,mt,yt){for(const Et of this.patternFeatures)this.addFeature(Et,Et.geometry,Et.index,lt,dt,ft,yt)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(nt){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=nt.createVertexBuffer(this.layoutVertexArray2,HR)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=nt.createVertexBuffer(this.patternVertexArray,qR)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=nt.createVertexBuffer(this.zOffsetVertexArray,lA.members,!0)),this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,GR),this.indexBuffer=nt.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(nt),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(nt){if(nt.properties&&nt.properties.hasOwnProperty("mapbox_clip_start")&&nt.properties.hasOwnProperty("mapbox_clip_end"))return{start:+nt.properties.mapbox_clip_start,end:+nt.properties.mapbox_clip_end}}addFeature(nt,lt,dt,ft,mt,yt,Et){const At=this.layers[0].layout,Ct=At.get("line-join").evaluate(nt,{}),Lt=At.get("line-cap").evaluate(nt,{}),Bt=At.get("line-miter-limit"),zt=At.get("line-round-limit");this.lineClips=this.lineFeatureClips(nt);for(const Wt of lt)this.addLine(Wt,nt,ft,Ct,Lt,Bt,zt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,nt,dt,mt,yt,ft,Et)}addLine(nt,lt,dt,ft,mt,yt,Et){this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.currentVertex=void 0;const At={zoom:this.zoom,lineProgress:void 0},Ct=this.layers[0].layout,Lt=ft==="none";if(this.patternJoinNone=this.hasPattern&&Lt,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Rr=0;Rr<nt.length-1;Rr++)this.totalDistance+=nt[Rr].dist(nt[Rr+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Bt=rI[lt.type]==="Polygon";let zt=nt.length;for(;zt>=2&&nt[zt-1].equals(nt[zt-2]);)zt--;let Wt=0;for(;Wt<zt-1&&nt[Wt].equals(nt[Wt+1]);)Wt++;if(zt<(Bt?3:2))return;ft==="bevel"&&(yt=1.05);const qt=this.overscaling<=16?15*Ln/(512*this.overscaling):0,Xt=this.segments.prepareSegment(10*zt,this.layoutVertexArray,this.indexArray);let Jt,nr,gr,pr,xr,Pr;this.e1=this.e2=-1,Bt&&(Jt=nt[zt-2],xr=nt[Wt].sub(Jt)._unit()._perp());for(let Rr=Wt;Rr<zt;Rr++){if(gr=Rr===zt-1?Bt?nt[Wt+1]:void 0:nt[Rr+1],gr&&nt[Rr].equals(gr))continue;if(xr&&(pr=xr),Jt&&(nr=Jt),Jt=nt[Rr],this.hasZOffset){const gn=Ct.get("line-z-offset").value;if(gn.kind==="constant")Pr=gn.value;else{if(this.lineClips){const En=this.totalDistance/(this.lineClips.end-this.lineClips.start);At.lineProgress=(En*this.lineClips.start+this.distance+(nr?nr.dist(Jt):0))/En}else Ts(`line-z-offset evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`),At.lineProgress=0;Pr=gn.evaluate(At,lt)}Pr=Pr||0}xr=gr?gr.sub(Jt)._unit()._perp():pr,pr=pr||xr;const Dr=nr&&gr;let Hr=Dr?ft:Bt||Lt?"butt":mt;const Jr=pr.x*xr.x+pr.y*xr.y;if(Lt){const gn=function(En){if(En.patternJoinNone){const jn=En.segmentPoints.length/2,vn=En.lineSoFar-En.segmentStart;for(let Bn=0;Bn<jn;++Bn){const Mn=En.segmentPoints[2*Bn+1],kn=Math.round(En.segmentPoints[2*Bn])+.5+.25*Mn;En.patternVertexArray.emplaceBack(kn,vn,En.segmentStart),En.patternVertexArray.emplaceBack(kn,vn,En.segmentStart)}En.segmentPoints.length=0}En.e1=En.e2=-1};if(Dr&&Jr<iI){this.updateDistance(nr,Jt),this.addCurrentVertex(Jt,pr,1,1,Xt,Pr),gn(this),this.addCurrentVertex(Jt,xr,-1,-1,Xt,Pr);continue}if(nr){if(!gr){this.updateDistance(nr,Jt),this.addCurrentVertex(Jt,pr,1,1,Xt,Pr),gn(this);continue}Hr="miter"}}let an=pr.add(xr);an.x===0&&an.y===0||an._unit();const Qr=an.x*xr.x+an.y*xr.y,yn=Qr!==0?1/Qr:1/0,Cn=2*Math.sqrt(2-2*Qr),xn=Qr<nI&&nr&&gr,$n=pr.x*xr.y-pr.y*xr.x>0;if(xn&&Rr>Wt){const gn=Jt.dist(nr);if(gn>2*qt){const En=Jt.sub(Jt.sub(nr)._mult(qt/gn)._round());this.updateDistance(nr,En),this.addCurrentVertex(En,pr,0,0,Xt,Pr),nr=En}}if(Dr&&Hr==="round"&&(yn<Et?Hr="miter":yn<=2&&(Hr="fakeround")),Hr==="miter"&&yn>yt&&(Hr="bevel"),Hr==="bevel"&&(yn>2&&(Hr="flipbevel"),yn<yt&&(Hr="miter")),nr&&this.updateDistance(nr,Jt),Hr==="miter")an._mult(yn),this.addCurrentVertex(Jt,an,0,0,Xt,Pr);else if(Hr==="flipbevel"){if(yn>100)an=xr.mult(-1);else{const gn=yn*pr.add(xr).mag()/pr.sub(xr).mag();an._perp()._mult(gn*($n?-1:1))}this.addCurrentVertex(Jt,an,0,0,Xt,Pr),this.addCurrentVertex(Jt,an.mult(-1),0,0,Xt,Pr)}else if(Hr==="bevel"||Hr==="fakeround"){const gn=-Math.sqrt(yn*yn-1),En=$n?gn:0,jn=$n?0:gn;if(nr&&this.addCurrentVertex(Jt,pr,En,jn,Xt,Pr),Hr==="fakeround"){const vn=Math.round(180*Cn/Math.PI/20);for(let Bn=1;Bn<vn;Bn++){let Mn=Bn/vn;if(Mn!==.5){const ao=Mn-.5;Mn+=Mn*ao*(Mn-1)*((1.0904+Jr*(Jr*(3.55645-1.43519*Jr)-3.2452))*ao*ao+(.848013+Jr*(.215638*Jr-1.06021)))}const kn=xr.sub(pr)._mult(Mn)._add(pr)._unit()._mult($n?-1:1);this.addHalfVertex(Jt,kn.x,kn.y,!1,$n,0,Xt,Pr)}}gr&&this.addCurrentVertex(Jt,xr,-En,-jn,Xt,Pr)}else Hr==="butt"?this.addCurrentVertex(Jt,an,0,0,Xt,Pr):Hr==="square"?(nr||this.addCurrentVertex(Jt,an,-1,-1,Xt,Pr),this.addCurrentVertex(Jt,an,0,0,Xt,Pr),nr&&this.addCurrentVertex(Jt,an,1,1,Xt,Pr)):Hr==="round"&&(nr&&(this.addCurrentVertex(Jt,pr,0,0,Xt,Pr),this.addCurrentVertex(Jt,pr,1,1,Xt,Pr,!0)),gr&&(this.addCurrentVertex(Jt,xr,-1,-1,Xt,Pr,!0),this.addCurrentVertex(Jt,xr,0,0,Xt,Pr)));if(xn&&Rr<zt-1){const gn=Jt.dist(gr);if(gn>2*qt){const En=Jt.add(gr.sub(Jt)._mult(qt/gn)._round());this.updateDistance(Jt,En),this.addCurrentVertex(En,xr,0,0,Xt,Pr),Jt=En}}}}addVerticesTo(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt){const Bt=(lt.w-nt.w)/this.tessellationStep|0;if(Bt>1){this.lineSoFar=nt.w;const zt=(lt.x-nt.x)/Bt,Wt=(lt.y-nt.y)/Bt,qt=(lt.z-nt.z)/Bt,Xt=(lt.w-nt.w)/Bt;for(let Jt=1;Jt<Bt;++Jt)nt.x+=zt,nt.y+=Wt,nt.z+=qt,this.lineSoFar+=Xt,this.addHalfVertex(nt,dt,ft,Lt,!1,Et,Ct,nt.z),this.addHalfVertex(nt,mt,yt,Lt,!0,-At,Ct,nt.z)}this.lineSoFar=lt.w,this.addHalfVertex(lt,dt,ft,Lt,!1,Et,Ct,lt.z),this.addHalfVertex(lt,mt,yt,Lt,!0,-At,Ct,lt.z)}addCurrentVertex(nt,lt,dt,ft,mt,yt,Et=!1){const At=lt.x+lt.y*dt,Ct=lt.y-lt.x*dt,Lt=lt.y*ft-lt.x,Bt=-lt.y-lt.x*ft;if(yt!=null){const Wt=Ln+10,qt=yt,Xt=new PT(nt.x,nt.y,qt,this.lineSoFar),Jt=dA(nt,-10,Wt),nr=this.lineSoFar;if(this.currentVertex)if(Jt){const gr=this.currentVertexIsOutside,pr=this.currentVertex,xr=new PT(nt.x,nt.y,qt,this.lineSoFar);kT(pr,xr,-10,Wt),dA(xr,-10,Wt)||(gr&&(this.e1=this.e2=-1,this.lineSoFar=pr.w,this.addHalfVertex(pr,At,Ct,Et,!1,dt,mt,pr.z),this.addHalfVertex(pr,Lt,Bt,Et,!0,-ft,mt,pr.z)),this.addVerticesTo(pr,xr,At,Ct,Lt,Bt,dt,ft,mt,Et))}else{const gr=this.currentVertex;this.currentVertexIsOutside&&(kT(gr,Xt,-10,Wt),this.e1=this.e2=-1,this.lineSoFar=gr.w,this.addHalfVertex(gr,At,Ct,Et,!1,dt,mt,gr.z),this.addHalfVertex(gr,Lt,Bt,Et,!0,-ft,mt,gr.z)),this.addVerticesTo(gr,Xt,At,Ct,Lt,Bt,dt,ft,mt,Et)}else Jt||(this.addHalfVertex(nt,At,Ct,Et,!1,dt,mt,yt),this.addHalfVertex(nt,Lt,Bt,Et,!0,-ft,mt,yt));this.currentVertex=Xt,this.currentVertexIsOutside=Jt,this.lineSoFar=nr}else this.addHalfVertex(nt,At,Ct,Et,!1,dt,mt,yt),this.addHalfVertex(nt,Lt,Bt,Et,!0,-ft,mt,yt)}addHalfVertex({x:nt,y:lt},dt,ft,mt,yt,Et,At,Ct){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),yt||this.segmentPoints.push(this.lineSoFar-this.segmentStart,Et)),this.layoutVertexArray.emplaceBack((nt<<1)+(mt?1:0),(lt<<1)+(yt?1:0),Math.round(63*dt)+128,Math.round(63*ft)+128,1+(Et===0?0:Et<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const Lt=At.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Lt),At.primitiveLength++),yt?this.e2=Lt:this.e1=Lt,Ct!=null&&this.zOffsetVertexArray.emplaceBack(Ct)}updateScaledDistance(){if(this.lineClips){const nt=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=nt*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(nt,lt){this.distance+=nt.dist(lt),this.updateScaledDistance()}}function dA(ot,nt,lt){return ot.x<nt||ot.x>lt||ot.y<nt||ot.y>lt}let hA,fA;function pA(ot,nt,lt){return nt*(Ln/(ot.tileSize*Math.pow(2,lt-ot.tileID.overscaledZ)))}function mA(ot,nt){return 1/pA(ot,1,nt.tileZoom)}function gA(ot,nt,lt,dt){return ot.translatePosMatrix(dt||nt.tileID.projMatrix,nt,lt.paint.get("line-translate"),lt.paint.get("line-translate-anchor"))}Wr(f1,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const yA=ot=>{const nt=[];xA(ot)&&nt.push("RENDER_LINE_DASH"),ot.paint.get("line-gradient")&&nt.push("RENDER_LINE_GRADIENT");const lt=ot.paint.get("line-trim-offset");lt[0]===0&&lt[1]===0||nt.push("RENDER_LINE_TRIM_OFFSET"),ot.paint.get("line-border-width").constantOr(1)!==0&&nt.push("RENDER_LINE_BORDER");const dt=ot.layout.get("line-join").constantOr("miter")==="none",ft=!!ot.paint.get("line-pattern").constantOr(1);return dt&&ft&&nt.push("LINE_JOIN_NONE"),nt};function xA(ot){const nt=ot.paint.get("line-dasharray").value;return nt.value||nt.kind!=="constant"}class vA{constructor(nt){this._stringToNumber={},this._numberToString=[];for(let lt=0;lt<nt.length;lt++){const dt=nt[lt];this._stringToNumber[dt]=lt,this._numberToString[lt]=dt}}encode(nt){return this._stringToNumber[nt]}decode(nt){return this._numberToString[nt]}}var oI={read:function(ot,nt,lt,dt,ft){var mt,yt,Et=8*ft-dt-1,At=(1<<Et)-1,Ct=At>>1,Lt=-7,Bt=lt?ft-1:0,zt=lt?-1:1,Wt=ot[nt+Bt];for(Bt+=zt,mt=Wt&(1<<-Lt)-1,Wt>>=-Lt,Lt+=Et;Lt>0;mt=256*mt+ot[nt+Bt],Bt+=zt,Lt-=8);for(yt=mt&(1<<-Lt)-1,mt>>=-Lt,Lt+=dt;Lt>0;yt=256*yt+ot[nt+Bt],Bt+=zt,Lt-=8);if(mt===0)mt=1-Ct;else{if(mt===At)return yt?NaN:1/0*(Wt?-1:1);yt+=Math.pow(2,dt),mt-=Ct}return(Wt?-1:1)*yt*Math.pow(2,mt-dt)},write:function(ot,nt,lt,dt,ft,mt){var yt,Et,At,Ct=8*mt-ft-1,Lt=(1<<Ct)-1,Bt=Lt>>1,zt=ft===23?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=dt?0:mt-1,qt=dt?1:-1,Xt=nt<0||nt===0&&1/nt<0?1:0;for(nt=Math.abs(nt),isNaN(nt)||nt===1/0?(Et=isNaN(nt)?1:0,yt=Lt):(yt=Math.floor(Math.log(nt)/Math.LN2),nt*(At=Math.pow(2,-yt))<1&&(yt--,At*=2),(nt+=yt+Bt>=1?zt/At:zt*Math.pow(2,1-Bt))*At>=2&&(yt++,At/=2),yt+Bt>=Lt?(Et=0,yt=Lt):yt+Bt>=1?(Et=(nt*At-1)*Math.pow(2,ft),yt+=Bt):(Et=nt*Math.pow(2,Bt-1)*Math.pow(2,ft),yt=0));ft>=8;ot[lt+Wt]=255&Et,Wt+=qt,Et/=256,ft-=8);for(yt=yt<<ft|Et,Ct+=ft;Ct>0;ot[lt+Wt]=255&yt,Wt+=qt,yt/=256,Ct-=8);ot[lt+Wt-qt]|=128*Xt}},_A=ps,p1=oI;function ps(ot){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ot)?ot:new Uint8Array(ot||0),this.pos=0,this.type=0,this.length=this.buf.length}ps.Varint=0,ps.Fixed64=1,ps.Bytes=2,ps.Fixed32=5;var xE=4294967296,bA=1/xE,wA=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Mp(ot){return ot.type===ps.Bytes?ot.readVarint()+ot.pos:ot.pos+1}function L0(ot,nt,lt){return lt?4294967296*nt+(ot>>>0):4294967296*(nt>>>0)+(ot>>>0)}function EA(ot,nt,lt){var dt=nt<=16383?1:nt<=2097151?2:nt<=268435455?3:Math.floor(Math.log(nt)/(7*Math.LN2));lt.realloc(dt);for(var ft=lt.pos-1;ft>=ot;ft--)lt.buf[ft+dt]=lt.buf[ft]}function aI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeVarint(ot[lt])}function sI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeSVarint(ot[lt])}function lI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeFloat(ot[lt])}function cI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeDouble(ot[lt])}function uI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeBoolean(ot[lt])}function dI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeFixed32(ot[lt])}function hI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeSFixed32(ot[lt])}function fI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeFixed64(ot[lt])}function pI(ot,nt){for(var lt=0;lt<ot.length;lt++)nt.writeSFixed64(ot[lt])}function m1(ot,nt){return(ot[nt]|ot[nt+1]<<8|ot[nt+2]<<16)+16777216*ot[nt+3]}function N0(ot,nt,lt){ot[lt]=nt,ot[lt+1]=nt>>>8,ot[lt+2]=nt>>>16,ot[lt+3]=nt>>>24}function SA(ot,nt){return(ot[nt]|ot[nt+1]<<8|ot[nt+2]<<16)+(ot[nt+3]<<24)}ps.prototype={destroy:function(){this.buf=null},readFields:function(ot,nt,lt){for(lt=lt||this.length;this.pos<lt;){var dt=this.readVarint(),ft=dt>>3,mt=this.pos;this.type=7&dt,ot(ft,nt,this),this.pos===mt&&this.skip(dt)}return nt},readMessage:function(ot,nt){return this.readFields(ot,nt,this.readVarint()+this.pos)},readFixed32:function(){var ot=m1(this.buf,this.pos);return this.pos+=4,ot},readSFixed32:function(){var ot=SA(this.buf,this.pos);return this.pos+=4,ot},readFixed64:function(){var ot=m1(this.buf,this.pos)+m1(this.buf,this.pos+4)*xE;return this.pos+=8,ot},readSFixed64:function(){var ot=m1(this.buf,this.pos)+SA(this.buf,this.pos+4)*xE;return this.pos+=8,ot},readFloat:function(){var ot=p1.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ot},readDouble:function(){var ot=p1.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ot},readVarint:function(ot){var nt,lt,dt=this.buf;return nt=127&(lt=dt[this.pos++]),lt<128?nt:(nt|=(127&(lt=dt[this.pos++]))<<7,lt<128?nt:(nt|=(127&(lt=dt[this.pos++]))<<14,lt<128?nt:(nt|=(127&(lt=dt[this.pos++]))<<21,lt<128?nt:function(ft,mt,yt){var Et,At,Ct=yt.buf;if(Et=(112&(At=Ct[yt.pos++]))>>4,At<128||(Et|=(127&(At=Ct[yt.pos++]))<<3,At<128)||(Et|=(127&(At=Ct[yt.pos++]))<<10,At<128)||(Et|=(127&(At=Ct[yt.pos++]))<<17,At<128)||(Et|=(127&(At=Ct[yt.pos++]))<<24,At<128)||(Et|=(1&(At=Ct[yt.pos++]))<<31,At<128))return L0(ft,Et,mt);throw new Error("Expected varint not more than 10 bytes")}(nt|=(15&(lt=dt[this.pos]))<<28,ot,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ot=this.readVarint();return ot%2==1?(ot+1)/-2:ot/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ot=this.readVarint()+this.pos,nt=this.pos;return this.pos=ot,ot-nt>=12&&wA?function(lt,dt,ft){return wA.decode(lt.subarray(dt,ft))}(this.buf,nt,ot):function(lt,dt,ft){for(var mt="",yt=dt;yt<ft;){var Et,At,Ct,Lt=lt[yt],Bt=null,zt=Lt>239?4:Lt>223?3:Lt>191?2:1;if(yt+zt>ft)break;zt===1?Lt<128&&(Bt=Lt):zt===2?(192&(Et=lt[yt+1]))==128&&(Bt=(31&Lt)<<6|63&Et)<=127&&(Bt=null):zt===3?(At=lt[yt+2],(192&(Et=lt[yt+1]))==128&&(192&At)==128&&((Bt=(15&Lt)<<12|(63&Et)<<6|63&At)<=2047||Bt>=55296&&Bt<=57343)&&(Bt=null)):zt===4&&(At=lt[yt+2],Ct=lt[yt+3],(192&(Et=lt[yt+1]))==128&&(192&At)==128&&(192&Ct)==128&&((Bt=(15&Lt)<<18|(63&Et)<<12|(63&At)<<6|63&Ct)<=65535||Bt>=1114112)&&(Bt=null)),Bt===null?(Bt=65533,zt=1):Bt>65535&&(Bt-=65536,mt+=String.fromCharCode(Bt>>>10&1023|55296),Bt=56320|1023&Bt),mt+=String.fromCharCode(Bt),yt+=zt}return mt}(this.buf,nt,ot)},readBytes:function(){var ot=this.readVarint()+this.pos,nt=this.buf.subarray(this.pos,ot);return this.pos=ot,nt},readPackedVarint:function(ot,nt){if(this.type!==ps.Bytes)return ot.push(this.readVarint(nt));var lt=Mp(this);for(ot=ot||[];this.pos<lt;)ot.push(this.readVarint(nt));return ot},readPackedSVarint:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readSVarint());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readSVarint());return ot},readPackedBoolean:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readBoolean());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readBoolean());return ot},readPackedFloat:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readFloat());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readFloat());return ot},readPackedDouble:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readDouble());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readDouble());return ot},readPackedFixed32:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readFixed32());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readFixed32());return ot},readPackedSFixed32:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readSFixed32());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readSFixed32());return ot},readPackedFixed64:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readFixed64());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readFixed64());return ot},readPackedSFixed64:function(ot){if(this.type!==ps.Bytes)return ot.push(this.readSFixed64());var nt=Mp(this);for(ot=ot||[];this.pos<nt;)ot.push(this.readSFixed64());return ot},skip:function(ot){var nt=7&ot;if(nt===ps.Varint)for(;this.buf[this.pos++]>127;);else if(nt===ps.Bytes)this.pos=this.readVarint()+this.pos;else if(nt===ps.Fixed32)this.pos+=4;else{if(nt!==ps.Fixed64)throw new Error("Unimplemented type: "+nt);this.pos+=8}},writeTag:function(ot,nt){this.writeVarint(ot<<3|nt)},realloc:function(ot){for(var nt=this.length||16;nt<this.pos+ot;)nt*=2;if(nt!==this.length){var lt=new Uint8Array(nt);lt.set(this.buf),this.buf=lt,this.length=nt}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ot){this.realloc(4),N0(this.buf,ot,this.pos),this.pos+=4},writeSFixed32:function(ot){this.realloc(4),N0(this.buf,ot,this.pos),this.pos+=4},writeFixed64:function(ot){this.realloc(8),N0(this.buf,-1&ot,this.pos),N0(this.buf,Math.floor(ot*bA),this.pos+4),this.pos+=8},writeSFixed64:function(ot){this.realloc(8),N0(this.buf,-1&ot,this.pos),N0(this.buf,Math.floor(ot*bA),this.pos+4),this.pos+=8},writeVarint:function(ot){(ot=+ot||0)>268435455||ot<0?function(nt,lt){var dt,ft;if(nt>=0?(dt=nt%4294967296|0,ft=nt/4294967296|0):(ft=~(-nt/4294967296),4294967295^(dt=~(-nt%4294967296))?dt=dt+1|0:(dt=0,ft=ft+1|0)),nt>=18446744073709552e3||nt<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");lt.realloc(10),function(mt,yt,Et){Et.buf[Et.pos++]=127&mt|128,mt>>>=7,Et.buf[Et.pos++]=127&mt|128,mt>>>=7,Et.buf[Et.pos++]=127&mt|128,mt>>>=7,Et.buf[Et.pos++]=127&mt|128,Et.buf[Et.pos]=127&(mt>>>=7)}(dt,0,lt),function(mt,yt){var Et=(7&mt)<<4;yt.buf[yt.pos++]|=Et|((mt>>>=3)?128:0),mt&&(yt.buf[yt.pos++]=127&mt|((mt>>>=7)?128:0),mt&&(yt.buf[yt.pos++]=127&mt|((mt>>>=7)?128:0),mt&&(yt.buf[yt.pos++]=127&mt|((mt>>>=7)?128:0),mt&&(yt.buf[yt.pos++]=127&mt|((mt>>>=7)?128:0),mt&&(yt.buf[yt.pos++]=127&mt)))))}(ft,lt)}(ot,this):(this.realloc(4),this.buf[this.pos++]=127&ot|(ot>127?128:0),ot<=127||(this.buf[this.pos++]=127&(ot>>>=7)|(ot>127?128:0),ot<=127||(this.buf[this.pos++]=127&(ot>>>=7)|(ot>127?128:0),ot<=127||(this.buf[this.pos++]=ot>>>7&127))))},writeSVarint:function(ot){this.writeVarint(ot<0?2*-ot-1:2*ot)},writeBoolean:function(ot){this.writeVarint(!!ot)},writeString:function(ot){ot=String(ot),this.realloc(4*ot.length),this.pos++;var nt=this.pos;this.pos=function(dt,ft,mt){for(var yt,Et,At=0;At<ft.length;At++){if((yt=ft.charCodeAt(At))>55295&&yt<57344){if(!Et){yt>56319||At+1===ft.length?(dt[mt++]=239,dt[mt++]=191,dt[mt++]=189):Et=yt;continue}if(yt<56320){dt[mt++]=239,dt[mt++]=191,dt[mt++]=189,Et=yt;continue}yt=Et-55296<<10|yt-56320|65536,Et=null}else Et&&(dt[mt++]=239,dt[mt++]=191,dt[mt++]=189,Et=null);yt<128?dt[mt++]=yt:(yt<2048?dt[mt++]=yt>>6|192:(yt<65536?dt[mt++]=yt>>12|224:(dt[mt++]=yt>>18|240,dt[mt++]=yt>>12&63|128),dt[mt++]=yt>>6&63|128),dt[mt++]=63&yt|128)}return mt}(this.buf,ot,this.pos);var lt=this.pos-nt;lt>=128&&EA(nt,lt,this),this.pos=nt-1,this.writeVarint(lt),this.pos+=lt},writeFloat:function(ot){this.realloc(4),p1.write(this.buf,ot,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ot){this.realloc(8),p1.write(this.buf,ot,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ot){var nt=ot.length;this.writeVarint(nt),this.realloc(nt);for(var lt=0;lt<nt;lt++)this.buf[this.pos++]=ot[lt]},writeRawMessage:function(ot,nt){this.pos++;var lt=this.pos;ot(nt,this);var dt=this.pos-lt;dt>=128&&EA(lt,dt,this),this.pos=lt-1,this.writeVarint(dt),this.pos+=dt},writeMessage:function(ot,nt,lt){this.writeTag(ot,ps.Bytes),this.writeRawMessage(nt,lt)},writePackedVarint:function(ot,nt){nt.length&&this.writeMessage(ot,aI,nt)},writePackedSVarint:function(ot,nt){nt.length&&this.writeMessage(ot,sI,nt)},writePackedBoolean:function(ot,nt){nt.length&&this.writeMessage(ot,uI,nt)},writePackedFloat:function(ot,nt){nt.length&&this.writeMessage(ot,lI,nt)},writePackedDouble:function(ot,nt){nt.length&&this.writeMessage(ot,cI,nt)},writePackedFixed32:function(ot,nt){nt.length&&this.writeMessage(ot,dI,nt)},writePackedSFixed32:function(ot,nt){nt.length&&this.writeMessage(ot,hI,nt)},writePackedFixed64:function(ot,nt){nt.length&&this.writeMessage(ot,fI,nt)},writePackedSFixed64:function(ot,nt){nt.length&&this.writeMessage(ot,pI,nt)},writeBytesField:function(ot,nt){this.writeTag(ot,ps.Bytes),this.writeBytes(nt)},writeFixed32Field:function(ot,nt){this.writeTag(ot,ps.Fixed32),this.writeFixed32(nt)},writeSFixed32Field:function(ot,nt){this.writeTag(ot,ps.Fixed32),this.writeSFixed32(nt)},writeFixed64Field:function(ot,nt){this.writeTag(ot,ps.Fixed64),this.writeFixed64(nt)},writeSFixed64Field:function(ot,nt){this.writeTag(ot,ps.Fixed64),this.writeSFixed64(nt)},writeVarintField:function(ot,nt){this.writeTag(ot,ps.Varint),this.writeVarint(nt)},writeSVarintField:function(ot,nt){this.writeTag(ot,ps.Varint),this.writeSVarint(nt)},writeStringField:function(ot,nt){this.writeTag(ot,ps.Bytes),this.writeString(nt)},writeFloatField:function(ot,nt){this.writeTag(ot,ps.Fixed32),this.writeFloat(nt)},writeDoubleField:function(ot,nt){this.writeTag(ot,ps.Fixed64),this.writeDouble(nt)},writeBooleanField:function(ot,nt){this.writeVarintField(ot,!!nt)}};var yv=Nt(_A);const mI=["id","tile","layer","source","sourceLayer","state"];class TA{constructor(nt,lt,dt,ft,mt){this.type="Feature",this._vectorTileFeature=nt,this._z=lt,this._x=dt,this._y=ft,this.properties=nt.properties,this.id=mt}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(nt){this._geometry=nt}toJSON(){const nt={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const lt of mI)this[lt]!==void 0&&(nt[lt]=this[lt]);return nt}}class gI{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(nt,lt,dt){const ft=String(lt);if(this.stateChanges[nt]=this.stateChanges[nt]||{},this.stateChanges[nt][ft]=this.stateChanges[nt][ft]||{},Zs(this.stateChanges[nt][ft],dt),this.deletedStates[nt]===null){this.deletedStates[nt]={};for(const mt in this.state[nt])mt!==ft&&(this.deletedStates[nt][mt]=null)}else if(this.deletedStates[nt]&&this.deletedStates[nt][ft]===null){this.deletedStates[nt][ft]={};for(const mt in this.state[nt][ft])dt[mt]||(this.deletedStates[nt][ft][mt]=null)}else for(const mt in dt)this.deletedStates[nt]&&this.deletedStates[nt][ft]&&this.deletedStates[nt][ft][mt]===null&&delete this.deletedStates[nt][ft][mt]}removeFeatureState(nt,lt,dt){if(this.deletedStates[nt]===null)return;const ft=String(lt);if(this.deletedStates[nt]=this.deletedStates[nt]||{},dt&&lt!==void 0)this.deletedStates[nt][ft]!==null&&(this.deletedStates[nt][ft]=this.deletedStates[nt][ft]||{},this.deletedStates[nt][ft][dt]=null);else if(lt!==void 0)if(this.stateChanges[nt]&&this.stateChanges[nt][ft])for(dt in this.deletedStates[nt][ft]={},this.stateChanges[nt][ft])this.deletedStates[nt][ft][dt]=null;else this.deletedStates[nt][ft]=null;else this.deletedStates[nt]=null}getState(nt,lt){const dt=String(lt),ft=Zs({},(this.state[nt]||{})[dt],(this.stateChanges[nt]||{})[dt]);if(this.deletedStates[nt]===null)return{};if(this.deletedStates[nt]){const mt=this.deletedStates[nt][lt];if(mt===null)return{};for(const yt in mt)delete ft[yt]}return ft}initializeTileState(nt,lt){nt.setFeatureState(this.state,lt)}coalesceChanges(nt,lt){const dt={};for(const ft in this.stateChanges){this.state[ft]=this.state[ft]||{};const mt={};for(const yt in this.stateChanges[ft])this.state[ft][yt]||(this.state[ft][yt]={}),Zs(this.state[ft][yt],this.stateChanges[ft][yt]),mt[yt]=this.state[ft][yt];dt[ft]=mt}for(const ft in this.deletedStates){this.state[ft]=this.state[ft]||{};const mt={};if(this.deletedStates[ft]===null)for(const yt in this.state[ft])mt[yt]={},this.state[ft][yt]={};else for(const yt in this.deletedStates[ft]){if(this.deletedStates[ft][yt]===null)this.state[ft][yt]={};else if(this.state[ft][yt])for(const Et of Object.keys(this.deletedStates[ft][yt]))delete this.state[ft][yt][Et];mt[yt]=this.state[ft][yt]}dt[ft]=dt[ft]||{},Zs(dt[ft],mt)}if(this.stateChanges={},this.deletedStates={},Object.keys(dt).length!==0)for(const ft in nt)nt[ft].setFeatureState(dt,lt)}}class AA{constructor(nt,lt){this.tileID=nt,this.x=nt.canonical.x,this.y=nt.canonical.y,this.z=nt.canonical.z,this.grid=new nn(Ln,16,0),this.featureIndexArray=new bS,this.promoteId=lt,this.is3DTile=!1}insert(nt,lt,dt,ft,mt,yt=0,Et=0){const At=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(dt,ft,mt,yt);const Ct=this.grid;for(let Lt=0;Lt<lt.length;Lt++){const Bt=lt[Lt],zt=[1/0,1/0,-1/0,-1/0];for(let Wt=0;Wt<Bt.length;Wt++){const qt=Bt[Wt];zt[0]=Math.min(zt[0],qt.x),zt[1]=Math.min(zt[1],qt.y),zt[2]=Math.max(zt[2],qt.x),zt[3]=Math.max(zt[3],qt.y)}Et!==0&&(zt[0]-=Et,zt[1]-=Et,zt[2]+=Et,zt[3]+=Et),zt[0]<Ln&&zt[1]<Ln&&zt[2]>=0&&zt[3]>=0&&Ct.insert(At,zt[0],zt[1],zt[2],zt[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new pE(new yv(this.rawTileData)).layers,this.sourceLayerCoder=new vA(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const nt in this.vtLayers)this.vtFeatures[nt]=[]}return this.vtLayers}query(nt,lt,dt,ft){this.loadVTLayers();const mt=nt.params||{},yt=Iu(mt.filter),Et=nt.tileResult,At=nt.transform,Ct=Et.bufferedTilespaceBounds,Lt=this.grid.query(Ct.min.x,Ct.min.y,Ct.max.x,Ct.max.y,(qt,Xt,Jt,nr)=>BS(Et.bufferedTilespaceGeometry,qt,Xt,Jt,nr));Lt.sort(yI);let Bt=null;At.elevation&&Lt.length>0&&(Bt=D0.create(At.elevation,this.tileID));const zt={};let Wt;for(let qt=0;qt<Lt.length;qt++){const Xt=Lt[qt];if(Xt===Wt)continue;Wt=Xt;const Jt=this.featureIndexArray.get(Xt);let nr=null;if(this.is3DTile){const gr=this.bucketLayerIDs[0][0],pr=lt[gr];if(pr.type!=="model")continue;const{queryFeature:xr,intersectionZ:Pr}=pr.queryIntersectsMatchingFeature(Et,Jt.featureIndex,yt,At);xr&&this.appendToResult(zt,gr,Jt.featureIndex,xr,Pr)}else this.loadMatchingFeature(zt,Jt,yt,mt.layers,mt.availableImages,lt,dt,ft,(gr,pr,xr,Pr=0)=>(nr||(nr=Ou(gr,this.tileID.canonical,nt.tileTransform)),pr.queryIntersectsFeature(Et,gr,xr,nr,this.z,nt.transform,nt.pixelPosMatrix,Bt,Pr)))}return zt}loadMatchingFeature(nt,lt,dt,ft,mt,yt,Et,At,Ct){const{featureIndex:Lt,bucketIndex:Bt,sourceLayerIndex:zt,layoutVertexArrayOffset:Wt}=lt,qt=this.bucketLayerIDs[Bt];if(ft&&!function(gr,pr){for(let xr=0;xr<gr.length;xr++)if(pr.indexOf(gr[xr])>=0)return!0;return!1}(ft,qt))return;const Xt=this.sourceLayerCoder.decode(zt),Jt=this.vtLayers[Xt].feature(Lt);if(dt.needGeometry){const gr=Rp(Jt,!0);if(!dt.filter(new yo(this.tileID.overscaledZ),gr,this.tileID.canonical))return}else if(!dt.filter(new yo(this.tileID.overscaledZ),Jt))return;const nr=this.getId(Jt,Xt);for(let gr=0;gr<qt.length;gr++){const pr=qt[gr];if(ft&&ft.indexOf(pr)<0)continue;const xr=yt[pr];if(!xr)continue;let Pr={};nr!==void 0&&At&&(Pr=At.getState(xr.sourceLayer||"_geojsonTileLayer",nr));const Rr=!Ct||Ct(Jt,xr,Pr,Wt);if(!Rr)continue;const Dr=new TA(Jt,this.z,this.x,this.y,nr),Hr=Zs({},Et[pr]);Hr.paint=PA(Hr.paint,xr.paint,Jt,Pr,mt),Hr.layout=PA(Hr.layout,xr.layout,Jt,Pr,mt),Dr.layer=Hr,this.appendToResult(nt,pr,Lt,Dr,Rr)}}appendToResult(nt,lt,dt,ft,mt){let yt=nt[lt];yt===void 0&&(yt=nt[lt]=[]),yt.push({featureIndex:dt,feature:ft,intersectionZ:mt})}lookupSymbolFeatures(nt,lt,dt,ft,mt,yt,Et,At){const Ct={};this.loadVTLayers();const Lt=Iu(mt);for(const Bt of nt)this.loadMatchingFeature(Ct,{bucketIndex:dt,sourceLayerIndex:ft,featureIndex:Bt,layoutVertexArrayOffset:0},Lt,yt,Et,At,lt);return Ct}loadFeature(nt){const{featureIndex:lt,sourceLayerIndex:dt}=nt;this.loadVTLayers();const ft=this.sourceLayerCoder.decode(dt),mt=this.vtFeatures[ft];if(mt[lt])return mt[lt];const yt=this.vtLayers[ft].feature(lt);return mt[lt]=yt,yt}hasLayer(nt){for(const lt of this.bucketLayerIDs)for(const dt of lt)if(nt===dt)return!0;return!1}getId(nt,lt){let dt=nt.id;if(this.promoteId){const ft=typeof this.promoteId=="string"?this.promoteId:this.promoteId[lt];ft!=null&&(dt=nt.properties[ft]),typeof dt=="boolean"&&(dt=Number(dt))}return dt}}function PA(ot,nt,lt,dt,ft){return Lm(ot,(mt,yt)=>{const Et=nt instanceof Gs?nt.get(yt):null;return Et&&Et.evaluate?Et.evaluate(lt,dt,ft):Et})}function yI(ot,nt){return nt-ot}Wr(AA,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var _l=24;const ju=128;function vE(ot,nt){const{expression:lt}=nt;if(lt.kind==="constant")return{kind:"constant",layoutSize:lt.evaluate(new yo(ot+1))};if(lt.kind==="source")return{kind:"source"};{const{zoomStops:dt,interpolationType:ft}=lt;let mt=0;for(;mt<dt.length&&dt[mt]<=ot;)mt++;mt=Math.max(0,mt-1);let yt=mt;for(;yt<dt.length&&dt[yt]<ot+1;)yt++;yt=Math.min(dt.length-1,yt);const Et=dt[mt],At=dt[yt];return lt.kind==="composite"?{kind:"composite",minZoom:Et,maxZoom:At,interpolationType:ft}:{kind:"camera",minZoom:Et,maxZoom:At,minSize:lt.evaluate(new yo(Et)),maxSize:lt.evaluate(new yo(At)),interpolationType:ft}}}function g1(ot,{uSize:nt,uSizeT:lt},{lowerSize:dt,upperSize:ft}){return ot.kind==="source"?dt/ju:ot.kind==="composite"?ho(dt/ju,ft/ju,lt):nt}function F0(ot,nt){let lt=0,dt=0;if(ot.kind==="constant")dt=ot.layoutSize;else if(ot.kind!=="source"){const{interpolationType:ft,minZoom:mt,maxZoom:yt}=ot,Et=ft?jo(Wl.interpolationFactor(ft,nt,mt,yt),0,1):0;ot.kind==="camera"?dt=ho(ot.minSize,ot.maxSize,Et):lt=Et}return{uSizeT:lt,uSize:dt}}var xI=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:ju,evaluateSizeForFeature:g1,evaluateSizeForZoom:F0,getSizeData:vE});function vI(ot,nt,lt){return ot.sections.forEach(dt=>{dt.text=function(ft,mt,yt){const Et=mt.layout.get("text-transform").evaluate(yt,{});return Et==="uppercase"?ft=ft.toLocaleUpperCase():Et==="lowercase"&&(ft=ft.toLocaleLowerCase()),Lo.applyArabicShaping&&(ft=Lo.applyArabicShaping(ft)),ft}(dt.text,nt,lt)}),ot}const xv={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function _I(ot){return ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""}function bI(ot){return ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""||ot===""}const _E=3;function wI(ot,nt,lt){nt.glyphs=[],ot===1&&lt.readMessage(EI,nt)}function EI(ot,nt,lt){if(ot===3){const{id:dt,bitmap:ft,width:mt,height:yt,left:Et,top:At,advance:Ct}=lt.readMessage(SI,{});nt.glyphs.push({id:dt,bitmap:new gm({width:mt+2*_E,height:yt+2*_E},ft),metrics:{width:mt,height:yt,left:Et,top:At,advance:Ct}})}else ot===4?nt.ascender=lt.readSVarint():ot===5&&(nt.descender=lt.readSVarint())}function SI(ot,nt,lt){ot===1?nt.id=lt.readVarint():ot===2?nt.bitmap=lt.readBytes():ot===3?nt.width=lt.readVarint():ot===4?nt.height=lt.readVarint():ot===5?nt.left=lt.readSVarint():ot===6?nt.top=lt.readSVarint():ot===7&&(nt.advance=lt.readVarint())}const CA=_E,cu={horizontal:1,vertical:2,horizontalOnly:3};class vv{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(nt,lt){const dt=new vv;return dt.scale=nt||1,dt.fontStack=lt,dt}static forImage(nt){const lt=new vv;return lt.imageName=nt,lt}}class B0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(nt,lt){const dt=new B0;for(let ft=0;ft<nt.sections.length;ft++){const mt=nt.sections[ft];mt.image?dt.addImageSection(mt):dt.addTextSection(mt,lt)}return dt}length(){return this.text.length}getSection(nt){return this.sections[this.sectionIndex[nt]]}getSections(){return this.sections}getSectionIndex(nt){return this.sectionIndex[nt]}getCodePoint(nt){return this.text.codePointAt(nt)}verticalizePunctuation(nt){this.text=function(lt,dt){let ft="";for(let mt=0;mt<lt.length;mt++){const yt=lt.charCodeAt(mt+1)||null,Et=lt.charCodeAt(mt-1)||null;ft+=!dt&&(yt&&Qn(yt)&&!xv[lt[mt+1]]||Et&&Qn(Et)&&!xv[lt[mt-1]])||!xv[lt[mt]]?lt[mt]:xv[lt[mt]]}return ft}(this.text,nt)}trim(){let nt=0;for(let dt=0;dt<this.text.length&&y1[this.text.charCodeAt(dt)];dt++)nt++;let lt=this.text.length;for(let dt=this.text.length-1;dt>=0&&dt>=nt&&y1[this.text.charCodeAt(dt)];dt--)lt--;this.text=this.text.substring(nt,lt),this.sectionIndex=this.sectionIndex.slice(nt,lt)}substring(nt,lt){const dt=new B0;return dt.text=this.text.substring(nt,lt),dt.sectionIndex=this.sectionIndex.slice(nt,lt),dt.sections=this.sections,dt}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((nt,lt)=>Math.max(nt,this.sections[lt].scale),0)}addTextSection(nt,lt){this.text+=nt.text,this.sections.push(vv.forText(nt.scale,nt.fontStack||lt));const dt=this.sections.length-1;for(let ft=0;ft<nt.text.length;++ft)this.sectionIndex.push(dt)}addImageSection(nt){const lt=nt.image?nt.image.namePrimary:"";if(lt.length===0)return void Ts("Can't add FormattedSection with an empty image.");const dt=this.getNextImageSectionCharCode();dt?(this.text+=String.fromCodePoint(dt),this.sections.push(vv.forImage(lt)),this.sectionIndex.push(this.sections.length-1)):Ts("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bE(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt){const Xt=B0.fromFeature(ot,ft);Bt===cu.vertical&&Xt.verticalizePunctuation(zt);let Jt=[];const nr=function(Rr,Dr,Hr,Jr,an,Qr){if(!Rr)return[];const yn=[],Cn=function(En,jn,vn,Bn,Mn,kn){let ao=0;for(let io=0;io<En.length();io++){const Kn=En.getSection(io);ao+=kA(En.getCodePoint(io),Kn,Bn,Mn,jn,kn)}return ao/Math.max(1,Math.ceil(ao/vn))}(Rr,Dr,Hr,Jr,an,Qr),xn=Rr.text.indexOf("")>=0;let $n=0;for(let En=0;En<Rr.length();En++){const jn=Rr.getSection(En),vn=Rr.getCodePoint(En);if(y1[vn]||($n+=kA(vn,jn,Jr,an,Dr,Qr)),En<Rr.length()-1){const Bn=!((gn=vn)<11904||!(Ur["Bopomofo Extended"](gn)||Ur.Bopomofo(gn)||Ur["CJK Compatibility Forms"](gn)||Ur["CJK Compatibility Ideographs"](gn)||Ur["CJK Compatibility"](gn)||Ur["CJK Radicals Supplement"](gn)||Ur["CJK Strokes"](gn)||Ur["CJK Symbols and Punctuation"](gn)||Ur["CJK Unified Ideographs Extension A"](gn)||Ur["CJK Unified Ideographs"](gn)||Ur["Enclosed CJK Letters and Months"](gn)||Ur["Halfwidth and Fullwidth Forms"](gn)||Ur.Hiragana(gn)||Ur["Ideographic Description Characters"](gn)||Ur["Kangxi Radicals"](gn)||Ur["Katakana Phonetic Extensions"](gn)||Ur.Katakana(gn)||Ur["Vertical Forms"](gn)||Ur["Yi Radicals"](gn)||Ur["Yi Syllables"](gn)));(TI[vn]||Bn||jn.imageName)&&yn.push(IA(En+1,$n,Cn,yn,AI(vn,Rr.getCodePoint(En+1),Bn&&xn),!1))}}var gn;return $A(IA(Rr.length(),$n,Cn,yn,0,!0))}(Xt,Ct,mt,nt,dt,Wt),{processBidirectionalText:gr,processStyledBidirectionalText:pr}=Lo;if(gr&&Xt.sections.length===1){const Rr=gr(Xt.toString(),nr);for(const Dr of Rr){const Hr=new B0;Hr.text=Dr,Hr.sections=Xt.sections;for(let Jr=0;Jr<Dr.length;Jr++)Hr.sectionIndex.push(0);Jt.push(Hr)}}else if(pr){const Rr=pr(Xt.text,Xt.sectionIndex,nr);for(const Dr of Rr){const Hr=new B0;Hr.text=Dr[0],Hr.sectionIndex=Dr[1],Hr.sections=Xt.sections,Jt.push(Hr)}}else Jt=function(Rr,Dr){const Hr=[],Jr=Rr.text;let an=0;for(const Qr of Dr)Hr.push(Rr.substring(an,Qr)),an=Qr;return an<Jr.length&&Hr.push(Rr.substring(an,Jr.length)),Hr}(Xt,nr);const xr=[],Pr={positionedLines:xr,text:Xt.toString(),top:Lt[1],bottom:Lt[1],left:Lt[0],right:Lt[0],writingMode:Bt,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn,$n,gn,En){let jn=0,vn=0,Bn=0;const Mn=Cn==="right"?1:Cn==="left"?0:.5;let kn=!1;for(const oo of an){const _i=oo.getSections();for(const _o of _i){if(_o.imageName)continue;const wo=Dr[_o.fontStack];if(wo&&(kn=wo.ascender!==void 0&&wo.descender!==void 0,!kn))break}if(!kn)break}let ao=0;for(const oo of an){oo.trim();const _i=oo.getMaxScale(),_o=(_i-1)*_l,wo={positionedGlyphs:[],lineOffset:0};Rr.positionedLines[ao]=wo;const bo=wo.positionedGlyphs;let Ro=0;if(!oo.length()){vn+=Qr,++ao;continue}let Go=0,Bo=0;for(let as=0;as<oo.length();as++){const Eo=oo.getSection(as),$a=oo.getSectionIndex(as),es=oo.getCodePoint(as);let cs=Eo.scale,vs=null,Rs=null,_s=null,ys=_l,Bs=0;const Ms=!(xn===cu.horizontal||!gn&&!Un(es)||gn&&(y1[es]||(io=es,Ur.Arabic(io)||Ur["Arabic Supplement"](io)||Ur["Arabic Extended-A"](io)||Ur["Arabic Presentation Forms-A"](io)||Ur["Arabic Presentation Forms-B"](io))));if(Eo.imageName){const wl=Jr[Eo.imageName];if(!wl)continue;_s=Eo.imageName,Rr.iconsInText=Rr.iconsInText||!0,Rs=wl.paddedRect;const ls=wl.displaySize;cs=cs*_l/En,vs={width:ls[0],height:ls[1],left:0,top:-CA,advance:Ms?ls[1]:ls[0],localGlyph:!1},Bs=kn?-vs.height*cs:_i*_l-17-ls[1]*cs,ys=vs.advance;const Kl=(Ms?ls[0]:ls[1])*cs-_l*_i;Kl>0&&Kl>Ro&&(Ro=Kl)}else{const wl=Hr[Eo.fontStack];if(!wl)continue;wl[es]&&(Rs=wl[es]);const ls=Dr[Eo.fontStack];if(!ls)continue;const Kl=ls.glyphs[es];if(!Kl)continue;if(vs=Kl.metrics,ys=es!==8203?_l:0,kn){const zu=ls.ascender!==void 0?Math.abs(ls.ascender):0,wu=ls.descender!==void 0?Math.abs(ls.descender):0,Eu=(zu+wu)*cs;Go<Eu&&(Go=Eu,Bo=(zu-wu)/2*cs),Bs=-zu*cs}else Bs=(_i-cs)*_l-17}Ms?(Rr.verticalizable=!0,bo.push({glyph:es,imageName:_s,x:jn,y:vn+Bs,vertical:Ms,scale:cs,localGlyph:vs.localGlyph,fontStack:Eo.fontStack,sectionIndex:$a,metrics:vs,rect:Rs}),jn+=ys*cs+$n):(bo.push({glyph:es,imageName:_s,x:jn,y:vn+Bs,vertical:Ms,scale:cs,localGlyph:vs.localGlyph,fontStack:Eo.fontStack,sectionIndex:$a,metrics:vs,rect:Rs}),jn+=vs.advance*cs+$n)}bo.length!==0&&(Bn=Math.max(jn-$n,Bn),kn?MA(bo,Mn,Ro,Bo,Qr*_i/2):MA(bo,Mn,Ro,0,Qr/2)),jn=0;const ns=Qr*_i+Ro;wo.lineOffset=Math.max(Ro,_o),vn+=ns,++ao}var io;const Kn=vn,{horizontalAlign:Nn,verticalAlign:mo}=wE(yn);(function(oo,_i,_o,wo,bo,Ro){const Go=(_i-_o)*bo,Bo=-Ro*wo;for(const ns of oo)for(const as of ns.positionedGlyphs)as.x+=Go,as.y+=Bo})(Rr.positionedLines,Mn,Nn,mo,Bn,Kn),Rr.top+=-mo*Kn,Rr.bottom=Rr.top+Kn,Rr.left+=-Nn*Bn,Rr.right=Rr.left+Bn,Rr.hasBaseline=kn}(Pr,nt,lt,dt,Jt,yt,Et,At,Bt,Ct,zt,qt),!function(Rr){for(const Dr of Rr)if(Dr.positionedGlyphs.length!==0)return!1;return!0}(xr)&&Pr}const y1={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},TI={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function kA(ot,nt,lt,dt,ft,mt){if(nt.imageName){const yt=dt[nt.imageName];return yt?yt.displaySize[0]*nt.scale*_l/mt+ft:0}{const yt=lt[nt.fontStack],Et=yt&&yt.glyphs[ot];return Et?Et.metrics.advance*nt.scale+ft:0}}function RA(ot,nt,lt,dt){const ft=Math.pow(ot-nt,2);return dt?ot<nt?ft/2:2*ft:ft+Math.abs(lt)*lt}function AI(ot,nt,lt){let dt=0;return ot===10&&(dt-=1e4),lt&&(dt+=150),ot!==40&&ot!==65288||(dt+=50),nt!==41&&nt!==65289||(dt+=50),dt}function IA(ot,nt,lt,dt,ft,mt){let yt=null,Et=RA(nt,lt,ft,mt);for(const At of dt){const Ct=RA(nt-At.x,lt,ft,mt)+At.badness;Ct<=Et&&(yt=At,Et=Ct)}return{index:ot,x:nt,priorBreak:yt,badness:Et}}function $A(ot){return ot?$A(ot.priorBreak).concat(ot.index):[]}function wE(ot){let nt=.5,lt=.5;switch(ot){case"right":case"top-right":case"bottom-right":nt=1;break;case"left":case"top-left":case"bottom-left":nt=0}switch(ot){case"bottom":case"bottom-right":case"bottom-left":lt=1;break;case"top":case"top-right":case"top-left":lt=0}return{horizontalAlign:nt,verticalAlign:lt}}function MA(ot,nt,lt,dt,ft){if(!(nt||lt||dt||ft))return;const mt=ot.length-1,yt=ot[mt],Et=(yt.x+yt.metrics.advance*yt.scale)*nt;for(let At=0;At<=mt;At++)ot[At].x-=Et,ot[At].y+=lt+dt+ft}function PI(ot,nt,lt,dt){const{horizontalAlign:ft,verticalAlign:mt}=wE(dt),yt=lt[0]-ot.displaySize[0]*ft,Et=lt[1]-ot.displaySize[1]*mt;return{imagePrimary:ot,imageSecondary:nt,top:Et,bottom:Et+ot.displaySize[1],left:yt,right:yt+ot.displaySize[0]}}function OA(ot,nt,lt,dt,ft,mt){const yt=ot.imagePrimary;let Et;if(yt.content){const Jt=yt.content,nr=yt.pixelRatio||1;Et=[Jt[0]/nr,Jt[1]/nr,yt.displaySize[0]-Jt[2]/nr,yt.displaySize[1]-Jt[3]/nr]}const At=nt.left*mt,Ct=nt.right*mt;let Lt,Bt,zt,Wt;lt==="width"||lt==="both"?(Wt=ft[0]+At-dt[3],Bt=ft[0]+Ct+dt[1]):(Wt=ft[0]+(At+Ct-yt.displaySize[0])/2,Bt=Wt+yt.displaySize[0]);const qt=nt.top*mt,Xt=nt.bottom*mt;return lt==="height"||lt==="both"?(Lt=ft[1]+qt-dt[0],zt=ft[1]+Xt+dt[2]):(Lt=ft[1]+(qt+Xt-yt.displaySize[1])/2,zt=Lt+yt.displaySize[1]),{imagePrimary:yt,imageSecondary:void 0,top:Lt,right:Bt,bottom:zt,left:Wt,collisionPadding:Et}}class Op extends Vn{constructor(nt,lt,dt,ft,mt){super(nt,lt),this.angle=ft,this.z=dt,mt!==void 0&&(this.segment=mt)}clone(){return new Op(this.x,this.y,this.z,this.angle,this.segment)}}function jA(ot,nt,lt,dt,ft){if(nt.segment===void 0)return!0;let mt=nt,yt=nt.segment+1,Et=0;for(;Et>-lt/2;){if(yt--,yt<0)return!1;Et-=ot[yt].dist(mt),mt=ot[yt]}Et+=ot[yt].dist(ot[yt+1]),yt++;const At=[];let Ct=0;for(;Et<lt/2;){const Lt=ot[yt],Bt=ot[yt+1];if(!Bt)return!1;let zt=ot[yt-1].angleTo(Lt)-Lt.angleTo(Bt);for(zt=Math.abs((zt+3*Math.PI)%(2*Math.PI)-Math.PI),At.push({distance:Et,angleDelta:zt}),Ct+=zt;Et-At[0].distance>dt;)Ct-=At.shift().angleDelta;if(Ct>ft)return!1;yt++,Et+=Lt.dist(Bt)}return!0}function DA(ot){let nt=0;for(let lt=0;lt<ot.length-1;lt++)nt+=ot[lt].dist(ot[lt+1]);return nt}function LA(ot,nt,lt){return ot?.6*nt*lt:0}function NA(ot,nt){return Math.max(ot?ot.right-ot.left:0,nt?nt.right-nt.left:0)}function CI(ot,nt,lt,dt,ft,mt){const yt=LA(lt,ft,mt),Et=NA(lt,dt)*mt;let At=0;const Ct=DA(ot)/2;for(let Lt=0;Lt<ot.length-1;Lt++){const Bt=ot[Lt],zt=ot[Lt+1],Wt=Bt.dist(zt);if(At+Wt>Ct){const qt=(Ct-At)/Wt,Xt=ho(Bt.x,zt.x,qt),Jt=ho(Bt.y,zt.y,qt),nr=new Op(Xt,Jt,0,zt.angleTo(Bt),Lt);return!yt||jA(ot,nr,Et,yt,nt)?nr:void 0}At+=Wt}}function kI(ot,nt,lt,dt,ft,mt,yt,Et,At){const Ct=LA(dt,mt,yt),Lt=NA(dt,ft),Bt=Lt*yt,zt=ot[0].x===0||ot[0].x===At||ot[0].y===0||ot[0].y===At;return nt-Bt<nt/4&&(nt=Bt+nt/4),FA(ot,zt?nt/2*Et%nt:(Lt/2+2*mt)*yt*Et%nt,nt,Ct,lt,Bt,zt,!1,At)}function FA(ot,nt,lt,dt,ft,mt,yt,Et,At){const Ct=mt/2,Lt=DA(ot);let Bt=0,zt=nt-lt,Wt=[];for(let qt=0;qt<ot.length-1;qt++){const Xt=ot[qt],Jt=ot[qt+1],nr=Xt.dist(Jt),gr=Jt.angleTo(Xt);for(;zt+lt<Bt+nr;){zt+=lt;const pr=(zt-Bt)/nr,xr=ho(Xt.x,Jt.x,pr),Pr=ho(Xt.y,Jt.y,pr);if(xr>=0&&xr<At&&Pr>=0&&Pr<At&&zt-Ct>=0&&zt+Ct<=Lt){const Rr=new Op(xr,Pr,0,gr,qt);dt&&!jA(ot,Rr,mt,dt,ft)||Wt.push(Rr)}}Bt+=nr}return Et||Wt.length||yt||(Wt=FA(ot,Bt/2,lt,dt,ft,mt,yt,!0,At)),Wt}function BA(ot,nt,lt,dt,ft){const mt=[];for(let yt=0;yt<ot.length;yt++){const Et=ot[yt];let At;for(let Ct=0;Ct<Et.length-1;Ct++){let Lt=Et[Ct],Bt=Et[Ct+1];Lt.x<nt&&Bt.x<nt||(Lt.x<nt?Lt=new Vn(nt,Lt.y+(nt-Lt.x)/(Bt.x-Lt.x)*(Bt.y-Lt.y))._round():Bt.x<nt&&(Bt=new Vn(nt,Lt.y+(nt-Lt.x)/(Bt.x-Lt.x)*(Bt.y-Lt.y))._round()),Lt.y<lt&&Bt.y<lt||(Lt.y<lt?Lt=new Vn(Lt.x+(lt-Lt.y)/(Bt.y-Lt.y)*(Bt.x-Lt.x),lt)._round():Bt.y<lt&&(Bt=new Vn(Lt.x+(lt-Lt.y)/(Bt.y-Lt.y)*(Bt.x-Lt.x),lt)._round()),Lt.x>=dt&&Bt.x>=dt||(Lt.x>=dt?Lt=new Vn(dt,Lt.y+(dt-Lt.x)/(Bt.x-Lt.x)*(Bt.y-Lt.y))._round():Bt.x>=dt&&(Bt=new Vn(dt,Lt.y+(dt-Lt.x)/(Bt.x-Lt.x)*(Bt.y-Lt.y))._round()),Lt.y>=ft&&Bt.y>=ft||(Lt.y>=ft?Lt=new Vn(Lt.x+(ft-Lt.y)/(Bt.y-Lt.y)*(Bt.x-Lt.x),ft)._round():Bt.y>=ft&&(Bt=new Vn(Lt.x+(ft-Lt.y)/(Bt.y-Lt.y)*(Bt.x-Lt.x),ft)._round()),At&&Lt.equals(At[At.length-1])||(At=[Lt],mt.push(At)),At.push(Bt)))))}}return mt}function zA(ot){let nt=0,lt=0;for(const yt of ot)nt+=yt.w*yt.h,lt=Math.max(lt,yt.w);ot.sort((yt,Et)=>Et.h-yt.h);const dt=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(nt/.95)),lt),h:1/0}];let ft=0,mt=0;for(const yt of ot)for(let Et=dt.length-1;Et>=0;Et--){const At=dt[Et];if(!(yt.w>At.w||yt.h>At.h)){if(yt.x=At.x,yt.y=At.y,mt=Math.max(mt,yt.y+yt.h),ft=Math.max(ft,yt.x+yt.w),yt.w===At.w&&yt.h===At.h){const Ct=dt.pop();Et<dt.length&&(dt[Et]=Ct)}else yt.h===At.h?(At.x+=yt.w,At.w-=yt.w):yt.w===At.w?(At.y+=yt.h,At.h-=yt.h):(dt.push({x:At.x+yt.w,y:At.y,w:At.w-yt.w,h:yt.h}),At.y+=yt.h,At.h-=yt.h);break}}return{w:ft,h:mt,fill:nt/(ft*mt)||0}}Wr(Op,"Anchor");const eu=1;class EE{constructor(nt,{pixelRatio:lt,version:dt,stretchX:ft,stretchY:mt,content:yt}){this.paddedRect=nt,this.pixelRatio=lt,this.stretchX=ft,this.stretchY=mt,this.content=yt,this.version=dt}get tl(){return[this.paddedRect.x+eu,this.paddedRect.y+eu]}get br(){return[this.paddedRect.x+this.paddedRect.w-eu,this.paddedRect.y+this.paddedRect.h-eu]}get displaySize(){return[(this.paddedRect.w-2*eu)/this.pixelRatio,(this.paddedRect.h-2*eu)/this.pixelRatio]}}class VA{constructor(nt,lt,dt){const ft={},mt={};this.haveRenderCallbacks=[];const yt=[];this.addImages(nt,ft,yt),this.addImages(lt,mt,yt);const{w:Et,h:At}=zA(yt),Ct=new lu({width:Et||1,height:At||1});for(const Lt in nt){const Bt=nt[Lt],zt=ft[Lt].paddedRect;lu.copy(Bt.data,Ct,{x:0,y:0},{x:zt.x+eu,y:zt.y+eu},Bt.data,dt,Bt.sdf)}for(const Lt in lt){const Bt=lt[Lt],zt=mt[Lt].paddedRect,Wt=zt.x+eu,qt=zt.y+eu,Xt=Bt.data.width,Jt=Bt.data.height;lu.copy(Bt.data,Ct,{x:0,y:0},{x:Wt,y:qt},Bt.data,dt),lu.copy(Bt.data,Ct,{x:0,y:Jt-1},{x:Wt,y:qt-1},{width:Xt,height:1},dt),lu.copy(Bt.data,Ct,{x:0,y:0},{x:Wt,y:qt+Jt},{width:Xt,height:1},dt),lu.copy(Bt.data,Ct,{x:Xt-1,y:0},{x:Wt-1,y:qt},{width:1,height:Jt},dt),lu.copy(Bt.data,Ct,{x:0,y:0},{x:Wt+Xt,y:qt},{width:1,height:Jt},dt)}this.image=Ct,this.iconPositions=ft,this.patternPositions=mt}addImages(nt,lt,dt){for(const ft in nt){const mt=nt[ft],yt={x:0,y:0,w:mt.data.width+2*eu,h:mt.data.height+2*eu};dt.push(yt),lt[ft]=new EE(yt,mt),mt.hasRenderCallback&&this.haveRenderCallbacks.push(ft)}}patchUpdatedImages(nt,lt,dt){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(ft=>nt.hasImage(ft,dt)),nt.dispatchRenderCallbacks(this.haveRenderCallbacks,dt);for(const ft in nt.getUpdatedImages(dt))this.patchUpdatedImage(this.iconPositions[ft],nt.getImage(ft,dt),lt),this.patchUpdatedImage(this.patternPositions[ft],nt.getImage(ft,dt),lt)}patchUpdatedImage(nt,lt,dt){if(!nt||!lt||nt.version===lt.version)return;nt.version=lt.version;const[ft,mt]=nt.tl,yt=!!Object.keys(this.patternPositions).length;dt.update(lt.data,{useMipmap:yt},{x:ft,y:mt})}}Wr(EE,"ImagePosition"),Wr(VA,"ImageAtlas");const _v=1e20;function UA(ot,nt,lt,dt,ft,mt,yt,Et,At){for(let Ct=nt;Ct<nt+dt;Ct++)GA(ot,lt*mt+Ct,mt,ft,yt,Et,At);for(let Ct=lt;Ct<lt+ft;Ct++)GA(ot,Ct*mt+nt,1,dt,yt,Et,At)}function GA(ot,nt,lt,dt,ft,mt,yt){mt[0]=0,yt[0]=-_v,yt[1]=_v,ft[0]=ot[nt];for(let Et=1,At=0,Ct=0;Et<dt;Et++){ft[Et]=ot[nt+Et*lt];const Lt=Et*Et;do{const Bt=mt[At];Ct=(ft[Et]-ft[Bt]+Lt-Bt*Bt)/(Et-Bt)/2}while(Ct<=yt[At]&&--At>-1);At++,mt[At]=Et,yt[At]=Ct,yt[At+1]=_v}for(let Et=0,At=0;Et<dt;Et++){for(;yt[At+1]<Et;)At++;const Ct=mt[At],Lt=Et-Ct;ot[nt+Et*lt]=ft[Ct]+Lt*Lt}}const Du=2,SE={none:0,ideographs:1,all:2};class z0{constructor(nt,lt,dt){this.requestManager=nt,this.localGlyphMode=lt,this.localFontFamily=dt,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(nt,lt){this.urls[lt]=nt}getGlyphs(nt,lt,dt){const ft=[],mt=this.urls[lt]||wt.GLYPHS_URL;for(const yt in nt)for(const Et of nt[yt])ft.push({stack:yt,id:Et});jm(ft,({stack:yt,id:Et},At)=>{let Ct=this.entries[yt];Ct||(Ct=this.entries[yt]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let Lt=Ct.glyphs[Et];if(Lt!==void 0)return void At(null,{stack:yt,id:Et,glyph:Lt});if(Lt=this._tinySDF(Ct,yt,Et),Lt)return Ct.glyphs[Et]=Lt,void At(null,{stack:yt,id:Et,glyph:Lt});const Bt=Math.floor(Et/256);if(256*Bt>65535)return void At(new Error("glyphs > 65535 not supported"));if(Ct.ranges[Bt])return void At(null,{stack:yt,id:Et,glyph:Lt});let zt=Ct.requests[Bt];zt||(zt=Ct.requests[Bt]=[],z0.loadGlyphRange(yt,Bt,mt,this.requestManager,(Wt,qt)=>{if(qt){Ct.ascender=qt.ascender,Ct.descender=qt.descender;for(const Xt in qt.glyphs)this._doesCharSupportLocalGlyph(+Xt)||(Ct.glyphs[+Xt]=qt.glyphs[+Xt]);Ct.ranges[Bt]=!0}for(const Xt of zt)Xt(Wt,qt);delete Ct.requests[Bt]})),zt.push((Wt,qt)=>{Wt?At(Wt):qt&&At(null,{stack:yt,id:Et,glyph:qt.glyphs[Et]||null})})},(yt,Et)=>{if(yt)dt(yt);else if(Et){const At={};for(const{stack:Ct,id:Lt,glyph:Bt}of Et)At[Ct]===void 0&&(At[Ct]={}),At[Ct].glyphs===void 0&&(At[Ct].glyphs={}),At[Ct].glyphs[Lt]=Bt&&{id:Bt.id,bitmap:Bt.bitmap.clone(),metrics:Bt.metrics},At[Ct].ascender=this.entries[Ct].ascender,At[Ct].descender=this.entries[Ct].descender;dt(null,At)}})}_doesCharSupportLocalGlyph(nt){return this.localGlyphMode!==SE.none&&(this.localGlyphMode===SE.all?!!this.localFontFamily:!!this.localFontFamily&&(Ur["CJK Unified Ideographs"](nt)||Ur["Hangul Syllables"](nt)||Ur.Hiragana(nt)||Ur.Katakana(nt)||Ur["CJK Symbols and Punctuation"](nt)||Ur["CJK Unified Ideographs Extension A"](nt)||Ur["CJK Unified Ideographs Extension B"](nt)))}_tinySDF(nt,lt,dt){const ft=this.localFontFamily;if(!ft||!this._doesCharSupportLocalGlyph(dt))return;let mt=nt.tinySDF;if(!mt){let Xt="400";/bold/i.test(lt)?Xt="900":/medium/i.test(lt)?Xt="500":/light/i.test(lt)&&(Xt="200"),mt=nt.tinySDF=new z0.TinySDF({fontFamily:ft,fontWeight:Xt,fontSize:24*Du,buffer:3*Du,radius:8*Du}),mt.fontWeight=Xt}if(this.localGlyphs[mt.fontWeight][dt])return this.localGlyphs[mt.fontWeight][dt];const yt=String.fromCodePoint(dt),{data:Et,width:At,height:Ct,glyphWidth:Lt,glyphHeight:Bt,glyphLeft:zt,glyphTop:Wt,glyphAdvance:qt}=mt.draw(yt);return this.localGlyphs[mt.fontWeight][dt]={id:dt,bitmap:new gm({width:At,height:Ct},Et),metrics:{width:Lt/Du,height:Bt/Du,left:zt/Du,top:Wt/Du-27,advance:qt/Du,localGlyph:!0}}}}z0.loadGlyphRange=function(ot,nt,lt,dt,ft){const mt=256*nt,yt=mt+255,Et=dt.transformRequest(dt.normalizeGlyphsURL(lt).replace("{fontstack}",ot).replace("{range}",`${mt}-${yt}`),Wm.Glyphs);pp(Et,(At,Ct)=>{if(At)ft(At);else if(Ct){const Lt={},Bt=function(zt){return new yv(zt).readFields(wI,{})}(Ct);for(const zt of Bt.glyphs)Lt[zt.id]=zt;ft(null,{glyphs:Lt,ascender:Bt.ascender,descender:Bt.descender})}})},z0.TinySDF=class{constructor({fontSize:ot=24,buffer:nt=3,radius:lt=8,cutoff:dt=.25,fontFamily:ft="sans-serif",fontWeight:mt="normal",fontStyle:yt="normal"}={}){this.buffer=nt,this.cutoff=dt,this.radius=lt;const Et=this.size=ot+4*nt,At=this._createCanvas(Et),Ct=this.ctx=At.getContext("2d",{willReadFrequently:!0});Ct.font=`${yt} ${mt} ${ot}px ${ft}`,Ct.textBaseline="alphabetic",Ct.textAlign="left",Ct.fillStyle="black",this.gridOuter=new Float64Array(Et*Et),this.gridInner=new Float64Array(Et*Et),this.f=new Float64Array(Et),this.z=new Float64Array(Et+1),this.v=new Uint16Array(Et)}_createCanvas(ot){const nt=document.createElement("canvas");return nt.width=nt.height=ot,nt}draw(ot){const{width:nt,actualBoundingBoxAscent:lt,actualBoundingBoxDescent:dt,actualBoundingBoxLeft:ft,actualBoundingBoxRight:mt}=this.ctx.measureText(ot),yt=Math.ceil(lt),Et=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(mt-ft))),At=Math.min(this.size-this.buffer,yt+Math.ceil(dt)),Ct=Et+2*this.buffer,Lt=At+2*this.buffer,Bt=Math.max(Ct*Lt,0),zt=new Uint8ClampedArray(Bt),Wt={data:zt,width:Ct,height:Lt,glyphWidth:Et,glyphHeight:At,glyphTop:yt,glyphLeft:0,glyphAdvance:nt};if(Et===0||At===0)return Wt;const{ctx:qt,buffer:Xt,gridInner:Jt,gridOuter:nr}=this;qt.clearRect(Xt,Xt,Et,At),qt.fillText(ot,Xt,Xt+yt);const gr=qt.getImageData(Xt,Xt,Et,At);nr.fill(_v,0,Bt),Jt.fill(0,0,Bt);for(let pr=0;pr<At;pr++)for(let xr=0;xr<Et;xr++){const Pr=gr.data[4*(pr*Et+xr)+3]/255;if(Pr===0)continue;const Rr=(pr+Xt)*Ct+xr+Xt;if(Pr===1)nr[Rr]=0,Jt[Rr]=_v;else{const Dr=.5-Pr;nr[Rr]=Dr>0?Dr*Dr:0,Jt[Rr]=Dr<0?Dr*Dr:0}}UA(nr,0,0,Ct,Lt,Ct,this.f,this.v,this.z),UA(Jt,Xt,Xt,Et,At,Ct,this.f,this.v,this.z);for(let pr=0;pr<Bt;pr++){const xr=Math.sqrt(nr[pr])-Math.sqrt(Jt[pr]);zt[pr]=Math.round(255-255*(xr/this.radius+this.cutoff))}return Wt}};const vm=eu;function WA(ot,nt,lt,dt){const ft=[],mt=ot.imagePrimary,yt=mt.pixelRatio,Et=mt.paddedRect.w-2*vm,At=mt.paddedRect.h-2*vm,Ct=ot.right-ot.left,Lt=ot.bottom-ot.top,Bt=mt.stretchX||[[0,Et]],zt=mt.stretchY||[[0,At]],Wt=(Qr,yn)=>Qr+yn[1]-yn[0],qt=Bt.reduce(Wt,0),Xt=zt.reduce(Wt,0),Jt=Et-qt,nr=At-Xt;let gr=0,pr=qt,xr=0,Pr=Xt,Rr=0,Dr=Jt,Hr=0,Jr=nr;if(mt.content&&dt){const Qr=mt.content;gr=x1(Bt,0,Qr[0]),xr=x1(zt,0,Qr[1]),pr=x1(Bt,Qr[0],Qr[2]),Pr=x1(zt,Qr[1],Qr[3]),Rr=Qr[0]-gr,Hr=Qr[1]-xr,Dr=Qr[2]-Qr[0]-pr,Jr=Qr[3]-Qr[1]-Pr}const an=(Qr,yn,Cn,xn)=>{const $n=v1(Qr.stretch-gr,pr,Ct,ot.left),gn=_1(Qr.fixed-Rr,Dr,Qr.stretch,qt),En=v1(yn.stretch-xr,Pr,Lt,ot.top),jn=_1(yn.fixed-Hr,Jr,yn.stretch,Xt),vn=v1(Cn.stretch-gr,pr,Ct,ot.left),Bn=_1(Cn.fixed-Rr,Dr,Cn.stretch,qt),Mn=v1(xn.stretch-xr,Pr,Lt,ot.top),kn=_1(xn.fixed-Hr,Jr,xn.stretch,Xt),ao=new Vn($n,En),io=new Vn(vn,En),Kn=new Vn(vn,Mn),Nn=new Vn($n,Mn),mo=new Vn(gn/yt,jn/yt),oo=new Vn(Bn/yt,kn/yt),_i=nt*Math.PI/180;if(_i){const Bo=Math.sin(_i),ns=Math.cos(_i),as=[ns,-Bo,Bo,ns];ao._matMult(as),io._matMult(as),Nn._matMult(as),Kn._matMult(as)}const _o=Qr.stretch+Qr.fixed,wo=Cn.stretch+Cn.fixed,bo=yn.stretch+yn.fixed,Ro=xn.stretch+xn.fixed,Go=ot.imageSecondary;return{tl:ao,tr:io,bl:Nn,br:Kn,texPrimary:{x:mt.paddedRect.x+vm+_o,y:mt.paddedRect.y+vm+bo,w:wo-_o,h:Ro-bo},texSecondary:Go?{x:Go.paddedRect.x+vm+_o,y:Go.paddedRect.y+vm+bo,w:wo-_o,h:Ro-bo}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mo,pixelOffsetBR:oo,minFontScaleX:Dr/yt/Ct,minFontScaleY:Jr/yt/Lt,isSDF:lt}};if(dt&&(mt.stretchX||mt.stretchY)){const Qr=HA(Bt,Jt,qt),yn=HA(zt,nr,Xt);for(let Cn=0;Cn<Qr.length-1;Cn++){const xn=Qr[Cn],$n=Qr[Cn+1];for(let gn=0;gn<yn.length-1;gn++)ft.push(an(xn,yn[gn],$n,yn[gn+1]))}}else ft.push(an({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Et+1},{fixed:0,stretch:At+1}));return ft}function x1(ot,nt,lt){let dt=0;for(const ft of ot)dt+=Math.max(nt,Math.min(lt,ft[1]))-Math.max(nt,Math.min(lt,ft[0]));return dt}function HA(ot,nt,lt){const dt=[{fixed:-vm,stretch:0}];for(const[ft,mt]of ot){const yt=dt[dt.length-1];dt.push({fixed:ft-yt.stretch,stretch:yt.stretch}),dt.push({fixed:ft-yt.stretch,stretch:yt.stretch+(mt-ft)})}return dt.push({fixed:nt+vm,stretch:lt}),dt}function v1(ot,nt,lt,dt){return ot/nt*lt+dt}function _1(ot,nt,lt,dt){return ot-nt*lt/dt}function RI(ot,nt,lt,dt){const ft=nt+ot.positionedLines[dt].lineOffset;return dt===0?lt+ft/2:lt+(ft+(nt+ot.positionedLines[dt-1].lineOffset))/2}function II(ot,nt=1,lt=!1){let dt=1/0,ft=1/0,mt=-1/0,yt=-1/0;const Et=ot[0];for(let Wt=0;Wt<Et.length;Wt++){const qt=Et[Wt];(!Wt||qt.x<dt)&&(dt=qt.x),(!Wt||qt.y<ft)&&(ft=qt.y),(!Wt||qt.x>mt)&&(mt=qt.x),(!Wt||qt.y>yt)&&(yt=qt.y)}const At=Math.min(mt-dt,yt-ft);let Ct=At/2;const Lt=new Qu([],$I);if(At===0)return new Vn(dt,ft);for(let Wt=dt;Wt<mt;Wt+=At)for(let qt=ft;qt<yt;qt+=At)Lt.push(new V0(Wt+Ct,qt+Ct,Ct,ot));let Bt=function(Wt){let qt=0,Xt=0,Jt=0;const nr=Wt[0];for(let gr=0,pr=nr.length,xr=pr-1;gr<pr;xr=gr++){const Pr=nr[gr],Rr=nr[xr],Dr=Pr.x*Rr.y-Rr.x*Pr.y;Xt+=(Pr.x+Rr.x)*Dr,Jt+=(Pr.y+Rr.y)*Dr,qt+=3*Dr}return new V0(Xt/qt,Jt/qt,0,Wt)}(ot),zt=Lt.length;for(;Lt.length;){const Wt=Lt.pop();(Wt.d>Bt.d||!Bt.d)&&(Bt=Wt,lt&&console.log("found best %d after %d probes",Math.round(1e4*Wt.d)/1e4,zt)),Wt.max-Bt.d<=nt||(Ct=Wt.h/2,Lt.push(new V0(Wt.p.x-Ct,Wt.p.y-Ct,Ct,ot)),Lt.push(new V0(Wt.p.x+Ct,Wt.p.y-Ct,Ct,ot)),Lt.push(new V0(Wt.p.x-Ct,Wt.p.y+Ct,Ct,ot)),Lt.push(new V0(Wt.p.x+Ct,Wt.p.y+Ct,Ct,ot)),zt+=4)}return lt&&(console.log(`num probes: ${zt}`),console.log(`best distance: ${Bt.d}`)),Bt.p}function $I(ot,nt){return nt.max-ot.max}class V0{constructor(nt,lt,dt,ft){this.p=new Vn(nt,lt),this.h=dt,this.d=function(mt,yt){let Et=!1,At=1/0;for(let Ct=0;Ct<yt.length;Ct++){const Lt=yt[Ct];for(let Bt=0,zt=Lt.length,Wt=zt-1;Bt<zt;Wt=Bt++){const qt=Lt[Bt],Xt=Lt[Wt];qt.y>mt.y!=Xt.y>mt.y&&mt.x<(Xt.x-qt.x)*(mt.y-qt.y)/(Xt.y-qt.y)+qt.x&&(Et=!Et),At=Math.min(At,NS(mt,qt,Xt))}}return(Et?1:-1)*Math.sqrt(At)}(this.p,ft),this.max=this.d+this.h*Math.SQRT2}}const TE=Number.POSITIVE_INFINITY,MI=Math.sqrt(2);function ZA(ot,[nt,lt]){let dt=0,ft=0;if(lt===TE){nt<0&&(nt=0);const mt=nt/MI;switch(ot){case"top-right":case"top-left":ft=mt-7;break;case"bottom-right":case"bottom-left":ft=7-mt;break;case"bottom":ft=7-nt;break;case"top":ft=nt-7}switch(ot){case"top-right":case"bottom-right":dt=-mt;break;case"top-left":case"bottom-left":dt=mt;break;case"left":dt=nt;break;case"right":dt=-nt}}else{switch(nt=Math.abs(nt),lt=Math.abs(lt),ot){case"top-right":case"top-left":case"top":ft=lt-7;break;case"bottom-right":case"bottom-left":case"bottom":ft=7-lt}switch(ot){case"top-right":case"bottom-right":case"right":dt=-nt;break;case"top-left":case"bottom-left":case"left":dt=nt}}return[dt,ft]}function AE(ot){switch(ot){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function OI(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt){let Xt=mt.textMaxSize.evaluate(nt,{},Bt);Xt===void 0&&(Xt=yt);const Jt=ot.layers[0].layout,nr=Jt.get("icon-offset").evaluate(nt,{},Bt),gr=KA(lt.horizontal)||lt.vertical,pr=zt.name==="globe",xr=_l,Pr=yt/xr,Rr=ot.tilePixelRatio*Xt/xr,Dr=($n=ot.overscaling,ot.zoom>18&&$n>2&&($n>>=1),Math.max(Ln/(512*$n),1)*Jt.get("symbol-spacing")),Hr=Jt.get("text-padding")*ot.tilePixelRatio,Jr=Jt.get("icon-padding")*ot.tilePixelRatio,an=zo(Jt.get("text-max-angle")),Qr=Jt.get("text-rotation-alignment")==="map"&&Jt.get("symbol-placement")!=="point",yn=Jt.get("icon-rotation-alignment")==="map"&&Jt.get("symbol-placement")!=="point",Cn=Jt.get("symbol-placement"),xn=Dr/2;var $n;const gn=Jt.get("icon-text-fit").evaluate(nt,{},Bt),En=Jt.get("icon-text-fit-padding").evaluate(nt,{},Bt),jn=gn!=="none";let vn;ot.hasAnyIconTextFit===!1&&jn&&(ot.hasAnyIconTextFit=!0),dt&&jn&&(ot.allowVerticalPlacement&&lt.vertical&&(vn=OA(dt,lt.vertical,gn,En,nr,Pr)),gr&&(dt=OA(dt,gr,gn,En,nr,Pr)));const Bn=(Mn,kn,ao)=>{if(kn.x<0||kn.x>=Ln||kn.y<0||kn.y>=Ln)return;let io=null;if(pr){const{x:Kn,y:Nn,z:mo}=zt.projectTilePoint(kn.x,kn.y,ao);io={anchor:new Op(Kn,Nn,mo,0,void 0),up:zt.upVector(ao,kn.x,kn.y)}}(function(Kn,Nn,mo,oo,_i,_o,wo,bo,Ro,Go,Bo,ns,as,Eo,$a,es,cs,vs,Rs,_s,ys,Bs,Ms,wl,ls,Kl,zu){const wu=Kn.addToLineVertexArray(Nn,oo);let Eu,My,Tm,Oy,Bv,dC,hC,fC=0,pC=0,mC=0,gC=0,tS=-1,rS=-1;const lp={};let yC=Jy("");const jy=mo?mo.anchor:Nn,nS=Ro.layout.get("icon-text-fit").evaluate(ys,{},ls)!=="none";let iS=0,oS=0;if(Ro._unevaluatedLayout.getValue("text-radial-offset")===void 0?[iS,oS]=Ro.layout.get("text-offset").evaluate(ys,{},ls).map(ru=>ru*_l):(iS=Ro.layout.get("text-radial-offset").evaluate(ys,{},ls)*_l,oS=TE),Kn.allowVerticalPlacement&&_i.vertical){const ru=_i.vertical;if($a)dC=PE(ru),bo&&(hC=PE(bo));else{const nu=Ro.layout.get("text-rotate").evaluate(ys,{},ls)+90;Tm=b1(Go,jy,Nn,Bo,ns,as,ru,Eo,nu,es),bo&&(Oy=b1(Go,jy,Nn,Bo,ns,as,bo,vs,nu))}}if(_o){const ru=Ro.layout.get("icon-rotate").evaluate(ys,{},ls),nu=WA(_o,ru,Ms,nS),X0=bo?WA(bo,ru,Ms,nS):void 0;My=b1(Go,jy,Nn,Bo,ns,as,_o,vs,ru),fC=4*nu.length;const xC=Kn.iconSizeData;let Dy=null;xC.kind==="source"?(Dy=[ju*Ro.layout.get("icon-size").evaluate(ys,{},ls)],Dy[0]>_m&&Ts(`${Kn.layerIds[0]}: Value for "icon-size" is >= ${bv}. Reduce your "icon-size".`)):xC.kind==="composite"&&(Dy=[ju*Bs.compositeIconSizes[0].evaluate(ys,{},ls),ju*Bs.compositeIconSizes[1].evaluate(ys,{},ls)],(Dy[0]>_m||Dy[1]>_m)&&Ts(`${Kn.layerIds[0]}: Value for "icon-size" is >= ${bv}. Reduce your "icon-size".`)),Kn.addSymbols(Kn.icon,nu,Dy,_s,Rs,ys,!1,mo,Nn,wu.lineStartIndex,wu.lineLength,-1,wl,ls,Kl,zu),tS=Kn.icon.placedSymbolArray.length-1,X0&&(pC=4*X0.length,Kn.addSymbols(Kn.icon,X0,Dy,_s,Rs,ys,cu.vertical,mo,Nn,wu.lineStartIndex,wu.lineLength,-1,wl,ls,Kl,zu),rS=Kn.icon.placedSymbolArray.length-1)}for(const ru in _i.horizontal){const nu=_i.horizontal[ru];Eu||(yC=Jy(nu.text),$a?Bv=PE(nu):Eu=b1(Go,jy,Nn,Bo,ns,as,nu,Eo,Ro.layout.get("text-rotate").evaluate(ys,{},ls),es));const X0=nu.positionedLines.length===1;if(mC+=qA(Kn,mo,Nn,nu,wo,Ro,$a,ys,es,wu,_i.vertical?cu.horizontal:cu.horizontalOnly,X0?Object.keys(_i.horizontal):[ru],lp,tS,Bs,wl,ls,Kl),X0)break}_i.vertical&&(gC+=qA(Kn,mo,Nn,_i.vertical,wo,Ro,$a,ys,es,wu,cu.vertical,["vertical"],lp,rS,Bs,wl,ls,Kl));let Am=-1;const aS=(ru,nu)=>ru?Math.max(ru,nu):nu;Am=aS(Bv,Am),Am=aS(dC,Am),Am=aS(hC,Am);const q$=Am>-1?1:0;Kn.glyphOffsetArray.length>=65535&&Ts("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ys.sortKey!==void 0&&Kn.addToSortKeyRanges(Kn.symbolInstances.length,ys.sortKey),Kn.symbolInstances.emplaceBack(Nn.x,Nn.y,jy.x,jy.y,jy.z,lp.right>=0?lp.right:-1,lp.center>=0?lp.center:-1,lp.left>=0?lp.left:-1,lp.vertical>=0?lp.vertical:-1,tS,rS,yC,Eu!==void 0?Eu:Kn.collisionBoxArray.length,Eu!==void 0?Eu+1:Kn.collisionBoxArray.length,Tm!==void 0?Tm:Kn.collisionBoxArray.length,Tm!==void 0?Tm+1:Kn.collisionBoxArray.length,My!==void 0?My:Kn.collisionBoxArray.length,My!==void 0?My+1:Kn.collisionBoxArray.length,Oy||Kn.collisionBoxArray.length,Oy?Oy+1:Kn.collisionBoxArray.length,Bo,mC,gC,fC,pC,q$,0,iS,oS,Am,0,nS?1:0)})(ot,kn,io,Mn,lt,dt,ft,vn,ot.layers[0],ot.collisionBoxArray,nt.index,nt.sourceLayerIndex,ot.index,Hr,Qr,At,0,Jr,yn,nr,nt,mt,Ct,Lt,Bt,Wt,qt)};if(Cn==="line")for(const Mn of BA(nt.geometry,0,0,Ln,Ln)){const kn=kI(Mn,Dr,an,lt.vertical||gr,dt,xr,Rr,ot.overscaling,Ln);for(const ao of kn)gr&&jI(ot,gr.text,xn,ao)||Bn(Mn,ao,Bt)}else if(Cn==="line-center"){for(const Mn of nt.geometry)if(Mn.length>1){const kn=CI(Mn,an,lt.vertical||gr,dt,xr,Rr);kn&&Bn(Mn,kn,Bt)}}else if(nt.type==="Polygon")for(const Mn of n1(nt.geometry,0)){const kn=II(Mn,16);Bn(Mn[0],new Op(kn.x,kn.y,0,0,void 0),Bt)}else if(nt.type==="LineString")for(const Mn of nt.geometry)Bn(Mn,new Op(Mn[0].x,Mn[0].y,0,0,void 0),Bt);else if(nt.type==="Point")for(const Mn of nt.geometry)for(const kn of Mn)Bn([kn],new Op(kn.x,kn.y,0,0,void 0),Bt)}const bv=255,_m=bv*ju;function qA(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt,nr){const gr=function(Pr,Rr,Dr,Hr,Jr,an,Qr,yn){const Cn=[];if(Rr.positionedLines.length===0)return Cn;const xn=Hr.layout.get("text-rotate").evaluate(an,{})*Math.PI/180,$n=function(Bn){const Mn=Bn[0],kn=Bn[1],ao=Mn*kn;return ao>0?[Mn,-kn]:ao<0?[-Mn,kn]:Mn===0?[kn,Mn]:[kn,-Mn]}(Dr);let gn=Math.abs(Rr.top-Rr.bottom);for(const Bn of Rr.positionedLines)gn-=Bn.lineOffset;const En=Rr.positionedLines.length,jn=gn/En;let vn=Rr.top-Dr[1];for(let Bn=0;Bn<En;++Bn){const Mn=Rr.positionedLines[Bn];vn=RI(Rr,jn,vn,Bn);for(const kn of Mn.positionedGlyphs){if(!kn.rect)continue;const ao=kn.rect||{};let io=CA+1,Kn=!0,Nn=1,mo=0;if(kn.imageName){const _s=Qr[kn.imageName];if(!_s)continue;if(_s.sdf){Ts("SDF images are not supported in formatted text and will be ignored.");continue}Kn=!1,Nn=_s.pixelRatio,io=eu/Nn}const oo=(Jr||yn)&&kn.vertical,_i=kn.metrics.advance*kn.scale/2,_o=kn.metrics,wo=kn.rect;if(wo===null)continue;yn&&Rr.verticalizable&&(mo=kn.imageName?_i-kn.metrics.width*kn.scale/2:0);const bo=Jr?[kn.x+_i,kn.y]:[0,0];let Ro=[0,0],Go=[0,0],Bo=!1;Jr||(oo?(Go=[kn.x+_i+$n[0],kn.y+$n[1]-mo],Bo=!0):Ro=[kn.x+_i+Dr[0],kn.y+Dr[1]-mo]);const ns=wo.w*kn.scale/(Nn*(kn.localGlyph?Du:1)),as=wo.h*kn.scale/(Nn*(kn.localGlyph?Du:1));let Eo,$a,es,cs;if(oo){const _s=kn.y-vn,ys=new Vn(-_i,_i-_s),Bs=-Math.PI/2,Ms=new Vn(...Go);Eo=new Vn(-_i+Ro[0],Ro[1]),Eo._rotateAround(Bs,ys)._add(Ms),Eo.x+=-_s+_i,Eo.y-=(_o.left-io)*kn.scale;const wl=kn.imageName?_o.advance*kn.scale:_l*kn.scale,ls=String.fromCodePoint(kn.glyph);_I(ls)?Eo.x+=(1-io)*kn.scale:bI(ls)?Eo.x+=wl-_o.height*kn.scale+(-io-1)*kn.scale:Eo.x+=kn.imageName||_o.width+2*io===wo.w&&_o.height+2*io===wo.h?(wl-as)/2:(wl-(_o.height+2*io)*kn.scale)/2,$a=new Vn(Eo.x,Eo.y-ns),es=new Vn(Eo.x+as,Eo.y),cs=new Vn(Eo.x+as,Eo.y-ns)}else{const _s=(_o.left-io)*kn.scale-_i+Ro[0],ys=(-_o.top-io)*kn.scale+Ro[1],Bs=_s+ns,Ms=ys+as;Eo=new Vn(_s,ys),$a=new Vn(Bs,ys),es=new Vn(_s,Ms),cs=new Vn(Bs,Ms)}if(xn){let _s;_s=Jr?new Vn(0,0):Bo?new Vn($n[0],$n[1]):new Vn(Dr[0],Dr[1]),Eo._rotateAround(xn,_s),$a._rotateAround(xn,_s),es._rotateAround(xn,_s),cs._rotateAround(xn,_s)}const vs=new Vn(0,0),Rs=new Vn(0,0);Cn.push({tl:Eo,tr:$a,bl:es,br:cs,texPrimary:ao,texSecondary:void 0,writingMode:Rr.writingMode,glyphOffset:bo,sectionIndex:kn.sectionIndex,isSDF:Kn,pixelOffsetTL:vs,pixelOffsetBR:Rs,minFontScaleX:0,minFontScaleY:0})}}return Cn}(0,dt,At,mt,yt,Et,ft,ot.allowVerticalPlacement),pr=ot.textSizeData;let xr=null;pr.kind==="source"?(xr=[ju*mt.layout.get("text-size").evaluate(Et,{},Jt)],xr[0]>_m&&Ts(`${ot.layerIds[0]}: Value for "text-size" is >= ${bv}. Reduce your "text-size".`)):pr.kind==="composite"&&(xr=[ju*qt.compositeTextSizes[0].evaluate(Et,{},Jt),ju*qt.compositeTextSizes[1].evaluate(Et,{},Jt)],(xr[0]>_m||xr[1]>_m)&&Ts(`${ot.layerIds[0]}: Value for "text-size" is >= ${bv}. Reduce your "text-size".`)),ot.addSymbols(ot.text,gr,xr,At,yt,Et,Lt,nt,lt,Ct.lineStartIndex,Ct.lineLength,Wt,Xt,Jt,nr,!1);for(const Pr of Bt)zt[Pr]=ot.text.placedSymbolArray.length-1;return 4*gr.length}function KA(ot){for(const nt in ot)return ot[nt];return null}function b1(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct){let Lt=yt.top,Bt=yt.bottom,zt=yt.left,Wt=yt.right;const qt=yt.collisionPadding;if(qt&&(zt-=qt[0],Lt-=qt[1],Wt+=qt[2],Bt+=qt[3]),At){const Xt=new Vn(zt,Lt),Jt=new Vn(Wt,Lt),nr=new Vn(zt,Bt),gr=new Vn(Wt,Bt),pr=zo(At);let xr=new Vn(0,0);Ct&&(xr=new Vn(Ct[0],Ct[1])),Xt._rotateAround(pr,xr),Jt._rotateAround(pr,xr),nr._rotateAround(pr,xr),gr._rotateAround(pr,xr),zt=Math.min(Xt.x,Jt.x,nr.x,gr.x),Wt=Math.max(Xt.x,Jt.x,nr.x,gr.x),Lt=Math.min(Xt.y,Jt.y,nr.y,gr.y),Bt=Math.max(Xt.y,Jt.y,nr.y,gr.y)}return ot.emplaceBack(nt.x,nt.y,nt.z,lt.x,lt.y,zt,Lt,Wt,Bt,Et,dt,ft,mt),ot.length-1}function PE(ot){ot.collisionPadding&&(ot.top-=ot.collisionPadding[1],ot.bottom+=ot.collisionPadding[3]);const nt=ot.bottom-ot.top;return nt>0?Math.max(10,nt):null}function jI(ot,nt,lt,dt){const ft=ot.compareText;if(nt in ft){const mt=ft[nt];for(let yt=mt.length-1;yt>=0;yt--)if(dt.dist(mt[yt])<lt)return!0}else ft[nt]=[];return ft[nt].push(dt),!1}function YA(ot,nt){const lt=ot.fovAboveCenter,dt=ot.elevation?ot.elevation.getMinElevationBelowMSL()*nt:0,ft=(ot._camera.position[2]*ot.worldSize-dt)/Math.cos(ot._pitch),mt=Math.sin(lt)*ft/Math.sin(Math.max(Math.PI/2-ot._pitch-lt,.01)),yt=Math.sin(ot._pitch)*mt+ft;return Math.min(1.01*yt,ft*(1/ot._horizonShift))}function Ay(ot,nt){if(!nt.isReprojectedInTileSpace)return{scale:1<<ot.z,x:ot.x,y:ot.y,x2:ot.x+1,y2:ot.y+1,projection:nt};const lt=Math.pow(2,-ot.z),dt=ot.x*lt,ft=(ot.x+1)*lt,mt=ot.y*lt,yt=(ot.y+1)*lt,Et=Zl(dt),At=Zl(ft),Ct=Ws(mt),Lt=Ws(yt),Bt=nt.project(Et,Ct),zt=nt.project(At,Ct),Wt=nt.project(At,Lt),qt=nt.project(Et,Lt);let Xt=Math.min(Bt.x,zt.x,Wt.x,qt.x),Jt=Math.min(Bt.y,zt.y,Wt.y,qt.y),nr=Math.max(Bt.x,zt.x,Wt.x,qt.x),gr=Math.max(Bt.y,zt.y,Wt.y,qt.y);const pr=lt/16;function xr(Rr,Dr,Hr,Jr,an,Qr){const yn=(Hr+an)/2,Cn=(Jr+Qr)/2,xn=nt.project(Zl(yn),Ws(Cn)),$n=Math.max(0,Xt-xn.x,Jt-xn.y,xn.x-nr,xn.y-gr);Xt=Math.min(Xt,xn.x),nr=Math.max(nr,xn.x),Jt=Math.min(Jt,xn.y),gr=Math.max(gr,xn.y),$n>pr&&(xr(Rr,xn,Hr,Jr,yn,Cn),xr(xn,Dr,yn,Cn,an,Qr))}xr(Bt,zt,dt,mt,ft,mt),xr(zt,Wt,ft,mt,ft,yt),xr(Wt,qt,ft,yt,dt,yt),xr(qt,Bt,dt,yt,dt,mt),Xt-=pr,Jt-=pr,nr+=pr,gr+=pr;const Pr=1/Math.max(nr-Xt,gr-Jt);return{scale:Pr,x:Xt*Pr,y:Jt*Pr,x2:nr*Pr,y2:gr*Pr,projection:nt}}function XA(ot,{x:nt,y:lt},dt=0){return new Vn(((nt-dt)*ot.scale-ot.x)*Ln,(lt*ot.scale-ot.y)*Ln)}const DI=at.ae.identity(new Float32Array(16));class bm{constructor(nt){this.spec=nt,this.name=nt.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(nt,lt){return{x:0,y:0,z:0}}unproject(nt,lt){return new na(0,0)}projectTilePoint(nt,lt,dt){return{x:nt,y:lt,z:0}}locationPoint(nt,lt,dt=!0){return nt._coordinatePoint(nt.locationCoordinate(lt),dt)}pixelsPerMeter(nt,lt){return Dl(1,nt)*lt}pixelSpaceConversion(nt,lt,dt){return 1}farthestPixelDistance(nt){return YA(nt,nt.pixelsPerMeter)}pointCoordinate(nt,lt,dt,ft){const mt=nt.horizonLineFromTop(!1),yt=new Vn(lt,Math.max(mt,dt));return nt.rayIntersectionCoordinate(nt.pointRayIntersection(yt,ft))}pointCoordinate3D(nt,lt,dt){const ft=new Vn(lt,dt);if(nt.elevation)return nt.elevation.pointCoordinate(ft);{const mt=this.pointCoordinate(nt,ft.x,ft.y,0);return[mt.x,mt.y,mt.z]}}isPointAboveHorizon(nt,lt){if(nt.elevation&&nt.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(nt,lt.x,lt.y);const dt=nt.horizonLineFromTop();return lt.y<dt}createInversionMatrix(nt,lt){return DI}createTileMatrix(nt,lt,dt){let ft,mt,yt;const Et=dt.canonical,At=at.ae.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const Ct=Ay(Et,this);ft=1,mt=Ct.x+dt.wrap*Ct.scale,yt=Ct.y,at.ae.scale(At,At,[ft/Ct.scale,ft/Ct.scale,nt.pixelsPerMeter/lt])}else ft=lt/nt.zoomScale(Et.z),mt=(Et.x+Math.pow(2,Et.z)*dt.wrap)*ft,yt=Et.y*ft;return at.ae.translate(At,At,[mt,yt,0]),at.ae.scale(At,At,[ft/Ln,ft/Ln,1]),At}upVector(nt,lt,dt){return[0,0,1]}upVectorScale(nt,lt,dt){return{metersToTile:1}}}class LI extends bm{constructor(nt){super(nt),this.range=[4,7],this.center=nt.center||[-96,37.5];const[lt,dt]=this.parallels=nt.parallels||[29.5,45.5],ft=Math.sin(zo(lt));this.n=(ft+Math.sin(zo(dt)))/2,this.c=1+ft*(2*this.n-ft),this.r0=Math.sqrt(this.c)/this.n}project(nt,lt){const{n:dt,c:ft,r0:mt}=this,yt=zo(nt-this.center[0]),Et=zo(lt),At=Math.sqrt(ft-2*dt*Math.sin(Et))/dt;return{x:At*Math.sin(yt*dt),y:At*Math.cos(yt*dt)-mt,z:0}}unproject(nt,lt){const{n:dt,c:ft,r0:mt}=this,yt=mt+lt;let Et=Math.atan2(nt,Math.abs(yt))*Math.sign(yt);yt*dt<0&&(Et-=Math.PI*Math.sign(nt)*Math.sign(yt));const At=zo(this.center[0])*dt;Et=Vp(Et,-Math.PI-At,Math.PI-At);const Ct=jo(Cl(Et/dt)+this.center[0],-180,180),Lt=Math.asin(jo((ft-(nt*nt+yt*yt)*dt*dt)/(2*dt),-1,1)),Bt=jo(Cl(Lt),-Cs,Cs);return new na(Ct,Bt)}}const wv=1.340264,Ev=-.081106,Sv=893e-6,Tv=.003796,w1=Math.sqrt(3)/2;class NI extends bm{project(nt,lt){lt=lt/180*Math.PI,nt=nt/180*Math.PI;const dt=Math.asin(w1*Math.sin(lt)),ft=dt*dt,mt=ft*ft*ft;return{x:.5*(nt*Math.cos(dt)/(w1*(wv+3*Ev*ft+mt*(7*Sv+9*Tv*ft)))/Math.PI+.5),y:1-.5*(dt*(wv+Ev*ft+mt*(Sv+Tv*ft))/Math.PI+1),z:0}}unproject(nt,lt){nt=(2*nt-.5)*Math.PI;let dt=lt=(2*(1-lt)-1)*Math.PI,ft=dt*dt,mt=ft*ft*ft;for(let Lt,Bt,zt,Wt=0;Wt<12&&(Bt=dt*(wv+Ev*ft+mt*(Sv+Tv*ft))-lt,zt=wv+3*Ev*ft+mt*(7*Sv+9*Tv*ft),Lt=Bt/zt,dt=jo(dt-Lt,-Math.PI/3,Math.PI/3),ft=dt*dt,mt=ft*ft*ft,!(Math.abs(Lt)<1e-12));++Wt);const yt=w1*nt*(wv+3*Ev*ft+mt*(7*Sv+9*Tv*ft))/Math.cos(dt),Et=Math.asin(Math.sin(dt)/w1),At=jo(180*yt/Math.PI,-180,180),Ct=jo(180*Et/Math.PI,-Cs,Cs);return new na(At,Ct)}}class FI extends bm{constructor(nt){super(nt),this.wrap=!0,this.supportsWorldCopies=!0}project(nt,lt){return{x:.5+nt/360,y:.5-lt/360,z:0}}unproject(nt,lt){const dt=360*(nt-.5),ft=jo(360*(.5-lt),-Cs,Cs);return new na(dt,ft)}}const U0=Math.PI/2;function E1(ot){return Math.tan((U0+ot)/2)}class BI extends bm{constructor(nt){super(nt),this.center=nt.center||[0,30];const[lt,dt]=this.parallels=nt.parallels||[30,30];let ft=zo(lt),mt=zo(dt);this.southernCenter=ft+mt<0,this.southernCenter&&(ft=-ft,mt=-mt);const yt=Math.cos(ft),Et=E1(ft);this.n=ft===mt?Math.sin(ft):Math.log(yt/Math.cos(mt))/Math.log(E1(mt)/Et),this.f=yt*Math.pow(E1(ft),this.n)/this.n}project(nt,lt){lt=zo(lt),this.southernCenter&&(lt=-lt),nt=zo(nt-this.center[0]);const dt=1e-6,{n:ft,f:mt}=this;mt>0?lt<-U0+dt&&(lt=-U0+dt):lt>U0-dt&&(lt=U0-dt);const yt=mt/Math.pow(E1(lt),ft);let Et=yt*Math.sin(ft*nt),At=mt-yt*Math.cos(ft*nt);return Et=.5*(Et/Math.PI+.5),At=.5*(At/Math.PI+.5),{x:Et,y:this.southernCenter?At:1-At,z:0}}unproject(nt,lt){nt=(2*nt-.5)*Math.PI,this.southernCenter&&(lt=1-lt),lt=(2*(1-lt)-.5)*Math.PI;const{n:dt,f:ft}=this,mt=ft-lt,yt=Math.sign(mt),Et=Math.sign(dt)*Math.sqrt(nt*nt+mt*mt);let At=Math.atan2(nt,Math.abs(mt))*yt;mt*dt<0&&(At-=Math.PI*Math.sign(nt)*yt);const Ct=jo(Cl(At/dt)+this.center[0],-180,180),Lt=jo(Cl(2*Math.atan(Math.pow(ft/Et,1/dt))-U0),-Cs,Cs);return new na(Ct,this.southernCenter?-Lt:Lt)}}class JA extends bm{constructor(nt){super(nt),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(nt,lt){return{x:ep(nt),y:tp(lt),z:0}}unproject(nt,lt){const dt=Zl(nt),ft=Ws(lt);return new na(dt,ft)}}const QA=zo(Cs);class zI extends bm{project(nt,lt){const dt=(lt=zo(lt))*lt,ft=dt*dt;return{x:.5*((nt=zo(nt))*(.8707-.131979*dt+ft*(ft*(.003971*dt-.001529*ft)-.013791))/Math.PI+.5),y:1-.5*(lt*(1.007226+dt*(.015085+ft*(.028874*dt-.044475-.005916*ft)))/Math.PI+1),z:0}}unproject(nt,lt){nt=(2*nt-.5)*Math.PI;let dt=lt=(2*(1-lt)-1)*Math.PI,ft=25,mt=0,yt=dt*dt;do{yt=dt*dt;const Ct=yt*yt;mt=(dt*(1.007226+yt*(.015085+Ct*(.028874*yt-.044475-.005916*Ct)))-lt)/(1.007226+yt*(.045255+Ct*(.259866*yt-.311325-.005916*11*Ct))),dt=jo(dt-mt,-QA,QA)}while(Math.abs(mt)>1e-6&&--ft>0);yt=dt*dt;const Et=jo(Cl(nt/(.8707+yt*(yt*(yt*yt*yt*(.003971-.001529*yt)-.013791)-.131979))),-180,180),At=Cl(dt);return new na(Et,At)}}const eP=zo(Cs);class VI extends bm{project(nt,lt){lt=zo(lt),nt=zo(nt);const dt=Math.cos(lt),ft=2/Math.PI,mt=Math.acos(dt*Math.cos(nt/2)),yt=Math.sin(mt)/mt,Et=.5*(nt*ft+2*dt*Math.sin(nt/2)/yt)||0,At=.5*(lt+Math.sin(lt)/yt)||0;return{x:.5*(Et/Math.PI+.5),y:1-.5*(At/Math.PI+1),z:0}}unproject(nt,lt){let dt=nt=(2*nt-.5)*Math.PI,ft=lt=(2*(1-lt)-1)*Math.PI,mt=25;const yt=1e-6;let Et=0,At=0;do{const Ct=Math.cos(ft),Lt=Math.sin(ft),Bt=2*Lt*Ct,zt=Lt*Lt,Wt=Ct*Ct,qt=Math.cos(dt/2),Xt=Math.sin(dt/2),Jt=2*qt*Xt,nr=Xt*Xt,gr=1-Wt*qt*qt,pr=gr?1/gr:0,xr=gr?Math.acos(Ct*qt)*Math.sqrt(1/gr):0,Pr=.5*(2*xr*Ct*Xt+2*dt/Math.PI)-nt,Rr=.5*(xr*Lt+ft)-lt,Dr=.5*pr*(Wt*nr+xr*Ct*qt*zt)+1/Math.PI,Hr=pr*(Jt*Bt/4-xr*Lt*Xt),Jr=.125*pr*(Bt*Xt-xr*Lt*Wt*Jt),an=.5*pr*(zt*qt+xr*nr*Ct)+.5,Qr=Hr*Jr-an*Dr;Et=(Rr*Hr-Pr*an)/Qr,At=(Pr*Jr-Rr*Dr)/Qr,dt=jo(dt-Et,-Math.PI,Math.PI),ft=jo(ft-At,-eP,eP)}while((Math.abs(Et)>yt||Math.abs(At)>yt)&&--mt>0);return new na(Cl(dt),Cl(ft))}}class tP extends bm{constructor(nt){super(nt),this.center=nt.center||[0,0],this.parallels=nt.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(zo(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(nt,lt){const{scale:dt,cosPhi:ft}=this;return{x:zo(nt)*ft*dt+.5,y:-Math.sin(zo(lt))/ft*dt+.5,z:0}}unproject(nt,lt){const{scale:dt,cosPhi:ft}=this,mt=-(lt-.5)/dt,yt=jo(Cl((nt-.5)/dt)/ft,-180,180),Et=Math.asin(jo(mt*ft,-1,1)),At=jo(Cl(Et),-Cs,Cs);return new na(yt,At)}}class UI extends JA{constructor(nt){super(nt),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(nt,lt,dt){const ft=av(nt,lt,dt),mt=sv(rp(dt));return at.$.transformMat4(ft,ft,mt),{x:ft[0],y:ft[1],z:ft[2]}}locationPoint(nt,lt){const dt=by(lt.lat,lt.lng),ft=at.$.normalize([],dt),mt=nt.elevation?nt.elevation.getAtPointOrZero(nt.locationCoordinate(lt),nt._centerAltitude):nt._centerAltitude,yt=Dl(1,0)*Ln*mt;at.$.scaleAndAdd(dt,dt,ft,yt);const Et=at.ae.identity(new Float64Array(16));return at.ae.multiply(Et,nt.pixelMatrix,nt.globeMatrix),at.$.transformMat4(dt,dt,Et),new Vn(dt[0],dt[1])}pixelsPerMeter(nt,lt){return Dl(1,0)*lt}pixelSpaceConversion(nt,lt,dt){const ft=Dl(1,nt)*lt,mt=ho(Dl(1,45)*lt,ft,dt);return this.pixelsPerMeter(nt,lt)/mt}createTileMatrix(nt,lt,dt){const ft=oE(rp(dt.canonical));return at.ae.multiply(new Float64Array(16),nt.globeMatrix,ft)}createInversionMatrix(nt,lt){const{center:dt}=nt,ft=sv(rp(lt));return at.ae.rotateY(ft,ft,zo(dt.lng)),at.ae.rotateX(ft,ft,zo(dt.lat)),at.ae.scale(ft,ft,[nt._pixelsPerMercatorPixel,nt._pixelsPerMercatorPixel,1]),Float32Array.from(ft)}pointCoordinate(nt,lt,dt,ft){return KS(nt,lt,dt,!0)||new Al(0,0)}pointCoordinate3D(nt,lt,dt){const ft=this.pointCoordinate(nt,lt,dt,0);return[ft.x,ft.y,ft.z]}isPointAboveHorizon(nt,lt){return!KS(nt,lt.x,lt.y,!1)}farthestPixelDistance(nt){const lt=function(ft,mt){const yt=ft.cameraToCenterDistance,Et=ft._centerAltitude*mt,At=ft._camera,Ct=ft._camera.forward(),Lt=at.$.add([],at.$.scale([],Ct,-yt),[0,0,Et]),Bt=ft.worldSize/(2*Math.PI),zt=[0,0,-Bt],Wt=ft.width/ft.height,qt=Math.tan(ft.fovAboveCenter),Xt=at.$.scale([],At.up(),qt),Jt=at.$.scale([],At.right(),qt*Wt),nr=at.$.normalize([],at.$.add([],at.$.add([],Ct,Xt),Jt)),gr=[];let pr;if(new eE(Lt,nr).closestPointOnSphere(zt,Bt,gr)){const xr=at.$.add([],gr,zt),Pr=at.$.sub([],xr,Lt);pr=Math.cos(ft.fovAboveCenter)*at.$.length(Pr)}else{const xr=at.$.sub([],Lt,zt),Pr=at.$.sub([],zt,Lt);at.$.normalize(Pr,Pr);const Rr=at.$.length(xr)-Bt;pr=Math.sqrt(Rr*(Rr+2*Bt));const Dr=Math.acos(pr/(Bt+Rr))-Math.acos(at.$.dot(Ct,Pr));pr*=Math.cos(Dr)}return 1.01*pr}(nt,this.pixelsPerMeter(nt.center.lat,nt.worldSize)),dt=$p(nt.zoom);if(dt>0){const ft=YA(nt,Dl(1,nt.center.lat)*nt.worldSize),mt=nt.worldSize/(2*Math.PI),yt=Math.max(nt.width,nt.height)/nt.worldSize*Math.PI;return ho(lt,ft+mt*(1-Math.cos(yt)),Math.pow(dt,10))}return lt}upVector(nt,lt,dt){return av(lt,dt,nt,1)}upVectorScale(nt){return{metersToTile:Y_(J_(rp(nt)))}}}function rP(ot){const nt=ot.parallels,lt=!!nt&&Math.abs(nt[0]+nt[1])<.01;switch(ot.name){case"mercator":return new JA(ot);case"equirectangular":return new FI(ot);case"naturalEarth":return new zI(ot);case"equalEarth":return new NI(ot);case"winkelTripel":return new VI(ot);case"albers":return lt?new tP(ot):new LI(ot);case"lambertConformalConic":return lt?new tP(ot):new BI(ot);case"globe":return new UI(ot)}throw new Error(`Invalid projection name: ${ot.name}`)}const GI=a1.types,WI=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function S1(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt){const Wt=Et?Math.min(_m,Math.round(Et[0])):0,qt=Et?Math.min(_m,Math.round(Et[1])):0;ot.emplaceBack(nt,lt,Math.round(32*dt),Math.round(32*ft),mt,yt,(Wt<<1)+(At?1:0),qt,16*Ct,16*Lt,256*Bt,256*zt)}function T1(ot,nt,lt){ot.emplaceBack(nt,lt)}function A1(ot,nt,lt,dt,ft,mt,yt){ot.emplaceBack(nt,lt,dt,ft,mt,yt)}function P1(ot,nt,lt,dt,ft){ot.emplaceBack(nt,lt,dt,ft),ot.emplaceBack(nt,lt,dt,ft),ot.emplaceBack(nt,lt,dt,ft),ot.emplaceBack(nt,lt,dt,ft)}function HI(ot){for(const nt of ot.sections)if(So(nt.text))return!0;return!1}class CE{constructor(nt){this.layoutVertexArray=new Ew,this.indexArray=new Fs,this.programConfigurations=nt,this.segments=new ms,this.dynamicLayoutVertexArray=new lm,this.opacityVertexArray=new Tw,this.placedSymbolArray=new mS,this.iconTransitioningVertexArray=new dm,this.globeExtVertexArray=new Sw,this.zOffsetVertexArray=new A0}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(nt,lt,dt,ft,mt){this.isEmpty()||(dt&&(this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,KR.members),this.indexBuffer=nt.createIndexBuffer(this.indexArray,lt),this.dynamicLayoutVertexBuffer=nt.createVertexBuffer(this.dynamicLayoutVertexArray,XR.members,!0),this.opacityVertexBuffer=nt.createVertexBuffer(this.opacityVertexArray,WI,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=nt.createVertexBuffer(this.iconTransitioningVertexArray,JR.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=nt.createVertexBuffer(this.globeExtVertexArray,YR.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||mt)&&(this.zOffsetVertexBuffer=nt.createVertexBuffer(this.zOffsetVertexArray,lA.members,!0)),this.opacityVertexBuffer.itemSize=1),(dt||ft)&&this.programConfigurations.upload(nt))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}Wr(CE,"SymbolBuffers");class kE{constructor(nt,lt,dt){this.layoutVertexArray=new nt,this.layoutAttributes=lt,this.indexArray=new dt,this.segments=new ms,this.collisionVertexArray=new Cw,this.collisionVertexArrayExt=new lm}upload(nt){this.layoutVertexBuffer=nt.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=nt.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=nt.createVertexBuffer(this.collisionVertexArray,QR.members,!0),this.collisionVertexBufferExt=nt.createVertexBuffer(this.collisionVertexArrayExt,eI.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Wr(kE,"CollisionBuffers");class G0{constructor(nt){this.collisionBoxArray=nt.collisionBoxArray,this.zoom=nt.zoom,this.lut=nt.lut,this.overscaling=nt.overscaling,this.layers=nt.layers,this.layerIds=this.layers.map(yt=>yt.fqid),this.index=nt.index,this.pixelRatio=nt.pixelRatio,this.sourceLayerIndex=nt.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=at.ae.identity([]),this.placementViewportMatrix=at.ae.identity([]);const lt=this.layers[0]._unevaluatedLayout._values;this.textSizeData=vE(this.zoom,lt["text-size"]),this.iconSizeData=vE(this.zoom,lt["icon-size"]);const dt=this.layers[0].layout,ft=dt.get("symbol-sort-key"),mt=dt.get("symbol-z-order");this.canOverlap=dt.get("text-allow-overlap")||dt.get("icon-allow-overlap")||dt.get("text-ignore-placement")||dt.get("icon-ignore-placement"),this.sortFeaturesByKey=mt!=="viewport-y"&&ft.constantOr(1)!==void 0,this.sortFeaturesByY=(mt==="viewport-y"||mt==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=dt.get("text-writing-mode").map(yt=>cu[yt]),this.stateDependentLayerIds=this.layers.filter(yt=>yt.isStateDependent()).map(yt=>yt.id),this.sourceID=nt.sourceID,this.projection=nt.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=dt.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new CE(new fm(this.layers,{zoom:this.zoom,lut:this.lut},nt=>/^text/.test(nt))),this.icon=new CE(new fm(this.layers,{zoom:this.zoom,lut:this.lut},nt=>/^icon/.test(nt))),this.glyphOffsetArray=new xS,this.lineVertexArray=new vS,this.symbolInstances=new yS}calculateGlyphDependencies(nt,lt,dt,ft,mt){for(let yt=0;yt<nt.length;yt++){const Et=nt.codePointAt(yt);if(Et===void 0)break;if(lt[Et]=!0,ft&&mt&&Et<=65535){const At=xv[nt.charAt(yt)];At&&(lt[At.charCodeAt(0)]=!0)}}}updateFootprints(nt,lt){}updateReplacement(nt,lt){if(lt.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=lt.updateTime;const dt=lt.getReplacementRegionsForTile(nt.toUnwrapped(),!0);return!gE(this.activeReplacements,dt)&&(this.activeReplacements=dt,!0)}populate(nt,lt,dt,ft){const mt=this.layers[0],yt=mt.layout,Et=this.projection.name==="globe",At=yt.get("text-font"),Ct=yt.get("text-field"),Lt=yt.get("icon-image"),Bt=(Ct.value.kind!=="constant"||Ct.value.value instanceof Sl&&!Ct.value.value.isEmpty()||Ct.value.value.toString().length>0)&&(At.value.kind!=="constant"||At.value.value.length>0),zt=Lt.value.kind!=="constant"||!!Lt.value.value||Object.keys(Lt.parameters).length>0,Wt=yt.get("symbol-sort-key");if(this.features=[],!Bt&&!zt)return;const qt=lt.iconDependencies,Xt=lt.glyphDependencies,Jt=lt.availableImages,nr=new yo(this.zoom);for(const{feature:gr,id:pr,index:xr,sourceLayerIndex:Pr}of nt){const Rr=mt._featureFilter.needGeometry,Dr=Rp(gr,Rr);if(!mt._featureFilter.filter(nr,Dr,dt))continue;if(Rr||(Dr.geometry=Ou(gr,dt,ft)),Et&&gr.type!==1&&dt.z<=5){const Qr=Dr.geometry,yn=.98078528056,Cn=(xn,$n)=>{const gn=av(xn.x,xn.y,dt,1),En=av($n.x,$n.y,dt,1);return at.$.dot(gn,En)<yn};for(let xn=0;xn<Qr.length;xn++)Qr[xn]=GC(Qr[xn],Cn)}let Hr,Jr;if(Bt){const Qr=mt.getValueAndResolveTokens("text-field",Dr,dt,Jt),yn=Sl.factory(Qr);HI(yn)&&(this.hasRTLText=!0),(!this.hasRTLText||To()==="unavailable"||this.hasRTLText&&Lo.isParsed())&&(Hr=vI(yn,mt,Dr))}if(zt){const Qr=mt.getValueAndResolveTokens("icon-image",Dr,dt,Jt);Jr=Qr instanceof Fl?Qr:Fl.fromString(Qr)}if(!Hr&&!Jr)continue;const an=this.sortFeaturesByKey?Wt.evaluate(Dr,{},dt):void 0;if(this.features.push({id:pr,text:Hr,icon:Jr,index:xr,sourceLayerIndex:Pr,geometry:Dr.geometry,properties:gr.properties,type:GI[gr.type],sortKey:an}),Jr&&(qt[Jr.namePrimary]=!0,Jr.nameSecondary&&(qt[Jr.nameSecondary]=!0)),Hr){const Qr=At.evaluate(Dr,{},dt).join(","),yn=yt.get("text-rotation-alignment")==="map"&&yt.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(cu.vertical)>=0;for(const Cn of Hr.sections)if(Cn.image)qt[Cn.image.namePrimary]=!0;else{const xn=bn(Hr.toString()),$n=Cn.fontStack||Qr,gn=Xt[$n]=Xt[$n]||{};this.calculateGlyphDependencies(Cn.text,gn,yn,this.allowVerticalPlacement,xn)}}}yt.get("symbol-placement")==="line"&&(this.features=function(gr){const pr={},xr={},Pr=[];let Rr=0;function Dr(Qr){Pr.push(gr[Qr]),Rr++}function Hr(Qr,yn,Cn){const xn=xr[Qr];return delete xr[Qr],xr[yn]=xn,Pr[xn].geometry[0].pop(),Pr[xn].geometry[0]=Pr[xn].geometry[0].concat(Cn[0]),xn}function Jr(Qr,yn,Cn){const xn=pr[yn];return delete pr[yn],pr[Qr]=xn,Pr[xn].geometry[0].shift(),Pr[xn].geometry[0]=Cn[0].concat(Pr[xn].geometry[0]),xn}function an(Qr,yn,Cn){const xn=Cn?yn[0][yn[0].length-1]:yn[0][0];return`${Qr}:${xn.x}:${xn.y}`}for(let Qr=0;Qr<gr.length;Qr++){const yn=gr[Qr],Cn=yn.geometry,xn=yn.text?yn.text.toString():null;if(!xn){Dr(Qr);continue}const $n=an(xn,Cn),gn=an(xn,Cn,!0);if($n in xr&&gn in pr&&xr[$n]!==pr[gn]){const En=Jr($n,gn,Cn),jn=Hr($n,gn,Pr[En].geometry);delete pr[$n],delete xr[gn],xr[an(xn,Pr[jn].geometry,!0)]=jn,Pr[En].geometry=null}else $n in xr?Hr($n,gn,Cn):gn in pr?Jr($n,gn,Cn):(Dr(Qr),pr[$n]=Rr-1,xr[gn]=Rr-1)}return Pr.filter(Qr=>Qr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((gr,pr)=>gr.sortKey-pr.sortKey)}update(nt,lt,dt,ft,mt){const yt=Object.keys(nt).length!==0;if(yt&&!this.stateDependentLayers.length)return;const Et=yt?this.stateDependentLayers:this.layers;this.text.programConfigurations.updatePaintArrays(nt,lt,Et,dt,ft,mt),this.icon.programConfigurations.updatePaintArrays(nt,lt,Et,dt,ft,mt)}updateZOffset(){const nt=(mt,yt,Et)=>{dt+=yt,dt>mt.length&&mt.resize(dt);for(let At=-yt;At<0;At++)mt.emplace(At+dt,Et)},lt=(mt,yt,Et)=>{ft+=yt,ft>mt.length&&mt.resize(ft);for(let At=-yt;At<0;At++)mt.emplace(At+ft,Et)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let dt=0,ft=0;for(let mt=0;mt<this.symbolInstances.length;mt++){const yt=this.symbolInstances.get(mt),{numHorizontalGlyphVertices:Et,numVerticalGlyphVertices:At,numIconVertices:Ct}=yt,Lt=yt.zOffset,Bt=Ct>0;if((Et>0||At>0)&&(nt(this.text.zOffsetVertexArray,Et,Lt),nt(this.text.zOffsetVertexArray,At,Lt)),Bt){const{placedIconSymbolIndex:zt,verticalPlacedIconSymbolIndex:Wt}=yt;zt>=0&&lt(this.icon.zOffsetVertexArray,Ct,Lt),Wt>=0&&lt(this.icon.zOffsetVertexArray,yt.numVerticalIconVertices,Lt)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(nt){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(nt),this.iconCollisionBox.upload(nt)),this.text.upload(nt,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(nt,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=rP(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(nt,lt){const dt=this.lineVertexArray.length;if(nt.segment!==void 0)for(const{x:ft,y:mt}of lt)this.lineVertexArray.emplaceBack(ft,mt);return{lineStartIndex:dt,lineLength:this.lineVertexArray.length-dt}}addSymbols(nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt,Bt,zt,Wt,qt,Xt,Jt){const nr=nt.indexArray,gr=nt.layoutVertexArray,pr=nt.globeExtVertexArray,xr=nt.segments.prepareSegment(4*lt.length,gr,nr,this.canOverlap?yt.sortKey:void 0),Pr=this.glyphOffsetArray.length,Rr=xr.vertexLength,Dr=this.allowVerticalPlacement&&Et===cu.vertical?Math.PI/2:0,Hr=yt.text&&yt.text.sections;for(let an=0;an<lt.length;an++){const{tl:Qr,tr:yn,bl:Cn,br:xn,texPrimary:$n,texSecondary:gn,pixelOffsetTL:En,pixelOffsetBR:jn,minFontScaleX:vn,minFontScaleY:Bn,glyphOffset:Mn,isSDF:kn,sectionIndex:ao}=lt[an],io=xr.vertexLength,Kn=Mn[1];if(S1(gr,Ct.x,Ct.y,Qr.x,Kn+Qr.y,$n.x,$n.y,dt,kn,En.x,En.y,vn,Bn),S1(gr,Ct.x,Ct.y,yn.x,Kn+yn.y,$n.x+$n.w,$n.y,dt,kn,jn.x,En.y,vn,Bn),S1(gr,Ct.x,Ct.y,Cn.x,Kn+Cn.y,$n.x,$n.y+$n.h,dt,kn,En.x,jn.y,vn,Bn),S1(gr,Ct.x,Ct.y,xn.x,Kn+xn.y,$n.x+$n.w,$n.y+$n.h,dt,kn,jn.x,jn.y,vn,Bn),At){const{x:Nn,y:mo,z:oo}=At.anchor,[_i,_o,wo]=At.up;A1(pr,Nn,mo,oo,_i,_o,wo),A1(pr,Nn,mo,oo,_i,_o,wo),A1(pr,Nn,mo,oo,_i,_o,wo),A1(pr,Nn,mo,oo,_i,_o,wo),P1(nt.dynamicLayoutVertexArray,Nn,mo,oo,Dr)}else P1(nt.dynamicLayoutVertexArray,Ct.x,Ct.y,Ct.z,Dr);if(Jt){const Nn=gn||$n;T1(nt.iconTransitioningVertexArray,Nn.x,Nn.y),T1(nt.iconTransitioningVertexArray,Nn.x+Nn.w,Nn.y),T1(nt.iconTransitioningVertexArray,Nn.x,Nn.y+Nn.h),T1(nt.iconTransitioningVertexArray,Nn.x+Nn.w,Nn.y+Nn.h)}nr.emplaceBack(io,io+1,io+2),nr.emplaceBack(io+1,io+2,io+3),xr.vertexLength+=4,xr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Mn[0]),an!==lt.length-1&&ao===lt[an+1].sectionIndex||nt.programConfigurations.populatePaintArrays(gr.length,yt,yt.index,{},Wt,qt,Xt,Hr&&Hr[ao])}const Jr=At?At.anchor:Ct;nt.placedSymbolArray.emplaceBack(Jr.x,Jr.y,Jr.z,Ct.x,Ct.y,Pr,this.glyphOffsetArray.length-Pr,Rr,Lt,Bt,Ct.segment,dt?dt[0]:0,dt?dt[1]:0,ft[0],ft[1],Et,0,!1,0,zt,0)}_commitLayoutVertex(nt,lt,dt,ft,mt,yt,Et){nt.emplaceBack(lt,dt,ft,mt,yt,Math.round(Et.x),Math.round(Et.y))}_addCollisionDebugVertices(nt,lt,dt,ft,mt,yt,Et){const At=dt.segments.prepareSegment(4,dt.layoutVertexArray,dt.indexArray),Ct=At.vertexLength,Lt=Et.tileAnchorX,Bt=Et.tileAnchorY;for(let Wt=0;Wt<4;Wt++)dt.collisionVertexArray.emplaceBack(0,0,0,0);this._commitDebugCollisionVertexUpdate(dt.collisionVertexArrayExt,lt,nt.padding,Et.zOffset),this._commitLayoutVertex(dt.layoutVertexArray,ft,mt,yt,Lt,Bt,new Vn(nt.x1,nt.y1)),this._commitLayoutVertex(dt.layoutVertexArray,ft,mt,yt,Lt,Bt,new Vn(nt.x2,nt.y1)),this._commitLayoutVertex(dt.layoutVertexArray,ft,mt,yt,Lt,Bt,new Vn(nt.x2,nt.y2)),this._commitLayoutVertex(dt.layoutVertexArray,ft,mt,yt,Lt,Bt,new Vn(nt.x1,nt.y2)),At.vertexLength+=4;const zt=dt.indexArray;zt.emplaceBack(Ct,Ct+1),zt.emplaceBack(Ct+1,Ct+2),zt.emplaceBack(Ct+2,Ct+3),zt.emplaceBack(Ct+3,Ct),At.primitiveLength+=4}_addTextDebugCollisionBoxes(nt,lt,dt,ft,mt,yt){for(let Et=ft;Et<mt;Et++){const At=dt.get(Et),Ct=this.getSymbolInstanceTextSize(nt,yt,lt,Et);this._addCollisionDebugVertices(At,Ct,this.textCollisionBox,At.projectedAnchorX,At.projectedAnchorY,At.projectedAnchorZ,yt)}}_addIconDebugCollisionBoxes(nt,lt,dt,ft,mt,yt){for(let Et=ft;Et<mt;Et++){const At=dt.get(Et),Ct=this.getSymbolInstanceIconSize(nt,lt,yt.placedIconSymbolIndex);this._addCollisionDebugVertices(At,Ct,this.iconCollisionBox,At.projectedAnchorX,At.projectedAnchorY,At.projectedAnchorZ,yt)}}generateCollisionDebugBuffers(nt,lt){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new kE(z_,cA.members,dm),this.iconCollisionBox=new kE(z_,cA.members,dm);const dt=F0(this.iconSizeData,nt),ft=F0(this.textSizeData,nt);for(let mt=0;mt<this.symbolInstances.length;mt++){const yt=this.symbolInstances.get(mt);this._addTextDebugCollisionBoxes(ft,nt,lt,yt.textBoxStartIndex,yt.textBoxEndIndex,yt),this._addTextDebugCollisionBoxes(ft,nt,lt,yt.verticalTextBoxStartIndex,yt.verticalTextBoxEndIndex,yt),this._addIconDebugCollisionBoxes(dt,nt,lt,yt.iconBoxStartIndex,yt.iconBoxEndIndex,yt),this._addIconDebugCollisionBoxes(dt,nt,lt,yt.verticalIconBoxStartIndex,yt.verticalIconBoxEndIndex,yt)}}getSymbolInstanceTextSize(nt,lt,dt,ft){const mt=this.text.placedSymbolArray.get(lt.rightJustifiedTextSymbolIndex>=0?lt.rightJustifiedTextSymbolIndex:lt.centerJustifiedTextSymbolIndex>=0?lt.centerJustifiedTextSymbolIndex:lt.leftJustifiedTextSymbolIndex>=0?lt.leftJustifiedTextSymbolIndex:lt.verticalPlacedTextSymbolIndex>=0?lt.verticalPlacedTextSymbolIndex:ft),yt=g1(this.textSizeData,nt,mt)/_l;return this.tilePixelRatio*yt}getSymbolInstanceIconSize(nt,lt,dt){const ft=this.icon.placedSymbolArray.get(dt),mt=g1(this.iconSizeData,nt,ft);return this.tilePixelRatio*mt}_commitDebugCollisionVertexUpdate(nt,lt,dt,ft){nt.emplaceBack(lt,-dt,-dt,ft),nt.emplaceBack(lt,dt,-dt,ft),nt.emplaceBack(lt,dt,dt,ft),nt.emplaceBack(lt,-dt,dt,ft)}_updateTextDebugCollisionBoxes(nt,lt,dt,ft,mt,yt){for(let Et=ft;Et<mt;Et++){const At=dt.get(Et),Ct=this.getSymbolInstanceTextSize(nt,yt,lt,Et);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,Ct,At.padding,yt.zOffset)}}_updateIconDebugCollisionBoxes(nt,lt,dt,ft,mt,yt){for(let Et=ft;Et<mt;Et++){const At=dt.get(Et),Ct=this.getSymbolInstanceIconSize(nt,lt,yt.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,Ct,At.padding,yt.zOffset)}}updateCollisionDebugBuffers(nt,lt){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const dt=F0(this.iconSizeData,nt),ft=F0(this.textSizeData,nt);for(let mt=0;mt<this.symbolInstances.length;mt++){const yt=this.symbolInstances.get(mt);this._updateTextDebugCollisionBoxes(ft,nt,lt,yt.textBoxStartIndex,yt.textBoxEndIndex,yt),this._updateTextDebugCollisionBoxes(ft,nt,lt,yt.verticalTextBoxStartIndex,yt.verticalTextBoxEndIndex,yt),this._updateIconDebugCollisionBoxes(dt,nt,lt,yt.iconBoxStartIndex,yt.iconBoxEndIndex,yt),this._updateIconDebugCollisionBoxes(dt,nt,lt,yt.verticalIconBoxStartIndex,yt.verticalIconBoxEndIndex,yt)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(nt,lt,dt,ft,mt,yt,Et,At,Ct){const Lt={};if(lt<dt){const{x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr,featureIndex:Pr}=nt.get(lt);Lt.textBox={x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr},Lt.textFeatureIndex=Pr}if(ft<mt){const{x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr,featureIndex:Pr}=nt.get(ft);Lt.verticalTextBox={x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr},Lt.verticalTextFeatureIndex=Pr}if(yt<Et){const{x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr,featureIndex:Pr}=nt.get(yt);Lt.iconBox={x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr},Lt.iconFeatureIndex=Pr}if(At<Ct){const{x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr,featureIndex:Pr}=nt.get(At);Lt.verticalIconBox={x1:Bt,y1:zt,x2:Wt,y2:qt,padding:Xt,projectedAnchorX:Jt,projectedAnchorY:nr,projectedAnchorZ:gr,tileAnchorX:pr,tileAnchorY:xr},Lt.verticalIconFeatureIndex=Pr}return Lt}deserializeCollisionBoxes(nt){this.collisionArrays=[];for(let lt=0;lt<this.symbolInstances.length;lt++){const dt=this.symbolInstances.get(lt);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(nt,dt.textBoxStartIndex,dt.textBoxEndIndex,dt.verticalTextBoxStartIndex,dt.verticalTextBoxEndIndex,dt.iconBoxStartIndex,dt.iconBoxEndIndex,dt.verticalIconBoxStartIndex,dt.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(nt,lt){const dt=nt.placedSymbolArray.get(lt),ft=dt.vertexStartIndex+4*dt.numGlyphs;for(let mt=dt.vertexStartIndex;mt<ft;mt+=4)nt.indexArray.emplaceBack(mt,mt+1,mt+2),nt.indexArray.emplaceBack(mt+1,mt+2,mt+3)}getSortedSymbolIndexes(nt){if(this.sortedAngle===nt&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const lt=Math.sin(nt),dt=Math.cos(nt),ft=[],mt=[],yt=[];for(let Et=0;Et<this.symbolInstances.length;++Et){yt.push(Et);const At=this.symbolInstances.get(Et);ft.push(0|Math.round(lt*At.tileAnchorX+dt*At.tileAnchorY)),mt.push(At.featureIndex)}return yt.sort((Et,At)=>ft[Et]-ft[At]||mt[At]-mt[Et]),yt}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let nt=0;nt<this.symbolInstances.length;++nt)this.symbolInstanceIndexesSortedZOffset.push(nt)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((nt,lt)=>this.symbolInstances.get(lt).zOffset-this.symbolInstances.get(nt).zOffset)}addToSortKeyRanges(nt,lt){const dt=this.sortKeyRanges[this.sortKeyRanges.length-1];dt&&dt.sortKey===lt?dt.symbolInstanceEnd=nt+1:this.sortKeyRanges.push({sortKey:lt,symbolInstanceStart:nt,symbolInstanceEnd:nt+1})}sortFeatures(nt){if(this.sortFeaturesByY&&this.sortedAngle!==nt&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(nt),this.sortedAngle=nt,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const lt of this.symbolInstanceIndexes){const dt=this.symbolInstances.get(lt);this.featureSortOrder.push(dt.featureIndex);const{rightJustifiedTextSymbolIndex:ft,centerJustifiedTextSymbolIndex:mt,leftJustifiedTextSymbolIndex:yt,verticalPlacedTextSymbolIndex:Et,placedIconSymbolIndex:At,verticalPlacedIconSymbolIndex:Ct}=dt;ft>=0&&this.addIndicesForPlacedSymbol(this.text,ft),mt>=0&&mt!==ft&&this.addIndicesForPlacedSymbol(this.text,mt),yt>=0&&yt!==mt&&yt!==ft&&this.addIndicesForPlacedSymbol(this.text,yt),Et>=0&&this.addIndicesForPlacedSymbol(this.text,Et),At>=0&&this.addIndicesForPlacedSymbol(this.icon,At),Ct>=0&&this.addIndicesForPlacedSymbol(this.icon,Ct)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Wr(G0,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),G0.addDynamicAttributes=P1;class vu{constructor(nt,lt,dt,ft){this.context=nt,this.format=dt,this.texture=nt.gl.createTexture(),this.update(lt,ft)}update(nt,lt,dt){const{width:ft,height:mt}=nt,{context:yt}=this,{gl:Et}=yt;if(Et.bindTexture(Et.TEXTURE_2D,this.texture),yt.pixelStoreUnpackFlipY.set(!1),yt.pixelStoreUnpack.set(1),yt.pixelStoreUnpackPremultiplyAlpha.set(this.format===Et.RGBA&&(!lt||lt.premultiply!==!1)),this.useMipmap=!!(lt&&lt.useMipmap),dt||this.size&&this.size[0]===ft&&this.size[1]===mt){const{x:At,y:Ct}=dt||{x:0,y:0};if(nt instanceof HTMLImageElement||nt instanceof HTMLCanvasElement||nt instanceof HTMLVideoElement||nt instanceof ImageData||ImageBitmap&&nt instanceof ImageBitmap)Et.texSubImage2D(Et.TEXTURE_2D,0,At,Ct,Et.RGBA,Et.UNSIGNED_BYTE,nt);else{let Lt=this.format,Bt=Et.UNSIGNED_BYTE;this.format===Et.R32F&&(Lt=Et.RED,Bt=Et.FLOAT),Et.texSubImage2D(Et.TEXTURE_2D,0,At,Ct,ft,mt,Lt,Bt,nt.data)}}else if(this.size=[ft,mt],nt instanceof HTMLImageElement||nt instanceof HTMLCanvasElement||nt instanceof HTMLVideoElement||nt instanceof ImageData||ImageBitmap&&nt instanceof ImageBitmap){let At=this.format;this.format===Et.R8&&(At=Et.RED),Et.texImage2D(Et.TEXTURE_2D,0,this.format,At,Et.UNSIGNED_BYTE,nt)}else{let At=this.format,Ct=this.format,Lt=Et.UNSIGNED_BYTE,Bt=!1;this.format===Et.DEPTH_COMPONENT&&(At=Et.DEPTH_COMPONENT16,Lt=Et.UNSIGNED_SHORT),this.format===Et.DEPTH_STENCIL&&(At=Et.DEPTH24_STENCIL8,Lt=Et.UNSIGNED_INT_24_8,Bt=!0),this.format===Et.R8&&(Ct=Et.RED),this.format===Et.R32F&&(Lt=Et.FLOAT,Ct=Et.RED),!this.useMipmap&&Bt?Et.texStorage2D(Et.TEXTURE_2D,1,At,ft,mt):Et.texImage2D(Et.TEXTURE_2D,0,At,ft,mt,0,Ct,Lt,nt.data)}this.useMipmap&&Et.generateMipmap(Et.TEXTURE_2D)}bind(nt,lt,dt=!1){const{context:ft}=this,{gl:mt}=ft;mt.bindTexture(mt.TEXTURE_2D,this.texture),nt!==this.minFilter&&(mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_MAG_FILTER,nt),mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_MIN_FILTER,this.useMipmap&&!dt?nt===mt.NEAREST?mt.NEAREST_MIPMAP_NEAREST:mt.LINEAR_MIPMAP_LINEAR:nt),this.minFilter=nt),lt!==this.wrapS&&(mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_WRAP_S,lt),mt.texParameteri(mt.TEXTURE_2D,mt.TEXTURE_WRAP_T,lt),this.wrapS=lt)}bindExtraParam(nt,lt,dt,ft){const{context:mt}=this,{gl:yt}=mt;yt.bindTexture(yt.TEXTURE_2D,this.texture),lt!==this.magFilter&&(yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MAG_FILTER,lt),this.magFilter=lt),nt!==this.minFilter&&(yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_MIN_FILTER,this.useMipmap?nt===yt.NEAREST?yt.NEAREST_MIPMAP_NEAREST:yt.LINEAR_MIPMAP_LINEAR:nt),this.minFilter=nt),dt!==this.wrapS&&(yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_S,dt),this.wrapS=dt),ft!==this.wrapT&&(yt.texParameteri(yt.TEXTURE_2D,yt.TEXTURE_WRAP_T,ft),this.wrapT=ft)}destroy(){const{gl:nt}=this.context;nt.deleteTexture(this.texture),this.texture=null}}class C1{constructor(nt,lt){this.context=nt,this.texture=lt}bind(nt,lt){const{context:dt}=this,{gl:ft}=dt;ft.bindTexture(ft.TEXTURE_2D,this.texture),nt!==this.minFilter&&(ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MAG_FILTER,nt),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_MIN_FILTER,nt),this.minFilter=nt),lt!==this.wrapS&&(ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_S,lt),ft.texParameteri(ft.TEXTURE_2D,ft.TEXTURE_WRAP_T,lt),this.wrapS=lt)}}const _u=32,ap=33,wm=new Uint16Array(8184);for(let ot=0;ot<2046;ot++){let nt=ot+2,lt=0,dt=0,ft=0,mt=0,yt=0,Et=0;for(1&nt?ft=mt=yt=_u:lt=dt=Et=_u;(nt>>=1)>1;){const Ct=lt+ft>>1,Lt=dt+mt>>1;1&nt?(ft=lt,mt=dt,lt=yt,dt=Et):(lt=ft,dt=mt,ft=yt,mt=Et),yt=Ct,Et=Lt}const At=4*ot;wm[At+0]=lt,wm[At+1]=dt,wm[At+2]=ft,wm[At+3]=mt}const sp=new Uint16Array(2178),Em=new Uint8Array(1089),k1=new Uint16Array(1089);function nP(ot){return ot===0?-.03125:ot===32?.03125:0}var R1=ba([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Py{constructor(nt,lt,dt,ft){this.id=Py.uniqueIdxCounter,Py.uniqueIdxCounter++,this.context=nt;const mt=nt.gl;this.buffer=mt.createBuffer(),this.dynamicDraw=!!dt,this.context.unbindVAO(),nt.bindElementBuffer.set(this.buffer),mt.bufferData(mt.ELEMENT_ARRAY_BUFFER,lt.arrayBuffer,this.dynamicDraw?mt.DYNAMIC_DRAW:mt.STATIC_DRAW),this.dynamicDraw||ft||lt.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(nt){this.id=Py.uniqueIdxCounter,Py.uniqueIdxCounter++;const lt=this.context.gl;this.context.unbindVAO(),this.bind(),lt.bufferSubData(lt.ELEMENT_ARRAY_BUFFER,0,nt.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}Py.uniqueIdxCounter=0;class W0{constructor(nt,lt,dt){this.func=nt,this.mask=lt,this.range=dt}}W0.ReadOnly=!1,W0.ReadWrite=!0,W0.disabled=new W0(519,W0.ReadOnly,[0,1]);const RE=7680;class IE{constructor(nt,lt,dt,ft,mt,yt){this.test=nt,this.ref=lt,this.mask=dt,this.fail=ft,this.depthFail=mt,this.pass=yt}}IE.disabled=new IE({func:519,mask:0},0,0,RE,RE,RE);const Av=771;class tu{constructor(nt,lt,dt,ft){this.blendFunction=nt,this.blendColor=lt,this.mask=dt,this.blendEquation=ft}}tu.Replace=[1,0,1,0],tu.disabled=new tu(tu.Replace,ga.transparent,[!1,!1,!1,!1]),tu.unblended=new tu(tu.Replace,ga.transparent,[!0,!0,!0,!0]),tu.alphaBlended=new tu([1,Av,1,Av],ga.transparent,[!0,!0,!0,!0]),tu.alphaBlendedNonPremultiplied=new tu([770,Av,770,Av],ga.transparent,[!0,!0,!0,!0]),tu.multiply=new tu([774,0,774,0],ga.transparent,[!0,!0,!0,!0]);const $E=1029,ME=2305;class Lu{constructor(nt,lt,dt){this.enable=nt,this.mode=lt,this.frontFace=dt}}Lu.disabled=new Lu(!1,$E,ME),Lu.backCCW=new Lu(!0,$E,ME),Lu.backCW=new Lu(!0,$E,2304),Lu.frontCW=new Lu(!0,1028,2304),Lu.frontCCW=new Lu(!0,1028,ME);var ZI=ba([{name:"a_index",type:"Int16",components:1}]);const iP={type:2,extent:Ln,loadGeometry:()=>[[new Vn(0,0),new Vn(Ln+1,0),new Vn(Ln+1,Ln+1),new Vn(0,Ln+1),new Vn(0,0)]]};class I1{constructor(nt,lt,dt,ft,mt){this.tileID=nt,this.uid=Vy(),this.uses=0,this.tileSize=lt,this.tileZoom=dt,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=mt,ft&&ft.style&&(this._lastUpdatedBrightness=ft.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",ft&&ft.transform&&(this.projection=ft.transform.projection)}registerFadeDuration(nt){const lt=nt+this.timeAdded;lt<Ys.now()||this.fadeEndTime&&lt<this.fadeEndTime||(this.fadeEndTime=lt)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=Ay(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(nt,lt,dt){if(this.unloadVectorData(),this.state="loaded",nt){nt.featureIndex&&(this.latestFeatureIndex=nt.featureIndex,nt.rawTileData?(this.latestRawTileData=nt.rawTileData,this.latestFeatureIndex.rawTileData=nt.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=nt.collisionBoxArray,this.buckets=function(ft,mt){const yt={};if(!mt)return yt;for(const Et of ft){const At=Et.layerIds.map(Ct=>mt.getLayer(Ct)).filter(Boolean);if(At.length!==0){Et.layers=At,Et.stateDependentLayerIds&&(Et.stateDependentLayers=Et.stateDependentLayerIds.map(Ct=>At.filter(Lt=>Lt.id===Ct)[0]));for(const Ct of At)yt[Ct.fqid]=Et}}return yt}(nt.buckets,lt.style),this.hasSymbolBuckets=!1;for(const ft in this.buckets){const mt=this.buckets[ft];if(mt instanceof G0){if(this.hasSymbolBuckets=!0,!dt)break;mt.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const ft in this.buckets){const mt=this.buckets[ft];if(mt instanceof G0&&mt.hasRTLText){this.hasRTLText=!0,Lo.isLoading()||Lo.isLoaded()||To()!=="deferred"||Ko();break}}this.queryPadding=0;for(const ft in this.buckets){const mt=this.buckets[ft],yt=lt.style.getOwnLayer(ft);if(!yt)continue;const Et=yt.queryRadius(mt);this.queryPadding=Math.max(this.queryPadding,Et)}nt.imageAtlas&&(this.imageAtlas=nt.imageAtlas),nt.glyphAtlasImage&&(this.glyphAtlasImage=nt.glyphAtlasImage),nt.lineAtlas&&(this.lineAtlas=nt.lineAtlas),this._lastUpdatedBrightness=nt.brightness}else this.collisionBoxArray=new Dw}unloadVectorData(){if(this.hasData()){for(const nt in this.buckets)this.buckets[nt].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(nt){return this.buckets[nt.fqid]}upload(nt){for(const ft in this.buckets){const mt=this.buckets[ft];mt.uploadPending()&&mt.upload(nt)}const lt=nt.gl,dt=this.imageAtlas;if(dt&&!dt.uploaded){const ft=!!Object.keys(dt.patternPositions).length;this.imageAtlasTexture=new vu(nt,dt.image,lt.RGBA,{useMipmap:ft}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new vu(nt,this.glyphAtlasImage,lt.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new vu(nt,this.lineAtlas.image,lt.R8),this.lineAtlas.uploaded=!0)}prepare(nt,lt,dt){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(nt,this.imageAtlasTexture,dt),!lt||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const ft=lt.style.getBrightness();(this._lastUpdatedBrightness||ft)&&(this._lastUpdatedBrightness&&ft&&Math.abs(this._lastUpdatedBrightness-ft)<.001||(this._lastUpdatedBrightness=ft,this.updateBuckets(void 0,lt)))}queryRenderedFeatures(nt,lt,dt,ft,mt,yt,Et,At){return this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)?this.latestFeatureIndex.query({tileResult:ft,pixelPosMatrix:Et,transform:yt,params:mt,tileTransform:this.tileTransform},nt,lt,dt):{}}querySourceFeatures(nt,lt){const dt=this.latestFeatureIndex;if(!dt||!dt.rawTileData)return;const ft=dt.loadVTLayers(),mt=lt?lt.sourceLayer:"",yt=ft._geojsonTileLayer||ft[mt];if(!yt)return;const Et=Iu(lt&&lt.filter),{z:At,x:Ct,y:Lt}=this.tileID.canonical,Bt={z:At,x:Ct,y:Lt};for(let zt=0;zt<yt.length;zt++){const Wt=yt.feature(zt);if(Et.needGeometry){const Jt=Rp(Wt,!0);if(!Et.filter(new yo(this.tileID.overscaledZ),Jt,this.tileID.canonical))continue}else if(!Et.filter(new yo(this.tileID.overscaledZ),Wt))continue;const qt=dt.getId(Wt,mt),Xt=new TA(Wt,At,Ct,Lt,qt);Xt.tile=Bt,nt.push(Xt)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(nt){const lt=this.expirationTime;if(nt.cacheControl){const dt=Nm(nt.cacheControl);dt["max-age"]&&(this.expirationTime=Date.now()+1e3*dt["max-age"])}else nt.expires&&(this.expirationTime=new Date(nt.expires).getTime());if(this.expirationTime){const dt=Date.now();let ft=!1;if(this.expirationTime>dt)ft=!1;else if(lt)if(this.expirationTime<lt)ft=!0;else{const mt=this.expirationTime-lt;mt?this.expirationTime=dt+Math.max(mt,3e4):ft=!0}else ft=!0;ft?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(nt,lt){this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(nt).length!==0&&lt&&this.updateBuckets(nt,lt)}updateBuckets(nt,lt){if(!this.latestFeatureIndex)return;const dt=this.latestFeatureIndex.loadVTLayers(),ft=lt.style.listImages(),mt=lt.style.getBrightness();for(const yt in this.buckets){if(!lt.style.hasLayer(yt))continue;const Et=this.buckets[yt],At=Et.layers[0].sourceLayer||"_geojsonTileLayer",Ct=dt[At];let Lt={};if(nt&&(Lt=nt[At],!Ct||!Lt||Object.keys(Lt).length===0))continue;if(Et.update(Lt,Ct,ft,this.imageAtlas&&this.imageAtlas.patternPositions||{},mt),Et instanceof f1||Et instanceof i1){const zt=lt.style.getOwnSourceCache(Et.layers[0].source);lt._terrain&&lt._terrain.enabled&&zt&&Et.programConfigurations.needsUpload&&lt._terrain._clearRenderCacheForTile(zt.id,this.tileID)}const Bt=lt&&lt.style&&lt.style.getOwnLayer(yt);Bt&&(this.queryPadding=Math.max(this.queryPadding,Bt.queryRadius(Et)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ys.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(nt){this.symbolFadeHoldUntil=Ys.now()+nt}setTexture(nt,lt){const dt=lt.context,ft=dt.gl;this.texture=this.texture||lt.getTileTexture(nt.width),this.texture&&this.texture instanceof vu?this.texture.update(nt,{useMipmap:!0}):(this.texture=new vu(dt,nt,ft.RGBA,{useMipmap:!0}),this.texture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE))}setDependencies(nt,lt){const dt={};for(const ft of lt)dt[ft]=!0;this.dependencies[nt]=dt}hasDependency(nt,lt){for(const dt of nt){const ft=this.dependencies[dt];if(ft){for(const mt of lt)if(ft[mt])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(nt,lt){if(!lt||lt.name==="mercator"||this._tileDebugBuffer)return;const dt=Ou(iP,this.tileID.canonical,this.tileTransform)[0],ft=new $u,mt=new Qx;for(let yt=0;yt<dt.length;yt++){const{x:Et,y:At}=dt[yt];ft.emplaceBack(Et,At),mt.emplaceBack(yt)}mt.emplaceBack(0),this._tileDebugIndexBuffer=nt.createIndexBuffer(mt),this._tileDebugBuffer=nt.createVertexBuffer(ft,ov.members),this._tileDebugSegments=ms.simpleSegment(0,0,ft.length,mt.length)}_makeTileBoundsBuffers(nt,lt){if(this._tileBoundsBuffer||!lt||lt.name==="mercator")return;const dt=Ou(iP,this.tileID.canonical,this.tileTransform)[0];let ft,mt;if(this.isRaster){const yt=function(Et,At){const Ct=Ay(Et,At),Lt=Math.pow(2,Et.z);for(let Jt=0;Jt<ap;Jt++)for(let nr=0;nr<ap;nr++){const gr=Zl((Et.x+(nr+nP(nr))/_u)/Lt),pr=Ws((Et.y+(Jt+nP(Jt))/_u)/Lt),xr=At.project(gr,pr),Pr=Jt*ap+nr;sp[2*Pr+0]=Math.round((xr.x*Ct.scale-Ct.x)*Ln),sp[2*Pr+1]=Math.round((xr.y*Ct.scale-Ct.y)*Ln)}Em.fill(0),k1.fill(0);for(let Jt=2045;Jt>=0;Jt--){const nr=4*Jt,gr=wm[nr+0],pr=wm[nr+1],xr=wm[nr+2],Pr=wm[nr+3],Rr=gr+xr>>1,Dr=pr+Pr>>1,Hr=Rr+Dr-pr,Jr=Dr+gr-Rr,an=pr*ap+gr,Qr=Pr*ap+xr,yn=Dr*ap+Rr,Cn=Math.hypot((sp[2*an+0]+sp[2*Qr+0])/2-sp[2*yn+0],(sp[2*an+1]+sp[2*Qr+1])/2-sp[2*yn+1])>=16;Em[yn]=Em[yn]||(Cn?1:0),Jt<1022&&(Em[yn]=Em[yn]||Em[(pr+Jr>>1)*ap+(gr+Hr>>1)]||Em[(Pr+Jr>>1)*ap+(xr+Hr>>1)])}const Bt=new Ap,zt=new Fs;let Wt=0;function qt(Jt,nr){const gr=nr*ap+Jt;return k1[gr]===0&&(Bt.emplaceBack(sp[2*gr+0],sp[2*gr+1],Jt*Ln/_u,nr*Ln/_u),k1[gr]=++Wt),k1[gr]-1}function Xt(Jt,nr,gr,pr,xr,Pr){const Rr=Jt+gr>>1,Dr=nr+pr>>1;if(Math.abs(Jt-xr)+Math.abs(nr-Pr)>1&&Em[Dr*ap+Rr])Xt(xr,Pr,Jt,nr,Rr,Dr),Xt(gr,pr,xr,Pr,Rr,Dr);else{const Hr=qt(Jt,nr),Jr=qt(gr,pr),an=qt(xr,Pr);zt.emplaceBack(Hr,Jr,an)}}return Xt(0,0,_u,_u,_u,0),Xt(_u,_u,0,0,0,_u),{vertices:Bt,indices:zt}}(this.tileID.canonical,lt);ft=yt.vertices,mt=yt.indices}else{ft=new Ap,mt=new Fs;for(const{x:Et,y:At}of dt)ft.emplaceBack(Et,At,0,0);const yt=cv(ft.int16,void 0,4);for(let Et=0;Et<yt.length;Et+=3)mt.emplaceBack(yt[Et],yt[Et+1],yt[Et+2])}this._tileBoundsBuffer=nt.createVertexBuffer(ft,R1.members),this._tileBoundsIndexBuffer=nt.createIndexBuffer(mt),this._tileBoundsSegments=ms.simpleSegment(0,0,ft.length,mt.length)}_makeGlobeTileDebugBuffers(nt,lt){const dt=lt.projection;if(!dt||dt.name!=="globe"||lt.freezeTileCoverage)return;const ft=this.tileID.canonical,mt=sv(YS(ft,lt)),yt=$p(lt.zoom);let Et;yt>0&&(Et=at.ae.invert(new Float64Array(16),lt.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(nt,ft,lt,mt,Et,yt),this._makeGlobeTileDebugTextBuffer(nt,ft,lt,mt,Et,yt)}_globePoint(nt,lt,dt,ft,mt,yt,Et){let At=av(nt,lt,dt);if(yt){const Ct=1<<dt.z,Lt=ep(ft.center.lng),Bt=tp(ft.center.lat),zt=(dt.x+.5)/Ct-Lt;let Wt=0;zt>.5?Wt=-1:zt<-.5&&(Wt=1);let qt=(nt/Ln+dt.x)/Ct+Wt,Xt=(lt/Ln+dt.y)/Ct;qt=(qt-Lt)*ft._pixelsPerMercatorPixel+Lt,Xt=(Xt-Bt)*ft._pixelsPerMercatorPixel+Bt;const Jt=[qt*ft.worldSize,Xt*ft.worldSize,0];at.$.transformMat4(Jt,Jt,yt),At=Ip(At,Jt,Et)}return at.$.transformMat4(At,At,mt)}_makeGlobeTileDebugBorderBuffer(nt,lt,dt,ft,mt,yt){const Et=new $u,At=new Qx,Ct=new N_,Lt=(zt,Wt,qt,Xt,Jt)=>{const nr=(qt-zt)/(Jt-1),gr=(Xt-Wt)/(Jt-1),pr=Et.length;for(let xr=0;xr<Jt;xr++){const Pr=zt+xr*nr,Rr=Wt+xr*gr;Et.emplaceBack(Pr,Rr);const Dr=this._globePoint(Pr,Rr,lt,dt,ft,mt,yt);Ct.emplaceBack(Dr[0],Dr[1],Dr[2]),At.emplaceBack(pr+xr)}},Bt=Ln;Lt(0,0,Bt,0,16),Lt(Bt,0,Bt,Bt,16),Lt(Bt,Bt,0,Bt,16),Lt(0,Bt,0,0,16),this._tileDebugIndexBuffer=nt.createIndexBuffer(At),this._tileDebugBuffer=nt.createVertexBuffer(Et,ov.members),this._globeTileDebugBorderBuffer=nt.createVertexBuffer(Ct,qS.members),this._tileDebugSegments=ms.simpleSegment(0,0,Et.length,At.length)}_makeGlobeTileDebugTextBuffer(nt,lt,dt,ft,mt,yt){const Et=Ln/4,At=new $u,Ct=new Fs,Lt=new N_,Bt=25;Ct.reserve(32),At.reserve(Bt),Lt.reserve(Bt);const zt=(Wt,qt)=>Bt*Wt+qt;for(let Wt=0;Wt<Bt;Wt++){const qt=Wt*Et;for(let Xt=0;Xt<Bt;Xt++){const Jt=Xt*Et;At.emplaceBack(Jt,qt);const nr=this._globePoint(Jt,qt,lt,dt,ft,mt,yt);Lt.emplaceBack(nr[0],nr[1],nr[2])}}for(let Wt=0;Wt<4;Wt++)for(let qt=0;qt<4;qt++){const Xt=zt(Wt,qt),Jt=zt(Wt,qt+1),nr=zt(Wt+1,qt),gr=zt(Wt+1,qt+1);Ct.emplaceBack(Xt,Jt,nr),Ct.emplaceBack(nr,Jt,gr)}this._tileDebugTextIndexBuffer=nt.createIndexBuffer(Ct),this._tileDebugTextBuffer=nt.createVertexBuffer(At,ov.members),this._globeTileDebugTextBuffer=nt.createVertexBuffer(Lt,qS.members),this._tileDebugTextSegments=ms.simpleSegment(0,0,Bt,32)}destroy(nt=!1){for(const lt in this.buckets)this.buckets[lt].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!nt&&this.texture&&this.texture instanceof vu&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}function qI(ot,nt,lt){ot===1?nt.header_length=lt.readFixed32():ot===2?nt.x=lt.readVarint():ot===3?nt.y=lt.readVarint():ot===4?nt.z=lt.readVarint():ot===5&&nt.layers.push(function(dt,ft){return dt.readFields(QI,{version:0,name:"",units:"",tilesize:0,buffer:0,pixel_format:0,data_index:[]},ft)}(lt,lt.readVarint()+lt.pos))}function KI(ot,nt,lt){ot===1?(nt.delta_filter=function(dt,ft){return dt.readFields(YI,{block_size:0},ft)}(lt,lt.readVarint()+lt.pos),nt.filter="delta_filter"):ot===2?(lt.readVarint(),nt.filter="zigzag_filter"):ot===3?(lt.readVarint(),nt.filter="bitshuffle_filter"):ot===4&&(lt.readVarint(),nt.filter="byteshuffle_filter")}function YI(ot,nt,lt){ot===1&&(nt.block_size=lt.readVarint())}function XI(ot,nt,lt){ot===1?(lt.readVarint(),nt.codec="gzip_data"):ot===2?(lt.readVarint(),nt.codec="jpeg_image"):ot===3?(lt.readVarint(),nt.codec="webp_image"):ot===4&&(lt.readVarint(),nt.codec="png_image")}function JI(ot,nt,lt){ot===1?nt.first_byte=lt.readFixed64():ot===2?nt.last_byte=lt.readFixed64():ot===3?nt.filters.push(function(dt,ft){return dt.readFields(KI,{},ft)}(lt,lt.readVarint()+lt.pos)):ot===4?nt.codec=function(dt,ft){return dt.readFields(XI,{},ft)}(lt,lt.readVarint()+lt.pos):ot===5?nt.deprecated_offset=lt.readFloat():ot===6?nt.deprecated_scale=lt.readFloat():ot===7?nt.bands.push(lt.readString()):ot===8?nt.offset=lt.readDouble():ot===9&&(nt.scale=lt.readDouble())}function QI(ot,nt,lt){ot===1?nt.version=lt.readVarint():ot===2?nt.name=lt.readString():ot===3?nt.units=lt.readString():ot===4?nt.tilesize=lt.readVarint():ot===5?nt.buffer=lt.readVarint():ot===6?nt.pixel_format=lt.readVarint():ot===7&&nt.data_index.push(function(dt,ft){return dt.readFields(JI,{first_byte:0,last_byte:0,filters:[],codec:null,offset:0,scale:0,deprecated_offset:0,deprecated_scale:0,bands:[]},ft)}(lt,lt.readVarint()+lt.pos))}function e$(ot,nt,lt){if(ot===2)(function(dt,ft,mt){dt.readFields(t$,mt,ft)})(lt,lt.readVarint()+lt.pos,nt);else if(ot===3)throw new Error("Not implemented")}function t$(ot,nt,lt){if(ot===1){let dt=0;const ft=lt.readVarint()+lt.pos;for(;lt.pos<ft;)nt[dt++]=lt.readVarint()}}class r${constructor(nt){this.capacity=nt,this.cache=new Map}get(nt){if(!this.cache.has(nt))return;const lt=this.cache.get(nt);return this.cache.delete(nt),this.cache.set(nt,lt),lt}put(nt,lt){this.cache.has(nt)?this.cache.delete(nt):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(nt,lt)}}function n$(ot,nt){if(nt.length!==4)throw new Error(`Expected data of dimension 4 but got ${nt.length}.`);let lt=nt[3];for(let dt=2;dt>=1;dt--){const ft=dt===1?1:0,mt=dt===2?1:0;for(let yt=0;yt<nt[0];yt++){const Et=nt[1]*yt;for(let At=ft;At<nt[1];At++){const Ct=nt[2]*(At+Et);for(let Lt=mt;Lt<nt[2];Lt++){const Bt=nt[3]*(Lt+Ct);for(let zt=0;zt<nt[3];zt++){const Wt=Bt+zt;ot[Wt]+=ot[Wt-lt]}}}}lt*=nt[dt]}return ot}function i$(ot){for(let nt=0,lt=ot.length;nt<lt;nt++)ot[nt]=ot[nt]>>>1^-(1&ot[nt]);return ot}function o$(ot,nt){switch(nt){case"uint32":return ot;case"uint16":for(let lt=0;lt<ot.length;lt+=2){const dt=ot[lt],ft=ot[lt+1];ot[lt]=(240&dt)>>4|(61440&dt)>>8|(240&ft)<<4|61440&ft,ot[lt+1]=15&dt|(3840&dt)>>4|(15&ft)<<8|(3840&ft)<<4}return ot;case"uint8":for(let lt=0;lt<ot.length;lt+=4){const dt=ot[lt],ft=ot[lt+1],mt=ot[lt+2],yt=ot[lt+3];ot[lt+0]=(192&dt)>>6|(192&ft)>>4|(192&mt)>>2|192&yt,ot[lt+1]=(48&dt)>>4|(48&ft)>>2|48&mt|(48&yt)<<2,ot[lt+2]=(12&dt)>>2|12&ft|(12&mt)<<2|(12&yt)<<4,ot[lt+3]=3&dt|(3&ft)<<2|(3&mt)<<4|(3&yt)<<6}return ot;default:throw new Error(`Invalid pixel format, "${nt}"`)}}var uu=Uint8Array,Pv=Uint16Array,a$=Int32Array,oP=new uu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),aP=new uu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s$=new uu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sP=function(ot,nt){for(var lt=new Pv(31),dt=0;dt<31;++dt)lt[dt]=nt+=1<<ot[dt-1];var ft=new a$(lt[30]);for(dt=1;dt<30;++dt)for(var mt=lt[dt];mt<lt[dt+1];++mt)ft[mt]=mt-lt[dt]<<5|dt;return{b:lt,r:ft}},lP=sP(oP,2),cP=lP.b,l$=lP.r;cP[28]=258,l$[258]=28;for(var c$=sP(aP,0).b,uP=new Pv(32768),ks=0;ks<32768;++ks){var H0=(43690&ks)>>1|(21845&ks)<<1;uP[ks]=((65280&(H0=(61680&(H0=(52428&H0)>>2|(13107&H0)<<2))>>4|(3855&H0)<<4))>>8|(255&H0)<<8)>>1}var Cv=function(ot,nt,lt){for(var dt=ot.length,ft=0,mt=new Pv(nt);ft<dt;++ft)ot[ft]&&++mt[ot[ft]-1];var yt,Et=new Pv(nt);for(ft=1;ft<nt;++ft)Et[ft]=Et[ft-1]+mt[ft-1]<<1;yt=new Pv(1<<nt);var At=15-nt;for(ft=0;ft<dt;++ft)if(ot[ft])for(var Ct=ft<<4|ot[ft],Lt=nt-ot[ft],Bt=Et[ot[ft]-1]++<<Lt,zt=Bt|(1<<Lt)-1;Bt<=zt;++Bt)yt[uP[Bt]>>At]=Ct;return yt},kv=new uu(288);for(ks=0;ks<144;++ks)kv[ks]=8;for(ks=144;ks<256;++ks)kv[ks]=9;for(ks=256;ks<280;++ks)kv[ks]=7;for(ks=280;ks<288;++ks)kv[ks]=8;var dP=new uu(32);for(ks=0;ks<32;++ks)dP[ks]=5;var u$=Cv(kv,9),d$=Cv(dP,5),OE=function(ot){for(var nt=ot[0],lt=1;lt<ot.length;++lt)ot[lt]>nt&&(nt=ot[lt]);return nt},Nu=function(ot,nt,lt){var dt=nt/8|0;return(ot[dt]|ot[dt+1]<<8)>>(7&nt)&lt},jE=function(ot,nt){var lt=nt/8|0;return(ot[lt]|ot[lt+1]<<8|ot[lt+2]<<16)>>(7&nt)},h$=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Fu=function(ot,nt,lt){var dt=new Error(nt||h$[ot]);if(dt.code=ot,Error.captureStackTrace&&Error.captureStackTrace(dt,Fu),!lt)throw dt;return dt},f$=new uu(0),p$=typeof TextDecoder<"u"&&new TextDecoder;try{p$.decode(f$,{stream:!0})}catch{}const m$={gzip_data:"gzip"};class bu extends Error{constructor(nt){super(nt),this.name="MRTError"}}const g$={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},hP={uint32:1,uint16:2,uint8:4},y$={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let DE,LE;class Rv{constructor(nt=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=nt}getLayer(nt){const lt=this.layers[nt];if(!lt)throw new bu(`Layer '${nt}' not found`);return lt}getHeaderLength(nt){const lt=new Uint8Array(nt),dt=new DataView(nt);if(lt[0]!==13)throw new bu("File is not a valid MRT.");return dt.getUint32(1,!0)}parseHeader(nt){const lt=new Uint8Array(nt),dt=this.getHeaderLength(nt);if(lt.length<dt)throw new bu(`Expected header with length >= ${dt} but got buffer of length ${lt.length}`);const ft=function(mt,yt){return mt.readFields(qI,{header_length:0,x:0,y:0,z:0,layers:[]},void 0)}(new DE(lt.subarray(0,dt)));if(!isNaN(this.x)&&(this.x!==ft.x||this.y!==ft.y||this.z!==ft.z))throw new bu(`Invalid attempt to parse header ${ft.z}/${ft.x}/${ft.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=ft.x,this.y=ft.y,this.z=ft.z;for(const mt of ft.layers)this.layers[mt.name]=new x$(mt,{cacheSize:this._cacheSize});return this}createDecodingTask(nt){const lt=[],dt=this.getLayer(nt.layerName);for(let ft of nt.blockIndices){const mt=dt.dataIndex[ft],yt=mt.first_byte-nt.firstByte,Et=mt.last_byte-nt.firstByte;if(dt._blocksInProgress.has(ft))continue;const At={layerName:dt.name,firstByte:yt,lastByte:Et,pixelFormat:dt.pixelFormat,blockIndex:ft,blockShape:[mt.bands.length].concat(dt.bandShape),buffer:dt.buffer,codec:mt.codec.codec,filters:mt.filters.map(Ct=>Ct.filter)};dt._blocksInProgress.add(ft),lt.push(At)}return new fP(lt,()=>{lt.forEach(ft=>dt._blocksInProgress.delete(ft.blockIndex))},(ft,mt)=>{if(lt.forEach(yt=>dt._blocksInProgress.delete(yt.blockIndex)),ft)throw ft;mt.forEach(yt=>{this.getLayer(yt.layerName).processDecodedData(yt)})})}}class x${constructor({version:nt,name:lt,units:dt,tilesize:ft,pixel_format:mt,buffer:yt,data_index:Et},At){if(this.version=nt,this.version!==1)throw new bu(`Cannot parse raster layer encoded with MRT version ${nt}`);this.name=lt,this.units=dt,this.tileSize=ft,this.buffer=yt,this.pixelFormat=g$[mt],this.dataIndex=Et,this.bandShape=[ft+2*yt,ft+2*yt,hP[this.pixelFormat]],this._decodedBlocks=new r$(At?At.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return hP[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:nt})=>nt).flat()}processDecodedData(nt){const lt=nt.blockIndex.toString();this._decodedBlocks.get(lt)||this._decodedBlocks.put(lt,nt.data)}getBlockForBand(nt){let lt=0;switch(typeof nt){case"string":for(const[dt,ft]of this.dataIndex.entries()){for(const[mt,yt]of ft.bands.entries())if(yt===nt)return{bandIndex:lt+mt,blockIndex:dt,blockBandIndex:mt};lt+=ft.bands.length}break;case"number":for(const[dt,ft]of this.dataIndex.entries()){if(nt>=lt&&nt<lt+ft.bands.length)return{bandIndex:nt,blockIndex:dt,blockBandIndex:nt-lt};lt+=ft.bands.length}break;default:throw new bu(`Invalid band \`${JSON.stringify(nt)}\`. Expected string or integer.`)}throw new bu(`Band not found: ${JSON.stringify(nt)}`)}getDataRange(nt){let lt=1/0,dt=-1/0;const ft=[],mt=new Set;for(const yt of nt){const{blockIndex:Et}=this.getBlockForBand(yt);if(Et<0)throw new bu(`Invalid band: ${JSON.stringify(yt)}`);const At=this.dataIndex[Et];ft.includes(Et)||ft.push(Et),mt.add(Et),lt=Math.min(lt,At.first_byte),dt=Math.max(dt,At.last_byte)}if(mt.size>this.cacheSize)throw new bu(`Number of blocks to decode (${mt.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:lt,lastByte:dt,blockIndices:ft}}hasBand(nt){const{blockIndex:lt}=this.getBlockForBand(nt);return lt>=0}hasDataForBand(nt){const{blockIndex:lt}=this.getBlockForBand(nt);return lt>=0&&!!this._decodedBlocks.get(lt.toString())}getBandView(nt){const{blockIndex:lt,blockBandIndex:dt}=this.getBlockForBand(nt),ft=this._decodedBlocks.get(lt.toString());if(!ft)throw new bu(`Data for band ${JSON.stringify(nt)} of layer "${this.name}" not decoded.`);const mt=this.dataIndex[lt],yt=this.bandShape.reduce((Ct,Lt)=>Ct*Lt,1),Et=dt*yt,At=ft.subarray(Et,Et+yt);return{data:At,bytes:new Uint8Array(At.buffer).subarray(At.byteOffset,At.byteOffset+At.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:mt.offset!==0?mt.offset:mt.deprecated_offset,scale:mt.scale!==0?mt.scale:mt.deprecated_scale}}}Rv.setPbf=function(ot){DE=ot};class fP{constructor(nt,lt,dt){this.tasks=nt,this._onCancel=lt,this._onComplete=dt,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(nt,lt){this._finalized||(this._onComplete(nt,lt),this._finalized=!0)}}Rv.performDecoding=function(ot,nt){const lt=new Uint8Array(ot);return Promise.all(nt.tasks.map(dt=>{const{layerName:ft,firstByte:mt,lastByte:yt,pixelFormat:Et,blockShape:At,blockIndex:Ct,filters:Lt,codec:Bt}=dt,zt=lt.subarray(mt,yt+1),Wt=new Uint32Array(At[0]*At[1]*At[2]);let qt;if(Bt!=="gzip_data")throw new bu(`Unhandled codec: ${Bt}`);return qt=function(Xt,Jt){if(!globalThis.DecompressionStream&&Jt==="gzip_data")return Promise.resolve(((xr=function(Dr){Dr[0]==31&&Dr[1]==139&&Dr[2]==8||Fu(6,"invalid gzip data");var Hr=Dr[3],Jr=10;4&Hr&&(Jr+=2+(Dr[10]|Dr[11]<<8));for(var an=(Hr>>3&1)+(Hr>>4&1);an>0;an-=!Dr[Jr++]);return Jr+(2&Hr)}(pr=Xt))+8>pr.length&&Fu(6,"invalid gzip data"),function(Dr,Hr,Jr,an){var Qr=Dr.length;if(!Qr||Hr.f&&!Hr.l)return Jr||new uu(0);var yn=!Jr,Cn=yn||Hr.i!=2,xn=Hr.i;yn&&(Jr=new uu(3*Qr));var $n,gn,En=function(Tm){var Oy=Jr.length;if(Tm>Oy){var Bv=new uu(Math.max(2*Oy,Tm));Bv.set(Jr),Jr=Bv}},jn=Hr.f||0,vn=Hr.p||0,Bn=Hr.b||0,Mn=Hr.l,kn=Hr.d,ao=Hr.m,io=Hr.n,Kn=8*Qr;do{if(!Mn){jn=Nu(Dr,vn,1);var Nn=Nu(Dr,vn+1,3);if(vn+=3,!Nn){var mo=Dr[(Eo=4+((vn+7)/8|0))-4]|Dr[Eo-3]<<8,oo=Eo+mo;if(oo>Qr){xn&&Fu(0);break}Cn&&En(Bn+mo),Jr.set(Dr.subarray(Eo,oo),Bn),Hr.b=Bn+=mo,Hr.p=vn=8*oo,Hr.f=jn;continue}if(Nn==1)Mn=u$,kn=d$,ao=9,io=5;else if(Nn==2){var _i=Nu(Dr,vn,31)+257,_o=Nu(Dr,vn+10,15)+4,wo=_i+Nu(Dr,vn+5,31)+1;vn+=14;for(var bo=new uu(wo),Ro=new uu(19),Go=0;Go<_o;++Go)Ro[s$[Go]]=Nu(Dr,vn+3*Go,7);vn+=3*_o;var Bo=OE(Ro),ns=(1<<Bo)-1,as=Cv(Ro,Bo);for(Go=0;Go<wo;){var Eo,$a=as[Nu(Dr,vn,ns)];if(vn+=15&$a,(Eo=$a>>4)<16)bo[Go++]=Eo;else{var es=0,cs=0;for(Eo==16?(cs=3+Nu(Dr,vn,3),vn+=2,es=bo[Go-1]):Eo==17?(cs=3+Nu(Dr,vn,7),vn+=3):Eo==18&&(cs=11+Nu(Dr,vn,127),vn+=7);cs--;)bo[Go++]=es}}var vs=bo.subarray(0,_i),Rs=bo.subarray(_i);ao=OE(vs),io=OE(Rs),Mn=Cv(vs,ao),kn=Cv(Rs,io)}else Fu(1);if(vn>Kn){xn&&Fu(0);break}}Cn&&En(Bn+131072);for(var _s=(1<<ao)-1,ys=(1<<io)-1,Bs=vn;;Bs=vn){var Ms=(es=Mn[jE(Dr,vn)&_s])>>4;if((vn+=15&es)>Kn){xn&&Fu(0);break}if(es||Fu(2),Ms<256)Jr[Bn++]=Ms;else{if(Ms==256){Bs=vn,Mn=null;break}var wl=Ms-254;Ms>264&&(wl=Nu(Dr,vn,(1<<(zu=oP[Go=Ms-257]))-1)+cP[Go],vn+=zu);var ls=kn[jE(Dr,vn)&ys],Kl=ls>>4;if(ls||Fu(3),vn+=15&ls,Rs=c$[Kl],Kl>3){var zu=aP[Kl];Rs+=jE(Dr,vn)&(1<<zu)-1,vn+=zu}if(vn>Kn){xn&&Fu(0);break}Cn&&En(Bn+131072);var wu=Bn+wl;if(Bn<Rs){var Eu=0-Rs,My=Math.min(Rs,wu);for(Eu+Bn<0&&Fu(3);Bn<My;++Bn)Jr[Bn]=(void 0)[Eu+Bn]}for(;Bn<wu;++Bn)Jr[Bn]=Jr[Bn-Rs]}}Hr.l=Mn,Hr.p=Bs,Hr.b=Bn,Hr.f=jn,Mn&&(jn=1,Hr.m=ao,Hr.d=kn,Hr.n=io)}while(!jn);return Bn!=Jr.length&&yn?($n=Jr,((gn=Bn)==null||gn>$n.length)&&(gn=$n.length),new uu($n.subarray(0,gn))):Jr.subarray(0,Bn)}(pr.subarray(xr,-8),{i:2},new uu(((nr=pr)[(gr=nr.length)-4]|nr[gr-3]<<8|nr[gr-2]<<16|nr[gr-1]<<24)>>>0))));var nr,gr,pr,xr;const Pr=m$[Jt];if(!Pr)throw new Error(`Unhandled codec: ${Jt}`);const Rr=new globalThis.DecompressionStream(Pr);return new Response(new Blob([Xt]).stream().pipeThrough(Rr)).arrayBuffer().then(Dr=>new Uint8Array(Dr))}(zt,Bt).then(Xt=>(function(Jt,nr){Jt.readFields(e$,nr)}(new DE(Xt),Wt),new y$[Et](Wt.buffer))),qt.then(Xt=>{for(let Jt=Lt.length-1;Jt>=0;Jt--)switch(Lt[Jt]){case"delta_filter":n$(Xt,At);break;case"zigzag_filter":i$(Xt);break;case"bitshuffle_filter":o$(Xt,Et);break;default:throw new bu(`Unhandled filter "${Lt[Jt]}"`)}return{layerName:ft,blockIndex:Ct,data:Xt}}).catch(Xt=>{throw Xt})}))},Rv.setPbf(yv);class pP extends I1{constructor(nt,lt,dt,ft,mt){super(nt,lt,dt,ft,mt),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(nt,lt){const dt=lt.context,ft=dt.gl;this.texture=this.texture||lt.getTileTexture(nt.width),this.texture&&this.texture instanceof vu?this.texture.update(nt,{useMipmap:!1,premultiply:!1}):this.texture=new vu(dt,nt,ft.RGBA,{useMipmap:!1,premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(nt=16384,lt){const dt=this._mrt=new Rv(30),ft=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(nt-1)}});return this.entireBuffer=null,this.request=pp(ft,(mt,yt,Et,At)=>{if(mt)lt(mt);else try{const Ct=dt.getHeaderLength(yt);if(Ct>nt)return void(this.request=this.fetchHeader(Ct,lt));dt.parseHeader(yt),this._isHeaderLoaded=!0;let Lt=0;for(const Bt of Object.values(dt.layers))Lt=Math.max(Lt,Bt.dataIndex[Bt.dataIndex.length-1].last_byte);yt.byteLength>=Lt&&(this.entireBuffer=yt),lt(null,this.entireBuffer||yt,Et,At)}catch(Ct){lt(Ct)}}),this.request}fetchBand(nt,lt,dt){const ft=this._mrt;if(!this._isHeaderLoaded||!ft)return void dt(new Error("Tile header is not ready"));const mt=this.actor;if(!mt)return void dt(new Error("Can't fetch tile band without an actor"));let yt;const Et=(Bt,zt)=>{yt.complete(Bt,zt),Bt?dt(Bt):(this.updateTextureDescriptor(nt,lt),dt(null,this.textureDescriptor&&this.textureDescriptor.img))},At=(Bt,zt)=>{if(Bt)return dt(Bt);const Wt=mt.send("decodeRasterArray",{buffer:zt,task:yt},Et,void 0,!0);this._workQueue.push(()=>{Wt&&Wt.cancel(),yt.cancel()})},Ct=ft.getLayer(nt);if(!Ct)return void dt(new Error(`Unknown sourceLayer "${nt}"`));if(Ct.hasDataForBand(lt))return this.updateTextureDescriptor(nt,lt),void dt(null,this.textureDescriptor?this.textureDescriptor.img:null);const Lt=Ct.getDataRange([lt]);if(yt=ft.createDecodingTask(Lt),!yt||yt.tasks.length)if(this.flushQueues(),this.entireBuffer)At(null,this.entireBuffer.slice(Lt.firstByte,Lt.lastByte+1));else{const Bt=Object.assign({},this.requestParams,{headers:{Range:`bytes=${Lt.firstByte}-${Lt.lastByte}`}}),zt=pp(Bt,At);this._fetchQueue.push(()=>{zt.cancel(),yt.cancel()})}else dt(null)}updateNeeded(nt,lt){return(!this.textureDescriptor||this.textureDescriptor.band!==lt||this.textureDescriptor.layer!==nt)&&this.state!=="errored"}updateTextureDescriptor(nt,lt){if(!this._mrt)return;const dt=this._mrt.getLayer(nt);if(!dt||!dt.hasBand(lt)||!dt.hasDataForBand(lt))return;const{bytes:ft,tileSize:mt,buffer:yt,offset:Et,scale:At}=dt.getBandView(lt),Ct=mt+2*yt,Lt={data:ft,width:Ct,height:Ct},Bt=this.texture;Bt&&Bt instanceof vu&&Bt.update(Lt,{useMipmap:!1,premultiply:!1}),this.textureDescriptor={layer:nt,band:lt,img:Lt,buffer:yt,offset:Et,tileSize:mt,format:dt.pixelFormat,mix:[At,256*At,65536*At,16777216*At]}}}class v${constructor(nt,lt){this.max=nt,this.onRemove=lt,this.reset()}reset(){for(const nt in this.data)for(const lt of this.data[nt])lt.timeout&&clearTimeout(lt.timeout),this.onRemove(lt.value);return this.data={},this.order=[],this}add(nt,lt,dt){const ft=nt.wrapped().key;this.data[ft]===void 0&&(this.data[ft]=[]);const mt={value:lt,timeout:void 0};if(dt!==void 0&&(mt.timeout=setTimeout(()=>{this.remove(nt,mt)},dt)),this.data[ft].push(mt),this.order.push(ft),this.order.length>this.max){const yt=this._getAndRemoveByKey(this.order[0]);yt&&this.onRemove(yt)}return this}has(nt){return nt.wrapped().key in this.data}getAndRemove(nt){return this.has(nt)?this._getAndRemoveByKey(nt.wrapped().key):null}_getAndRemoveByKey(nt){const lt=this.data[nt].shift();return lt.timeout&&clearTimeout(lt.timeout),this.data[nt].length===0&&delete this.data[nt],this.order.splice(this.order.indexOf(nt),1),lt.value}getByKey(nt){const lt=this.data[nt];return lt?lt[0].value:null}get(nt){return this.has(nt)?this.data[nt.wrapped().key][0].value:null}remove(nt,lt){if(!this.has(nt))return this;const dt=nt.wrapped().key,ft=lt===void 0?0:this.data[dt].indexOf(lt),mt=this.data[dt][ft];return this.data[dt].splice(ft,1),mt.timeout&&clearTimeout(mt.timeout),this.data[dt].length===0&&delete this.data[dt],this.onRemove(mt.value),this.order.splice(this.order.indexOf(dt),1),this}setMaxSize(nt){for(this.max=nt;this.order.length>this.max;){const lt=this._getAndRemoveByKey(this.order[0]);lt&&this.onRemove(lt)}return this}filter(nt){const lt=[];for(const dt in this.data)for(const ft of this.data[dt])nt(ft.value)||lt.push(ft);for(const dt of lt)this.remove(dt.value.tileID,dt)}}class Cy extends xp{constructor(nt,lt,dt){super(),this.id=nt,this._onlySymbols=dt,lt.on("data",ft=>{ft.dataType==="source"&&ft.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&ft.dataType==="source"&&ft.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),lt.on("error",()=>{this._sourceErrored=!0}),this._source=lt,this._tiles={},this._cache=new v$(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=lt.minTileCacheSize,this._maxTileCacheSize=lt.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new gI,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(nt){this.map=nt,this._minTileCacheSize=this._minTileCacheSize===void 0&&nt?nt._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&nt?nt._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const nt in this._tiles){const lt=this._tiles[nt];if(lt.state!=="loaded"&&lt.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const nt=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,nt&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(nt,lt){return nt.isSymbolTile=this._onlySymbols,nt.isExtraShadowCaster=this._shadowCasterTiles[nt.tileID.key],this._source.loadTile(nt,lt)}_unloadTile(nt){if(this._source.unloadTile)return this._source.unloadTile(nt)}_abortTile(nt){if(this._source.abortTile)return this._source.abortTile(nt)}serialize(){return this._source.serialize()}prepare(nt){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const lt in this._tiles){const dt=this._tiles[lt];dt.upload(nt),dt.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return hx(this._tiles).map(nt=>nt.tileID).sort(mP).map(nt=>nt.key)}getRenderableIds(nt,lt){const dt=[];for(const ft in this._tiles)this._isIdRenderable(+ft,nt,lt)&&dt.push(this._tiles[ft]);return nt?dt.sort((ft,mt)=>{const yt=ft.tileID,Et=mt.tileID,At=new Vn(yt.canonical.x,yt.canonical.y)._rotate(this.transform.angle),Ct=new Vn(Et.canonical.x,Et.canonical.y)._rotate(this.transform.angle);return yt.overscaledZ-Et.overscaledZ||Ct.y-At.y||Ct.x-At.x}).map(ft=>ft.tileID.key):dt.map(ft=>ft.tileID).sort(mP).map(ft=>ft.key)}hasRenderableParent(nt){const lt=this.findLoadedParent(nt,0);return!!lt&&this._isIdRenderable(lt.tileID.key)}_isIdRenderable(nt,lt,dt){return this._tiles[nt]&&this._tiles[nt].hasData()&&!this._coveredTiles[nt]&&(lt||!this._tiles[nt].holdingForFade())&&(dt||!this._shadowCasterTiles[nt])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const nt in this._tiles)this._tiles[nt].state!=="errored"&&this._reloadTile(+nt,"reloading")}}_reloadTile(nt,lt){const dt=this._tiles[nt];dt&&(dt.state!=="loading"&&(dt.state=lt),this._loadTile(dt,this._tileLoaded.bind(this,dt,nt,lt)))}_tileLoaded(nt,lt,dt,ft){if(ft)if(nt.state="errored",ft.status!==404)this._source.fire(new Xm(ft,{tile:nt}));else{if(this._source.fire(new pu("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:nt})),!(nt.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const mt=this.map.painter.terrain;this.update(this.transform,mt.getScaledDemTileSize(),!0),mt.resetTileLookupCache(this.id)}else this.update(this.transform)}else nt.timeAdded=Ys.now(),dt==="expired"&&(nt.refreshedUponExpiration=!0),this._setTileReloadTimer(lt,nt),this._source.type==="raster-dem"&&nt.dem&&this._backfillDEM(nt),this._state.initializeTileState(nt,this.map?this.map.painter:null),this._source.fire(new pu("data",{dataType:"source",tile:nt,coord:nt.tileID,sourceCacheId:this.id}))}_backfillDEM(nt){const lt=this.getRenderableIds();for(let ft=0;ft<lt.length;ft++){const mt=lt[ft];if(nt.neighboringTiles&&nt.neighboringTiles[mt]){const yt=this.getTileByID(mt);dt(nt,yt),dt(yt,nt)}}function dt(ft,mt){if(!ft.dem||ft.dem.borderReady)return;ft.needsHillshadePrepare=!0,ft.needsDEMTextureUpload=!0;let yt=mt.tileID.canonical.x-ft.tileID.canonical.x;const Et=mt.tileID.canonical.y-ft.tileID.canonical.y,At=Math.pow(2,ft.tileID.canonical.z),Ct=mt.tileID.key;yt===0&&Et===0||Math.abs(Et)>1||(Math.abs(yt)>1&&(Math.abs(yt+At)===1?yt+=At:Math.abs(yt-At)===1&&(yt-=At)),mt.dem&&ft.dem&&(ft.dem.backfillBorder(mt.dem,yt,Et),ft.neighboringTiles&&ft.neighboringTiles[Ct]&&(ft.neighboringTiles[Ct].backfilled=!0)))}}getTile(nt){return this.getTileByID(nt.key)}getTileByID(nt){return this._tiles[nt]}_retainLoadedChildren(nt,lt,dt,ft){for(const mt in this._tiles){let yt=this._tiles[mt];if(ft[mt]||!yt.hasData()||yt.tileID.overscaledZ<=lt||yt.tileID.overscaledZ>dt)continue;let Et=yt.tileID;for(;yt&&yt.tileID.overscaledZ>lt+1;){const Ct=yt.tileID.scaledTo(yt.tileID.overscaledZ-1);yt=this._tiles[Ct.key],yt&&yt.hasData()&&(Et=Ct)}let At=Et;for(;At.overscaledZ>lt;)if(At=At.scaledTo(At.overscaledZ-1),nt[At.key]){ft[Et.key]=Et;break}}}findLoadedParent(nt,lt){if(nt.key in this._loadedParentTiles){const dt=this._loadedParentTiles[nt.key];return dt&&dt.tileID.overscaledZ>=lt?dt:null}for(let dt=nt.overscaledZ-1;dt>=lt;dt--){const ft=nt.scaledTo(dt),mt=this._getLoadedTile(ft);if(mt)return mt}}_getLoadedTile(nt){const lt=this._tiles[nt.key];return lt&&lt.hasData()?lt:this._cache.getByKey(this._source.reparseOverscaled?nt.wrapped().key:nt.canonical.key)}updateCacheSize(nt,lt){lt=lt||this._source.tileSize;const dt=Math.ceil(nt.width/lt)+1,ft=Math.ceil(nt.height/lt)+1,mt=Math.floor(dt*ft*5),yt=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,mt):mt,Et=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,yt):yt;this._cache.setMaxSize(Et)}handleWrapJump(nt){const lt=Math.round((nt-(this._prevLng===void 0?nt:this._prevLng))/360);if(this._prevLng=nt,lt){const dt={};for(const ft in this._tiles){const mt=this._tiles[ft];mt.tileID=mt.tileID.unwrapTo(mt.tileID.wrap+lt),dt[mt.tileID.key]=mt}this._tiles=dt;for(const ft in this._timers)clearTimeout(this._timers[ft]),delete this._timers[ft];for(const ft in this._tiles)this._setTileReloadTimer(+ft,this._tiles[ft])}}update(nt,lt,dt,ft){if(this.transform=nt,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!dt)return;this.updateCacheSize(nt,lt),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const mt=this._source.type==="batched-model";let yt;if(this.used||this.usedForTerrain){if(this._source.tileID)yt=nt.getVisibleUnwrappedCoordinates(this._source.tileID).map(Ct=>new js(Ct.canonical.z,Ct.wrap,Ct.canonical.z,Ct.canonical.x,Ct.canonical.y));else if(this.tileCoverLift!==0){const Ct=nt.clone();Ct.tileCoverLift=this.tileCoverLift,yt=Ct.coveringTiles({tileSize:lt||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!dt,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:mt}),this._source.minzoom<=1&&nt.projection.name==="globe"&&(yt.push(new js(1,0,1,0,0)),yt.push(new js(1,0,1,1,0)),yt.push(new js(1,0,1,0,1)),yt.push(new js(1,0,1,1,1)))}else if(yt=nt.coveringTiles({tileSize:lt||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!dt,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:mt}),this._source.hasTile){const Ct=this._source.hasTile.bind(this._source);yt=yt.filter(Lt=>Ct(Lt))}}else yt=[];if(yt.length>0&&this.castsShadows&&ft&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!NE(this._source.type)){const Ct=nt.coveringZoomLevel({tileSize:lt||this._source.tileSize,roundZoom:this._source.roundZoom&&!dt}),Lt=Math.min(Ct,this._source.maxzoom);if(mt){const Bt=nt.extendTileCover(yt,Lt);for(const zt of Bt)yt.push(zt)}else{const Bt=nt.extendTileCover(yt,Lt,ft);for(const zt of Bt)this._shadowCasterTiles[zt.key]=!0,yt.push(zt)}}const Et=this._updateRetainedTiles(yt);if(NE(this._source.type)&&yt.length!==0){const Ct={},Lt={},Bt=Object.keys(Et);for(const Wt of Bt){const qt=Et[Wt],Xt=this._tiles[Wt];if(!Xt||Xt.fadeEndTime&&Xt.fadeEndTime<=Ys.now())continue;const Jt=this.findLoadedParent(qt,Math.max(qt.overscaledZ-Cy.maxOverzooming,this._source.minzoom));Jt&&(this._addTile(Jt.tileID),Ct[Jt.tileID.key]=Jt.tileID),Lt[Wt]=qt}const zt=yt[yt.length-1].overscaledZ;for(const Wt in this._tiles){const qt=this._tiles[Wt];if(Et[Wt]||!qt.hasData())continue;let Xt=qt.tileID;for(;Xt.overscaledZ>zt;){Xt=Xt.scaledTo(Xt.overscaledZ-1);const Jt=this._tiles[Xt.key];if(Jt&&Jt.hasData()&&Lt[Xt.key]){Et[Wt]=qt.tileID;break}}}for(const Wt in Ct)Et[Wt]||(this._coveredTiles[Wt]=!0,Et[Wt]=Ct[Wt])}for(const Ct in Et)this._tiles[Ct].clearFadeHold();const At=function(Ct,Lt){const Bt=[];for(const zt in Ct)zt in Lt||Bt.push(zt);return Bt}(this._tiles,Et);for(const Ct of At){const Lt=this._tiles[Ct];Lt.hasSymbolBuckets&&!Lt.holdingForFade()?Lt.setHoldDuration(this.map._fadeDuration):Lt.hasSymbolBuckets&&!Lt.symbolFadeFinished()||this._removeTile(+Ct)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const nt in this._tiles)this._tiles[nt].holdingForFade()&&this._removeTile(+nt)}_updateRetainedTiles(nt){const lt={};if(nt.length===0)return lt;const dt={},ft=nt.reduce((Ct,Lt)=>Math.min(Ct,Lt.overscaledZ),1/0),mt=nt[0].overscaledZ,yt=Math.max(mt-Cy.maxOverzooming,this._source.minzoom),Et=Math.max(mt+Cy.maxUnderzooming,this._source.minzoom),At={};for(const Ct of nt){const Lt=this._addTile(Ct);lt[Ct.key]=Ct,Lt.hasData()||ft<this._source.maxzoom&&(At[Ct.key]=Ct)}this._retainLoadedChildren(At,ft,Et,lt);for(const Ct of nt){let Lt=this._tiles[Ct.key];if(Lt.hasData())continue;if(Ct.canonical.z>=this._source.maxzoom){const zt=Ct.children(this._source.maxzoom)[0],Wt=this.getTile(zt);if(Wt&&Wt.hasData()){lt[zt.key]=zt;continue}}else{const zt=Ct.children(this._source.maxzoom);if(lt[zt[0].key]&&lt[zt[1].key]&&lt[zt[2].key]&&lt[zt[3].key])continue}let Bt=Lt.wasRequested();for(let zt=Ct.overscaledZ-1;zt>=yt;--zt){const Wt=Ct.scaledTo(zt);if(dt[Wt.key]||(dt[Wt.key]=!0,Lt=this.getTile(Wt),!Lt&&Bt&&(Lt=this._addTile(Wt)),Lt&&(lt[Wt.key]=Wt,Bt=Lt.wasRequested(),Lt.hasData())))break}}return lt}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const nt in this._tiles){const lt=[];let dt,ft=this._tiles[nt].tileID;for(;ft.overscaledZ>0;){if(ft.key in this._loadedParentTiles){dt=this._loadedParentTiles[ft.key];break}lt.push(ft.key);const mt=ft.scaledTo(ft.overscaledZ-1);if(dt=this._getLoadedTile(mt),dt)break;ft=mt}for(const mt of lt)this._loadedParentTiles[mt]=dt}}_addTile(nt){let lt=this._tiles[nt.key];if(lt)return lt.isExtraShadowCaster!==!0||this._shadowCasterTiles[nt.key]||this._reloadTile(nt.key,"reloading"),lt;lt=this._cache.getAndRemove(nt),lt&&(this._setTileReloadTimer(nt.key,lt),lt.tileID=nt,this._state.initializeTileState(lt,this.map?this.map.painter:null),this._cacheTimers[nt.key]&&(clearTimeout(this._cacheTimers[nt.key]),delete this._cacheTimers[nt.key],this._setTileReloadTimer(nt.key,lt)));const dt=!!lt;if(!dt){const ft=this.map?this.map.painter:null,mt=this._source.tileSize*nt.overscaleFactor();lt=this._source.type==="raster-array"?new pP(nt,mt,this.transform.tileZoom,ft,this._isRaster):new I1(nt,mt,this.transform.tileZoom,ft,this._isRaster),this._loadTile(lt,this._tileLoaded.bind(this,lt,nt.key,lt.state))}return lt?(lt.uses++,this._tiles[nt.key]=lt,dt||this._source.fire(new pu("dataloading",{tile:lt,coord:lt.tileID,dataType:"source"})),lt):null}_setTileReloadTimer(nt,lt){nt in this._timers&&(clearTimeout(this._timers[nt]),delete this._timers[nt]);const dt=lt.getExpiryTimeout();dt&&(this._timers[nt]=setTimeout(()=>{this._reloadTile(nt,"expired"),delete this._timers[nt]},dt))}_removeTile(nt){const lt=this._tiles[nt];lt&&(lt.uses--,delete this._tiles[nt],this._timers[nt]&&(clearTimeout(this._timers[nt]),delete this._timers[nt]),lt.uses>0||(lt.hasData()&&lt.state!=="reloading"||lt.state==="empty"?this._cache.add(lt.tileID,lt,lt.getExpiryTimeout()):(lt.aborted=!0,this._abortTile(lt),this._unloadTile(lt))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const nt in this._tiles)this._removeTile(+nt);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(nt,lt,dt){const ft=[],mt=this.transform;if(!mt)return ft;const yt=mt.projection.name==="globe",Et=ep(mt.center.lng);for(const At in this._tiles){const Ct=this._tiles[At];if(dt&&Ct.clearQueryDebugViz(),Ct.holdingForFade())continue;let Lt;if(yt){const Bt=Ct.tileID.canonical;if(Bt.z===0){const zt=[Math.abs(jo(Et,...Iv(Bt,-1))-Et),Math.abs(jo(Et,...Iv(Bt,1))-Et)];Lt=[0,2*zt.indexOf(Math.min(...zt))-1]}else{const zt=[Math.abs(jo(Et,...Iv(Bt,-1))-Et),Math.abs(jo(Et,...Iv(Bt,0))-Et),Math.abs(jo(Et,...Iv(Bt,1))-Et)];Lt=[zt.indexOf(Math.min(...zt))-1]}}else Lt=[0];for(const Bt of Lt){const zt=nt.containsTile(Ct,mt,lt,Bt);zt&&ft.push(zt)}}return ft}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(nt){return this._getRenderableCoordinates(nt)}_getRenderableCoordinates(nt,lt){const dt=this.getRenderableIds(nt,lt).map(mt=>this._tiles[mt].tileID),ft=this.transform.projection.name==="globe";for(const mt of dt)mt.projMatrix=this.transform.calculateProjMatrix(mt.toUnwrapped()),mt.expandedProjMatrix=ft?this.transform.calculateProjMatrix(mt.toUnwrapped(),!1,!0):mt.projMatrix;return dt}sortCoordinatesByDistance(nt){const lt=nt.slice(),dt=this.transform._camera.position,ft=this.transform._camera.forward(),mt={};for(const yt of lt){const Et=1/(1<<yt.canonical.z);mt[yt.key]=((yt.canonical.x+.5)*Et+yt.wrap-dt[0])*ft[0]+((yt.canonical.y+.5)*Et-dt[1])*ft[1]-dt[2]*ft[2]}return lt.sort((yt,Et)=>mt[yt.key]-mt[Et.key]),lt}hasTransition(){if(this._source.hasTransition())return!0;if(NE(this._source.type))for(const nt in this._tiles){const lt=this._tiles[nt];if(lt.fadeEndTime!==void 0&&lt.fadeEndTime>=Ys.now())return!0}return!1}setFeatureState(nt,lt,dt){this._state.updateState(nt=nt||"_geojsonTileLayer",lt,dt)}removeFeatureState(nt,lt,dt){this._state.removeFeatureState(nt=nt||"_geojsonTileLayer",lt,dt)}getFeatureState(nt,lt){return this._state.getState(nt=nt||"_geojsonTileLayer",lt)}setDependencies(nt,lt,dt){const ft=this._tiles[nt];ft&&ft.setDependencies(lt,dt)}reloadTilesForDependencies(nt,lt){for(const dt in this._tiles)this._tiles[dt].hasDependency(nt,lt)&&this._reloadTile(+dt,"reloading");this._cache.filter(dt=>!dt.hasDependency(nt,lt))}_preloadTiles(nt,lt){if(!this._sourceLoaded){const Et=()=>{this._sourceLoaded&&(this._source.off("data",Et),this._preloadTiles(nt,lt))};return void this._source.on("data",Et)}const dt=new Map,ft=Array.isArray(nt)?nt:[nt],mt=this.map.painter.terrain,yt=this.usedForTerrain&&mt?mt.getScaledDemTileSize():this._source.tileSize;for(const Et of ft){const At=Et.coveringTiles({tileSize:yt,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const Ct of At)dt.set(Ct.key,Ct);this.usedForTerrain&&Et.updateElevation(!1)}jm(Array.from(dt.values()),(Et,At)=>{const Ct=new I1(Et,this._source.tileSize*Et.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(Ct,Lt=>{this._source.type==="raster-dem"&&Ct.dem&&this._backfillDEM(Ct),At(Lt,Ct)})},lt)}}function mP(ot,nt){const lt=Math.abs(2*ot.wrap)-+(ot.wrap<0),dt=Math.abs(2*nt.wrap)-+(nt.wrap<0);return ot.overscaledZ-nt.overscaledZ||dt-lt||nt.canonical.y-ot.canonical.y||nt.canonical.x-ot.canonical.x}function NE(ot){return ot==="raster"||ot==="image"||ot==="video"||ot==="custom"}function Iv(ot,nt){const lt=1<<ot.z;return[ot.x/lt+nt,(ot.x+1)/lt+nt]}Cy.maxOverzooming=10,Cy.maxUnderzooming=3;const gP=()=>LE||(LE={layout:hA||(hA=new is({"line-cap":new to(tn.layout_line["line-cap"]),"line-join":new to(tn.layout_line["line-join"]),"line-miter-limit":new In(tn.layout_line["line-miter-limit"]),"line-round-limit":new In(tn.layout_line["line-round-limit"]),"line-sort-key":new to(tn.layout_line["line-sort-key"]),"line-z-offset":new to(tn.layout_line["line-z-offset"]),visibility:new In(tn.layout_line.visibility)})),paint:fA||(fA=new is({"line-opacity":new to(tn.paint_line["line-opacity"]),"line-color":new to(tn.paint_line["line-color"]),"line-translate":new In(tn.paint_line["line-translate"]),"line-translate-anchor":new In(tn.paint_line["line-translate-anchor"]),"line-width":new to(tn.paint_line["line-width"]),"line-gap-width":new to(tn.paint_line["line-gap-width"]),"line-offset":new to(tn.paint_line["line-offset"]),"line-blur":new to(tn.paint_line["line-blur"]),"line-dasharray":new to(tn.paint_line["line-dasharray"]),"line-pattern":new to(tn.paint_line["line-pattern"]),"line-gradient":new Tl(tn.paint_line["line-gradient"]),"line-trim-offset":new In(tn.paint_line["line-trim-offset"]),"line-trim-fade-range":new In(tn.paint_line["line-trim-fade-range"]),"line-trim-color":new In(tn.paint_line["line-trim-color"]),"line-emissive-strength":new In(tn.paint_line["line-emissive-strength"]),"line-border-width":new to(tn.paint_line["line-border-width"]),"line-border-color":new to(tn.paint_line["line-border-color"]),"line-occlusion-opacity":new In(tn.paint_line["line-occlusion-opacity"])}))},LE);class _$ extends to{possiblyEvaluate(nt,lt){return lt=new yo(Math.floor(lt.zoom),{now:lt.now,fadeDuration:lt.fadeDuration,transition:lt.transition}),super.possiblyEvaluate(nt,lt)}evaluate(nt,lt,dt,ft){return lt=Zs({},lt,{zoom:Math.floor(lt.zoom)}),super.evaluate(nt,lt,dt,ft)}}let $v,yP,xP,FE;function vP(ot,nt){return nt>0?nt+2*ot:ot}class _P{constructor(nt){this.type=nt.property.overrides?nt.property.overrides.runtimeType:Nl,this.defaultValue=nt}evaluate(nt){if(nt.formattedSection){const lt=this.defaultValue.property.overrides;if(lt&&lt.hasOverride(nt.formattedSection))return lt.getOverride(nt.formattedSection)}return nt.feature&&nt.featureState?this.defaultValue.evaluate(nt.feature,nt.featureState):this.defaultValue.property.specification.default}eachChild(nt){this.defaultValue.isConstant()||nt(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Wr(_P,"FormatSectionOverride",{omit:["defaultValue"]});const BE=()=>FE||(FE={layout:yP||(yP=new is({"symbol-placement":new In(tn.layout_symbol["symbol-placement"]),"symbol-spacing":new In(tn.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new In(tn.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new to(tn.layout_symbol["symbol-sort-key"]),"symbol-z-order":new In(tn.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new In(tn.layout_symbol["symbol-z-elevate"]),"icon-allow-overlap":new In(tn.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new In(tn.layout_symbol["icon-ignore-placement"]),"icon-optional":new In(tn.layout_symbol["icon-optional"]),"icon-rotation-alignment":new In(tn.layout_symbol["icon-rotation-alignment"]),"icon-size":new to(tn.layout_symbol["icon-size"]),"icon-text-fit":new to(tn.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new to(tn.layout_symbol["icon-text-fit-padding"]),"icon-image":new to(tn.layout_symbol["icon-image"]),"icon-rotate":new to(tn.layout_symbol["icon-rotate"]),"icon-padding":new In(tn.layout_symbol["icon-padding"]),"icon-keep-upright":new In(tn.layout_symbol["icon-keep-upright"]),"icon-offset":new to(tn.layout_symbol["icon-offset"]),"icon-anchor":new to(tn.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new In(tn.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new In(tn.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new In(tn.layout_symbol["text-rotation-alignment"]),"text-field":new to(tn.layout_symbol["text-field"]),"text-font":new to(tn.layout_symbol["text-font"]),"text-size":new to(tn.layout_symbol["text-size"]),"text-max-width":new to(tn.layout_symbol["text-max-width"]),"text-line-height":new to(tn.layout_symbol["text-line-height"]),"text-letter-spacing":new to(tn.layout_symbol["text-letter-spacing"]),"text-justify":new to(tn.layout_symbol["text-justify"]),"text-radial-offset":new to(tn.layout_symbol["text-radial-offset"]),"text-variable-anchor":new In(tn.layout_symbol["text-variable-anchor"]),"text-anchor":new to(tn.layout_symbol["text-anchor"]),"text-max-angle":new In(tn.layout_symbol["text-max-angle"]),"text-writing-mode":new In(tn.layout_symbol["text-writing-mode"]),"text-rotate":new to(tn.layout_symbol["text-rotate"]),"text-padding":new In(tn.layout_symbol["text-padding"]),"text-keep-upright":new In(tn.layout_symbol["text-keep-upright"]),"text-transform":new to(tn.layout_symbol["text-transform"]),"text-offset":new to(tn.layout_symbol["text-offset"]),"text-allow-overlap":new In(tn.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new In(tn.layout_symbol["text-ignore-placement"]),"text-optional":new In(tn.layout_symbol["text-optional"]),visibility:new In(tn.layout_symbol.visibility)})),paint:xP||(xP=new is({"icon-opacity":new to(tn.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new to(tn.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new to(tn.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new to(tn.paint_symbol["text-emissive-strength"]),"icon-color":new to(tn.paint_symbol["icon-color"]),"icon-halo-color":new to(tn.paint_symbol["icon-halo-color"]),"icon-halo-width":new to(tn.paint_symbol["icon-halo-width"]),"icon-halo-blur":new to(tn.paint_symbol["icon-halo-blur"]),"icon-translate":new In(tn.paint_symbol["icon-translate"]),"icon-translate-anchor":new In(tn.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new to(tn.paint_symbol["icon-image-cross-fade"]),"text-opacity":new to(tn.paint_symbol["text-opacity"]),"text-occlusion-opacity":new to(tn.paint_symbol["text-occlusion-opacity"]),"text-color":new to(tn.paint_symbol["text-color"],{runtimeType:Ql,getOverride:ot=>ot.textColor,hasOverride:ot=>!!ot.textColor}),"text-halo-color":new to(tn.paint_symbol["text-halo-color"]),"text-halo-width":new to(tn.paint_symbol["text-halo-width"]),"text-halo-blur":new to(tn.paint_symbol["text-halo-blur"]),"text-translate":new In(tn.paint_symbol["text-translate"]),"text-translate-anchor":new In(tn.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new In(tn.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new In(tn.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new In(tn.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new In(tn.paint_symbol["icon-color-brightness-max"])}))},FE);class $1 extends Hl{constructor(nt,lt,dt,ft){super(nt,BE(),lt,dt,ft),this._colorAdjustmentMatrix=at.ae.identity([]),this.hasInitialOcclusionOpacityProperties=nt.paint!==void 0&&("icon-occlusion-opacity"in nt.paint||"text-occlusion-opacity"in nt.paint)}recalculate(nt,lt){super.recalculate(nt,lt),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const dt=this.layout.get("text-writing-mode");if(dt){const ft=[];for(const mt of dt)ft.indexOf(mt)<0&&ft.push(mt);this.layout._values["text-writing-mode"]=ft}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(nt,lt,dt,ft){return this._saturation===nt&&this._contrast===lt&&this._brightnessMin===dt&&this._brightnessMax===ft||(this._colorAdjustmentMatrix=function(mt,yt,Et,At){mt=Kv(mt),yt=qv(yt);const Ct=at.ae.create(),Lt=mt/3,Bt=1-2*Lt,zt=[Bt,Lt,Lt,0,Lt,Bt,Lt,0,Lt,Lt,Bt,0,0,0,0,1],Wt=.5-.5*yt,qt=At-Et;return at.ae.multiply(Ct,[qt,0,0,0,0,qt,0,0,0,0,qt,0,Et,Et,Et,1],[yt,0,0,0,0,yt,0,0,0,0,yt,0,Wt,Wt,Wt,1]),at.ae.multiply(Ct,Ct,zt),Ct}(nt,lt,dt,ft),this._saturation=nt,this._contrast=lt,this._brightnessMin=dt,this._brightnessMax=ft),this._colorAdjustmentMatrix}getValueAndResolveTokens(nt,lt,dt,ft){const mt=this.layout.get(nt).evaluate(lt,{},dt,ft),yt=this._unevaluatedLayout._values[nt];return yt.isDataDriven()||Er(yt.value)||!mt?mt:function(Et,At){return At.replace(/{([^{}]+)}/g,(Ct,Lt)=>Lt in Et?String(Et[Lt]):"")}(lt.properties,mt)}createBucket(nt){return new G0(nt)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const nt of BE().paint.overridableProperties){if(!$1.hasPaintOverride(this.layout,nt))continue;const lt=this.paint.get(nt),dt=new _P(lt),ft=new br(dt,lt.property.specification,this.scope,this.options);let mt=null;mt=lt.value.kind==="constant"||lt.value.kind==="source"?new $r("source",ft):new Tr("composite",ft,lt.value.zoomStops,lt.value._interpolationType),this.paint._values[nt]=new Ns(lt.property,mt,lt.parameters)}}_handleOverridablePaintPropertyUpdate(nt,lt,dt){return!(!this.layout||lt.isDataDriven()||dt.isDataDriven())&&$1.hasPaintOverride(this.layout,nt)}static hasPaintOverride(nt,lt){const dt=nt.get("text-field"),ft=BE().paint.properties[lt];let mt=!1;const yt=Et=>{for(const At of Et)if(ft.overrides&&ft.overrides.hasOverride(At))return void(mt=!0)};if(dt.value.kind==="constant"&&dt.value.value instanceof Sl)yt(dt.value.value.sections);else if(dt.value.kind==="source"){const Et=Ct=>{mt||(Ct instanceof au&&$s(Ct.value)===Jp?yt(Ct.value.sections):Ct instanceof _p?yt(Ct.sections):Ct.eachChild(Et))},At=dt.value;At._styleExpression&&Et(At._styleExpression.expression)}return mt}getProgramIds(){const nt=this.paint.get("icon-opacity").constantOr(1)!==0,lt=this.paint.get("text-opacity").constantOr(1)!==0,dt=[];return nt&&dt.push("symbolIcon"),lt&&dt.push("symbolSDF"),dt}getDefaultProgramParams(nt,lt,dt){return{config:new _y(this,{zoom:lt,lut:dt}),overrideFog:!1}}}let bP,wP,EP,SP;function M1(ot,nt,lt,dt,ft,mt,yt,Et){const At=[ot,nt,1,lt,dt,1,ft,mt,1],Ct=[yt,Et,1],Lt=at.bE.adjoint([],At),[Bt,zt,Wt]=at.$.transformMat3(Ct,Ct,Lt);return at.bE.multiply(At,At,[Bt,0,0,0,zt,0,0,0,Wt])}function TP(ot,nt,lt,dt,ft,mt,yt,Et){const At=function(Ct,Lt,Bt,zt,Wt,qt,Xt,Jt){const nr=M1(0,0,1,0,1,1,0,1),gr=M1(Ct,Lt,Bt,zt,Wt,qt,Xt,Jt),pr=at.bE.adjoint([],nr);return at.bE.multiply(gr,gr,pr)}(ot,nt,lt,dt,ft,mt,yt,Et);return[At[2]/At[8]/Ln,At[5]/At[8]/Ln]}function O1(ot){return[ot[0],Math.min(Math.max(ot[1],-Cs),Cs)]}class AP extends xp{constructor(nt,lt,dt,ft){super(),this.id=nt,this.dispatcher=dt,this.coordinates=lt.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(ft),this.options=lt,this._dirty=!1}load(nt,lt){if(this._loaded=lt||!1,this.fire(new pu("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return nt&&(this.coordinates=nt),this._loaded=!0,void this._finishLoading();this._imageRequest=Zm(this.map._requestManager.transformRequest(this.url,Wm.Image),(dt,ft)=>{this._imageRequest=null,this._loaded=!0,dt?this.fire(new Xm(dt)):ft&&(this.image=ft instanceof HTMLImageElement?Ys.getImageData(ft):ft,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,nt&&(this.coordinates=nt),this._finishLoading())})}loaded(){return this._loaded}updateImage(nt){return nt.url?(this._imageRequest&&nt.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=nt.url,this.load(nt.coordinates,this._loaded),this):this}setTexture(nt){if(!(nt.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new C1(this.map.painter.context,nt.handle),this.width=nt.dimensions[0],this.height=nt.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new pu("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(nt){this.map=nt,this.load()}onRemove(nt){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof C1||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(nt){if(this.coordinates=nt,this._boundsArray=void 0,this._unsupportedCoords=!1,!nt.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let lt=nt[0][1],dt=nt[0][1];for(const mt of nt)mt[1]>dt&&(dt=mt[1]),mt[1]<lt&&(lt=mt[1]);const ft=(dt+lt)/2;if(ft>Cs?this.onNorthPole=!0:ft<-Cs&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const mt=nt.map(Al.fromLngLat);this.tileID=function(yt){let Et=1/0,At=1/0,Ct=-1/0,Lt=-1/0;for(const Xt of yt)Et=Math.min(Et,Xt.x),At=Math.min(At,Xt.y),Ct=Math.max(Ct,Xt.x),Lt=Math.max(Lt,Xt.y);const Bt=Math.max(Ct-Et,Lt-At),zt=Math.max(0,Math.floor(-Math.log(Bt)/Math.LN2)),Wt=Math.pow(2,zt);let qt=Math.floor((Et+Ct)/2*Wt);return qt>1&&(qt-=1),new wy(zt,qt,Math.floor((At+Lt)/2*Wt))}(mt),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new pu("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(nt){for(const Jt in this.tiles){const nr=this.tiles[Jt];nr.state!=="loaded"&&(nr.state="loaded",nr.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const lt=Ay(new wy(0,0,0),this.map.transform.projection),dt=[lt.projection.project(this.coordinates[0][0],this.coordinates[0][1]),lt.projection.project(this.coordinates[1][0],this.coordinates[1][1]),lt.projection.project(this.coordinates[2][0],this.coordinates[2][1]),lt.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(Jt){const nr=Jt[1].x-Jt[0].x,gr=Jt[1].y-Jt[0].y,pr=Jt[2].x-Jt[1].x,xr=Jt[2].y-Jt[1].y,Pr=Jt[3].x-Jt[2].x,Rr=Jt[3].y-Jt[2].y,Dr=Jt[0].x-Jt[3].x,Hr=Jt[0].y-Jt[3].y,Jr=nr*xr-pr*gr,an=pr*Rr-Pr*xr,Qr=Pr*Hr-Dr*Rr,yn=Dr*gr-nr*Hr;return Jr>0&&an>0&&Qr>0&&yn>0||Jr<0&&an<0&&Qr<0&&yn<0}(dt))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const ft=Ay(this.tileID,this.map.transform.projection),[mt,yt,Et,At]=this.coordinates.map(Jt=>{const nr=ft.projection.project(Jt[0],Jt[1]);return XA(ft,nr)._round()});this.perspectiveTransform=TP(mt.x,mt.y,yt.x,yt.y,Et.x,Et.y,At.x,At.y);const Ct=this._boundsArray=new Ap;Ct.emplaceBack(mt.x,mt.y,0,0),Ct.emplaceBack(yt.x,yt.y,Ln,0),Ct.emplaceBack(At.x,At.y,0,Ln),Ct.emplaceBack(Et.x,Et.y,Ln,Ln),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=nt.createVertexBuffer(Ct,R1.members),this.boundsSegments=ms.simpleSegment(0,0,4,2);const Lt=[],Bt=function(Jt){return[O1(Jt[0]),O1(Jt[1]),O1(Jt[2]),O1(Jt[3])]}(this.coordinates),[zt,Wt,qt,Xt]=function(Jt){let nr=Jt[0][0],gr=nr,pr=Jt[0][1],xr=pr;for(let Pr=1;Pr<Jt.length;Pr++)Jt[Pr][0]<nr?nr=Jt[Pr][0]:Jt[Pr][0]>gr&&(gr=Jt[Pr][0]),Jt[Pr][1]<pr?pr=Jt[Pr][1]:Jt[Pr][1]>xr&&(xr=Jt[Pr][1]);return[nr,pr,gr-nr,xr-pr]}(Bt);{const Jt=new Ap,[nr,gr,pr,xr]=function(gn){let En=gn[0].x,jn=En,vn=gn[0].y,Bn=vn;for(let Mn=1;Mn<gn.length;Mn++)gn[Mn].x<En?En=gn[Mn].x:gn[Mn].x>jn&&(jn=gn[Mn].x),gn[Mn].y<vn?vn=gn[Mn].y:gn[Mn].y>Bn&&(Bn=gn[Mn].y);return[En,vn,jn-En,Bn-vn]}(dt),Pr=gn=>[(gn.x-nr)/pr,(gn.y-gr)/xr],[Rr,Dr,Hr,Jr]=dt.map(Pr),an=function(gn,En,jn,vn,Bn,Mn,kn,ao){const io=M1(0,0,1,0,1,1,0,1),Kn=M1(gn,En,jn,vn,Bn,Mn,kn,ao),Nn=at.bE.adjoint([],Kn);return at.bE.multiply(io,io,Nn)}(Rr[0],Rr[1],Dr[0],Dr[1],Hr[0],Hr[1],Jr[0],Jr[1]);this.elevatedGlobePerspectiveTransform=TP(Rr[0],Rr[1],Dr[0],Dr[1],Hr[0],Hr[1],Jr[0],Jr[1]);const Qr=(gn,En)=>{Lt.push(gn.lng);const jn=Math.round((gn.lng-zt)/qt*Ln),vn=Math.round((gn.lat-Wt)/Xt*Ln),Bn=Pr(En),Mn=at.$.transformMat3([],[Bn[0],Bn[1],1],an),kn=Math.round(Mn[0]/Mn[2]*Ln),ao=Math.round(Mn[1]/Mn[2]*Ln);Jt.emplaceBack(jn,vn,kn,ao)},yn=dt[3].x-dt[0].x,Cn=dt[3].y-dt[0].y,xn=dt[2].x-dt[1].x,$n=dt[2].y-dt[1].y;for(let gn=0;gn<65;gn++){const En=gn/64,jn=[dt[0].x+En*yn,dt[0].y+En*Cn],vn=[dt[1].x+En*xn,dt[1].y+En*$n],Bn=vn[0]-jn[0],Mn=vn[1]-jn[1];for(let kn=0;kn<65;kn++){const ao=kn/64,io={x:jn[0]+Bn*ao,y:jn[1]+Mn*ao,z:0};Qr(lt.projection.unproject(io.x,io.y),io)}}this.elevatedGlobeVertexBuffer=nt.createVertexBuffer(Jt,R1.members)}{this.maxLongitudeTriangleSize=0;let Jt=[],nr=new Fs;const gr=(pr,xr,Pr)=>{nr.emplaceBack(pr,xr,Pr);const Rr=Lt[pr],Dr=Lt[xr],Hr=Lt[Pr],Jr=Math.min(Math.min(Rr,Dr),Hr),an=Math.max(Math.max(Rr,Dr),Hr)-Jr;an>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=an),Jt.push(Jr+an/2)};for(let pr=0;pr<64;pr++)for(let xr=0;xr<64;xr++){const Pr=65*pr+xr,Rr=Pr+1,Dr=Pr+65,Hr=Dr+1;gr(Pr,Dr,Rr),gr(Rr,Dr,Hr)}[Jt,nr]=function(pr,xr){const Pr=Array.from({length:pr.length},(Hr,Jr)=>Jr);Pr.sort((Hr,Jr)=>pr[Hr]-pr[Jr]);const Rr=[],Dr=new Fs;for(let Hr=0;Hr<Pr.length;Hr++){const Jr=Pr[Hr];Rr.push(pr[Jr]);const an=3*Jr,Qr=an+1;Dr.emplaceBack(xr.uint16[an],xr.uint16[Qr],xr.uint16[Qr+1])}return[Rr,Dr]}(Jt,nr),this.elevatedGlobeTrianglesCenterLongitudes=Jt,this.elevatedGlobeIndexBuffer=nt.createIndexBuffer(nr)}this.elevatedGlobeSegments=ms.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,qt/Ln,0,Xt/Ln,0,0,Wt,zt,0])}prepare(){const nt=Object.keys(this.tiles).length!==0;if(this.tileID&&!nt)return;const lt=this.map.painter.context,dt=lt.gl;!this._dirty||this.texture instanceof C1||(this.texture?this.texture.update(this.image):(this.texture=new vu(lt,this.image,dt.RGBA),this.texture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE)),this._dirty=!1),nt&&this._prepareData(lt)}loadTile(nt,lt){this.tileID&&this.tileID.equals(nt.tileID.canonical)?(this.tiles[String(nt.tileID.wrap)]=nt,nt.buckets={},lt(null)):(nt.state="errored",lt(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(nt){const lt=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!lt)return null;const dt=this.elevatedGlobeTrianglesCenterLongitudes;let ft=(mt=nt+180)+360*Math.round((dt[0]-mt)/360);var mt;const yt=new ms,Et=(Bt,zt)=>{yt.segments.push({vertexOffset:0,primitiveOffset:Bt,vertexLength:lt.segments[0].vertexLength,primitiveLength:zt,sortKey:void 0,vaos:{}})},At=.51*this.maxLongitudeTriangleSize;if(Math.abs(dt[0]-ft)<=At){const Bt=Hy(dt,0,dt.length,ft+At);return Bt===dt.length||Et(Bt,Wy(dt,Bt+1,dt.length,ft+360-At)-Bt),yt}ft<dt[0]&&(ft+=360);const Ct=Wy(dt,0,dt.length,ft-At);if(Ct===dt.length)return Et(0,dt.length),yt;Et(0,Ct-0);const Lt=Hy(dt,Ct+1,dt.length,ft+At);return Lt!==dt.length&&Et(Lt,dt.length-Lt),yt}}const b$=(Math.pow(256,2)-1)/16907520;class PP extends Hl{constructor(nt,lt,dt,ft){super(nt,{layout:EP||(EP=new is({visibility:new In(tn.layout_raster.visibility)})),paint:SP||(SP=new is({"raster-opacity":new In(tn.paint_raster["raster-opacity"]),"raster-color":new Tl(tn.paint_raster["raster-color"]),"raster-color-mix":new In(tn.paint_raster["raster-color-mix"]),"raster-color-range":new In(tn.paint_raster["raster-color-range"]),"raster-hue-rotate":new In(tn.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new In(tn.paint_raster["raster-brightness-min"]),"raster-brightness-max":new In(tn.paint_raster["raster-brightness-max"]),"raster-saturation":new In(tn.paint_raster["raster-saturation"]),"raster-contrast":new In(tn.paint_raster["raster-contrast"]),"raster-resampling":new In(tn.paint_raster["raster-resampling"]),"raster-fade-duration":new In(tn.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new In(tn.paint_raster["raster-emissive-strength"]),"raster-array-band":new In(tn.paint_raster["raster-array-band"]),"raster-elevation":new In(tn.paint_raster["raster-elevation"])}))},lt,dt,ft),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(nt){return!(nt&&nt._source instanceof AP&&(nt._source.onNorthPole||nt._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(nt){nt!=="raster-color"&&nt!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(nt){if(!this.hasColorMap()||!this._curRampRange)return;const lt=this._transitionablePaint._values["raster-color"].value.expression,[dt,ft]=nt||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(dt)&&isNaN(ft)||dt===this._curRampRange[0]&&ft===this._curRampRange[1]||(this.colorRamp=lv({expression:lt,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:dt,end:ft}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[dt,ft])}}let CP,kP,RP,IP,$P;class MP extends Hl{constructor(nt,lt,dt,ft){super(nt,{layout:CP||(CP=new is({visibility:new In(tn["layout_raster-particle"].visibility)})),paint:kP||(kP=new is({"raster-particle-array-band":new In(tn["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new In(tn["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Tl(tn["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new In(tn["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new In(tn["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new In(tn["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new In(tn["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new In(tn["paint_raster-particle"]["raster-particle-elevation"])}))},lt,dt,ft),this._updateColorRamp(),this.lastInvalidatedAt=Ys.now()}onRemove(nt){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(nt){return!1}_handleSpecialPaintPropertyUpdate(nt){nt!=="raster-particle-color"&&nt!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),nt==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const nt=this._transitionablePaint._values["raster-particle-color"].value.expression,lt=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=lv({expression:nt,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:lt}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=Ys.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class w$ extends Hl{constructor(nt,lt){super(nt,{},lt,null),this.implementation=nt,nt.slot&&(this.slot=nt.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(nt){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(nt){this.implementation.onAdd&&this.implementation.onAdd(nt,nt.painter.context.gl)}onRemove(nt){this.implementation.onRemove&&this.implementation.onRemove(nt,nt.painter.context.gl)}}function zE(ot,nt,lt){const dt=[0,0,1],ft=at.aw.identity([]);return at.aw.rotateY(ft,ft,lt?-zo(ot)+Math.PI:zo(ot)),at.aw.rotateX(ft,ft,-zo(nt)),at.$.transformQuat(dt,dt,ft),at.$.normalize(dt,dt)}function OP(ot,nt){const lt=j1(ot.projection,ot.zoom,ot.width,ot.height),dt=function(mt,yt,Et,At,Ct){const Lt=new na(Et.lng-180*Sm,Et.lat),Bt=new na(Et.lng+180*Sm,Et.lat),zt=mt.project(Lt.lng,Lt.lat),Wt=mt.project(Bt.lng,Bt.lat),qt=-Math.atan2(Wt.y-zt.y,Wt.x-zt.x),Xt=Al.fromLngLat(Et);Xt.y=jo(Xt.y,-1+Sm,1-Sm);const Jt=Xt.toLngLat(),nr=mt.project(Jt.lng,Jt.lat),gr=Al.fromLngLat(Jt);gr.x+=Sm;const pr=gr.toLngLat(),xr=mt.project(pr.lng,pr.lat),Pr=LP(xr.x-nr.x,xr.y-nr.y,qt),Rr=Al.fromLngLat(Jt);Rr.y+=Sm;const Dr=Rr.toLngLat(),Hr=mt.project(Dr.lng,Dr.lat),Jr=LP(Hr.x-nr.x,Hr.y-nr.y,qt),an=Math.abs(Pr.x)/Math.abs(Jr.y),Qr=at.ae.identity([]);at.ae.rotateZ(Qr,Qr,-qt*(1-(Ct?0:At)));const yn=at.ae.identity([]);return at.ae.scale(yn,yn,[1,1-(1-an)*At,1]),yn[4]=-Jr.x/Jr.y*At,at.ae.rotateZ(yn,yn,qt),at.ae.multiply(yn,Qr,yn),yn}(ot.projection,0,ot.center,lt,nt),ft=jP(ot);return at.ae.scale(dt,dt,[ft,ft,1]),dt}function jP(ot){const nt=ot.projection,lt=j1(ot.projection,ot.zoom,ot.width,ot.height),dt=DP(nt,ot.center),ft=DP(nt,na.convert(nt.center));return Math.pow(2,dt*lt+(1-lt)*ft)}function j1(ot,nt,lt,dt,ft=1/0){const mt=ot.range;if(!mt)return 0;const yt=Math.min(ft,Math.max(lt,dt)),Et=Math.log(yt/1024)/Math.LN2;return dx(mt[0]+Et,mt[1]+Et,nt)}const Sm=1/4e4;function DP(ot,nt){const lt=jo(nt.lat,-Cs,Cs),dt=new na(nt.lng-180*Sm,lt),ft=new na(nt.lng+180*Sm,lt),mt=ot.project(dt.lng,lt),yt=ot.project(ft.lng,lt),Et=Al.fromLngLat(dt),At=Al.fromLngLat(ft),Ct=yt.x-mt.x,Lt=yt.y-mt.y,Bt=At.x-Et.x,zt=At.y-Et.y,Wt=Math.sqrt((Bt*Bt+zt*zt)/(Ct*Ct+Lt*Lt));return Math.log(Wt)/Math.LN2}function LP(ot,nt,lt){const dt=Math.cos(lt),ft=Math.sin(lt);return{x:ot*dt-nt*ft,y:ot*ft+nt*dt}}function NP(ot,nt,lt){at.ae.identity(ot),at.ae.rotateZ(ot,ot,zo(nt[2])),at.ae.rotateX(ot,ot,zo(nt[0])),at.ae.rotateY(ot,ot,zo(nt[1])),at.ae.scale(ot,ot,lt),at.ae.multiply(ot,ot,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function D1(ot,nt,lt,dt,ft,mt,yt,Et){const At=[lt[0]-nt[0],lt[1]-nt[1],0],Ct=[dt[0]-nt[0],dt[1]-nt[1],0];if(at.$.length(At)<1e-12||at.$.length(Ct)<1e-12)return at.aw.identity(ot);const Lt=at.$.cross([],At,Ct);at.$.normalize(Lt,Lt),at.$.subtract(Ct,dt,nt),At[2]=(mt-ft)*Et,Ct[2]=(yt-ft)*Et;const Bt=At;return at.$.cross(Bt,At,Ct),at.$.normalize(Bt,Bt),at.aw.rotationTo(ot,Lt,Bt)}function VE(ot,nt,lt=!1){const dt=$p(nt.zoom),ft=function(mt,yt,Et){const At=yt.worldSize,Ct=[mt[12],mt[13],mt[14]],Lt=Ws(Ct[1]/At),Bt=Zl(Ct[0]/At),zt=at.ae.identity([]),Wt=Dl(1,Lt)*At,qt=Dl(1,0)*At*Ey(Lt,yt.zoom),Xt=1/aE(At);let Jt=qt*Xt;if(Et){const xr=j1(yt.projection,yt.zoom,yt.width,yt.height,1024);Jt=Xt*yt.projection.pixelSpaceConversion(yt.center.lat,At,xr)}const nr=by(Lt,Bt);at.$.add(nr,nr,at.$.scale([],at.$.normalize([],nr),Wt*Jt*Ct[2]));const gr=function(xr){const Pr=[xr[0],xr[1],xr[2]];let Rr=[0,1,0];const Dr=at.$.cross([],Rr,Pr);return at.$.cross(Rr,Pr,Dr),at.$.squaredLength(Rr)===0&&(Rr=[0,1,0],at.$.cross(Dr,Pr,Rr)),at.$.normalize(Dr,Dr),at.$.normalize(Rr,Rr),at.$.normalize(Pr,Pr),[Dr[0],Dr[1],Dr[2],0,Rr[0],Rr[1],Rr[2],0,Pr[0],Pr[1],Pr[2],0,xr[0],xr[1],xr[2],1]}(nr);at.ae.scale(zt,zt,[Jt,Jt,Jt*Wt]),at.ae.translate(zt,zt,[-Ct[0],-Ct[1],-Ct[2]]);const pr=at.ae.multiply([],yt.globeMatrix,gr);return at.ae.multiply(pr,pr,zt),at.ae.multiply(pr,pr,mt),pr}(ot,nt,lt);if(dt>0){const mt=function(yt,Et){const At=Et.worldSize,Ct=Dl(1,0)*At*Ey(Et.center.lat,Et.zoom)/aE(At),Lt=Dl(1,Et.center.lat)*At,Bt=at.ae.identity([]);return at.ae.rotateY(Bt,Bt,zo(Et.center.lng)),at.ae.rotateX(Bt,Bt,zo(Et.center.lat)),at.ae.translate(Bt,Bt,[0,0,Ol]),at.ae.scale(Bt,Bt,[Ct,Ct,Ct*Lt]),at.ae.translate(Bt,Bt,[Et.point.x-.5*At,Et.point.y-.5*At,0]),at.ae.multiply(Bt,Bt,yt),at.ae.multiply(Bt,Et.globeMatrix,Bt)}(ot,nt);return function(yt,Et,At){const Ct=(qt,Xt,Jt)=>{const nr=at.$.length(qt),gr=at.$.length(Xt),pr=Ip(qt,Xt,Jt);return at.$.scale(pr,pr,1/at.$.length(pr)*ho(nr,gr,Jt))},Lt=Ct([yt[0],yt[1],yt[2]],[Et[0],Et[1],Et[2]],At),Bt=Ct([yt[4],yt[5],yt[6]],[Et[4],Et[5],Et[6]],At),zt=Ct([yt[8],yt[9],yt[10]],[Et[8],Et[9],Et[10]],At),Wt=Ip([yt[12],yt[13],yt[14]],[Et[12],Et[13],Et[14]],At);return[Lt[0],Lt[1],Lt[2],0,Bt[0],Bt[1],Bt[2],0,zt[0],zt[1],zt[2],0,Wt[0],Wt[1],Wt[2],1]}(ft,mt,dt)}return ft}function FP(ot,nt,lt,dt){const ft=fs.projectAabbCorners(dt,lt);let mt=Number.MAX_VALUE,yt=-1;for(let Ct=0;Ct<ft.length;++Ct){const Lt=ft[Ct];Lt[0]=(.5*Lt[0]+.5)*nt.width,Lt[1]=(.5-.5*Lt[1])*nt.height,Lt[2]<mt&&(yt=Ct,mt=Lt[2])}const Et=Ct=>new Vn(ft[Ct][0],ft[Ct][1]);let At;switch(yt){case 0:case 6:At=[Et(1),Et(5),Et(4),Et(7),Et(3),Et(2),Et(1)];break;case 1:case 7:At=[Et(0),Et(4),Et(5),Et(6),Et(2),Et(3),Et(0)];break;case 3:case 5:At=[Et(1),Et(0),Et(4),Et(7),Et(6),Et(2),Et(1)];break;default:At=[Et(1),Et(5),Et(6),Et(7),Et(3),Et(0),Et(1)]}if(Yw(ot,At))return mt}const E$=ba([{name:"a_pos_3f",components:3,type:"Float32"}]),S$=ba([{name:"a_color_3f",components:3,type:"Float32"}]),T$=ba([{name:"a_color_4f",components:4,type:"Float32"}]),A$=ba([{name:"a_uv_2f",components:2,type:"Float32"}]),P$=ba([{name:"a_normal_3f",components:3,type:"Float32"}]),C$=ba([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),k$=ba([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]);class L1{constructor(nt,lt,dt,ft){this.message=(nt?`${nt}: `:"")+dt,ft&&(this.identifier=ft),lt!=null&&lt.__line__&&(this.line=lt.__line__)}}function BP(ot,nt){const lt=ot.indexOf("://")===-1;try{return new URL(ot,lt&&nt?"http://example.com":void 0),!0}catch{return!1}}class zP{constructor(nt,lt){this.feature=nt,this.instancedDataOffset=lt,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class VP{constructor(){this.instancedDataArray=new Mw,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class UE{constructor(nt){this.zoom=nt.zoom,this.canonical=nt.canonical,this.layers=nt.layers,this.layerIds=this.layers.map(lt=>lt.fqid),this.projection=nt.projection,this.index=nt.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(lt=>lt.isStateDependent()).map(lt=>lt.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(nt,lt){}populate(nt,lt,dt,ft){this.tileToMeter=W_(dt);const mt=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:yt,id:Et,index:At,sourceLayerIndex:Ct}of nt){const Lt=Et??(yt.properties&&yt.properties.hasOwnProperty("id")?yt.properties.id:void 0),Bt=Rp(yt,mt);if(!this.layers[0]._featureFilter.filter(new yo(this.zoom),Bt,dt))continue;const zt={id:Lt,sourceLayerIndex:Ct,index:At,geometry:mt?Bt.geometry:Ou(yt,dt,ft),properties:yt.properties,type:yt.type,patterns:{}},Wt=this.addFeature(zt,zt.geometry,Bt);Wt&&lt.featureIndex.insert(yt,zt.geometry,At,Ct,this.index,this.instancesPerModel[Wt].instancedDataArray.length,Ln/32)}this.lookup=null}update(nt,lt,dt,ft){for(const mt in this.instancesPerModel){const yt=this.instancesPerModel[mt];for(const Et in nt)yt.idToFeaturesIndex.hasOwnProperty(Et)&&(this.evaluate(yt.features[yt.idToFeaturesIndex[Et]],nt[Et],yt,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let nt=!1;for(const lt in this.instancesPerModel){const dt=this.instancesPerModel[lt];for(const ft of dt.features){const mt=this.layers[0],yt=ft.feature,Et=this.canonical,At=mt.paint.get("model-rotation").evaluate(yt,{},Et),Ct=mt.paint.get("model-scale").evaluate(yt,{},Et),Lt=mt.paint.get("model-translation").evaluate(yt,{},Et);at.$.exactEquals(ft.rotation,At)&&at.$.exactEquals(ft.scale,Ct)&&at.$.exactEquals(ft.translation,Lt)||(this.evaluate(ft,ft.featureStates,dt,!0),nt=!0)}}return nt}updateReplacement(nt,lt,dt,ft){if(lt.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=lt.updateTime;const mt=lt.getReplacementRegionsForTile(nt.toUnwrapped(),!0);if(gE(this.activeReplacements,mt))return!1;this.activeReplacements=mt;let yt=!1;for(const Et in this.instancesPerModel){const At=this.instancesPerModel[Et],Ct=At.instancedDataArray;for(const Lt of At.features){const Bt=Lt.instancedDataOffset,zt=Lt.instancedDataCount;for(let Wt=0;Wt<zt;Wt++){const qt=16*(Wt+Bt);let Xt=Ct.float32[qt+0];Xt=Xt>Ln?Xt-Ln:Xt;const Jt=Math.floor(Xt),nr=Ct.float32[qt+1];let gr=!1;for(const pr of this.activeReplacements)if(!RT(pr,dt,GT.Model,ft)&&!(pr.min.x>Jt||Jt>pr.max.x||pr.min.y>nr||nr>pr.max.y)&&(gr=DT(jT(Jt,nr,nt.canonical,pr.footprintTileId.canonical),pr),gr))break;Ct.float32[qt]=gr?Xt+Ln:Xt,yt=yt||gr}}}return yt}isEmpty(){for(const nt in this.instancesPerModel)if(this.instancesPerModel[nt].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(nt){if(!this.uploaded)for(const lt in this.instancesPerModel){const dt=this.instancesPerModel[lt];dt.instancedDataArray.length<0||dt.instancedDataArray.length===0||(dt.instancedDataBuffer?dt.instancedDataBuffer.updateData(dt.instancedDataArray):dt.instancedDataBuffer=nt.createVertexBuffer(dt.instancedDataArray,C$.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const lt in this.instancesPerModel){const dt=this.instancesPerModel[lt];dt.instancedDataArray.length!==0&&dt.instancedDataBuffer&&dt.instancedDataBuffer.destroy()}const nt=this.layers[0].modelManager;if(nt&&this.modelUris)for(const lt of this.modelUris)nt.removeModel(lt,"")}addFeature(nt,lt,dt){const ft=this.layers[0],mt=ft.layout.get("model-id").evaluate(dt,{},this.canonical);if(!mt)return Ts(`modelId is not evaluated for layer ${ft.id} and it is not going to get rendered.`),mt;BP(mt,!1)&&(this.modelUris.includes(mt)||this.modelUris.push(mt)),this.instancesPerModel[mt]||(this.instancesPerModel[mt]=new VP);const yt=this.instancesPerModel[mt],Et=yt.instancedDataArray,At=new zP(dt,Et.length);for(const Ct of lt)for(const Lt of Ct){if(Lt.x<0||Lt.x>=Ln||Lt.y<0||Lt.y>=Ln)continue;const Bt=(this.lookupDim-1)/Ln,zt=this.lookupDim*(Lt.y*Bt|0)+Lt.x*Bt|0;if(this.lookup){if(this.lookup[zt]!==0)continue;this.lookup[zt]=1}this.instanceCount++;const Wt=Et.length;Et.resize(Wt+1),yt.instancesEvaluatedElevation.push(0),Et.float32[16*Wt]=Lt.x,Et.float32[16*Wt+1]=Lt.y}return At.instancedDataCount=yt.instancedDataArray.length-At.instancedDataOffset,At.instancedDataCount>0&&(nt.id&&(yt.idToFeaturesIndex[nt.id]=yt.features.length),yt.features.push(At),this.evaluate(At,{},yt,!1)),mt}getModelUris(){return this.modelUris}evaluate(nt,lt,dt,ft){const mt=this.layers[0],yt=nt.feature,Et=this.canonical,At=nt.rotation=mt.paint.get("model-rotation").evaluate(yt,lt,Et),Ct=nt.scale=mt.paint.get("model-scale").evaluate(yt,lt,Et),Lt=nt.translation=mt.paint.get("model-translation").evaluate(yt,lt,Et),Bt=mt.paint.get("model-color").evaluate(yt,lt,Et);Bt.a=mt.paint.get("model-color-mix-intensity").evaluate(yt,lt,Et);const zt=[];this.maxVerticalOffset<Lt[2]&&(this.maxVerticalOffset=Lt[2]),this.maxScale=Math.max(Math.max(this.maxScale,Ct[0]),Math.max(Ct[1],Ct[2])),NP(zt,At,Ct);const Wt=Math.round(100*Bt.a)+Bt.b/1.05;for(let qt=0;qt<nt.instancedDataCount;++qt){const Xt=nt.instancedDataOffset+qt,Jt=16*Xt,nr=dt.instancedDataArray.float32;let gr=0;ft&&(gr=nr[Jt+6]-dt.instancesEvaluatedElevation[Xt]);const pr=0|nr[Jt+1];nr[Jt]=(0|nr[Jt])+Bt.r/1.05,nr[Jt+1]=pr+Bt.g/1.05,nr[Jt+2]=Wt,nr[Jt+3]=1/(Et.z>10?this.tileToMeter:W_(Et,pr)),nr[Jt+4]=Lt[0],nr[Jt+5]=Lt[1],nr[Jt+6]=Lt[2]+gr,nr[Jt+7]=zt[0],nr[Jt+8]=zt[1],nr[Jt+9]=zt[2],nr[Jt+10]=zt[4],nr[Jt+11]=zt[5],nr[Jt+12]=zt[6],nr[Jt+13]=zt[8],nr[Jt+14]=zt[9],nr[Jt+15]=zt[10],dt.instancesEvaluatedElevation[Xt]=Lt[2]}}}let UP,GP;Wr(UE,"ModelBucket",{omit:["layers"]}),Wr(VP,"PerModelAttributes"),Wr(zP,"ModelFeature");const Ry=64,Z0={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function WP(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct=!1){const Lt=lt.zoom,Bt=lt.project(dt),zt=Ey(dt.lat,Lt),Wt=1/zt;at.ae.identity(ot),at.ae.translate(ot,ot,[Bt.x+yt[0]*Wt,Bt.y+yt[1]*Wt,yt[2]]);let qt=1,Xt=1;const Jt=lt.worldSize;if(Ct){if(lt.projection.name==="mercator"){let xr=0;lt.elevation&&(xr=lt.elevation.getAtPointOrZero(new Al(Bt.x/Jt,Bt.y/Jt),0));const Pr=at.aB.transformMat4([],[Bt.x,Bt.y,xr,1],lt.projMatrix)[3]/lt.cameraToCenterDistance;qt=Pr,Xt=Pr*Ey(lt.center.lat,Lt)}else if(lt.projection.name==="globe"){const xr=VE(ot,lt),Pr=at.ae.multiply([],lt.projMatrix,xr),Rr=[0,0,0,1];at.aB.transformMat4(Rr,Rr,Pr);const Dr=Rr[3]/lt.cameraToCenterDistance,Hr=$p(Lt),Jr=lt.projection.pixelsPerMeter(dt.lat,Jt)*Ey(dt.lat,Lt),an=lt.projection.pixelsPerMeter(lt.center.lat,Jt)*Ey(lt.center.lat,Lt);qt=Dr/ho(Jr,MS(lt.center.lat),Hr),Xt=Dr*zt/Jr,qt*=an,Xt*=an}}else qt=Wt;at.ae.scale(ot,ot,[qt,qt,Xt]);const nr=[...ot],gr=nt.orientation,pr=[];if(NP(pr,[gr[0]+ft[0],gr[1]+ft[1],gr[2]+ft[2]],mt),at.ae.multiply(ot,nr,pr),Et&&lt.elevation){let xr=0;const Pr=[];if(At&&lt.elevation){xr=function(Hr,Jr,an,Qr,yn){const Cn=Jr.elevation;if(!Cn)return 0;const xn=fs.projectAabbCorners(an,Qr),$n=Dl(1,yn.lat)*Jr.worldSize,gn=function(mo,oo){const _i=[0,0,1],_o=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const wo of _o){const bo=mo[wo.corners[0]],Ro=mo[wo.corners[1]],Go=mo[wo.corners[2]],Bo=[Ro[0]-bo[0],Ro[1]-bo[1],oo*(Ro[2]-bo[2])],ns=at.$.cross(Bo,Bo,[Go[0]-bo[0],Go[1]-bo[1],oo*(Go[2]-bo[2])]);at.$.normalize(ns,ns),wo.dotProductWithUp=at.$.dot(ns,_i)}return _o.sort((wo,bo)=>wo.dotProductWithUp-bo.dotProductWithUp),_o[0].corners}(xn,$n),En=xn[gn[0]],jn=xn[gn[1]],vn=xn[gn[2]],Bn=xn[gn[3]],Mn=Cn.getAtPointOrZero(new Al(En[0]/Jr.worldSize,En[1]/Jr.worldSize),0),kn=Cn.getAtPointOrZero(new Al(jn[0]/Jr.worldSize,jn[1]/Jr.worldSize),0),ao=Cn.getAtPointOrZero(new Al(vn[0]/Jr.worldSize,vn[1]/Jr.worldSize),0),io=Cn.getAtPointOrZero(new Al(Bn[0]/Jr.worldSize,Bn[1]/Jr.worldSize),0),Kn=(Mn+io)/2,Nn=(kn+ao)/2;return Kn>Nn?kn<ao?D1(Hr,jn,Bn,En,kn,io,Mn,$n):D1(Hr,vn,En,Bn,ao,Mn,io,$n):Mn<io?D1(Hr,En,jn,vn,Mn,kn,ao,$n):D1(Hr,Bn,vn,jn,io,ao,kn,$n),Math.max(Kn,Nn)}(Pr,lt,nt.aabb,ot,dt);const Rr=at.ae.fromQuat([],Pr),Dr=at.ae.multiply([],Rr,pr);at.ae.multiply(ot,nr,Dr)}else xr=lt.elevation.getAtPointOrZero(new Al(Bt.x/Jt,Bt.y/Jt),0);xr!==0&&(ot[14]+=xr)}}function Mv(ot,nt,lt=!1){ot.uploaded||(ot.gfxTexture=new vu(nt,ot.image,lt?nt.gl.R8:nt.gl.RGBA,{useMipmap:ot.sampler.minFilter>=nt.gl.NEAREST_MIPMAP_NEAREST}),ot.uploaded=!0,ot.image=null)}function R$(ot,nt,lt){ot.indexBuffer=nt.createIndexBuffer(ot.indexArray,!1,!0),ot.vertexBuffer=nt.createVertexBuffer(ot.vertexArray,E$.members,!1,!0),ot.normalArray&&(ot.normalBuffer=nt.createVertexBuffer(ot.normalArray,P$.members,!1,!0)),ot.texcoordArray&&(ot.texcoordBuffer=nt.createVertexBuffer(ot.texcoordArray,A$.members,!1,!0)),ot.colorArray&&(ot.colorBuffer=nt.createVertexBuffer(ot.colorArray,(ot.colorArray.bytesPerElement===12?S$:T$).members,!1,!0)),ot.featureArray&&(ot.pbrBuffer=nt.createVertexBuffer(ot.featureArray,k$.members,!0)),ot.segments=ms.simpleSegment(0,0,ot.vertexArray.length,ot.indexArray.length);const dt=ot.material;dt.pbrMetallicRoughness.baseColorTexture&&Mv(dt.pbrMetallicRoughness.baseColorTexture,nt),dt.pbrMetallicRoughness.metallicRoughnessTexture&&Mv(dt.pbrMetallicRoughness.metallicRoughnessTexture,nt),dt.normalTexture&&Mv(dt.normalTexture,nt),dt.occlusionTexture&&Mv(dt.occlusionTexture,nt,lt),dt.emissionTexture&&Mv(dt.emissionTexture,nt)}function GE(ot,nt,lt){if(ot.meshes)for(const dt of ot.meshes)R$(dt,nt,lt);if(ot.children)for(const dt of ot.children)GE(dt,nt,lt)}function N1(ot){if(ot.meshes)for(const nt of ot.meshes)nt.indexArray.destroy(),nt.vertexArray.destroy(),nt.colorArray&&nt.colorArray.destroy(),nt.normalArray&&nt.normalArray.destroy(),nt.texcoordArray&&nt.texcoordArray.destroy(),nt.featureArray&&nt.featureArray.destroy();if(ot.children)for(const nt of ot.children)N1(nt)}function WE(ot){if(ot.meshes)for(const lt of ot.meshes)lt.vertexBuffer&&(lt.vertexBuffer.destroy(),lt.indexBuffer.destroy(),lt.normalBuffer&&lt.normalBuffer.destroy(),lt.texcoordBuffer&&lt.texcoordBuffer.destroy(),lt.colorBuffer&&lt.colorBuffer.destroy(),lt.pbrBuffer&&lt.pbrBuffer.destroy(),lt.segments.destroy(),lt.material&&((nt=lt.material).pbrMetallicRoughness.baseColorTexture&&nt.pbrMetallicRoughness.baseColorTexture.gfxTexture&&nt.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),nt.pbrMetallicRoughness.metallicRoughnessTexture&&nt.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&nt.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),nt.normalTexture&&nt.normalTexture.gfxTexture&&nt.normalTexture.gfxTexture.destroy(),nt.emissionTexture&&nt.emissionTexture.gfxTexture&&nt.emissionTexture.gfxTexture.destroy(),nt.occlusionTexture&&nt.occlusionTexture.gfxTexture&&nt.occlusionTexture.gfxTexture.destroy()));var nt;if(ot.children)for(const lt of ot.children)WE(lt)}class I${constructor(nt){this._callback=nt,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class $${constructor(){this.tasks={},this.taskQueue=[],Uy(["process"],this),this.invoker=new I$(this.process),this.nextId=0}add(nt,lt){const dt=this.nextId++,ft=function({type:mt,isSymbolTile:yt,zoom:Et}){return Et=Et||0,mt==="message"?0:mt!=="maybePrepare"||yt?mt!=="parseTile"||yt?mt==="parseTile"&&yt?300-Et:mt==="maybePrepare"&&yt?400-Et:500:200-Et:100-Et}(lt);if(ft===0){try{nt()}finally{}return null}return this.tasks[dt]={fn:nt,metadata:lt,priority:ft,id:dt},this.taskQueue.push(dt),this.invoker.trigger(),{cancel:()=>{delete this.tasks[dt]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(dt=>!!this.tasks[dt]),!this.taskQueue.length)return;const nt=this.pick();if(nt===null)return;const lt=this.tasks[nt];if(delete this.tasks[nt],this.taskQueue.length&&this.invoker.trigger(),!lt)return;lt.fn()}finally{}}pick(){let nt=null,lt=1/0;for(let ft=0;ft<this.taskQueue.length;ft++){const mt=this.tasks[this.taskQueue[ft]];mt.priority<lt&&(lt=mt.priority,nt=ft)}if(nt===null)return null;const dt=this.taskQueue[nt];return this.taskQueue.splice(nt,1),dt}remove(){this.invoker.remove()}}class HP{constructor(nt,lt,dt){this.target=nt,this.parent=lt,this.mapId=dt,this.callbacks={},this.cancelCallbacks={},Uy(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new $$}send(nt,lt,dt,ft,mt=!1,yt){const Et=Math.round(1e18*Math.random()).toString(36).substring(0,10);dt&&(dt.metadata=yt,this.callbacks[Et]=dt);const At=new Set;return this.target.postMessage({id:Et,type:nt,hasCallback:!!dt,targetMapId:ft,mustQueue:mt,sourceMapId:this.mapId,data:Xr(lt,At)},At),{cancel:()=>{dt&&delete this.callbacks[Et],this.target.postMessage({id:Et,type:"<cancel>",targetMapId:ft,sourceMapId:this.mapId})}}}receive(nt){const lt=nt.data,dt=lt.id;if(dt&&(!lt.targetMapId||this.mapId===lt.targetMapId))if(lt.type==="<cancel>"){const ft=this.cancelCallbacks[dt];delete this.cancelCallbacks[dt],ft&&ft.cancel()}else if(lt.mustQueue||Wp()){const ft=this.callbacks[dt],mt=this.scheduler.add(()=>this.processTask(dt,lt),ft&&ft.metadata||{type:"message"});mt&&(this.cancelCallbacks[dt]=mt)}else this.processTask(dt,lt)}processTask(nt,lt){if(delete this.cancelCallbacks[nt],lt.type==="<response>"){const dt=this.callbacks[nt];delete this.callbacks[nt],dt&&(lt.error?dt(hn(lt.error)):dt(null,hn(lt.data)))}else{const dt=new Set,ft=lt.hasCallback?(yt,Et)=>{this.target.postMessage({id:nt,type:"<response>",sourceMapId:this.mapId,error:yt?Xr(yt):null,data:Xr(Et,dt)},dt)}:yt=>{},mt=hn(lt.data);if(this.parent[lt.type])this.parent[lt.type](lt.sourceMapId,mt,ft);else if(this.parent.getWorkerSource){const yt=lt.type.split(".");this.parent.getWorkerSource(lt.sourceMapId,yt[0],mt.source,mt.scope)[yt[1]](mt,ft)}else ft(new Error(`Could not find function ${lt.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}class q0{constructor(nt,lt){this.workerPool=nt,this.actors=[],this.currentActor=0,this.id=Vy();const dt=this.workerPool.acquire(this.id);for(let ft=0;ft<dt.length;ft++){const mt=new q0.Actor(dt[ft],lt,this.id);mt.name=`Worker ${ft}`,this.actors.push(mt)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(nt,lt,dt){jm(this.actors,(ft,mt)=>{ft.send(nt,lt,mt)},dt=dt||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(nt=>{nt.remove()}),this.actors=[],this.workerPool.release(this.id)}}q0.Actor=HP;var Ov={workerUrl:"",workerClass:null,workerParams:void 0};function M$(){return Ov.workerClass!=null?new Ov.workerClass:new self.Worker(Ov.workerUrl,Ov.workerParams)}const HE="mapboxgl_preloaded_worker_pool";class jv{constructor(){this.active={}}acquire(nt){if(!this.workers)for(this.workers=[];this.workers.length<jv.workerCount;)this.workers.push(new M$);return this.active[nt]=!0,this.workers.slice()}release(nt){delete this.active[nt],this.workers&&this.numActive()===0&&(this.workers.forEach(lt=>{lt.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[HE]}numActive(){return Object.keys(this.active).length}}let Dv;function F1(){return Dv||(Dv=new jv),Dv}jv.workerCount=2;let B1,ZE,Bu,K0,qE,Y0=null;function ZP(){return Wp()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:ZE||wt.DRACO_URL}function qP(){if(Wp()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(K0)return K0;const ot=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return K0=WebAssembly.validate(ot)?wt.MESHOPT_SIMD_URL:wt.MESHOPT_URL,K0}const z1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},O$={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},Lv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function KP(ot,nt,lt){const dt=lt.json.bufferViews.length,ft=lt.buffers.length;nt.bufferView=dt,lt.json.bufferViews[dt]={buffer:ft,byteLength:ot.byteLength},lt.buffers[ft]=ot}const KE="KHR_draco_mesh_compression";function j$(ot,nt){const lt=ot.extensions&&ot.extensions[KE];if(!lt)return;const dt=new Bu.Decoder,ft=QP(nt,lt.bufferView),mt=new Bu.Mesh;if(!dt.DecodeArrayToMesh(ft,ft.byteLength,mt))throw new Error("Failed to decode Draco mesh");const yt=nt.json.accessors[ot.indices],Et=z1[yt.componentType],At=yt.count*Et.BYTES_PER_ELEMENT,Ct=Bu._malloc(At);Et===Uint16Array?dt.GetTrianglesUInt16Array(mt,At,Ct):dt.GetTrianglesUInt32Array(mt,At,Ct),KP(Bu.memory.buffer.slice(Ct,Ct+At),yt,nt),Bu._free(Ct);for(const Lt of Object.keys(lt.attributes)){const Bt=dt.GetAttributeByUniqueId(mt,lt.attributes[Lt]),zt=nt.json.accessors[ot.attributes[Lt]],Wt=O$[zt.componentType],qt=zt.count*Lv[zt.type]*z1[zt.componentType].BYTES_PER_ELEMENT,Xt=Bu._malloc(qt);dt.GetAttributeDataArrayForAllPoints(mt,Bt,Bu[Wt],qt,Xt),KP(Bu.memory.buffer.slice(Xt,Xt+qt),zt,nt),Bu._free(Xt)}dt.destroy(),mt.destroy(),delete ot.extensions[KE]}const V1="EXT_meshopt_compression";function D$(ot,nt){if(!ot.extensions||!ot.extensions[V1])return;const lt=ot.extensions[V1],dt=new Uint8Array(nt.buffers[lt.buffer],lt.byteOffset||0,lt.byteLength||0),ft=new Uint8Array(lt.count*lt.byteStride);qE.decodeGltfBuffer(ft,lt.count,lt.byteStride,dt,lt.mode,lt.filter),ot.buffer=nt.buffers.length,ot.byteOffset=0,nt.buffers[ot.buffer]=ft.buffer,delete ot.extensions[V1]}const YP=1179937895,XP=new TextDecoder("utf8");function JP(ot,nt){return new URL(ot,nt).href}function L$(ot,nt,lt,dt){return fetch(JP(ot.uri,dt)).then(ft=>ft.arrayBuffer()).then(ft=>{nt.buffers[lt]=ft})}function QP(ot,nt){const lt=ot.json.bufferViews[nt];return new Uint8Array(ot.buffers[lt.buffer],lt.byteOffset||0,lt.byteLength)}function N$(ot,nt,lt,dt){if(ot.uri){const ft=JP(ot.uri,dt);return fetch(ft).then(mt=>mt.blob()).then(mt=>createImageBitmap(mt)).then(mt=>{nt.images[lt]=mt})}if(ot.bufferView!==void 0){const ft=QP(nt,ot.bufferView),mt=new Blob([ft],{type:ot.mimeType});return createImageBitmap(mt).then(yt=>{nt.images[lt]=yt})}}function eC(ot,nt=0,lt){const dt={json:null,images:[],buffers:[]};if(new Uint32Array(ot,nt,1)[0]===YP){const Lt=new Uint32Array(ot,nt);let Bt=2;const zt=(Lt[Bt++]>>2)-3,Wt=Lt[Bt++]>>2;if(Bt++,dt.json=JSON.parse(XP.decode(Lt.subarray(Bt,Bt+Wt))),Bt+=Wt,Bt<zt){const qt=Lt[Bt++];Bt++;const Xt=nt+(Bt<<2);dt.buffers[0]=ot.slice(Xt,Xt+qt)}}else dt.json=JSON.parse(XP.decode(new Uint8Array(ot,nt)));const{buffers:ft,images:mt,meshes:yt,extensionsUsed:Et,bufferViews:At}=dt.json;let Ct=Promise.resolve();if(ft){const Lt=[];for(let Bt=0;Bt<ft.length;Bt++){const zt=ft[Bt];zt.uri?Lt.push(L$(zt,dt,Bt,lt)):dt.buffers[Bt]||(dt.buffers[Bt]=null)}Ct=Promise.all(Lt)}return Ct.then(()=>{const Lt=[],Bt=Et&&Et.includes(KE),zt=Et&&Et.includes(V1);if(Bt&&Lt.push(function(){if(!Bu)return B1||(B1=function(Wt){let qt,Xt=null;function Jt(){qt=new Uint8Array(Xt.buffer)}function nr(){throw new Error("Unexpected Draco error.")}const gr={a:{a:nr,d:function(pr,xr,Pr){return qt.copyWithin(pr,xr,xr+Pr)},c:function(pr){const xr=qt.length,Pr=Math.max(pr>>>0,Math.ceil(1.2*xr)),Rr=Math.ceil((Pr-xr)/65536);try{return Xt.grow(Rr),Jt(),!0}catch{return!1}},b:nr}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(Wt,gr):Wt.then(pr=>pr.arrayBuffer()).then(pr=>WebAssembly.instantiate(pr,gr))).then(pr=>{const{Rb:xr,Qb:Pr,P:Rr,T:Dr,X:Hr,Ja:Jr,La:an,Qa:Qr,Va:yn,Wa:Cn,eb:xn,jb:$n,f:gn,e:En,yb:jn,zb:vn,Ab:Bn,Bb:Mn,Db:kn,Gb:ao}=pr.instance.exports;Xt=En;const io=(()=>{let Kn=0,Nn=0,mo=0,oo=0;return _i=>{mo&&(xr(oo),xr(Kn),Nn+=mo,mo=Kn=0),Kn||(Nn+=128,Kn=Pr(Nn));const _o=_i.length+7&-8;let wo=Kn;_o>=Nn&&(mo=_o,wo=oo=Pr(_o));for(let bo=0;bo<_i.length;bo++)qt[wo+bo]=_i[bo];return wo}})();return Jt(),gn(),{memory:En,_free:xr,_malloc:Pr,Mesh:class{constructor(){this.ptr=Rr()}destroy(){Dr(this.ptr)}},Decoder:class{constructor(){this.ptr=Jr()}destroy(){$n(this.ptr)}DecodeArrayToMesh(Kn,Nn,mo){const oo=io(Kn),_i=an(this.ptr,oo,Nn,mo.ptr);return!!Hr(_i)}GetAttributeByUniqueId(Kn,Nn){return{ptr:Qr(this.ptr,Kn.ptr,Nn)}}GetTrianglesUInt16Array(Kn,Nn,mo){yn(this.ptr,Kn.ptr,Nn,mo)}GetTrianglesUInt32Array(Kn,Nn,mo){Cn(this.ptr,Kn.ptr,Nn,mo)}GetAttributeDataArrayForAllPoints(Kn,Nn,mo,oo,_i){xn(this.ptr,Kn.ptr,Nn.ptr,mo,oo,_i)}},DT_INT8:jn(),DT_UINT8:vn(),DT_INT16:Bn(),DT_UINT16:Mn(),DT_UINT32:kn(),DT_FLOAT32:ao()}})}(fetch(ZP())),B1.then(Wt=>{Bu=Wt,B1=void 0}))}()),zt&&Lt.push(function(){if(qE)return;const Wt=function(qt){let Xt;const Jt=WebAssembly.instantiateStreaming(qt,{}).then(pr=>{Xt=pr.instance,Xt.exports.__wasm_call_ctors()}),nr={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},gr={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:Jt,supported:!0,decodeGltfBuffer(pr,xr,Pr,Rr,Dr,Hr){(function(Jr,an,Qr,yn,Cn,xn,$n){const gn=Jr.exports.sbrk,En=yn+3&-4,jn=gn(En*Cn),vn=gn(xn.length),Bn=new Uint8Array(Jr.exports.memory.buffer);Bn.set(xn,vn);const Mn=an(jn,yn,Cn,vn,xn.length);if(Mn===0&&$n&&$n(jn,En,Cn),Qr.set(Bn.subarray(jn,jn+yn*Cn)),gn(jn-gn(0)),Mn!==0)throw new Error(`Malformed buffer data: ${Mn}`)})(Xt,Xt.exports[gr[Dr]],pr,xr,Pr,Rr,Xt.exports[nr[Hr]])}}}(fetch(qP()));return Wt.ready.then(()=>{qE=Wt})}()),mt)for(let Wt=0;Wt<mt.length;Wt++)Lt.push(N$(mt[Wt],dt,Wt,lt));return(Lt.length?Promise.all(Lt):Promise.resolve()).then(()=>{if(Bt&&yt)for(const{primitives:Wt}of yt)for(const qt of Wt)j$(qt,dt);if(zt&&yt&&At)for(const Wt of At)D$(Wt,dt);return dt})})}function Iy(ot,nt){const lt=ot.json.bufferViews[nt.bufferView],dt=z1[nt.componentType];return new dt(ot.buffers[lt.buffer],(nt.byteOffset||0)+(lt.byteOffset||0),nt.count*(lt.byteStride&&lt.byteStride!==Lv[nt.type]*dt.BYTES_PER_ELEMENT?lt.byteStride/dt.BYTES_PER_ELEMENT:Lv[nt.type]))}function YE(ot,nt,lt,dt){const ft=z1[nt.componentType],mt=function(Lt){switch(Lt){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(ft),yt=ot.json.bufferViews[nt.bufferView],Et=yt.byteStride?yt.byteStride/ft.BYTES_PER_ELEMENT:Lv[nt.type],At=lt.float32,Ct=At.length/lt.capacity;for(let Lt=0,Bt=0;Lt<nt.count*Et;Lt+=Et,Bt+=Ct)for(let zt=0;zt<Ct;zt++)At[Bt+zt]=dt[Lt+zt]*mt;lt._trim()}function F$(ot,nt,lt){const dt=ot.indices,ft=ot.attributes,mt={};mt.indexArray=new Fs;const yt=nt.json.accessors[dt],Et=yt.count/3;mt.indexArray.reserve(Et);const At=Iy(nt,yt);for(let zt=0;zt<Et;zt++)mt.indexArray.emplaceBack(At[3*zt],At[3*zt+1],At[3*zt+2]);mt.indexArray._trim(),mt.vertexArray=new cm;const Ct=nt.json.accessors[ft.POSITION];mt.vertexArray.reserve(Ct.count);const Lt=Iy(nt,Ct);for(let zt=0;zt<Ct.count;zt++)mt.vertexArray.emplaceBack(Lt[3*zt],Lt[3*zt+1],Lt[3*zt+2]);if(mt.vertexArray._trim(),mt.aabb=new fs(Ct.min,Ct.max),mt.centroid=function(zt,Wt){const qt=[0,0,0],Xt=zt.length;if(Xt>0){for(let Jt=0;Jt<Xt;Jt++){const nr=3*zt[Jt];qt[0]+=Wt[nr],qt[1]+=Wt[nr+1],qt[2]+=Wt[nr+2]}qt[0]/=Xt,qt[1]/=Xt,qt[2]/=Xt}return qt}(At,Lt),ft.COLOR_0!==void 0){const zt=nt.json.accessors[ft.COLOR_0],Wt=Lv[zt.type],qt=Iy(nt,zt);mt.colorArray=Wt===3?new cm:new lm,mt.colorArray.resize(zt.count),YE(nt,zt,mt.colorArray,qt)}if(ft.NORMAL!==void 0){mt.normalArray=new cm;const zt=nt.json.accessors[ft.NORMAL];mt.normalArray.resize(zt.count);const Wt=Iy(nt,zt);YE(nt,zt,mt.normalArray,Wt)}if(ft.TEXCOORD_0!==void 0&&lt.length>0){mt.texcoordArray=new ev;const zt=nt.json.accessors[ft.TEXCOORD_0];mt.texcoordArray.resize(zt.count);const Wt=Iy(nt,zt);YE(nt,zt,mt.texcoordArray,Wt)}if(ft._FEATURE_ID_RGBA4444!==void 0){const zt=nt.json.accessors[ft._FEATURE_ID_RGBA4444];nt.json.extensionsUsed&&nt.json.extensionsUsed.includes("EXT_meshopt_compression")&&(mt.featureData=Iy(nt,zt))}ft._FEATURE_RGBA4444!==void 0&&(mt.featureData=new Uint32Array(Iy(nt,nt.json.accessors[ft._FEATURE_RGBA4444]).buffer));const Bt=ot.material;return mt.material=function(zt,Wt){const{emissiveFactor:qt=[0,0,0],alphaMode:Xt="OPAQUE",alphaCutoff:Jt=.5,normalTexture:nr,occlusionTexture:gr,emissiveTexture:pr,doubleSided:xr}=zt,{baseColorFactor:Pr=[1,1,1,1],metallicFactor:Rr=1,roughnessFactor:Dr=1,baseColorTexture:Hr,metallicRoughnessTexture:Jr}=zt.pbrMetallicRoughness||{},an=gr?Wt[gr.index]:void 0;if(gr&&gr.extensions&&gr.extensions.KHR_texture_transform&&an){const Qr=gr.extensions.KHR_texture_transform;an.offsetScale=[Qr.offset[0],Qr.offset[1],Qr.scale[0],Qr.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new ga(...Pr),metallicFactor:Rr,roughnessFactor:Dr,baseColorTexture:Hr?Wt[Hr.index]:void 0,metallicRoughnessTexture:Jr?Wt[Jr.index]:void 0},doubleSided:xr,emissiveFactor:qt,alphaMode:Xt,alphaCutoff:Jt,normalTexture:nr?Wt[nr.index]:void 0,occlusionTexture:an,emissionTexture:pr?Wt[pr.index]:void 0,defined:zt.defined===void 0}}(Bt!==void 0?nt.json.materials[Bt]:{defined:!1},lt),mt}function tC(ot,nt,lt){const{matrix:dt,rotation:ft,translation:mt,scale:yt,mesh:Et,extras:At,children:Ct}=ot,Lt={};if(Lt.matrix=dt||at.ae.fromRotationTranslationScale([],ft||[0,0,0,1],mt||[0,0,0],yt||[1,1,1]),Et!==void 0){Lt.meshes=lt[Et];const Bt=Lt.anchor=[0,0];for(const zt of Lt.meshes){const{min:Wt,max:qt}=zt.aabb;Bt[0]+=Wt[0]+qt[0],Bt[1]+=Wt[1]+qt[1]}Bt[0]=Math.floor(Bt[0]/Lt.meshes.length/2),Bt[1]=Math.floor(Bt[1]/Lt.meshes.length/2)}if(At&&(At.id&&(Lt.id=At.id),At.lights&&(Lt.lights=function(Bt){if(!Bt.length)return[];const zt=function(nr){const gr=atob(nr),pr=new Uint8Array(gr.length);for(let xr=0;xr<gr.length;xr++)pr[xr]=gr.codePointAt(xr);return pr}(Bt),Wt=[],qt=zt.length/24,Xt=new Uint16Array(zt.buffer),Jt=new Float32Array(zt.buffer);for(let nr=0;nr<qt;nr++){const gr=Xt[2*nr*6]/30,pr=Xt[2*nr*6+1]/30,xr=Xt[2*nr*6+10]/100,Pr=Jt[6*nr+1],Rr=Jt[6*nr+2],Dr=Jt[6*nr+3],Hr=Jt[6*nr+4],Jr=Dr-Pr,an=Hr-Rr,Qr=Math.hypot(Jr,an);Wt.push({pos:[Pr+.5*Jr,Rr+.5*an,pr],normal:[an/Qr,-Jr/Qr,0],width:Qr,height:gr,depth:xr,points:[Pr,Rr,Dr,Hr]})}return Wt}(At.lights))),Ct){const Bt=[];for(const zt of Ct)Bt.push(tC(nt.json.nodes[zt],nt,lt));Lt.children=Bt}return Lt}function B$(ot){if(ot.vertices.length===0||ot.indices.length===0)return null;const nt=new fE(ot.vertices,ot.indices,8,256),[lt,dt]=[nt.min.clone(),nt.max.clone()];return{vertices:ot.vertices,indices:ot.indices,grid:nt,min:lt,max:dt}}function z$(ot){if(!ot.extras||!ot.extras.ground)return null;const nt=ot.extras.ground;if(!nt||!Array.isArray(nt)||nt.length===0)return null;const lt=nt[0];if(!lt||!Array.isArray(lt)||lt.length===0)return null;const dt=[];for(const yt of lt){if(!Array.isArray(yt)||yt.length!==2)continue;const Et=yt[0],At=yt[1];typeof Et=="number"&&typeof At=="number"&&dt.push(new Vn(Et,At))}if(dt.length<3)return null;dt.length>1&&dt[dt.length-1].equals(dt[0])&&dt.pop();let ft=0;for(let yt=0;yt<dt.length;yt++){const Et=dt[yt],At=dt[(yt+1)%dt.length],Ct=dt[(yt+2)%dt.length];ft+=(Et.x-At.x)*(Ct.y-At.y)-(Ct.x-At.x)*(Et.y-At.y)}ft>0&&dt.reverse();const mt=cv(dt.flatMap(yt=>[yt.x,yt.y]),[]);return mt.length===0?null:{vertices:dt,indices:mt}}function V$(ot,nt){const lt=[],dt=[];let ft=0;const mt=[];for(const yt of ot){ft=lt.length;const Et=yt.vertexArray.float32,At=yt.indexArray.uint16;for(let Ct=0;Ct<yt.vertexArray.length;Ct++)mt[0]=Et[3*Ct+0],mt[1]=Et[3*Ct+1],mt[2]=Et[3*Ct+2],at.$.transformMat4(mt,mt,nt),lt.push(new Vn(mt[0],mt[1]));for(let Ct=0;Ct<3*yt.indexArray.length;Ct++)dt.push(At[Ct]+ft)}if(dt.length%3!=0)return null;for(let yt=0;yt<dt.length;yt+=3){const Et=lt[dt[yt+0]],At=lt[dt[yt+1]],Ct=lt[dt[yt+2]];(Et.x-At.x)*(Ct.y-At.y)-(Ct.x-At.x)*(Et.y-At.y)>0&&([dt[yt+1],dt[yt+2]]=[dt[yt+2],dt[yt+1]])}return{vertices:lt,indices:dt}}function rC(ot){const nt=function(At,Ct){const Lt=[],Bt=WebGL2RenderingContext;if(At.json.textures)for(const zt of At.json.textures){const Wt={magFilter:Bt.LINEAR,minFilter:Bt.NEAREST,wrapS:Bt.REPEAT,wrapT:Bt.REPEAT};zt.sampler!==void 0&&Object.assign(Wt,At.json.samplers[zt.sampler]),Lt.push({image:Ct[zt.source],sampler:Wt,uploaded:!1})}return Lt}(ot,ot.images),lt=function(At,Ct){const Lt=[];for(const Bt of At.json.meshes){const zt=[];for(const Wt of Bt.primitives)zt.push(F$(Wt,At,Ct));Lt.push(zt)}return Lt}(ot,nt),{scenes:dt,scene:ft,nodes:mt}=ot.json,yt=dt?dt[ft||0].nodes:mt,Et=[];for(const At of yt)Et.push(tC(mt[At],ot,lt));return function(At,Ct,Lt){const Bt={},zt=new Set;for(let Wt=0;Wt<At.length;Wt++){const qt=Lt[Ct[Wt]];if(!qt.extras)continue;const Xt=qt.extras["mapbox:footprint:version"],Jt=qt.extras["mapbox:footprint:id"];(Xt||Jt)&&zt.add(Wt),Xt==="1.0.0"&&Jt&&(Bt[Jt]=Wt)}for(let Wt=0;Wt<At.length;Wt++){if(zt.has(Wt))continue;const qt=At[Wt],Xt=Lt[Ct[Wt]];if(!Xt.extras)continue;let Jt=null;qt.id in Bt&&(Jt=V$(At[Bt[qt.id]].meshes,qt.matrix)),Jt||(Jt=z$(Xt)),Jt&&(qt.footprint=B$(Jt))}if(zt.size>0){const Wt=Array.from(zt.values()).sort((qt,Xt)=>qt-Xt);for(let qt=Wt.length-1;qt>=0;qt--)At.splice(Wt[qt],1)}}(Et,yt,ot.json.nodes),Et}function U$(ot){ot.heightmap=new Float32Array(4096),ot.heightmap.fill(-1);const nt=ot.vertexArray.float32,lt=ot.aabb.min[0]-1,dt=ot.aabb.min[1]-1,ft=Ry/(ot.aabb.max[0]-lt+2),mt=Ry/(ot.aabb.max[1]-dt+2);for(let yt=0;yt<nt.length;yt+=3){const Et=nt[yt+2],At=(nt[yt+0]-lt)*ft|0,Ct=(nt[yt+1]-dt)*mt|0;Et>ot.heightmap[Ct*Ry+At]&&(ot.heightmap[Ct*Ry+At]=Et)}}function G$(ot,nt){const lt={};lt.indexArray=new Fs,lt.indexArray.reserve(4*ot.length),lt.vertexArray=new cm,lt.vertexArray.reserve(10*ot.length),lt.colorArray=new lm,lt.vertexArray.reserve(10*ot.length);let dt=0;for(const yt of ot){const Et=Math.min(10,Math.max(4,1.3*yt.height))*nt,At=[-yt.normal[1],yt.normal[0],0],Ct=Math.min(.29,.1*yt.width/yt.depth),Lt=yt.width-2*yt.depth*nt*(Ct+.01),Bt=at.$.scaleAndAdd([],yt.pos,At,Lt/2),zt=at.$.scaleAndAdd([],yt.pos,At,-Lt/2),Wt=[Bt[0],Bt[1],Bt[2]+yt.height],qt=[zt[0],zt[1],zt[2]+yt.height],Xt=at.$.scaleAndAdd([],yt.normal,At,Ct);at.$.scale(Xt,Xt,Et);const Jt=at.$.scaleAndAdd([],yt.normal,At,-Ct);at.$.scale(Jt,Jt,Et),at.$.add(Xt,Bt,Xt),at.$.add(Jt,zt,Jt),Bt[2]+=.1,zt[2]+=.1,lt.vertexArray.emplaceBack(Xt[0],Xt[1],Xt[2]),lt.vertexArray.emplaceBack(Jt[0],Jt[1],Jt[2]),lt.vertexArray.emplaceBack(Bt[0],Bt[1],Bt[2]),lt.vertexArray.emplaceBack(zt[0],zt[1],zt[2]),lt.vertexArray.emplaceBack(Wt[0],Wt[1],Wt[2]),lt.vertexArray.emplaceBack(qt[0],qt[1],qt[2]),lt.vertexArray.emplaceBack(Bt[0],Bt[1],Bt[2]),lt.vertexArray.emplaceBack(zt[0],zt[1],zt[2]),lt.vertexArray.emplaceBack(Xt[0],Xt[1],Xt[2]),lt.vertexArray.emplaceBack(Jt[0],Jt[1],Jt[2]);const nr=Lt/Et/2;lt.colorArray.emplaceBack(-nr-Ct,-1,nr,.8),lt.colorArray.emplaceBack(nr+Ct,-1,nr,.8),lt.colorArray.emplaceBack(-nr,0,nr,1.3),lt.colorArray.emplaceBack(nr,0,nr,1.3),lt.colorArray.emplaceBack(nr+Ct,-.8,nr,.7),lt.colorArray.emplaceBack(nr+Ct,-.8,nr,.7),lt.colorArray.emplaceBack(0,0,nr,1.3),lt.colorArray.emplaceBack(0,0,nr,1.3),lt.colorArray.emplaceBack(nr+Ct,-1.2,nr,.8),lt.colorArray.emplaceBack(nr+Ct,-1.2,nr,.8),lt.indexArray.emplaceBack(6+dt,4+dt,8+dt),lt.indexArray.emplaceBack(7+dt,9+dt,5+dt),lt.indexArray.emplaceBack(0+dt,1+dt,2+dt),lt.indexArray.emplaceBack(1+dt,3+dt,2+dt),dt+=10}const ft={defined:!0,emissiveFactor:[0,0,0]},mt={};return mt.baseColorFactor=ga.white,ft.pbrMetallicRoughness=mt,lt.material=ft,lt.aabb=new fs([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),lt}const XE=new Float32Array(262144),$y=new Uint8Array(262144);function nC(ot){let nt=0;if(ot.meshes)for(const lt of ot.meshes)nt=Math.max(nt,lt.aabb.max[2]);if(ot.children)for(const lt of ot.children)nt=Math.max(nt,nC(lt));return nt}function iC(ot,nt,lt){if(ot.meshes)for(const dt of ot.meshes)dt.aabb.min[0]!==1/0&&lt.insert(nt,dt.aabb.min[0],dt.aabb.min[1],dt.aabb.max[0],dt.aabb.max[1]);if(ot.children)for(const dt of ot.children)iC(dt,nt,lt)}const oC=["","wall","door","roof","window","lamp","logo"];class aC{constructor(nt){this.node=nt,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.feature={type:"Point",id:nt.id,geometry:[],properties:{height:nC(nt)}},this.aabb=this._getLocalBounds()}_getLocalBounds(){if(!this.node.meshes)return new fs([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let nt=0;const lt=new fs([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const dt of this.node.meshes)this.node.lightMeshIndex!==nt&&(dt.transformedAabb=fs.applyTransformFast(dt.aabb,this.node.matrix),lt.encapsulate(dt.transformedAabb)),nt++;this.aabb=lt}return this.aabb}}class U1{constructor(nt,lt,dt,ft,mt,yt){this.id=lt,this.modelTraits|=Z0.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,dt&&(this.modelTraits|=Z0.HasMapboxMeshFeatures),ft&&(this.modelTraits|=Z0.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=mt,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const Et of nt)this.nodesInfo.push(new aC(Et)),iC(Et,yt.featureIndexArray.length,yt.grid),yt.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,yt.bucketLayerIDs.length-1,0)}updateFootprints(nt,lt){for(const dt of this.getNodesInfo()){const ft=dt.node;ft.footprint&&lt.push({footprint:ft.footprint,id:nt})}}update(){console.log("Update 3D model bucket")}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(nt){if(!this.needsUpload)return;const lt=this.getNodesInfo();for(const dt of lt){const ft=dt.node;this.uploaded?this.updatePbrBuffer(ft):GE(ft,nt,!0)}for(const dt of lt)N1(dt.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(nt){let lt=!1;if(!nt.meshes)return lt;for(const dt of nt.meshes)dt.pbrBuffer&&(dt.pbrBuffer.updateData(dt.featureArray),lt=!0);return lt}needsReEvaluation(nt,lt,dt){const ft=nt.transform.projectionOptions,mt=nt.style.getBrightness(),yt=this.brightness!==mt;return!!(!this.uploaded||this.dirty||ft.name!==this.projection.name||Nv(dt.paint.get("model-color").value,yt)||Nv(dt.paint.get("model-color-mix-intensity").value,yt)||Nv(dt.paint.get("model-roughness").value,yt)||Nv(dt.paint.get("model-emissive-strength").value,yt)||Nv(dt.paint.get("model-height-based-emissive-strength-multiplier").value,yt))&&(this.projection=ft,this.brightness=mt,!0)}evaluateScale(nt,lt){if(nt.transform.zoom===this.zoom)return;this.zoom=nt.transform.zoom;const dt=this.getNodesInfo(),ft=this.id.canonical;for(const mt of dt){const yt=mt.feature;mt.evaluatedScale=lt.paint.get("model-scale").evaluate(yt,{},ft)}}evaluate(nt){const lt=this.getNodesInfo();for(const dt of lt){if(!dt.node.meshes)continue;const ft=dt.feature,mt=dt.node.meshes&&dt.node.meshes[0].featureData,yt=dt.evaluatedColor[2],Et=dt.evaluatedRMEA[2],At=this.id.canonical;if(dt.hasTranslucentParts=!1,mt){for(let Ct=0;Ct<oC.length;Ct++){const Lt=oC[Ct];Lt.length&&(ft.properties.part=Lt);const Bt=nt.paint.get("model-color").evaluate(ft,{},At).toRenderColor(null),zt=nt.paint.get("model-color-mix-intensity").evaluate(ft,{},At);dt.evaluatedColor[Ct]=[Bt.r,Bt.g,Bt.b,zt],dt.evaluatedRMEA[Ct][0]=nt.paint.get("model-roughness").evaluate(ft,{},At),dt.evaluatedRMEA[Ct][2]=nt.paint.get("model-emissive-strength").evaluate(ft,{},At),dt.evaluatedRMEA[Ct][3]=Bt.a,dt.emissionHeightBasedParams[Ct]=nt.paint.get("model-height-based-emissive-strength-multiplier").evaluate(ft,{},At),!dt.hasTranslucentParts&&Bt.a<1&&(dt.hasTranslucentParts=!0)}delete ft.properties.part,H$(dt,yt!==dt.evaluatedColor[2]||Et!==dt.evaluatedRMEA[2],this.modelTraits)}else dt.evaluatedRMEA[0][2]=nt.paint.get("model-emissive-strength").evaluate(ft,{},At);dt.evaluatedScale=nt.paint.get("model-scale").evaluate(ft,{},At),this.updatePbrBuffer(dt.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(nt,lt,dt,ft){const mt=nt.findDEMTileFor(dt);if(mt&&(mt.tileID.canonical!==this.terrainTile||lt!==this.terrainExaggeration)){if(mt.dem&&mt.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=mt.tileID.overscaledZ;const yt=D0.create(nt,dt,mt);if(!yt)return;this.modelTraits&Z0.HasMapboxMeshFeatures&&this.updateDEM(nt,yt,dt,ft);for(const Et of this.getNodesInfo()){const At=Et.node;if(!At.footprint||!At.footprint.vertices||!At.footprint.vertices.length)continue;const Ct=At.footprint.vertices;let Lt=yt.getElevationAt(Ct[0].x,Ct[0].y,!0,!0);for(let Bt=1;Bt<Ct.length;Bt++)Lt=Math.min(Lt,yt.getElevationAt(Ct[Bt].x,Ct[Bt].y,!0,!0));At.elevation=Lt}}this.terrainTile=mt.tileID.canonical,this.terrainExaggeration=lt}}updateDEM(nt,lt,dt,ft){let mt=lt._dem._modifiedForSources[ft];if(mt===void 0&&(lt._dem._modifiedForSources[ft]=[],mt=lt._dem._modifiedForSources[ft]),mt.includes(dt.canonical))return;const yt=lt._dem.dim;mt.push(dt.canonical);let Et=!1;for(const At of this.getNodesInfo()){const Ct=At.node;if(!Ct.footprint||!Ct.footprint.grid)continue;const Lt=Ct.footprint.grid,Bt=lt.tileCoordToPixel(Lt.min.x,Lt.min.y),zt=lt.tileCoordToPixel(Lt.max.x,Lt.max.y),Wt=Math.min(Math.min(yt-zt.y,Bt.x),Math.min(Bt.y,yt-zt.x));if(Wt<0)continue;const qt=jo(Wt,2,5);let Xt=Math.max(0,Bt.x-qt),Jt=Math.max(0,Bt.y-qt),nr=Math.min(zt.x+qt,yt-1),gr=Math.min(zt.y+qt,yt-1);for(let Rr=Jt;Rr<=gr;++Rr)for(let Dr=Xt;Dr<=nr;++Dr)$y[Rr*yt+Dr]=255;let pr=0,xr=0;for(let Rr=0;Rr<Lt.cellsY;++Rr)for(let Dr=0;Dr<Lt.cellsX;++Dr){if(!Lt.cells[Rr*Lt.cellsX+Dr])continue;const Hr=lt.tileCoordToPixel(Lt.min.x+Dr/Lt.xScale,Lt.min.y+Rr/Lt.yScale),Jr=lt.tileCoordToPixel(Lt.min.x+(Dr+1)/Lt.xScale,Lt.min.y+(Rr+1)/Lt.yScale);for(let an=Hr.y;an<=Math.min(Jr.y+1,yt-1);++an)for(let Qr=Hr.x;Qr<=Math.min(Jr.x+1,yt-1);++Qr)$y[an*yt+Qr]===255&&($y[an*yt+Qr]=0,pr+=lt.getElevationAtPixel(Qr,an),xr++)}const Pr=pr/xr;Xt=Math.max(1,Bt.x-qt),Jt=Math.max(1,Bt.y-qt),nr=Math.min(zt.x+qt,yt-2),gr=Math.min(zt.y+qt,yt-2),Et=!0;for(let Rr=Jt;Rr<=gr;++Rr)for(let Dr=Xt;Dr<=nr;++Dr)$y[Rr*yt+Dr]===0&&(XE[Rr*yt+Dr]=lt._dem.set(Dr,Rr,Pr));for(let Rr=1;Rr<qt;++Rr){Xt=Math.max(1,Bt.x-Rr),Jt=Math.max(1,Bt.y-Rr),nr=Math.min(zt.x+Rr,yt-2),gr=Math.min(zt.y+Rr,yt-2);for(let Dr=Jt;Dr<=gr;++Dr)for(let Hr=Xt;Hr<=nr;++Hr){const Jr=Dr*yt+Hr;if($y[Jr]===255){let an=0,Qr=0,yn=-1,Cn=-1;for(let xn=-1;xn<=1;++xn)for(let $n=-1;$n<=1;++$n){const gn=(Dr+xn)*yt+Hr+$n;if($y[gn]>=Rr)continue;const En=XE[gn],jn=Math.abs(En);jn>Qr&&(an=En,Qr=jn,yn=$n,Cn=xn)}if(Qr>.1){const xn=1-(Rr+.5*Math.abs(yn*Cn))/qt;let $n=lt._dem.get(Hr,Dr)+an*xn;const gn=lt._dem.get(Hr+yn,Dr+Cn),En=lt._dem.get(Hr-yn,Dr-Cn,!0);($n-gn)*($n-En)>0&&($n=(gn+En)/2),XE[Jr]=lt._dem.set(Hr,Dr,$n),$y[Jr]=Rr}}}}}Et&&(lt._demTile.needsDEMTextureUpload=!0,lt._dem._timestamp=Ys.now())}getNodesInfo(){return this.nodesInfo}destroy(){const nt=this.getNodesInfo();for(const lt of nt)N1(lt.node),WE(lt.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(nt,lt){if(lt.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=lt.updateTime;const dt=lt.getReplacementRegionsForTile(nt.toUnwrapped()),ft=this.getNodesInfo();for(let mt=0;mt<this.nodesInfo.length;mt++){const yt=ft[mt].node;ft[mt].hiddenByReplacement=!!yt.footprint&&!dt.find(Et=>Et.footprint===yt.footprint)}}getHeightAtTileCoord(nt,lt){const dt=this.getNodesInfo(),ft=[],mt=[0,0,0],yt=at.ae.identity([]);for(let Et=0;Et<this.nodesInfo.length;Et++){const At=dt[Et],Ct=At.node.meshes[0],Lt=Ct.transformedAabb;if(nt<Lt.min[0]||lt<Lt.min[1]||nt>Lt.max[0]||lt>Lt.max[1])continue;if(At.node.hidden===!0)return{height:0,maxHeight:At.feature.properties.height,hidden:!1,verticalScale:At.evaluatedScale[2]};at.ae.invert(yt,At.node.matrix),mt[0]=nt,mt[1]=lt,at.$.transformMat4(mt,mt,yt);const Bt=(mt[0]-Ct.aabb.min[0])/(Ct.aabb.max[0]-Ct.aabb.min[0])*Ry|0,zt=Math.min(63,(mt[1]-Ct.aabb.min[1])/(Ct.aabb.max[1]-Ct.aabb.min[1])*Ry|0)*Ry+Math.min(63,Bt),Wt=Ct.heightmap[zt];if(!(Wt<0&&At.node.footprint))return At.hiddenByReplacement?void 0:{height:Wt,maxHeight:At.feature.properties.height,hidden:!1,verticalScale:At.evaluatedScale[2]};if(At.node.footprint.grid.query(new Vn(nt,lt),new Vn(nt,lt),ft),ft.length>0)return{height:void 0,maxHeight:At.feature.properties.height,hidden:At.hiddenByReplacement,verticalScale:At.evaluatedScale[2]}}}}function Nv(ot,nt){return!ot.isLightConstant&&nt}function W$(ot,nt,lt,dt,ft,mt,yt,Et){let At=(61440&nt|(61440&nt)>>4)>>8,Ct=(3840&nt|(3840&nt)>>4)>>4,Lt=240&nt|(240&nt)>>4;lt[3]>0&&(At=ho(At,255*lt[0],lt[3]),Ct=ho(Ct,255*lt[1],lt[3]),Lt=ho(Lt,255*lt[2],lt[3]));const Bt=At<<8|Ct,zt=Lt<<8|Math.floor(255*dt[3]),Wt=function(Rr){const Dr=jo(Rr,0,2);return Math.min(Math.round(.5*Dr*255),255)}(dt[2])<<8|15*dt[0]<<4|15*dt[1],qt=jo(ft[0],0,1),Xt=jo(ft[1],0,1),Jt=jo(ft[2],0,1),nr=jo(ft[3],0,1);let gr,pr,xr,Pr;if(qt!==Xt&&yt!==mt&&Xt!==qt){const Rr=yt-mt;pr=1/(Rr*(Xt-qt)),xr=-(mt+Rr*qt)/(Rr*(Xt-qt));const Dr=jo(ft[4],-1,1);Pr=Math.pow(10,Dr),gr=255*Jt<<8|255*nr}else gr=65535,pr=0,xr=1,Pr=1;if(ot.emplaceBack(Bt,zt,Wt,gr,pr,xr,Pr),Et){const Rr=Et.length;Et.clear();for(let Dr=0;Dr<Rr;Dr++)Et.emplaceBack(Bt,zt,Wt,gr,pr,xr,Pr)}}function H$(ot,nt,lt){const dt=ot.node;let ft=0;const mt=lt&Z0.HasMeshoptCompression;for(const yt of dt.meshes){if(dt.lights&&dt.lightMeshIndex===ft||!yt.featureData)continue;yt.featureArray=new V_,yt.featureArray.reserve(yt.featureData.length);let Et=nt;for(const At of yt.featureData){const Ct=mt?65535&At:At>>16&65535,Lt=mt?At>>16&65535:65535&At,Bt=(15&Lt)<8?15&Lt:0,zt=ot.evaluatedRMEA[Bt],Wt=ot.evaluatedColor[Bt],qt=ot.emissionHeightBasedParams[Bt];let Xt;if(Et&&Bt===2&&dt.lights&&(Xt=new V_,Xt.resize(10*dt.lights.length)),W$(yt.featureArray,Ct,Wt,zt,qt,yt.aabb.min[2],yt.aabb.max[2],Xt),Xt&&Et){Et=!1;const Jt=dt.meshes[dt.lightMeshIndex];Jt.featureArray=Xt,Jt.featureArray._trim()}}yt.featureArray._trim(),ft++}}function sC(ot,nt,lt,dt){const ft=1<<ot.z;nt.lat=Ws((dt/Ln+ot.y)/ft),nt.lng=Zl((lt/Ln+ot.x)/ft)}Wr(U1,"Tiled3dModelBucket",{omit:["layers"]}),Wr(aC,"Tiled3dModelFeature");const Z$={circle:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:US||(US=new is({"circle-sort-key":new to(tn.layout_circle["circle-sort-key"]),visibility:new In(tn.layout_circle.visibility)})),paint:GS||(GS=new is({"circle-radius":new to(tn.paint_circle["circle-radius"]),"circle-color":new to(tn.paint_circle["circle-color"]),"circle-blur":new to(tn.paint_circle["circle-blur"]),"circle-opacity":new to(tn.paint_circle["circle-opacity"]),"circle-translate":new In(tn.paint_circle["circle-translate"]),"circle-translate-anchor":new In(tn.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new In(tn.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new In(tn.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new to(tn.paint_circle["circle-stroke-width"]),"circle-stroke-color":new to(tn.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new to(tn.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new In(tn.paint_circle["circle-emissive-strength"])}))},nt,lt,dt)}createBucket(ot){return new Kw(ot)}queryRadius(ot){const nt=ot;return M0("circle-radius",this,nt)+M0("circle-stroke-width",this,nt)+q_(this.paint.get("circle-translate"))}queryIntersectsFeature(ot,nt,lt,dt,ft,mt,yt,Et){const At=VS(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),mt.angle,ot.pixelToTileUnitsFactor),Ct=this.paint.get("circle-radius").evaluate(nt,lt)+this.paint.get("circle-stroke-width").evaluate(nt,lt);return oT(ot,dt,mt,yt,Et,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",At,Ct)}getProgramIds(){return["circle"]}getDefaultProgramParams(ot,nt,lt){const dt=iT(this);return{config:new _y(this,{zoom:nt,lut:lt}),defines:dt,overrideFog:!1}}},heatmap:class extends Hl{createBucket(ot){return new sT(ot)}constructor(ot,nt,lt,dt){super(ot,{layout:dT||(dT=new is({visibility:new In(tn.layout_heatmap.visibility)})),paint:hT||(hT=new is({"heatmap-radius":new to(tn.paint_heatmap["heatmap-radius"]),"heatmap-weight":new to(tn.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new In(tn.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Tl(tn.paint_heatmap["heatmap-color"]),"heatmap-opacity":new In(tn.paint_heatmap["heatmap-opacity"])}))},nt,lt,dt),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(ot){ot==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=lv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(ot){return M0("heatmap-radius",this,ot)}queryIntersectsFeature(ot,nt,lt,dt,ft,mt,yt,Et){const At=this.paint.get("heatmap-radius").evaluate(nt,lt);return oT(ot,dt,mt,yt,Et,!0,!0,new Vn(0,0),At)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(ot,nt,lt){return ot==="heatmap"?{config:new _y(this,{zoom:nt,lut:lt}),overrideFog:!1}:{}}},hillshade:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:fT||(fT=new is({visibility:new In(tn.layout_hillshade.visibility)})),paint:pT||(pT=new is({"hillshade-illumination-direction":new In(tn.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new In(tn.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new In(tn.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new In(tn.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new In(tn.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new In(tn.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new In(tn.paint_hillshade["hillshade-emissive-strength"])}))},nt,lt,dt)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(ot,nt,lt){return{overrideFog:!1}}},fill:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:vT||(vT=new is({"fill-sort-key":new to(tn.layout_fill["fill-sort-key"]),visibility:new In(tn.layout_fill.visibility)})),paint:_T||(_T=new is({"fill-antialias":new In(tn.paint_fill["fill-antialias"]),"fill-opacity":new to(tn.paint_fill["fill-opacity"]),"fill-color":new to(tn.paint_fill["fill-color"]),"fill-outline-color":new to(tn.paint_fill["fill-outline-color"]),"fill-translate":new In(tn.paint_fill["fill-translate"]),"fill-translate-anchor":new In(tn.paint_fill["fill-translate-anchor"]),"fill-pattern":new to(tn.paint_fill["fill-pattern"]),"fill-emissive-strength":new In(tn.paint_fill["fill-emissive-strength"])}))},nt,lt,dt)}getProgramIds(){const ot=this.paint.get("fill-pattern"),nt=ot&&ot.constantOr(1),lt=[nt?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&lt.push(nt&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),lt}getDefaultProgramParams(ot,nt,lt){return{config:new _y(this,{zoom:nt,lut:lt}),overrideFog:!1}}recalculate(ot,nt){super.recalculate(ot,nt);const lt=this.paint._values["fill-outline-color"];lt.value.kind==="constant"&&lt.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(ot){return new i1(ot)}queryRadius(){return q_(this.paint.get("fill-translate"))}queryIntersectsFeature(ot,nt,lt,dt,ft,mt){return!ot.queryGeometry.isAboveHorizon&&LS(zS(ot.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),mt.angle,ot.pixelToTileUnitsFactor),dt)}isTileClipped(){return!0}},"fill-extrusion":class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:iA||(iA=new is({visibility:new In(tn["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new In(tn["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:oA||(oA=new is({"fill-extrusion-opacity":new In(tn["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new to(tn["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new In(tn["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new In(tn["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new to(tn["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new to(tn["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new to(tn["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new In(tn["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new In(tn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new In(tn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new In(tn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new In(tn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new In(tn["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new In(tn["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new In(tn["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new to(tn["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new to(tn["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new In(tn["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new In(tn["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new In(tn["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new In(tn["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new In(tn["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new to(tn["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-line-alignment":new In(tn["paint_fill-extrusion"]["fill-extrusion-line-alignment"])}))},nt,lt,dt),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(ot){return new h1(ot)}queryRadius(){return q_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return!0}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(ot,nt,lt,dt,ft,mt,yt,Et,At){const Ct=VS(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),mt.angle,ot.pixelToTileUnitsFactor),Lt=this.paint.get("fill-extrusion-height").evaluate(nt,lt),Bt=this.paint.get("fill-extrusion-base").evaluate(nt,lt),zt=[0,0],Wt=Et&&mt.elevation,qt=mt.elevation?mt.elevation.exaggeration():1,Xt=ot.tile.getBucket(this);if(Wt&&Xt instanceof h1){const xr=Xt.centroidVertexArray,Pr=At+1;Pr<xr.length&&(zt[0]=xr.geta_centroid_pos0(Pr),zt[1]=xr.geta_centroid_pos1(Pr))}if(zt[0]===0&&zt[1]===1)return!1;mt.projection.name==="globe"&&(dt=nA([dt],[new Vn(0,0),new Vn(Ln,Ln)],ot.tileID.canonical).map(xr=>xr.polygon).flat());const Jt=Wt?Et:null,[nr,gr]=function(xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn){return xr.projection.name==="globe"?function($n,gn,En,jn,vn,Bn,Mn,kn,ao,io,Kn){const Nn=[],mo=[],oo=$n.projection.upVectorScale(Kn,$n.center.lat,$n.worldSize).metersToTile,_i=[0,0,0,1],_o=[0,0,0,1],wo=(Ro,Go,Bo,ns)=>{Ro[0]=Go,Ro[1]=Bo,Ro[2]=ns,Ro[3]=1},bo=rA();En>0&&(En+=bo),jn+=bo;for(const Ro of gn){const Go=[],Bo=[];for(const ns of Ro){const as=ns.x+vn.x,Eo=ns.y+vn.y,$a=$n.projection.projectTilePoint(as,Eo,Kn),es=$n.projection.upVector(Kn,ns.x,ns.y);let cs=En,vs=jn;if(Mn){const Rs=sA(as,Eo,En,jn,Mn,kn,ao,io);cs+=Rs.base,vs+=Rs.top}En!==0?wo(_i,$a.x+es[0]*oo*cs,$a.y+es[1]*oo*cs,$a.z+es[2]*oo*cs):wo(_i,$a.x,$a.y,$a.z),wo(_o,$a.x+es[0]*oo*vs,$a.y+es[1]*oo*vs,$a.z+es[2]*oo*vs),at.$.transformMat4(_i,_i,Bn),at.$.transformMat4(_o,_o,Bn),Go.push(new Ty(_i[0],_i[1],_i[2])),Bo.push(new Ty(_o[0],_o[1],_o[2]))}Nn.push(Go),mo.push(Bo)}return[Nn,mo]}(xr,Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn,xn):an?function($n,gn,En,jn,vn,Bn,Mn,kn,ao){const io=[],Kn=[],Nn=[0,0,0,1];for(const mo of $n){const oo=[],_i=[];for(const _o of mo){const wo=_o.x+jn.x,bo=_o.y+jn.y,Ro=sA(wo,bo,gn,En,Bn,Mn,kn,ao);Nn[0]=wo,Nn[1]=bo,Nn[2]=Ro.base,Nn[3]=1,at.aB.transformMat4(Nn,Nn,vn),Nn[3]=Math.max(Nn[3],1e-5);const Go=new Ty(Nn[0]/Nn[3],Nn[1]/Nn[3],Nn[2]/Nn[3]);Nn[0]=wo,Nn[1]=bo,Nn[2]=Ro.top,Nn[3]=1,at.aB.transformMat4(Nn,Nn,vn),Nn[3]=Math.max(Nn[3],1e-5);const Bo=new Ty(Nn[0]/Nn[3],Nn[1]/Nn[3],Nn[2]/Nn[3]);oo.push(Go),_i.push(Bo)}io.push(oo),Kn.push(_i)}return[io,Kn]}(Pr,Rr,Dr,Hr,Jr,an,Qr,yn,Cn):function($n,gn,En,jn,vn){const Bn=[],Mn=[],kn=vn[8]*gn,ao=vn[9]*gn,io=vn[10]*gn,Kn=vn[11]*gn,Nn=vn[8]*En,mo=vn[9]*En,oo=vn[10]*En,_i=vn[11]*En;for(const _o of $n){const wo=[],bo=[];for(const Ro of _o){const Go=Ro.x+jn.x,Bo=Ro.y+jn.y,ns=vn[0]*Go+vn[4]*Bo+vn[12],as=vn[1]*Go+vn[5]*Bo+vn[13],Eo=vn[2]*Go+vn[6]*Bo+vn[14],$a=vn[3]*Go+vn[7]*Bo+vn[15],es=ns+kn,cs=as+ao,vs=Eo+io,Rs=Math.max($a+Kn,1e-5),_s=ns+Nn,ys=as+mo,Bs=Eo+oo,Ms=Math.max($a+_i,1e-5);wo.push(new Ty(es/Rs,cs/Rs,vs/Rs)),bo.push(new Ty(_s/Ms,ys/Ms,Bs/Ms))}Bn.push(wo),Mn.push(bo)}return[Bn,Mn]}(Pr,Rr,Dr,Hr,Jr)}(mt,dt,Bt,Lt,Ct,yt,Jt,zt,qt,mt.center.lat,ot.tileID.canonical),pr=ot.queryGeometry;return function(xr,Pr,Rr){let Dr=1/0;LS(Rr,Pr)&&(Dr=aA(Rr,Pr[0]));for(let Hr=0;Hr<Pr.length;Hr++){const Jr=Pr[Hr],an=xr[Hr];for(let Qr=0;Qr<Jr.length-1;Qr++){const yn=Jr[Qr],Cn=[yn,Jr[Qr+1],an[Qr+1],an[Qr],yn];Yw(Rr,Cn)&&(Dr=Math.min(Dr,aA(Rr,Cn)))}}return Dr!==1/0&&Dr}(nr,gr,pr.isPointQuery()?pr.screenBounds:pr.screenGeometry)}},line:class extends Hl{constructor(ot,nt,lt,dt){const ft=gP();super(ot,ft,nt,lt,dt),ft.layout&&(this.layout=new Gs(ft.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(ot){if(ot==="line-gradient"){const nt=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=nt._styleExpression&&nt._styleExpression.expression instanceof im,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(ot,nt){super.recalculate(ot,nt),this.paint._values["line-floorwidth"]=(()=>{if($v)return $v;const lt=gP();return $v=new _$(lt.paint.properties["line-width"].specification),$v.useIntegerZoom=!0,$v})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,ot)}createBucket(ot){return new f1(ot)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(ot,nt,lt){const dt=yA(this);return{config:new _y(this,{zoom:nt,lut:lt}),defines:dt,overrideFog:!1}}queryRadius(ot){const nt=ot,lt=vP(M0("line-width",this,nt),M0("line-gap-width",this,nt)),dt=M0("line-offset",this,nt);return lt/2+Math.abs(dt)+q_(this.paint.get("line-translate"))}queryIntersectsFeature(ot,nt,lt,dt,ft,mt){if(ot.queryGeometry.isAboveHorizon)return!1;const yt=zS(ot.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),mt.angle,ot.pixelToTileUnitsFactor),Et=ot.pixelToTileUnitsFactor/2*vP(this.paint.get("line-width").evaluate(nt,lt),this.paint.get("line-gap-width").evaluate(nt,lt)),At=this.paint.get("line-offset").evaluate(nt,lt);return At&&(dt=function(Ct,Lt){const Bt=[],zt=new Vn(0,0);for(let Wt=0;Wt<Ct.length;Wt++){const qt=Ct[Wt],Xt=[];for(let Jt=0;Jt<qt.length;Jt++){const nr=qt[Jt],gr=qt[Jt+1],pr=Jt===0?zt:nr.sub(qt[Jt-1])._unit()._perp(),xr=Jt===qt.length-1?zt:gr.sub(nr)._unit()._perp(),Pr=pr._add(xr)._unit();Pr._mult(1/(Pr.x*xr.x+Pr.y*xr.y)),Xt.push(Pr._mult(Lt)._add(nr))}Bt.push(Xt)}return Bt}(dt,At*ot.pixelToTileUnitsFactor)),function(Ct,Lt,Bt){for(let zt=0;zt<Lt.length;zt++){const Wt=Lt[zt];if(Ct.length>=3){for(let qt=0;qt<Wt.length;qt++)if(mm(Ct,Wt[qt]))return!0}if(ZC(Ct,Wt,Bt))return!0}return!1}(yt,dt,Et)}isTileClipped(){return!0}isDraped(ot){const nt=this.layout.get("line-z-offset");return nt.isConstant()&&!nt.constantOr(0)}},symbol:$1,background:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:bP||(bP=new is({visibility:new In(tn.layout_background.visibility)})),paint:wP||(wP=new is({"background-color":new In(tn.paint_background["background-color"]),"background-pattern":new In(tn.paint_background["background-pattern"]),"background-opacity":new In(tn.paint_background["background-opacity"]),"background-emissive-strength":new In(tn.paint_background["background-emissive-strength"])}))},nt,lt,dt)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(ot,nt,lt){return{overrideFog:!1}}},raster:PP,"raster-particle":MP,sky:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:RP||(RP=new is({visibility:new In(tn.layout_sky.visibility)})),paint:IP||(IP=new is({"sky-type":new In(tn.paint_sky["sky-type"]),"sky-atmosphere-sun":new In(tn.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new In(tn.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new In(tn.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new In(tn.paint_sky["sky-gradient-radius"]),"sky-gradient":new Tl(tn.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new In(tn.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new In(tn.paint_sky["sky-atmosphere-color"]),"sky-opacity":new In(tn.paint_sky["sky-opacity"])}))},nt,lt,dt),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(ot){ot==="sky-gradient"?this._updateColorRamp():ot!=="sky-atmosphere-sun"&&ot!=="sky-atmosphere-halo-color"&&ot!=="sky-atmosphere-color"&&ot!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=lv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(ot){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const nt=ot.style.light.properties.get("position");return this._lightPosition.azimuthal!==nt.azimuthal||this._lightPosition.polar!==nt.polar}return!1}getCenter(ot,nt){if(this.paint.get("sky-type")==="atmosphere"){const dt=this.paint.get("sky-atmosphere-sun"),ft=!dt,mt=ot.style.light,yt=mt.properties.get("position");return ft&&mt.properties.get("anchor")==="viewport"&&Ts("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),ft?zE(yt.azimuthal,90-yt.polar,nt):zE(dt[0],90-dt[1],nt)}const lt=this.paint.get("sky-gradient-center");return zE(lt[0],90-lt[1],nt)}isSky(){return!0}markSkyboxValid(ot){this._skyboxInvalidated=!1,this._lightPosition=ot.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const ot=this.paint.get("sky-type");return ot==="atmosphere"?["skyboxCapture","skybox"]:ot==="gradient"?["skyboxGradient"]:null}},slot:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{paint:$P||($P=new is({}))},nt,null)}},model:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:UP||(UP=new is({visibility:new In(tn.layout_model.visibility),"model-id":new to(tn.layout_model["model-id"])})),paint:GP||(GP=new is({"model-opacity":new In(tn.paint_model["model-opacity"]),"model-rotation":new to(tn.paint_model["model-rotation"]),"model-scale":new to(tn.paint_model["model-scale"]),"model-translation":new to(tn.paint_model["model-translation"]),"model-color":new to(tn.paint_model["model-color"]),"model-color-mix-intensity":new to(tn.paint_model["model-color-mix-intensity"]),"model-type":new In(tn.paint_model["model-type"]),"model-cast-shadows":new In(tn.paint_model["model-cast-shadows"]),"model-receive-shadows":new In(tn.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new In(tn.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new to(tn.paint_model["model-emissive-strength"]),"model-roughness":new to(tn.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new to(tn.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new In(tn.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new In(tn.paint_model["model-front-cutoff"])}))},nt,lt,dt),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(ot){return new UE(ot)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(ot){return ot instanceof U1?Ln-1:0}queryIntersectsFeature(ot,nt,lt,dt,ft,mt){if(!this.modelManager)return!1;const yt=this.modelManager,Et=ot.tile.getBucket(this);if(!(Et&&Et instanceof UE))return!1;const At=Et;for(const Ct in At.instancesPerModel){const Lt=At.instancesPerModel[Ct],Bt=nt.id!==void 0?nt.id:nt.properties&&nt.properties.hasOwnProperty("id")?nt.properties.id:void 0;if(Lt.idToFeaturesIndex.hasOwnProperty(Bt)){const zt=Lt.features[Lt.idToFeaturesIndex[Bt]],Wt=yt.getModel(Ct,this.scope);if(!Wt)return!1;let qt=at.ae.create();const Xt=new na(0,0),Jt=At.canonical;let nr=Number.MAX_VALUE;for(let gr=0;gr<zt.instancedDataCount;++gr){const pr=16*(zt.instancedDataOffset+gr),xr=Lt.instancedDataArray.float32,Pr=[xr[pr+4],xr[pr+5],xr[pr+6]];sC(Jt,Xt,xr[pr],0|xr[pr+1]),WP(qt,Wt,mt,Xt,zt.rotation,zt.scale,Pr,!1,!1,!1),mt.projection.name==="globe"&&(qt=VE(qt,mt));const Rr=at.ae.multiply([],mt.projMatrix,qt),Dr=ot.queryGeometry,Hr=FP(Dr.isPointQuery()?Dr.screenBounds:Dr.screenGeometry,mt,Rr,Wt.aabb);Hr!=null&&(nr=Math.min(Hr,nr))}return nr!==Number.MAX_VALUE&&nr}}return!1}_handleOverridablePaintPropertyUpdate(ot,nt,lt){return!(!this.layout||nt.isDataDriven()||lt.isDataDriven()||ot!=="model-color"&&ot!=="model-color-mix-intensity"&&ot!=="model-rotation"&&ot!=="model-scale"&&ot!=="model-translation"&&ot!=="model-emissive-strength")}_isPropertyZoomDependent(ot){const nt=this._transitionablePaint._values[ot];return nt!=null&&nt.value!=null&&nt.value.expression!=null&&nt.value.expression instanceof Tr}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}queryIntersectsMatchingFeature(ot,nt,lt,dt){const ft=ot.tile,mt=ft.getBucket(this);let yt=null,Et=Number.MAX_VALUE;if(!(mt&&mt instanceof U1))return{queryFeature:yt,intersectionZ:Et};const At=mt.getNodesInfo()[nt];if(At.hiddenByReplacement||!At.node.meshes||!lt.filter(new yo(ft.tileID.overscaledZ),At.feature,ft.tileID.canonical))return{queryFeature:yt,intersectionZ:Et};const Ct=At.node,Lt=dt.calculatePosMatrix(ft.tileID.toUnwrapped(),dt.worldSize),Bt=At.evaluatedScale;let zt=0;dt.elevation&&Ct.elevation&&(zt=Ct.elevation*dt.elevation.exaggeration()),at.ae.translate(Lt,Lt,[(Ct.anchor?Ct.anchor[0]:0)*(Bt[0]-1),(Ct.anchor?Ct.anchor[1]:0)*(Bt[1]-1),zt]),at.ae.scale(Lt,Lt,Bt),at.ae.multiply(Lt,Lt,Ct.matrix);const Wt=ot.queryGeometry,qt=Wt.isPointQuery()?Wt.screenBounds:Wt.screenGeometry,Xt=function(nr){const gr=at.ae.multiply([],Lt,nr.matrix),pr=at.ae.multiply(gr,dt.expandedFarZProjMatrix,gr);for(let xr=0;xr<nr.meshes.length;++xr){const Pr=nr.meshes[xr];if(xr===nr.lightMeshIndex)continue;const Rr=FP(qt,dt,pr,Pr.aabb);Rr!=null&&(Et=Math.min(Rr,Et))}if(nr.children)for(const xr of nr.children)Xt(xr)};if(Xt(Ct),Et===Number.MAX_VALUE)return{queryFeature:yt,intersectionZ:Et};const Jt=new na(0,0);return sC(ft.tileID.canonical,Jt,At.node.anchor[0],At.node.anchor[1]),yt={type:"Feature",geometry:{type:"Point",coordinates:[Jt.lng,Jt.lat]},properties:At.feature.properties,id:At.feature.id,state:{},layer:this.serialize()},{queryFeature:yt,intersectionZ:Et}}},clip:class extends Hl{constructor(ot,nt,lt,dt){super(ot,{layout:bT||(bT=new is({"clip-layer-types":new In(tn.layout_clip["clip-layer-types"]),"clip-layer-scope":new In(tn.layout_clip["clip-layer-scope"])})),paint:wT||(wT=new is({}))},nt,lt,dt)}recalculate(ot,nt){super.recalculate(ot,nt)}createBucket(ot){return new ET(ot)}isTileClipped(){return!0}is3D(){return!0}}};Wr(fP,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});const lC=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class JE{static from(nt){if(!(nt instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[lt,dt]=new Uint8Array(nt,0,2);if(lt!==219)throw new Error("Data does not appear to be in a KDBush format.");const ft=dt>>4;if(ft!==1)throw new Error(`Got v${ft} data when expected v1.`);const mt=lC[15&dt];if(!mt)throw new Error("Unrecognized array type.");const[yt]=new Uint16Array(nt,2,1),[Et]=new Uint32Array(nt,4,1);return new JE(Et,yt,mt,nt)}constructor(nt,lt=64,dt=Float64Array,ft){if(isNaN(nt)||nt<0)throw new Error(`Unpexpected numItems value: ${nt}.`);this.numItems=+nt,this.nodeSize=Math.min(Math.max(+lt,2),65535),this.ArrayType=dt,this.IndexArrayType=nt<65536?Uint16Array:Uint32Array;const mt=lC.indexOf(this.ArrayType),yt=2*nt*this.ArrayType.BYTES_PER_ELEMENT,Et=nt*this.IndexArrayType.BYTES_PER_ELEMENT,At=(8-Et%8)%8;if(mt<0)throw new Error(`Unexpected typed array class: ${dt}.`);ft&&ft instanceof ArrayBuffer?(this.data=ft,this.ids=new this.IndexArrayType(this.data,8,nt),this.coords=new this.ArrayType(this.data,8+Et+At,2*nt),this._pos=2*nt,this._finished=!0):(this.data=new ArrayBuffer(8+yt+Et+At),this.ids=new this.IndexArrayType(this.data,8,nt),this.coords=new this.ArrayType(this.data,8+Et+At,2*nt),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+mt]),new Uint16Array(this.data,2,1)[0]=lt,new Uint32Array(this.data,4,1)[0]=nt)}add(nt,lt){const dt=this._pos>>1;return this.ids[dt]=dt,this.coords[this._pos++]=nt,this.coords[this._pos++]=lt,dt}finish(){const nt=this._pos>>1;if(nt!==this.numItems)throw new Error(`Added ${nt} items when expected ${this.numItems}.`);return QE(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(nt,lt,dt,ft){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:mt,coords:yt,nodeSize:Et}=this,At=[0,mt.length-1,0],Ct=[];for(;At.length;){const Lt=At.pop()||0,Bt=At.pop()||0,zt=At.pop()||0;if(Bt-zt<=Et){for(let Jt=zt;Jt<=Bt;Jt++){const nr=yt[2*Jt],gr=yt[2*Jt+1];nr>=nt&&nr<=dt&&gr>=lt&&gr<=ft&&Ct.push(mt[Jt])}continue}const Wt=zt+Bt>>1,qt=yt[2*Wt],Xt=yt[2*Wt+1];qt>=nt&&qt<=dt&&Xt>=lt&&Xt<=ft&&Ct.push(mt[Wt]),(Lt===0?nt<=qt:lt<=Xt)&&(At.push(zt),At.push(Wt-1),At.push(1-Lt)),(Lt===0?dt>=qt:ft>=Xt)&&(At.push(Wt+1),At.push(Bt),At.push(1-Lt))}return Ct}within(nt,lt,dt){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ft,coords:mt,nodeSize:yt}=this,Et=[0,ft.length-1,0],At=[],Ct=dt*dt;for(;Et.length;){const Lt=Et.pop()||0,Bt=Et.pop()||0,zt=Et.pop()||0;if(Bt-zt<=yt){for(let Jt=zt;Jt<=Bt;Jt++)uC(mt[2*Jt],mt[2*Jt+1],nt,lt)<=Ct&&At.push(ft[Jt]);continue}const Wt=zt+Bt>>1,qt=mt[2*Wt],Xt=mt[2*Wt+1];uC(qt,Xt,nt,lt)<=Ct&&At.push(ft[Wt]),(Lt===0?nt-dt<=qt:lt-dt<=Xt)&&(Et.push(zt),Et.push(Wt-1),Et.push(1-Lt)),(Lt===0?nt+dt>=qt:lt+dt>=Xt)&&(Et.push(Wt+1),Et.push(Bt),Et.push(1-Lt))}return At}}function QE(ot,nt,lt,dt,ft,mt){if(ft-dt<=lt)return;const yt=dt+ft>>1;cC(ot,nt,yt,dt,ft,mt),QE(ot,nt,lt,dt,yt-1,1-mt),QE(ot,nt,lt,yt+1,ft,1-mt)}function cC(ot,nt,lt,dt,ft,mt){for(;ft>dt;){if(ft-dt>600){const Ct=ft-dt+1,Lt=lt-dt+1,Bt=Math.log(Ct),zt=.5*Math.exp(2*Bt/3),Wt=.5*Math.sqrt(Bt*zt*(Ct-zt)/Ct)*(Lt-Ct/2<0?-1:1);cC(ot,nt,lt,Math.max(dt,Math.floor(lt-Lt*zt/Ct+Wt)),Math.min(ft,Math.floor(lt+(Ct-Lt)*zt/Ct+Wt)),mt)}const yt=nt[2*lt+mt];let Et=dt,At=ft;for(Fv(ot,nt,dt,lt),nt[2*ft+mt]>yt&&Fv(ot,nt,dt,ft);Et<At;){for(Fv(ot,nt,Et,At),Et++,At--;nt[2*Et+mt]<yt;)Et++;for(;nt[2*At+mt]>yt;)At--}nt[2*dt+mt]===yt?Fv(ot,nt,dt,At):(At++,Fv(ot,nt,At,ft)),At<=lt&&(dt=At+1),lt<=At&&(ft=At-1)}}function Fv(ot,nt,lt,dt){eS(ot,lt,dt),eS(nt,2*lt,2*dt),eS(nt,2*lt+1,2*dt+1)}function eS(ot,nt,lt){const dt=ot[nt];ot[nt]=ot[lt],ot[lt]=dt}function uC(ot,nt,lt,dt){const ft=ot-lt,mt=nt-dt;return ft*ft+mt*mt}at.A=p0,at.B=dy,at.C=ga,at.D=cy,at.E=xp,at.F=$l,at.H=Ru,at.I=Py,at.J=Zt,at.K=Ft,at.L=function(ot){const nt=ot.value;let lt=[];if(!nt)return lt;const dt=Xu(nt);return dt!=="string"?(lt=lt.concat([new L1(ot.key,nt,`string expected, "${dt}" found`)]),lt):(BP(nt,!0)||(lt=lt.concat([new L1(ot.key,nt,`invalid url "${nt}"`)])),lt)},at.M=class{constructor(ot,nt,lt,dt){this.id=ot,this.position=nt!=null?new na(nt[0],nt[1]):new na(0,0),this.orientation=lt??[0,0,0],this.nodes=dt,this.uploaded=!1,this.aabb=new fs([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(ot,nt){if(at.ae.multiply(ot.matrix,nt,ot.matrix),ot.meshes)for(const lt of ot.meshes){const dt=fs.applyTransformFast(lt.aabb,ot.matrix);this.aabb.encapsulate(dt)}if(ot.children)for(const lt of ot.children)this._applyTransformations(lt,ot.matrix)}computeBoundsAndApplyParent(){const ot=at.ae.identity([]);for(const nt of this.nodes)this._applyTransformations(nt,ot)}computeModelMatrix(ot,nt,lt,dt,ft,mt,yt=!1){WP(this.matrix,this,ot.transform,this.position,nt,lt,dt,ft,mt,yt)}upload(ot){if(!this.uploaded){for(const nt of this.nodes)GE(nt,ot);for(const nt of this.nodes)N1(nt);this.uploaded=!0}}destroy(){for(const ot of this.nodes)WE(ot)}},at.N=tn,at.O=Qs,at.P=Vn,at.Q=Zs,at.R=Wm,at.S=Ow,at.T=vu,at.U=is,at.V=L1,at.W=In,at.X=class{constructor(ot){this.specification=ot}possiblyEvaluate(ot,nt){return Gp(ot.expression.evaluate(nt))}interpolate(ot,nt,lt){return{x:ho(ot.x,nt.x,lt),y:ho(ot.y,nt.y,lt),z:ho(ot.z,nt.z,lt),azimuthal:ho(ot.azimuthal,nt.azimuthal,lt),polar:ho(ot.polar,nt.polar,lt)}}},at.Y=yo,at.Z=Tr,at._=Al,at.a=tu,at.a$=tE,at.a0=dx,at.a1=Gs,at.a2=$p,at.a3=ho,at.a4=Ln,at.a5=Rx,at.a6=class{constructor(ot){this.specification=ot}possiblyEvaluate(ot,nt){return function([lt,dt]){const ft=Gp([1,lt,dt]);return{x:ft.x,y:ft.y,z:ft.z}}(ot.expression.evaluate(nt))}interpolate(ot,nt,lt){return{x:ho(ot.x,nt.x,lt),y:ho(ot.y,nt.y,lt),z:ho(ot.z,nt.z,lt)}}},at.a7=rv,at.a8=G_,at.a9=Cp,at.aA=function(ot,nt,lt){ot[4*nt+0]=lt[0],ot[4*nt+1]=lt[1],ot[4*nt+2]=lt[2],ot[4*nt+3]=lt[3]},at.aC=function(ot,nt){const{x:lt,y:dt}=ot.point,ft=tT(lt,dt,ot.worldSize/ot._pixelsPerMercatorPixel,0,0);return at.ae.multiply(ft,ft,oE(rp(nt)))},at.aE=F0,at.aF=cu,at.aG=g1,at.aH=function(ot,nt,lt,dt,ft){const mt=5*nt+2;ot.float32[mt+0]=lt,ot.float32[mt+1]=dt,ot.float32[mt+2]=ft},at.aI=P1,at.aJ=na,at.aK=rP,at.aL=IS,at.aM=rE,at.aN=jP,at.aO=wy,at.aP=JS,at.aQ=js,at.aR=function(ot,nt,lt,dt,ft,mt,yt,Et,At){if(At.name==="globe")return JS(ot,nt,new wy(lt,dt,ft),!1);const Ct=Ay({z:lt,x:dt,y:ft},At);return new fs([(mt+Ct.x/Ct.scale)*nt,nt*(Ct.y/Ct.scale),yt],[(mt+Ct.x2/Ct.scale)*nt,nt*(Ct.y2/Ct.scale),Et])},at.aS=function(ot,nt,lt){let dt=0;for(let ft=0;ft<2;++ft)ot[ft]>0&&(dt+=(ot[ft]-0)*(ot[ft]-0)),nt[ft]<0&&(dt+=(0-nt[ft])*(0-nt[ft]));return dt},at.aT=Cs,at.aU=eE,at.aV=kS,at.aW=function(ot){const nt=at.ae.identity(new Float64Array(16));at.ae.multiply(nt,ot.pixelMatrix,ot.globeMatrix);const lt=[0,yu,0],dt=[0,xu,0];return at.$.transformMat4(lt,lt,nt),at.$.transformMat4(dt,dt,nt),[lt[0]>0&&lt[0]<=ot.width&&lt[1]>0&&lt[1]<=ot.height&&!sE(ot,new na(ot.center.lat,90)),dt[0]>0&&dt[0]<=ot.width&&dt[1]>0&&dt[1]<=ot.height&&!sE(ot,new na(ot.center.lat,-90))]},at.aX=function(ot,nt){const{scale:lt}=ot.tileTransform,dt=lt*Ln/(ot.tileSize*Math.pow(2,nt.zoom-ot.tileID.overscaledZ+ot.tileID.canonical.z));return at.aD.scale(new Float32Array(4),nt.inverseAdjustmentMatrix,[dt,dt])},at.aY=j1,at.aZ=OP,at.a_=function(ot){const nt=OP(ot,!0);return at.aD.invert([],[nt[0],nt[1],nt[4],nt[5]])},at.aa=PS,at.ab=Ml,at.ac=zo,at.ad=function(ot,nt,lt){const dt=Math.sqrt(ot*ot+nt*nt+lt*lt),ft=dt>0?Math.acos(lt/dt)*zp:0;let mt=ot!==0||nt!==0?Math.atan2(-nt,-ot)*zp+90:0;return mt<0&&(mt+=360),[dt,mt,ft]},at.af=W0,at.ag=Lu,at.ah=IE,at.ai=function(ot,nt){const lt={};for(let dt=0;dt<nt.length;dt++){const ft=nt[dt];ft in ot&&(lt[ft]=ot[ft])}return lt},at.aj=pm,at.ak=ep,at.al=tp,at.am=uS,at.an=function(ot){qy++,qy>xx&&(ot.getActor().send("enforceCacheSizeLimit",yx),qy=0)},at.ao=Sx,at.ap=class{constructor(ot){this.entries={},this.scheduler=ot}request(ot,nt,lt,dt){const ft=this.entries[ot]=this.entries[ot]||{callbacks:[]};if(ft.result){const[mt,yt]=ft.result;return this.scheduler?this.scheduler.add(()=>{dt(mt,yt)},nt):dt(mt,yt),()=>{}}return ft.callbacks.push(dt),ft.cancel||(ft.cancel=lt((mt,yt)=>{ft.result=[mt,yt];for(const Et of ft.callbacks)this.scheduler?this.scheduler.add(()=>{Et(mt,yt)},nt):Et(mt,yt);setTimeout(()=>delete this.entries[ot],3e3)})),()=>{ft.result||(ft.callbacks=ft.callbacks.filter(mt=>mt!==dt),ft.callbacks.length||(ft.cancel(),delete this.entries[ot]))}}},at.aq=function(ot,nt,lt){const dt=JSON.stringify(ot.request);return ot.data&&(this.deduped.entries[dt]={result:[null,ot.data]}),this.deduped.request(dt,{type:"parseTile",isSymbolTile:ot.isSymbolTile,zoom:ot.tileZoom},ft=>{const mt=pp(ot.request,(yt,Et,At,Ct)=>{yt?ft(yt):Et&&ft(null,{vectorTile:lt?void 0:new pE(new yv(Et)),rawData:Et,cacheControl:At,expires:Ct})});return()=>{mt.cancel(),ft()}},nt)},at.ar=Nw,at.as=class extends Pp{constructor(ot){super(ot),this.current=MC}set(ot,nt,lt){if(this.fetchUniformLocation(ot,nt)){for(let dt=0;dt<9;dt++)if(lt[dt]!==this.current[dt]){this.current=lt,this.gl.uniformMatrix3fv(this.location,!1,lt);break}}}},at.at=Fw,at.au=jo,at.av=Vp,at.ax=Yu,at.ay=Dl,at.az=Ws,at.b=ms,at.b$=zC,at.b0=function(ot){const{x:nt,y:lt}=ot.point,{lng:dt,lat:ft}=ot._center;return tT(nt,lt,ot.worldSize,dt,ft)},at.b1=Cl,at.b2=I0,at.b3=Vw,at.b4=function(ot){const nt=Math.round((ot+45+360)%360/90)%4;return Om[nt]},at.b5=45,at.b6=Ww,at.b7=W_,at.b8=fs,at.b9=Gp,at.bA=I1,at.bB=uT,at.bC=function(ot,nt){return[Math.pow(ot[0],2.2)*nt,Math.pow(ot[1],2.2)*nt,Math.pow(ot[2],2.2)*nt]},at.bD=pA,at.bF=eT,at.bG=Kv,at.bH=qv,at.bI=256,at.bJ=function(ot,nt){const lt=[0,0,0],dt=sv(rp(nt.canonical));return at.$.transformMat4(lt,lt,dt),at.$.transformMat4(lt,lt,ot),lt},at.bK=ot=>({u_camera_to_center_distance:new Ml(ot),u_extrude_scale:new Bw(ot),u_device_pixel_ratio:new Ml(ot),u_matrix:new rv(ot),u_inv_rot_matrix:new rv(ot),u_merc_center:new Cp(ot),u_tile_id:new Nw(ot),u_zoom_transition:new Ml(ot),u_up_dir:new Nw(ot),u_emissive_strength:new Ml(ot)}),at.bL=ot=>({u_matrix:new rv(ot),u_pixels_to_tile_units:new Bw(ot),u_device_pixel_ratio:new Ml(ot),u_units_to_pixels:new Cp(ot),u_dash_image:new G_(ot),u_gradient_image:new G_(ot),u_image_height:new Ml(ot),u_texsize:new Cp(ot),u_tile_units_to_pixels:new Ml(ot),u_alpha_discard_threshold:new Ml(ot),u_trim_offset:new Cp(ot),u_trim_fade_range:new Cp(ot),u_trim_color:new Fw(ot),u_emissive_strength:new Ml(ot)}),at.bM=ot=>({u_matrix:new rv(ot),u_texsize:new Cp(ot),u_pixels_to_tile_units:new Bw(ot),u_device_pixel_ratio:new Ml(ot),u_image:new G_(ot),u_units_to_pixels:new Cp(ot),u_tile_units_to_pixels:new Ml(ot),u_alpha_discard_threshold:new Ml(ot),u_trim_offset:new Cp(ot)}),at.bN=Pw,at.bO=tI,at.bP=_l,at.bQ=xI,at.bR=ZA,at.bS=wE,at.bT=iT,at.bU=(ot,nt,lt,dt,ft,mt)=>{const yt=ot.transform,Et=yt.projection.name==="globe";let At;if(mt.paint.get("circle-pitch-alignment")==="map")if(Et){const Lt=eT(yt.zoom,nt.canonical)*yt._pixelsPerMercatorPixel;At=Float32Array.from([Lt,0,0,Lt])}else At=yt.calculatePixelsToTileUnitsMatrix(lt);else At=new Float32Array([yt.pixelsToGLUnits[0],0,0,yt.pixelsToGLUnits[1]]);const Ct={u_camera_to_center_distance:ot.transform.getCameraToCenterDistance(yt.projection),u_matrix:ot.translatePosMatrix(nt.projMatrix,lt,mt.paint.get("circle-translate"),mt.paint.get("circle-translate-anchor")),u_device_pixel_ratio:Ys.devicePixelRatio,u_extrude_scale:At,u_inv_rot_matrix:eR,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:mt.paint.get("circle-emissive-strength")};if(Et){Ct.u_inv_rot_matrix=dt,Ct.u_merc_center=ft,Ct.u_tile_id=[nt.canonical.x,nt.canonical.y,1<<nt.canonical.z],Ct.u_zoom_transition=$p(yt.zoom);const Lt=ft[0]*Ln,Bt=ft[1]*Ln;Ct.u_up_dir=yt.projection.upVector(new wy(0,0,0),Lt,Bt)}return Ct},at.bV=yA,at.bW=(ot,nt,lt,dt,ft,mt)=>{const yt=ot.transform;return{u_matrix:gA(ot,nt,lt,dt),u_texsize:nt.imageAtlasTexture?nt.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:yt.calculatePixelsToTileUnitsMatrix(nt),u_device_pixel_ratio:ft,u_image:0,u_tile_units_to_pixels:mA(nt,yt),u_units_to_pixels:[1/yt.pixelsToGLUnits[0],1/yt.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:mt}},at.bX=(ot,nt,lt,dt,ft,mt,yt)=>{const Et=ot.transform,At=Et.calculatePixelsToTileUnitsMatrix(nt);return{u_matrix:gA(ot,nt,lt,dt),u_pixels_to_tile_units:At,u_device_pixel_ratio:mt,u_units_to_pixels:[1/Et.pixelsToGLUnits[0],1/Et.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:ft,u_texsize:xA(lt)&&nt.lineAtlasTexture?nt.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:mA(nt,ot.transform),u_alpha_discard_threshold:0,u_trim_offset:yt,u_trim_fade_range:lt.paint.get("line-trim-fade-range"),u_trim_color:lt.paint.get("line-trim-color").toRenderColor(lt.lut).toArray01(),u_emissive_strength:lt.paint.get("line-emissive-strength")}},at.bY=fp,at.bZ=lv,at.b_=rA,at.ba=function(ot){return[Math.pow(ot[0],1/2.2),Math.pow(ot[1],1/2.2),Math.pow(ot[2],1/2.2)]},at.bb=By,at.bc=function(ot,nt,lt){const dt=$p(lt.zoom),ft=ot.style.map._antialias,mt=nt.options.extStandardDerivativesForceOff||ot.terrain&&ot.terrain.exaggeration()>0;return dt===0&&!ft&&!mt},at.bd=function(ot){const nt=ot.pixelsPerMeter,lt=nt/Dl(1,ot.center.lat),dt=at.ae.identity(new Float64Array(16));return at.ae.translate(dt,dt,[ot.point.x,ot.point.y,0]),at.ae.scale(dt,dt,[lt,lt,nt]),Float32Array.from(dt)},at.be=X_,at.bf=function(ot){const nt=Cs-5;ot=jo(ot,-nt,nt)/nt*90;const lt=Math.pow(Math.abs(Math.sin(zo(ot))),3);return Math.round(lt*(Uw.length-1))},at.bg=function(ot,nt,lt,dt){const ft=nt.getNorth(),mt=nt.getSouth(),yt=nt.getWest(),Et=nt.getEast(),At=1<<ot.z,Ct=Et-yt,Lt=ft-mt,Bt=Ct/C0,zt=-Lt/Uw[lt],Wt=[0,Bt,0,zt,0,0,ft,yt,0];if(ot.z>0){const qt=180/dt;at.bE.multiply(Wt,Wt,[qt/Ct+1,0,0,0,qt/Lt+1,0,-.5*qt/Bt,.5*qt/zt,1])}return Wt[2]=At,Wt[5]=ot.x,Wt[8]=ot.y,Wt},at.bh=sv,at.bi=rp,at.bj=function(ot,nt,lt){const dt=at.ae.identity(new Float64Array(16)),ft=(nt/(1<<ot)-.5)*Math.PI*2;return at.ae.rotateY(dt,lt.globeMatrix,ft),Float32Array.from(dt)},at.bk=mx,at.bl=function(ot){return ot<=1?1:Math.pow(2,Math.floor(Math.log(ot)/Math.LN2))},at.bm=PP,at.bn=MP,at.bo=AP,at.bp=function(ot,nt){const lt=document.createElement("video");lt.muted=!0,lt.onloadstart=function(){nt(null,lt)};for(let dt=0;dt<ot.length;dt++){const ft=document.createElement("source");K1(ot[dt])||(lt.crossOrigin="Anonymous"),ft.src=ot[dt],lt.appendChild(ft)}return{cancel:()=>{}}},at.bq=C1,at.br=Uy,at.bs=class{isDataAvailableAtPoint(ot){const nt=this._source();if(this.isUsingMockSource()||!nt||ot.y<0||ot.y>1)return!1;const lt=nt.getSource().maxzoom,dt=1<<lt,ft=Math.floor(ot.x),mt=Math.floor((ot.x-ft)*dt),yt=Math.floor(ot.y*dt),Et=this.findDEMTileFor(new js(lt,ft,lt,mt,yt));return!(!Et||!Et.dem)}getAtPointOrZero(ot,nt=0){return this.getAtPoint(ot,nt)||0}getAtPoint(ot,nt,lt=!0){if(this.isUsingMockSource())return null;nt==null&&(nt=null);const dt=this._source();if(!dt||ot.y<0||ot.y>1)return nt;const ft=dt.getSource().maxzoom,mt=1<<ft,yt=Math.floor(ot.x),Et=ot.x-yt,At=new js(ft,yt,ft,Math.floor(Et*mt),Math.floor(ot.y*mt)),Ct=this.findDEMTileFor(At);if(!Ct||!Ct.dem)return nt;const Lt=Ct.dem,Bt=1<<Ct.tileID.canonical.z,zt=(Et*Bt-Ct.tileID.canonical.x)*Lt.dim,Wt=(ot.y*Bt-Ct.tileID.canonical.y)*Lt.dim,qt=Math.floor(zt),Xt=Math.floor(Wt);return(lt?this.exaggeration():1)*ho(ho(Lt.get(qt,Xt),Lt.get(qt,Xt+1),Wt-Xt),ho(Lt.get(qt+1,Xt),Lt.get(qt+1,Xt+1),Wt-Xt),zt-qt)}getAtTileOffset(ot,nt,lt){const dt=1<<ot.canonical.z;return this.getAtPointOrZero(new Al(ot.wrap+(ot.canonical.x+nt/Ln)/dt,(ot.canonical.y+lt/Ln)/dt))}getAtTileOffsetFunc(ot,nt,lt,dt){return ft=>{const mt=this.getAtTileOffset(ot,ft.x,ft.y),yt=dt.upVector(ot.canonical,ft.x,ft.y),Et=dt.upVectorScale(ot.canonical,nt,lt).metersToTile;return at.$.scale(yt,yt,mt*Et),yt}}getForTilePoints(ot,nt,lt,dt){if(this.isUsingMockSource())return!1;const ft=D0.create(this,ot,dt);return!!ft&&(nt.forEach(mt=>{mt[2]=this.exaggeration()*ft.getElevationAt(mt[0],mt[1],lt)}),!0)}getMinMaxForTile(ot){if(this.isUsingMockSource())return null;const nt=this.findDEMTileFor(ot);if(!nt||!nt.dem)return null;const lt=nt.dem.tree,dt=nt.tileID,ft=1<<ot.canonical.z-dt.canonical.z;let mt=ot.canonical.x/ft-dt.canonical.x,yt=ot.canonical.y/ft-dt.canonical.y,Et=0;for(let At=0;At<ot.canonical.z-dt.canonical.z&&!lt.leaves[Et];At++){mt*=2,yt*=2;const Ct=2*Math.floor(yt)+Math.floor(mt);Et=lt.childOffsets[Et]+Ct,mt%=1,yt%=1}return{min:this.exaggeration()*lt.minimums[Et],max:this.exaggeration()*lt.maximums[Et]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(ot,nt,lt){throw new Error("Pure virtual method called.")}pointCoordinate(ot){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(ot){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const ot=this.visibleDemTiles;if(ot.length===0)return null;let nt=!1,lt=Number.MAX_VALUE,dt=Number.MIN_VALUE;for(const ft of ot){const mt=this.getMinMaxForTile(ft.tileID);mt&&(lt=Math.min(lt,mt.min),dt=Math.max(dt,mt.max),nt=!0)}return nt?{min:lt,max:dt}:null}},at.bt=ov,at.bu=Y_,at.bv=$u,at.bw=Fs,at.bx=Cy,at.by=q0,at.bz=F1,at.c=rC,at.c$=function(ot,nt,lt,dt){return ot.type==="custom"?new w$(ot,nt):new Z$[ot.type](ot,nt,lt,dt)},at.c0=h1,at.c1=xm,at.c2=450,at.c3=7,at.c4=b$,at.c5=pP,at.c6=256,at.c7=YS,at.c8=oE,at.c9=ba,at.cA=BS,at.cB=function(ot,nt,lt=0){return at.$.fromValues(((nt.x-lt)*ot.scale-ot.x)*Ln,(nt.y*ot.scale-ot.y)*Ln,$S(nt.z,nt.y))},at.cC=function(ot){let nt=1/0,lt=1/0,dt=-1/0,ft=-1/0;for(const mt of ot)nt=Math.min(nt,mt.x),lt=Math.min(lt,mt.y),dt=Math.max(dt,mt.x),ft=Math.max(ft,mt.y);return{min:new Vn(nt,lt),max:new Vn(dt,ft)}},at.cD=mm,at.cE=jS,at.cF=Ol,at.cG=["type","source","source-layer","minzoom","maxzoom","filter","layout"],at.cH=BA,at.cI=Yw,at.cJ=RT,at.cK=jT,at.cL=DT,at.cM=AE,at.cN=JE,at.cO=function(ot){return ot({pluginStatus:rs,pluginURL:Uo}),Do.on("pluginStateChange",ot),ot},at.cP=z0,at.cQ=SE,at.cR=_x,at.cS=ts,at.cT=kt,at.cU=gx,at.cV=Jy,at.cW=Rl,at.cX=function(ot){const nt=ot.indexOf(L_);return nt>=0?ot.slice(0,nt):ot},at.cY=function(ot){return ot.indexOf(L_)>=0},at.cZ=function(ot){const nt=ot.indexOf(L_);return nt>=0?ot.slice(nt+1):""},at.c_=function(ot){const nt=[],lt=ot.id;return lt===void 0&&nt.push({message:`layers.${lt}: missing required property "id"`}),ot.render===void 0&&nt.push({message:`layers.${lt}: missing required method "render"`}),ot.renderingMode&&ot.renderingMode!=="2d"&&ot.renderingMode!=="3d"&&nt.push({message:`layers.${lt}: property "renderingMode" must be either "2d" or "3d"`}),nt},at.ca=cm,at.cb=vy,at.cc=1,at.cd=Av,at.ce=0,at.cf=Iw,at.cg=function(ot,nt,lt,dt,ft){return jo((ot-nt)/(lt-nt)*(ft-dt)+dt,dt,ft)},at.ch=O_,at.ci=Ey,at.cj=class{constructor(ot,nt,lt,dt){this.context=ot,this.format=dt,this.size=lt,this.texture=ot.gl.createTexture();const[ft,mt,yt]=this.size,{gl:Et}=ot;Et.bindTexture(Et.TEXTURE_3D,this.texture),ot.pixelStoreUnpackFlipY.set(!1),ot.pixelStoreUnpack.set(1),ot.pixelStoreUnpackPremultiplyAlpha.set(!1);let At=this.format,Ct=Et.UNSIGNED_BYTE;this.format===Et.DEPTH_COMPONENT&&(At=Et.DEPTH_COMPONENT16,Ct=Et.UNSIGNED_SHORT),this.format===Et.R8&&(dt=Et.RED),this.format===Et.R32F&&(Ct=Et.FLOAT,dt=Et.RED),Et.texImage3D(Et.TEXTURE_3D,0,At,ft,mt,yt,0,dt,Ct,nt.data)}bind(ot,nt){const{context:lt}=this,{gl:dt}=lt;dt.bindTexture(dt.TEXTURE_3D,this.texture),ot!==this.minFilter&&(dt.texParameteri(dt.TEXTURE_3D,dt.TEXTURE_MAG_FILTER,ot),dt.texParameteri(dt.TEXTURE_3D,dt.TEXTURE_MIN_FILTER,ot),this.minFilter=ot),nt!==this.wrapS&&(dt.texParameteri(dt.TEXTURE_3D,dt.TEXTURE_WRAP_S,nt),dt.texParameteri(dt.TEXTURE_3D,dt.TEXTURE_WRAP_T,nt),this.wrapS=nt)}destroy(){const{gl:ot}=this.context;ot.deleteTexture(this.texture),this.texture=null}},at.ck=VE,at.cl=[1,1,1],at.cm=D0,at.cn=Z0,at.co=dm,at.cp=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Vn(1/0,1/0),max:new Vn(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(ot,nt=!1){const lt=$T(new Vn(0,0),new Vn(Ln,Ln),ot),dt=[];if(nt&&!mE(lt,this._globalClipBounds))return dt;for(const ft of this._activeRegions){if(ft.hiddenByOverlap||!mE(lt,ft))continue;const mt=RR(ft.min,ft.max,ot);dt.push({min:mt.min,max:mt.max,sourceId:this._sourceIds[ft.priority],footprint:ft.footprint,footprintTileId:ft.tileId,order:ft.order,clipMask:ft.clipMask,clipScope:ft.clipScope})}return dt}setSources(ot){this._setSources(ot.map(nt=>({getSourceId:()=>nt.cache.id,getFootprints:()=>{const lt=[];for(const dt of nt.cache.getVisibleCoordinates()){const ft=nt.cache.getTile(dt).buckets[nt.layer];ft&&ft.updateFootprints(dt.toUnwrapped(),lt)}return lt},getOrder:()=>nt.order,getClipMask:()=>nt.clipMask,getClipScope:()=>nt.clipScope})))}_addSource(ot){const nt=ot.getFootprints();if(nt.length===0)return;const lt=ot.getOrder(),dt=ot.getClipMask(),ft=ot.getClipScope();for(const mt of nt){if(!mt.footprint)continue;const yt=$T(mt.footprint.min,mt.footprint.max,mt.id);this._activeRegions.push({min:yt.min,max:yt.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:mt.id,footprint:mt.footprint,order:lt,clipMask:dt,clipScope:ft})}this._sourceIds.push(ot.getSourceId())}_computeReplacement(){this._activeRegions.sort((nt,lt)=>nt.priority-lt.priority||c1(nt.min,lt.min)||c1(nt.max,lt.max)||nt.order-lt.order||nt.clipMask-lt.clipMask||function(dt,ft){const mt=(yt,Et)=>yt+Et;return dt.length-ft.length||dt.reduce(mt,"").localeCompare(ft.reduce(mt,""))}(nt.clipScope,lt.clipScope));let ot=this._activeRegions.length!==this._prevRegions.length;if(!ot){let nt=0;for(;!ot&&nt!==this._activeRegions.length;){const lt=this._activeRegions[nt],dt=this._prevRegions[nt];ot=lt.priority!==dt.priority||!IT(lt,dt)||lt.order!==dt.order||lt.clipMask!==dt.clipMask||!Bp(lt.clipScope,dt.clipScope),++nt}}if(ot){++this._updateTime;for(const lt of this._activeRegions)lt.order!==l1&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,lt.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,lt.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,lt.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,lt.max.y));const nt=lt=>{const dt=this._activeRegions;if(lt>=dt.length)return lt;const ft=dt[lt].priority;for(;lt<dt.length&&dt[lt].priority===ft;)++lt;return lt};if(this._sourceIds.length>1){let lt=0,dt=nt(lt);for(;lt!==dt;){let ft=lt;const mt=lt;for(;ft!==dt;){const yt=this._activeRegions[ft];yt.hiddenByOverlap=!1;for(let Et=0;Et<mt;Et++){const At=this._activeRegions[Et];if(!At.hiddenByOverlap&&yt.order===l1&&mE(yt,At)&&(yt.hiddenByOverlap=OT(yt.footprint,yt.tileId,At.footprint,At.tileId),yt.hiddenByOverlap))break}++ft}lt=dt,dt=nt(lt)}}}}_setSources(ot){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let nt=ot.length-1;nt>=0;nt--)this._addSource(ot[nt]);this._computeReplacement()}},at.cq=Ap,at.cr=R1,at.cs=Qx,at.ct=class{constructor(ot){this._createGrid(ot),this._createPoles(ot)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const ot of this._poleSegments)ot.destroy();for(const ot of this._gridSegments)ot.withSkirts.destroy(),ot.withoutSkirts.destroy()}_fillGridMeshWithLods(ot,nt){const lt=new $u,dt=new Fs,ft=[],mt=ot+1+2,yt=nt[0]+1,Et=nt[0]+1+(1+nt.length),At=(Ct,Lt,Bt)=>{let zt=Ct===mt-1?Ct-2:Ct===0?Ct:Ct-1;return zt+=Bt?24575:0,[zt,Lt]};for(let Ct=0;Ct<mt;++Ct)lt.emplaceBack(...At(Ct,0,!0));for(let Ct=0;Ct<yt;++Ct)for(let Lt=0;Lt<mt;++Lt)lt.emplaceBack(...At(Lt,Ct,(Lt===0||Lt===mt-1)&&!0));for(let Ct=0;Ct<nt.length;++Ct){const Lt=nt[Ct];for(let Bt=0;Bt<mt;++Bt)lt.emplaceBack(...At(Bt,Lt,!0))}for(let Ct=0;Ct<nt.length;++Ct){const Lt=dt.length,Bt=nt[Ct]+1+2,zt=new Fs;for(let Xt=0;Xt<Bt-1;Xt++){const Jt=Xt===Bt-2,nr=Jt?mt*(Et-nt.length+Ct-Xt):mt;for(let gr=0;gr<mt-1;gr++){const pr=Xt*mt+gr;Xt===0||Jt||gr===0||gr===mt-2?(zt.emplaceBack(pr+1,pr,pr+nr),zt.emplaceBack(pr+nr,pr+nr+1,pr+1)):(dt.emplaceBack(pr+1,pr,pr+nr),dt.emplaceBack(pr+nr,pr+nr+1,pr+1))}}const Wt=ms.simpleSegment(0,Lt,lt.length,dt.length-Lt);for(let Xt=0;Xt<zt.uint16.length;Xt+=3)dt.emplaceBack(zt.uint16[Xt],zt.uint16[Xt+1],zt.uint16[Xt+2]);const qt=ms.simpleSegment(0,Lt,lt.length,dt.length-Lt);ft.push({withoutSkirts:Wt,withSkirts:qt})}return{vertices:lt,indices:dt,segments:ft}}_createGrid(ot){const nt=this._fillGridMeshWithLods(C0,Uw);this._gridSegments=nt.segments,this._gridBuffer=ot.createVertexBuffer(nt.vertices,ov.members),this._gridIndexBuffer=ot.createIndexBuffer(nt.indices,!0)}_createPoles(ot){const nt=new Fs;for(let yt=0;yt<=C0;yt++)nt.emplaceBack(0,yt+1,yt+2);this._poleIndexBuffer=ot.createIndexBuffer(nt,!0);const lt=new vy,dt=new vy,ft=new vy,mt=new vy;this._poleSegments=[];for(let yt=0,Et=0;yt<Vw;yt++){const At=360/(1<<yt);lt.emplaceBack(0,-Ol,0,.5,0),dt.emplaceBack(0,-Ol,0,.5,1),ft.emplaceBack(0,-Ol,0,.5,.5),mt.emplaceBack(0,-Ol,0,.5,.5);for(let Ct=0;Ct<=C0;Ct++){let Lt=Ct/C0,Bt=0;const zt=ho(0,At,Lt),[Wt,qt,Xt]=k0(QC,_k,zt,Ol);lt.emplaceBack(Wt,qt,Xt,Lt,Bt),dt.emplaceBack(Wt,qt,Xt,Lt,1-Bt);const Jt=zo(zt);Lt=.5+.5*Math.sin(Jt),Bt=.5+.5*Math.cos(Jt),ft.emplaceBack(Wt,qt,Xt,Lt,Bt),mt.emplaceBack(Wt,qt,Xt,Lt,1-Bt)}this._poleSegments.push(ms.simpleSegment(Et,0,66,64)),Et+=66}this._poleNorthVertexBuffer=ot.createVertexBuffer(lt,K_,!1),this._poleSouthVertexBuffer=ot.createVertexBuffer(dt,K_,!1),this._texturedPoleNorthVertexBuffer=ot.createVertexBuffer(ft,K_,!1),this._texturedPoleSouthVertexBuffer=ot.createVertexBuffer(mt,K_,!1)}getGridBuffers(ot,nt){return[this._gridBuffer,this._gridIndexBuffer,nt?this._gridSegments[ot].withSkirts:this._gridSegments[ot].withoutSkirts]}getPoleBuffers(ot,nt){return[nt?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,nt?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[ot]]}},at.cu=function(ot){return Ym.has(ot)},at.cv=l1,at.cw=GT,at.cx=function(ot,nt,lt=0,dt=!0){const ft=new Vn(lt,lt),mt=ot.sub(ft),yt=nt.add(ft),Et=[mt,new Vn(yt.x,mt.y),yt,new Vn(mt.x,yt.y)];return dt&&Et.push(mt.clone()),Et},at.cy=function(ot,nt){const lt=[];for(let dt=0;dt<ot.length;dt++){const ft=Vp(dt-1,-1,ot.length-1),mt=Vp(dt+1,-1,ot.length-1),yt=ot[dt],Et=ot[mt],At=ot[ft].sub(yt).unit(),Ct=Et.sub(yt).unit(),Lt=Ct.angleWithSep(At.x,At.y),Bt=At.add(Ct).unit().mult(-1*nt/Math.sin(Lt/2));lt.push(yt.add(Bt))}return lt},at.cz=XA,at.d=Bp,at.d$=Rv,at.d0=qs,at.d1=Do,at.d2=fu,at.d3=zy,at.d4=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},at.d5=iu,at.d6=OS,at.d7=by,at.d8=function([ot,nt,lt]){const dt=Math.hypot(ot,nt,lt),ft=Math.atan2(ot,lt),mt=.5*Math.PI-Math.acos(-nt/dt);return new na(Cl(ft),Cl(mt))},at.d9=Zl,at.dA=function(){F1().acquire(HE)},at.dB=function(){const ot=Dv;ot&&(ot.isPreloaded()&&ot.numActive()===1?(ot.release(HE),Dv=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},at.dC=jv,at.dD=function(ot){const nt=Qv();if(!nt)return;const lt=nt.delete(Xv);ot&&lt.catch(ot).then(()=>ot())},at.dE=Ov,at.dF=ZP,at.dG=function(ot){ZE=Ys.resolveURL(ot),Y0||(Y0=new q0(F1(),new xp)),Y0.broadcast("setDracoUrl",ZE)},at.dH=qP,at.dI=function(ot){K0=Ys.resolveURL(ot),Y0||(Y0=new q0(F1(),new xp)),Y0.broadcast("setMeshoptUrl",K0)},at.dJ=hx,at.dK=Wr,at.dL=gm,at.dM=Du,at.dN=Ay,at.dO=Dw,at.dP=vA,at.dQ=AA,at.dR=uA,at.dS=Lm,at.dT=VA,at.dU=G0,at.dV=function(ot,nt,lt,dt,ft,mt,yt,Et,At,Ct,Lt){ot.createArrays(),ot.tilePixelRatio=Ln/(512*ot.overscaling),ot.compareText={},ot.iconsNeedLinear=!1;const Bt=ot.layers[0].layout,zt=ot.layers[0]._unevaluatedLayout._values,Wt={};if(ot.textSizeData.kind==="composite"){const{minZoom:nr,maxZoom:gr}=ot.textSizeData;Wt.compositeTextSizes=[zt["text-size"].possiblyEvaluate(new yo(nr),Et),zt["text-size"].possiblyEvaluate(new yo(gr),Et)]}if(ot.iconSizeData.kind==="composite"){const{minZoom:nr,maxZoom:gr}=ot.iconSizeData;Wt.compositeIconSizes=[zt["icon-size"].possiblyEvaluate(new yo(nr),Et),zt["icon-size"].possiblyEvaluate(new yo(gr),Et)]}Wt.layoutTextSize=zt["text-size"].possiblyEvaluate(new yo(At+1),Et),Wt.layoutIconSize=zt["icon-size"].possiblyEvaluate(new yo(At+1),Et),Wt.textMaxSize=zt["text-size"].possiblyEvaluate(new yo(18),Et);const qt=Bt.get("text-rotation-alignment")==="map"&&Bt.get("symbol-placement")!=="point",Xt=Bt.get("text-size");let Jt=!1;for(const nr of ot.features)if(nr.icon&&nr.icon.nameSecondary){Jt=!0;break}for(const nr of ot.features){const gr=Bt.get("text-font").evaluate(nr,{},Et).join(","),pr=Xt.evaluate(nr,{},Et),xr=Wt.layoutTextSize.evaluate(nr,{},Et),Pr=(Wt.layoutIconSize.evaluate(nr,{},Et),{horizontal:{},vertical:void 0}),Rr=nr.text;let Dr,Hr=[0,0];if(Rr){const Qr=Rr.toString(),yn=Bt.get("text-letter-spacing").evaluate(nr,{},Et)*_l,Cn=Bt.get("text-line-height").evaluate(nr,{},Et)*_l,xn=Sn(Qr)?yn:0,$n=Bt.get("text-anchor").evaluate(nr,{},Et),gn=Bt.get("text-variable-anchor");if(!gn){const Mn=Bt.get("text-radial-offset").evaluate(nr,{},Et);Hr=Mn?ZA($n,[Mn*_l,TE]):Bt.get("text-offset").evaluate(nr,{},Et).map(kn=>kn*_l)}let En=qt?"center":Bt.get("text-justify").evaluate(nr,{},Et);const jn=Bt.get("symbol-placement")==="point",vn=jn?Bt.get("text-max-width").evaluate(nr,{},Et)*_l:1/0,Bn=Mn=>{ot.allowVerticalPlacement&&bn(Qr)&&(Pr.vertical=bE(Rr,nt,lt,ft,gr,vn,Cn,$n,Mn,xn,Hr,cu.vertical,!0,xr,pr))};if(!qt&&gn){const Mn=En==="auto"?gn.map(ao=>AE(ao)):[En];let kn=!1;for(let ao=0;ao<Mn.length;ao++){const io=Mn[ao];if(!Pr.horizontal[io])if(kn)Pr.horizontal[io]=Pr.horizontal[0];else{const Kn=bE(Rr,nt,lt,ft,gr,vn,Cn,"center",io,xn,Hr,cu.horizontal,!1,xr,pr);Kn&&(Pr.horizontal[io]=Kn,kn=Kn.positionedLines.length===1)}}Bn("left")}else{if(En==="auto"&&(En=AE($n)),jn||Bt.get("text-writing-mode").indexOf("horizontal")>=0||!bn(Qr)){const Mn=bE(Rr,nt,lt,ft,gr,vn,Cn,$n,En,xn,Hr,cu.horizontal,!1,xr,pr);Mn&&(Pr.horizontal[En]=Mn)}Bn(jn?"left":En)}}let Jr=!1;if(nr.icon&&nr.icon.namePrimary){const Qr=dt[nr.icon.namePrimary];Qr&&(Dr=PI(ft[nr.icon.namePrimary],nr.icon.nameSecondary?ft[nr.icon.nameSecondary]:void 0,Bt.get("icon-offset").evaluate(nr,{},Et),Bt.get("icon-anchor").evaluate(nr,{},Et)),Jr=Qr.sdf,ot.sdfIcons===void 0?ot.sdfIcons=Qr.sdf:ot.sdfIcons!==Qr.sdf&&Ts("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Qr.pixelRatio!==ot.pixelRatio||Bt.get("icon-rotate").constantOr(1)!==0)&&(ot.iconsNeedLinear=!0))}const an=KA(Pr.horizontal)||Pr.vertical;ot.iconsInText||(ot.iconsInText=!!an&&an.iconsInText),(an||Dr)&&OI(ot,nr,Pr,Dr,dt,Wt,xr,0,Hr,Jr,yt,Et,Ct,Lt,Jt)}mt&&ot.generateCollisionDebugBuffers(At,ot.collisionBoxArray)},at.dW=f1,at.dX=i1,at.dY=pE,at.dZ=yv,at.d_=u1,at.da=R0,at.db=wt,at.dc=sE,at.dd=rT,at.de=function(ot){const nt=[0,0,0],lt=at.ae.identity(new Float64Array(16));return at.ae.multiply(lt,ot.pixelMatrix,ot.globeMatrix),at.$.transformMat4(nt,nt,lt),new Vn(nt[0],nt[1])},at.df=$t,at.dg=Mt,at.dh=function(ot){const nt=ot.navigator?ot.navigator.userAgent:null;return!!function(lt){if(Vm==null){const dt=lt.navigator?lt.navigator.userAgent:null;Vm=!!lt.safari||!(!dt||!(/\b(iPad|iPhone|iPod)\b/.test(dt)||dt.match("Safari")&&!dt.match("Chrome")))}return Vm}(ot)&&nt&&(nt.match("Version/15.4")||nt.match("Version/15.5")||nt.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},at.di=Vy,at.dj=class{constructor(ot,nt,lt){this._transformRequestFn=ot,this._customAccessToken=nt,this._silenceAuthErrors=!!lt,this._createSkuToken()}_createSkuToken(){const ot=function(){let nt="";for(let lt=0;lt<10;lt++)nt+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",bx,nt].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=ot.token,this._skuTokenExpiresAt=ot.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(ot,nt){return this._transformRequestFn&&this._transformRequestFn(ot,nt)||{url:ot}}normalizeStyleURL(ot,nt){if(!kt(ot))return ot;const lt=Jl(ot);return lt.params.push(`sdk=js-${gt}`),lt.path=`/styles/v1${lt.path}`,this._makeAPIURL(lt,this._customAccessToken||nt)}normalizeGlyphsURL(ot,nt){if(!kt(ot))return ot;const lt=Jl(ot);return lt.path=`/fonts/v1${lt.path}`,this._makeAPIURL(lt,this._customAccessToken||nt)}normalizeModelURL(ot,nt){if(!kt(ot))return ot;const lt=Jl(ot);return lt.path=`/models/v1${lt.path}`,this._makeAPIURL(lt,this._customAccessToken||nt)}normalizeSourceURL(ot,nt,lt,dt){if(!kt(ot))return ot;const ft=Jl(ot);return ft.path=`/v4/${ft.authority}.json`,ft.params.push("secure"),lt&&ft.params.push(`language=${lt}`),dt&&ft.params.push(`worldview=${dt}`),this._makeAPIURL(ft,this._customAccessToken||nt)}normalizeSpriteURL(ot,nt,lt,dt){const ft=Jl(ot);return kt(ot)?(ft.path=`/styles/v1${ft.path}/sprite${nt}${lt}`,this._makeAPIURL(ft,this._customAccessToken||dt)):(ft.path+=`${nt}${lt}`,mp(ft))}normalizeTileURL(ot,nt,lt){if(this._isSkuTokenExpired()&&this._createSkuToken(),ot&&!kt(ot))return ot;const dt=Jl(ot);dt.path=dt.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${nt||lt&&dt.authority!=="raster"&&lt===512?"@2x":""}${Ky.supported?".webp":"$1"}`),dt.authority==="raster"?dt.path=`/${wt.RASTER_URL_PREFIX}${dt.path}`:dt.authority==="rasterarrays"?dt.path=`/${wt.RASTERARRAYS_URL_PREFIX}${dt.path}`:dt.authority==="3dtiles"?dt.path=`/${wt.TILES3D_URL_PREFIX}${dt.path}`:(dt.path=dt.path.replace(/^.+\/v4\//,"/"),dt.path=`/${wt.TILE_URL_VERSION}${dt.path}`);const ft=this._customAccessToken||function(mt){for(const yt of mt){const Et=yt.match(/^access_token=(.*)$/);if(Et)return Et[1]}return null}(dt.params)||wt.ACCESS_TOKEN;return wt.REQUIRE_ACCESS_TOKEN&&ft&&this._skuToken&&dt.params.push(`sku=${this._skuToken}`),this._makeAPIURL(dt,ft)}canonicalizeTileURL(ot,nt){const lt=Jl(ot);if(!lt.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!lt.path.match(/\.[\w]+$/))return ot;let dt="mapbox://";lt.path.match(/^\/raster\/v1\//)?dt+=`raster/${lt.path.replace(`/${wt.RASTER_URL_PREFIX}/`,"")}`:lt.path.match(/^\/rasterarrays\/v1\//)?dt+=`rasterarrays/${lt.path.replace(`/${wt.RASTERARRAYS_URL_PREFIX}/`,"")}`:dt+=`tiles/${lt.path.replace(`/${wt.TILE_URL_VERSION}/`,"")}`;let ft=lt.params;return nt&&(ft=ft.filter(mt=>!mt.match(/^access_token=/))),ft.length&&(dt+=`?${ft.join("&")}`),dt}canonicalizeTileset(ot,nt){const lt=!!nt&&kt(nt),dt=[];for(const ft of ot.tiles||[])St(ft)?dt.push(this.canonicalizeTileURL(ft,lt)):dt.push(ft);return dt}_makeAPIURL(ot,nt){const lt="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",dt=Jl(wt.API_URL);if(ot.protocol=dt.protocol,ot.authority=dt.authority,ot.protocol==="http"){const ft=ot.params.indexOf("secure");ft>=0&&ot.params.splice(ft,1)}if(dt.path!=="/"&&(ot.path=`${dt.path}${ot.path}`),!wt.REQUIRE_ACCESS_TOKEN)return mp(ot);if(nt=nt||wt.ACCESS_TOKEN,!this._silenceAuthErrors){if(!nt)throw new Error(`An API access token is required to use Mapbox GL. ${lt}`);if(nt[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${lt}`)}return ot.params=ot.params.filter(ft=>ft.indexOf("access_token")===-1),ot.params.push(`access_token=${nt||""}`),mp(ot)}},at.dk=function(ot,nt){nt?Ym.add(ot):Ym.delete(ot)},at.dl=Ky,at.dm=X1,at.dn=Tx,at.dp=wx,at.dq=o_,at.dr=a_,at.ds=function(ot){Ym.delete(ot)},at.dt=Km,at.du=qp,at.dv=jm,at.dw=gt,at.dx=function(ot,nt){yx=ot,xx=nt},at.dy=function(ot,nt,lt=!1){if(rs===fo||rs===ko||rs===Vo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Uo=Ys.resolveURL(ot),rs=fo,ss=nt,Oo(),lt||Ko()},at.dz=To,at.e=Ys,at.e0=a1,at.e1=o1,at.e2=Mm,at.e3=_A,at.e4=Nt,at.e5=pp,at.e6=function(ot){let nt=0;if(new Uint32Array(ot,0,1)[0]!==YP){const lt=new Uint32Array(ot,0,7),[,,dt,ft,mt,yt]=lt;nt=lt.byteLength+ft+mt+yt+mt,(dt!==ot.byteLength||nt>=ot.byteLength)&&Ts("Invalid b3dm header information.")}return eC(ot,nt)},at.e7=function(ot,nt){const lt=rC(ot);for(const dt of lt){for(const ft of dt.meshes)U$(ft);dt.lights&&(dt.lightMeshIndex=dt.meshes.length,dt.meshes.push(G$(dt.lights,nt)))}return lt},at.e8=U1,at.e9=HP,at.ea=Lo,at.eb=function(ot){Um(),hu&&hu.then(nt=>{nt.keys().then(lt=>{for(let dt=0;dt<lt.length-ot;dt++)nt.delete(lt[dt])})})},at.f=Xm,at.g=pu,at.h=function(ot,nt){return fu(Zs(ot,{type:"json"}),nt)},at.i=Zm,at.j=lu,at.k=zA,at.l=function(ot){return fetch(ot).then(nt=>nt.arrayBuffer()).then(nt=>eC(nt,0,ot))},at.m=EE,at.n=class extends L1{},at.o=Xu,at.p=ZI,at.q=Yp,at.r=Ot,at.s=Gt,at.t=Vt,at.u=ku,at.v=Er,at.w=Ts,at.x=su,at.y=Ar,at.z=_r}),ut(["./shared"],function(at){function gt(Gr){const or=Gr?Gr.url.toString():void 0;return or?performance.getEntriesByName(or):[]}function bt(Gr){if(typeof Gr=="number"||typeof Gr=="boolean"||typeof Gr=="string"||Gr==null)return JSON.stringify(Gr);if(Array.isArray(Gr)){let dr="[";for(const Sr of Gr)dr+=`${bt(Sr)},`;return`${dr}]`}let or="{";for(const dr of Object.keys(Gr).sort())or+=`${dr}:${bt(Gr[dr])},`;return`${or}}`}function wt(Gr){let or="";for(const dr of at.cG)or+=`/${bt(Gr[dr])}`;return or}class St{constructor(or){this.keyCache={},this._layers={},this._layerConfigs={},or&&this.replace(or)}replace(or,dr){this._layerConfigs={},this._layers={},this.update(or,[],dr)}update(or,dr,Sr){this._options=Sr;for(const jr of or)this._layerConfigs[jr.id]=jr,(this._layers[jr.id]=at.c$(jr,this.scope,null,this._options)).compileFilter(),this.keyCache[jr.id]&&delete this.keyCache[jr.id];for(const jr of dr)delete this.keyCache[jr],delete this._layerConfigs[jr],delete this._layers[jr];this.familiesBySource={};const Br=function(jr,Kr){const un={};for(let on=0;on<jr.length;on++){const Pn=Kr&&Kr[jr[on].id]||wt(jr[on]);Kr&&(Kr[jr[on].id]=Pn);let An=un[Pn];An||(An=un[Pn]=[]),An.push(jr[on])}const qr=[];for(const on in un)qr.push(un[on]);return qr}(at.dJ(this._layerConfigs),this.keyCache);for(const jr of Br){const Kr=jr.map(Zn=>this._layers[Zn.id]),un=Kr[0];if(un.visibility==="none")continue;const qr=un.source||"";let on=this.familiesBySource[qr];on||(on=this.familiesBySource[qr]={});const Pn=un.sourceLayer||"_geojsonTileLayer";let An=on[Pn];An||(An=on[Pn]=[]),An.push(Kr)}}}const kt=1*at.dM;class Rt{constructor(or){const dr={},Sr=[];for(const un in or){const qr=or[un],on=dr[un]={};for(const Pn in qr.glyphs){const An=qr.glyphs[+Pn];if(!An||An.bitmap.width===0||An.bitmap.height===0)continue;const Zn=An.metrics.localGlyph?kt:1,so={x:0,y:0,w:An.bitmap.width+2*Zn,h:An.bitmap.height+2*Zn};Sr.push(so),on[Pn]=so}}const{w:Br,h:jr}=at.k(Sr),Kr=new at.dL({width:Br||1,height:jr||1});for(const un in or){const qr=or[un];for(const on in qr.glyphs){const Pn=qr.glyphs[+on];if(!Pn||Pn.bitmap.width===0||Pn.bitmap.height===0)continue;const An=dr[un][on],Zn=Pn.metrics.localGlyph?kt:1;at.dL.copy(Pn.bitmap,Kr,{x:0,y:0},{x:An.x+Zn,y:An.y+Zn},Pn.bitmap)}}this.image=Kr,this.positions=dr}}at.dK(Rt,"GlyphAtlas");class It{constructor(or){this.tileID=new at.aQ(or.tileID.overscaledZ,or.tileID.wrap,or.tileID.canonical.z,or.tileID.canonical.x,or.tileID.canonical.y),this.tileZoom=or.tileZoom,this.uid=or.uid,this.zoom=or.zoom,this.lut=or.lut,this.canonical=or.tileID.canonical,this.pixelRatio=or.pixelRatio,this.tileSize=or.tileSize,this.source=or.source,this.scope=or.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=or.showCollisionBoxes,this.collectResourceTiming=!!or.collectResourceTiming,this.promoteId=or.promoteId,this.isSymbolTile=or.isSymbolTile,this.tileTransform=at.dN(or.tileID.canonical,or.projection),this.projection=or.projection,this.brightness=or.brightness,this.extraShadowCaster=!!or.extraShadowCaster,this.tessellationStep=or.tessellationStep}parse(or,dr,Sr,Br,jr){this.status="parsing",this.data=or,this.collisionBoxArray=new at.dO;const Kr=new at.dP(Object.keys(or.layers).sort()),un=new at.dQ(this.tileID,this.promoteId);un.bucketLayerIDs=[];const qr={},on=new at.dR(256,256),Pn={featureIndex:un,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:on,availableImages:Sr,brightness:this.brightness},An=dr.familiesBySource[this.source];for(const no in An){const us=or.layers[no];if(!us)continue;let Jo=!1,Wo=!1,Es=!1;for(const Hs of An[no])Hs[0].type==="symbol"?Jo=!0:Wo=!0,Hs[0].is3D()&&Hs[0].type!=="model"&&(Es=!0);if(this.extraShadowCaster&&!Es||this.isSymbolTile===!0&&!Jo||this.isSymbolTile===!1&&!Wo)continue;us.version===1&&at.w(`Vector tile source "${this.source}" layer "${no}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ss=Kr.encode(no),Ls=[];for(let Hs=0;Hs<us.length;Hs++){const El=us.feature(Hs),dp=un.getId(El,no);Ls.push({feature:El,id:dp,index:Hs,sourceLayerIndex:Ss})}for(const Hs of An[no]){const El=Hs[0];(!this.extraShadowCaster||El.is3D()&&El.type!=="model")&&(this.isSymbolTile!==void 0&&El.type==="symbol"!==this.isSymbolTile||El.minzoom&&this.zoom<Math.floor(El.minzoom)||El.maxzoom&&this.zoom>=El.maxzoom||El.visibility!=="none"&&(Dt(Hs,this.zoom,Pn.brightness,Sr),(qr[El.id]=El.createBucket({index:un.bucketLayerIDs.length,layers:Hs,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ss,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Ls,Pn,this.tileID.canonical,this.tileTransform),un.bucketLayerIDs.push(Hs.map(dp=>dp.id))))}}let Zn,so,po,Xo;on.trim();const Co={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},qo=()=>{if(Zn)return this.status="done",jr(Zn);if(this.extraShadowCaster)this.status="done",jr(null,{buckets:at.dJ(qr).filter(no=>!no.isEmpty()),featureIndex:un,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:Pn.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(so&&po&&Xo){const no=new Rt(so),us=new at.dT(po,Xo,this.lut);for(const Jo in qr){const Wo=qr[Jo];Wo instanceof at.dU?(Dt(Wo.layers,this.zoom,Pn.brightness,Sr),at.dV(Wo,so,no.positions,po,us.iconPositions,this.showCollisionBoxes,Sr,this.tileID.canonical,this.tileZoom,this.projection,this.brightness)):Wo.hasPattern&&(Wo instanceof at.dW||Wo instanceof at.dX||Wo instanceof at.c0)&&(Dt(Wo.layers,this.zoom,Pn.brightness,Sr),Wo.addFeatures(Pn,this.tileID.canonical,us.patternPositions,Sr,this.tileTransform,this.brightness))}this.status="done",jr(null,{buckets:at.dJ(qr).filter(Jo=>!Jo.isEmpty()),featureIndex:un,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:no.image,lineAtlas:on,imageAtlas:us,brightness:Pn.brightness})}};if(!this.extraShadowCaster){const no=at.dS(Pn.glyphDependencies,Wo=>Object.keys(Wo).map(Number));Object.keys(no).length?Br.send("getGlyphs",{uid:this.uid,stacks:no,scope:this.scope},(Wo,Es)=>{Zn||(Zn=Wo,so=Es,qo())},void 0,!1,Co):so={};const us=Object.keys(Pn.iconDependencies);us.length?Br.send("getImages",{icons:us,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(Wo,Es)=>{Zn||(Zn=Wo,po=Es,qo())},void 0,!1,Co):po={};const Jo=Object.keys(Pn.patternDependencies);Jo.length?Br.send("getImages",{icons:Jo,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(Wo,Es)=>{Zn||(Zn=Wo,Xo=Es,qo())},void 0,!1,Co):Xo={}}qo()}}function Dt(Gr,or,dr,Sr){const Br=new at.Y(or,{brightness:dr});for(const jr of Gr)jr.recalculate(Br,Sr)}class Mt extends at.E{constructor(or,dr,Sr,Br,jr,Kr){super(),this.actor=or,this.layerIndex=dr,this.availableImages=Sr,this.loadVectorData=jr||at.aq,this.loading={},this.loaded={},this.deduped=new at.ap(or.scheduler),this.isSpriteLoaded=Br,this.scheduler=or.scheduler,this.brightness=Kr}loadTile(or,dr){const Sr=or.uid,Br=or&&or.request,jr=Br&&Br.collectResourceTiming,Kr=this.loading[Sr]=new It(or);Kr.abort=this.loadVectorData(or,(un,qr)=>{const on=!this.loading[Sr];if(delete this.loading[Sr],on||un||!qr)return Kr.status="done",on||(this.loaded[Sr]=Kr),dr(un);const Pn=qr.rawData,An={};qr.expires&&(An.expires=qr.expires),qr.cacheControl&&(An.cacheControl=qr.cacheControl),Kr.vectorTile=qr.vectorTile||new at.dY(new at.dZ(Pn));const Zn=()=>{Kr.parse(Kr.vectorTile,this.layerIndex,this.availableImages,this.actor,(so,po)=>{if(so||!po)return dr(so);const Xo={};if(jr){const Co=gt(Br);Co.length>0&&(Xo.resourceTiming=JSON.parse(JSON.stringify(Co)))}dr(null,at.Q({rawTileData:Pn.slice(0)},po,An,Xo))})};this.isSpriteLoaded?Zn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(Zn,{type:"parseTile",isSymbolTile:or.isSymbolTile,zoom:or.tileZoom}):Zn()}),this.loaded=this.loaded||{},this.loaded[Sr]=Kr})}reloadTile(or,dr){const Sr=this.loaded,Br=or.uid;if(Sr&&Sr[Br]){const jr=Sr[Br];jr.showCollisionBoxes=or.showCollisionBoxes,jr.projection=or.projection,jr.brightness=or.brightness,jr.tileTransform=at.dN(or.tileID.canonical,or.projection),jr.extraShadowCaster=or.extraShadowCaster,jr.lut=or.lut;const Kr=(un,qr)=>{const on=jr.reloadCallback;on&&(delete jr.reloadCallback,jr.parse(jr.vectorTile,this.layerIndex,this.availableImages,this.actor,on)),dr(un,qr)};jr.status==="parsing"?jr.reloadCallback=Kr:jr.status==="done"&&(jr.vectorTile?jr.parse(jr.vectorTile,this.layerIndex,this.availableImages,this.actor,Kr):Kr())}else dr(null,void 0)}abortTile(or,dr){const Sr=or.uid,Br=this.loading[Sr];Br&&(Br.abort&&Br.abort(),delete this.loading[Sr]),dr()}removeTile(or,dr){const Sr=this.loaded,Br=or.uid;Sr&&Sr[Br]&&delete Sr[Br],dr()}}class $t{loadTile(or,dr){const{uid:Sr,encoding:Br,rawImageData:jr,padding:Kr}=or,un=ImageBitmap&&jr instanceof ImageBitmap?this.getImageData(jr,Kr):jr;dr(null,new at.d_(Sr,un,Br,Kr<1))}getImageData(or,dr){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(or.width,or.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=or.width,this.offscreenCanvas.height=or.height,this.offscreenCanvasContext.drawImage(or,0,0,or.width,or.height);const Sr=this.offscreenCanvasContext.getImageData(-dr,-dr,or.width+2*dr,or.height+2*dr);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),Sr}}at.d$.setPbf(at.dZ);class jt{decodeRasterArray({task:or,buffer:dr},Sr){at.d$.performDecoding(dr,or).then(Br=>{Sr(null,Br)},Br=>{Sr(Br)})}}const Nt=at.e0.prototype.toGeoJSON;let Ut=class{constructor(Gr){this._feature=Gr,this.extent=at.a4,this.type=Gr.type,this.properties=Gr.tags,"id"in Gr&&!isNaN(Gr.id)&&(this.id=parseInt(Gr.id,10))}loadGeometry(){if(this._feature.type===1){const Gr=[];for(const or of this._feature.geometry)Gr.push([new at.P(or[0],or[1])]);return Gr}{const Gr=[];for(const or of this._feature.geometry){const dr=[];for(const Sr of or)dr.push(new at.P(Sr[0],Sr[1]));Gr.push(dr)}return Gr}}toGeoJSON(Gr,or,dr){return Nt.call(this,Gr,or,dr)}},Ht=class{constructor(Gr){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=at.a4,this.length=Gr.length,this._features=Gr}feature(Gr){return new Ut(this._features[Gr])}};const Kt=64/4096,tr=128;class mr{constructor(){this.features=new Map}clear(){this.features.clear()}load(or=[],dr){for(const Sr of or){const Br=Sr.id;if(Br==null)continue;let jr=this.features.get(Br);jr&&this.updateCache(jr,dr),Sr.geometry?(jr=wr(Sr),this.updateCache(jr,dr),this.features.set(Br,jr)):this.features.delete(Br),this.updateCache(jr,dr)}}updateCache(or,dr){for(const{canonical:Sr,uid:Br}of Object.values(dr)){const{z:jr,x:Kr,y:un}=Sr;vr(or,Math.pow(2,jr),Kr,un)&&delete dr[Br]}}getTile(or,dr,Sr){const Br=Math.pow(2,or),jr=[];for(const Kr of this.features.values())vr(Kr,Br,dr,Sr)&&jr.push(Lr(Kr,Br,dr,Sr));return{features:jr}}getFeatures(){return[...this.features.values()]}}function vr({minX:Gr,minY:or,maxX:dr,maxY:Sr},Br,jr,Kr){return Gr<(jr+1+Kt)/Br&&or<(Kr+1+Kt)/Br&&dr>(jr-Kt)/Br&&Sr>(Kr-Kt)/Br}function wr(Gr){const{id:or,geometry:dr,properties:Sr}=Gr;if(!dr)return;if(dr.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Br,coordinates:jr}=dr,Kr={id:or,type:1,geometry:[],tags:Sr,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},un=Kr.geometry;if(Br==="Point")yr(jr,un,Kr);else if(Br==="MultiPoint")for(const qr of jr)yr(qr,un,Kr);else if(Br==="LineString")Kr.type=2,Or(jr,un,Kr);else if(Br==="MultiLineString")Kr.type=2,Nr(jr,un,Kr);else if(Br==="Polygon")Kr.type=3,Nr(jr,un,Kr,!0);else{if(Br!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");Kr.type=3;for(const qr of jr)Nr(qr,un,Kr,!0)}return Kr}function yr([Gr,or],dr,Sr){const Br=at.ak(Gr);let jr=at.al(or);jr=jr<0?0:jr>1?1:jr,dr.push(Br,jr),Sr.minX=Math.min(Sr.minX,Br),Sr.minY=Math.min(Sr.minY,jr),Sr.maxX=Math.max(Sr.maxX,Br),Sr.maxY=Math.max(Sr.maxY,jr)}function Or(Gr,or,dr,Sr=!1,Br=!1){const jr=[];for(const Kr of Gr)yr(Kr,jr,dr);or.push(jr),Sr&&function(Kr,un){let qr=0;for(let on=0,Pn=Kr.length,An=Pn-2;on<Pn;An=on,on+=2)qr+=(Kr[on]-Kr[An])*(Kr[on+1]+Kr[An+1]);if(qr>0===un)for(let on=0,Pn=Kr.length;on<Pn/2;on+=2){const An=Kr[on],Zn=Kr[on+1];Kr[on]=Kr[Pn-2-on],Kr[on+1]=Kr[Pn-1-on],Kr[Pn-2-on]=An,Kr[Pn-1-on]=Zn}}(jr,Br)}function Nr(Gr,or,dr,Sr=!1){for(let Br=0;Br<Gr.length;Br++)Or(Gr[Br],or,dr,Sr,Br===0)}function Lr(Gr,or,dr,Sr){const{id:Br,type:jr,geometry:Kr,tags:un}=Gr,qr=[];if(jr===1)(function(on,Pn,An,Zn,so){for(let po=0;po<on.length;po+=2){const Xo=Math.round(at.a4*(on[po+0]*Pn-An)),Co=Math.round(at.a4*(on[po+1]*Pn-Zn));so.push([Xo,Co])}})(Kr,or,dr,Sr,qr);else for(const on of Kr)ar(on,or,dr,Sr,qr);return{id:Br,type:jr,geometry:qr,tags:un}}function ar(Gr,or,dr,Sr,Br){const jr=-tr,Kr=at.a4+tr;let un;for(let qr=0;qr<Gr.length-2;qr+=2){let on=Math.round(at.a4*(Gr[qr+0]*or-dr)),Pn=Math.round(at.a4*(Gr[qr+1]*or-Sr)),An=Math.round(at.a4*(Gr[qr+2]*or-dr)),Zn=Math.round(at.a4*(Gr[qr+3]*or-Sr));const so=An-on,po=Zn-Pn;on<jr&&An<jr||(on<jr?(Pn+=Math.round(po*((jr-on)/so)),on=jr):An<jr&&(Zn=Pn+Math.round(po*((jr-on)/so)),An=jr),Pn<jr&&Zn<jr||(Pn<jr?(on+=Math.round(so*((jr-Pn)/po)),Pn=jr):Zn<jr&&(An=on+Math.round(so*((jr-Pn)/po)),Zn=jr),on>=Kr&&An>=Kr||(on>=Kr?(Pn+=Math.round(po*((Kr-on)/so)),on=Kr):An>=Kr&&(Zn=Pn+Math.round(po*((Kr-on)/so)),An=Kr),Pn>=Kr&&Zn>=Kr||(Pn>=Kr?(on+=Math.round(so*((Kr-Pn)/po)),Pn=Kr):Zn>=Kr&&(An=on+Math.round(so*((Kr-Pn)/po)),Zn=Kr),un&&on===un[un.length-1][0]&&Pn===un[un.length-1][1]||(un=[[on,Pn]],Br.push(un)),un.push([An,Zn])))))}}var hr={exports:{}},Qt=at.e2,ir=at.e1.VectorTileFeature,Mr=Cr;function Cr(Gr,or){this.options=or||{},this.features=Gr,this.length=Gr.length}function rn(Gr,or){this.id=typeof Gr.id=="number"?Gr.id:void 0,this.type=Gr.type,this.rawGeometry=Gr.type===1?[Gr.geometry]:Gr.geometry,this.properties=Gr.tags,this.extent=or||4096}Cr.prototype.feature=function(Gr){return new rn(this.features[Gr],this.options.extent)},rn.prototype.loadGeometry=function(){var Gr=this.rawGeometry;this.geometry=[];for(var or=0;or<Gr.length;or++){for(var dr=Gr[or],Sr=[],Br=0;Br<dr.length;Br++)Sr.push(new Qt(dr[Br][0],dr[Br][1]));this.geometry.push(Sr)}return this.geometry},rn.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Gr=this.geometry,or=1/0,dr=-1/0,Sr=1/0,Br=-1/0,jr=0;jr<Gr.length;jr++)for(var Kr=Gr[jr],un=0;un<Kr.length;un++){var qr=Kr[un];or=Math.min(or,qr.x),dr=Math.max(dr,qr.x),Sr=Math.min(Sr,qr.y),Br=Math.max(Br,qr.y)}return[or,Sr,dr,Br]},rn.prototype.toGeoJSON=ir.prototype.toGeoJSON;var fn=at.e3,Dn=Mr;function Yn(Gr){var or=new fn;return function(dr,Sr){for(var Br in dr.layers)Sr.writeMessage(3,eo,dr.layers[Br])}(Gr,or),or.finish()}function eo(Gr,or){var dr;or.writeVarintField(15,Gr.version||1),or.writeStringField(1,Gr.name||""),or.writeVarintField(5,Gr.extent||4096);var Sr={keys:[],values:[],keycache:{},valuecache:{}};for(dr=0;dr<Gr.length;dr++)Sr.feature=Gr.feature(dr),or.writeMessage(2,Gn,Sr);var Br=Sr.keys;for(dr=0;dr<Br.length;dr++)or.writeStringField(3,Br[dr]);var jr=Sr.values;for(dr=0;dr<jr.length;dr++)or.writeMessage(4,dn,jr[dr])}function Gn(Gr,or){var dr=Gr.feature;dr.id!==void 0&&or.writeVarintField(1,dr.id),or.writeMessage(2,lo,Gr),or.writeVarintField(3,dr.type),or.writeMessage(4,Rn,dr)}function lo(Gr,or){var dr=Gr.feature,Sr=Gr.keys,Br=Gr.values,jr=Gr.keycache,Kr=Gr.valuecache;for(var un in dr.properties){var qr=dr.properties[un],on=jr[un];if(qr!==null){on===void 0&&(Sr.push(un),jr[un]=on=Sr.length-1),or.writeVarint(on);var Pn=typeof qr;Pn!=="string"&&Pn!=="boolean"&&Pn!=="number"&&(qr=JSON.stringify(qr));var An=Pn+":"+qr,Zn=Kr[An];Zn===void 0&&(Br.push(qr),Kr[An]=Zn=Br.length-1),or.writeVarint(Zn)}}}function mn(Gr,or){return(or<<3)+(7&Gr)}function Hn(Gr){return Gr<<1^Gr>>31}function Rn(Gr,or){for(var dr=Gr.loadGeometry(),Sr=Gr.type,Br=0,jr=0,Kr=dr.length,un=0;un<Kr;un++){var qr=dr[un],on=1;Sr===1&&(on=qr.length),or.writeVarint(mn(1,on));for(var Pn=Sr===3?qr.length-1:qr.length,An=0;An<Pn;An++){An===1&&Sr!==1&&or.writeVarint(mn(2,Pn-1));var Zn=qr[An].x-Br,so=qr[An].y-jr;or.writeVarint(Hn(Zn)),or.writeVarint(Hn(so)),Br+=Zn,jr+=so}Sr===3&&or.writeVarint(mn(7,1))}}function dn(Gr,or){var dr=typeof Gr;dr==="string"?or.writeStringField(1,Gr):dr==="boolean"?or.writeBooleanField(7,Gr):dr==="number"&&(Gr%1!=0?or.writeDoubleField(3,Gr):Gr<0?or.writeSVarintField(6,Gr):or.writeVarintField(5,Gr))}hr.exports=Yn,hr.exports.fromVectorTileJs=Yn,hr.exports.fromGeojsonVt=function(Gr,or){or=or||{};var dr={};for(var Sr in Gr)dr[Sr]=new Dn(Gr[Sr].features,or),dr[Sr].name=Sr,dr[Sr].version=or.version,dr[Sr].extent=or.extent;return Yn({layers:dr})},hr.exports.GeoJSONWrapper=Dn;var qn=at.e4(hr.exports);const On={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Gr=>Gr},xo=Math.fround||(Io=new Float32Array(1),Gr=>(Io[0]=+Gr,Io[0]));var Io;const $o=3,Zr=5,pn=6;class sn{constructor(or){this.options=Object.assign(Object.create(On),or),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(or){const{log:dr,minZoom:Sr,maxZoom:Br}=this.options;dr&&console.time("total time");const jr=`prepare ${or.length} points`;dr&&console.time(jr),this.points=or;const Kr=[];for(let qr=0;qr<or.length;qr++){const on=or[qr];if(!on.geometry)continue;const[Pn,An]=on.geometry.coordinates,Zn=xo(Fn(Pn)),so=xo(ro(An));Kr.push(Zn,so,1/0,qr,-1,1),this.options.reduce&&Kr.push(0)}let un=this.trees[Br+1]=this._createTree(Kr);dr&&console.timeEnd(jr);for(let qr=Br;qr>=Sr;qr--){const on=+Date.now();un=this.trees[qr]=this._createTree(this._cluster(un,qr)),dr&&console.log("z%d: %d clusters in %dms",qr,un.numItems,+Date.now()-on)}return dr&&console.timeEnd("total time"),this}getClusters(or,dr){let Sr=((or[0]+180)%360+360)%360-180;const Br=Math.max(-90,Math.min(90,or[1]));let jr=or[2]===180?180:((or[2]+180)%360+360)%360-180;const Kr=Math.max(-90,Math.min(90,or[3]));if(or[2]-or[0]>=360)Sr=-180,jr=180;else if(Sr>jr){const An=this.getClusters([Sr,Br,180,Kr],dr),Zn=this.getClusters([-180,Br,jr,Kr],dr);return An.concat(Zn)}const un=this.trees[this._limitZoom(dr)],qr=un.range(Fn(Sr),ro(Kr),Fn(jr),ro(Br)),on=un.data,Pn=[];for(const An of qr){const Zn=this.stride*An;Pn.push(on[Zn+Zr]>1?wn(on,Zn,this.clusterProps):this.points[on[Zn+$o]])}return Pn}getChildren(or){const dr=this._getOriginId(or),Sr=this._getOriginZoom(or),Br="No cluster with the specified id.",jr=this.trees[Sr];if(!jr)throw new Error(Br);const Kr=jr.data;if(dr*this.stride>=Kr.length)throw new Error(Br);const un=this.options.radius/(this.options.extent*Math.pow(2,Sr-1)),qr=jr.within(Kr[dr*this.stride],Kr[dr*this.stride+1],un),on=[];for(const Pn of qr){const An=Pn*this.stride;Kr[An+4]===or&&on.push(Kr[An+Zr]>1?wn(Kr,An,this.clusterProps):this.points[Kr[An+$o]])}if(on.length===0)throw new Error(Br);return on}getLeaves(or,dr,Sr){const Br=[];return this._appendLeaves(Br,or,dr=dr||10,Sr=Sr||0,0),Br}getTile(or,dr,Sr){const Br=this.trees[this._limitZoom(or)],jr=Math.pow(2,or),{extent:Kr,radius:un}=this.options,qr=un/Kr,on=(Sr-qr)/jr,Pn=(Sr+1+qr)/jr,An={features:[]};return this._addTileFeatures(Br.range((dr-qr)/jr,on,(dr+1+qr)/jr,Pn),Br.data,dr,Sr,jr,An),dr===0&&this._addTileFeatures(Br.range(1-qr/jr,on,1,Pn),Br.data,jr,Sr,jr,An),dr===jr-1&&this._addTileFeatures(Br.range(0,on,qr/jr,Pn),Br.data,-1,Sr,jr,An),An.features.length?An:null}getClusterExpansionZoom(or){let dr=this._getOriginZoom(or)-1;for(;dr<=this.options.maxZoom;){const Sr=this.getChildren(or);if(dr++,Sr.length!==1)break;or=Sr[0].properties.cluster_id}return dr}_appendLeaves(or,dr,Sr,Br,jr){const Kr=this.getChildren(dr);for(const un of Kr){const qr=un.properties;if(qr&&qr.cluster?jr+qr.point_count<=Br?jr+=qr.point_count:jr=this._appendLeaves(or,qr.cluster_id,Sr,Br,jr):jr<Br?jr++:or.push(un),or.length===Sr)break}return jr}_createTree(or){const dr=new at.cN(or.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Sr=0;Sr<or.length;Sr+=this.stride)dr.add(or[Sr],or[Sr+1]);return dr.finish(),dr.data=or,dr}_addTileFeatures(or,dr,Sr,Br,jr,Kr){for(const un of or){const qr=un*this.stride,on=dr[qr+Zr]>1;let Pn,An,Zn;if(on)Pn=Xn(dr,qr,this.clusterProps),An=dr[qr],Zn=dr[qr+1];else{const Xo=this.points[dr[qr+$o]];Pn=Xo.properties;const[Co,qo]=Xo.geometry.coordinates;An=Fn(Co),Zn=ro(qo)}const so={type:1,geometry:[[Math.round(this.options.extent*(An*jr-Sr)),Math.round(this.options.extent*(Zn*jr-Br))]],tags:Pn};let po;po=on||this.options.generateId?dr[qr+$o]:this.points[dr[qr+$o]].id,po!==void 0&&(so.id=po),Kr.features.push(so)}}_limitZoom(or){return Math.max(this.options.minZoom,Math.min(Math.floor(+or),this.options.maxZoom+1))}_cluster(or,dr){const{radius:Sr,extent:Br,reduce:jr,minPoints:Kr}=this.options,un=Sr/(Br*Math.pow(2,dr)),qr=or.data,on=[],Pn=this.stride;for(let An=0;An<qr.length;An+=Pn){if(qr[An+2]<=dr)continue;qr[An+2]=dr;const Zn=qr[An],so=qr[An+1],po=or.within(qr[An],qr[An+1],un),Xo=qr[An+Zr];let Co=Xo;for(const qo of po){const no=qo*Pn;qr[no+2]>dr&&(Co+=qr[no+Zr])}if(Co>Xo&&Co>=Kr){let qo,no=Zn*Xo,us=so*Xo,Jo=-1;const Wo=(An/Pn<<5)+(dr+1)+this.points.length;for(const Es of po){const Ss=Es*Pn;if(qr[Ss+2]<=dr)continue;qr[Ss+2]=dr;const Ls=qr[Ss+Zr];no+=qr[Ss]*Ls,us+=qr[Ss+1]*Ls,qr[Ss+4]=Wo,jr&&(qo||(qo=this._map(qr,An,!0),Jo=this.clusterProps.length,this.clusterProps.push(qo)),jr(qo,this._map(qr,Ss)))}qr[An+4]=Wo,on.push(no/Co,us/Co,1/0,Wo,-1,Co),jr&&on.push(Jo)}else{for(let qo=0;qo<Pn;qo++)on.push(qr[An+qo]);if(Co>1)for(const qo of po){const no=qo*Pn;if(!(qr[no+2]<=dr)){qr[no+2]=dr;for(let us=0;us<Pn;us++)on.push(qr[no+us])}}}}return on}_getOriginId(or){return or-this.points.length>>5}_getOriginZoom(or){return(or-this.points.length)%32}_map(or,dr,Sr){if(or[dr+Zr]>1){const Kr=this.clusterProps[or[dr+pn]];return Sr?Object.assign({},Kr):Kr}const Br=this.points[or[dr+$o]].properties,jr=this.options.map(Br);return Sr&&jr===Br?Object.assign({},jr):jr}}function wn(Gr,or,dr){return{type:"Feature",id:Gr[or+$o],properties:Xn(Gr,or,dr),geometry:{type:"Point",coordinates:[(Sr=Gr[or],360*(Sr-.5)),No(Gr[or+1])]}};var Sr}function Xn(Gr,or,dr){const Sr=Gr[or+Zr],Br=Sr>=1e4?`${Math.round(Sr/1e3)}k`:Sr>=1e3?Math.round(Sr/100)/10+"k":Sr,jr=Gr[or+pn],Kr=jr===-1?{}:Object.assign({},dr[jr]);return Object.assign(Kr,{cluster:!0,cluster_id:Gr[or+$o],point_count:Sr,point_count_abbreviated:Br})}function Fn(Gr){return Gr/360+.5}function ro(Gr){const or=Math.sin(Gr*Math.PI/180),dr=.5-.25*Math.log((1+or)/(1-or))/Math.PI;return dr<0?0:dr>1?1:dr}function No(Gr){const or=(180-360*Gr)*Math.PI/180;return 360*Math.atan(Math.exp(or))/Math.PI-90}function co(Gr,or,dr,Sr){let Br=Sr;const jr=or+(dr-or>>1);let Kr,un=dr-or;const qr=Gr[or],on=Gr[or+1],Pn=Gr[dr],An=Gr[dr+1];for(let Zn=or+3;Zn<dr;Zn+=3){const so=Ao(Gr[Zn],Gr[Zn+1],qr,on,Pn,An);if(so>Br)Kr=Zn,Br=so;else if(so===Br){const po=Math.abs(Zn-jr);po<un&&(Kr=Zn,un=po)}}Br>Sr&&(Kr-or>3&&co(Gr,or,Kr,Sr),Gr[Kr+2]=Br,dr-Kr>3&&co(Gr,Kr,dr,Sr))}function Ao(Gr,or,dr,Sr,Br,jr){let Kr=Br-dr,un=jr-Sr;if(Kr!==0||un!==0){const qr=((Gr-dr)*Kr+(or-Sr)*un)/(Kr*Kr+un*un);qr>1?(dr=Br,Sr=jr):qr>0&&(dr+=Kr*qr,Sr+=un*qr)}return Kr=Gr-dr,un=or-Sr,Kr*Kr+un*un}function vo(Gr,or,dr,Sr){const Br={id:Gr??null,type:or,geometry:dr,tags:Sr,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(or==="Point"||or==="MultiPoint"||or==="LineString")Fo(Br,dr);else if(or==="Polygon")Fo(Br,dr[0]);else if(or==="MultiLineString")for(const jr of dr)Fo(Br,jr);else if(or==="MultiPolygon")for(const jr of dr)Fo(Br,jr[0]);return Br}function Fo(Gr,or){for(let dr=0;dr<or.length;dr+=3)Gr.minX=Math.min(Gr.minX,or[dr]),Gr.minY=Math.min(Gr.minY,or[dr+1]),Gr.maxX=Math.max(Gr.maxX,or[dr]),Gr.maxY=Math.max(Gr.maxY,or[dr+1])}function ds(Gr,or,dr,Sr){if(!or.geometry)return;const Br=or.geometry.coordinates;if(Br&&Br.length===0)return;const jr=or.geometry.type,Kr=Math.pow(dr.tolerance/((1<<dr.maxZoom)*dr.extent),2);let un=[],qr=or.id;if(dr.promoteId?qr=or.properties[dr.promoteId]:dr.generateId&&(qr=Sr||0),jr==="Point")bs(Br,un);else if(jr==="MultiPoint")for(const on of Br)bs(on,un);else if(jr==="LineString")Yo(Br,un,Kr,!1);else if(jr==="MultiLineString"){if(dr.lineMetrics){for(const on of Br)un=[],Yo(on,un,Kr,!1),Gr.push(vo(qr,"LineString",un,or.properties));return}Po(Br,un,Kr,!1)}else if(jr==="Polygon")Po(Br,un,Kr,!0);else{if(jr!=="MultiPolygon"){if(jr==="GeometryCollection"){for(const on of or.geometry.geometries)ds(Gr,{id:qr,geometry:on,properties:or.properties},dr,Sr);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const on of Br){const Pn=[];Po(on,Pn,Kr,!0),un.push(Pn)}}Gr.push(vo(qr,jr,un,or.properties))}function bs(Gr,or){or.push(gs(Gr[0]),ws(Gr[1]),0)}function Yo(Gr,or,dr,Sr){let Br,jr,Kr=0;for(let qr=0;qr<Gr.length;qr++){const on=gs(Gr[qr][0]),Pn=ws(Gr[qr][1]);or.push(on,Pn,0),qr>0&&(Kr+=Sr?(Br*Pn-on*jr)/2:Math.sqrt(Math.pow(on-Br,2)+Math.pow(Pn-jr,2))),Br=on,jr=Pn}const un=or.length-3;or[2]=1,co(or,0,un,dr),or[un+2]=1,or.size=Math.abs(Kr),or.start=0,or.end=or.size}function Po(Gr,or,dr,Sr){for(let Br=0;Br<Gr.length;Br++){const jr=[];Yo(Gr[Br],jr,dr,Sr),or.push(jr)}}function gs(Gr){return Gr/360+.5}function ws(Gr){const or=Math.sin(Gr*Math.PI/180),dr=.5-.25*Math.log((1+or)/(1-or))/Math.PI;return dr<0?0:dr>1?1:dr}function go(Gr,or,dr,Sr,Br,jr,Kr,un){if(Sr/=or,jr>=(dr/=or)&&Kr<Sr)return Gr;if(Kr<dr||jr>=Sr)return null;const qr=[];for(const on of Gr){const Pn=on.geometry;let An=on.type;const Zn=Br===0?on.minX:on.minY,so=Br===0?on.maxX:on.maxY;if(Zn>=dr&&so<Sr){qr.push(on);continue}if(so<dr||Zn>=Sr)continue;let po=[];if(An==="Point"||An==="MultiPoint")Su(Pn,po,dr,Sr,Br);else if(An==="LineString")zs(Pn,po,dr,Sr,Br,!1,un.lineMetrics);else if(An==="MultiLineString")du(Pn,po,dr,Sr,Br,!1);else if(An==="Polygon")du(Pn,po,dr,Sr,Br,!0);else if(An==="MultiPolygon")for(const Xo of Pn){const Co=[];du(Xo,Co,dr,Sr,Br,!0),Co.length&&po.push(Co)}if(po.length){if(un.lineMetrics&&An==="LineString"){for(const Xo of po)qr.push(vo(on.id,An,Xo,on.tags));continue}An!=="LineString"&&An!=="MultiLineString"||(po.length===1?(An="LineString",po=po[0]):An="MultiLineString"),An!=="Point"&&An!=="MultiPoint"||(An=po.length===3?"Point":"MultiPoint"),qr.push(vo(on.id,An,po,on.tags))}}return qr.length?qr:null}function Su(Gr,or,dr,Sr,Br){for(let jr=0;jr<Gr.length;jr+=3){const Kr=Gr[jr+Br];Kr>=dr&&Kr<=Sr&&Pl(or,Gr[jr],Gr[jr+1],Gr[jr+2])}}function zs(Gr,or,dr,Sr,Br,jr,Kr){let un=Il(Gr);const qr=Br===0?Vu:Uu;let on,Pn,An=Gr.start;for(let Co=0;Co<Gr.length-3;Co+=3){const qo=Gr[Co],no=Gr[Co+1],us=Gr[Co+2],Jo=Gr[Co+3],Wo=Gr[Co+4],Es=Br===0?qo:no,Ss=Br===0?Jo:Wo;let Ls=!1;Kr&&(on=Math.sqrt(Math.pow(qo-Jo,2)+Math.pow(no-Wo,2))),Es<dr?Ss>dr&&(Pn=qr(un,qo,no,Jo,Wo,dr),Kr&&(un.start=An+on*Pn)):Es>Sr?Ss<Sr&&(Pn=qr(un,qo,no,Jo,Wo,Sr),Kr&&(un.start=An+on*Pn)):Pl(un,qo,no,us),Ss<dr&&Es>=dr&&(Pn=qr(un,qo,no,Jo,Wo,dr),Ls=!0),Ss>Sr&&Es<=Sr&&(Pn=qr(un,qo,no,Jo,Wo,Sr),Ls=!0),!jr&&Ls&&(Kr&&(un.end=An+on*Pn),or.push(un),un=Il(Gr)),Kr&&(An+=on)}let Zn=Gr.length-3;const so=Gr[Zn],po=Gr[Zn+1],Xo=Br===0?so:po;Xo>=dr&&Xo<=Sr&&Pl(un,so,po,Gr[Zn+2]),Zn=un.length-3,jr&&Zn>=3&&(un[Zn]!==un[0]||un[Zn+1]!==un[1])&&Pl(un,un[0],un[1],un[2]),un.length&&or.push(un)}function Il(Gr){const or=[];return or.size=Gr.size,or.start=Gr.start,or.end=Gr.end,or}function du(Gr,or,dr,Sr,Br,jr){for(const Kr of Gr)zs(Kr,or,dr,Sr,Br,jr,!1)}function Pl(Gr,or,dr,Sr){Gr.push(or,dr,Sr)}function Vu(Gr,or,dr,Sr,Br,jr){const Kr=(jr-or)/(Sr-or);return Pl(Gr,jr,dr+(Br-dr)*Kr,1),Kr}function Uu(Gr,or,dr,Sr,Br,jr){const Kr=(jr-dr)/(Br-dr);return Pl(Gr,or+(Sr-or)*Kr,jr,1),Kr}function Gu(Gr,or){const dr=[];for(let Sr=0;Sr<Gr.length;Sr++){const Br=Gr[Sr],jr=Br.type;let Kr;if(jr==="Point"||jr==="MultiPoint"||jr==="LineString")Kr=cp(Br.geometry,or);else if(jr==="MultiLineString"||jr==="Polygon"){Kr=[];for(const un of Br.geometry)Kr.push(cp(un,or))}else if(jr==="MultiPolygon"){Kr=[];for(const un of Br.geometry){const qr=[];for(const on of un)qr.push(cp(on,or));Kr.push(qr)}}dr.push(vo(Br.id,jr,Kr,Br.tags))}return dr}function cp(Gr,or){const dr=[];dr.size=Gr.size,Gr.start!==void 0&&(dr.start=Gr.start,dr.end=Gr.end);for(let Sr=0;Sr<Gr.length;Sr+=3)dr.push(Gr[Sr]+or,Gr[Sr+1],Gr[Sr+2]);return dr}function jp(Gr,or){if(Gr.transformed)return Gr;const dr=1<<Gr.z,Sr=Gr.x,Br=Gr.y;for(const jr of Gr.features){const Kr=jr.geometry,un=jr.type;if(jr.geometry=[],un===1)for(let qr=0;qr<Kr.length;qr+=2)jr.geometry.push(Dp(Kr[qr],Kr[qr+1],or,dr,Sr,Br));else for(let qr=0;qr<Kr.length;qr++){const on=[];for(let Pn=0;Pn<Kr[qr].length;Pn+=2)on.push(Dp(Kr[qr][Pn],Kr[qr][Pn+1],or,dr,Sr,Br));jr.geometry.push(on)}}return Gr.transformed=!0,Gr}function Dp(Gr,or,dr,Sr,Br,jr){return[Math.round(dr*(Gr*Sr-Br)),Math.round(dr*(or*Sr-jr))]}function Wu(Gr,or,dr,Sr,Br){const jr=or===Br.maxZoom?0:Br.tolerance/((1<<or)*Br.extent),Kr={features:[],numPoints:0,numSimplified:0,numFeatures:Gr.length,source:null,x:dr,y:Sr,z:or,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const un of Gr)Lp(Kr,un,jr,Br);return Kr}function Lp(Gr,or,dr,Sr){const Br=or.geometry,jr=or.type,Kr=[];if(Gr.minX=Math.min(Gr.minX,or.minX),Gr.minY=Math.min(Gr.minY,or.minY),Gr.maxX=Math.max(Gr.maxX,or.maxX),Gr.maxY=Math.max(Gr.maxY,or.maxY),jr==="Point"||jr==="MultiPoint")for(let un=0;un<Br.length;un+=3)Kr.push(Br[un],Br[un+1]),Gr.numPoints++,Gr.numSimplified++;else if(jr==="LineString")Yl(Kr,Br,Gr,dr,!1,!1);else if(jr==="MultiLineString"||jr==="Polygon")for(let un=0;un<Br.length;un++)Yl(Kr,Br[un],Gr,dr,jr==="Polygon",un===0);else if(jr==="MultiPolygon")for(let un=0;un<Br.length;un++){const qr=Br[un];for(let on=0;on<qr.length;on++)Yl(Kr,qr[on],Gr,dr,!0,on===0)}if(Kr.length){let un=or.tags||null;if(jr==="LineString"&&Sr.lineMetrics){un={};for(const on in or.tags)un[on]=or.tags[on];un.mapbox_clip_start=Br.start/Br.size,un.mapbox_clip_end=Br.end/Br.size}const qr={geometry:Kr,type:jr==="Polygon"||jr==="MultiPolygon"?3:jr==="LineString"||jr==="MultiLineString"?2:1,tags:un};or.id!==null&&(qr.id=or.id),Gr.features.push(qr)}}function Yl(Gr,or,dr,Sr,Br,jr){const Kr=Sr*Sr;if(Sr>0&&or.size<(Br?Kr:Sr))return void(dr.numPoints+=or.length/3);const un=[];for(let qr=0;qr<or.length;qr+=3)(Sr===0||or[qr+2]>Kr)&&(dr.numSimplified++,un.push(or[qr],or[qr+1])),dr.numPoints++;Br&&function(qr,on){let Pn=0;for(let An=0,Zn=qr.length,so=Zn-2;An<Zn;so=An,An+=2)Pn+=(qr[An]-qr[so])*(qr[An+1]+qr[so+1]);if(Pn>0===on)for(let An=0,Zn=qr.length;An<Zn/2;An+=2){const so=qr[An],po=qr[An+1];qr[An]=qr[Zn-2-An],qr[An+1]=qr[Zn-1-An],qr[Zn-2-An]=so,qr[Zn-1-An]=po}}(un,jr),Gr.push(un)}const J0={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Xl{constructor(or,dr){const Sr=(dr=this.options=function(jr,Kr){for(const un in Kr)jr[un]=Kr[un];return jr}(Object.create(J0),dr)).debug;if(Sr&&console.time("preprocess data"),dr.maxZoom<0||dr.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(dr.promoteId&&dr.generateId)throw new Error("promoteId and generateId cannot be used together.");let Br=function(jr,Kr){const un=[];if(jr.type==="FeatureCollection")for(let qr=0;qr<jr.features.length;qr++)ds(un,jr.features[qr],Kr,qr);else ds(un,jr.type==="Feature"?jr:{geometry:jr},Kr);return un}(or,dr);this.tiles={},this.tileCoords=[],Sr&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",dr.indexMaxZoom,dr.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Br=function(jr,Kr){const un=Kr.buffer/Kr.extent;let qr=jr;const on=go(jr,1,-1-un,un,0,-1,2,Kr),Pn=go(jr,1,1-un,2+un,0,-1,2,Kr);return(on||Pn)&&(qr=go(jr,1,-un,1+un,0,-1,2,Kr)||[],on&&(qr=Gu(on,1).concat(qr)),Pn&&(qr=qr.concat(Gu(Pn,-1)))),qr}(Br,dr),Br.length&&this.splitTile(Br,0,0,0),Sr&&(Br.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(or,dr,Sr,Br,jr,Kr,un){const qr=[or,dr,Sr,Br],on=this.options,Pn=on.debug;for(;qr.length;){Br=qr.pop(),Sr=qr.pop(),dr=qr.pop(),or=qr.pop();const An=1<<dr,Zn=Vs(dr,Sr,Br);let so=this.tiles[Zn];if(!so&&(Pn>1&&console.time("creation"),so=this.tiles[Zn]=Wu(or,dr,Sr,Br,on),this.tileCoords.push({z:dr,x:Sr,y:Br}),Pn)){Pn>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",dr,Sr,Br,so.numFeatures,so.numPoints,so.numSimplified),console.timeEnd("creation"));const Ls=`z${dr}`;this.stats[Ls]=(this.stats[Ls]||0)+1,this.total++}if(so.source=or,jr==null){if(dr===on.indexMaxZoom||so.numPoints<=on.indexMaxPoints)continue}else{if(dr===on.maxZoom||dr===jr)continue;if(jr!=null){const Ls=jr-dr;if(Sr!==Kr>>Ls||Br!==un>>Ls)continue}}if(so.source=null,or.length===0)continue;Pn>1&&console.time("clipping");const po=.5*on.buffer/on.extent,Xo=.5-po,Co=.5+po,qo=1+po;let no=null,us=null,Jo=null,Wo=null,Es=go(or,An,Sr-po,Sr+Co,0,so.minX,so.maxX,on),Ss=go(or,An,Sr+Xo,Sr+qo,0,so.minX,so.maxX,on);or=null,Es&&(no=go(Es,An,Br-po,Br+Co,1,so.minY,so.maxY,on),us=go(Es,An,Br+Xo,Br+qo,1,so.minY,so.maxY,on),Es=null),Ss&&(Jo=go(Ss,An,Br-po,Br+Co,1,so.minY,so.maxY,on),Wo=go(Ss,An,Br+Xo,Br+qo,1,so.minY,so.maxY,on),Ss=null),Pn>1&&console.timeEnd("clipping"),qr.push(no||[],dr+1,2*Sr,2*Br),qr.push(us||[],dr+1,2*Sr,2*Br+1),qr.push(Jo||[],dr+1,2*Sr+1,2*Br),qr.push(Wo||[],dr+1,2*Sr+1,2*Br+1)}}getTile(or,dr,Sr){or=+or,dr=+dr,Sr=+Sr;const Br=this.options,{extent:jr,debug:Kr}=Br;if(or<0||or>24)return null;const un=1<<or,qr=Vs(or,dr=dr+un&un-1,Sr);if(this.tiles[qr])return jp(this.tiles[qr],jr);Kr>1&&console.log("drilling down to z%d-%d-%d",or,dr,Sr);let on,Pn=or,An=dr,Zn=Sr;for(;!on&&Pn>0;)Pn--,An>>=1,Zn>>=1,on=this.tiles[Vs(Pn,An,Zn)];return on&&on.source?(Kr>1&&(console.log("found parent tile z%d-%d-%d",Pn,An,Zn),console.time("drilling down")),this.splitTile(on.source,Pn,An,Zn,or,dr,Sr),Kr>1&&console.timeEnd("drilling down"),this.tiles[qr]?jp(this.tiles[qr],jr):null):null}}function Vs(Gr,or,dr){return 32*((1<<Gr)*dr+or)+Gr}function Pm(Gr,or){const dr=Gr.tileID.canonical;if(!this._geoJSONIndex)return or(null,null);const Sr=this._geoJSONIndex.getTile(dr.z,dr.x,dr.y);if(!Sr)return or(null,null);const Br=new Ht(Sr.features);let jr=qn(Br);jr.byteOffset===0&&jr.byteLength===jr.buffer.byteLength||(jr=new Uint8Array(jr)),or(null,{vectorTile:Br,rawData:jr.buffer})}class up extends Mt{constructor(or,dr,Sr,Br,jr,Kr){super(or,dr,Sr,Br,Pm,Kr),jr&&(this.loadGeoJSON=jr),this._dynamicIndex=new mr}loadData(or,dr){const Sr=or&&or.request,Br=Sr&&Sr.collectResourceTiming;this.loadGeoJSON(or,(jr,Kr)=>{if(jr||!Kr)return dr(jr);if(typeof Kr!="object")return dr(new Error(`Input data given to '${or.source}' is not a valid GeoJSON object.`));{try{if(or.filter){const qr=at.z(or.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qr.result==="error")throw new Error(qr.value.map(on=>`${on.key}: ${on.message}`).join(", "));Kr.features=Kr.features.filter(on=>qr.value.evaluate({zoom:0},on))}or.dynamic?(Kr.type==="Feature"&&(Kr={type:"FeatureCollection",features:[Kr]}),or.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(Kr.features,this.loaded),or.cluster&&(Kr.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=or.cluster?new sn(function({superclusterOptions:qr,clusterProperties:on}){if(!on||!qr)return qr;const Pn={},An={},Zn={accumulated:null,zoom:0},so={properties:null},po=Object.keys(on);for(const Xo of po){const[Co,qo]=on[Xo],no=at.z(qo),us=at.z(typeof Co=="string"?[Co,["accumulated"],["get",Xo]]:Co);Pn[Xo]=no.value,An[Xo]=us.value}return qr.map=Xo=>{so.properties=Xo;const Co={};for(const qo of po)Co[qo]=Pn[qo].evaluate(Zn,so);return Co},qr.reduce=(Xo,Co)=>{so.properties=Co;for(const qo of po)Zn.accumulated=Xo[qo],Xo[qo]=An[qo].evaluate(Zn,so)},qr}(or)).load(Kr.features):or.dynamic?this._dynamicIndex:function(qr,on){return new Xl(qr,on)}(Kr,or.geojsonVtOptions)}catch(qr){return dr(qr)}const un={};if(Br){const qr=gt(Sr);qr&&(un.resourceTiming={},un.resourceTiming[or.source]=JSON.parse(JSON.stringify(qr)))}dr(null,un)}})}reloadTile(or,dr){const Sr=this.loaded;return Sr&&Sr[or.uid]?or.partial?dr(null,void 0):super.reloadTile(or,dr):this.loadTile(or,dr)}loadGeoJSON(or,dr){if(or.request)at.h(or.request,dr);else{if(typeof or.data!="string")return dr(new Error(`Input data given to '${or.source}' is not a valid GeoJSON object.`));try{return dr(null,JSON.parse(or.data))}catch{return dr(new Error(`Input data given to '${or.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(or,dr){try{dr(null,this._geoJSONIndex.getClusterExpansionZoom(or.clusterId))}catch(Sr){dr(Sr)}}getClusterChildren(or,dr){try{dr(null,this._geoJSONIndex.getChildren(or.clusterId))}catch(Sr){dr(Sr)}}getClusterLeaves(or,dr){try{dr(null,this._geoJSONIndex.getLeaves(or.clusterId,or.limit,or.offset))}catch(Sr){dr(Sr)}}}class Np{constructor(or,dr){this.tileID=new at.aQ(or.tileID.overscaledZ,or.tileID.wrap,or.tileID.canonical.z,or.tileID.canonical.x,or.tileID.canonical.y),this.tileZoom=or.tileZoom,this.uid=or.uid,this.zoom=or.zoom,this.canonical=or.tileID.canonical,this.pixelRatio=or.pixelRatio,this.tileSize=or.tileSize,this.source=or.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=or.projection,this.brightness=dr}parse(or,dr,Sr,Br){this.status="parsing";const jr=new at.aQ(Sr.tileID.overscaledZ,Sr.tileID.wrap,Sr.tileID.canonical.z,Sr.tileID.canonical.x,Sr.tileID.canonical.y),Kr={},un=dr.familiesBySource[Sr.source],qr=new at.dQ(jr,Sr.promoteId);return qr.bucketLayerIDs=[],qr.is3DTile=!0,at.e6(or).then(on=>{if(!on)return Br(new Error("Could not parse tile"));const Pn=at.e7(on,1/at.b7(Sr.tileID.canonical)),An=on.json.extensionsUsed&&on.json.extensionsUsed.includes("MAPBOX_mesh_features")||on.json.asset.extras&&on.json.asset.extras.MAPBOX_mesh_features,Zn=on.json.extensionsUsed&&on.json.extensionsUsed.includes("EXT_meshopt_compression"),so=new at.Y(this.zoom,{brightness:this.brightness});for(const po in un)for(const Xo of un[po]){const Co=Xo[0];qr.bucketLayerIDs.push(Xo.map(no=>no.id)),Co.recalculate(so,[]);const qo=new at.e8(Pn,jr,An,Zn,this.brightness,qr);An||(qo.needsUpload=!0),Kr[Co.fqid]=qo,qo.evaluate(Co)}this.status="done",Br(null,{buckets:Kr,featureIndex:qr})}).catch(on=>Br(new Error(on.message)))}}class Is{constructor(or,dr,Sr,Br,jr,Kr){this.actor=or,this.layerIndex=dr,this.brightness=Kr,this.loading={},this.loaded={}}loadTile(or,dr){const Sr=or.uid,Br=this.loading[Sr]=new Np(or,this.brightness);at.e5(or.request,(jr,Kr)=>{const un=!this.loading[Sr];return delete this.loading[Sr],un||jr?(Br.status="done",un||(this.loaded[Sr]=Br),dr(jr)):Kr&&Kr.byteLength!==0?void Br.parse(Kr,this.layerIndex,or,(qr,on)=>{Br.status="done",this.loaded=this.loaded||{},this.loaded[Sr]=Br,qr||!on?dr(qr):dr(null,on)}):(Br.status="done",this.loaded[Sr]=Br,dr())})}reloadTile(or,dr){const Sr=this.loaded,Br=or.uid;if(Sr&&Sr[Br]){const jr=Sr[Br];jr.projection=or.projection,jr.brightness=or.brightness;const Kr=(un,qr)=>{jr.reloadCallback&&(delete jr.reloadCallback,this.loadTile(or,dr)),dr(un,qr)};jr.status==="parsing"?jr.reloadCallback=Kr:jr.status==="done"&&this.loadTile(or,dr)}}abortTile(or,dr){const Sr=or.uid;this.loading[Sr]&&delete this.loading[Sr],dr()}removeTile(or,dr){const Sr=this.loaded,Br=or.uid;Sr&&Sr[Br]&&delete Sr[Br],dr()}}class Cm{constructor(or){this.self=or,this.actor=new at.e9(or,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=at.aK({name:"mercator"}),this.workerSourceTypes={vector:Mt,geojson:up,"batched-model":Is},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(dr,Sr)=>{if(this.workerSourceTypes[dr])throw new Error(`Worker source with name "${dr}" already registered.`);this.workerSourceTypes[dr]=Sr},this.self.registerRTLTextPlugin=dr=>{if(at.ea.isParsed())throw new Error("RTL text plugin already registered.");at.ea.applyArabicShaping=dr.applyArabicShaping,at.ea.processBidirectionalText=dr.processBidirectionalText,at.ea.processStyledBidirectionalText=dr.processStyledBidirectionalText}}clearCaches(or,dr,Sr){delete this.layerIndexes[or],delete this.availableImages[or],delete this.workerSources[or],delete this.demWorkerSources[or],delete this.rasterArrayWorkerSource,Sr()}checkIfReady(or,dr,Sr){Sr()}setReferrer(or,dr){this.referrer=dr}spriteLoaded(or,{scope:dr,isLoaded:Sr}){if(this.isSpriteLoaded[or]||(this.isSpriteLoaded[or]={}),this.isSpriteLoaded[or][dr]=Sr,this.workerSources[or]&&this.workerSources[or][dr])for(const Br in this.workerSources[or][dr]){const jr=this.workerSources[or][dr][Br];for(const Kr in jr){const un=jr[Kr];un instanceof Mt&&(un.isSpriteLoaded=Sr,un.fire(new at.g("isSpriteLoaded")))}}}setImages(or,{scope:dr,images:Sr},Br){if(this.availableImages[or]||(this.availableImages[or]={}),this.availableImages[or][dr]=Sr,this.workerSources[or]&&this.workerSources[or][dr]){for(const jr in this.workerSources[or][dr]){const Kr=this.workerSources[or][dr][jr];for(const un in Kr)Kr[un].availableImages=Sr}Br()}else Br()}setProjection(or,dr){this.projections[or]=at.aK(dr)}setBrightness(or,dr,Sr){this.brightness=dr,Sr()}setLayers(or,dr,Sr){this.getLayerIndex(or,dr.scope).replace(dr.layers,dr.options),Sr()}updateLayers(or,dr,Sr){this.getLayerIndex(or,dr.scope).update(dr.layers,dr.removedIds,dr.options),Sr()}loadTile(or,dr,Sr){dr.projection=this.projections[or]||this.defaultProjection,this.getWorkerSource(or,dr.type,dr.source,dr.scope).loadTile(dr,Sr)}loadDEMTile(or,dr,Sr){this.getDEMWorkerSource(or,dr.source,dr.scope).loadTile(dr,Sr)}decodeRasterArray(or,dr,Sr){this.getRasterArrayWorkerSource().decodeRasterArray(dr,Sr)}reloadTile(or,dr,Sr){dr.projection=this.projections[or]||this.defaultProjection,this.getWorkerSource(or,dr.type,dr.source,dr.scope).reloadTile(dr,Sr)}abortTile(or,dr,Sr){this.getWorkerSource(or,dr.type,dr.source,dr.scope).abortTile(dr,Sr)}removeTile(or,dr,Sr){this.getWorkerSource(or,dr.type,dr.source,dr.scope).removeTile(dr,Sr)}removeSource(or,dr,Sr){if(!(this.workerSources[or]&&this.workerSources[or][dr.scope]&&this.workerSources[or][dr.scope][dr.type]&&this.workerSources[or][dr.scope][dr.type][dr.source]))return;const Br=this.workerSources[or][dr.scope][dr.type][dr.source];delete this.workerSources[or][dr.scope][dr.type][dr.source],Br.removeSource!==void 0?Br.removeSource(dr,Sr):Sr()}loadWorkerSource(or,dr,Sr){try{this.self.importScripts(dr.url),Sr()}catch(Br){Sr(Br.toString())}}syncRTLPluginState(or,dr,Sr){try{at.ea.setState(dr);const Br=at.ea.getPluginURL();if(at.ea.isLoaded()&&!at.ea.isParsed()&&Br!=null){this.self.importScripts(Br);const jr=at.ea.isParsed();Sr(jr?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Br}`),jr)}}catch(Br){Sr(Br.toString())}}setDracoUrl(or,dr){this.dracoUrl=dr}getAvailableImages(or,dr){this.availableImages[or]||(this.availableImages[or]={});let Sr=this.availableImages[or][dr];return Sr||(Sr=[]),Sr}getLayerIndex(or,dr){this.layerIndexes[or]||(this.layerIndexes[or]={});let Sr=this.layerIndexes[or][dr];return Sr||(Sr=this.layerIndexes[or][dr]=new St,Sr.scope=dr),Sr}getWorkerSource(or,dr,Sr,Br){return this.workerSources[or]||(this.workerSources[or]={}),this.workerSources[or][Br]||(this.workerSources[or][Br]={}),this.workerSources[or][Br][dr]||(this.workerSources[or][Br][dr]={}),this.isSpriteLoaded[or]||(this.isSpriteLoaded[or]={}),this.workerSources[or][Br][dr][Sr]||(this.workerSources[or][Br][dr][Sr]=new this.workerSourceTypes[dr]({send:(jr,Kr,un,qr,on,Pn)=>{this.actor.send(jr,Kr,un,or,on,Pn)},scheduler:this.actor.scheduler},this.getLayerIndex(or,Br),this.getAvailableImages(or,Br),this.isSpriteLoaded[or][Br],void 0,this.brightness)),this.workerSources[or][Br][dr][Sr]}getDEMWorkerSource(or,dr,Sr){return this.demWorkerSources[or]||(this.demWorkerSources[or]={}),this.demWorkerSources[or][Sr]||(this.demWorkerSources[or][Sr]={}),this.demWorkerSources[or][Sr][dr]||(this.demWorkerSources[or][Sr][dr]=new $t),this.demWorkerSources[or][Sr][dr]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new jt),this.rasterArrayWorkerSource}enforceCacheSizeLimit(or,dr){at.eb(dr)}getWorkerPerformanceMetrics(or,dr,Sr){Sr(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Cm(self)),Cm}),ut(["./shared"],function(at){var gt=bt;function bt(xt){return!function(ct){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var vt,Tt,Pt=new Blob([""],{type:"text/javascript"}),Ot=URL.createObjectURL(Pt);try{Tt=new Worker(Ot),vt=!0}catch{vt=!1}return Tt&&Tt.terminate(),URL.revokeObjectURL(Ot),vt}()?function(){var vt=document.createElement("canvas");vt.width=vt.height=1;var Tt=vt.getContext("2d");if(!Tt)return!1;var Pt=Tt.getImageData(0,0,1,1);return Pt&&Pt.width===vt.width}()?(wt[pt=ct&&ct.failIfMajorPerformanceCaveat]===void 0&&(wt[pt]=function(vt){var Tt,Pt=function(Ot){var Ft=document.createElement("canvas"),Vt=Object.create(bt.webGLContextAttributes);return Vt.failIfMajorPerformanceCaveat=Ot,Ft.getContext("webgl2",Vt)}(vt);if(!Pt)return!1;try{Tt=Pt.createShader(Pt.VERTEX_SHADER)}catch{return!1}return!(!Tt||Pt.isContextLost())&&(Pt.shaderSource(Tt,"void main() {}"),Pt.compileShader(Tt),Pt.getShaderParameter(Tt,Pt.COMPILE_STATUS)===!0)}(pt)),wt[pt]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var pt}(xt)}var wt={};function St(xt,ct,pt){const vt=document.createElement(xt);return ct!=null&&(vt.className=ct),pt&&pt.appendChild(vt),vt}function kt(xt,ct,pt){const vt=document.createElementNS("http://www.w3.org/2000/svg",xt);for(const Tt of Object.keys(ct))vt.setAttributeNS(null,Tt,String(ct[Tt]));return pt&&pt.appendChild(vt),vt}bt.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const Rt=typeof document<"u"?document.documentElement&&document.documentElement.style:null,It=Rt&&Rt.userSelect!==void 0?"userSelect":"WebkitUserSelect";let Dt;function Mt(){Rt&&It&&(Dt=Rt[It],Rt[It]="none")}function $t(){Rt&&It&&(Rt[It]=Dt)}function jt(xt){xt.preventDefault(),xt.stopPropagation(),window.removeEventListener("click",jt,!0)}function Nt(){window.addEventListener("click",jt,!0),window.setTimeout(()=>{window.removeEventListener("click",jt,!0)},0)}function Ut(xt,ct){const pt=xt.getBoundingClientRect();return tr(xt,pt,ct)}function Ht(xt,ct){const pt=xt.getBoundingClientRect(),vt=[];for(let Tt=0;Tt<ct.length;Tt++)vt.push(tr(xt,pt,ct[Tt]));return vt}function Kt(xt){return window.InstallTrigger!==void 0&&xt.button===2&&xt.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:xt.button}function tr(xt,ct,pt){const vt=xt.offsetWidth===ct.width?1:xt.offsetWidth/ct.width;return new at.P((pt.clientX-ct.left)*vt,(pt.clientY-ct.top)*vt)}class mr{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(ct,pt){this._updatedSourceCaches[ct]=pt,this.setDirty()}discardSourceCacheUpdate(ct){delete this._updatedSourceCaches[ct]}updateLayer(ct){const pt=ct.scope;this._updatedLayers[pt]=this._updatedLayers[pt]||new Set,this._updatedLayers[pt].add(ct.id),this.setDirty()}removeLayer(ct){const pt=ct.scope;this._removedLayers[pt]=this._removedLayers[pt]||{},this._updatedLayers[pt]=this._updatedLayers[pt]||new Set,this._removedLayers[pt][ct.id]=ct,this._updatedLayers[pt].delete(ct.id),this._updatedPaintProps.delete(ct.fqid),this.setDirty()}getRemovedLayer(ct){return this._removedLayers[ct.scope]?this._removedLayers[ct.scope][ct.id]:null}discardLayerRemoval(ct){this._removedLayers[ct.scope]&&delete this._removedLayers[ct.scope][ct.id]}getLayerUpdatesByScope(){const ct={};for(const pt in this._updatedLayers)ct[pt]=ct[pt]||{},ct[pt].updatedIds=Array.from(this._updatedLayers[pt].values());for(const pt in this._removedLayers)ct[pt]=ct[pt]||{},ct[pt].removedIds=Object.keys(this._removedLayers[pt]);return ct}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(ct){this._updatedPaintProps.add(ct.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(ct){this._updatedImages.add(ct),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}const vr={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class wr{constructor(ct,pt,vt,Tt,Pt,Ot){this.length=pt.length,this.attributes=vt,this.itemSize=pt.bytesPerElement,this.dynamicDraw=Tt,this.instanceCount=Ot,this.context=ct;const Ft=ct.gl;this.buffer=Ft.createBuffer(),ct.bindVertexBuffer.set(this.buffer),Ft.bufferData(Ft.ARRAY_BUFFER,pt.arrayBuffer,this.dynamicDraw?Ft.DYNAMIC_DRAW:Ft.STATIC_DRAW),this.dynamicDraw||Pt||pt.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(ct){const pt=this.context.gl;this.bind(),pt.bufferSubData(pt.ARRAY_BUFFER,0,ct.arrayBuffer)}enableAttributes(ct,pt){for(let vt=0;vt<this.attributes.length;vt++){const Tt=pt.attributes[this.attributes[vt].name];Tt!==void 0&&ct.enableVertexAttribArray(Tt)}}setVertexAttribPointers(ct,pt,vt){for(let Tt=0;Tt<this.attributes.length;Tt++){const Pt=this.attributes[Tt],Ot=pt.attributes[Pt.name];Ot!==void 0&&ct.vertexAttribPointer(Ot,Pt.components,ct[vr[Pt.type]],!1,this.itemSize,Pt.offset+this.itemSize*(vt||0))}}setVertexAttribDivisor(ct,pt,vt){for(let Tt=0;Tt<this.attributes.length;Tt++){const Pt=pt.attributes[this.attributes[Tt].name];Pt!==void 0&&this.instanceCount&&this.instanceCount>0&&ct.vertexAttribDivisor(Pt,vt)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class yr{constructor(ct){this.gl=ct.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(ct){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Or extends yr{getDefault(){return at.C.transparent}set(ct){const pt=this.current;(ct.r!==pt.r||ct.g!==pt.g||ct.b!==pt.b||ct.a!==pt.a||this.dirty)&&(this.gl.clearColor(ct.r,ct.g,ct.b,ct.a),this.current=ct,this.dirty=!1)}}class Nr extends yr{getDefault(){return 1}set(ct){(ct!==this.current||this.dirty)&&(this.gl.clearDepth(ct),this.current=ct,this.dirty=!1)}}class Lr extends yr{getDefault(){return 0}set(ct){(ct!==this.current||this.dirty)&&(this.gl.clearStencil(ct),this.current=ct,this.dirty=!1)}}class ar extends yr{getDefault(){return[!0,!0,!0,!0]}set(ct){const pt=this.current;(ct[0]!==pt[0]||ct[1]!==pt[1]||ct[2]!==pt[2]||ct[3]!==pt[3]||this.dirty)&&(this.gl.colorMask(ct[0],ct[1],ct[2],ct[3]),this.current=ct,this.dirty=!1)}}class hr extends yr{getDefault(){return!0}set(ct){(ct!==this.current||this.dirty)&&(this.gl.depthMask(ct),this.current=ct,this.dirty=!1)}}class Qt extends yr{getDefault(){return 255}set(ct){(ct!==this.current||this.dirty)&&(this.gl.stencilMask(ct),this.current=ct,this.dirty=!1)}}class ir extends yr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(ct){const pt=this.current;(ct.func!==pt.func||ct.ref!==pt.ref||ct.mask!==pt.mask||this.dirty)&&(this.gl.stencilFunc(ct.func,ct.ref,ct.mask),this.current=ct,this.dirty=!1)}}class Mr extends yr{getDefault(){const ct=this.gl;return[ct.KEEP,ct.KEEP,ct.KEEP]}set(ct){const pt=this.current;(ct[0]!==pt[0]||ct[1]!==pt[1]||ct[2]!==pt[2]||this.dirty)&&(this.gl.stencilOp(ct[0],ct[1],ct[2]),this.current=ct,this.dirty=!1)}}class Cr extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;ct?pt.enable(pt.STENCIL_TEST):pt.disable(pt.STENCIL_TEST),this.current=ct,this.dirty=!1}}class rn extends yr{getDefault(){return[0,1]}set(ct){const pt=this.current;(ct[0]!==pt[0]||ct[1]!==pt[1]||this.dirty)&&(this.gl.depthRange(ct[0],ct[1]),this.current=ct,this.dirty=!1)}}class fn extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;ct?pt.enable(pt.DEPTH_TEST):pt.disable(pt.DEPTH_TEST),this.current=ct,this.dirty=!1}}class Dn extends yr{getDefault(){return this.gl.LESS}set(ct){(ct!==this.current||this.dirty)&&(this.gl.depthFunc(ct),this.current=ct,this.dirty=!1)}}class Yn extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;ct?pt.enable(pt.BLEND):pt.disable(pt.BLEND),this.current=ct,this.dirty=!1}}class eo extends yr{getDefault(){const ct=this.gl;return[ct.ONE,ct.ZERO,ct.ONE,ct.ZERO]}set(ct){const pt=this.current;(ct[0]!==pt[0]||ct[1]!==pt[1]||ct[2]!==pt[2]||ct[3]!==pt[3]||this.dirty)&&(this.gl.blendFuncSeparate(ct[0],ct[1],ct[2],ct[3]),this.current=ct,this.dirty=!1)}}class Gn extends yr{getDefault(){return at.C.transparent}set(ct){const pt=this.current;(ct.r!==pt.r||ct.g!==pt.g||ct.b!==pt.b||ct.a!==pt.a||this.dirty)&&(this.gl.blendColor(ct.r,ct.g,ct.b,ct.a),this.current=ct,this.dirty=!1)}}class lo extends yr{getDefault(){return this.gl.FUNC_ADD}set(ct){(ct!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(ct,ct),this.current=ct,this.dirty=!1)}}class mn extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;ct?pt.enable(pt.CULL_FACE):pt.disable(pt.CULL_FACE),this.current=ct,this.dirty=!1}}class Hn extends yr{getDefault(){return this.gl.BACK}set(ct){(ct!==this.current||this.dirty)&&(this.gl.cullFace(ct),this.current=ct,this.dirty=!1)}}class Rn extends yr{getDefault(){return this.gl.CCW}set(ct){(ct!==this.current||this.dirty)&&(this.gl.frontFace(ct),this.current=ct,this.dirty=!1)}}let dn=class extends yr{getDefault(){return null}set(xt){(xt!==this.current||this.dirty)&&(this.gl.useProgram(xt),this.current=xt,this.dirty=!1)}};class qn extends yr{getDefault(){return this.gl.TEXTURE0}set(ct){(ct!==this.current||this.dirty)&&(this.gl.activeTexture(ct),this.current=ct,this.dirty=!1)}}class On extends yr{getDefault(){const ct=this.gl;return[0,0,ct.drawingBufferWidth,ct.drawingBufferHeight]}set(ct){const pt=this.current;(ct[0]!==pt[0]||ct[1]!==pt[1]||ct[2]!==pt[2]||ct[3]!==pt[3]||this.dirty)&&(this.gl.viewport(ct[0],ct[1],ct[2],ct[3]),this.current=ct,this.dirty=!1)}}class xo extends yr{getDefault(){return null}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.bindFramebuffer(pt.FRAMEBUFFER,ct),this.current=ct,this.dirty=!1}}class Io extends yr{getDefault(){return null}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.bindRenderbuffer(pt.RENDERBUFFER,ct),this.current=ct,this.dirty=!1}}class $o extends yr{getDefault(){return null}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.bindTexture(pt.TEXTURE_2D,ct),this.current=ct,this.dirty=!1}}class Zr extends yr{getDefault(){return null}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.bindBuffer(pt.ARRAY_BUFFER,ct),this.current=ct,this.dirty=!1}}class pn extends yr{getDefault(){return null}set(ct){const pt=this.gl;pt.bindBuffer(pt.ELEMENT_ARRAY_BUFFER,ct),this.current=ct,this.dirty=!1}}class sn extends yr{getDefault(){return null}set(ct){this.gl&&(ct!==this.current||this.dirty)&&(this.gl.bindVertexArray(ct),this.current=ct,this.dirty=!1)}}class wn extends yr{getDefault(){return 4}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.pixelStorei(pt.UNPACK_ALIGNMENT,ct),this.current=ct,this.dirty=!1}}class Xn extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.pixelStorei(pt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ct),this.current=ct,this.dirty=!1}}class Fn extends yr{getDefault(){return!1}set(ct){if(ct===this.current&&!this.dirty)return;const pt=this.gl;pt.pixelStorei(pt.UNPACK_FLIP_Y_WEBGL,ct),this.current=ct,this.dirty=!1}}class ro extends yr{constructor(ct,pt){super(ct),this.context=ct,this.parent=pt}getDefault(){return null}}class No extends ro{setDirty(){this.dirty=!0}set(ct){if(ct===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const pt=this.gl;pt.framebufferTexture2D(pt.FRAMEBUFFER,pt.COLOR_ATTACHMENT0,pt.TEXTURE_2D,ct,0),this.current=ct,this.dirty=!1}}class co extends ro{attachment(){return this.gl.DEPTH_ATTACHMENT}set(ct){if(ct===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const pt=this.gl;pt.framebufferRenderbuffer(pt.FRAMEBUFFER,this.attachment(),pt.RENDERBUFFER,ct),this.current=ct,this.dirty=!1}}class Ao extends ro{attachment(){return this.gl.DEPTH_ATTACHMENT}set(ct){if(ct===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const pt=this.gl;pt.framebufferTexture2D(pt.FRAMEBUFFER,this.attachment(),pt.TEXTURE_2D,ct,0),this.current=ct,this.dirty=!1}}class vo extends co{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Fo{constructor(ct,pt,vt,Tt,Pt){this.context=ct,this.width=pt,this.height=vt;const Ot=this.framebuffer=ct.gl.createFramebuffer();Tt&&(this.colorAttachment=new No(ct,Ot)),Pt&&(this.depthAttachmentType=Pt,this.depthAttachment=Pt==="renderbuffer"?new co(ct,Ot):new Ao(ct,Ot))}destroy(){const ct=this.context.gl;if(this.colorAttachment){const pt=this.colorAttachment.get();pt&&ct.deleteTexture(pt)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const pt=this.depthAttachment.get();pt&&ct.deleteRenderbuffer(pt)}else{const pt=this.depthAttachment.get();pt&&ct.deleteTexture(pt)}ct.deleteFramebuffer(this.framebuffer)}}class ds{constructor(ct,pt){this.gl=ct,this.clearColor=new Or(this),this.clearDepth=new Nr(this),this.clearStencil=new Lr(this),this.colorMask=new ar(this),this.depthMask=new hr(this),this.stencilMask=new Qt(this),this.stencilFunc=new ir(this),this.stencilOp=new Mr(this),this.stencilTest=new Cr(this),this.depthRange=new rn(this),this.depthTest=new fn(this),this.depthFunc=new Dn(this),this.blend=new Yn(this),this.blendFunc=new eo(this),this.blendColor=new Gn(this),this.blendEquation=new lo(this),this.cullFace=new mn(this),this.cullFaceSide=new Hn(this),this.frontFace=new Rn(this),this.program=new dn(this),this.activeTexture=new qn(this),this.viewport=new On(this),this.bindFramebuffer=new xo(this),this.bindRenderbuffer=new Io(this),this.bindTexture=new $o(this),this.bindVertexBuffer=new Zr(this),this.bindElementBuffer=new pn(this),this.bindVertexArrayOES=new sn(this),this.pixelStoreUnpack=new wn(this),this.pixelStoreUnpackPremultiplyAlpha=new Xn(this),this.pixelStoreUnpackFlipY=new Fn(this),this.options=pt?{...pt}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=ct.getExtension("EXT_texture_filter_anisotropic")||ct.getExtension("MOZ_EXT_texture_filter_anisotropic")||ct.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=ct.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=ct.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=ct.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=ct.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=ct.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=ct.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=ct.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=ct.getParameter(ct.MAX_TEXTURE_SIZE),this.maxPointSize=ct.getParameter(ct.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(ct,pt,vt){return new at.I(this,ct,pt,vt)}createVertexBuffer(ct,pt,vt,Tt,Pt){return new wr(this,ct,pt,vt,Tt,Pt)}createRenderbuffer(ct,pt,vt){const Tt=this.gl,Pt=Tt.createRenderbuffer();return this.bindRenderbuffer.set(Pt),Tt.renderbufferStorage(Tt.RENDERBUFFER,ct,pt,vt),this.bindRenderbuffer.set(null),Pt}createFramebuffer(ct,pt,vt,Tt){return new Fo(this,ct,pt,vt,Tt)}clear({color:ct,depth:pt,stencil:vt,colorMask:Tt}){const Pt=this.gl;let Ot=0;ct&&(Ot|=Pt.COLOR_BUFFER_BIT,this.clearColor.set(ct),this.colorMask.set(Tt||[!0,!0,!0,!0])),pt!==void 0&&(Ot|=Pt.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(pt),this.depthMask.set(!0)),vt!==void 0&&(Ot|=Pt.STENCIL_BUFFER_BIT,this.clearStencil.set(vt),this.stencilMask.set(255)),Pt.clear(Ot)}setCullFace(ct){ct.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(ct.mode),this.frontFace.set(ct.frontFace))}setDepthMode(ct){ct.func!==this.gl.ALWAYS||ct.mask?(this.depthTest.set(!0),this.depthFunc.set(ct.func),this.depthMask.set(ct.mask),this.depthRange.set(ct.range)):this.depthTest.set(!1)}setStencilMode(ct){ct.test.func!==this.gl.ALWAYS||ct.mask?(this.stencilTest.set(!0),this.stencilMask.set(ct.mask),this.stencilOp.set([ct.fail,ct.depthFail,ct.pass]),this.stencilFunc.set({func:ct.test.func,ref:ct.ref,mask:ct.test.mask})):this.stencilTest.set(!1)}setColorMode(ct){at.d(ct.blendFunction,at.a.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(ct.blendFunction),this.blendColor.set(ct.blendColor),ct.blendEquation?this.blendEquation.set(ct.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(ct.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}class bs{constructor(ct,pt,vt,Tt){const Pt={width:vt[0],height:vt[1],data:null},Ot=ct.gl;this.targetColorTexture=new at.T(ct,Pt,Ot.RGBA,{useMipmap:!1}),this.backgroundColorTexture=new at.T(ct,Pt,Ot.RGBA,{useMipmap:!1}),this.context=ct,this.updateParticleTexture(pt,Tt),this.lastInvalidatedAt=0}updateParticleTexture(ct,pt){if(this.particleTextureDimension===pt.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const vt=this.context.gl,Tt=pt.width*pt.height;this.particleTexture0=new at.T(this.context,pt,vt.RGBA,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new at.T(this.context,pt,vt.RGBA,{premultiply:!1,useMipmap:!1});const Pt=new at.S;Pt.reserve(Tt);for(let Ot=0;Ot<Tt;Ot++)Pt.emplaceBack(Ot);this.particleIndexBuffer=this.context.createVertexBuffer(Pt,at.p.members,!0),this.particleSegment=at.b.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=pt.width}update(ct){return!(this.lastInvalidatedAt<ct&&(this.lastInvalidatedAt=at.e.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}class Yo extends at.E{constructor(ct){super(),this.requestManager=ct,this.models={"":{}},this.numModelsLoading={}}loadModel(ct,pt){return at.l(this.requestManager.transformRequest(pt,at.R.Model).url).then(vt=>{if(!vt)return;const Tt=at.c(vt),Pt=new at.M(ct,void 0,void 0,Tt);return Pt.computeBoundsAndApplyParent(),Pt}).catch(vt=>{if(vt&&vt.status===404)return null;this.fire(new at.f(new Error(`Could not load model ${ct} from ${pt}: ${vt.message}`)))})}load(ct,pt){this.models[pt]||(this.models[pt]={});const vt=Object.keys(ct);this.numModelsLoading[pt]=(this.numModelsLoading[pt]||0)+vt.length;const Tt=[];for(const Pt of vt)Tt.push(this.loadModel(Pt,ct[Pt]));Promise.allSettled(Tt).then(Pt=>{for(let Ot=0;Ot<Pt.length;Ot++){const{status:Ft,value:Vt}=Pt[Ot];Ft==="fulfilled"&&Vt&&(this.models[pt][vt[Ot]]={model:Vt,numReferences:1})}this.numModelsLoading[pt]-=vt.length,this.fire(new at.g("data",{dataType:"style"}))}).catch(Pt=>{this.fire(new at.f(new Error(`Could not load models: ${Pt.message}`)))})}isLoaded(){for(const ct in this.numModelsLoading)if(this.numModelsLoading[ct]>0)return!1;return!0}hasModel(ct,pt){return!!this.getModel(ct,pt)}getModel(ct,pt){return this.models[pt]||(this.models[pt]={}),this.models[pt][ct]?this.models[pt][ct].model:void 0}addModel(ct,pt,vt){this.models[vt]||(this.models[vt]={}),this.hasModel(ct,vt)&&this.models[vt][ct].numReferences++,this.load({[ct]:this.requestManager.normalizeModelURL(pt)},vt)}addModels(ct,pt){this.models[pt]||(this.models[pt]={});const vt={};for(const Tt in ct)this.models[pt][Tt]={},vt[Tt]=this.requestManager.normalizeModelURL(ct[Tt]);this.load(vt,pt)}addModelsFromBucket(ct,pt){this.models[pt]||(this.models[pt]={});const vt={};for(const Tt of ct)this.hasModel(Tt,pt)?this.models[pt][Tt].numReferences++:vt[Tt]=this.requestManager.normalizeModelURL(Tt);this.load(vt,pt)}removeModel(ct,pt){if(this.models[pt]&&this.models[pt][ct]&&(this.models[pt][ct].numReferences--,this.models[pt][ct].numReferences===0)){const vt=this.models[pt][ct].model;delete this.models[pt][ct],vt.destroy()}}listModels(ct){return this.models[ct]||(this.models[ct]={}),Object.keys(this.models[ct])}upload(ct,pt){this.models[pt]||(this.models[pt]={});for(const vt in this.models[pt])this.models[pt][vt].model&&this.models[pt][vt].model.upload(ct.context)}}function Po(xt){const{userImage:ct}=xt;return!!(ct&&ct.render&&ct.render())&&(xt.data.replace(new Uint8Array(ct.data.buffer)),!0)}class gs extends at.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0}createScope(ct){this.images[ct]={},this.loaded[ct]=!1,this.updatedImages[ct]={},this.patterns[ct]={},this.callbackDispatchedThisFrame[ct]={},this.atlasImage[ct]=new at.j({width:1,height:1})}isLoaded(){for(const ct in this.loaded)if(!this.loaded[ct])return!1;return!0}setLoaded(ct,pt){if(this.loaded[pt]!==ct&&(this.loaded[pt]=ct,ct)){for(const{ids:vt,callback:Tt}of this.requestors)this._notify(vt,pt,Tt);this.requestors=[]}}hasImage(ct,pt){return!!this.getImage(ct,pt)}getImage(ct,pt){return this.images[pt][ct]}addImage(ct,pt,vt){this._validate(ct,vt)&&(this.images[pt][ct]=vt)}_validate(ct,pt){let vt=!0;return this._validateStretch(pt.stretchX,pt.data&&pt.data.width)||(this.fire(new at.f(new Error(`Image "${ct}" has invalid "stretchX" value`))),vt=!1),this._validateStretch(pt.stretchY,pt.data&&pt.data.height)||(this.fire(new at.f(new Error(`Image "${ct}" has invalid "stretchY" value`))),vt=!1),this._validateContent(pt.content,pt)||(this.fire(new at.f(new Error(`Image "${ct}" has invalid "content" value`))),vt=!1),vt}_validateStretch(ct,pt){if(!ct)return!0;let vt=0;for(const Tt of ct){if(Tt[0]<vt||Tt[1]<Tt[0]||pt<Tt[1])return!1;vt=Tt[1]}return!0}_validateContent(ct,pt){return!(ct&&(ct.length!==4||ct[0]<0||pt.data.width<ct[0]||ct[1]<0||pt.data.height<ct[1]||ct[2]<0||pt.data.width<ct[2]||ct[3]<0||pt.data.height<ct[3]||ct[2]<ct[0]||ct[3]<ct[1]))}updateImage(ct,pt,vt){vt.version=this.images[pt][ct].version+1,this.images[pt][ct]=vt,this.updatedImages[pt][ct]=!0}removeImage(ct,pt){const vt=this.images[pt][ct];delete this.images[pt][ct],delete this.patterns[pt][ct],vt.userImage&&vt.userImage.onRemove&&vt.userImage.onRemove()}listImages(ct){return Object.keys(this.images[ct])}getImages(ct,pt,vt){let Tt=!0;const Pt=!!this.loaded[pt];if(!Pt)for(const Ot of ct)this.images[pt][Ot]||(Tt=!1);Pt||Tt?this._notify(ct,pt,vt):this.requestors.push({ids:ct,scope:pt,callback:vt})}getUpdatedImages(ct){return this.updatedImages[ct]}_notify(ct,pt,vt){const Tt={};for(const Pt of ct){this.images[pt][Pt]||this.fire(new at.g("styleimagemissing",{id:Pt}));const Ot=this.images[pt][Pt];Ot?Tt[Pt]={data:Ot.data.clone(),pixelRatio:Ot.pixelRatio,sdf:Ot.sdf,version:Ot.version,stretchX:Ot.stretchX,stretchY:Ot.stretchY,content:Ot.content,hasRenderCallback:!!(Ot.userImage&&Ot.userImage.render)}:at.w(`Image "${Pt}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}vt(null,Tt)}getPixelSize(ct){const{width:pt,height:vt}=this.atlasImage[ct];return{width:pt,height:vt}}getPattern(ct,pt,vt){const Tt=this.patterns[pt][ct],Pt=this.getImage(ct,pt);if(!Pt)return null;if(Tt&&Tt.position.version===Pt.version)return Tt.position;if(Tt)Tt.position.version=Pt.version;else{const Ot={w:Pt.data.width+2,h:Pt.data.height+2,x:0,y:0},Ft=new at.m(Ot,Pt);this.patterns[pt][ct]={bin:Ot,position:Ft}}return this._updatePatternAtlas(pt,vt),this.patterns[pt][ct].position}bind(ct,pt){const vt=ct.gl;let Tt=this.atlasTexture[pt];Tt?this.dirty&&(Tt.update(this.atlasImage[pt]),this.dirty=!1):(Tt=new at.T(ct,this.atlasImage[pt],vt.RGBA),this.atlasTexture[pt]=Tt),Tt.bind(vt.LINEAR,vt.CLAMP_TO_EDGE)}_updatePatternAtlas(ct,pt){const vt=[];for(const Ft in this.patterns[ct])vt.push(this.patterns[ct][Ft].bin);const{w:Tt,h:Pt}=at.k(vt),Ot=this.atlasImage[ct];Ot.resize({width:Tt||1,height:Pt||1});for(const Ft in this.patterns[ct]){const{bin:Vt}=this.patterns[ct][Ft],Gt=Vt.x+1,Zt=Vt.y+1,Yt=this.images[ct][Ft].data,er=Yt.width,rr=Yt.height;at.j.copy(Yt,Ot,{x:0,y:0},{x:Gt,y:Zt},{width:er,height:rr},pt),at.j.copy(Yt,Ot,{x:0,y:rr-1},{x:Gt,y:Zt-1},{width:er,height:1},pt),at.j.copy(Yt,Ot,{x:0,y:0},{x:Gt,y:Zt+rr},{width:er,height:1},pt),at.j.copy(Yt,Ot,{x:er-1,y:0},{x:Gt-1,y:Zt},{width:1,height:rr},pt),at.j.copy(Yt,Ot,{x:0,y:0},{x:Gt+er,y:Zt},{width:1,height:rr},pt)}this.dirty=!0}beginFrame(){for(const ct in this.images)this.callbackDispatchedThisFrame[ct]={}}dispatchRenderCallbacks(ct,pt){for(const vt of ct){if(this.callbackDispatchedThisFrame[pt][vt])continue;this.callbackDispatchedThisFrame[pt][vt]=!0;const Tt=this.images[pt][vt];Po(Tt)&&this.updateImage(vt,pt,Tt)}}}function ws(xt){const ct=xt.key,pt=xt.value,vt=xt.valueSpec||{},Tt=xt.objectElementValidators||{},Pt=xt.style,Ot=xt.styleSpec;let Ft=[];const Vt=at.o(pt);if(Vt!=="object")return[new at.V(ct,pt,`object expected, ${Vt} found`)];for(const Gt in pt){const Zt=Gt.split(".")[0];let Yt;Tt[Zt]?Yt=Tt[Zt]:vt[Zt]?Yt=Is:Tt["*"]?Yt=Tt["*"]:vt["*"]&&(Yt=Is),Yt?Ft=Ft.concat(Yt({key:(ct&&`${ct}.`)+Gt,value:pt[Gt],valueSpec:vt[Zt]||vt["*"],style:Pt,styleSpec:Ot,object:pt,objectKey:Gt},pt)):Ft.push(new at.n(ct,pt[Gt],`unknown property "${Gt}"`))}for(const Gt in vt)Tt[Gt]||vt[Gt].required&&vt[Gt].default===void 0&&pt[Gt]===void 0&&Ft.push(new at.V(ct,pt,`missing required property "${Gt}"`));return Ft}function go(xt){const ct=xt.value,pt=xt.valueSpec,vt=xt.style,Tt=xt.styleSpec,Pt=xt.key,Ot=xt.arrayElementValidator||Is;if(at.o(ct)!=="array")return[new at.V(Pt,ct,`array expected, ${at.o(ct)} found`)];if(pt.length&&ct.length!==pt.length)return[new at.V(Pt,ct,`array length ${pt.length} expected, length ${ct.length} found`)];if(pt["min-length"]&&ct.length<pt["min-length"])return[new at.V(Pt,ct,`array length at least ${pt["min-length"]} expected, length ${ct.length} found`)];let Ft={type:pt.value,values:pt.values,minimum:pt.minimum,maximum:pt.maximum,function:void 0};Tt.$version<7&&(Ft.function=pt.function),at.o(pt.value)==="object"&&(Ft=pt.value);let Vt=[];for(let Gt=0;Gt<ct.length;Gt++)Vt=Vt.concat(Ot({array:ct,arrayIndex:Gt,value:ct[Gt],valueSpec:Ft,style:vt,styleSpec:Tt,key:`${Pt}[${Gt}]`},!0));return Vt}function Su(xt){const ct=xt.key,pt=xt.value,vt=xt.valueSpec;let Tt=at.o(pt);if(Tt==="number"&&pt!=pt&&(Tt="NaN"),Tt!=="number")return[new at.V(ct,pt,`number expected, ${Tt} found`)];if("minimum"in vt){let Pt=vt.minimum;if(at.o(vt.minimum)==="array"&&(Pt=vt.minimum[xt.arrayIndex]),pt<Pt)return[new at.V(ct,pt,`${pt} is less than the minimum value ${Pt}`)]}if("maximum"in vt){let Pt=vt.maximum;if(at.o(vt.maximum)==="array"&&(Pt=vt.maximum[xt.arrayIndex]),pt>Pt)return[new at.V(ct,pt,`${pt} is greater than the maximum value ${Pt}`)]}return[]}function zs(xt){const ct=xt.valueSpec,pt=at.u(xt.value.type);let vt,Tt,Pt,Ot={};const Ft=pt!=="categorical"&&xt.value.property===void 0,Vt=!Ft,Gt=at.o(xt.value.stops)==="array"&&at.o(xt.value.stops[0])==="array"&&at.o(xt.value.stops[0][0])==="object",Zt=ws({key:xt.key,value:xt.value,valueSpec:xt.styleSpec.function,style:xt.style,styleSpec:xt.styleSpec,objectElementValidators:{stops:function(rr){if(pt==="identity")return[new at.V(rr.key,rr.value,'identity function may not have a "stops" property')];let sr=[];const lr=rr.value;return sr=sr.concat(go({key:rr.key,value:lr,valueSpec:rr.valueSpec,style:rr.style,styleSpec:rr.styleSpec,arrayElementValidator:Yt})),at.o(lr)==="array"&&lr.length===0&&sr.push(new at.V(rr.key,lr,"array must have at least one stop")),sr},default:function(rr){return Is({key:rr.key,value:rr.value,valueSpec:ct,style:rr.style,styleSpec:rr.styleSpec})}}});return pt==="identity"&&Ft&&Zt.push(new at.V(xt.key,xt.value,'missing required property "property"')),pt==="identity"||xt.value.stops||Zt.push(new at.V(xt.key,xt.value,'missing required property "stops"')),pt==="exponential"&&xt.valueSpec.expression&&!at.s(xt.valueSpec)&&Zt.push(new at.V(xt.key,xt.value,"exponential functions not supported")),xt.styleSpec.$version>=8&&(Vt&&!at.r(xt.valueSpec)?Zt.push(new at.V(xt.key,xt.value,"property functions not supported")):Ft&&!at.t(xt.valueSpec)&&Zt.push(new at.V(xt.key,xt.value,"zoom functions not supported"))),pt!=="categorical"&&!Gt||xt.value.property!==void 0||Zt.push(new at.V(xt.key,xt.value,'"property" property is required')),Zt;function Yt(rr){let sr=[];const lr=rr.value,cr=rr.key;if(at.o(lr)!=="array")return[new at.V(cr,lr,`array expected, ${at.o(lr)} found`)];if(lr.length!==2)return[new at.V(cr,lr,`array length 2 expected, length ${lr.length} found`)];if(Gt){if(at.o(lr[0])!=="object")return[new at.V(cr,lr,`object expected, ${at.o(lr[0])} found`)];if(lr[0].zoom===void 0)return[new at.V(cr,lr,"object stop key must have zoom")];if(lr[0].value===void 0)return[new at.V(cr,lr,"object stop key must have value")];const ur=at.u(lr[0].zoom);if(typeof ur!="number")return[new at.V(cr,lr[0].zoom,"stop zoom values must be numbers")];if(Pt&&Pt>ur)return[new at.V(cr,lr[0].zoom,"stop zoom values must appear in ascending order")];ur!==Pt&&(Pt=ur,Tt=void 0,Ot={}),sr=sr.concat(ws({key:`${cr}[0]`,value:lr[0],valueSpec:{zoom:{}},style:rr.style,styleSpec:rr.styleSpec,objectElementValidators:{zoom:Su,value:er}}))}else sr=sr.concat(er({key:`${cr}[0]`,value:lr[0],valueSpec:{},style:rr.style,styleSpec:rr.styleSpec},lr));return at.v(at.x(lr[1]))?sr.concat([new at.V(`${cr}[1]`,lr[1],"expressions are not allowed in function stops.")]):sr.concat(Is({key:`${cr}[1]`,value:lr[1],valueSpec:ct,style:rr.style,styleSpec:rr.styleSpec}))}function er(rr,sr){const lr=at.o(rr.value),cr=at.u(rr.value),ur=rr.value!==null?rr.value:sr;if(vt){if(lr!==vt)return[new at.V(rr.key,ur,`${lr} stop domain type must match previous stop domain type ${vt}`)]}else vt=lr;if(lr!=="number"&&lr!=="string"&&lr!=="boolean"&&typeof cr!="number"&&typeof cr!="string"&&typeof cr!="boolean")return[new at.V(rr.key,ur,"stop domain value must be a number, string, or boolean")];if(lr!=="number"&&pt!=="categorical"){let br=`number expected, ${lr} found`;return at.r(ct)&&pt===void 0&&(br+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at.V(rr.key,ur,br)]}return pt!=="categorical"||lr!=="number"||typeof cr=="number"&&isFinite(cr)&&Math.floor(cr)===cr?pt!=="categorical"&&lr==="number"&&typeof cr=="number"&&typeof Tt=="number"&&Tt!==void 0&&cr<Tt?[new at.V(rr.key,ur,"stop domain values must appear in ascending order")]:(Tt=cr,pt==="categorical"&&cr in Ot?[new at.V(rr.key,ur,"stop domain values must be unique")]:(Ot[cr]=!0,[])):[new at.V(rr.key,ur,`integer expected, found ${String(cr)}`)]}}function Il(xt){const ct=(xt.expressionContext==="property"?at.y:at.z)(at.x(xt.value),xt.valueSpec);if(ct.result==="error")return ct.value.map(vt=>new at.V(`${xt.key}${vt.key}`,xt.value,vt.message));const pt=ct.value.expression||ct.value._styleExpression.expression;if(xt.expressionContext==="property"&&xt.propertyKey==="text-font"&&!pt.outputDefined())return[new at.V(xt.key,xt.value,`Invalid data expression for "${xt.propertyKey}". Output values must be contained as literals within the expression.`)];if(xt.expressionContext==="property"&&xt.propertyType==="layout"&&!at.A(pt))return[new at.V(xt.key,xt.value,'"feature-state" data expressions are not supported with layout properties.')];if(xt.expressionContext==="filter")return du(pt,xt);if(xt.expressionContext&&xt.expressionContext.indexOf("cluster")===0){if(!at.B(pt,["zoom","feature-state"]))return[new at.V(xt.key,xt.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(xt.expressionContext==="cluster-initial"&&!at.D(pt))return[new at.V(xt.key,xt.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function du(xt,ct){const pt=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(ct.valueSpec&&ct.valueSpec.expression)for(const Tt of ct.valueSpec.expression.parameters)pt.delete(Tt);if(pt.size===0)return[];const vt=[];return xt instanceof at.F&&pt.has(xt.name)?[new at.V(ct.key,ct.value,`["${xt.name}"] expression is not supported in a filter for a ${ct.object.type} layer with id: ${ct.object.id}`)]:(xt.eachChild(Tt=>{vt.push(...du(Tt,ct))}),vt)}function Pl(xt){const ct=xt.key,pt=xt.value,vt=xt.valueSpec,Tt=[];return Array.isArray(vt.values)?vt.values.indexOf(at.u(pt))===-1&&Tt.push(new at.V(ct,pt,`expected one of [${vt.values.join(", ")}], ${JSON.stringify(pt)} found`)):Object.keys(vt.values).indexOf(at.u(pt))===-1&&Tt.push(new at.V(ct,pt,`expected one of [${Object.keys(vt.values).join(", ")}], ${JSON.stringify(pt)} found`)),Tt}function Vu(xt){return at.H(at.x(xt.value))?Il(at.q({},xt,{expressionContext:"filter",valueSpec:xt.styleSpec[`filter_${xt.layerType||"fill"}`]})):Uu(xt)}function Uu(xt){const ct=xt.value,pt=xt.key;if(at.o(ct)!=="array")return[new at.V(pt,ct,`array expected, ${at.o(ct)} found`)];const vt=xt.styleSpec;let Tt,Pt=[];if(ct.length<1)return[new at.V(pt,ct,"filter array must have at least 1 element")];switch(Pt=Pt.concat(Pl({key:`${pt}[0]`,value:ct[0],valueSpec:vt.filter_operator,style:xt.style,styleSpec:xt.styleSpec})),at.u(ct[0])){case"<":case"<=":case">":case">=":ct.length>=2&&at.u(ct[1])==="$type"&&Pt.push(new at.V(pt,ct,`"$type" cannot be use with operator "${ct[0]}"`));case"==":case"!=":ct.length!==3&&Pt.push(new at.V(pt,ct,`filter array for operator "${ct[0]}" must have 3 elements`));case"in":case"!in":ct.length>=2&&(Tt=at.o(ct[1]),Tt!=="string"&&Pt.push(new at.V(`${pt}[1]`,ct[1],`string expected, ${Tt} found`)));for(let Ot=2;Ot<ct.length;Ot++)Tt=at.o(ct[Ot]),at.u(ct[1])==="$type"?Pt=Pt.concat(Pl({key:`${pt}[${Ot}]`,value:ct[Ot],valueSpec:vt.geometry_type,style:xt.style,styleSpec:xt.styleSpec})):Tt!=="string"&&Tt!=="number"&&Tt!=="boolean"&&Pt.push(new at.V(`${pt}[${Ot}]`,ct[Ot],`string, number, or boolean expected, ${Tt} found`));break;case"any":case"all":case"none":for(let Ot=1;Ot<ct.length;Ot++)Pt=Pt.concat(Uu({key:`${pt}[${Ot}]`,value:ct[Ot],style:xt.style,styleSpec:xt.styleSpec}));break;case"has":case"!has":Tt=at.o(ct[1]),ct.length!==2?Pt.push(new at.V(pt,ct,`filter array for "${ct[0]}" operator must have 2 elements`)):Tt!=="string"&&Pt.push(new at.V(`${pt}[1]`,ct[1],`string expected, ${Tt} found`))}return Pt}function Gu(xt,ct){const pt=xt.key,vt=xt.style,Tt=xt.layer,Pt=xt.styleSpec,Ot=xt.value,Ft=xt.objectKey,Vt=Pt[`${ct}_${xt.layerType}`];if(!Vt)return[];const Gt=Ft.match(/^(.*)-transition$/);if(ct==="paint"&&Gt&&Vt[Gt[1]]&&Vt[Gt[1]].transition)return Is({key:pt,value:Ot,valueSpec:Pt.transition,style:vt,styleSpec:Pt});const Zt=xt.valueSpec||Vt[Ft];if(!Zt)return[new at.n(pt,Ot,`unknown property "${Ft}"`)];let Yt;if(at.o(Ot)==="string"&&at.r(Zt)&&!Zt.tokens&&(Yt=/^{([^}]+)}$/.exec(Ot))){const rr=`\`{ "type": "identity", "property": ${Yt?JSON.stringify(Yt[1]):'"_"'} }\``;return[new at.V(pt,Ot,`"${Ft}" does not support interpolation syntax
Use an identity property function instead: ${rr}.`)]}const er=[];if(xt.layerType==="symbol")Ft!=="text-field"||!vt||vt.glyphs||vt.imports||er.push(new at.V(pt,Ot,'use of "text-field" requires a style "glyphs" property')),Ft==="text-font"&&at.J(at.x(Ot))&&at.u(Ot.type)==="identity"&&er.push(new at.V(pt,Ot,'"text-font" does not support identity functions'));else if(xt.layerType==="model"&&ct==="paint"&&Tt&&Tt.layout&&Tt.layout.hasOwnProperty("model-id")&&at.r(Zt)&&(at.K(Zt)||at.t(Zt))){const rr=at.y(at.x(Ot),Zt),sr=rr.value.expression||rr.value._styleExpression.expression;sr&&!at.B(sr,["measure-light"])&&(Ft==="model-emissive-strength"&&at.D(sr)&&at.A(sr)||er.push(new at.V(pt,Ot,`${Ft} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return er.concat(Is({key:xt.key,value:Ot,valueSpec:Zt,style:vt,styleSpec:Pt,expressionContext:"property",propertyType:ct,propertyKey:Ft}))}function cp(xt){return Gu(xt,"paint")}function jp(xt){return Gu(xt,"layout")}function Dp(xt){let ct=[];const pt=xt.value,vt=xt.key,Tt=xt.style,Pt=xt.styleSpec;pt.type||pt.ref||ct.push(new at.V(vt,pt,'either "type" or "ref" is required'));let Ot=at.u(pt.type);const Ft=at.u(pt.ref);if(pt.id){const Vt=at.u(pt.id);for(let Gt=0;Gt<xt.arrayIndex;Gt++){const Zt=Tt.layers[Gt];at.u(Zt.id)===Vt&&ct.push(new at.V(vt,pt.id,`duplicate layer id "${pt.id}", previously used at line ${Zt.id.__line__}`))}}if("ref"in pt){let Vt;["type","source","source-layer","filter","layout"].forEach(Gt=>{Gt in pt&&ct.push(new at.V(vt,pt[Gt],`"${Gt}" is prohibited for ref layers`))}),Tt.layers.forEach(Gt=>{at.u(Gt.id)===Ft&&(Vt=Gt)}),Vt?Vt.ref?ct.push(new at.V(vt,pt.ref,"ref cannot reference another ref layer")):Ot=at.u(Vt.type):typeof Ft=="string"&&ct.push(new at.V(vt,pt.ref,`ref layer "${Ft}" not found`))}else if(Ot!=="background"&&Ot!=="sky"&&Ot!=="slot")if(pt.source){const Vt=Tt.sources&&Tt.sources[pt.source],Gt=Vt&&at.u(Vt.type);Vt?Gt==="vector"&&Ot==="raster"?ct.push(new at.V(vt,pt.source,`layer "${pt.id}" requires a raster source`)):Gt==="raster"&&Ot!=="raster"?ct.push(new at.V(vt,pt.source,`layer "${pt.id}" requires a vector source`)):Gt!=="vector"||pt["source-layer"]?Gt==="raster-dem"&&Ot!=="hillshade"?ct.push(new at.V(vt,pt.source,"raster-dem source can only be used with layer type 'hillshade'.")):Gt!=="raster-array"||["raster","raster-particle"].includes(Ot)?Ot!=="line"||!pt.paint||!pt.paint["line-gradient"]&&!pt.paint["line-trim-offset"]||Gt==="geojson"&&Vt.lineMetrics?Ot==="raster-particle"&&Gt!=="raster-array"&&ct.push(new at.V(vt,pt.source,`layer "${pt.id}" requires a 'raster-array' source.`)):ct.push(new at.V(vt,pt,`layer "${pt.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):ct.push(new at.V(vt,pt.source,"raster-array source can only be used with layer type 'raster'.")):ct.push(new at.V(vt,pt,`layer "${pt.id}" must specify a "source-layer"`)):ct.push(new at.V(vt,pt.source,`source "${pt.source}" not found`))}else ct.push(new at.V(vt,pt,'missing required property "source"'));return ct=ct.concat(ws({key:vt,value:pt,valueSpec:Pt.layer,style:xt.style,styleSpec:xt.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Is({key:`${vt}.type`,value:pt.type,valueSpec:Pt.layer.type,style:xt.style,styleSpec:xt.styleSpec,object:pt,objectKey:"type"}),filter:Vt=>Vu(at.q({layerType:Ot},Vt)),layout:Vt=>ws({layer:pt,key:Vt.key,value:Vt.value,valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{"*":Gt=>jp(at.q({layerType:Ot},Gt))}}),paint:Vt=>ws({layer:pt,key:Vt.key,value:Vt.value,valueSpec:{},style:Vt.style,styleSpec:Vt.styleSpec,objectElementValidators:{"*":Gt=>cp(at.q({layerType:Ot,layer:pt},Gt))}})}})),ct}function Wu(xt){const ct=xt.value,pt=xt.key,vt=at.o(ct);return vt!=="string"?[new at.V(pt,ct,`string expected, ${vt} found`)]:[]}const Lp={promoteId:function({key:xt,value:ct}){if(at.o(ct)==="string")return Wu({key:xt,value:ct});{const pt=[];for(const vt in ct)pt.push(...Wu({key:`${xt}.${vt}`,value:ct[vt]}));return pt}}};function Yl(xt){const ct=xt.value,pt=xt.key,vt=xt.styleSpec,Tt=xt.style;if(!ct.type)return[new at.V(pt,ct,'"type" is required')];const Pt=at.u(ct.type);let Ot=[];switch(["vector","raster","raster-dem","raster-array"].includes(Pt)&&(ct.url||ct.tiles||Ot.push(new at.n(pt,ct,'Either "url" or "tiles" is required.'))),Pt){case"vector":case"raster":case"raster-dem":case"raster-array":return Ot=Ot.concat(ws({key:pt,value:ct,valueSpec:vt[`source_${Pt.replace("-","_")}`],style:xt.style,styleSpec:vt,objectElementValidators:Lp})),Ot;case"geojson":if(Ot=ws({key:pt,value:ct,valueSpec:vt.source_geojson,style:Tt,styleSpec:vt,objectElementValidators:Lp}),ct.cluster)for(const Ft in ct.clusterProperties){const[Vt,Gt]=ct.clusterProperties[Ft],Zt=typeof Vt=="string"?[Vt,["accumulated"],["get",Ft]]:Vt;Ot.push(...Il({key:`${pt}.${Ft}.map`,value:Gt,expressionContext:"cluster-map"})),Ot.push(...Il({key:`${pt}.${Ft}.reduce`,value:Zt,expressionContext:"cluster-reduce"}))}return Ot;case"video":return ws({key:pt,value:ct,valueSpec:vt.source_video,style:Tt,styleSpec:vt});case"image":return ws({key:pt,value:ct,valueSpec:vt.source_image,style:Tt,styleSpec:vt});case"canvas":return[new at.V(pt,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Pl({key:`${pt}.type`,value:ct.type,valueSpec:{values:J0(vt)},style:Tt,styleSpec:vt})}}function J0(xt){return xt.source.reduce((ct,pt)=>{const vt=xt[pt];return vt.type.type==="enum"&&(ct=ct.concat(Object.keys(vt.type.values))),ct},[])}function Xl(xt){const ct=xt.value,pt=xt.styleSpec,vt=pt.light,Tt=xt.style;let Pt=[];const Ot=at.o(ct);if(ct===void 0)return Pt;if(Ot!=="object")return Pt=Pt.concat([new at.V("light",ct,`object expected, ${Ot} found`)]),Pt;for(const Ft in ct){const Vt=Ft.match(/^(.*)-transition$/);Pt=Pt.concat(Vt&&vt[Vt[1]]&&vt[Vt[1]].transition?Is({key:Ft,value:ct[Ft],valueSpec:pt.transition,style:Tt,styleSpec:pt}):vt[Ft]?Is({key:Ft,value:ct[Ft],valueSpec:vt[Ft],style:Tt,styleSpec:pt}):[new at.V(Ft,ct[Ft],`unknown property "${Ft}"`)])}return Pt}function Vs(xt){const ct=xt.value;let pt=[];if(!ct)return pt;const vt=at.o(ct);if(vt!=="object")return pt=pt.concat([new at.V("light-3d",ct,`object expected, ${vt} found`)]),pt;const Tt=xt.styleSpec,Pt=Tt["light-3d"],Ot=xt.key,Ft=xt.style,Vt=xt.style.lights;for(const Yt of["type","id"])if(!(Yt in ct))return pt=pt.concat([new at.V("light-3d",ct,`missing property ${Yt} on light`)]),pt;if(ct.type&&Vt)for(let Yt=0;Yt<xt.arrayIndex;Yt++){const er=at.u(ct.type),rr=Vt[Yt];at.u(rr.type)===er&&pt.push(new at.V(Ot,ct.id,`duplicate light type "${ct.type}", previously defined at line ${rr.id.__line__}`))}const Gt=`properties_light_${ct.type}`;if(!(Gt in Tt))return pt=pt.concat([new at.V("light-3d",ct,`Invalid light type ${ct.type}`)]),pt;const Zt=Tt[Gt];for(const Yt in ct)if(Yt==="properties"){const er=ct[Yt],rr=at.o(er);if(rr!=="object")return pt=pt.concat([new at.V("properties",er,`object expected, ${rr} found`)]),pt;for(const sr in er)pt=pt.concat(Zt[sr]?Is({key:sr,value:er[sr],valueSpec:Zt[sr],style:Ft,styleSpec:Tt}):[new at.n(xt.key,er[sr],`unknown property "${sr}"`)])}else{const er=Yt.match(/^(.*)-transition$/);pt=pt.concat(er&&Pt[er[1]]&&Pt[er[1]].transition?Is({key:Yt,value:ct[Yt],valueSpec:Tt.transition,style:Ft,styleSpec:Tt}):Pt[Yt]?Is({key:Yt,value:ct[Yt],valueSpec:Pt[Yt],style:Ft,styleSpec:Tt}):[new at.n(Yt,ct[Yt],`unknown property "${Yt}"`)])}return pt}function Pm(xt){const ct=xt.value,pt=xt.key,vt=xt.style,Tt=xt.styleSpec,Pt=Tt.terrain;let Ot=[];const Ft=at.o(ct);if(ct===void 0||Ft==="null")return Ot;if(Ft!=="object")return Ot=Ot.concat([new at.V("terrain",ct,`object expected, ${Ft} found`)]),Ot;for(const Vt in ct){const Gt=Vt.match(/^(.*)-transition$/);Ot=Ot.concat(Gt&&Pt[Gt[1]]&&Pt[Gt[1]].transition?Is({key:Vt,value:ct[Vt],valueSpec:Tt.transition,style:vt,styleSpec:Tt}):Pt[Vt]?Is({key:Vt,value:ct[Vt],valueSpec:Pt[Vt],style:vt,styleSpec:Tt}):[new at.n(Vt,ct[Vt],`unknown property "${Vt}"`)])}if(ct.source){const Vt=vt.sources&&vt.sources[ct.source],Gt=Vt&&at.u(Vt.type);Vt?Gt!=="raster-dem"&&Ot.push(new at.V(pt,ct.source,`terrain cannot be used with a source of type ${String(Gt)}, it only be used with a "raster-dem" source type`)):Ot.push(new at.V(pt,ct.source,`source "${ct.source}" not found`))}else Ot.push(new at.V(pt,ct,'terrain is missing required property "source"'));return Ot}function up(xt){const ct=xt.value,pt=xt.style,vt=xt.styleSpec,Tt=vt.fog;let Pt=[];const Ot=at.o(ct);if(ct===void 0)return Pt;if(Ot!=="object")return Pt=Pt.concat([new at.V("fog",ct,`object expected, ${Ot} found`)]),Pt;for(const Ft in ct){const Vt=Ft.match(/^(.*)-transition$/);Pt=Pt.concat(Vt&&Tt[Vt[1]]&&Tt[Vt[1]].transition?Is({key:Ft,value:ct[Ft],valueSpec:vt.transition,style:pt,styleSpec:vt}):Tt[Ft]?Is({key:Ft,value:ct[Ft],valueSpec:Tt[Ft],style:pt,styleSpec:vt}):[new at.n(Ft,ct[Ft],`unknown property "${Ft}"`)])}return Pt}const Np={"*":()=>[],array:go,boolean:function(xt){const ct=xt.value,pt=xt.key,vt=at.o(ct);return vt!=="boolean"?[new at.V(pt,ct,`boolean expected, ${vt} found`)]:[]},number:Su,color:function(xt){const ct=xt.key,pt=xt.value,vt=at.o(pt);return vt!=="string"?[new at.V(ct,pt,`color expected, ${vt} found`)]:at.G(pt)===null?[new at.V(ct,pt,`color expected, "${pt}" found`)]:[]},enum:Pl,filter:Vu,function:zs,layer:Dp,object:ws,source:Yl,model:at.L,light:Xl,"light-3d":Vs,terrain:Pm,fog:up,string:Wu,formatted:function(xt){return Wu(xt).length===0?[]:Il(xt)},resolvedImage:function(xt){return Wu(xt).length===0?[]:Il(xt)},projection:function(xt){const ct=xt.value,pt=xt.styleSpec,vt=pt.projection,Tt=xt.style;let Pt=[];const Ot=at.o(ct);if(Ot==="object")for(const Ft in ct)Pt=Pt.concat(Is({key:Ft,value:ct[Ft],valueSpec:vt[Ft],style:Tt,styleSpec:pt}));else Ot!=="string"&&(Pt=Pt.concat([new at.V("projection",ct,`object or string expected, ${Ot} found`)]));return Pt},import:function(xt){const{value:ct,styleSpec:pt}=xt,{data:vt,...Tt}=ct;Object.defineProperty(Tt,"__line__",{value:ct.__line__,enumerable:!1});let Pt=ws(at.q({},xt,{value:Tt,valueSpec:pt.import}));return at.u(Tt.id)===""&&Pt.push(new at.V(`${xt.key}.id`,Tt,"import id can't be an empty string")),vt&&(Pt=Pt.concat(Gr(vt,pt,{key:`${xt.key}.data`}))),Pt}};function Is(xt,ct=!1){const pt=xt.value,vt=xt.valueSpec,Tt=xt.styleSpec;if(vt.expression&&at.J(at.u(pt)))return zs(xt);if(vt.expression&&at.v(at.x(pt)))return Il(xt);if(vt.type&&Np[vt.type]){const Pt=Np[vt.type](xt);return ct===!0&&Pt.length>0&&at.o(xt.value)==="array"?Il(xt):Pt}return ws(at.q({},xt,{valueSpec:vt.type?Tt[vt.type]:vt}))}function Cm(xt){const ct=xt.value,pt=xt.key,vt=Wu(xt);return vt.length||(ct.indexOf("{fontstack}")===-1&&vt.push(new at.V(pt,ct,'"glyphs" url must include a "{fontstack}" token')),ct.indexOf("{range}")===-1&&vt.push(new at.V(pt,ct,'"glyphs" url must include a "{range}" token'))),vt}function Gr(xt,ct=at.N,pt={}){return Is({key:pt.key||"",value:xt,valueSpec:ct.$root,styleSpec:ct,style:xt,objectElementValidators:{glyphs:Cm,"*":()=>[]}})}function or(xt,ct=at.N){return Zn(Gr(xt,ct))}const dr=xt=>Zn(Yl(xt)),Sr=xt=>Zn(Xl(xt)),Br=xt=>Zn(Vs(xt)),jr=xt=>Zn(Pm(xt)),Kr=xt=>Zn(up(xt)),un=xt=>Zn(Dp(xt)),qr=xt=>Zn(Vu(xt)),on=xt=>Zn(cp(xt)),Pn=xt=>Zn(jp(xt)),An=xt=>Zn(at.L(xt));function Zn(xt){return xt.slice().sort((ct,pt)=>ct.line&&pt.line?ct.line-pt.line:0)}function so(xt,ct){let pt=!1;if(ct&&ct.length)for(const vt of ct)vt instanceof at.n?at.w(vt.message):(xt.fire(new at.f(new Error(vt.message))),pt=!0);return pt}let po;class Xo extends at.E{constructor(ct,pt="flat"){super(),this._transitionable=new at.O(po||(po=new at.U({anchor:new at.W(at.N.light.anchor),position:new at.X(at.N.light.position),color:new at.W(at.N.light.color),intensity:new at.W(at.N.light.intensity)}))),this.setLight(ct,pt),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(ct,pt,vt={}){this._validate(Sr,ct,vt)||(this._transitionable.setTransitionOrValue(ct),this.id=pt)}updateTransitions(ct){this._transitioning=this._transitionable.transitioned(ct,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ct){this.properties=this._transitioning.possiblyEvaluate(ct)}_validate(ct,pt,vt){return(!vt||vt.validate!==!1)&&so(this,ct.call(or,at.Q({value:pt,style:{glyphs:!0,sprite:!0},styleSpec:at.N})))}}const Co=new at.U({source:new at.W(at.N.terrain.source),exaggeration:new at.W(at.N.terrain.exaggeration)});let qo=class extends at.E{constructor(xt,ct,pt,vt){super(),this.scope=pt,this._transitionable=new at.O(Co,pt,vt),this._transitionable.setTransitionOrValue(xt,vt),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=ct}get(){return this._transitionable.serialize()}set(xt,ct){this._transitionable.setTransitionOrValue(xt,ct)}updateTransitions(xt){this._transitioning=this._transitionable.transitioned(xt,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(xt){this.properties=this._transitioning.possiblyEvaluate(xt)}getExaggeration(xt){return this._transitioning.possiblyEvaluate(new at.Y(xt)).get("exaggeration")}isZoomDependent(){const xt=this._transitionable._values.exaggeration;return xt!=null&&xt.value!=null&&xt.value.expression!=null&&xt.value.expression instanceof at.Z}};const no=45,us=65,Jo=.05;function Wo(xt,ct,pt,vt){const Tt=at.a0(no,us,pt),[Pt,Ot]=Es(xt,vt);let Ft=1-Math.min(1,Math.exp((ct-Pt)/(Ot-Pt)*-6));return Ft*=Ft*Ft,Ft=Math.min(1,1.00747*Ft),Ft*Tt*xt.alpha}function Es(xt,ct){const pt=.5/Math.tan(.5*ct);return[xt.range[0]+pt,xt.range[1]+pt]}function Ss(xt,ct,pt,vt,Tt){const Pt=at.$.transformMat4([],[ct,pt,vt],Tt.mercatorFogMatrix);return Wo(xt,at.$.length(Pt),Tt.pitch,Tt._fov)}function Ls(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=[[pt,vt,0],[Tt,vt,0],[Tt,Pt,0],[pt,Pt,0]];let Vt=Number.MAX_VALUE,Gt=-Number.MAX_VALUE;for(const Zt of Ft){const Yt=at.$.transformMat4([],Zt,ct),er=at.$.length(Yt);Vt=Math.min(Vt,er),Gt=Math.max(Gt,er)}return[Wo(xt,Vt,Ot.pitch,Ot._fov),Wo(xt,Gt,Ot.pitch,Ot._fov)]}const Hs=new at.U({range:new at.W(at.N.fog.range),color:new at.W(at.N.fog.color),"high-color":new at.W(at.N.fog["high-color"]),"space-color":new at.W(at.N.fog["space-color"]),"horizon-blend":new at.W(at.N.fog["horizon-blend"]),"star-intensity":new at.W(at.N.fog["star-intensity"]),"vertical-range":new at.W(at.N.fog["vertical-range"])});class El extends at.E{constructor(ct,pt,vt,Tt){super(),this._transitionable=new at.O(Hs,vt,new Map(Tt)),this.set(ct,Tt),this._transitioning=this._transitionable.untransitioned(),this._transform=pt,this.properties=new at.a1(Hs),this.scope=vt}get state(){const ct=this._transform,pt=ct.projection.name==="globe",vt=at.a2(ct.zoom),Tt=this.properties.get("range"),Pt=[.5,3];return{range:pt?[at.a3(Pt[0],Tt[0],vt),at.a3(Pt[1],Tt[1],vt)]:Tt,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(ct,pt,vt={}){if(this._validate(Kr,ct,vt))return;const Tt=at.Q({},ct);for(const Pt of Object.keys(at.N.fog))Tt[Pt]===void 0&&(Tt[Pt]=at.N.fog[Pt].default);this._options=Tt,this._transitionable.setTransitionOrValue(this._options,pt)}getOpacity(ct){if(!this._transform.projection.supportsFog)return 0;const pt=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:at.a0(no,us,ct))*pt.a}getOpacityAtLatLng(ct,pt){return this._transform.projection.supportsFog?function(vt,Tt,Pt){const Ot=at._.fromLngLat(Tt),Ft=Pt.elevation?Pt.elevation.getAtPointOrZero(Ot):0;return Ss(vt,Ot.x,Ot.y,Ft,Pt)}(this.state,ct,pt):0}getOpacityForTile(ct){if(!this._transform.projection.supportsFog)return[1,1];const pt=this._transform.calculateFogTileMatrix(ct.toUnwrapped());return Ls(this.state,pt,0,0,at.a4,at.a4,this._transform)}getOpacityForBounds(ct,pt,vt,Tt,Pt){return this._transform.projection.supportsFog?Ls(this.state,ct,pt,vt,Tt,Pt,this._transform):[1,1]}getFovAdjustedRange(ct){return this._transform.projection.supportsFog?Es(this.state,ct):[0,1]}isVisibleOnFrustum(ct){if(!this._transform.projection.supportsFog)return!1;const pt=[4,5,6,7];for(const vt of pt){const Tt=ct.points[vt];let Pt;if(Tt[2]>=0)Pt=Tt;else{const Ot=ct.points[vt-4];Pt=at.a5(Ot,Tt,Ot[2]/(Ot[2]-Tt[2]))}if(Ss(this.state,Pt[0],Pt[1],0,this._transform)>=Jo)return!0}return!1}updateConfig(ct){this._transitionable.setTransitionOrValue(this._options,new Map(ct))}updateTransitions(ct){this._transitioning=this._transitionable.transitioned(ct,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ct){this.properties=this._transitioning.possiblyEvaluate(ct)}_validate(ct,pt,vt){return(!vt||vt.validate!==!1)&&so(this,ct.call(or,at.Q({value:pt,style:{glyphs:!0,sprite:!0},styleSpec:at.N})))}}class dp extends at.E{constructor(ct,pt,vt,Tt){super(),this.scope=vt,this._options=ct,this.properties=new at.a1(pt),this._transitionable=new at.O(pt,vt,new Map(Tt)),this._transitionable.setTransitionOrValue(ct.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(ct){this._transitionable.setTransitionOrValue(this._options.properties,new Map(ct))}updateTransitions(ct){this._transitioning=this._transitionable.transitioned(ct,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(ct){this.properties=this._transitioning.possiblyEvaluate(ct)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(ct,pt){this._options=ct,this._transitionable.setTransitionOrValue(ct.properties,pt)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}let Q0,ex;var km=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Mo=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec2 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color) {
#ifdef INDICATOR_CUTOUT
float holeMinOpacity=u_indicator_cutout_params.x;float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,vec2 pos,vec2 lod_coord) {vec2 size=vec2(textureSize(image,0));vec2 dx=dFdx(lod_coord.xy*size);vec2 dy=dFdy(lod_coord.xy*size);float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Ly=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,Hu="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",tx=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,rx=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,nx=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,ix=`#ifdef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,ox=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,ax=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,sx=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef NATIVE
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const Rm=[];Fp(km,Rm),Fp(Ly,Rm),Fp(Mo,Rm);const Im={"_prelude_fog.vertex.glsl":rx,"_prelude_terrain.vertex.glsl":tx,"_prelude_shadow.vertex.glsl":ax,"_prelude_fog.fragment.glsl":nx,"_prelude_shadow.fragment.glsl":sx,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":ix,"_prelude_raster_particle.glsl":ox},Ny={};Ho("",tx),Ho(nx,rx),Ho(sx,ax),Ho(ix,""),Ho(ox,"");const Fy=Ho(Mo,Ly),zv=km;var Vv={background:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:Ho("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ho(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:Ho(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Ho("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in float a_size_scale;in vec2 a_padding;in float a_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(a_z_offset+elevation(a_anchor_pos)),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:Ho("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:Ho("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
in vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in vec2 v_pos;uniform float u_emissive_strength;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
uniform float u_emissive_strength;in float v_height;void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,u_emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_alignment;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec4 a_join_normal_inside_polygon;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside_polygon.xy/EXTENT);float isPolygon=a_join_normal_inside_polygon.w;float sideAlignment=abs(isPolygon*u_alignment);scaled_pos.xy+=(1.0-a_join_normal_inside_polygon.z)*mix(wall_offset*0.5,wall_offset*mix(1.0,0.0,max(u_alignment,0.0)),sideAlignment);scaled_pos.xy-=a_join_normal_inside_polygon.z*mix(wall_offset*0.5,wall_offset*mix(0.0,1.0,max(u_alignment,0.0)),sideAlignment);
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);v_flat=vec4(linearProduct(color.rgb,vec3(calculate_NdotL(normal))),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:Ho(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_alignment;uniform float u_width_scale;uniform float u_vertical_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec4 a_join_normal_inside_polygon;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;float ele=elevation(pos_nx.xy);float c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;float h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base);pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside_polygon.xy/EXTENT);float isPolygon=a_join_normal_inside_polygon.w;float sideAlignment=abs(isPolygon*u_alignment);pos.xy+=(1.0-a_join_normal_inside_polygon.z)*mix(wall_offset*0.5,wall_offset*mix(1.0,0.0,max(u_alignment,0.0)),sideAlignment);pos.xy-=a_join_normal_inside_polygon.z*mix(wall_offset*0.5,wall_offset*mix(0.0,1.0,max(u_alignment,0.0)),sideAlignment);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_alignment;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec4 a_join_normal_inside_polygon;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
out vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside_polygon.xy/EXTENT);float isPolygon=a_join_normal_inside_polygon.w;float sideAlignment=abs(isPolygon*u_alignment);p.xy+=(1.0-a_join_normal_inside_polygon.z)*mix(wall_offset*0.5,wall_offset*mix(1.0,0.0,max(u_alignment,0.0)),sideAlignment);p.xy-=a_join_normal_inside_polygon.z*mix(wall_offset*0.5,wall_offset*mix(0.0,1.0,max(u_alignment,0.0)),sideAlignment);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:Ho(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0)).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:Ho(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(1.0,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:Ho(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=out_color.a;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=(border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color.rgb=mix(border_color.rgb*border_color.a*trim_alpha,out_color.rgb,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED)
in float a_z_offset;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#if defined(ELEVATED)
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);
#else
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;float x=mod(pattern_x,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {color=vec4(0,0,0,0);}}
#endif
#ifdef LINE_JOIN_NONE
float pattern_len=pattern_size/aspect;float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_ground(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED)
in float a_z_offset;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);
#if defined(ELEVATED)
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 halfCellProgress=normal.yx*32.0;float ele0=elevation(pos);float ele_line=max(ele0,max(elevation(pos+halfCellProgress),elevation(pos-halfCellProgress)));float ele1=elevation(pos+offsetTile);float ele2=elevation(pos-offsetTile);float ele_max=max(ele_line,0.5*(ele1+ele2));float ele=ele_max-ele0+ele1+a_z_offset ;gl_Position=u_matrix*vec4(pos+offsetTile,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*0.1*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);
#else
gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef LINE_JOIN_NONE
v_width=floorwidth+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:Ho("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:Ho("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Ho(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbolIcon:Ho(`#include "_prelude_lighting.glsl"
uniform sampler2D u_texture;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
in float v_fade_opacity;in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
lowp float alpha=opacity*v_fade_opacity;vec4 out_color;
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
out_color*=alpha;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
v_tex_a=a_tex/u_texsize;
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
v_fade_opacity=out_fade_opacity;
#ifdef DEPTH_OCCLUSION
float depthOcclusion=occlusionFadeMultiSample(projected_point);float depthOcclusionMultplier=mix(occlusion_opacity,1.0,depthOcclusion);v_fade_opacity*=depthOcclusionMultplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);v_fade_opacity*=occludedFadeMultiplier;
#endif
}`),symbolSDF:Ho(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;in float v_draw_halo;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depthOcclusion=occlusionFadeMultiSample(projected_point);float depthOcclusionMultplier=mix(occlusion_opacity,1.0,depthOcclusion);out_fade_opacity*=depthOcclusionMultplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,out_fade_opacity);}`),symbolTextAndIcon:Ho(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_halo;in float v_draw_halo;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);vec4 out_color=color*(alpha*opacity*fade_opacity);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef Z_OFFSET
in float a_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out float v_draw_halo;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depthOcclusion=occlusionFadeMultiSample(projected_point);float depthOcclusionMultplier=mix(occlusion_opacity,1.0,depthOcclusion);out_fade_opacity*=depthOcclusionMultplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+ xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,out_fade_opacity,is_sdf);}`),terrainRaster:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:Ho("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:Ho(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Hu),skyboxGradient:Ho(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,Hu),skyboxCapture:Ho(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:Ho(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:Ho(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform vec2 u_inv_depth_size;uniform vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:Ho(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:Ho(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),occlusion:Ho("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Fp(xt,ct){const pt=xt.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let vt of pt)if(vt=vt.trim(),vt[0]==="#"&&vt.includes("if")&&!vt.includes("endif")){vt=vt.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const Tt=vt.split(" ");for(const Pt of Tt)ct.includes(Pt)||ct.push(Pt)}}function Ho(xt,ct){const pt=/#include\s+"([^"]+)"/g,vt=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let Tt=ct.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);Tt&&(Tt=Tt.map(Gt=>{const Zt=Gt.split(" ");return Zt[Zt.length-1]}),Tt=[...new Set(Tt)]);const Pt={},Ot=[],Ft=[];if(xt=xt.replace(pt,(Gt,Zt)=>(Ft.push(Zt),"")),(ct=ct.replace(pt,(Gt,Zt)=>(Ot.push(Zt),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let Vt=[...Rm];Fp(xt,Vt),Fp(ct,Vt);for(const Gt of[...Ot,...Ft])Im[Gt]||console.error(`Undefined include: ${Gt}`),Ny[Gt]||(Ny[Gt]=[],Fp(Im[Gt],Ny[Gt])),Vt=[...Vt,...Ny[Gt]];return{fragmentSource:xt=xt.replace(vt,(Gt,Zt,Yt,er,rr)=>(Pt[rr]=!0,Zt==="define"?`
#ifndef HAS_UNIFORM_u_${rr}
in ${Yt} ${er} ${rr};
#else
uniform ${Yt} ${er} u_${rr};
#endif
`:Zt==="initialize"?`
#ifdef HAS_UNIFORM_u_${rr}
    ${Yt} ${er} ${rr} = u_${rr};
#endif
`:Zt==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${rr}
    in ${Yt} ${er} ${rr};
#endif
`:Zt==="initialize-attribute"?"":void 0)),vertexSource:ct=ct.replace(vt,(Gt,Zt,Yt,er,rr)=>{const sr=er==="float"?"vec2":er,lr=rr.match(/color/)?"color":sr;return Zt==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${rr}
in ${Yt} ${er} a_${rr};
#endif
`:Pt[rr]?Zt==="define"?`
#ifndef HAS_UNIFORM_u_${rr}
uniform lowp float u_${rr}_t;
in ${Yt} ${sr} a_${rr};
out ${Yt} ${er} ${rr};
#else
uniform ${Yt} ${er} u_${rr};
#endif
`:Zt==="initialize"?lr==="vec4"?`
#ifndef HAS_UNIFORM_u_${rr}
    ${rr} = a_${rr};
#else
    ${Yt} ${er} ${rr} = u_${rr};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rr}
    ${rr} = unpack_mix_${lr}(a_${rr}, u_${rr}_t);
#else
    ${Yt} ${er} ${rr} = u_${rr};
#endif
`:Zt==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${rr}
    in ${Yt} ${er} a_${rr};
    out ${Yt} ${er} ${rr};
#endif
`:Zt==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${rr}
    ${rr} = a_${rr};
#endif
`:void 0:Zt==="define"?`
#ifndef HAS_UNIFORM_u_${rr}
uniform lowp float u_${rr}_t;
in ${Yt} ${sr} a_${rr};
#else
uniform ${Yt} ${er} u_${rr};
#endif
`:Zt==="define-instanced"?lr==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${rr}0;
in vec4 a_${rr}1;
in vec4 a_${rr}2;
in vec4 a_${rr}3;
#else
uniform ${Yt} ${er} u_${rr};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${Yt} ${sr} a_${rr};
#else
uniform ${Yt} ${er} u_${rr};
#endif
`:Zt==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${rr}
    ${Yt} ${er} ${rr} = a_${rr};
#endif
`:lr==="vec4"?`
#ifndef HAS_UNIFORM_u_${rr}
    ${Yt} ${er} ${rr} = a_${rr};
#else
    ${Yt} ${er} ${rr} = u_${rr};
#endif
`:`
#ifndef HAS_UNIFORM_u_${rr}
    ${Yt} ${er} ${rr} = unpack_mix_${lr}(a_${rr}, u_${rr}_t);
#else
    ${Yt} ${er} ${rr} = u_${rr};
#endif
`}),staticAttributes:Tt,usedDefines:Vt,vertexIncludes:Ot,fragmentIncludes:Ft}}class G1{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(ct,pt,vt,Tt,Pt,Ot,Ft,Vt){this.context=ct;let Gt=this.boundPaintVertexBuffers.length!==Tt.length;for(let Yt=0;!Gt&&Yt<Tt.length;Yt++)this.boundPaintVertexBuffers[Yt]!==Tt[Yt]&&(Gt=!0);let Zt=this.boundDynamicVertexBuffers.length!==Ft.length;for(let Yt=0;!Zt&&Yt<Ft.length;Yt++)this.boundDynamicVertexBuffers[Yt]!==Ft[Yt]&&(Zt=!0);if(!this.vao||this.boundProgram!==pt||this.boundLayoutVertexBuffer!==vt||Gt||Zt||this.boundIndexBuffer!==Pt||this.boundVertexOffset!==Ot)this.freshBind(pt,vt,Tt,Pt,Ot,Ft,Vt);else{ct.bindVertexArrayOES.set(this.vao);for(const Yt of Ft)Yt&&(Yt.bind(),Vt&&Yt.instanceCount&&Yt.setVertexAttribDivisor(ct.gl,pt,Vt));Pt&&Pt.dynamicDraw&&Pt.bind()}}freshBind(ct,pt,vt,Tt,Pt,Ot,Ft){const Vt=ct.numAttributes,Gt=this.context,Zt=Gt.gl;this.vao&&this.destroy(),this.vao=Gt.gl.createVertexArray(),Gt.bindVertexArrayOES.set(this.vao),this.boundProgram=ct,this.boundLayoutVertexBuffer=pt,this.boundPaintVertexBuffers=vt,this.boundIndexBuffer=Tt,this.boundVertexOffset=Pt,this.boundDynamicVertexBuffers=Ot,pt.enableAttributes(Zt,ct),pt.bind(),pt.setVertexAttribPointers(Zt,ct,Pt);for(const Yt of vt)Yt.enableAttributes(Zt,ct),Yt.bind(),Yt.setVertexAttribPointers(Zt,ct,Pt);for(const Yt of Ot)Yt&&(Yt.enableAttributes(Zt,ct),Yt.bind(),Yt.setVertexAttribPointers(Zt,ct,Pt),Ft&&Yt.instanceCount&&Yt.setVertexAttribDivisor(Zt,ct,Ft));Tt&&Tt.bind(),Gt.currentNumAttributes=Vt}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function W1(xt,ct){const pt=Math.pow(2,ct.canonical.z),vt=ct.canonical.y;return[new at._(0,vt/pt).toLngLat().lat,new at._(0,(vt+1)/pt).toLngLat().lat]}function H1(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=xt.context,Vt=Ft.gl,Gt=pt.hillshadeFBO;if(!Gt)return;xt.prepareDrawTile();const Zt=xt.isTileAffectedByFog(ct),Yt=xt.getOrCreateProgram("hillshade",{overrideFog:Zt});Ft.activeTexture.set(Vt.TEXTURE0),Vt.bindTexture(Vt.TEXTURE_2D,Gt.colorAttachment.get());const er=((cr,ur,br,Er)=>{const _r=br.paint.get("hillshade-shadow-color"),$r=br.paint.get("hillshade-highlight-color"),Tr=br.paint.get("hillshade-accent-color"),Ar=br.paint.get("hillshade-emissive-strength");let Fr=at.ac(br.paint.get("hillshade-illumination-direction"));if(br.paint.get("hillshade-illumination-anchor")==="viewport")Fr-=cr.transform.angle;else if(cr.style&&cr.style.enable3dLights()&&cr.style.directionalLight){const Yr=cr.style.directionalLight.properties.get("direction"),Vr=at.ad(Yr.x,Yr.y,Yr.z);Fr=at.ac(Vr[1])}const zr=!cr.options.moving;return{u_matrix:Er||cr.transform.calculateProjMatrix(ur.tileID.toUnwrapped(),zr),u_image:0,u_latrange:W1(0,ur.tileID),u_light:[br.paint.get("hillshade-exaggeration"),Fr],u_shadow:_r.toRenderColor(br.lut),u_highlight:$r.toRenderColor(br.lut),u_emissive_strength:Ar,u_accent:Tr.toRenderColor(br.lut)}})(xt,pt,vt,xt.terrain?ct.projMatrix:null);xt.uploadCommonUniforms(Ft,Yt,ct.toUnwrapped());const{tileBoundsBuffer:rr,tileBoundsIndexBuffer:sr,tileBoundsSegments:lr}=xt.getTileBoundsBuffers(pt);Yt.draw(xt,Vt.TRIANGLES,Tt,Pt,Ot,at.ag.disabled,er,vt.id,rr,sr,lr)}function Uv(xt,ct,pt){if(!ct.needsDEMTextureUpload)return;const vt=xt.context,Tt=vt.gl;vt.pixelStoreUnpackPremultiplyAlpha.set(!1),ct.demTexture=ct.demTexture||xt.getTileTexture(pt.stride);const Pt=pt.getPixels();ct.demTexture?ct.demTexture.update(Pt,{premultiply:!1}):ct.demTexture=new at.T(vt,Pt,Tt.R32F,{premultiply:!1}),ct.needsDEMTextureUpload=!1}function Z1(xt,ct,pt){const vt=xt.context,Tt=vt.gl;if(!ct.dem)return;const Pt=ct.dem;if(vt.activeTexture.set(Tt.TEXTURE1),Uv(xt,ct,Pt),!ct.demTexture)return;ct.demTexture.bind(Tt.NEAREST,Tt.CLAMP_TO_EDGE);const Ot=Pt.dim;vt.activeTexture.set(Tt.TEXTURE0);let Ft=ct.hillshadeFBO;if(!Ft){const er=new at.T(vt,{width:Ot,height:Ot,data:null},Tt.RGBA);er.bind(Tt.LINEAR,Tt.CLAMP_TO_EDGE),Ft=ct.hillshadeFBO=vt.createFramebuffer(Ot,Ot,!0,"renderbuffer"),Ft.colorAttachment.set(er.texture)}vt.bindFramebuffer.set(Ft.framebuffer),vt.viewport.set([0,0,Ot,Ot]);const{tileBoundsBuffer:Vt,tileBoundsIndexBuffer:Gt,tileBoundsSegments:Zt}=xt.getMercatorTileBoundsBuffers(),Yt=[];xt.linearFloatFilteringSupported()&&Yt.push("TERRAIN_DEM_FLOAT_FORMAT"),xt.getOrCreateProgram("hillshadePrepare",{defines:Yt}).draw(xt,Tt.TRIANGLES,at.af.disabled,at.ah.disabled,at.a.unblended,at.ag.disabled,((er,rr)=>{const sr=rr.stride,lr=at.ae.create();return at.ae.ortho(lr,0,at.a4,-at.a4,0,0,1),at.ae.translate(lr,lr,[0,-at.a4,0]),{u_matrix:lr,u_image:1,u_dimension:[sr,sr],u_zoom:er.overscaledZ}})(ct.tileID,Pt),pt.id,Vt,Gt,Zt),ct.needsHillshadePrepare=!1}function lx(xt,ct,pt,vt,Tt){const Pt=function(Ft,Vt){if(Ft)return Tt(Ft);if(Vt){if(xt.url&&Vt.tiles&&xt.tiles&&delete xt.tiles,Vt.variants){if(!Array.isArray(Vt.variants))return Tt(new Error("variants must be an array"));for(const Zt of Vt.variants){if(Zt==null||typeof Zt!="object"||Zt.constructor!==Object)return Tt(new Error("variant must be an object"));if(!Array.isArray(Zt.capabilities))return Tt(new Error("capabilities must be an array"));if(Zt.capabilities.length===1&&Zt.capabilities[0]==="meshopt"){Vt=at.Q(Vt,Zt);break}}}const Gt=at.ai(at.Q(Vt,xt),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Vt.vector_layers&&(Gt.vectorLayers=Vt.vector_layers,Gt.vectorLayerIds=Gt.vectorLayers.map(Zt=>Zt.id)),Vt.raster_layers&&(Gt.rasterLayers=Vt.raster_layers,Gt.rasterLayerIds=Gt.rasterLayers.map(Zt=>Zt.id)),Gt.tiles=ct.canonicalizeTileset(Gt,xt.url),Tt(null,Gt)}},Ot=function(Ft,Vt,Gt){if(!Ft)return null;if(!Vt&&!Gt)return Ft;Gt=Gt||Ft.worldview_default;const Zt=Object.values(Ft.language||{});if(Zt.length===0)return null;const Yt=Object.values(Ft.worldview||{});if(Yt.length===0)return null;const er=Zt.every(sr=>sr===Vt),rr=Yt.every(sr=>sr===Gt);return er&&rr?Ft:Vt in(Ft.language_options||{})||Gt in(Ft.worldview_options||{})?null:Ft.language_options&&Ft.worldview_options?Ft:null}(xt.data,pt,vt);return Ot?at.e.frame(()=>Pt(null,Ot)):xt.url?at.h(ct.transformRequest(ct.normalizeSourceURL(xt.url,null,pt,vt),at.R.Source),Pt):at.e.frame(()=>{const{data:Ft,...Vt}=xt;Pt(null,Vt)})}class $m{constructor(ct,pt,vt){this.bounds=at.aj.convert(this.validateBounds(ct)),this.minzoom=pt||0,this.maxzoom=vt||24}validateBounds(ct){return Array.isArray(ct)&&ct.length===4?[Math.max(-180,ct[0]),Math.max(-90,ct[1]),Math.min(180,ct[2]),Math.min(90,ct[3])]:[-180,-90,180,90]}contains(ct){const pt=Math.pow(2,ct.z),vt=Math.floor(at.ak(this.bounds.getWest())*pt),Tt=Math.floor(at.al(this.bounds.getNorth())*pt),Pt=Math.ceil(at.ak(this.bounds.getEast())*pt),Ot=Math.ceil(at.al(this.bounds.getSouth())*pt);return ct.x>=vt&&ct.x<Pt&&ct.y>=Tt&&ct.y<Ot}}class Ll extends at.E{constructor(ct,pt,vt,Tt){super(),this.id=ct,this.dispatcher=vt,this.setEventedParent(Tt),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=at.Q({type:"raster"},pt),at.Q(this,at.ai(pt,["url","scheme","tileSize"]))}load(ct){this._loaded=!1,this.fire(new at.g("dataloading",{dataType:"source"})),this._tileJSONRequest=lx(this._options,this.map._requestManager,null,null,(pt,vt)=>{this._tileJSONRequest=null,this._loaded=!0,pt?this.fire(new at.f(pt)):vt&&(at.Q(this,vt),vt.bounds&&(this.tileBounds=new $m(vt.bounds,this.minzoom,this.maxzoom)),at.ao(vt.tiles),this.fire(new at.g("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new at.g("data",{dataType:"source",sourceDataType:"content"}))),ct&&ct(pt)})}loaded(){return this._loaded}onAdd(ct){this.map=ct,this.load()}reload(){this.cancelTileJSONRequest();const ct=at.am(this.id,this.scope);this.load(()=>this.map.style.clearSource(ct))}setTiles(ct){return this._options.tiles=ct,this.reload(),this}setUrl(ct){return this.url=ct,this._options.url=ct,this.reload(),this}onRemove(ct){this.cancelTileJSONRequest()}serialize(){return at.Q({},this._options)}hasTile(ct){return!this.tileBounds||this.tileBounds.contains(ct.canonical)}loadTile(ct,pt){const vt=at.e.devicePixelRatio>=2,Tt=this.map._requestManager.normalizeTileURL(ct.tileID.canonical.url(this.tiles,this.scheme),vt,this.tileSize);ct.request=at.i(this.map._requestManager.transformRequest(Tt,at.R.Tile),(Pt,Ot,Ft,Vt)=>(delete ct.request,ct.aborted?(ct.state="unloaded",pt(null)):Pt?(ct.state="errored",pt(Pt)):Ot?(this.map._refreshExpiredTiles&&ct.setExpiryData({cacheControl:Ft,expires:Vt}),ct.setTexture(Ot,this.map.painter),ct.state="loaded",at.an(this.dispatcher),void pt(null)):pt(null)))}abortTile(ct,pt){ct.request&&(ct.request.cancel(),delete ct.request),pt&&pt()}unloadTile(ct,pt){ct.texture&&ct.texture instanceof at.T?(ct.destroy(!0),ct.texture&&ct.texture instanceof at.T&&this.map.painter.saveTileTexture(ct.texture)):ct.destroy(),pt&&pt()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Gv extends at.E{constructor(ct,pt,vt,Tt){if(super(),this.id=ct,this.dispatcher=vt,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,at.Q(this,at.ai(pt,["url","scheme","tileSize","promoteId"])),this._options=at.Q({type:"vector"},pt),this._collectResourceTiming=!!pt.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Tt),this._tileWorkers={},this._deduped=new at.ap}load(ct){this._loaded=!1,this.fire(new at.g("dataloading",{dataType:"source"}));const pt=Array.isArray(this.map._language)?this.map._language.join():this.map._language,vt=this.map._worldview;this._tileJSONRequest=lx(this._options,this.map._requestManager,pt,vt,(Tt,Pt)=>{this._tileJSONRequest=null,this._loaded=!0,Tt?(pt&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${pt}`),vt&&vt.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${vt}`),this.fire(new at.f(Tt))):Pt&&(at.Q(this,Pt),Pt.bounds&&(this.tileBounds=new $m(Pt.bounds,this.minzoom,this.maxzoom)),at.ao(Pt.tiles,this.map._requestManager._customAccessToken),this.fire(new at.g("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new at.g("data",{dataType:"source",sourceDataType:"content"}))),ct&&ct(Tt)})}loaded(){return this._loaded}hasTile(ct){return!this.tileBounds||this.tileBounds.contains(ct.canonical)}onAdd(ct){this.map=ct,this.load()}reload(){this.cancelTileJSONRequest();const ct=at.am(this.id,this.scope);this.load(()=>this.map.style.clearSource(ct))}setTiles(ct){return this._options.tiles=ct,this.reload(),this}setUrl(ct){return this.url=ct,this._options.url=ct,this.reload(),this}onRemove(ct){this.cancelTileJSONRequest()}serialize(){return at.Q({},this._options)}loadTile(ct,pt){const vt=this.map._requestManager.normalizeTileURL(ct.tileID.canonical.url(this.tiles,this.scheme)),Tt=this.map._requestManager.transformRequest(vt,at.R.Tile),Pt=this.map.style?this.map.style.getLut(this.scope):null,Ot={request:Tt,data:void 0,uid:ct.uid,tileID:ct.tileID,tileZoom:ct.tileZoom,zoom:ct.tileID.overscaledZ,lut:Pt?{image:Pt.image.clone()}:null,tileSize:this.tileSize*ct.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:at.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:ct.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:ct.isExtraShadowCaster,tessellationStep:this.map._tessellationStep};if(Ot.request.collectResourceTiming=this._collectResourceTiming,ct.actor&&ct.state!=="expired")ct.state==="loading"?ct.reloadCallback=pt:ct.request=ct.actor.send("reloadTile",Ot,Ft.bind(this));else if(ct.actor=this._tileWorkers[vt]=this._tileWorkers[vt]||this.dispatcher.getActor(),this.dispatcher.ready)ct.request=ct.actor.send("loadTile",Ot,Ft.bind(this),void 0,!0);else{const Vt=at.aq.call({deduped:this._deduped},Ot,(Gt,Zt)=>{Gt||!Zt?Ft.call(this,Gt):(Ot.data={cacheControl:Zt.cacheControl,expires:Zt.expires,rawData:Zt.rawData.slice(0)},ct.actor&&ct.actor.send("loadTile",Ot,Ft.bind(this),void 0,!0))},!0);ct.request={cancel:Vt}}function Ft(Vt,Gt){return delete ct.request,ct.aborted?pt(null):Vt&&Vt.status!==404?pt(Vt):(Gt&&Gt.resourceTiming&&(ct.resourceTiming=Gt.resourceTiming),this.map._refreshExpiredTiles&&Gt&&ct.setExpiryData(Gt),ct.loadVectorData(Gt,this.map.painter),at.an(this.dispatcher),pt(null),void(ct.reloadCallback&&(this.loadTile(ct,ct.reloadCallback),ct.reloadCallback=null)))}}abortTile(ct){ct.request&&(ct.request.cancel(),delete ct.request),ct.actor&&ct.actor.send("abortTile",{uid:ct.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(ct,pt){ct.actor&&ct.actor.send("removeTile",{uid:ct.uid,type:this.type,source:this.id,scope:this.scope}),ct.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}const Wv=(xt,ct,pt)=>({u_matrix:xt,u_image0:0,u_skirt_height:ct,u_ground_shadow_factor:pt}),ux=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr)=>({u_proj_matrix:Float32Array.from(xt),u_globe_matrix:ct,u_normalize_matrix:Float32Array.from(vt),u_merc_matrix:pt,u_zoom_transition:Tt,u_merc_center:Pt,u_image0:0,u_frustum_tl:Ot,u_frustum_tr:Ft,u_frustum_br:Vt,u_frustum_bl:Gt,u_globe_pos:Zt,u_globe_radius:Yt,u_viewport:er,u_grid_matrix:lr?Float32Array.from(lr):new Float32Array(9),u_skirt_height:rr,u_far_z_cutoff:sr});class Mm{constructor(ct=0,pt=0,vt=0,Tt=0){if(isNaN(ct)||ct<0||isNaN(pt)||pt<0||isNaN(vt)||vt<0||isNaN(Tt)||Tt<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=ct,this.bottom=pt,this.left=vt,this.right=Tt}interpolate(ct,pt,vt){return pt.top!=null&&ct.top!=null&&(this.top=at.a3(ct.top,pt.top,vt)),pt.bottom!=null&&ct.bottom!=null&&(this.bottom=at.a3(ct.bottom,pt.bottom,vt)),pt.left!=null&&ct.left!=null&&(this.left=at.a3(ct.left,pt.left,vt)),pt.right!=null&&ct.right!=null&&(this.right=at.a3(ct.right,pt.right,vt)),this}getCenter(ct,pt){const vt=at.au((this.left+ct-this.right)/2,0,ct),Tt=at.au((this.top+pt-this.bottom)/2,0,pt);return new at.P(vt,Tt)}equals(ct){return this.top===ct.top&&this.bottom===ct.bottom&&this.left===ct.left&&this.right===ct.right}clone(){return new Mm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function hp(xt,ct){const pt=at.ax(xt,3);at.ae.fromQuat(xt,ct),at.aA(xt,3,pt)}function Vn(xt,ct){const pt=at.aw.identity([]);return at.aw.rotateZ(pt,pt,-ct),at.aw.rotateX(pt,pt,-xt),pt}function Bp(xt,ct){const pt=[xt[0],xt[1],0],vt=[ct[0],ct[1],0];if(at.$.length(pt)>=1e-15){const Ot=at.$.normalize([],pt);at.$.scale(vt,Ot,at.$.dot(vt,Ot)),ct[0]=vt[0],ct[1]=vt[1]}const Tt=at.$.cross([],ct,xt);if(at.$.len(Tt)<1e-15)return null;const Pt=Math.atan2(-Tt[1],Tt[0]);return Vn(Math.atan2(Math.sqrt(xt[0]*xt[0]+xt[1]*xt[1]),-xt[2]),Pt)}class Hv{constructor(ct,pt){this.position=ct,this.orientation=pt}get position(){return this._position}set position(ct){if(ct){const pt=ct instanceof at._?ct:new at._(ct[0],ct[1],ct[2]);this._renderWorldCopies&&(pt.x=at.av(pt.x,0,1)),this._position=pt}else this._position=null}lookAtPoint(ct,pt){if(this.orientation=null,!this.position)return;const vt=this.position,Tt=this._elevation?this._elevation.getAtPointOrZero(at._.fromLngLat(ct)):0,Pt=at._.fromLngLat(ct,Tt),Ot=[Pt.x-vt.x,Pt.y-vt.y,Pt.z-vt.z];pt||(pt=[0,0,1]),pt[2]=Math.abs(pt[2]),this.orientation=Bp(Ot,pt)}setPitchBearing(ct,pt){this.orientation=Vn(at.ac(ct),at.ac(-pt))}}class zp{constructor(ct,pt){this._transform=at.ae.identity([]),this.orientation=pt,this.position=ct}get mercatorPosition(){const ct=this.position;return new at._(ct[0],ct[1],ct[2])}get position(){const ct=at.ax(this._transform,3);return[ct[0],ct[1],ct[2]]}set position(ct){var pt;ct&&at.aA(this._transform,3,[(pt=ct)[0],pt[1],pt[2],1])}get orientation(){return this._orientation}set orientation(ct){this._orientation=ct||at.aw.identity([]),ct&&hp(this._transform,this._orientation)}getPitchBearing(){const ct=this.forward(),pt=this.right();return{bearing:Math.atan2(-pt[1],pt[0]),pitch:Math.atan2(Math.sqrt(ct[0]*ct[0]+ct[1]*ct[1]),-ct[2])}}setPitchBearing(ct,pt){this._orientation=Vn(ct,pt),hp(this._transform,this._orientation)}forward(){const ct=at.ax(this._transform,2);return[-ct[0],-ct[1],-ct[2]]}up(){const ct=at.ax(this._transform,1);return[-ct[0],-ct[1],-ct[2]]}right(){const ct=at.ax(this._transform,0);return[ct[0],ct[1],ct[2]]}getCameraToWorld(ct,pt){const vt=new Float64Array(16);return at.ae.invert(vt,this.getWorldToCamera(ct,pt)),vt}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(ct,pt,vt){const Tt=this.position;at.$.scale(Tt,Tt,-ct);const Pt=new Float64Array(16);return at.ae.fromScaling(Pt,[vt,vt,vt]),at.ae.translate(Pt,Pt,Tt),Pt[10]*=pt,Pt}getWorldToCamera(ct,pt){const vt=new Float64Array(16),Tt=new Float64Array(4),Pt=this.position;return at.aw.conjugate(Tt,this._orientation),at.$.scale(Pt,Pt,-ct),at.ae.fromQuat(vt,Tt),at.ae.translate(vt,vt,Pt),vt[1]*=-1,vt[5]*=-1,vt[9]*=-1,vt[13]*=-1,vt[8]*=pt,vt[9]*=pt,vt[10]*=pt,vt[11]*=pt,vt}getCameraToClipPerspective(ct,pt,vt,Tt){const Pt=new Float64Array(16);return at.ae.perspective(Pt,ct,pt,vt,Tt),Pt}getCameraToClipOrthographic(ct,pt,vt,Tt,Pt,Ot){const Ft=new Float64Array(16);return at.ae.ortho(Ft,ct,pt,vt,Tt,Pt,Ot),Ft}getDistanceToElevation(ct,pt=!1){const vt=ct===0?0:at.ay(ct,pt?at.az(this.position[1]):this.position[1]),Tt=this.forward();return(vt-this.position[2])/Tt[2]}clone(){return new zp([...this.position],[...this.orientation])}}const zo={unknown:0,flipRequired:1,flipNotRequired:2},Cl=Math.tan(85*Math.PI/180);function Om(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=at.ae.create();if(pt)if(Pt.name==="globe"){const Vt=at.aC(Tt,ct);at.ae.multiply(Ft,Ft,Vt)}else{const Vt=at.aD.invert([],Ot);Ft[0]=Vt[0],Ft[1]=Vt[1],Ft[4]=Vt[2],Ft[5]=Vt[3],vt||at.ae.rotateZ(Ft,Ft,Tt.angle)}else at.ae.multiply(Ft,Tt.labelPlaneMatrix,xt);return Ft}function By(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=Om(xt,ct,pt,vt,Tt,Pt,Ot);return Pt.name==="globe"&&pt||(Ft[2]=Ft[6]=Ft[10]=Ft[14]=0),Ft}function zy(xt,ct,pt,vt,Tt,Pt,Ot){if(pt){if(Pt.name==="globe"){const Ft=Om(xt,ct,pt,vt,Tt,Pt,Ot);return at.ae.invert(Ft,Ft),at.ae.multiply(Ft,xt,Ft),Ft}{const Ft=at.ae.clone(xt),Vt=at.ae.identity([]);return Vt[0]=Ot[0],Vt[1]=Ot[1],Vt[4]=Ot[2],Vt[5]=Ot[3],at.ae.multiply(Ft,Ft,Vt),vt||at.ae.rotateZ(Ft,Ft,-Tt.angle),Ft}}return Tt.glCoordMatrix}function iu(xt,ct,pt,vt){const Tt=[xt,ct,pt,1];pt?at.aB.transformMat4(Tt,Tt,vt):fx(Tt,Tt,vt);const Pt=Tt[3];return Tt[0]/=Pt,Tt[1]/=Pt,Tt[2]/=Pt,Tt}function jo(xt,ct){return Math.min(.5+xt/ct*.5,1.5)}function dx(xt,ct){const pt=xt[0]/xt[3],vt=xt[1]/xt[3];return pt>=-ct[0]&&pt<=ct[0]&&vt>=-ct[1]&&vt<=ct[1]}function Vp(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt){const Zt=pt.transform,Yt=vt?xt.textSizeData:xt.iconSizeData,er=at.aE(Yt,pt.transform.zoom),rr=Zt.projection.name==="globe",sr=[256/pt.width*2+1,256/pt.height*2+1],lr=vt?xt.text.dynamicLayoutVertexArray:xt.icon.dynamicLayoutVertexArray;lr.clear();let cr=null;rr&&(cr=vt?xt.text.globeExtVertexArray:xt.icon.globeExtVertexArray);const ur=xt.lineVertexArray,br=vt?xt.text.placedSymbolArray:xt.icon.placedSymbolArray,Er=pt.transform.width/pt.transform.height;let _r,$r=!1;for(let Tr=0;Tr<br.length;Tr++){const Ar=br.get(Tr),{numGlyphs:Fr,writingMode:zr}=Ar;if(zr!==at.aF.vertical||$r||_r===at.aF.horizontal||($r=!0),_r=zr,(Ar.hidden||zr===at.aF.vertical)&&!$r){fp(Fr,lr);continue}$r=!1;const Yr=new at.P(Ar.tileAnchorX,Ar.tileAnchorY);let{x:Vr,y:Ir,z:nn}=Zt.projection.projectTilePoint(Yr.x,Yr.y,Gt.canonical);if(Vt){const[zn,Un,Qn]=Vt(Yr);Vr+=zn,Ir+=Un,nn+=Qn}const en=[Vr,Ir,nn,1];if(at.aB.transformMat4(en,en,ct),!dx(en,sr)){fp(Fr,lr);continue}const Wr=en[3],Tn=jo(pt.transform.getCameraToCenterDistance(Zt.projection),Wr),_n=at.aG(Yt,er,Ar),Xr=Ot?_n/Tn:_n*Tn,hn=iu(Vr,Ir,nn,Tt);if(hn[3]<=0){fp(Fr,lr);continue}let Ur={};const bn=Ot?null:Vt,Sn=Zs(Ar,Xr,!1,Ft,ct,Tt,Pt,xt.glyphOffsetArray,ur,lr,cr,hn,Yr,Ur,Er,bn,Zt.projection,Gt,Ot);$r=Sn.useVertical,bn&&Sn.needsFlipping&&(Ur={}),(Sn.notEnoughRoom||$r||Sn.needsFlipping&&Zs(Ar,Xr,!0,Ft,ct,Tt,Pt,xt.glyphOffsetArray,ur,lr,cr,hn,Yr,Ur,Er,bn,Zt.projection,Gt,Ot).notEnoughRoom)&&fp(Fr,lr)}vt?(xt.text.dynamicLayoutVertexBuffer.updateData(lr),cr&&xt.text.globeExtVertexBuffer&&xt.text.globeExtVertexBuffer.updateData(cr)):(xt.icon.dynamicLayoutVertexBuffer.updateData(lr),cr&&xt.icon.globeExtVertexBuffer&&xt.icon.globeExtVertexBuffer.updateData(cr))}function jm(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr){const{lineStartIndex:cr,glyphStartIndex:ur,segment:br}=Ft,Er=ur+Ft.numGlyphs,_r=cr+Ft.lineLength,$r=ct.getoffsetX(ur),Tr=ct.getoffsetX(Er-1),Ar=Up(xt*$r,pt,vt,Tt,Pt,Ot,br,cr,_r,Vt,Gt,Zt,Yt,er,!0,rr,sr,lr);if(!Ar)return null;const Fr=Up(xt*Tr,pt,vt,Tt,Pt,Ot,br,cr,_r,Vt,Gt,Zt,Yt,er,!0,rr,sr,lr);return Fr?{first:Ar,last:Fr}:null}function hx(xt,ct,pt,vt){return xt===at.aF.horizontal&&Math.abs(vt)>Math.abs(pt)?{useVertical:!0}:xt===at.aF.vertical?vt>0?{needsFlipping:!0}:null:ct!==zo.unknown&&function(Tt,Pt){return Tt===0||Math.abs(Pt/Tt)>Cl}(pt,vt)?ct===zo.flipRequired?{needsFlipping:!0}:null:pt<0?{needsFlipping:!0}:null}function Zs(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur,br){const Er=ct/24,_r=xt.lineOffsetX*Er,$r=xt.lineOffsetY*Er,{lineStartIndex:Tr,glyphStartIndex:Ar,numGlyphs:Fr,segment:zr,writingMode:Yr,flipState:Vr}=xt,Ir=Tr+xt.lineLength,nn=en=>{if(Zt){const[Xr,hn,Ur]=en.up,bn=Gt.length;at.aH(Zt,bn+0,Xr,hn,Ur),at.aH(Zt,bn+1,Xr,hn,Ur),at.aH(Zt,bn+2,Xr,hn,Ur),at.aH(Zt,bn+3,Xr,hn,Ur)}const[Wr,Tn,_n]=en.point;at.aI(Gt,Wr,Tn,_n,en.angle)};if(Fr>1){const en=jm(Er,Ft,_r,$r,pt,Yt,er,xt,Vt,Pt,rr,lr,!1,cr,ur,br);if(!en)return{notEnoughRoom:!0};if(vt&&!pt){let[Wr,Tn,_n]=en.first.point,[Xr,hn,Ur]=en.last.point;[Wr,Tn]=iu(Wr,Tn,_n,Ot),[Xr,hn]=iu(Xr,hn,Ur,Ot);const bn=hx(Yr,Vr,(Xr-Wr)*sr,hn-Tn);if(xt.flipState=bn&&bn.needsFlipping?zo.flipRequired:zo.flipNotRequired,bn)return bn}nn(en.first);for(let Wr=Ar+1;Wr<Ar+Fr-1;Wr++){const Tn=Up(Er*Ft.getoffsetX(Wr),_r,$r,pt,Yt,er,zr,Tr,Ir,Vt,Pt,rr,lr,!1,!1,cr,ur,br);if(!Tn)return Gt.length-=4*(Wr-Ar),{notEnoughRoom:!0};nn(Tn)}nn(en.last)}else{if(vt&&!pt){const Wr=iu(er.x,er.y,0,Tt),Tn=Tr+zr+1,_n=new at.P(Vt.getx(Tn),Vt.gety(Tn)),Xr=iu(_n.x,_n.y,0,Tt),hn=Xr[3]>0?Xr:Vy(er,_n,Wr,1,Tt,void 0,cr,ur.canonical),Ur=hx(Yr,Vr,(hn[0]-Wr[0])*sr,hn[1]-Wr[1]);if(xt.flipState=Ur&&Ur.needsFlipping?zo.flipRequired:zo.flipNotRequired,Ur)return Ur}const en=Up(Er*Ft.getoffsetX(Ar),_r,$r,pt,Yt,er,zr,Tr,Ir,Vt,Pt,rr,lr,!1,!1,cr,ur,br);if(!en)return{notEnoughRoom:!0};nn(en)}return{}}function Zv(xt,ct,pt,vt,Tt){const{x:Pt,y:Ot,z:Ft}=vt.projectTilePoint(xt.x,xt.y,ct);if(!Tt)return iu(Pt,Ot,Ft,pt);const[Vt,Gt,Zt]=Tt(xt);return iu(Pt+Vt,Ot+Gt,Ft+Zt,pt)}function Vy(xt,ct,pt,vt,Tt,Pt,Ot,Ft){const Vt=Zv(xt.sub(ct)._unit()._add(xt),Ft,Tt,Ot,Pt);return at.$.sub(Vt,pt,Vt),at.$.normalize(Vt,Vt),at.$.scaleAndAdd(Vt,pt,Vt,vt)}function Up(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur){const br=vt?xt-ct:xt+ct;let Er=br>0?1:-1,_r=0;vt&&(Er*=-1,_r=Math.PI),Er<0&&(_r+=Math.PI);let $r=Ft+Ot+(Er>0?0:1)|0,Tr=Tt,Ar=Tt,Fr=0,zr=0;const Yr=Math.abs(br),Vr=[],Ir=[];let nn=Pt,en=nn;const Wr=()=>Vy(en,nn,Ar,Yr-Fr+1,Zt,er,lr,cr.canonical);for(;Fr+zr<=Yr;){if($r+=Er,$r<Ft||$r>=Vt)return null;if(Ar=Tr,en=nn,Vr.push(Ar),rr&&Ir.push(en),nn=new at.P(Gt.getx($r),Gt.gety($r)),Tr=Yt[$r],!Tr){const Un=Zv(nn,cr.canonical,Zt,lr,er);Tr=Un[3]>0?Yt[$r]=Un:Wr()}Fr+=zr,zr=at.$.distance(Ar,Tr)}sr&&er&&(Yt[$r]&&(Tr=Wr(),zr=at.$.distance(Ar,Tr)),Yt[$r]=Tr);const Tn=(Yr-Fr)/zr,_n=nn.sub(en)._mult(Tn)._add(en),Xr=at.$.sub([],Tr,Ar),hn=at.$.scaleAndAdd([],Ar,Xr,Tn);let Ur=[0,0,1],bn=Xr[0],Sn=Xr[1];if(ur&&(Ur=lr.upVector(cr.canonical,_n.x,_n.y),Ur[0]!==0||Ur[1]!==0||Ur[2]!==1)){const Un=[Ur[2],0,-Ur[0]],Qn=at.$.cross([],Ur,Un);at.$.normalize(Un,Un),at.$.normalize(Qn,Qn),bn=at.$.dot(Xr,Un),Sn=at.$.dot(Xr,Qn)}if(pt){const Un=at.$.cross([],Ur,Xr);at.$.normalize(Un,Un),at.$.scaleAndAdd(hn,hn,Un,pt*Er)}const zn=_r+Math.atan2(Sn,bn);return Vr.push(hn),rr&&Ir.push(_n),{point:hn,angle:zn,path:Vr,tilePath:Ir,up:Ur}}function fp(xt,ct){const pt=ct.length,vt=pt+4*xt;ct.resize(vt),ct.float32.fill(-1/0,4*pt,4*vt)}function fx(xt,ct,pt){const vt=ct[0],Tt=ct[1];return xt[0]=pt[0]*vt+pt[4]*Tt+pt[12],xt[1]=pt[1]*vt+pt[5]*Tt+pt[13],xt[3]=pt[3]*vt+pt[7]*Tt+pt[15],xt}const Uy=(xt,ct,pt)=>(1-pt)*xt+pt*ct,Dm=xt=>xt*xt*xt*xt*xt;class Lm{constructor(ct,pt,vt,Tt,Pt,Ot,Ft){this.tileSize=512,this._renderWorldCopies=Pt===void 0||Pt,this._minZoom=ct||0,this._maxZoom=pt||22,this._minPitch=vt??0,this._maxPitch=Tt??60,this.setProjection(Ot),this.setMaxBounds(Ft),this.width=0,this.height=0,this._center=new at.aJ(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Mm,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new zp,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const ct=new Lm(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return ct._elevation=this._elevation,ct._centerAltitude=this._centerAltitude,ct._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,ct.tileSize=this.tileSize,ct.mercatorFromTransition=this.mercatorFromTransition,ct.width=this.width,ct.height=this.height,ct.cameraElevationReference=this.cameraElevationReference,ct._center=this._center,ct._setZoom(this.zoom),ct._seaLevelZoom=this._seaLevelZoom,ct.angle=this.angle,ct._fov=this._fov,ct._pitch=this._pitch,ct._nearZ=this._nearZ,ct._farZ=this._farZ,ct._averageElevation=this._averageElevation,ct._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,ct._unmodified=this._unmodified,ct._edgeInsets=this._edgeInsets.clone(),ct._camera=this._camera.clone(),ct._calcMatrices(),ct.freezeTileCoverage=this.freezeTileCoverage,ct.frustumCorners=this.frustumCorners,ct}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(ct){this._elevation!==ct&&(this._elevation=ct,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(ct,pt=!1){const vt=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||vt)&&this._updateCameraOnTerrain(),(ct||vt)&&this._constrainCamera(pt),this._calcMatrices()}getProjection(){return at.ai(this.projection,["name","center","parallels"])}setProjection(ct){this.projectionOptions=ct||{name:"mercator"};const pt=this.projection?this.getProjection():void 0;this.projection=at.aK(this.projectionOptions);const vt=this.getProjection(),Tt=!at.d(pt,vt);return Tt&&this._calcMatrices(),this.mercatorFromTransition=!1,Tt}setOrthographicProjectionAtLowPitch(ct){return this._orthographicProjectionAtLowPitch!==ct&&(this._orthographicProjectionAtLowPitch=ct,this._calcMatrices(),!0)}setMercatorFromTransition(){const ct=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=at.aK({name:"mercator"});const pt=ct!==this.projection.name;return pt&&this._calcMatrices(),pt}get minZoom(){return this._minZoom}set minZoom(ct){this._minZoom!==ct&&(this._minZoom=ct,this.zoom=Math.max(this.zoom,ct))}get maxZoom(){return this._maxZoom}set maxZoom(ct){this._maxZoom!==ct&&(this._maxZoom=ct,this.zoom=Math.min(this.zoom,ct))}get minPitch(){return this._minPitch}set minPitch(ct){this._minPitch!==ct&&(this._minPitch=ct,this.pitch=Math.max(this.pitch,ct))}get maxPitch(){return this._maxPitch}set maxPitch(ct){this._maxPitch!==ct&&(this._maxPitch=ct,this.pitch=Math.min(this.pitch,ct))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(ct){ct===void 0?ct=!0:ct===null&&(ct=!1),this._renderWorldCopies=ct}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const ct=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ct))}get cameraWorldSize(){const ct=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(ct))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return at.ay(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new at.P(this.width,this.height)}get bearing(){return at.av(this.rotation,-180,180)}set bearing(ct){this.rotation=ct}get rotation(){return-this.angle/Math.PI*180}set rotation(ct){const pt=-ct*Math.PI/180;this.angle!==pt&&(this._unmodified=!1,this.angle=pt,this._calcMatrices(),this.rotationMatrix=at.aD.create(),at.aD.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(ct){const pt=at.au(ct,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==pt&&(this._unmodified=!1,this._pitch=pt,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const ct=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/ct)}set fov(ct){ct=Math.max(.01,Math.min(60,ct)),this._fov!==ct&&(this._unmodified=!1,this._fov=at.ac(ct),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(ct){this._averageElevation=ct,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(ct){const pt=Math.min(Math.max(ct,this.minZoom),this.maxZoom);this._zoom!==pt&&(this._unmodified=!1,this._setZoom(pt),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(ct){this._zoom=ct,this.scale=this.zoomScale(ct),this.tileZoom=Math.floor(ct),this.zoomFraction=ct-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(ct){this._tileCoverLift!==ct&&(this._tileCoverLift=ct)}_updateCameraOnTerrain(){const ct=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,pt=this.elevation&&ct===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||ct===Number.NEGATIVE_INFINITY&&(!pt||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const vt=this._elevation;pt||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&vt.exaggeration()&&this._centerAltitudeValidForExaggeration!==vt.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*vt.exaggeration(),this._centerAltitudeValidForExaggeration=vt.exaggeration()):(this._centerAltitude=ct||0,this._centerAltitudeValidForExaggeration=vt.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const ct=this._elevation,pt=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],vt=this.horizonLineFromTop();let Tt=0,Pt=0;for(let Ot=0;Ot<pt.length;Ot++){const Ft=new at.P(pt[Ot][0]*this.width,vt+pt[Ot][1]*(this.height-vt)),Vt=ct.pointCoordinate(Ft);if(!Vt)continue;const Gt=1/Math.hypot(Vt[0]-this._camera.position[0],Vt[1]-this._camera.position[1]);Tt+=Vt[3]*Gt,Pt+=Gt}return Pt===0?NaN:Tt/Pt}get center(){return this._center}set center(ct){ct.lat===this._center.lat&&ct.lng===this._center.lng||(this._unmodified=!1,this._center=ct,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const ct=this._seaLevelZoom,pt=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),vt=this.pixelsPerMeter/this.worldSize*pt,Tt=this._mercatorZfromZoom(ct),Pt=this._mercatorZfromZoom(this._maxZoom),Ot=Math.max(Tt-vt,Pt);this._setZoom(this._zoomFromMercatorZ(Ot))}get padding(){return this._edgeInsets.toJSON()}set padding(ct){this._edgeInsets.equals(ct)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ct,1),this._calcMatrices())}computeZoomRelativeTo(ct){const pt=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,ct.toAltitude()));let vt;vt=ct.z<this._camera.position[2]?[pt.x,pt.y,pt.z]:[ct.x,ct.y,ct.z];const Tt=at.$.length(at.$.sub([],this._camera.position,vt));return at.au(this._zoomFromMercatorZ(Tt),this._minZoom,this._maxZoom)}setFreeCameraOptions(ct){if(!this.height||!ct.position&&!ct.orientation)return;this._updateCameraState();let pt=!1;if(ct.orientation&&!at.aw.exactEquals(ct.orientation,this._camera.orientation)&&(pt=this._setCameraOrientation(ct.orientation)),ct.position){const vt=[ct.position.x,ct.position.y,ct.position.z];at.$.exactEquals(vt,this._camera.position)||(this._setCameraPosition(vt),pt=!0)}pt&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const ct=this._camera.position,pt=new Hv;return pt.position=new at._(ct[0],ct[1],ct[2]),pt.orientation=this._camera.orientation,pt._elevation=this.elevation,pt._renderWorldCopies=this.renderWorldCopies,pt}_setCameraOrientation(ct){if(!at.aw.length(ct))return!1;at.aw.normalize(ct,ct);const pt=at.$.transformQuat([],[0,0,-1],ct),vt=at.$.transformQuat([],[0,-1,0],ct);if(vt[2]<0)return!1;const Tt=Bp(pt,vt);return!!Tt&&(this._camera.orientation=Tt,!0)}_setCameraPosition(ct){const pt=this.zoomScale(this.minZoom)*this.tileSize,vt=this.zoomScale(this.maxZoom)*this.tileSize,Tt=this.cameraToCenterDistance;ct[2]=at.au(ct[2],Tt/vt,Tt/pt),this._camera.position=ct}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(ct){return this._edgeInsets.equals(ct)}interpolatePadding(ct,pt,vt){this._unmodified=!1,this._edgeInsets.interpolate(ct,pt,vt),this._constrain(),this._calcMatrices()}coveringZoomLevel(ct){const pt=(ct.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/ct.tileSize));return Math.max(0,pt)}getVisibleUnwrappedCoordinates(ct){const pt=[new at.aL(0,ct)];if(this.renderWorldCopies){const vt=this.pointCoordinate(new at.P(0,0)),Tt=this.pointCoordinate(new at.P(this.width,0)),Pt=this.pointCoordinate(new at.P(this.width,this.height)),Ot=this.pointCoordinate(new at.P(0,this.height)),Ft=Math.floor(Math.min(vt.x,Tt.x,Pt.x,Ot.x)),Vt=Math.floor(Math.max(vt.x,Tt.x,Pt.x,Ot.x)),Gt=1;for(let Zt=Ft-Gt;Zt<=Vt+Gt;Zt++)Zt!==0&&pt.push(new at.aL(Zt,ct))}return pt}isLODDisabled(ct){return(!ct||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(ct,pt,vt){let Tt=[];const Pt=vt!==void 0,Ot=!Pt;if(Ot&&this.zoom<pt||Pt&&vt[0]===0&&vt[1]===0)return Tt;const Ft=new Set,Vt=(Zt,Yt,er,rr,sr)=>{const lr=at.b2(Yt,Zt,er,rr,sr);Ft.has(lr)||(Tt.push(new at.aQ(Zt,Yt,er,rr,sr)),Ft.add(lr))};for(let Zt=0;Zt<ct.length;Zt++){const Yt=ct[Zt];if(Ot&&Yt.canonical.z!==pt)continue;const er=Yt.canonical,rr=Yt.overscaledZ,sr=Yt.wrap,lr=1<<er.z,cr=er.x+1<lr,ur=er.x>0,br=er.y+1<lr,Er=er.y>0,_r=Yt.wrap-(ur?0:1),$r=Yt.wrap+(cr?0:1),Tr=ur?er.x-1:lr-1,Ar=cr?er.x+1:0;if(Pt)vt[0]<0?(Vt(rr,$r,er.z,Ar,er.y),vt[1]<0&&br&&(Vt(rr,sr,er.z,er.x,er.y+1),Vt(rr,$r,er.z,Ar,er.y+1)),vt[1]>0&&Er&&(Vt(rr,sr,er.z,er.x,er.y-1),Vt(rr,$r,er.z,Ar,er.y-1))):vt[0]>0?(Vt(rr,_r,er.z,Tr,er.y),vt[1]<0&&br&&(Vt(rr,sr,er.z,er.x,er.y+1),Vt(rr,_r,er.z,Tr,er.y+1)),vt[1]>0&&Er&&(Vt(rr,sr,er.z,er.x,er.y-1),Vt(rr,_r,er.z,Tr,er.y-1))):vt[1]<0&&br?Vt(rr,sr,er.z,er.x,er.y+1):Er&&Vt(rr,sr,er.z,er.x,er.y-1);else{const Fr=Yt.visibleQuadrants;1&Fr&&(Vt(rr,_r,er.z,Tr,er.y),Er&&(Vt(rr,sr,er.z,er.x,er.y-1),Vt(rr,_r,er.z,Tr,er.y-1))),2&Fr&&(Vt(rr,$r,er.z,Ar,er.y),Er&&(Vt(rr,sr,er.z,er.x,er.y-1),Vt(rr,$r,er.z,Ar,er.y-1))),4&Fr&&(Vt(rr,_r,er.z,Tr,er.y),br&&(Vt(rr,sr,er.z,er.x,er.y+1),Vt(rr,_r,er.z,Tr,er.y+1))),8&Fr&&(Vt(rr,$r,er.z,Ar,er.y),br&&(Vt(rr,sr,er.z,er.x,er.y+1),Vt(rr,$r,er.z,Ar,er.y+1)))}}const Gt=[];for(const Zt of Tt)Tt.some(Yt=>Zt.isChildOf(Yt))||Gt.push(Zt);if(Tt=Gt.filter(Zt=>!ct.some(Yt=>!!(Zt.overscaledZ<pt&&Yt.isChildOf(Zt))||Zt.equals(Yt)||Zt.isChildOf(Yt))),Ot){const Zt=1<<pt,Yt=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),er=[Zt*Yt.x,Zt*Yt.y],rr=4,sr=rr*rr;Tt=Tt.filter(lr=>{const cr=lr.canonical.x+.5-er[0],ur=lr.canonical.y+.5-er[1];return cr*cr+ur*ur<sr})}return Tt}coveringTiles(ct){let pt=this.coveringZoomLevel(ct);const vt=pt,Tt=this.elevation&&this.elevation.exaggeration(),Pt=Tt&&!ct.isTerrainDEM,Ot=this.projection.name==="mercator";if(ct.minzoom!==void 0&&pt<ct.minzoom)return[];ct.maxzoom!==void 0&&pt>ct.maxzoom&&(pt=ct.maxzoom);const Ft=this.locationCoordinate(this.center),Vt=this.center.lat,Gt=1<<pt,Zt=[Gt*Ft.x,Gt*Ft.y,0],Yt=this.projection.name==="globe",er=!Yt,rr=at.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,pt,er),sr=Yt?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),lr=Gt*at.ay(1,this.center.lat),cr=this._camera.position[2]/at.ay(1,this.center.lat),ur=[Gt*sr.x,Gt*sr.y,cr*(er?1:lr)],br=Yt||Tt,Er=this.cameraToCenterDistance/ct.tileSize*(ct.roundZoom?1:.502),_r=this.isLODDisabled(!0)?pt:0;let $r;if(this._elevation&&ct.isTerrainDEM)$r=1e4*this._elevation.exaggeration();else if(this._elevation){const Xr=this._elevation.getMinMaxForVisibleTiles();$r=Xr?Xr.max:this._centerAltitude}else $r=this._centerAltitude;const Tr=ct.isTerrainDEM?-$r:this._elevation?this._elevation.getMinElevationBelowMSL():0,Ar=this.projection.isReprojectedInTileSpace?at.aN(this):1,Fr=Xr=>{const Ur=new at._(Xr.x+25e-6,Xr.y,Xr.z),bn=new at._(Xr.x,Xr.y+25e-6,Xr.z),Sn=Xr.toLngLat(),zn=Ur.toLngLat(),Un=bn.toLngLat(),Qn=this.locationCoordinate(Sn),Wn=this.locationCoordinate(zn),uo=this.locationCoordinate(Un),So=Math.hypot(Wn.x-Qn.x,Wn.y-Qn.y),fo=Math.hypot(uo.x-Qn.x,uo.y-Qn.y);return Math.sqrt(So*fo)*Ar/25e-6},zr=Xr=>{const hn=$r,Ur=Tr;return{aabb:at.aR(this,Gt,0,0,0,Xr,Ur,hn,this.projection),zoom:0,x:0,y:0,minZ:Ur,maxZ:hn,wrap:Xr,fullyVisible:!1}},Yr=[];let Vr=[];const Ir=pt,nn=ct.reparseOverscaled?vt:pt,en=(cr-this._centerAltitude)*lr,Wr=Xr=>{if(!this._elevation||!Xr.tileID||!Ot)return;const hn=this._elevation.getMinMaxForTile(Xr.tileID),Ur=Xr.aabb;hn?(Ur.min[2]=hn.min,Ur.max[2]=hn.max,Ur.center[2]=(Ur.min[2]+Ur.max[2])/2):(Xr.shouldSplit=_n(Xr),Xr.shouldSplit||(Ur.min[2]=Ur.max[2]=Ur.center[2]=this._centerAltitude))},Tn=(Xr,hn)=>{if(.707*hn<Xr)return 1;const Ur=hn/Xr;return Ur/(1.4144271570014144+(Math.pow(1.1,Ur-1.4144271570014144+1)-1)/(1.1-1)-1)},_n=Xr=>{if(Xr.zoom<_r)return!0;if(Xr.zoom===Ir)return!1;if(Xr.shouldSplit!=null)return Xr.shouldSplit;const hn=Xr.aabb.distanceX(ur),Ur=Xr.aabb.distanceY(ur);let bn=en,Sn=1;if(Yt){bn=Xr.aabb.distanceZ(ur);const fo=Math.pow(2,Xr.zoom),ko=at.az((Xr.y+1)/fo),Vo=at.az(Xr.y/fo),ss=Math.min(Math.max(Vt,ko),Vo),rs=at.b6(ss)/at.b6(Vt);if(Sn=ss===Vt?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,rs/this._mercatorScaleRatio),this.zoom<=at.b3&&Xr.zoom===Ir-1&&rs>=.9)return!0}else if(Pt&&(bn=Xr.aabb.distanceZ(ur)*lr),this.projection.isReprojectedInTileSpace&&vt<=5){const fo=Math.pow(2,Xr.zoom),ko=Fr(new at._((Xr.x+.5)/fo,(Xr.y+.5)/fo));Sn=ko>.85?1:ko}if(!Ot){const fo=Math.sqrt(hn*hn+Ur*Ur+bn*bn);let ko=(1<<Ir-Xr.zoom)*Er*Sn;return ko*=Tn(Math.max(bn,en),fo),fo<ko}let zn=Number.MAX_VALUE,Un=0;const Qn=Xr.aabb.getCorners(),Wn=[];for(const fo of Qn){at.$.sub(Wn,fo,ur),Yt||(Pt?Wn[2]*=lr:Wn[2]=en);const ko=at.$.dot(Wn,this._camera.forward());ko<zn&&(zn=ko,Un=Math.abs(Wn[2]))}let uo=(1<<Ir-Xr.zoom)*Er*Sn;if(uo*=Tn(Math.max(Un,en),zn),zn<uo)return!0;const So=Xr.aabb.closestPoint(Zt);return So[0]===Zt[0]&&So[1]===Zt[1]};if(this.renderWorldCopies)for(let Xr=1;Xr<=3;Xr++)Yr.push(zr(-Xr)),Yr.push(zr(Xr));for(Yr.push(zr(0));Yr.length>0;){const Xr=Yr.pop(),hn=Xr.x,Ur=Xr.y;let bn=Xr.fullyVisible;const Sn=()=>this.projection.name==="globe"&&(Xr.y===0||Xr.y===(1<<Xr.zoom)-1);if(!bn){let zn=br?Xr.aabb.intersects(rr):Xr.aabb.intersectsFlat(rr);if(zn===0&&Sn()){const Un=new at.aO(Xr.zoom,hn,Ur);zn=at.aP(this,Gt,Un,!0).intersects(rr)}if(zn===0)continue;bn=zn===2}if(Xr.zoom!==Ir&&_n(Xr))for(let zn=0;zn<4;zn++){const Un=(hn<<1)+zn%2,Qn=(Ur<<1)+(zn>>1),Wn={aabb:Ot?Xr.aabb.quadrant(zn):at.aR(this,Gt,Xr.zoom+1,Un,Qn,Xr.wrap,Xr.minZ,Xr.maxZ,this.projection),zoom:Xr.zoom+1,x:Un,y:Qn,wrap:Xr.wrap,fullyVisible:bn,tileID:void 0,shouldSplit:void 0,minZ:Xr.minZ,maxZ:Xr.maxZ};Pt&&!Yt&&(Wn.tileID=new at.aQ(Xr.zoom+1===Ir?nn:Xr.zoom+1,Xr.wrap,Xr.zoom+1,Un,Qn),Wr(Wn)),Yr.push(Wn)}else{const zn=Xr.zoom===Ir?nn:Xr.zoom;if(ct.minzoom&&ct.minzoom>zn)continue;let Un=0;if(!bn){let So=br?Xr.aabb.intersectsPrecise(rr):Xr.aabb.intersectsPreciseFlat(rr);if(So===0&&Sn()){const fo=new at.aO(Xr.zoom,hn,Ur);So=at.aP(this,Gt,fo,!0).intersectsPrecise(rr)}if(So===0)continue;if(ct.calculateQuadrantVisibility)if(rr.containsPoint(Xr.aabb.center))Un=15;else for(let fo=0;fo<4;fo++)Xr.aabb.quadrant(fo).intersects(rr)!==0&&(Un|=1<<fo)}const Qn=Zt[0]-(.5+hn+(Xr.wrap<<Xr.zoom))*(1<<pt-Xr.zoom),Wn=Zt[1]-.5-Ur,uo=Xr.tileID?Xr.tileID:new at.aQ(zn,Xr.wrap,Xr.zoom,hn,Ur);ct.calculateQuadrantVisibility&&(uo.visibleQuadrants=Un),Vr.push({tileID:uo,distanceSq:Qn*Qn+Wn*Wn})}}if(this.fogCullDistSq){const Xr=this.fogCullDistSq,hn=this.horizonLineFromTop();Vr=Vr.filter(Ur=>{const bn=[0,0,0,1],Sn=[at.a4,at.a4,0,1],zn=this.calculateFogTileMatrix(Ur.tileID.toUnwrapped());at.aB.transformMat4(bn,bn,zn),at.aB.transformMat4(Sn,Sn,zn);const Un=at.aB.min([],bn,Sn),Qn=at.aB.max([],bn,Sn),Wn=at.aS(Un,Qn);if(Wn===0)return!0;let uo=!1;const So=this._elevation;if(So&&Wn>Xr&&hn!==0){const fo=this.calculateProjMatrix(Ur.tileID.toUnwrapped());let ko;ct.isTerrainDEM||(ko=So.getMinMaxForTile(Ur.tileID)),ko||(ko={min:Tr,max:$r});const Vo=at.b4(this.rotation),ss=[Vo[0]*at.a4,Vo[1]*at.a4,ko.max];at.$.transformMat4(ss,ss,fo),uo=(1-ss[1])*this.height*.5<hn}return Wn<Xr||uo})}return Vr.sort((Xr,hn)=>Xr.distanceSq-hn.distanceSq).map(Xr=>Xr.tileID)}resize(ct,pt){this.width=ct,this.height=pt,this.pixelsToGLUnits=[2/ct,-2/pt],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(ct){return Math.pow(2,ct)}scaleZoom(ct){return Math.log(ct)/Math.LN2}project(ct){const pt=at.au(ct.lat,-at.aT,at.aT),vt=this.projection.project(ct.lng,pt);return new at.P(vt.x*this.worldSize,vt.y*this.worldSize)}unproject(ct){return this.projection.unproject(ct.x/this.worldSize,ct.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/at.ay(1,this.center.lat)/this.worldSize}setLocationAtPoint(ct,pt){let vt,Tt;const Pt=this.centerPoint;if(this.projection.name==="globe"){const Ft=this.worldSize;vt=(pt.x-Pt.x)/Ft,Tt=(pt.y-Pt.y)/Ft}else{const Ft=this.pointCoordinate(pt),Vt=this.pointCoordinate(Pt);vt=Ft.x-Vt.x,Tt=Ft.y-Vt.y}const Ot=this.locationCoordinate(ct);this.setLocation(new at._(Ot.x-vt,Ot.y-Tt))}setLocation(ct){this.center=this.coordinateLocation(ct),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(ct){return this.projection.locationPoint(this,ct)}locationPoint3D(ct){return this.projection.locationPoint(this,ct,!0)}pointLocation(ct){return this.coordinateLocation(this.pointCoordinate(ct))}pointLocation3D(ct){return this.coordinateLocation(this.pointCoordinate3D(ct))}locationCoordinate(ct,pt){const vt=pt?at.ay(pt,ct.lat):void 0,Tt=this.projection.project(ct.lng,ct.lat);return new at._(Tt.x,Tt.y,vt)}coordinateLocation(ct){return this.projection.unproject(ct.x,ct.y)}pointRayIntersection(ct,pt){const vt=pt??this._centerAltitude,Tt=[ct.x,ct.y,0,1],Pt=[ct.x,ct.y,1,1];at.aB.transformMat4(Tt,Tt,this.pixelMatrixInverse),at.aB.transformMat4(Pt,Pt,this.pixelMatrixInverse);const Ot=Pt[3];at.aB.scale(Tt,Tt,1/Tt[3]),at.aB.scale(Pt,Pt,1/Ot);const Ft=Tt[2],Vt=Pt[2];return{p0:Tt,p1:Pt,t:Ft===Vt?0:(vt-Ft)/(Vt-Ft)}}screenPointToMercatorRay(ct){const pt=[ct.x,ct.y,0,1],vt=[ct.x,ct.y,1,1];return at.aB.transformMat4(pt,pt,this.pixelMatrixInverse),at.aB.transformMat4(vt,vt,this.pixelMatrixInverse),at.aB.scale(pt,pt,1/pt[3]),at.aB.scale(vt,vt,1/vt[3]),pt[2]=at.ay(pt[2],this._center.lat)*this.worldSize,vt[2]=at.ay(vt[2],this._center.lat)*this.worldSize,at.aB.scale(pt,pt,1/this.worldSize),at.aB.scale(vt,vt,1/this.worldSize),new at.aU([pt[0],pt[1],pt[2]],at.$.normalize([],at.$.sub([],vt,pt)))}rayIntersectionCoordinate(ct){const{p0:pt,p1:vt,t:Tt}=ct,Pt=at.ay(pt[2],this._center.lat),Ot=at.ay(vt[2],this._center.lat);return new at._(at.a3(pt[0],vt[0],Tt)/this.worldSize,at.a3(pt[1],vt[1],Tt)/this.worldSize,at.a3(Pt,Ot,Tt))}pointCoordinate(ct,pt=this._centerAltitude){return this.projection.pointCoordinate(this,ct.x,ct.y,pt)}pointCoordinate3D(ct){if(!this.elevation)return this.pointCoordinate(ct);let pt=this.projection.pointCoordinate3D(this,ct.x,ct.y);if(pt)return new at._(pt[0],pt[1],pt[2]);let vt=0,Tt=this.horizonLineFromTop();if(ct.y>Tt)return this.pointCoordinate(ct);const Pt=.02*Tt,Ot=ct.clone();for(let Ft=0;Ft<10&&Tt-vt>Pt;Ft++){Ot.y=at.a3(vt,Tt,.66);const Vt=this.projection.pointCoordinate3D(this,Ot.x,Ot.y);Vt?(Tt=Ot.y,pt=Vt):vt=Ot.y}return pt?new at._(pt[0],pt[1],pt[2]):this.pointCoordinate(ct)}isPointAboveHorizon(ct){return this.projection.isPointAboveHorizon(this,ct)}isPointOnSurface(ct){if(ct.y<0||ct.y>this.height||ct.x<0||ct.x>this.width)return!1;if(this.elevation||this.zoom>=at.aV)return!this.isPointAboveHorizon(ct);const pt=this.pointCoordinate(ct);return pt.y>=0&&pt.y<=1}_coordinatePoint(ct,pt){const vt=pt&&this.elevation?this.elevation.getAtPointOrZero(ct,this._centerAltitude):this._centerAltitude,Tt=[ct.x*this.worldSize,ct.y*this.worldSize,vt+ct.toAltitude(),1];return at.aB.transformMat4(Tt,Tt,this.pixelMatrix),Tt[3]>0?new at.P(Tt[0]/Tt[3],Tt[1]/Tt[3]):new at.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:ct,left:pt}=this._edgeInsets,vt=this.height-this._edgeInsets.bottom,Tt=this.width-this._edgeInsets.right,Pt=this.pointLocation3D(new at.P(pt,ct)),Ot=this.pointLocation3D(new at.P(Tt,ct)),Ft=this.pointLocation3D(new at.P(Tt,vt)),Vt=this.pointLocation3D(new at.P(pt,vt));let Gt=Math.min(Pt.lng,Ot.lng,Ft.lng,Vt.lng),Zt=Math.max(Pt.lng,Ot.lng,Ft.lng,Vt.lng),Yt=Math.min(Pt.lat,Ot.lat,Ft.lat,Vt.lat),er=Math.max(Pt.lat,Ot.lat,Ft.lat,Vt.lat);const rr=Math.pow(2,-this.zoom)/16*270,sr=this.projection.name==="globe"?1:4,lr=(cr,ur,br,Er,_r)=>{const $r=(cr+br)/2,Tr=(ur+Er)/2,Ar=new at.P($r,Tr),{lng:Fr,lat:zr}=this.pointLocation3D(Ar),Yr=Math.max(0,Gt-Fr,Yt-zr,Fr-Zt,zr-er);Gt=Math.min(Gt,Fr),Zt=Math.max(Zt,Fr),Yt=Math.min(Yt,zr),er=Math.max(er,zr),(_r<sr||Yr>rr)&&(lr(cr,ur,$r,Tr,_r+1),lr($r,Tr,br,Er,_r+1))};if(lr(pt,ct,Tt,ct,1),lr(Tt,ct,Tt,vt,1),lr(Tt,vt,pt,vt,1),lr(pt,vt,pt,ct,1),this.projection.name==="globe"){const[cr,ur]=at.aW(this);cr?(er=90,Zt=180,Gt=-180):ur&&(Yt=-90,Zt=180,Gt=-180)}return new at.aj(new at.aJ(Gt,Yt),new at.aJ(Zt,er))}_getBoundsRectangular(ct,pt){const{top:vt,left:Tt}=this._edgeInsets,Pt=this.height-this._edgeInsets.bottom,Ot=this.width-this._edgeInsets.right,Ft=new at.P(Tt,vt),Vt=new at.P(Ot,vt),Gt=new at.P(Ot,Pt),Zt=new at.P(Tt,Pt);let Yt=this.pointCoordinate(Ft,ct),er=this.pointCoordinate(Vt,ct);const rr=this.pointCoordinate(Gt,pt),sr=this.pointCoordinate(Zt,pt),lr=(cr,ur)=>(ur.y-cr.y)/(ur.x-cr.x);return Yt.y>1&&er.y>=0?Yt=new at._((1-sr.y)/lr(sr,Yt)+sr.x,1):Yt.y<0&&er.y<=1&&(Yt=new at._(-sr.y/lr(sr,Yt)+sr.x,0)),er.y>1&&Yt.y>=0?er=new at._((1-rr.y)/lr(rr,er)+rr.x,1):er.y<0&&Yt.y<=1&&(er=new at._(-rr.y/lr(rr,er)+rr.x,0)),new at.aj().extend(this.coordinateLocation(Yt)).extend(this.coordinateLocation(er)).extend(this.coordinateLocation(sr)).extend(this.coordinateLocation(rr))}_getBoundsRectangularTerrain(){const ct=this.elevation;if(!ct.visibleDemTiles.length||ct.isUsingMockSource())return this._getBoundsRectangular(0,0);const pt=ct.visibleDemTiles.reduce((vt,Tt)=>{if(Tt.dem){const Pt=Tt.dem.tree;vt.min=Math.min(vt.min,Pt.minimums[0]),vt.max=Math.max(vt.max,Pt.maximums[0])}return vt},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(pt.min*ct.exaggeration(),pt.max*ct.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(ct=!0){const pt=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,vt=this.height/2-pt*(1-this._horizonShift);return ct?Math.max(0,vt):vt}getMaxBounds(){return this.maxBounds}setMaxBounds(ct){this.maxBounds=ct,this.minLat=-at.aT,this.maxLat=at.aT,this.minLng=-180,this.maxLng=180,ct&&(this.minLat=ct.getSouth(),this.maxLat=ct.getNorth(),this.minLng=ct.getWest(),this.maxLng=ct.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=at.ak(this.minLng)*this.tileSize,this.worldMaxX=at.ak(this.maxLng)*this.tileSize,this.worldMinY=at.al(this.maxLat)*this.tileSize,this.worldMaxY=at.al(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(ct,pt){return this.projection.createTileMatrix(this,pt,ct)}calculateDistanceTileData(ct){const pt=ct.key,vt=this._distanceTileDataCache;if(vt[pt])return vt[pt];const Tt=ct.canonical,Pt=1/this.height,Ot=this.cameraWorldSize,Ft=Ot/this.zoomScale(Tt.z),Vt=(Tt.x+Math.pow(2,Tt.z)*ct.wrap)*Ft,Gt=Tt.y*Ft,Zt=this.point;Zt.x*=Ot/this.worldSize,Zt.y*=Ot/this.worldSize;const Yt=this.angle,er=Math.sin(-Yt),rr=-Math.cos(-Yt);return vt[pt]={bearing:[er,rr],center:[(Zt.x-Vt)*Pt,(Zt.y-Gt)*Pt],scale:Ft/at.a4*Pt},vt[pt]}calculateFogTileMatrix(ct){const pt=ct.key,vt=this._fogTileMatrixCache;if(vt[pt])return vt[pt];const Tt=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,ct);return at.ae.multiply(Tt,this.worldToFogMatrix,Tt),vt[pt]=new Float32Array(Tt),vt[pt]}calculateProjMatrix(ct,pt=!1,vt=!1){const Tt=ct.key;let Pt;if(Pt=vt?this._expandedProjMatrixCache:pt?this._alignedProjMatrixCache:this._projMatrixCache,Pt[Tt])return Pt[Tt];const Ot=this.calculatePosMatrix(ct,this.worldSize);let Ft;return Ft=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:vt?this.expandedFarZProjMatrix:pt?this.alignedProjMatrix:this.projMatrix,at.ae.multiply(Ot,Ft,Ot),Pt[Tt]=new Float32Array(Ot),Pt[Tt]}calculatePixelsToTileUnitsMatrix(ct){const pt=ct.tileID.key,vt=this._pixelsToTileUnitsCache;if(vt[pt])return vt[pt];const Tt=at.aX(ct,this);return vt[pt]=Tt,vt[pt]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const ct=1/this.worldSize,pt=at.ae.fromScaling([],[ct,ct,ct]);return at.ae.multiply(pt,pt,this.globeMatrix),pt}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const ct=this._elevation;this._updateCameraState();const pt=at.ay(1,this._center.lat)*this.worldSize,vt=this._computeCameraPosition(pt),Tt=this._camera.forward(),Pt=at.ay(1,this._center.lat);vt[2]/=Pt,Tt[2]/=Pt,at.$.normalize(Tt,Tt);const Ot=ct.raycast(vt,Tt,ct.exaggeration());if(Ot){const Ft=at.$.scaleAndAdd([],vt,Tt,Ot),Vt=new at._(Ft[0],Ft[1],at.ay(Ft[2],at.az(Ft[1]))),Gt=(Vt.z+at.$.length([Vt.x-vt[0],Vt.y-vt[1],Vt.z-vt[2]*Pt]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(Gt),this._centerAltitude=Vt.toAltitude(),this._center=this.coordinateLocation(Vt),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(ct=!1){if(!this._elevation)return;const pt=this._elevation,vt=at.ay(1,this._center.lat)*this.worldSize,Tt=this._computeCameraPosition(vt),Pt=pt.getAtPointOrZero(new at._(...Tt)),Ot=this.pixelsPerMeter/this.worldSize*Pt,Ft=this._minimumHeightOverTerrain(),Vt=Tt[2]-Ot;if(Vt<=Ft)if(Vt<0||ct){const Gt=this.locationCoordinate(this._center,this._centerAltitude),Zt=[Tt[0],Tt[1],Gt.z-Tt[2]],Yt=at.$.length(Zt);Zt[2]-=(Ft-Vt)/this._pixelsPerMercatorPixel;const er=at.$.length(Zt);if(er===0)return;at.$.scale(Zt,Zt,Yt/er*this._pixelsPerMercatorPixel),this._camera.position=[Tt[0],Tt[1],Gt.z*this._pixelsPerMercatorPixel-Zt[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const ct=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||ct){const er=this.center;return er.lat=at.au(er.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!ct)&&(er.lng=at.au(er.lng,this.minLng,this.maxLng)),this.center=er,void(this._constraining=!1)}const pt=this._unmodified,{x:vt,y:Tt}=this.point;let Pt=0,Ot=vt,Ft=Tt;const Vt=this.width/2,Gt=this.height/2,Zt=this.worldMinY*this.scale,Yt=this.worldMaxY*this.scale;if(Tt-Gt<Zt&&(Ft=Zt+Gt),Tt+Gt>Yt&&(Ft=Yt-Gt),Yt-Zt<this.height&&(Pt=Math.max(Pt,this.height/(Yt-Zt)),Ft=(Yt+Zt)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const er=this.worldMinX*this.scale,rr=this.worldMaxX*this.scale,sr=this.worldSize/2-(er+rr)/2;Ot=(vt+sr+this.worldSize)%this.worldSize-sr,Ot-Vt<er&&(Ot=er+Vt),Ot+Vt>rr&&(Ot=rr-Vt),rr-er<this.width&&(Pt=Math.max(Pt,this.width/(rr-er)),Ot=(rr+er)/2)}Ot===vt&&Ft===Tt||(this.center=this.unproject(new at.P(Ot,Ft))),Pt&&(this.zoom+=this.scaleZoom(Pt)),this._constrainCamera(),this._unmodified=pt,this._constraining=!1}_minZoomForBounds(){let ct=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(ct=Math.max(ct,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),ct}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const ct=this.centerOffset,pt=this.projection.name==="globe",vt=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=at.ay(1,this.center.lat)/at.ay(1,at.b5));const Tt=at.aY(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,Tt),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const Pt=this.projection.zAxisUnit==="meters"?vt:1,Ot=this._camera.getWorldToCamera(this.worldSize,Pt);let Ft;const Vt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(Vt[8]=2*-ct.x/this.width,Vt[9]=2*ct.y/this.height,this.isOrthographic){let zr=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Yr=zr*this.aspect,Vr=-Yr,Ir=-zr;Yr-=ct.x,Vr-=ct.x,zr+=ct.y,Ir+=ct.y,Ft=this._camera.getCameraToClipOrthographic(Vr,Yr,Ir,zr,this._nearZ,this._farZ),((nn,en,Wr,Tn)=>{for(let _n=0;_n<16;_n++)nn[_n]=Uy(en[_n],Wr[_n],Tn)})(Ft,Ft,Vt,Dm(this.pitch>=15?1:this.pitch/15))}else Ft=Vt;const Gt=at.ae.mul([],Vt,Ot);let Zt=at.ae.mul([],Ft,Ot);if(this.projection.isReprojectedInTileSpace){const zr=this.locationCoordinate(this.center),Yr=at.ae.identity([]);at.ae.translate(Yr,Yr,[zr.x*this.worldSize,zr.y*this.worldSize,0]),at.ae.multiply(Yr,Yr,at.aZ(this)),at.ae.translate(Yr,Yr,[-zr.x*this.worldSize,-zr.y*this.worldSize,0]),at.ae.multiply(Zt,Zt,Yr),at.ae.multiply(Gt,Gt,Yr),this.inverseAdjustmentMatrix=at.a_(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=at.ae.scale([],Zt,[this.worldSize,this.worldSize,this.worldSize/Pt,1]),this.projMatrix=Zt,this.invProjMatrix=at.ae.invert(new Float64Array(16),this.projMatrix),pt){const zr=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);zr[8]=2*-ct.x/this.width,zr[9]=2*ct.y/this.height,this.expandedFarZProjMatrix=at.ae.mul([],zr,Ot)}else this.expandedFarZProjMatrix=this.projMatrix;const Yt=at.ae.invert([],Ft);this.frustumCorners=at.a$.fromInvProjectionMatrix(Yt,this.horizonLineFromTop(),this.height),this.cameraFrustum=at.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!pt);const er=new Float32Array(16);at.ae.identity(er),at.ae.scale(er,er,[1,-1,1]),at.ae.rotateX(er,er,this._pitch),at.ae.rotateZ(er,er,this.angle);const rr=at.ae.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=at.ae.clone(rr);const sr=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;rr[8]=2*-ct.x/this.width,rr[9]=2*(ct.y+sr)/this.height,this.skyboxMatrix=at.ae.multiply(er,rr,er);const lr=this.point,cr=lr.x,ur=lr.y,br=this.width%2/2,Er=this.height%2/2,_r=Math.cos(this.angle),$r=Math.sin(this.angle),Tr=cr-Math.round(cr)+_r*br+$r*Er,Ar=ur-Math.round(ur)+_r*Er+$r*br,Fr=new Float64Array(Zt);if(at.ae.translate(Fr,Fr,[Tr>.5?Tr-1:Tr,Ar>.5?Ar-1:Ar,0]),this.alignedProjMatrix=Fr,Zt=at.ae.create(),at.ae.scale(Zt,Zt,[this.width/2,-this.height/2,1]),at.ae.translate(Zt,Zt,[1,-1,0]),this.labelPlaneMatrix=Zt,Zt=at.ae.create(),at.ae.scale(Zt,Zt,[1,-1,1]),at.ae.translate(Zt,Zt,[-1,-1,0]),at.ae.scale(Zt,Zt,[2/this.width,2/this.height,1]),this.glCoordMatrix=Zt,this.pixelMatrix=at.ae.multiply(new Float64Array(16),this.labelPlaneMatrix,Gt),this._calcFogMatrices(),this._distanceTileDataCache={},Zt=at.ae.invert(new Float64Array(16),this.pixelMatrix),!Zt)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=Zt,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=at.b0(this);const zr=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=at.$.transformMat4(zr,zr,Ot),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=Zt;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const ct=this.cameraWorldSizeForFog,pt=this.cameraPixelsPerMeter,vt=this._camera.position,Tt=1/this.height/this._pixelsPerMercatorPixel,Pt=[ct,ct,pt];at.$.scale(Pt,Pt,Tt),at.$.scale(vt,vt,-1),at.$.multiply(vt,vt,Pt);const Ot=at.ae.create();at.ae.translate(Ot,Ot,vt),at.ae.scale(Ot,Ot,Pt),this.mercatorFogMatrix=Ot,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(ct,pt,Tt)}_computeCameraPosition(ct){const pt=(ct=ct||this.pixelsPerMeter)/this.pixelsPerMeter,vt=this._camera.forward(),Tt=this.point,Pt=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*pt-ct/this.worldSize*this._centerAltitude;return[Tt.x/this.worldSize-vt[0]*Pt,Tt.y/this.worldSize-vt[1]*Pt,ct/this.worldSize*this._centerAltitude-vt[2]*Pt]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(ct){const pt=this._maxCameraBoundsDistance()*Math.cos(this._pitch),vt=this._camera.position[2],Tt=ct[2];let Pt=1;this.projection.wrap&&(this.center=this.center.wrap()),Tt>0&&(Pt=Math.min((pt-vt)/Tt,1)),this._camera.position=at.$.scaleAndAdd([],this._camera.position,ct,Pt),this._updateStateFromCamera()}_updateStateFromCamera(){const ct=this._camera.position,pt=this._camera.forward(),{pitch:vt,bearing:Tt}=this._camera.getPitchBearing(),Pt=at.ay(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,Ot=this._mercatorZfromZoom(this._maxZoom)*Math.cos(at.ac(this._maxPitch)),Ft=Math.max((ct[2]-Pt)/Math.cos(vt),Ot),Vt=this._zoomFromMercatorZ(Ft);at.$.scaleAndAdd(ct,ct,pt,Ft),this._pitch=at.au(vt,at.ac(this.minPitch),at.ac(this.maxPitch)),this.angle=at.av(Tt,-Math.PI,Math.PI),this._setZoom(at.au(Vt,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new at._(ct[0],ct[1],ct[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(ct){return Math.pow(2,ct)*this.tileSize}_mercatorZfromZoom(ct){return this.cameraToCenterDistance/this._worldSizeFromZoom(ct)}_minimumHeightOverTerrain(){const ct=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(ct)}_zoomFromMercatorZ(ct){return this.scaleZoom(this.cameraToCenterDistance/(ct*this.tileSize))}zoomFromMercatorZAdjusted(ct){let pt=0,vt=at.aV,Tt=0,Pt=1/0;for(;vt-pt>1e-6&&vt>pt;){const Ot=pt+.5*(vt-pt),Ft=this.tileSize*Math.pow(2,Ot),Vt=this.getCameraToCenterDistance(this.projection,Ot,Ft),Gt=this.scaleZoom(Vt/(ct*this.tileSize)),Zt=Math.abs(Ot-Gt);Zt<Pt&&(Pt=Zt,Tt=Ot),Ot<Gt?pt=Ot:vt=Ot}return Tt}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(at.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(ct,pt){const vt=Math.min(ct.x,pt.x),Tt=Math.max(ct.x,pt.x),Pt=Math.min(ct.y,pt.y),Ot=Math.max(ct.y,pt.y);if(Pt<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const Ft=[new at.P(vt,Pt),new at.P(Tt,Ot),new at.P(vt,Ot),new at.P(Tt,Pt)],Vt=this.renderWorldCopies?-3:0,Gt=this.renderWorldCopies?4:1;for(const Zt of Ft){const Yt=this.pointRayIntersection(Zt);if(Yt.t<0)return!0;const er=this.rayIntersectionCoordinate(Yt);if(er.x<Vt||er.y<0||er.x>Gt||er.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+at.b1(this.fovAboveCenter)>88||this.anyCornerOffEdge(new at.P(0,0),new at.P(this.width,this.height))}zoomDeltaToMovement(ct,pt){const vt=at.$.length(at.$.sub([],this._camera.position,ct)),Tt=this._zoomFromMercatorZ(vt)+pt;return vt-this._mercatorZfromZoom(Tt)}getCameraPoint(){if(this.projection.name==="globe"){const ct=function([pt,vt,Tt],Pt){const Ot=[pt,vt,Tt,1];at.aB.transformMat4(Ot,Ot,Pt);const Ft=Ot[3]=Math.max(Ot[3],1e-6);return Ot[0]/=Ft,Ot[1]/=Ft,Ot[2]/=Ft,Ot}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new at.P(ct[0],ct[1])}{const ct=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new at.P(0,ct))}}getCameraToCenterDistance(ct,pt=this.zoom,vt=this.worldSize){const Tt=at.aY(ct,pt,this.width,this.height,1024),Pt=ct.pixelSpaceConversion(this.center.lat,vt,Tt);let Ot=.5/Math.tan(.5*this._fov)*this.height*Pt;return this.isOrthographic&&(Ot=Uy(1,Ot,Dm(this.pitch>=15?1:this.pitch/15))),Ot}getWorldToCameraMatrix(){const ct=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&at.ae.multiply(ct,ct,this.globeMatrix),ct}getFrustum(ct){return at.aM.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ct,this.projection.zAxisUnit==="meters")}}const qs={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11},Rl=(xt,ct)=>{if(ct>0&&xt.terrain&&at.w("Cutoff is currently disabled on terrain"),ct<=0||xt.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const pt=xt.transform,vt=Math.max(Math.abs(pt._zoom-(xt.minCutoffZoom-1)),1),Tt=pt.isLODDisabled(!1)?at.a0(60,45,pt.pitch):at.a0(30,15,pt.pitch),Pt=pt._farZ-pt._nearZ,Ot=ct*pt.height,Ft=((1-(Vt=Tt))*pt.cameraToCenterDistance+Vt*(pt._farZ+Ot))*vt;var Vt;return{shouldRenderCutoff:Tt<1,uniformValues:{u_cutoff_params:[pt._nearZ,pt._farZ,(Ft-pt._nearZ)/Pt,(Ft-Ot-pt._nearZ)/Pt]}}},Ks={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Ts{constructor(ct,pt){this.aabb=ct,this.lastCascade=pt}}class Zu{add(ct,pt){const vt=this.receivers[ct.key];vt!==void 0?(vt.aabb.min[0]=Math.min(vt.aabb.min[0],pt.min[0]),vt.aabb.min[1]=Math.min(vt.aabb.min[1],pt.min[1]),vt.aabb.min[2]=Math.min(vt.aabb.min[2],pt.min[2]),vt.aabb.max[0]=Math.max(vt.aabb.max[0],pt.max[0]),vt.aabb.max[1]=Math.max(vt.aabb.max[1],pt.max[1]),vt.aabb.max[2]=Math.max(vt.aabb.max[2],pt.max[2])):this.receivers[ct.key]=new Ts(pt,null)}clear(){this.receivers={}}get(ct){return this.receivers[ct.key]}computeRequiredCascades(ct,pt,vt){const Tt=at.b8.fromPoints(ct.points);let Pt=0;for(const Ot in this.receivers){const Ft=this.receivers[Ot];if(!Ft||!Tt.intersectsAabb(Ft.aabb))continue;Ft.aabb.min=Tt.closestPoint(Ft.aabb.min),Ft.aabb.max=Tt.closestPoint(Ft.aabb.max);const Vt=Ft.aabb.getCorners();for(let Gt=0;Gt<vt.length;Gt++){let Zt=!0;for(const Yt of Vt){const er=[Yt[0]*pt,Yt[1]*pt,Yt[2]];if(at.$.transformMat4(er,er,vt[Gt].matrix),er[0]<-1||er[0]>1||er[1]<-1||er[1]>1){Zt=!1;break}}if(Ft.lastCascade=Gt,Pt=Math.max(Pt,Gt),Zt)break}}return Pt+1}}class q1{constructor(ct){this.painter=ct,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Zu,this._depthMode=new at.af(ct.context.gl.LEQUAL,at.af.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,ct.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),ct.tp.registerParameter(Ks,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),ct.tp.registerParameter(Ks,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),ct.tp.registerParameter(Ks,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),ct.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const ct of this._cascades)ct.texture.destroy(),ct.framebuffer.destroy();this._cascades=[]}updateShadowParameters(ct,pt){const vt=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!pt||!pt.properties)return;const Tt=pt.properties.get("shadow-intensity");if(!pt.shadowsEnabled()||Tt<=0||(this._shadowLayerCount=vt.style.order.reduce((sr,lr)=>{const cr=vt.style._mergedLayers[lr];return sr+(cr.hasShadowPass()&&!cr.isHidden(ct.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const Pt=vt.context,Ot=Ks.shadowMapResolution,Ft=Ks.shadowMapResolution;if(this._cascades.length===0||Ks.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let sr=0;sr<Ks.cascadeCount;++sr){const lr=vt._shadowMapDebug,cr=Pt.gl,ur=Pt.createFramebuffer(Ot,Ft,lr,"texture"),br=new at.T(Pt,{width:Ot,height:Ft,data:null},cr.DEPTH_COMPONENT);if(ur.depthAttachment.set(br.texture),lr){const Er=new at.T(Pt,{width:Ot,height:Ft,data:null},cr.RGBA);ur.colorAttachment.set(Er.texture)}this._cascades.push({framebuffer:ur,texture:br,matrix:[],far:0,boundingSphereRadius:0,frustum:new at.aM,scale:0})}}this.shadowDirection=Wp(pt);let Vt=0;if(ct.elevation){const sr=ct.elevation,lr=[1e4,-1e4];sr.visibleDemTiles.filter(cr=>cr.dem).forEach(cr=>{const ur=cr.dem.tree;lr[0]=Math.min(lr[0],ur.minimums[0]),lr[1]=Math.max(lr[1],ur.maximums[0])}),lr[0]!==1e4&&(Vt=(lr[1]-lr[0])*sr.exaggeration())}const Gt=1.5*ct.cameraToCenterDistance,Zt=3*Gt,Yt=new Float64Array(16);for(let sr=0;sr<this._cascades.length;++sr){const lr=this._cascades[sr];let cr=ct.height/50,ur=1;Ks.cascadeCount===1?ur=Zt:sr===0?ur=Gt:(cr=Gt,ur=Zt);const[br,Er]=px(ct,this.shadowDirection,cr,ur,Ks.shadowMapResolution,Vt);lr.scale=ct.scale,lr.matrix=br,lr.boundingSphereRadius=Er,at.ae.invert(Yt,lr.matrix),lr.frustum=at.aM.fromInvProjectionMatrix(Yt,1,0,!0),lr.far=ur}const er=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[er].far,this._cascades[er].far],this._uniformValues.u_shadow_intensity=Tt,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Ks.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Ks.shadowMapResolution,this._uniformValues.u_shadowmap_0=qs.ShadowMap0,this._uniformValues.u_shadowmap_1=qs.ShadowMap0+1,this._groundShadowTiles=vt.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const rr=vt.transform.elevation;for(const sr of this._groundShadowTiles){let lr={min:0,max:0};if(rr){const cr=rr.getMinMaxForTile(sr);cr&&(lr=cr)}this.addShadowReceiver(sr.toUnwrapped(),lr.min,lr.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(ct){this._enabled=ct}drawShadowPass(ct,pt){if(!this.enabled)return;const vt=this.painter,Tt=vt.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(vt.transform.getFrustum(0),vt.transform.worldSize,this._cascades),Tt.viewport.set([0,0,Ks.shadowMapResolution,Ks.shadowMapResolution]);for(let Pt=0;Pt<this._numCascadesToRender;++Pt){vt.currentShadowCascade=Pt,Tt.bindFramebuffer.set(this._cascades[Pt].framebuffer.framebuffer),Tt.clear({color:at.C.white,depth:1});for(const Ot of ct.order){const Ft=ct._mergedLayers[Ot];if(!Ft.hasShadowPass()||Ft.isHidden(vt.transform.zoom))continue;const Vt=ct.getLayerSourceCache(Ft),Gt=Vt?pt[Vt.id]:void 0;(Ft.type==="model"||Gt&&Gt.length)&&vt.renderLayer(vt,Vt,Ft,Gt)}}vt.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const ct=this.painter,pt=ct.style,vt=ct.context,Tt=pt.directionalLight,Pt=pt.ambientLight;if(!Tt||!Pt)return;const Ot=[],Ft=Rl(ct,ct.longestCutoffRange);Ft.shouldRenderCutoff&&Ot.push("RENDER_CUTOFF");const Vt=Nm(pt,Tt,Pt),Gt=new at.af(vt.gl.LEQUAL,at.af.ReadOnly,ct.depthRangeFor3D);for(const Zt of this._groundShadowTiles){const Yt=Zt.toUnwrapped(),er=ct.isTileAffectedByFog(Zt),rr=ct.getOrCreateProgram("groundShadow",{defines:Ot,overrideFog:er});this.setupShadows(Yt,rr),ct.uploadCommonUniforms(vt,rr,Yt,null,Ft);const sr={u_matrix:ct.transform.calculateProjMatrix(Yt),u_ground_shadow_factor:Vt};rr.draw(ct,vt.gl.TRIANGLES,Gt,at.ah.disabled,at.a.multiply,at.ag.disabled,sr,"ground_shadow",ct.tileExtentBuffer,ct.quadTriangleIndexBuffer,ct.tileExtentSegments,{},ct.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?at.a.unblended:at.a.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(ct){const pt=this.painter.transform,vt=pt.calculatePosMatrix(ct,pt.worldSize);return at.ae.multiply(vt,this._cascades[this.painter.currentShadowCascade].matrix,vt),Float32Array.from(vt)}calculateShadowPassMatrixFromMatrix(ct){return at.ae.multiply(ct,this._cascades[this.painter.currentShadowCascade].matrix,ct),Float32Array.from(ct)}setupShadows(ct,pt,vt,Tt=0){if(!this.enabled)return;const Pt=this.painter.transform,Ot=this.painter.context,Ft=Ot.gl,Vt=this._uniformValues,Gt=new Float64Array(16),Zt=Pt.calculatePosMatrix(ct,Pt.worldSize);for(let Yt=0;Yt<this._cascades.length;Yt++)at.ae.multiply(Gt,this._cascades[Yt].matrix,Zt),Vt[Yt===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(Gt),Ot.activeTexture.set(Ft.TEXTURE0+qs.ShadowMap0+Yt),this._cascades[Yt].texture.bind(Ft.NEAREST,Ft.CLAMP_TO_EDGE);if(this.useNormalOffset=!!vt,this.useNormalOffset){const Yt=at.b7(ct.canonical),er=2/Pt.tileSize*at.a4/Ks.shadowMapResolution,rr=er*this._cascades[0].boundingSphereRadius,sr=er*this._cascades[this._cascades.length-1].boundingSphereRadius,lr=(vt==="vector-tile"?1:3)/Math.pow(2,Tt-ct.canonical.z-(1-Pt.zoom+Math.floor(Pt.zoom)));Vt.u_shadow_normal_offset=[Yt,rr*lr,sr*lr],Vt.u_shadow_bias=[6e-5,.0012,.012]}else Vt.u_shadow_bias=[36e-5,.0012,.012];pt.setShadowUniformValues(Ot,Vt)}setupShadowsFromMatrix(ct,pt,vt=!1){if(!this.enabled)return;const Tt=this.painter.context,Pt=Tt.gl,Ot=this._uniformValues,Ft=new Float64Array(16);for(let Vt=0;Vt<Ks.cascadeCount;Vt++)at.ae.multiply(Ft,this._cascades[Vt].matrix,ct),Ot[Vt===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(Ft),Tt.activeTexture.set(Pt.TEXTURE0+qs.ShadowMap0+Vt),this._cascades[Vt].texture.bind(Pt.NEAREST,Pt.CLAMP_TO_EDGE);if(this.useNormalOffset=vt,vt){const Vt=Ks.normalOffset;Ot.u_shadow_normal_offset=[1,Vt,Vt],Ot.u_shadow_bias=[6e-5,.0012,.012]}else Ot.u_shadow_bias=[36e-5,.0012,.012];pt.setShadowUniformValues(Tt,Ot)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(ct,pt,vt,Tt){if(Tt[2]>=0)return{};const Pt=function(Vt,Gt,Zt){const Yt=Zt/(1<<Vt.canonical.z);return new at.b8([Vt.canonical.x*Yt+Vt.wrap*Zt,Vt.canonical.y*Yt+Vt.wrap*Zt,0],[(Vt.canonical.x+1)*Yt+Vt.wrap*Zt,(Vt.canonical.y+1)*Yt+Vt.wrap*Zt,Gt])}(ct,pt,vt).getCorners(),Ot=pt/-Tt[2];Tt[0]<0?(at.$.add(Pt[0],Pt[0],[Tt[0]*Ot,0,0]),at.$.add(Pt[3],Pt[3],[Tt[0]*Ot,0,0])):Tt[0]>0&&(at.$.add(Pt[1],Pt[1],[Tt[0]*Ot,0,0]),at.$.add(Pt[2],Pt[2],[Tt[0]*Ot,0,0])),Tt[1]<0?(at.$.add(Pt[0],Pt[0],[0,Tt[1]*Ot,0]),at.$.add(Pt[1],Pt[1],[0,Tt[1]*Ot,0])):Tt[1]>0&&(at.$.add(Pt[2],Pt[2],[0,Tt[1]*Ot,0]),at.$.add(Pt[3],Pt[3],[0,Tt[1]*Ot,0]));const Ft={};return Ft.vertices=Pt,Ft.planes=[Gp(Pt[1],Pt[0],Pt[4]),Gp(Pt[2],Pt[1],Pt[5]),Gp(Pt[3],Pt[2],Pt[6]),Gp(Pt[0],Pt[3],Pt[7])],Ft}addShadowReceiver(ct,pt,vt){this._receivers.add(ct,at.b8.fromTileIdAndHeight(ct,pt,vt))}getMaxCascadeForTile(ct){const pt=this._receivers.get(ct);return pt&&pt.lastCascade?pt.lastCascade:0}}function Gp(xt,ct,pt){const vt=at.$.sub([],pt,ct),Tt=at.$.sub([],xt,ct),Pt=at.$.cross([],vt,Tt),Ot=at.$.length(Pt);return Ot===0?[0,0,1,0]:(at.$.scale(Pt,Pt,1/Ot),[Pt[0],Pt[1],Pt[2],-at.$.dot(Pt,ct)])}function Wp(xt){const ct=xt.properties.get("direction"),pt=at.ad(ct.x,ct.y,ct.z);pt[2]=at.au(pt[2],0,75);const vt=at.b9([pt[0],pt[1],pt[2]]);return at.$.fromValues(vt.x,vt.y,vt.z)}function Nm(xt,ct,pt){const vt=ct.properties.get("color"),Tt=ct.properties.get("intensity"),Pt=ct.properties.get("direction"),Ot=[Pt.x,Pt.y,Pt.z],Ft=pt.properties.get("color"),Vt=pt.properties.get("intensity"),Gt=Math.max(at.$.dot([0,0,1],Ot),0),Zt=[0,0,0];at.$.scale(Zt,Ft.toRenderColor(xt.getLut(ct.scope)).toArray01Linear().slice(0,3),Vt);const Yt=[0,0,0];return at.$.scale(Yt,vt.toRenderColor(xt.getLut(pt.scope)).toArray01Linear().slice(0,3),Gt*Tt),at.ba([Zt[0]>0?Zt[0]/(Zt[0]+Yt[0]):0,Zt[1]>0?Zt[1]/(Zt[1]+Yt[1]):0,Zt[2]>0?Zt[2]/(Zt[2]+Yt[2]):0])}function px(xt,ct,pt,vt,Tt,Pt){const Ot=xt.zoom,Ft=xt.scale,Vt=xt.worldSize,Gt=1/Vt,Zt=xt.aspect,Yt=Math.sqrt(1+Zt*Zt)*Math.tan(.5*xt.fovX),er=Yt*Yt,rr=vt-pt,sr=vt+pt;let lr,cr;er>rr/sr?(lr=vt,cr=vt*Yt):(lr=.5*sr*(1+er),cr=.5*Math.sqrt(rr*rr+2*(vt*vt+pt*pt)*er+sr*sr*er*er));const ur=xt.projection.pixelsPerMeter(xt.center.lat,Vt),br=xt._camera.getCameraToWorldMercator(),Er=[0,0,-lr*Gt];at.$.transformMat4(Er,Er,br);let _r=cr*Gt;const $r=xt._edgeInsets;if(!($r.left===0&&$r.top===0&&$r.right===0&&$r.bottom===0||$r.left===$r.right&&$r.top===$r.bottom)){const bn=xt._camera.getWorldToCamera(xt.worldSize,xt.projection.zAxisUnit==="meters"?ur:1),Sn=xt._camera.getCameraToClipPerspective(xt._fov,xt.width/xt.height,pt,vt);Sn[8]=2*-xt.centerOffset.x/xt.width,Sn[9]=2*xt.centerOffset.y/xt.height;const zn=new Float64Array(16);at.ae.mul(zn,Sn,bn);const Un=new Float64Array(16);at.ae.invert(Un,zn);const Qn=at.aM.fromInvProjectionMatrix(Un,Vt,Ot,!0);for(const Wn of Qn.points){const uo=((Tr=Wn)[0]/=Ft,Tr[1]/=Ft,Tr[2]=at.ay(Tr[2],xt._center.lat),Tr);_r=Math.max(_r,at.$.len(at.$.subtract([],Er,uo)))}}var Tr;_r*=Tt/(Tt-1);const Ar=Math.acos(ct[2]),Fr=Math.atan2(-ct[0],-ct[1]),zr=new zp;zr.position=Er,zr.setPitchBearing(Ar,Fr);const Yr=zr.getWorldToCamera(Vt,ur),Vr=_r*Vt,Ir=Math.min(xt._mercatorZfromZoom(17)*Vt*-2,-2*Vr),nn=zr.getCameraToClipOrthographic(-Vr,Vr,-Vr,Vr,Ir,(Vr+Pt*ur)/ct[2]),en=new Float64Array(16);at.ae.multiply(en,nn,Yr);const Wr=at.$.fromValues(Math.floor(1e6*Er[0])/1e6*Vt,Math.floor(1e6*Er[1])/1e6*Vt,0),Tn=.5*Tt,_n=[0,0,0];at.$.transformMat4(_n,Wr,en),at.$.scale(_n,_n,Tn);const Xr=[Math.floor(_n[0]),Math.floor(_n[1]),Math.floor(_n[2])],hn=[0,0,0];at.$.sub(hn,_n,Xr),at.$.scale(hn,hn,-1/Tn);const Ur=new Float64Array(16);return at.ae.identity(Ur),at.ae.translate(Ur,Ur,hn),at.ae.multiply(en,Ur,en),[en,Vr]}function Fm(xt,ct){return xt!=null&&ct!=null&&!(!xt.hasData()||!ct.hasData())&&xt.demTexture!=null&&ct.demTexture!=null&&xt.tileID.key!==ct.tileID.key}const qu=new class{constructor(){this.operations={}}newMorphing(xt,ct,pt,vt,Tt){if(xt in this.operations){const Pt=this.operations[xt];Pt.to.tileID.key!==pt.tileID.key&&(Pt.queued=pt)}else this.operations[xt]={startTime:vt,phase:0,duration:Tt,from:ct,to:pt,queued:null}}getMorphValuesForProxy(xt){if(!(xt in this.operations))return null;const ct=this.operations[xt];return{from:ct.from,to:ct.to,phase:ct.phase}}update(xt){for(const ct in this.operations){const pt=this.operations[ct];for(pt.phase=(xt-pt.startTime)/pt.duration;pt.phase>=1||!this._validOp(pt);)if(!this._nextOp(pt,xt)){delete this.operations[ct];break}}}_nextOp(xt,ct){return!!xt.queued&&(xt.from=xt.to,xt.to=xt.queued,xt.queued=null,xt.phase=0,xt.startTime=ct,!0)}_validOp(xt){return xt.from.hasData()&&xt.to.hasData()}},Bm={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Ku(xt,ct,pt){if(ct===0)return 0;const vt=ct<1&&pt===514?.25/ct:1;return 6*Math.pow(1.5,22-xt)*Math.max(ct,1)*vt}function zm(xt,ct){const pt=1<<xt.z;return!ct&&(xt.x===0||xt.x===pt-1)||xt.y===0||xt.y===pt-1}const Vm=xt=>({u_matrix:xt});function Gy(xt,ct,pt,vt,Tt){if(Tt>0){const Pt=at.e.now(),Ot=(Pt-xt.timeAdded)/Tt,Ft=ct?(Pt-ct.timeAdded)/Tt:-1,Vt=pt.getSource(),Gt=vt.coveringZoomLevel({tileSize:Vt.tileSize,roundZoom:Vt.roundZoom}),Zt=!ct||Math.abs(ct.tileID.overscaledZ-Gt)>Math.abs(xt.tileID.overscaledZ-Gt),Yt=Zt&&xt.refreshedUponExpiration?1:at.au(Zt?Ot:1-Ft,0,1);return xt.refreshedUponExpiration&&Ot>=1&&(xt.refreshedUponExpiration=!1),ct?{opacity:1,mix:1-Yt}:{opacity:Yt,mix:0}}return{opacity:1,mix:0}}class Yu extends Ll{constructor(ct,pt,vt,Tt){super(ct,pt,vt,Tt),this.type="raster-array",this.maxzoom=22,this._options=at.Q({type:"raster-array"},pt)}triggerRepaint(ct){const pt=this.map.painter._terrain,vt=this.map.style.getSourceCache(this.id);pt&&pt.enabled&&vt&&pt._clearRenderCacheForTile(vt.id,ct.tileID),this.map.triggerRepaint()}loadTile(ct,pt){const vt=this.map._requestManager.normalizeTileURL(ct.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),Tt=this.map._requestManager.transformRequest(vt,at.R.Tile);ct.requestParams=Tt,ct.actor||(ct.actor=this.dispatcher.getActor()),ct.request=ct.fetchHeader(void 0,(Pt,Ot,Ft,Vt)=>{if(delete ct.request,ct.aborted)return ct.state="unloaded",pt(null);if(Pt)return Pt.code===20?void 0:(ct.state="errored",pt(Pt));this.map._refreshExpiredTiles&&ct.setExpiryData({cacheControl:Ft,expires:Vt}),ct.state="empty",pt(null)})}unloadTile(ct,pt){const vt=ct.texture;vt&&vt instanceof at.T?(ct.destroy(!0),this.map.painter.saveTileTexture(vt)):(ct.destroy(),ct.flushQueues(),ct._isHeaderLoaded=!1,delete ct._mrt,delete ct.textureDescriptor),ct.fbo&&(ct.fbo.destroy(),delete ct.fbo),delete ct.request,delete ct.requestParams,delete ct.neighboringTiles,ct.state="unloaded"}prepareTile(ct,pt,vt){ct._isHeaderLoaded&&(ct.state!=="empty"&&(ct.state="reloading"),ct.fetchBand(pt,vt,(Tt,Pt)=>{if(Tt)return ct.state="errored",this.fire(new at.f(Tt)),void this.triggerRepaint(ct);Pt&&(ct.setTexture(Pt,this.map.painter),ct.state="loaded",this.triggerRepaint(ct))}))}getInitialBand(ct){if(!this.rasterLayers)return 0;const pt=this.rasterLayers.find(({id:Pt})=>Pt===ct),vt=pt&&pt.fields,Tt=vt&&vt.bands&&vt.bands;return Tt?Tt[0]:0}getTextureDescriptor(ct,pt,vt){if(!ct)return;const Tt=pt.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!Tt)return;let Pt=null;pt instanceof at.bm?Pt=pt.paint.get("raster-array-band"):pt instanceof at.bn&&(Pt=pt.paint.get("raster-particle-array-band"));const Ot=Pt||this.getInitialBand(Tt);if(Ot!=null)if(ct.textureDescriptor){if(!ct.updateNeeded(Tt,Ot)||vt)return Object.assign({},ct.textureDescriptor,{texture:ct.texture})}else this.prepareTile(ct,Tt,Ot)}}const Wy={vector:Gv,raster:Ll,"raster-dem":class extends Ll{constructor(xt,ct,pt,vt){super(xt,ct,pt,vt),this.type="raster-dem",this.maxzoom=22,this._options=at.Q({type:"raster-dem"},ct),this.encoding=ct.encoding||"mapbox"}loadTile(xt,ct){const pt=this.map._requestManager.normalizeTileURL(xt.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function vt(Tt,Pt){Tt&&(xt.state="errored",ct(Tt)),Pt&&(xt.dem=Pt,xt.dem.onDeserialize(),xt.needsHillshadePrepare=!0,xt.needsDEMTextureUpload=!0,xt.state="loaded",ct(null))}xt.request=at.i(this.map._requestManager.transformRequest(pt,at.R.Tile),(function(Tt,Pt,Ot,Ft){if(delete xt.request,xt.aborted)xt.state="unloaded",ct(null);else if(Tt)xt.state="errored",ct(Tt);else if(Pt){this.map._refreshExpiredTiles&&xt.setExpiryData({cacheControl:Ot,expires:Ft});const Vt=ImageBitmap&&Pt instanceof ImageBitmap&&at.bk(),Gt=1-(Pt.width-at.bl(Pt.width))/2;Gt<1||xt.neighboringTiles||(xt.neighboringTiles=this._getNeighboringTiles(xt.tileID));const Zt=Vt?Pt:at.e.getImageData(Pt,Gt),Yt={uid:xt.uid,coord:xt.tileID,source:this.id,scope:this.scope,rawImageData:Zt,encoding:this.encoding,padding:Gt};xt.actor&&xt.state!=="expired"||(xt.actor=this.dispatcher.getActor(),xt.actor.send("loadDEMTile",Yt,vt.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(xt){const ct=xt.canonical,pt=Math.pow(2,ct.z),vt=(ct.x-1+pt)%pt,Tt=ct.x===0?xt.wrap-1:xt.wrap,Pt=(ct.x+1+pt)%pt,Ot=ct.x+1===pt?xt.wrap+1:xt.wrap,Ft={};return Ft[new at.aQ(xt.overscaledZ,Tt,ct.z,vt,ct.y).key]={backfilled:!1},Ft[new at.aQ(xt.overscaledZ,Ot,ct.z,Pt,ct.y).key]={backfilled:!1},ct.y>0&&(Ft[new at.aQ(xt.overscaledZ,Tt,ct.z,vt,ct.y-1).key]={backfilled:!1},Ft[new at.aQ(xt.overscaledZ,xt.wrap,ct.z,ct.x,ct.y-1).key]={backfilled:!1},Ft[new at.aQ(xt.overscaledZ,Ot,ct.z,Pt,ct.y-1).key]={backfilled:!1}),ct.y+1<pt&&(Ft[new at.aQ(xt.overscaledZ,Tt,ct.z,vt,ct.y+1).key]={backfilled:!1},Ft[new at.aQ(xt.overscaledZ,xt.wrap,ct.z,ct.x,ct.y+1).key]={backfilled:!1},Ft[new at.aQ(xt.overscaledZ,Ot,ct.z,Pt,ct.y+1).key]={backfilled:!1}),Ft}},"raster-array":Yu,geojson:class extends at.E{constructor(xt,ct,pt,vt){super(),this.id=xt,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=pt.getActor(),this.setEventedParent(vt),this._data=ct.data,this._options=at.Q({},ct),this._collectResourceTiming=ct.collectResourceTiming,ct.maxzoom!==void 0&&(this.maxzoom=ct.maxzoom),ct.minzoom!==void 0&&(this.minzoom=ct.minzoom),ct.type&&(this.type=ct.type),ct.attribution&&(this.attribution=ct.attribution),this.promoteId=ct.promoteId;const Tt=at.a4/this.tileSize;this.workerOptions=at.Q({source:this.id,scope:this.scope,cluster:ct.cluster||!1,geojsonVtOptions:{buffer:(ct.buffer!==void 0?ct.buffer:128)*Tt,tolerance:(ct.tolerance!==void 0?ct.tolerance:.375)*Tt,extent:at.a4,maxZoom:this.maxzoom,lineMetrics:ct.lineMetrics||!1,generateId:ct.generateId||!1},superclusterOptions:{maxZoom:ct.clusterMaxZoom!==void 0?ct.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,ct.clusterMinPoints||2),extent:at.a4,radius:(ct.clusterRadius!==void 0?ct.clusterRadius:50)*Tt,log:!1,generateId:ct.generateId||!1},clusterProperties:ct.clusterProperties,filter:ct.filter,dynamic:ct.dynamic},ct.workerOptions)}onAdd(xt){this.map=xt,this.setData(this._data)}setData(xt){return this._data=xt,this._updateWorkerData(),this}updateData(xt){if(!this._options.dynamic)return this.fire(new at.f(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof xt!="string"&&(xt.type==="Feature"&&(xt={type:"FeatureCollection",features:[xt]}),xt.type!=="FeatureCollection"))return this.fire(new at.f(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof xt!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const ct=new Map;for(const pt of this._data.features)ct.set(pt.id,pt);for(const pt of xt.features)ct.set(pt.id,pt);this._data.features=[...ct.values()]}else this._data=xt;return this._updateWorkerData(!0),this}getClusterExpansionZoom(xt,ct){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:xt,source:this.id,scope:this.scope},ct),this}getClusterChildren(xt,ct){return this.actor.send("geojson.getClusterChildren",{clusterId:xt,source:this.id,scope:this.scope},ct),this}getClusterLeaves(xt,ct,pt,vt){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:xt,limit:ct,offset:pt},vt),this}_updateWorkerData(xt=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new at.g("dataloading",{dataType:"source"})),this._loaded=!1;const ct=at.Q({append:xt},this.workerOptions);ct.scope=this.scope;const pt=this._data;typeof pt=="string"?(ct.request=this.map._requestManager.transformRequest(at.e.resolveURL(pt),at.R.Source),ct.request.collectResourceTiming=this._collectResourceTiming):ct.data=JSON.stringify(pt),this._pendingLoad=this.actor.send(`${this.type}.loadData`,ct,(vt,Tt)=>{if(this._loaded=!0,this._pendingLoad=null,vt)this.fire(new at.f(vt));else{const Pt={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&Tt&&Tt.resourceTiming&&Tt.resourceTiming[this.id]&&(Pt.resourceTiming=Tt.resourceTiming[this.id]),xt&&(this._partialReload=!0),this.fire(new at.g("data",Pt)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(xt),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(xt,ct){const pt=xt.actor?"reloadTile":"loadTile";xt.actor=this.actor;const vt=this.map.style?this.map.style.getLut(this.scope):null,Tt=this._partialReload,Pt={type:this.type,uid:xt.uid,tileID:xt.tileID,tileZoom:xt.tileZoom,zoom:xt.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:vt?{image:vt.image.clone()}:null,scope:this.scope,pixelRatio:at.e.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,partial:Tt};xt.request=this.actor.send(pt,Pt,(Ot,Ft)=>Tt&&!Ft?(xt.state="loaded",ct(null)):(delete xt.request,xt.destroy(),xt.aborted?ct(null):Ot?ct(Ot):(xt.loadVectorData(Ft,this.map.painter,pt==="reloadTile"),ct(null))),void 0,pt==="loadTile")}abortTile(xt){xt.request&&(xt.request.cancel(),delete xt.request),xt.aborted=!0}unloadTile(xt,ct){this.actor.send("removeTile",{uid:xt.uid,type:this.type,source:this.id,scope:this.scope}),xt.destroy()}onRemove(xt){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return at.Q({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends at.bo{constructor(xt,ct,pt,vt){super(xt,ct,pt,vt),this.roundZoom=!0,this.type="video",this.options=ct}load(){this._loaded=!1;const xt=this.options;this.urls=[];for(const ct of xt.urls)this.urls.push(this.map._requestManager.transformRequest(ct,at.R.Source).url);at.bp(this.urls,(ct,pt)=>{this._loaded=!0,ct?this.fire(new at.f(ct)):pt&&(this.video=pt,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(xt){if(this.video){const ct=this.video.seekable;xt<ct.start(0)||xt>ct.end(0)?this.fire(new at.f(new at.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ct.start(0)} and ${ct.end(0)}-second mark.`))):this.video.currentTime=xt}}getVideo(){return this.video}onAdd(xt){this.map||(this.map=xt,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const xt=this.map.painter.context,ct=xt.gl;this.texture?this.video.paused||(this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),ct.texSubImage2D(ct.TEXTURE_2D,0,0,0,ct.RGBA,ct.UNSIGNED_BYTE,this.video)):(this.texture=new at.T(xt,this.video,ct.RGBA),this.texture.bind(ct.LINEAR,ct.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(xt)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:at.bo,model:class extends at.E{constructor(xt,ct,pt,vt){super(),this.id=xt,this.type="model",this.models=[],this._loaded=!1,this._options=ct}load(){const xt=[];for(const ct in this._options.models){const pt=this._options.models[ct],vt=at.l(this.map._requestManager.transformRequest(pt.uri,at.R.Model).url).then(Tt=>{if(!Tt)return;const Pt=at.c(Tt),Ot=new at.M(ct,pt.position,pt.orientation,Pt);Ot.computeBoundsAndApplyParent(),this.models.push(Ot)}).catch(Tt=>{this.fire(new at.f(new Error(`Could not load model ${ct} from ${pt.uri}: ${Tt.message}`)))});xt.push(vt)}return Promise.allSettled(xt).then(()=>{this._loaded=!0,this.fire(new at.g("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(ct=>{this.fire(new at.f(new Error(`Could not load models: ${ct.message}`)))})}onAdd(xt){this.map=xt,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(xt,ct){}serialize(){return{type:"model"}}},"batched-model":class extends at.E{constructor(xt,ct,pt,vt){super(),this.type="batched-model",this.id=xt,this.tileSize=512,this._options=ct,this.tiles=this._options.tiles,this.maxzoom=ct.maxzoom||19,this.minzoom=ct.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=pt,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(vt)}onAdd(xt){this.map=xt,this.load()}load(xt){this._loaded=!1,this.fire(new at.g("dataloading",{dataType:"source"}));const ct=Array.isArray(this.map._language)?this.map._language.join():this.map._language,pt=this.map._worldview;this._tileJSONRequest=lx(this._options,this.map._requestManager,ct,pt,(vt,Tt)=>{this._tileJSONRequest=null,this._loaded=!0,vt?(ct&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${ct}`),pt&&pt.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${pt}`),this.fire(new at.f(vt))):Tt&&(at.Q(this,Tt),Tt.bounds&&(this.tileBounds=new $m(Tt.bounds,this.minzoom,this.maxzoom)),at.ao(Tt.tiles,this.map._requestManager._customAccessToken),this.fire(new at.g("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new at.g("data",{dataType:"source",sourceDataType:"content"}))),xt&&xt(vt)})}hasTransition(){return!1}hasTile(xt){return!this.tileBounds||this.tileBounds.contains(xt.canonical)}loaded(){return this._loaded}loadTile(xt,ct){const pt=this.map._requestManager.normalizeTileURL(xt.tileID.canonical.url(this.tiles,this.scheme)),vt={request:this.map._requestManager.transformRequest(pt,at.R.Tile),data:void 0,uid:xt.uid,tileID:xt.tileID,tileZoom:xt.tileZoom,zoom:xt.tileID.overscaledZ,tileSize:this.tileSize*xt.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:xt.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0};if(xt.actor&&xt.state!=="expired")if(xt.state==="loading")xt.reloadCallback=ct;else{if(xt.buckets){const Pt=Object.values(xt.buckets);for(const Ot of Pt)Ot.dirty=!0;return void(xt.state="loaded")}xt.request=xt.actor.send("reloadTile",vt,Tt.bind(this))}else xt.actor=this.dispatcher.getActor(),xt.request=xt.actor.send("loadTile",vt,Tt.bind(this),void 0,!0);function Tt(Pt,Ot){return xt.aborted?ct(null):Pt&&Pt.status!==404?ct(Pt):(Ot&&(Ot.resourceTiming&&(xt.resourceTiming=Ot.resourceTiming),this.map._refreshExpiredTiles&&xt.setExpiryData(Ot),xt.buckets={...xt.buckets,...Ot.buckets},Ot.featureIndex&&(xt.latestFeatureIndex=Ot.featureIndex)),xt.state="loaded",void ct(null))}}serialize(){return at.Q({},this._options)}},canvas:class extends at.bo{constructor(xt,ct,pt,vt){super(xt,ct,pt,vt),ct.coordinates?Array.isArray(ct.coordinates)&&ct.coordinates.length===4&&!ct.coordinates.some(Tt=>!Array.isArray(Tt)||Tt.length!==2||Tt.some(Pt=>typeof Pt!="number"))||this.fire(new at.f(new at.V(`sources.${xt}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new at.f(new at.V(`sources.${xt}`,null,'missing required property "coordinates"'))),ct.animate&&typeof ct.animate!="boolean"&&this.fire(new at.f(new at.V(`sources.${xt}`,null,'optional "animate" property must be a boolean value'))),ct.canvas?typeof ct.canvas=="string"||ct.canvas instanceof HTMLCanvasElement||this.fire(new at.f(new at.V(`sources.${xt}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new at.f(new at.V(`sources.${xt}`,null,'missing required property "canvas"'))),this.options=ct,this.animate=ct.animate===void 0||ct.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new at.f(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(xt){this.map=xt,this.load(),this.canvas&&this.animate&&this.play()}onRemove(xt){this.pause()}prepare(){let xt=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,xt=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,xt=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const ct=this.map.painter.context;this.texture?!xt&&!this._playing||this.texture instanceof at.bq||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new at.T(ct,this.canvas,ct.gl.RGBA,{premultiply:!0}),this._prepareData(ct)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const xt of[this.canvas.width,this.canvas.height])if(isNaN(xt)||xt<=0)return!0;return!1}},custom:class extends at.E{constructor(xt,ct,pt,vt){super(),this.id=xt,this.type="custom",this._dataType="raster",this._dispatcher=pt,this._implementation=ct,this.setEventedParent(vt),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new at.f(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new at.f(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new $m(this._implementation.bounds,this.minzoom,this.maxzoom)),ct.update=this._update.bind(this),ct.clearTiles=this._clearTiles.bind(this),ct.coveringTiles=this._coveringTiles.bind(this),at.Q(this,at.ai(ct,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return at.ai(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new at.g("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new at.g("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(xt){this.map=xt,this._loaded=!1,this.fire(new at.g("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(xt),this.load()}onRemove(xt){this._implementation.onRemove&&this._implementation.onRemove(xt)}hasTile(xt){if(this._implementation.hasTile){const{x:ct,y:pt,z:vt}=xt.canonical;return this._implementation.hasTile({x:ct,y:pt,z:vt})}return!this.tileBounds||this.tileBounds.contains(xt.canonical)}loadTile(xt,ct){const{x:pt,y:vt,z:Tt}=xt.tileID.canonical,Pt=new AbortController;xt.request=Promise.resolve(this._implementation.loadTile({x:pt,y:vt,z:Tt},{signal:Pt.signal})).then((function(Ot){return delete xt.request,xt.aborted?(xt.state="unloaded",ct(null)):Ot===void 0?(xt.state="errored",ct(null)):Ot===null?(this.loadTileData(xt,{width:this.tileSize,height:this.tileSize,data:null}),xt.state="loaded",ct(null)):function(Ft){return Ft instanceof ImageData||Ft instanceof HTMLCanvasElement||Ft instanceof ImageBitmap||Ft instanceof HTMLImageElement}(Ot)?(this.loadTileData(xt,Ot),xt.state="loaded",void ct(null)):(xt.state="errored",ct(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(Ot=>{Ot.code!==20&&(xt.state="errored",ct(Ot))}),xt.request.cancel=()=>Pt.abort()}loadTileData(xt,ct){xt.setTexture(ct,this.map.painter)}unloadTile(xt,ct){if(xt.texture&&xt.texture instanceof at.T?(xt.destroy(!0),xt.texture&&xt.texture instanceof at.T&&this.map.painter.saveTileTexture(xt.texture)):xt.destroy(),this._implementation.unloadTile){const{x:pt,y:vt,z:Tt}=xt.tileID.canonical;this._implementation.unloadTile({x:pt,y:vt,z:Tt})}ct&&ct()}abortTile(xt,ct){xt.request&&xt.request.cancel&&(xt.request.cancel(),delete xt.request),ct&&ct()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(xt=>({x:xt.canonical.x,y:xt.canonical.y,z:xt.canonical.z}))}_clearTiles(){const xt=at.am(this.id,this.scope);this.map.style.clearSource(xt)}_update(){this.fire(new at.g("data",{dataType:"source",sourceDataType:"content"}))}}},Hy=function(xt,ct,pt,vt){const Tt=new Wy[ct.type](xt,ct,pt,vt);if(Tt.id!==xt)throw new Error(`Expected Source id to be ${xt} instead of ${Tt.id}`);return at.br(["load","abort","unload","serialize","prepare"],Tt),Tt};class qv extends at.bx{constructor(ct){const pt={type:"raster-dem",maxzoom:ct.transform.maxZoom},vt=new at.by(at.bz(),null),Tt=Hy("mock-dem",pt,vt,ct.style);super("mock-dem",Tt,!1),Tt.setEventedParent(this),this._sourceLoaded=!0}_loadTile(ct,pt){ct.state="loaded",pt(null)}}class Kv extends at.bx{constructor(ct){const pt=Hy("proxy",{type:"geojson",maxzoom:ct.transform.maxZoom},new at.by(at.bz(),null),ct.style);super("proxy",pt,!1),pt.setEventedParent(this),this.map=this.getSource().map=ct,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(ct,pt,vt){if(ct.freezeTileCoverage)return;this.transform=ct;const Tt=ct.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((Pt,Ot)=>{if(Pt[Ot.key]="",!this._tiles[Ot.key]){const Ft=new at.bA(Ot,this._source.tileSize*Ot.overscaleFactor(),ct.tileZoom);Ft.state="loaded",this._tiles[Ot.key]=Ft}return Pt},{});for(const Pt in this._tiles)Pt in Tt||(this.freeFBO(Pt),this._tiles[Pt].unloadVectorData(),delete this._tiles[Pt])}freeFBO(ct){const pt=this.proxyCachedFBO[ct];if(pt!==void 0){const vt=Object.values(pt);this.renderCachePool.push(...vt),delete this.proxyCachedFBO[ct]}}deallocRenderCache(){this.renderCache.forEach(ct=>ct.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class mx extends at.aQ{constructor(ct,pt,vt){super(ct.overscaledZ,ct.wrap,ct.canonical.z,ct.canonical.x,ct.canonical.y),this.proxyTileKey=pt,this.projMatrix=vt}}class Ys extends at.bs{constructor(ct,pt){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},ct.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),ct.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),ct.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=ct,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[vt,Tt,Pt]=function(Vt){const Gt=new at.bv,Zt=new at.bw,Yt=131;Gt.reserve(17161),Zt.reserve(33800);const er=at.a4/128,rr=at.a4+er/2,sr=rr+er;for(let cr=-er;cr<sr;cr+=er)for(let ur=-er;ur<sr;ur+=er){const br=ur<0||ur>rr||cr<0||cr>rr?24575:0,Er=at.au(Math.round(ur),0,at.a4),_r=at.au(Math.round(cr),0,at.a4);Gt.emplaceBack(Er+br,_r)}const lr=(cr,ur)=>{const br=ur*Yt+cr;Zt.emplaceBack(br+1,br,br+Yt),Zt.emplaceBack(br+Yt,br+Yt+1,br+1)};for(let cr=1;cr<129;cr++)for(let ur=1;ur<129;ur++)lr(ur,cr);return[0,129].forEach(cr=>{for(let ur=0;ur<130;ur++)lr(ur,cr),lr(cr,ur)}),[Gt,Zt,32768]}(),Ot=ct.context;this.gridBuffer=Ot.createVertexBuffer(vt,at.bt.members),this.gridIndexBuffer=Ot.createIndexBuffer(Tt),this.gridSegments=at.b.simpleSegment(0,0,vt.length,Tt.length),this.gridNoSkirtSegments=at.b.simpleSegment(0,0,vt.length,Pt),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Kv(pt.map),this.orthoMatrix=at.ae.create(),at.ae.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,at.a4,0,at.a4,0,1);const Ft=Ot.gl;this._overlapStencilMode=new at.ah({func:Ft.GEQUAL,mask:255},0,255,Ft.KEEP,Ft.KEEP,Ft.REPLACE),this._previousZoom=ct.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=pt,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new qv(pt.map),this._pendingGroundEffectLayers=[]}set style(ct){ct.on("data",this._onStyleDataEvent.bind(this)),this._style=ct,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(ct,pt,vt){if(ct&&ct.terrain){this._style!==ct&&(this.style=ct,this._evaluationZoom=void 0);const Tt=ct.terrain.properties,Pt=ct.terrain.drapeRenderMode===0,Ot=ct.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=at.e.now();const Ft=ct.terrain&&ct.terrain.scope,Vt=Tt.get("source"),Gt=Pt?this._mockSourceCache:ct.getSourceCache(Vt,Ft);if(!Gt)return void at.w(`Couldn't find terrain source "${Vt}".`);if(this.sourceCache=Gt,this._exaggeration=Ot?this.calculateExaggeration(pt):Tt.get("exaggeration"),!pt.projection.requiresDraping&&Ot&&this._exaggeration===0)return void this._disable();this.enabled=!0;const Zt=()=>{this.sourceCache.used&&at.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const Yt=this.getScaledDemTileSize();this.sourceCache.update(pt,Yt,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,Zt(),this._initializing=!0),Zt(),pt.updateElevation(!0,vt),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(pt),this._emptyDEMTextureDirty=!0,this._previousZoom=pt.zoom}else this._disable()}calculateExaggeration(ct){const pt=this._previousCameraAltitude,vt=ct.getFreeCameraOptions().position.z/ct.pixelsPerMeter*ct.worldSize;this._previousCameraAltitude=vt;const Tt=pt!=null?vt-pt:Number.MAX_VALUE;if(Math.abs(Tt)<2)return this._exaggeration;const Pt=ct.zoom,Ot=this._style.terrain;if(!this._previousUpdateTimestamp)return Ot.getExaggeration(Pt);let Ft=Pt-this._previousZoom;const Vt=this._previousUpdateTimestamp;let Gt=Pt;this._evaluationZoom!=null&&(Gt=this._evaluationZoom,Math.abs(Pt-Gt)>.5&&(Ft=.5*(Pt-Gt+Ft)),Ft*Tt<0&&(Gt+=Ft)),this._evaluationZoom=Gt;const Zt=Ot.getExaggeration(Gt),Yt=Zt===Ot.getExaggeration(Math.max(0,Gt-.1));if(Yt&&Math.abs(Zt-this._exaggeration)<.01)return Zt;let er=Math.min(.1,.00375*(this._updateTimestamp-Vt));return(Yt||Zt<.1||Math.abs(Ft)<1e-4)&&(er=Math.min(.2,4*er)),at.a3(this._exaggeration,Zt,er)}resetTileLookupCache(ct){this._findCoveringTileCache[ct]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(ct){ct.coord&&ct.dataType==="source"?this._clearRenderCacheForTile(ct.sourceCacheId,ct.coord):ct.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const ct in this._style._mergedSourceCaches)this._style._mergedSourceCaches[ct].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(ct=>ct.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const ct=2*this.proxySourceCache.getSource().tileSize;return[ct,ct]}set useVertexMorphing(ct){this._useVertexMorphing=ct}updateTileBinding(ct){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const pt=this.proxySourceCache,vt=this.painter.transform;this._initializing&&(this._initializing=vt._centerAltitude===0&&this.getAtPointOrZero(at._.fromLngLat(vt.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const Tt=this.proxyCoords=pt.getIds().map(Vt=>{const Gt=pt.getTileByID(Vt).tileID;return Gt.projMatrix=vt.calculateProjMatrix(Gt.toUnwrapped()),Gt});(function(Vt,Gt){const Zt=Gt.transform.pointCoordinate(Gt.transform.getCameraPoint()),Yt=new at.P(Zt.x,Zt.y);Vt.sort((er,rr)=>{if(rr.overscaledZ-er.overscaledZ)return rr.overscaledZ-er.overscaledZ;const sr=new at.P(er.canonical.x+(1<<er.canonical.z)*er.wrap,er.canonical.y),lr=new at.P(rr.canonical.x+(1<<rr.canonical.z)*rr.wrap,rr.canonical.y),cr=Yt.mult(1<<er.canonical.z);return cr.x-=.5,cr.y-=.5,cr.distSqr(sr)-cr.distSqr(lr)})})(Tt,this.painter);const Pt=this.proxyToSource||{};this.proxyToSource={},Tt.forEach(Vt=>{this.proxyToSource[Vt.key]={}}),this.terrainTileForTile={};const Ot=this._style._mergedSourceCaches;for(const Vt in Ot){const Gt=Ot[Vt];if(!Gt.used||(Gt!==this.sourceCache&&this.resetTileLookupCache(Gt.id),this._setupProxiedCoordsForOrtho(Gt,ct[Vt],Pt),Gt.usedForTerrain))continue;const Zt=ct[Vt];Gt.getSource().reparseOverscaled&&this._assignTerrainTiles(Zt)}this.proxiedCoords[pt.id]=Tt.map(Vt=>new mx(Vt,Vt.key,this.orthoMatrix)),this._assignTerrainTiles(Tt),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(Pt),this.renderingToTexture=!1;const Ft={};this._visibleDemTiles=[];for(const Vt of this.proxyCoords){const Gt=this.terrainTileForTile[Vt.key];if(!Gt)continue;const Zt=Gt.tileID.key;Zt in Ft||(this._visibleDemTiles.push(Gt),Ft[Zt]=Zt)}}_assignTerrainTiles(ct){this._initializing||ct.forEach(pt=>{if(this.terrainTileForTile[pt.key])return;const vt=this._findTileCoveringTileID(pt,this.sourceCache);vt&&(this.terrainTileForTile[pt.key]=vt)})}_prepareDEMTextures(){const ct=this.painter.context,pt=ct.gl;for(const vt in this.terrainTileForTile){const Tt=this.terrainTileForTile[vt],Pt=Tt.dem;!Pt||Tt.demTexture&&!Tt.needsDEMTextureUpload||(ct.activeTexture.set(pt.TEXTURE1),Uv(this.painter,Tt,Pt))}}_prepareDemTileUniforms(ct,pt,vt,Tt){if(!pt||pt.demTexture==null)return!1;const Pt=ct.tileID.canonical,Ot=Math.pow(2,pt.tileID.canonical.z-Pt.z),Ft=Tt||"";return vt[`u_dem_tl${Ft}`]=[Pt.x*Ot%1,Pt.y*Ot%1],vt[`u_dem_scale${Ft}`]=Ot,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let ct=0;const pt=this._visibleDemTiles.reduce((vt,Tt)=>{if(!Tt.dem)return vt;const Pt=Tt.dem.tree.minimums[0];return Pt>0&&ct++,vt+Pt},0);return ct?pt/ct:0}_updateEmptyDEMTexture(){const ct=this.painter.context,pt=ct.gl;ct.activeTexture.set(pt.TEXTURE2);const vt=this._getLoadedAreaMinimum(),[Tt,Pt]=(()=>{const Ft=new at.bB({width:1,height:1},new Float32Array([vt]));return[pt.R32F,Ft]})();this._emptyDEMTextureDirty=!1;let Ot=this._emptyDEMTexture;return Ot?Ot.update(Pt,{premultiply:!1}):Ot=this._emptyDEMTexture=new at.T(ct,Pt,Tt,{premultiply:!1}),Ot}setupElevationDraw(ct,pt,vt){const Tt=this.painter.context,Pt=Tt.gl,Ot={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};Ot.u_exaggeration=this.exaggeration();let Ft=null,Vt=null,Gt=1;if(vt&&vt.morphing&&this._useVertexMorphing){const rr=vt.morphing.srcDemTile,sr=vt.morphing.dstDemTile;Gt=vt.morphing.phase,rr&&sr&&(this._prepareDemTileUniforms(ct,rr,Ot,"_prev")&&(Vt=rr),this._prepareDemTileUniforms(ct,sr,Ot)&&(Ft=sr))}const Zt=rr=>rr&&rr.demTexture&&this.painter.linearFloatFilteringSupported()?Pt.LINEAR:Pt.NEAREST;let Yt=null;var er;if(this.enabled?Vt&&Ft?(Yt=Ft.demTexture,Tt.activeTexture.set(Pt.TEXTURE4),Vt.demTexture.bind(Zt(Vt),Pt.CLAMP_TO_EDGE),Ot.u_dem_lerp=Gt):(Ft=this.terrainTileForTile[ct.tileID.key],Yt=this._prepareDemTileUniforms(ct,Ft,Ot)?Ft.demTexture:this.emptyDEMTexture):Yt=this.emptyDEMTexture,Tt.activeTexture.set(Pt.TEXTURE2),Yt&&(Ot.u_dem_size=(er=Yt).size[0]===1?1:er.size[0]-2,Yt.bind(Zt(Ft),Pt.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(vt&&vt.useDepthForOcclusion,pt,Ot),vt&&vt.useMeterToDem&&Ft){const rr=(1<<Ft.tileID.canonical.z)*at.ay(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;Ot.u_meter_to_dem=rr}if(vt&&vt.labelPlaneMatrixInv&&(Ot.u_label_plane_matrix_inv=vt.labelPlaneMatrixInv),pt.setTerrainUniformValues(Tt,Ot),this.painter.transform.projection.name==="globe"){const rr=this.globeUniformValues(this.painter.transform,ct.tileID.canonical,vt&&vt.useDenormalizedUpVectorScale);pt.setGlobeUniformValues(Tt,rr)}}globeUniformValues(ct,pt,vt){const Tt=ct.projection;return{u_tile_tl_up:Tt.upVector(pt,0,0),u_tile_tr_up:Tt.upVector(pt,at.a4,0),u_tile_br_up:Tt.upVector(pt,at.a4,at.a4),u_tile_bl_up:Tt.upVector(pt,0,at.a4),u_tile_up_scale:vt?at.bu(1):Tt.upVectorScale(pt,ct.center.lat,ct.worldSize).metersToTile}}renderToBackBuffer(ct){const pt=this.painter,vt=this.painter.context;ct.length!==0&&(vt.bindFramebuffer.set(null),vt.viewport.set([0,0,pt.width,pt.height]),pt.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(Tt,Pt,Ot,Ft,Vt){if(Tt.transform.projection.name==="globe")(function(Gt,Zt,Yt,er,rr){const sr=Gt.context,lr=sr.gl;let cr,ur;const br=Gt.transform,Er=at.bc(Gt,sr,br),_r=(nn,en)=>{if(ur===en)return;const Wr=[Bm[en],"PROJECTION_GLOBE_VIEW"];Er&&Wr.push("CUSTOM_ANTIALIASING");const Tn=Gt.isTileAffectedByFog(nn);cr=Gt.getOrCreateProgram("globeRaster",{defines:Wr,overrideFog:Tn}),ur=en},$r=Gt.colorModeForRenderPass(),Tr=new at.af(lr.LEQUAL,at.af.ReadWrite,Gt.depthRangeFor3D);qu.update(rr);const Ar=at.bd(br),Fr=[at.ak(br.center.lng),at.al(br.center.lat)],zr=Gt.globeSharedBuffers,Yr=[br.width*at.e.devicePixelRatio,br.height*at.e.devicePixelRatio],Vr=Float32Array.from(br.globeMatrix),Ir={useDenormalizedUpVectorScale:!0};{const nn=Gt.transform,en=Ku(nn.zoom,Zt.exaggeration(),Zt.sourceCache._source.tileSize);ur=-1;const Wr=lr.TRIANGLES;for(const Tn of er){const _n=Yt.getTile(Tn),Xr=at.ah.disabled,hn=Zt.prevTerrainTileForTile[Tn.key],Ur=Zt.terrainTileForTile[Tn.key];Fm(hn,Ur)&&qu.newMorphing(Tn.key,hn,Ur,rr,250),sr.activeTexture.set(lr.TEXTURE0),_n.texture&&_n.texture.bind(lr.LINEAR,lr.CLAMP_TO_EDGE);const bn=qu.getMorphValuesForProxy(Tn.key),Sn=bn?1:0;bn&&at.q(Ir,{morphing:{srcDemTile:bn.from,dstDemTile:bn.to,phase:at.bb(bn.phase)}});const zn=at.be(Tn.canonical),Un=at.bf(zn.getCenter().lat),Qn=at.bg(Tn.canonical,zn,Un,nn.worldSize/nn._pixelsPerMercatorPixel),Wn=at.bh(at.bi(Tn.canonical)),uo=ux(nn.expandedFarZProjMatrix,Vr,Ar,Wn,at.a2(nn.zoom),Fr,nn.frustumCorners.TL,nn.frustumCorners.TR,nn.frustumCorners.BR,nn.frustumCorners.BL,nn.globeCenterInViewSpace,nn.globeRadius,Yr,en,nn._farZ,Qn);if(_r(Tn,Sn),cr&&(Zt.setupElevationDraw(_n,cr,Ir),Gt.uploadCommonUniforms(sr,cr,Tn.toUnwrapped()),zr)){const[So,fo,ko]=zr.getGridBuffers(Un,en!==0);cr.draw(Gt,Wr,Tr,Xr,$r,at.ag.backCCW,uo,"globe_raster",So,fo,ko)}}}if(zr&&(Gt.renderDefaultNorthPole||Gt.renderDefaultSouthPole)){const nn=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];Er&&nn.push("CUSTOM_ANTIALIASING"),cr=Gt.getOrCreateProgram("globeRaster",{defines:nn});for(const en of er){const{x:Wr,y:Tn,z:_n}=en.canonical,Xr=Tn===0,hn=Tn===(1<<_n)-1,[Ur,bn,Sn,zn]=zr.getPoleBuffers(_n,!1);if(zn&&(Xr||hn)){const Un=Yt.getTile(en);sr.activeTexture.set(lr.TEXTURE0),Un.texture&&Un.texture.bind(lr.LINEAR,lr.CLAMP_TO_EDGE);let Qn=at.bj(_n,Wr,br);const Wn=at.bh(at.bi(en.canonical)),uo=(So,fo)=>So.draw(Gt,lr.TRIANGLES,Tr,at.ah.disabled,$r,at.ag.disabled,ux(br.expandedFarZProjMatrix,Qn,Qn,Wn,0,Fr,br.frustumCorners.TL,br.frustumCorners.TR,br.frustumCorners.BR,br.frustumCorners.BL,br.globeCenterInViewSpace,br.globeRadius,Yr,0,br._farZ),"globe_pole_raster",fo,Sn,zn);Zt.setupElevationDraw(Un,cr,Ir),Gt.uploadCommonUniforms(sr,cr,en.toUnwrapped()),Xr&&Gt.renderDefaultNorthPole&&uo(cr,Ur),hn&&Gt.renderDefaultSouthPole&&(Qn=at.ae.scale(at.ae.create(),Qn,[1,-1,1]),uo(cr,bn))}}}})(Tt,Pt,Ot,Ft,Vt);else{const Gt=Tt.context,Zt=Gt.gl;let Yt,er;const rr=Tt.shadowRenderer,sr=Rl(Tt,Tt.longestCutoffRange),lr=$r=>{if(er===$r)return;const Tr=[];Tr.push(Bm[$r]),sr.shouldRenderCutoff&&Tr.push("RENDER_CUTOFF"),Yt=Tt.getOrCreateProgram("terrainRaster",{defines:Tr}),er=$r},cr=Tt.colorModeForRenderPass(),ur=new at.af(Zt.LEQUAL,at.af.ReadWrite,Tt.depthRangeFor3D);qu.update(Vt);const br=Tt.transform,Er=Ku(br.zoom,Pt.exaggeration(),Pt.sourceCache._source.tileSize);let _r=[0,0,0];if(rr){const $r=Tt.style.directionalLight,Tr=Tt.style.ambientLight;$r&&Tr&&(_r=Nm(Tt.style,$r,Tr))}{er=-1;const $r=Zt.TRIANGLES,[Tr,Ar]=[Pt.gridIndexBuffer,Pt.gridSegments];for(const Fr of Ft){const zr=Ot.getTile(Fr),Yr=at.ah.disabled,Vr=Pt.prevTerrainTileForTile[Fr.key],Ir=Pt.terrainTileForTile[Fr.key];Fm(Vr,Ir)&&qu.newMorphing(Fr.key,Vr,Ir,Vt,250),Gt.activeTexture.set(Zt.TEXTURE0),zr.texture&&zr.texture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE);const nn=qu.getMorphValuesForProxy(Fr.key),en=nn?1:0;let Wr;nn&&(Wr={morphing:{srcDemTile:nn.from,dstDemTile:nn.to,phase:at.bb(nn.phase)}});const Tn=Wv(Fr.projMatrix,zm(Fr.canonical,br.renderWorldCopies)?Er/10:Er,_r);if(lr(en),!Yt)continue;Pt.setupElevationDraw(zr,Yt,Wr);const _n=Fr.toUnwrapped();rr&&rr.setupShadows(_n,Yt),Tt.uploadCommonUniforms(Gt,Yt,_n,null,sr),Yt.draw(Tt,$r,ur,Yr,cr,at.ag.backCCW,Tn,"terrain_raster",Pt.gridBuffer,Tr,Ar)}}}}(pt,this,this.proxySourceCache,ct,this._updateTimestamp),this.renderingToTexture=!0,pt.gpuTimingDeferredRenderEnd(),ct.splice(0,ct.length))}renderBatch(ct){if(this._drapedRenderBatches.length===0)return ct+1;this.renderingToTexture=!0;const pt=this.painter,vt=this.painter.context,Tt=this.proxySourceCache,Pt=this.proxiedCoords[Tt.id],Ot=this._drapedRenderBatches.shift(),Ft=pt.style.order,Vt=[];let Gt=0;for(const Zt of Pt){const Yt=Tt.getTileByID(Zt.proxyTileKey),er=Tt.proxyCachedFBO[Zt.key]?Tt.proxyCachedFBO[Zt.key][ct]:void 0,rr=er!==void 0?Tt.renderCache[er]:this.pool[Gt++],sr=er!==void 0;if(Yt.texture=rr.tex,sr&&!rr.dirty){Vt.push(Yt.tileID);continue}let lr;vt.bindFramebuffer.set(rr.fb.framebuffer),this.renderedToTile=!1,rr.dirty&&(vt.clear({color:at.C.transparent,stencil:0}),rr.dirty=!1);for(let cr=Ot.start;cr<=Ot.end;++cr){const ur=pt.style._mergedLayers[Ft[cr]];if(ur.isHidden(pt.transform.zoom))continue;const br=pt.style.getLayerSourceCache(ur),Er=br?this.proxyToSource[Zt.key][br.id]:[Zt];if(!Er)continue;const _r=Er;vt.viewport.set([0,0,rr.fb.width,rr.fb.height]),lr!==(br?br.id:null)&&(this._setupStencil(rr,Er,ur,br),lr=br?br.id:null),pt.renderLayer(pt,br,ur,_r)}if(this._drapedRenderBatches.length===0)for(const cr of this._pendingGroundEffectLayers){const ur=pt.style._mergedLayers[Ft[cr]];if(ur.isHidden(pt.transform.zoom))continue;const br=pt.style.getLayerSourceCache(ur),Er=br?this.proxyToSource[Zt.key][br.id]:[Zt];if(!Er)continue;const _r=Er;vt.viewport.set([0,0,rr.fb.width,rr.fb.height]),lr!==(br?br.id:null)&&(this._setupStencil(rr,Er,ur,br),lr=br?br.id:null),pt.renderLayer(pt,br,ur,_r)}this.renderedToTile?(rr.dirty=!0,Vt.push(Yt.tileID)):sr||--Gt,Gt===5&&(Gt=0,this.renderToBackBuffer(Vt))}return this.renderToBackBuffer(Vt),this.renderingToTexture=!1,vt.bindFramebuffer.set(null),vt.viewport.set([0,0,pt.width,pt.height]),Ot.end+1}postRender(){}isLayerOrderingCorrect(ct){const pt=ct.order.length;let vt=-1,Tt=pt;for(let Pt=0;Pt<pt;++Pt)this._style.isLayerDraped(ct._mergedLayers[ct.order[Pt]])?vt=Math.max(vt,Pt):Tt=Math.min(Tt,Pt);return Tt>vt}getMinElevationBelowMSL(){let ct=0;return this._visibleDemTiles.filter(pt=>pt.dem).forEach(pt=>{ct=Math.min(ct,pt.dem.tree.minimums[0])}),ct===0?ct:(ct-30)*this._exaggeration}raycast(ct,pt,vt){if(!this._visibleDemTiles)return null;const Tt=this._visibleDemTiles.filter(Pt=>Pt.dem).map(Pt=>{const Ot=Pt.tileID,Ft=1<<Ot.overscaledZ,{x:Vt,y:Gt}=Ot.canonical,Zt=Vt/Ft,Yt=(Vt+1)/Ft,er=Gt/Ft,rr=(Gt+1)/Ft;return{minx:Zt,miny:er,maxx:Yt,maxy:rr,t:Pt.dem.tree.raycastRoot(Zt,er,Yt,rr,ct,pt,vt),tile:Pt}});Tt.sort((Pt,Ot)=>(Pt.t!==null?Pt.t:Number.MAX_VALUE)-(Ot.t!==null?Ot.t:Number.MAX_VALUE));for(const Pt of Tt){if(Pt.t==null)return null;const Ot=Pt.tile.dem.tree.raycast(Pt.minx,Pt.miny,Pt.maxx,Pt.maxy,ct,pt,vt);if(Ot!=null)return Ot}return null}_createFBO(){const ct=this.painter.context,pt=ct.gl,vt=this.drapeBufferSize;ct.activeTexture.set(pt.TEXTURE0);const Tt=new at.T(ct,{width:vt[0],height:vt[1],data:null},pt.RGBA);Tt.bind(pt.LINEAR,pt.CLAMP_TO_EDGE);const Pt=ct.createFramebuffer(vt[0],vt[1],!0,null);return Pt.colorAttachment.set(Tt.texture),Pt.depthAttachment=new vo(ct,Pt.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=ct.createRenderbuffer(ct.gl.DEPTH_STENCIL,vt[0],vt[1]),this._stencilRef=0,Pt.depthAttachment.set(this._sharedDepthStencil),ct.clear({stencil:0})):Pt.depthAttachment.set(this._sharedDepthStencil),ct.extTextureFilterAnisotropic&&pt.texParameterf(pt.TEXTURE_2D,ct.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ct.extTextureFilterAnisotropicMax),{fb:Pt,tex:Tt,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const ct in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[ct].hasTransition())return!0;return this._style.order.some(ct=>{const pt=this._style._mergedLayers[ct],vt=pt.isHidden(this.painter.transform.zoom);return pt.type==="custom"?!vt&&pt.shouldRedrape():!vt&&pt.hasTransition()})}_clearLineLayersFromRenderCache(){let ct=!1;for(const vt of this._style.getSources())if(vt instanceof Gv){ct=!0;break}if(!ct)return;const pt={};for(let vt=0;vt<this._style.order.length;++vt){const Tt=this._style._mergedLayers[this._style.order[vt]],Pt=this._style.getLayerSourceCache(Tt);if(Pt&&!pt[Pt.id]&&!Tt.isHidden(this.painter.transform.zoom)&&Tt.type==="line"&&Tt.widthExpression()instanceof at.Z){pt[Pt.id]=!0;for(const Ot of this.proxyCoords){const Ft=this.proxyToSource[Ot.key][Pt.id];if(Ft)for(const Vt of Ft)this._clearRenderCacheForTile(Pt.id,Vt)}}}}_clearRasterLayersFromRenderCache(){let ct=!1;for(const vt in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[vt]._source instanceof Ll){ct=!0;break}if(!ct)return;const pt={};for(let vt=0;vt<this._style.order.length;++vt){const Tt=this._style._mergedLayers[this._style.order[vt]],Pt=this._style.getLayerSourceCache(Tt);if(!Pt||pt[Pt.id]||Tt.isHidden(this.painter.transform.zoom)||Tt.type!=="raster")continue;const Ot=Tt.paint.get("raster-fade-duration");for(const Ft of this.proxyCoords){const Vt=this.proxyToSource[Ft.key][Pt.id];if(Vt)for(const Gt of Vt){const Zt=Gy(Pt.getTile(Gt),Pt.findLoadedParent(Gt,0),Pt,this.painter.transform,Ot);(Zt.opacity!==1||Zt.mix!==0)&&this._clearRenderCacheForTile(Pt.id,Gt)}}}}_setupDrapedRenderBatches(){const ct=this._style.order,pt=ct.length;if(pt===0)return;const vt=[];this._pendingGroundEffectLayers=[];let Tt,Pt=0,Ot=this._style._mergedLayers[ct[Pt]];for(;!this._style.isLayerDraped(Ot)&&Ot.isHidden(this.painter.transform.zoom)&&++Pt<pt;)Ot=this._style._mergedLayers[ct[Pt]];for(;Pt<pt;++Pt){const Ft=this._style._mergedLayers[ct[Pt]];Ft.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(Ft)?Tt===void 0&&(Tt=Pt):(Ft.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(Pt),Tt!==void 0&&(vt.push({start:Tt,end:Pt-1}),Tt=void 0)))}if(Tt!==void 0&&vt.push({start:Tt,end:Pt-1}),vt.length!==0){const Ft=vt[vt.length-1];this._pendingGroundEffectLayers.every(Vt=>Vt>Ft.end)||at.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=vt}_setupRenderCache(ct){const pt=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,pt.renderCache.length>pt.renderCachePool.length){const Ot=Object.values(pt.proxyCachedFBO);pt.proxyCachedFBO={};for(let Ft=0;Ft<Ot.length;++Ft){const Vt=Object.values(Ot[Ft]);pt.renderCachePool.push(...Vt)}}return}this._clearRasterLayersFromRenderCache();const vt=this.proxyCoords,Tt=this._tilesDirty;for(let Ot=vt.length-1;Ot>=0;Ot--){const Ft=vt[Ot];if(pt.getTileByID(Ft.key),pt.proxyCachedFBO[Ft.key]!==void 0){const Vt=ct[Ft.key],Gt=this.proxyToSource[Ft.key];let Zt=0;for(const Yt in Gt){const er=Gt[Yt],rr=Vt[Yt];if(!rr||rr.length!==er.length||er.some((sr,lr)=>sr!==rr[lr]||Tt[Yt]&&Tt[Yt].hasOwnProperty(sr.key))){Zt=-1;break}++Zt}for(const Yt in pt.proxyCachedFBO[Ft.key])pt.renderCache[pt.proxyCachedFBO[Ft.key][Yt]].dirty=Zt<0||Zt!==Object.values(Vt).length}}const Pt=[...this._drapedRenderBatches];Pt.sort((Ot,Ft)=>Ft.end-Ft.start-(Ot.end-Ot.start));for(const Ot of Pt)for(const Ft of vt){if(pt.proxyCachedFBO[Ft.key])continue;let Vt=pt.renderCachePool.pop();Vt===void 0&&pt.renderCache.length<50&&(Vt=pt.renderCache.length,pt.renderCache.push(this._createFBO())),Vt!==void 0&&(pt.proxyCachedFBO[Ft.key]={},pt.proxyCachedFBO[Ft.key][Ot.start]=Vt,pt.renderCache[Vt].dirty=!0)}this._tilesDirty={}}_setupStencil(ct,pt,vt,Tt){if(!Tt||!this._sourceTilesOverlap[Tt.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const Pt=this.painter.context,Ot=Pt.gl;if(pt.length<=1)return void(this._overlapStencilType=!1);let Ft;if(vt.isTileClipped())Ft=pt.length,this._overlapStencilMode.test={func:Ot.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(pt[0].overscaledZ>pt[pt.length-1].overscaledZ))return void(this._overlapStencilType=!1);Ft=1,this._overlapStencilMode.test={func:Ot.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+Ft>255&&(Pt.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=Ft,this._overlapStencilMode.ref=this._stencilRef,vt.isTileClipped()&&this._renderTileClippingMasks(pt,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(ct){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[ct.key]),this._overlapStencilMode):at.ah.disabled}_renderTileClippingMasks(ct,pt){const vt=this.painter,Tt=this.painter.context,Pt=Tt.gl;vt._tileClippingMaskIDs={},Tt.setColorMode(at.a.disabled),Tt.setDepthMode(at.af.disabled);const Ot=vt.getOrCreateProgram("clippingMask");for(const Ft of ct){const Vt=vt._tileClippingMaskIDs[Ft.key]=--pt;Ot.draw(vt,Pt.TRIANGLES,at.af.disabled,new at.ah({func:Pt.ALWAYS,mask:0},Vt,255,Pt.KEEP,Pt.KEEP,Pt.REPLACE),at.a.disabled,at.ag.disabled,Vm(Ft.projMatrix),"$clipping",vt.tileExtentBuffer,vt.quadTriangleIndexBuffer,vt.tileExtentSegments)}}pointCoordinate(ct){const pt=this.painter.transform;if(ct.x<0||ct.x>pt.width||ct.y<0||ct.y>pt.height)return null;const vt=[ct.x,ct.y,1,1];at.aB.transformMat4(vt,vt,pt.pixelMatrixInverse),at.aB.scale(vt,vt,1/vt[3]),vt[0]/=pt.worldSize,vt[1]/=pt.worldSize;const Tt=pt._camera.position,Pt=at.ay(1,pt.center.lat),Ot=[Tt[0],Tt[1],Tt[2]/Pt,0],Ft=at.$.subtract([],vt.slice(0,3),Ot);at.$.normalize(Ft,Ft);const Vt=this.raycast(Ot,Ft,this._exaggeration);return Vt!==null&&Vt?(at.$.scaleAndAdd(Ot,Ot,Ft,Vt),Ot[3]=Ot[2],Ot[2]*=Pt,Ot):null}_setupProxiedCoordsForOrtho(ct,pt,vt){if(ct.getSource()instanceof at.bo)return this._setupProxiedCoordsForImageSource(ct,pt,vt);this._findCoveringTileCache[ct.id]=this._findCoveringTileCache[ct.id]||{};const Tt=this.proxiedCoords[ct.id]=[],Pt=this.proxyCoords;for(let Vt=0;Vt<Pt.length;Vt++){const Gt=Pt[Vt],Zt=this._findTileCoveringTileID(Gt,ct);if(Zt){const Yt=this._createProxiedId(Gt,Zt,vt[Gt.key]&&vt[Gt.key][ct.id]);Tt.push(Yt),this.proxyToSource[Gt.key][ct.id]=[Yt]}}let Ot=!1;const Ft=new Set;for(let Vt=0;Vt<pt.length;Vt++){const Gt=ct.getTile(pt[Vt]);if(!Gt||!Gt.hasData())continue;const Zt=this._findTileCoveringTileID(Gt.tileID,this.proxySourceCache);if(Zt&&Zt.tileID.canonical.z!==Gt.tileID.canonical.z){const Yt=this.proxyToSource[Zt.tileID.key][ct.id],er=this._createProxiedId(Zt.tileID,Gt,vt[Zt.tileID.key]&&vt[Zt.tileID.key][ct.id]);Yt?Yt.splice(Yt.length-1,0,er):this.proxyToSource[Zt.tileID.key][ct.id]=[er];const rr=this.proxyToSource[Zt.tileID.key][ct.id];Ft.has(rr)||Ft.add(rr),Tt.push(er),Ot=!0}}if(this._sourceTilesOverlap[ct.id]=Ot,Ot&&this._debugParams.sortTilesHiZFirst)for(const Vt of Ft)Vt.sort((Gt,Zt)=>Zt.overscaledZ-Gt.overscaledZ)}_setupProxiedCoordsForImageSource(ct,pt,vt){if(!ct.getSource().loaded())return;const Tt=this.proxiedCoords[ct.id]=[],Pt=this.proxyCoords,Ot=ct.getSource(),Ft=Ot.tileID;if(!Ft)return;const Vt=new at.P(Ft.x,Ft.y)._div(1<<Ft.z),Gt=Ot.coordinates.map(at._.fromLngLat).reduce((Yt,er)=>(Yt.min.x=Math.min(Yt.min.x,er.x-Vt.x),Yt.min.y=Math.min(Yt.min.y,er.y-Vt.y),Yt.max.x=Math.max(Yt.max.x,er.x-Vt.x),Yt.max.y=Math.max(Yt.max.y,er.y-Vt.y),Yt),{min:new at.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new at.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),Zt=(Yt,er)=>{const rr=Yt.wrap+Yt.canonical.x/(1<<Yt.canonical.z),sr=Yt.canonical.y/(1<<Yt.canonical.z),lr=at.a4/(1<<Yt.canonical.z),cr=er.wrap+er.canonical.x/(1<<er.canonical.z),ur=er.canonical.y/(1<<er.canonical.z);return rr+lr<cr+Gt.min.x||rr>cr+Gt.max.x||sr+lr<ur+Gt.min.y||sr>ur+Gt.max.y};for(let Yt=0;Yt<Pt.length;Yt++){const er=Pt[Yt];for(let rr=0;rr<pt.length;rr++){const sr=ct.getTile(pt[rr]);if(!sr||!sr.hasData()||Zt(er,sr.tileID))continue;const lr=this._createProxiedId(er,sr,vt[er.key]&&vt[er.key][ct.id]),cr=this.proxyToSource[er.key][ct.id];cr?cr.push(lr):this.proxyToSource[er.key][ct.id]=[lr],Tt.push(lr)}}}_createProxiedId(ct,pt,vt){let Tt=this.orthoMatrix;if(vt){const Pt=vt.find(Ot=>Ot.key===pt.tileID.key);if(Pt)return Pt}if(pt.tileID.key!==ct.key){const Pt=ct.canonical.z-pt.tileID.canonical.z;let Ot,Ft,Vt;Tt=at.ae.create();const Gt=pt.tileID.wrap-ct.wrap<<ct.overscaledZ;Pt>0?(Ot=at.a4>>Pt,Ft=Ot*((pt.tileID.canonical.x<<Pt)-ct.canonical.x+Gt),Vt=Ot*((pt.tileID.canonical.y<<Pt)-ct.canonical.y)):(Ot=at.a4<<-Pt,Ft=at.a4*(pt.tileID.canonical.x-(ct.canonical.x+Gt<<-Pt)),Vt=at.a4*(pt.tileID.canonical.y-(ct.canonical.y<<-Pt))),at.ae.ortho(Tt,0,Ot,0,Ot,0,1),at.ae.translate(Tt,Tt,[Ft,Vt,0])}return new mx(pt.tileID,ct.key,Tt)}_findTileCoveringTileID(ct,pt){let vt=pt.getTile(ct);if(vt&&vt.hasData())return vt;const Tt=this._findCoveringTileCache[pt.id],Pt=Tt[ct.key];if(vt=Pt?pt.getTileByID(Pt):null,vt&&vt.hasData()||Pt===null)return vt;let Ot=vt?vt.tileID:ct,Ft=Ot.overscaledZ;const Vt=pt.getSource().minzoom,Gt=[];if(!Pt){const Yt=pt.getSource().maxzoom;if(ct.canonical.z>=Yt){const er=ct.canonical.z-Yt;pt.getSource().reparseOverscaled?(Ft=Math.max(ct.canonical.z+2,pt.transform.tileZoom),Ot=new at.aQ(Ft,ct.wrap,Yt,ct.canonical.x>>er,ct.canonical.y>>er)):er!==0&&(Ft=Yt,Ot=new at.aQ(Ft,ct.wrap,Yt,ct.canonical.x>>er,ct.canonical.y>>er))}Ot.key!==ct.key&&(Gt.push(Ot.key),vt=pt.getTile(Ot))}const Zt=Yt=>{Gt.forEach(er=>{Tt[er]=Yt}),Gt.length=0};for(Ft-=1;Ft>=Vt&&(!vt||!vt.hasData());Ft--){vt&&Zt(vt.tileID.key);const Yt=Ot.calculateScaledKey(Ft);if(vt=pt.getTileByID(Yt),vt&&vt.hasData())break;const er=Tt[Yt];if(er===null)break;er===void 0?Gt.push(Yt):vt=pt.getTileByID(er)}return Zt(vt?vt.tileID.key:null),vt&&vt.hasData()?vt:null}findDEMTileFor(ct){return this.enabled?this._findTileCoveringTileID(ct,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(ct,pt){let vt=this._tilesDirty[ct];vt||(vt=this._tilesDirty[ct]={}),vt[pt.key]=!0}}function Yv(xt,ct,pt){const vt=function(Ft,Vt,Gt){const Zt=at.$.dot(Vt,Ft),Yt=at.$.dot(Gt,[.2126,.7152,.0722]),er=(sr,lr,cr)=>(1-cr)*sr+cr*lr,rr=er(1-.3*Math.min(Yt,1),1,Math.min(Zt+1,1));return er(.92,1,Math.asin(at.au(Vt[2],-1,1))/Math.PI+.5)*rr}(xt,[0,0,1],ct),Tt=[0,0,0];at.$.scale(Tt,pt.slice(0,3),vt);const Pt=[0,0,0];at.$.scale(Pt,ct.slice(0,3),xt[2]);const Ot=[0,0,0];return at.$.add(Ot,Tt,Pt),at.ba(Ot)}const gx=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Xv=["stars","fillExtrusion","fillExtrusionGroundEffect","model","symbolSDF","symbolIcon","symbolTextAndIcon"];class yx{static cacheKey(ct,pt,vt,Tt){let Pt=`${pt}${Tt?Tt.cacheKey:""}`;for(const Ot of vt)ct.usedDefines.includes(Ot)&&(Pt+=`/${Ot}`);return Pt}constructor(ct,pt,vt,Tt,Pt,Ot){const Ft=ct.gl;this.program=Ft.createProgram(),this.configuration=Tt,this.name=pt,this.fixedDefines=[...Ot];const Vt=Tt?Tt.getBinderAttributes():[],Gt=(vt.staticAttributes||[]).concat(Vt);let Zt=Tt?Tt.defines():[];Zt=Zt.concat(Ot.map(cr=>`#define ${cr}`));const Yt=`#version 300 es
`;let er=Yt+Zt.concat("precision mediump float;",zv,Fy.fragmentSource).join(`
`);for(const cr of vt.fragmentIncludes)er+=`
${Im[cr]}`;er+=`
${vt.fragmentSource}`;let rr=Yt+Zt.concat("precision highp float;",zv,Fy.vertexSource).join(`
`);for(const cr of vt.vertexIncludes)rr+=`
${Im[cr]}`;rr+=`
${vt.vertexSource}`;const sr=Ft.createShader(Ft.FRAGMENT_SHADER);if(Ft.isContextLost())return void(this.failedToCreate=!0);Ft.shaderSource(sr,er),Ft.compileShader(sr),Ft.attachShader(this.program,sr);const lr=Ft.createShader(Ft.VERTEX_SHADER);if(Ft.isContextLost())this.failedToCreate=!0;else{Ft.shaderSource(lr,rr),Ft.compileShader(lr),Ft.attachShader(this.program,lr),this.attributes={},this.numAttributes=Gt.length;for(let cr=0;cr<this.numAttributes;cr++)if(Gt[cr]){const ur=Gt[cr].startsWith("a_")?Gt[cr]:`a_${Gt[cr]}`;Ft.bindAttribLocation(this.program,cr,ur),this.attributes[ur]=cr}Ft.linkProgram(this.program),Ft.deleteShader(lr),Ft.deleteShader(sr),this.fixedUniforms=Pt(ct),this.binderUniforms=Tt?Tt.getUniforms(ct):[],(Ot.includes("TERRAIN")||pt.indexOf("symbol")!==-1||pt.indexOf("circle")!==-1)&&(this.terrainUniforms=(cr=>({u_dem:new at.a8(cr),u_dem_prev:new at.a8(cr),u_dem_tl:new at.a9(cr),u_dem_scale:new at.ab(cr),u_dem_tl_prev:new at.a9(cr),u_dem_scale_prev:new at.ab(cr),u_dem_size:new at.ab(cr),u_dem_lerp:new at.ab(cr),u_exaggeration:new at.ab(cr),u_depth:new at.a8(cr),u_depth_size_inv:new at.a9(cr),u_depth_range_unpack:new at.a9(cr),u_occluder_half_size:new at.ab(cr),u_occlusion_depth_offset:new at.ab(cr),u_meter_to_dem:new at.ab(cr),u_label_plane_matrix_inv:new at.a7(cr)}))(ct)),Ot.includes("GLOBE")&&(this.globeUniforms=(cr=>({u_tile_tl_up:new at.ar(cr),u_tile_tr_up:new at.ar(cr),u_tile_br_up:new at.ar(cr),u_tile_bl_up:new at.ar(cr),u_tile_up_scale:new at.ab(cr)}))(ct)),Ot.includes("FOG")&&(this.fogUniforms=(cr=>({u_fog_matrix:new at.a7(cr),u_fog_range:new at.a9(cr),u_fog_color:new at.at(cr),u_fog_horizon_blend:new at.ab(cr),u_fog_vertical_limit:new at.a9(cr),u_fog_temporal_offset:new at.ab(cr),u_frustum_tl:new at.ar(cr),u_frustum_tr:new at.ar(cr),u_frustum_br:new at.ar(cr),u_frustum_bl:new at.ar(cr),u_globe_pos:new at.ar(cr),u_globe_radius:new at.ab(cr),u_globe_transition:new at.ab(cr),u_is_globe:new at.a8(cr),u_viewport:new at.a9(cr)}))(ct)),Ot.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(cr=>({u_cutoff_params:new at.at(cr)}))(ct)),Ot.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(cr=>({u_lighting_ambient_color:new at.ar(cr),u_lighting_directional_dir:new at.ar(cr),u_lighting_directional_color:new at.ar(cr),u_ground_radiance:new at.ar(cr)}))(ct)),Ot.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(cr=>({u_light_matrix_0:new at.a7(cr),u_light_matrix_1:new at.a7(cr),u_fade_range:new at.a9(cr),u_shadow_normal_offset:new at.ar(cr),u_shadow_intensity:new at.ab(cr),u_shadow_texel_size:new at.ab(cr),u_shadow_map_resolution:new at.ab(cr),u_shadow_direction:new at.ar(cr),u_shadow_bias:new at.ar(cr),u_shadowmap_0:new at.a8(cr),u_shadowmap_1:new at.a8(cr)}))(ct))}}setTerrainUniformValues(ct,pt){if(!this.terrainUniforms)return;const vt=this.terrainUniforms;if(!this.failedToCreate){ct.program.set(this.program);for(const Tt in pt)vt[Tt]&&vt[Tt].set(this.program,Tt,pt[Tt])}}setGlobeUniformValues(ct,pt){if(!this.globeUniforms)return;const vt=this.globeUniforms;if(!this.failedToCreate){ct.program.set(this.program);for(const Tt in pt)vt[Tt]&&vt[Tt].set(this.program,Tt,pt[Tt])}}setFogUniformValues(ct,pt){if(!this.fogUniforms)return;const vt=this.fogUniforms;if(!this.failedToCreate){ct.program.set(this.program);for(const Tt in pt)vt[Tt].set(this.program,Tt,pt[Tt])}}setCutoffUniformValues(ct,pt){if(!this.cutoffUniforms)return;const vt=this.cutoffUniforms;if(!this.failedToCreate){ct.program.set(this.program);for(const Tt in pt)vt[Tt].set(this.program,Tt,pt[Tt])}}setLightsUniformValues(ct,pt){if(!this.lightsUniforms)return;const vt=this.lightsUniforms;if(!this.failedToCreate){ct.program.set(this.program);for(const Tt in pt)vt[Tt].set(this.program,Tt,pt[Tt])}}setShadowUniformValues(ct,pt){if(this.failedToCreate||!this.shadowUniforms)return;const vt=this.shadowUniforms;ct.program.set(this.program);for(const Tt in pt)vt[Tt].set(this.program,Tt,pt[Tt])}_drawDebugWireframe(ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt){const Yt=ct.options.wireframe;if(Yt.terrain===!1&&Yt.layers2D===!1&&Yt.layers3D===!1)return;const er=ct.context;if(!(!(!Yt.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!Yt.layers2D||ct._terrain&&ct._terrain.renderingToTexture||!gx.includes(this.name))||!(!Yt.layers3D||!Xv.includes(this.name))))return;const rr=er.gl,sr=ct.wireframeDebugCache.getLinesFromTrianglesBuffer(ct.frameCounter,Pt,er);if(!sr)return;const lr=[...this.fixedDefines];lr.push("DEBUG_WIREFRAME");const cr=ct.getOrCreateProgram(this.name,{config:this.configuration,defines:lr});er.program.set(cr.program);const ur=(_r,$r,Tr)=>{if($r[_r]&&Tr[_r])for(const Ar in $r[_r])Tr[_r][Ar]&&Tr[_r][Ar].set(Tr.program,Ar,$r[_r][Ar].current)};Gt&&Gt.setUniforms(cr.program,er,cr.binderUniforms,Ft,{zoom:Vt}),ur("fixedUniforms",this,cr),ur("terrainUniforms",this,cr),ur("globeUniforms",this,cr),ur("fogUniforms",this,cr),ur("lightsUniforms",this,cr),ur("shadowUniforms",this,cr),sr.bind(),er.setColorMode(new at.a([rr.ONE,rr.ONE_MINUS_SRC_ALPHA,rr.ZERO,rr.ONE],at.C.transparent,[!0,!0,!0,!1])),er.setDepthMode(new at.af(pt.func===rr.LESS?rr.LEQUAL:pt.func,at.af.ReadOnly,pt.range)),er.setStencilMode(at.ah.disabled);const br=3*Ot.primitiveLength*2,Er=3*Ot.primitiveOffset*2*2;Zt&&Zt>1?rr.drawElementsInstanced(rr.LINES,br,rr.UNSIGNED_SHORT,Er,Zt):rr.drawElements(rr.LINES,br,rr.UNSIGNED_SHORT,Er),Pt.bind(),er.program.set(this.program),er.setDepthMode(pt),er.setStencilMode(vt),er.setColorMode(Tt)}draw(ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr){const ur=ct.context,br=ur.gl;if(this.failedToCreate)return;ur.program.set(this.program),ur.setDepthMode(vt),ur.setStencilMode(Tt),ur.setColorMode(Pt),ur.setCullFace(Ot);for(const $r of Object.keys(this.fixedUniforms))this.fixedUniforms[$r].set(this.program,$r,Ft[$r]);sr&&sr.setUniforms(this.program,ur,this.binderUniforms,er,{zoom:rr});const Er={[br.POINTS]:1,[br.LINES]:2,[br.TRIANGLES]:3,[br.LINE_STRIP]:1}[pt],_r=cr&&cr>0?1:void 0;for(const $r of Yt.get()){const Tr=$r.vaos||($r.vaos={});(Tr[Vt]||(Tr[Vt]=new G1)).bind(ur,this,Gt,sr?sr.getPaintVertexBuffers():[],Zt,$r.vertexOffset,lr||[],_r),cr&&cr>1?br.drawElementsInstanced(pt,$r.primitiveLength*Er,br.UNSIGNED_SHORT,$r.primitiveOffset*Er*2,cr):Zt?br.drawElements(pt,$r.primitiveLength*Er,br.UNSIGNED_SHORT,$r.primitiveOffset*Er*2):br.drawArrays(pt,$r.vertexOffset,$r.vertexLength),pt===br.TRIANGLES&&Zt&&this._drawDebugWireframe(ct,vt,Tt,Pt,Zt,$r,er,rr,sr,cr)}}}function xx(xt,ct){const pt=Math.pow(2,ct.tileID.overscaledZ),vt=ct.tileSize*Math.pow(2,xt.transform.tileZoom)/pt,Tt=vt*(ct.tileID.canonical.x+ct.tileID.wrap*pt),Pt=vt*ct.tileID.canonical.y;return{u_image:0,u_texsize:ct.imageAtlasTexture?ct.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/at.bD(ct,1,xt.transform.tileZoom),u_pixel_coord_upper:[Tt>>16,Pt>>16],u_pixel_coord_lower:[65535&Tt,65535&Pt]}}const Jv=at.ae.create(),hu=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur)=>{const br=ct.style.light,Er=br.properties.get("position"),_r=[Er.x,Er.y,Er.z],$r=at.bE.create();br.properties.get("anchor")==="viewport"&&(at.bE.fromRotation($r,-ct.transform.angle),at.$.transformMat3(_r,_r,$r));const Tr=br.properties.get("color"),Ar=ct.transform,Fr={u_matrix:xt,u_lightpos:_r,u_lightintensity:br.properties.get("intensity"),u_lightcolor:[Tr.r,Tr.g,Tr.b],u_vertical_gradient:+pt,u_opacity:vt,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Jv,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:Tt,u_edge_radius:Pt,u_alignment:Ot,u_width_scale:Ft,u_flood_light_color:rr,u_vertical_scale:sr,u_flood_light_intensity:lr,u_ground_shadow_factor:cr,u_emissive_strength:ur};return Ar.projection.name==="globe"&&(Fr.u_tile_id=[Vt.canonical.x,Vt.canonical.y,1<<Vt.canonical.z],Fr.u_zoom_transition=Zt,Fr.u_inv_rot_matrix=er,Fr.u_merc_center=Yt,Fr.u_up_dir=Ar.projection.upVector(new at.aO(0,0,0),Yt[0]*at.a4,Yt[1]*at.a4),Fr.u_height_lift=Gt),Fr},Zy=(xt,ct,pt,vt,Tt)=>({u_matrix:xt,u_edge_radius:ct,u_alignment:pt,u_width_scale:vt,u_vertical_scale:Tt}),Qv=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr)=>{const cr=hu(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Zt,Yt,er,rr,sr,lr,1,[0,0,0],0),ur={u_height_factor:-Math.pow(2,Vt.overscaledZ)/Gt.tileSize/8};return at.Q(cr,xx(ct,Gt),ur)},Um=(xt,ct)=>({u_matrix:xt,u_emissive_strength:ct}),qy=(xt,ct,pt,vt)=>at.Q(Um(xt,ct),xx(pt,vt)),Ky=(xt,ct,pt)=>({u_matrix:xt,u_world:pt,u_emissive_strength:ct}),Gm=(xt,ct,pt,vt,Tt)=>at.Q(qy(xt,ct,pt,vt),{u_world:Tt}),Hp=(xt,ct,pt,vt)=>{const Tt=at.a4/pt.tileSize;return{u_matrix:xt,u_camera_to_center_distance:ct.getCameraToCenterDistance(vt),u_extrude_scale:[ct.pixelsToGLUnits[0]/Tt,ct.pixelsToGLUnits[1]/Tt]}},Yy=(xt,ct,pt=1)=>({u_matrix:xt,u_color:ct.toRenderColor(null),u_overlay:0,u_overlay_scale:pt}),e_=at.ae.create(),t_=(xt,ct,pt,vt,Tt,Pt,Ot)=>{const Ft=xt.transform,Vt=Ft.projection.name==="globe",Gt=Vt?at.bF(Ft.zoom,ct.canonical)*Ft._pixelsPerMercatorPixel:at.bD(pt,1,Pt),Zt={u_matrix:ct.projMatrix,u_extrude_scale:Gt,u_intensity:Ot,u_inv_rot_matrix:e_,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(Vt){Zt.u_inv_rot_matrix=vt,Zt.u_merc_center=Tt,Zt.u_tile_id=[ct.canonical.x,ct.canonical.y,1<<ct.canonical.z],Zt.u_zoom_transition=at.a2(Ft.zoom);const Yt=Tt[0]*at.a4,er=Tt[1]*at.a4;Zt.u_up_dir=Ft.projection.upVector(new at.aO(0,0,0),Yt,er)}return Zt};function vx(xt,[ct,pt,vt,Tt],[Pt,Ot]){if(Pt===Ot)return[0,0,0,0];const Ft=255*(xt-1)/(xt*(Ot-Pt));return[ct*Ft,pt*Ft,vt*Ft,Tt*Ft]}function Wm(xt,ct,[pt,vt]){return pt===vt?0:.5/xt+(ct-pt)*(xt-1)/(xt*(vt-pt))}const Xy=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur,br,Er,_r)=>({u_matrix:xt,u_normalize_matrix:ct,u_globe_matrix:pt,u_merc_matrix:vt,u_grid_matrix:Tt,u_tl_parent:Pt,u_scale_parent:Gt,u_fade_t:Zt.mix,u_opacity:Zt.opacity*Yt.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:Yt.paint.get("raster-brightness-min"),u_brightness_high:Yt.paint.get("raster-brightness-max"),u_saturation_factor:at.bG(Yt.paint.get("raster-saturation")),u_contrast_factor:at.bH(Yt.paint.get("raster-contrast")),u_spin_weights:_x(Yt.paint.get("raster-hue-rotate")),u_perspective_transform:er,u_raster_elevation:rr,u_zoom_transition:Ot,u_merc_center:Ft,u_cutoff_params:Vt,u_colorization_mix:vx(at.bI,lr,ur),u_colorization_offset:Wm(at.bI,cr,ur),u_color_ramp:sr,u_texture_offset:[Er/(br+2*Er),br/(br+2*Er)],u_texture_res:[br+2*Er,br+2*Er],u_emissive_strength:_r});function _x(xt){xt*=Math.PI/180;const ct=Math.sin(xt),pt=Math.cos(xt);return[(2*pt+1)/3,(-Math.sqrt(3)*ct-pt+1)/3,(Math.sqrt(3)*ct-pt+1)/3]}const fu=.05,pp=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt)=>({u_matrix:xt,u_normalize_matrix:ct,u_globe_matrix:pt,u_merc_matrix:vt,u_grid_matrix:Tt,u_tl_parent:Pt,u_scale_parent:Gt,u_fade_t:Zt.mix,u_opacity:Zt.opacity,u_image0:0,u_image1:1,u_raster_elevation:Yt,u_zoom_transition:Ot,u_merc_center:Ft,u_cutoff_params:Vt}),K1=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt)=>({u_particle_texture:xt,u_particle_texture_side_len:ct,u_tile_offset:pt,u_velocity:vt,u_color_ramp:Pt,u_velocity_res:Tt,u_max_speed:Ot,u_uv_offset:Ft,u_data_scale:[255*Vt[0],255*Vt[1]],u_data_offset:Gt,u_particle_pos_scale:1.1,u_particle_pos_offset:[fu,fu]}),r_=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt)=>({u_particle_texture:xt,u_particle_texture_side_len:ct,u_velocity:pt,u_velocity_res:vt,u_max_speed:Tt,u_speed_factor:Pt,u_reset_rate:Ot,u_rand_seed:Math.random(),u_uv_offset:Ft,u_data_scale:[255*Vt[0],255*Vt[1]],u_data_offset:Gt,u_particle_pos_scale:1.1,u_particle_pos_offset:[fu,fu]}),Hm=at.ae.create(),Zp=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur)=>{const br=Tt.transform,Er={u_is_size_zoom_constant:+(xt==="constant"||xt==="source"),u_is_size_feature_constant:+(xt==="constant"||xt==="camera"),u_size_t:ct?ct.uSizeT:0,u_size:ct?ct.uSize:0,u_camera_to_center_distance:br.getCameraToCenterDistance(lr),u_rotate_symbol:+pt,u_aspect_ratio:br.width/br.height,u_fade_change:Tt.options.fadeDuration?Tt.symbolFadeChange:1,u_matrix:Pt,u_label_plane_matrix:Ot,u_coord_matrix:Ft,u_is_text:+Vt,u_pitch_with_map:+vt,u_texsize:Gt,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Hm,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:Hm,u_up_vector:[0,-1,0],u_color_adj_mat:cr,u_icon_transition:ur||0};return lr.name==="globe"&&(Er.u_tile_id=[Zt.canonical.x,Zt.canonical.y,1<<Zt.canonical.z],Er.u_zoom_transition=Yt,Er.u_inv_rot_matrix=rr,Er.u_merc_center=er,Er.u_camera_forward=br._camera.forward(),Er.u_ecef_origin=at.bJ(br.globeMatrix,Zt.toUnwrapped()),Er.u_tile_matrix=Float32Array.from(br.globeMatrix),Er.u_up_vector=sr),Er},Zm=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr)=>at.Q(Zp(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Yt,er,rr,sr,lr,cr),{u_gamma_scale:vt?Tt.transform.getCameraToCenterDistance(cr)*Math.cos(Tt.terrain?0:Tt.transform._pitch):1,u_device_pixel_ratio:at.e.devicePixelRatio,u_is_halo:+Zt,undefined:void 0}),bx=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr)=>at.Q(Zm(xt,ct,pt,vt,Tt,Pt,Ot,Ft,!0,Vt,!0,Zt,Yt,er,rr,sr,lr),{u_texsize_icon:Gt,u_texture_icon:1}),wx=(xt,ct,pt,vt)=>({u_matrix:xt,u_emissive_strength:ct,u_opacity:pt,u_color:vt}),Y1=(xt,ct,pt,vt,Tt,Pt,Ot,Ft)=>at.Q(function(Vt,Gt,Zt,Yt,er){const{width:rr,height:sr}=Yt.imageManager.getPixelSize(Gt),lr=Math.pow(2,er.tileID.overscaledZ),cr=er.tileSize*Math.pow(2,Yt.transform.tileZoom)/lr,ur=cr*(er.tileID.canonical.x+er.tileID.wrap*lr),br=cr*er.tileID.canonical.y;return{u_image:0,u_pattern_tl:Zt.tl,u_pattern_br:Zt.br,u_texsize:[rr,sr],u_pattern_size:Zt.displaySize,u_tile_units_to_pixels:1/at.bD(er,1,Yt.transform.tileZoom),u_pixel_coord_upper:[ur>>16,br>>16],u_pixel_coord_lower:[65535&ur,65535&br]}}(0,Pt,Ot,vt,Ft),{u_matrix:xt,u_emissive_strength:ct,u_opacity:pt}),Jl=new Float32Array(at.ae.identity([])),mp=(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr=[0,0,0],sr)=>{const lr=Tt.style.light,cr=lr.properties.get("position"),ur=[-cr.x,-cr.y,cr.z],br=at.bE.create();lr.properties.get("anchor")==="viewport"&&(at.bE.fromRotation(br,-Tt.transform.angle),at.$.transformMat3(ur,ur,br));const Er=Zt.alphaMode==="MASK",_r=lr.properties.get("color").toRenderColor(null),$r=er.paint.get("model-ambient-occlusion-intensity"),Tr=er.paint.get("model-color").constantOr(at.C.white).toRenderColor(null),Ar=er.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:xt,u_lighting_matrix:ct,u_normal_matrix:pt,u_node_matrix:vt||Jl,u_lightpos:ur,u_lightintensity:lr.properties.get("intensity"),u_lightcolor:[_r.r,_r.g,_r.b],u_camera_pos:rr,u_opacity:Pt,u_baseTextureIsAlpha:0,u_alphaMask:+Er,u_alphaCutoff:Zt.alphaCutoff,u_baseColorFactor:[Ot.r,Ot.g,Ot.b,Ot.a],u_emissiveFactor:[Ft[0],Ft[1],Ft[2],1],u_metallicFactor:Vt,u_roughnessFactor:Gt,u_baseColorTexture:qs.BaseColor,u_metallicRoughnessTexture:qs.MetallicRoughness,u_normalTexture:qs.Normal,u_occlusionTexture:qs.Occlusion,u_emissionTexture:qs.Emission,u_lutTexture:qs.LUT,u_color_mix:[Tr.r,Tr.g,Tr.b,Ar],u_aoIntensity:$r,u_emissive_strength:Yt,u_occlusionTextureTransform:sr||[0,0,0,0]}},Ex=(xt,ct=Jl,pt=Jl)=>({u_matrix:xt,u_instance:ct,u_node_matrix:pt}),n_={fillExtrusion:xt=>({u_matrix:new at.a7(xt),u_lightpos:new at.ar(xt),u_lightintensity:new at.ab(xt),u_lightcolor:new at.ar(xt),u_vertical_gradient:new at.ab(xt),u_opacity:new at.ab(xt),u_edge_radius:new at.ab(xt),u_alignment:new at.ab(xt),u_width_scale:new at.ab(xt),u_ao:new at.a9(xt),u_tile_id:new at.ar(xt),u_zoom_transition:new at.ab(xt),u_inv_rot_matrix:new at.a7(xt),u_merc_center:new at.a9(xt),u_up_dir:new at.ar(xt),u_height_lift:new at.ab(xt),u_flood_light_color:new at.ar(xt),u_vertical_scale:new at.ab(xt),u_flood_light_intensity:new at.ab(xt),u_ground_shadow_factor:new at.ar(xt),u_emissive_strength:new at.ab(xt)}),fillExtrusionDepth:xt=>({u_matrix:new at.a7(xt),u_edge_radius:new at.ab(xt),u_alignment:new at.ab(xt),u_width_scale:new at.ab(xt),u_vertical_scale:new at.ab(xt)}),fillExtrusionPattern:xt=>({u_matrix:new at.a7(xt),u_lightpos:new at.ar(xt),u_lightintensity:new at.ab(xt),u_lightcolor:new at.ar(xt),u_vertical_gradient:new at.ab(xt),u_height_factor:new at.ab(xt),u_edge_radius:new at.ab(xt),u_alignment:new at.ab(xt),u_width_scale:new at.ab(xt),u_ao:new at.a9(xt),u_tile_id:new at.ar(xt),u_zoom_transition:new at.ab(xt),u_inv_rot_matrix:new at.a7(xt),u_merc_center:new at.a9(xt),u_up_dir:new at.ar(xt),u_height_lift:new at.ab(xt),u_image:new at.a8(xt),u_texsize:new at.a9(xt),u_pixel_coord_upper:new at.a9(xt),u_pixel_coord_lower:new at.a9(xt),u_tile_units_to_pixels:new at.ab(xt),u_opacity:new at.ab(xt)}),fillExtrusionGroundEffect:xt=>({u_matrix:new at.a7(xt),u_opacity:new at.ab(xt),u_ao_pass:new at.ab(xt),u_meter_to_tile:new at.ab(xt),u_ao:new at.a9(xt),u_flood_light_intensity:new at.ab(xt),u_flood_light_color:new at.ar(xt),u_attenuation:new at.ab(xt),u_edge_radius:new at.ab(xt),u_fb:new at.a8(xt),u_fb_size:new at.ab(xt)}),fill:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt)}),fillPattern:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt),u_image:new at.a8(xt),u_texsize:new at.a9(xt),u_pixel_coord_upper:new at.a9(xt),u_pixel_coord_lower:new at.a9(xt),u_tile_units_to_pixels:new at.ab(xt)}),fillOutline:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt),u_world:new at.a9(xt)}),fillOutlinePattern:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt),u_world:new at.a9(xt),u_image:new at.a8(xt),u_texsize:new at.a9(xt),u_pixel_coord_upper:new at.a9(xt),u_pixel_coord_lower:new at.a9(xt),u_tile_units_to_pixels:new at.ab(xt)}),circle:at.bK,collisionBox:xt=>({u_matrix:new at.a7(xt),u_camera_to_center_distance:new at.ab(xt),u_extrude_scale:new at.a9(xt)}),collisionCircle:xt=>({u_matrix:new at.a7(xt),u_inv_matrix:new at.a7(xt),u_camera_to_center_distance:new at.ab(xt),u_viewport_size:new at.a9(xt)}),debug:xt=>({u_color:new at.aa(xt),u_matrix:new at.a7(xt),u_overlay:new at.a8(xt),u_overlay_scale:new at.ab(xt)}),clippingMask:xt=>({u_matrix:new at.a7(xt)}),heatmap:xt=>({u_extrude_scale:new at.ab(xt),u_intensity:new at.ab(xt),u_matrix:new at.a7(xt),u_inv_rot_matrix:new at.a7(xt),u_merc_center:new at.a9(xt),u_tile_id:new at.ar(xt),u_zoom_transition:new at.ab(xt),u_up_dir:new at.ar(xt)}),heatmapTexture:xt=>({u_image:new at.a8(xt),u_color_ramp:new at.a8(xt),u_opacity:new at.ab(xt)}),hillshade:xt=>({u_matrix:new at.a7(xt),u_image:new at.a8(xt),u_latrange:new at.a9(xt),u_light:new at.a9(xt),u_shadow:new at.aa(xt),u_highlight:new at.aa(xt),u_emissive_strength:new at.ab(xt),u_accent:new at.aa(xt)}),hillshadePrepare:xt=>({u_matrix:new at.a7(xt),u_image:new at.a8(xt),u_dimension:new at.a9(xt),u_zoom:new at.ab(xt)}),line:at.bL,linePattern:at.bM,raster:xt=>({u_matrix:new at.a7(xt),u_normalize_matrix:new at.a7(xt),u_globe_matrix:new at.a7(xt),u_merc_matrix:new at.a7(xt),u_grid_matrix:new at.as(xt),u_tl_parent:new at.a9(xt),u_scale_parent:new at.ab(xt),u_fade_t:new at.ab(xt),u_opacity:new at.ab(xt),u_image0:new at.a8(xt),u_image1:new at.a8(xt),u_brightness_low:new at.ab(xt),u_brightness_high:new at.ab(xt),u_saturation_factor:new at.ab(xt),u_contrast_factor:new at.ab(xt),u_spin_weights:new at.ar(xt),u_perspective_transform:new at.a9(xt),u_raster_elevation:new at.ab(xt),u_zoom_transition:new at.ab(xt),u_merc_center:new at.a9(xt),u_cutoff_params:new at.at(xt),u_colorization_mix:new at.at(xt),u_colorization_offset:new at.ab(xt),u_color_ramp:new at.a8(xt),u_texture_offset:new at.a9(xt),u_texture_res:new at.a9(xt),u_emissive_strength:new at.ab(xt)}),rasterParticle:xt=>({u_matrix:new at.a7(xt),u_normalize_matrix:new at.a7(xt),u_globe_matrix:new at.a7(xt),u_merc_matrix:new at.a7(xt),u_grid_matrix:new at.as(xt),u_tl_parent:new at.a9(xt),u_scale_parent:new at.ab(xt),u_fade_t:new at.ab(xt),u_opacity:new at.ab(xt),u_image0:new at.a8(xt),u_image1:new at.a8(xt),u_raster_elevation:new at.ab(xt),u_zoom_transition:new at.ab(xt),u_merc_center:new at.a9(xt),u_cutoff_params:new at.at(xt)}),rasterParticleTexture:xt=>({u_texture:new at.a8(xt),u_opacity:new at.ab(xt)}),rasterParticleDraw:xt=>({u_particle_texture:new at.a8(xt),u_particle_texture_side_len:new at.ab(xt),u_tile_offset:new at.a9(xt),u_velocity:new at.a8(xt),u_color_ramp:new at.a8(xt),u_velocity_res:new at.a9(xt),u_max_speed:new at.ab(xt),u_uv_offset:new at.a9(xt),u_data_scale:new at.a9(xt),u_data_offset:new at.ab(xt),u_particle_pos_scale:new at.ab(xt),u_particle_pos_offset:new at.a9(xt)}),rasterParticleUpdate:xt=>({u_particle_texture:new at.a8(xt),u_particle_texture_side_len:new at.ab(xt),u_velocity:new at.a8(xt),u_velocity_res:new at.a9(xt),u_max_speed:new at.ab(xt),u_speed_factor:new at.ab(xt),u_reset_rate:new at.ab(xt),u_rand_seed:new at.ab(xt),u_uv_offset:new at.a9(xt),u_data_scale:new at.a9(xt),u_data_offset:new at.ab(xt),u_particle_pos_scale:new at.ab(xt),u_particle_pos_offset:new at.a9(xt)}),symbolIcon:xt=>({u_is_size_zoom_constant:new at.a8(xt),u_is_size_feature_constant:new at.a8(xt),u_size_t:new at.ab(xt),u_size:new at.ab(xt),u_camera_to_center_distance:new at.ab(xt),u_rotate_symbol:new at.a8(xt),u_aspect_ratio:new at.ab(xt),u_fade_change:new at.ab(xt),u_matrix:new at.a7(xt),u_label_plane_matrix:new at.a7(xt),u_coord_matrix:new at.a7(xt),u_is_text:new at.a8(xt),u_pitch_with_map:new at.a8(xt),u_texsize:new at.a9(xt),u_tile_id:new at.ar(xt),u_zoom_transition:new at.ab(xt),u_inv_rot_matrix:new at.a7(xt),u_merc_center:new at.a9(xt),u_camera_forward:new at.ar(xt),u_tile_matrix:new at.a7(xt),u_up_vector:new at.ar(xt),u_ecef_origin:new at.ar(xt),u_texture:new at.a8(xt),u_icon_transition:new at.ab(xt),u_color_adj_mat:new at.a7(xt)}),symbolSDF:xt=>({u_is_size_zoom_constant:new at.a8(xt),u_is_size_feature_constant:new at.a8(xt),u_size_t:new at.ab(xt),u_size:new at.ab(xt),u_camera_to_center_distance:new at.ab(xt),u_rotate_symbol:new at.a8(xt),u_aspect_ratio:new at.ab(xt),u_fade_change:new at.ab(xt),u_matrix:new at.a7(xt),u_label_plane_matrix:new at.a7(xt),u_coord_matrix:new at.a7(xt),u_is_text:new at.a8(xt),u_pitch_with_map:new at.a8(xt),u_texsize:new at.a9(xt),u_texture:new at.a8(xt),u_gamma_scale:new at.ab(xt),u_device_pixel_ratio:new at.ab(xt),u_tile_id:new at.ar(xt),u_zoom_transition:new at.ab(xt),u_inv_rot_matrix:new at.a7(xt),u_merc_center:new at.a9(xt),u_camera_forward:new at.ar(xt),u_tile_matrix:new at.a7(xt),u_up_vector:new at.ar(xt),u_ecef_origin:new at.ar(xt),u_is_halo:new at.a8(xt)}),symbolTextAndIcon:xt=>({u_is_size_zoom_constant:new at.a8(xt),u_is_size_feature_constant:new at.a8(xt),u_size_t:new at.ab(xt),u_size:new at.ab(xt),u_camera_to_center_distance:new at.ab(xt),u_rotate_symbol:new at.a8(xt),u_aspect_ratio:new at.ab(xt),u_fade_change:new at.ab(xt),u_matrix:new at.a7(xt),u_label_plane_matrix:new at.a7(xt),u_coord_matrix:new at.a7(xt),u_is_text:new at.a8(xt),u_pitch_with_map:new at.a8(xt),u_texsize:new at.a9(xt),u_texsize_icon:new at.a9(xt),u_texture:new at.a8(xt),u_texture_icon:new at.a8(xt),u_gamma_scale:new at.ab(xt),u_device_pixel_ratio:new at.ab(xt),u_is_halo:new at.a8(xt)}),background:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt),u_opacity:new at.ab(xt),u_color:new at.aa(xt)}),backgroundPattern:xt=>({u_matrix:new at.a7(xt),u_emissive_strength:new at.ab(xt),u_opacity:new at.ab(xt),u_image:new at.a8(xt),u_pattern_tl:new at.a9(xt),u_pattern_br:new at.a9(xt),u_texsize:new at.a9(xt),u_pattern_size:new at.a9(xt),u_pixel_coord_upper:new at.a9(xt),u_pixel_coord_lower:new at.a9(xt),u_tile_units_to_pixels:new at.ab(xt)}),terrainRaster:xt=>({u_matrix:new at.a7(xt),u_image0:new at.a8(xt),u_skirt_height:new at.ab(xt),u_ground_shadow_factor:new at.ar(xt)}),skybox:xt=>({u_matrix:new at.a7(xt),u_sun_direction:new at.ar(xt),u_cubemap:new at.a8(xt),u_opacity:new at.ab(xt),u_temporal_offset:new at.ab(xt)}),skyboxGradient:xt=>({u_matrix:new at.a7(xt),u_color_ramp:new at.a8(xt),u_center_direction:new at.ar(xt),u_radius:new at.ab(xt),u_opacity:new at.ab(xt),u_temporal_offset:new at.ab(xt)}),skyboxCapture:xt=>({u_matrix_3f:new at.as(xt),u_sun_direction:new at.ar(xt),u_sun_intensity:new at.ab(xt),u_color_tint_r:new at.at(xt),u_color_tint_m:new at.at(xt),u_luminance:new at.ab(xt)}),globeRaster:xt=>({u_proj_matrix:new at.a7(xt),u_globe_matrix:new at.a7(xt),u_normalize_matrix:new at.a7(xt),u_merc_matrix:new at.a7(xt),u_zoom_transition:new at.ab(xt),u_merc_center:new at.a9(xt),u_image0:new at.a8(xt),u_grid_matrix:new at.as(xt),u_skirt_height:new at.ab(xt),u_far_z_cutoff:new at.ab(xt),u_frustum_tl:new at.ar(xt),u_frustum_tr:new at.ar(xt),u_frustum_br:new at.ar(xt),u_frustum_bl:new at.ar(xt),u_globe_pos:new at.ar(xt),u_globe_radius:new at.ab(xt),u_viewport:new at.a9(xt)}),globeAtmosphere:xt=>({u_frustum_tl:new at.ar(xt),u_frustum_tr:new at.ar(xt),u_frustum_br:new at.ar(xt),u_frustum_bl:new at.ar(xt),u_horizon:new at.ab(xt),u_transition:new at.ab(xt),u_fadeout_range:new at.ab(xt),u_color:new at.at(xt),u_high_color:new at.at(xt),u_space_color:new at.at(xt),u_temporal_offset:new at.ab(xt),u_horizon_angle:new at.ab(xt)}),model:xt=>({u_matrix:new at.a7(xt),u_lighting_matrix:new at.a7(xt),u_normal_matrix:new at.a7(xt),u_node_matrix:new at.a7(xt),u_lightpos:new at.ar(xt),u_lightintensity:new at.ab(xt),u_lightcolor:new at.ar(xt),u_camera_pos:new at.ar(xt),u_opacity:new at.ab(xt),u_baseColorFactor:new at.at(xt),u_emissiveFactor:new at.at(xt),u_metallicFactor:new at.ab(xt),u_roughnessFactor:new at.ab(xt),u_baseTextureIsAlpha:new at.a8(xt),u_alphaMask:new at.a8(xt),u_alphaCutoff:new at.ab(xt),u_baseColorTexture:new at.a8(xt),u_metallicRoughnessTexture:new at.a8(xt),u_normalTexture:new at.a8(xt),u_occlusionTexture:new at.a8(xt),u_emissionTexture:new at.a8(xt),u_lutTexture:new at.a8(xt),u_color_mix:new at.at(xt),u_aoIntensity:new at.ab(xt),u_emissive_strength:new at.ab(xt),u_occlusionTextureTransform:new at.at(xt)}),modelDepth:xt=>({u_matrix:new at.a7(xt),u_instance:new at.a7(xt),u_node_matrix:new at.a7(xt)}),groundShadow:xt=>({u_matrix:new at.a7(xt),u_ground_shadow_factor:new at.ar(xt)}),stars:xt=>({u_matrix:new at.a7(xt),u_up:new at.ar(xt),u_right:new at.ar(xt),u_intensity_multiplier:new at.ab(xt)}),occlusion:xt=>({u_matrix:new at.a7(xt),u_anchorPos:new at.ar(xt),u_screenSizePx:new at.a9(xt),u_occluderSizePx:new at.a9(xt),u_color:new at.at(xt)})};function gp(xt,ct,pt){const vt=ct.createTileMatrix(xt,xt.worldSize,pt.toUnwrapped());return at.ae.multiply(new Float32Array(16),xt.projMatrix,vt)}function i_(xt,ct,pt){if(ct.projection.name===pt.projection.name)return xt.projMatrix;const vt=pt.clone();return vt.setProjection(ct.projection),gp(vt,ct.getProjection(),xt)}function Sx(xt,ct,pt){return ct.name===pt.projection.name?xt.projMatrix:gp(pt,ct,xt)}let qp;function o_(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=xt.context,Vt=Ft.gl,Gt=xt.transform,Zt=xt.getOrCreateProgram("collisionBox"),Yt=[];let er=0,rr=0;for(let _r=0;_r<vt.length;_r++){const $r=vt[_r],Tr=ct.getTile($r),Ar=Tr.getBucket(pt);if(!Ar)continue;const Fr=i_($r,Ar,Gt);let zr=Fr;Tt[0]===0&&Tt[1]===0||(zr=xt.translatePosMatrix(Fr,Tr,Tt,Pt));const Yr=Ot?Ar.textCollisionBox:Ar.iconCollisionBox,Vr=Ar.collisionCircleArray;if(Vr.length>0){const Ir=at.ae.create(),nn=zr;at.ae.mul(Ir,Ar.placementInvProjMatrix,Gt.glCoordMatrix),at.ae.mul(Ir,Ir,Ar.placementViewportMatrix),Yt.push({circleArray:Vr,circleOffset:rr,transform:nn,invTransform:Ir,projection:Ar.getProjection()}),er+=Vr.length/4,rr=er}Yr&&(xt.terrain&&xt.terrain.setupElevationDraw(Tr,Zt),Zt.draw(xt,Vt.LINES,at.af.disabled,at.ah.disabled,xt.colorModeForRenderPass(),at.ag.disabled,Hp(zr,Gt,Tr,Ar.getProjection()),pt.id,Yr.layoutVertexBuffer,Yr.indexBuffer,Yr.segments,null,Gt.zoom,null,[Yr.collisionVertexBuffer,Yr.collisionVertexBufferExt]))}if(!Ot||!Yt.length)return;const sr=xt.getOrCreateProgram("collisionCircle"),lr=new at.bN;lr.resize(4*er),lr._trim();let cr=0;for(const _r of Yt)for(let $r=0;$r<_r.circleArray.length/4;$r++){const Tr=4*$r,Ar=_r.circleArray[Tr+0],Fr=_r.circleArray[Tr+1],zr=_r.circleArray[Tr+2],Yr=_r.circleArray[Tr+3];lr.emplace(cr++,Ar,Fr,zr,Yr,0),lr.emplace(cr++,Ar,Fr,zr,Yr,1),lr.emplace(cr++,Ar,Fr,zr,Yr,2),lr.emplace(cr++,Ar,Fr,zr,Yr,3)}(!qp||qp.length<2*er)&&(qp=function(_r){const $r=2*_r,Tr=new at.bw;Tr.resize($r),Tr._trim();for(let Ar=0;Ar<$r;Ar++){const Fr=6*Ar;Tr.uint16[Fr+0]=4*Ar+0,Tr.uint16[Fr+1]=4*Ar+1,Tr.uint16[Fr+2]=4*Ar+2,Tr.uint16[Fr+3]=4*Ar+2,Tr.uint16[Fr+4]=4*Ar+3,Tr.uint16[Fr+5]=4*Ar+0}return Tr}(er));const ur=Ft.createIndexBuffer(qp,!0),br=Ft.createVertexBuffer(lr,at.bO.members,!0);for(const _r of Yt){const $r={u_matrix:_r.transform,u_inv_matrix:_r.invTransform,u_camera_to_center_distance:(Er=Gt).getCameraToCenterDistance(_r.projection),u_viewport_size:[Er.width,Er.height]};sr.draw(xt,Vt.TRIANGLES,at.af.disabled,at.ah.disabled,xt.colorModeForRenderPass(),at.ag.disabled,$r,pt.id,br,ur,at.b.simpleSegment(0,2*_r.circleOffset,_r.circleArray.length,_r.circleArray.length/2),null,Gt.zoom)}var Er;br.destroy(),ur.destroy()}const qm=at.ae.create();function a_(xt){const ct=xt._camera.getWorldToCamera(xt.worldSize,1),pt=at.ae.multiply([],ct,xt.globeMatrix);at.ae.invert(pt,pt);const vt=[0,0,0],Tt=[0,1,0,0];return at.aB.transformMat4(Tt,Tt,pt),vt[0]=Tt[0],vt[1]=Tt[1],vt[2]=Tt[2],at.$.normalize(vt,vt),vt}function s_({width:xt,height:ct,anchor:pt,textOffset:vt,textScale:Tt},Pt){const{horizontalAlign:Ot,verticalAlign:Ft}=at.bS(pt),Vt=-(Ot-.5)*xt,Gt=-(Ft-.5)*ct,Zt=at.bR(pt,vt);return new at.P((Vt/Tt+Zt[0])*Pt,(Gt/Tt+Zt[1])*Pt)}function X1(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt){const Yt=xt.text.placedSymbolArray,er=xt.text.dynamicLayoutVertexArray,rr=xt.icon.dynamicLayoutVertexArray,sr={},lr=xt.getProjection(),cr=Sx(Ft,lr,Pt),ur=Pt.elevation,br=lr.upVectorScale(Ft.canonical,Pt.center.lat,Pt.worldSize).metersToTile;er.clear();for(let Er=0;Er<Yt.length;Er++){const _r=Yt.get(Er),{tileAnchorX:$r,tileAnchorY:Tr,numGlyphs:Ar}=_r,Fr=_r.hidden||!_r.crossTileID||xt.allowVerticalPlacement&&!_r.placedOrientation?null:vt[_r.crossTileID];if(Fr){let zr=0,Yr=0,Vr=0;if(ur){const Ur=ur?ur.getAtTileOffset(Ft,$r,Tr):0,[bn,Sn,zn]=lr.upVector(Ft.canonical,$r,Tr);zr=Ur*bn*br,Yr=Ur*Sn*br,Vr=Ur*zn*br}let[Ir,nn,en,Wr]=iu(_r.projectedAnchorX+zr,_r.projectedAnchorY+Yr,_r.projectedAnchorZ+Vr,pt?cr:Ot);const Tn=jo(Pt.getCameraToCenterDistance(lr),Wr);let _n=Tt.evaluateSizeForFeature(xt.textSizeData,Gt,_r)*Tn/at.bP;pt&&(_n*=xt.tilePixelRatio/Vt);const Xr=s_(Fr,_n);pt?({x:Ir,y:nn,z:en}=lr.projectTilePoint($r+Xr.x,Tr+Xr.y,Ft.canonical),[Ir,nn,en]=iu(Ir+zr,nn+Yr,en+Vr,Ot)):(ct&&Xr._rotate(-Pt.angle),Ir+=Xr.x,nn+=Xr.y,en=0);const hn=xt.allowVerticalPlacement&&_r.placedOrientation===at.aF.vertical?Math.PI/2:0;for(let Ur=0;Ur<Ar;Ur++)at.aI(er,Ir,nn,en,hn);Zt&&_r.associatedIconIndex>=0&&(sr[_r.associatedIconIndex]={x:Ir,y:nn,z:en,angle:hn})}else fp(Ar,er)}if(Zt){rr.clear();const Er=xt.icon.placedSymbolArray;for(let _r=0;_r<Er.length;_r++){const $r=Er.get(_r),{numGlyphs:Tr}=$r,Ar=sr[_r];if($r.hidden||!Ar)fp(Tr,rr);else{const{x:Fr,y:zr,z:Yr,angle:Vr}=Ar;for(let Ir=0;Ir<Tr;Ir++)at.aI(rr,Fr,zr,Yr,Vr)}}xt.icon.dynamicLayoutVertexBuffer.updateData(rr)}xt.text.dynamicLayoutVertexBuffer.updateData(er)}function Km(xt,ct,pt,vt,Tt,Pt,Ot={}){const Ft=pt.paint.get("icon-translate"),Vt=pt.paint.get("text-translate"),Gt=pt.paint.get("icon-translate-anchor"),Zt=pt.paint.get("text-translate-anchor"),Yt=pt.layout.get("icon-rotation-alignment"),er=pt.layout.get("text-rotation-alignment"),rr=pt.layout.get("icon-pitch-alignment"),sr=pt.layout.get("text-pitch-alignment"),lr=pt.layout.get("icon-keep-upright"),cr=pt.layout.get("text-keep-upright"),ur=pt.paint.get("icon-color-saturation"),br=pt.paint.get("icon-color-contrast"),Er=pt.paint.get("icon-color-brightness-min"),_r=pt.paint.get("icon-color-brightness-max");pt.paint.get("icon-occlusion-opacity").constantOr(0),pt.paint.get("text-occlusion-opacity").constantOr(0);const $r=xt.context,Tr=$r.gl,Ar=xt.transform,Fr=Yt==="map",zr=er==="map",Yr=rr==="map",Vr=sr==="map",Ir=pt.layout.get("symbol-sort-key").constantOr(1)!==void 0;let nn=!1;const en=xt.depthModeForSublayer(0,at.af.ReadOnly),Wr=[at.ak(Ar.center.lng),at.al(Ar.center.lat)],Tn=pt.layout.get("text-variable-anchor"),_n=Ar.projection.name==="globe",Xr=[],hn=[0,-1,0];for(const Ur of vt){const bn=ct.getTile(Ur),Sn=bn.getBucket(pt);if(!Sn||Sn.projection.name==="mercator"&&_n||Sn.fullyClipped)continue;const zn=Sn.projection.name==="globe",Un=zn?at.a2(Ar.zoom):0,Qn=Sx(Ur,Sn.getProjection(),Ar),Wn=Ar.calculatePixelsToTileUnitsMatrix(bn),uo=Tn&&Sn.hasTextData(),So=Sn.hasIconTextFit()&&uo&&Sn.hasIconData(),fo=Sn.getProjection().createInversionMatrix(Ar,Ur.canonical),ko=Ko=>{Ar.depthOcclusionForSymbolsAndCircles&&(pt.hasInitialOcclusionOpacityProperties||xt.terrain)&&(Ko.push("DEPTH_D24"),Ko.push("DEPTH_OCCLUSION"))},Vo=()=>{const Ko=Fr&&pt.layout.get("symbol-placement")!=="point",Lo=[];ko(Lo);const yo=Ko||So,As=pt.paint.get("icon-image-cross-fade").constantOr(0);xt.terrainRenderModeElevated()&&Yr&&Lo.push("PITCH_WITH_MAP_TERRAIN"),zn&&(Lo.push("PROJECTION_GLOBE_VIEW"),yo&&Lo.push("PROJECTED_POS_ON_VIEWPORT")),As>0&&Lo.push("ICON_TRANSITION"),Sn.icon.zOffsetVertexBuffer&&Lo.push("Z_OFFSET"),ur===0&&br===0&&Er===0&&_r===1||Lo.push("COLOR_ADJUSTMENT");const Ps=Sn.icon.programConfigurations.get(pt.id),Qs=xt.getOrCreateProgram(Sn.sdfIcons?"symbolSDF":"symbolIcon",{config:Ps,defines:Lo});let yl;const Us=bn.imageAtlasTexture?bn.imageAtlasTexture.size:[0,0],xl=Sn.iconSizeData,Ns=at.aE(xl,Ar.zoom),Gs=Yr||Ar.pitch!==0,In=Om(Qn,bn.tileID.canonical,Yr,Fr,Ar,Sn.getProjection(),Wn),to=zy(Qn,bn.tileID.canonical,Yr,Fr,Ar,Sn.getProjection(),Wn),Tl=xt.translatePosMatrix(to,bn,Ft,Gt,!0),is=xt.translatePosMatrix(Qn,bn,Ft,Gt),tn=yo?qm:In,ku=Fr&&!Yr&&!Ko;let su=hn;!_n&&!Ar.mercatorFromTransition||Fr||(su=a_(Ar));const Ru=zn?su:hn;if(Sn.sdfIcons&&!Sn.iconsInText)yl=Zm(xl.kind,Ns,ku,Yr,xt,is,tn,Tl,!1,Us,!0,Ur,Un,Wr,fo,Ru,Sn.getProjection());else{const Tp=pt.getColorAdjustmentMatrix(ur,br,Er,_r);yl=Zp(xl.kind,Ns,ku,Yr,xt,is,tn,Tl,!1,Us,Ur,Un,Wr,fo,Ru,Sn.getProjection(),Tp,As)}const Iu=bn.imageAtlasTexture?bn.imageAtlasTexture:null,E0=pt.layout.get("icon-size").constantOr(0)!==1||Sn.iconsNeedLinear,S0=Sn.sdfIcons||xt.options.rotating||xt.options.zooming||E0||Gs?Tr.LINEAR:Tr.NEAREST,_f=Sn.sdfIcons&&pt.paint.get("icon-halo-width").constantOr(1)!==0,Xx=xt.terrain&&Yr&&Ko?at.ae.invert(at.ae.create(),In):qm;if(Ko&&Sn.icon){const Tp=Ar.elevation,T0=Tp?Tp.getAtTileOffsetFunc(Ur,Ar.center.lat,Ar.worldSize,Sn.getProjection()):null,sm=By(Qn,bn.tileID.canonical,Yr,Fr,Ar,Sn.getProjection(),Wn);Vp(Sn,Qn,xt,!1,sm,to,Yr,lr,T0,Ur)}return{program:Qs,buffers:Sn.icon,uniformValues:yl,atlasTexture:Iu,atlasTextureIcon:null,atlasInterpolation:S0,atlasInterpolationIcon:null,isSDF:Sn.sdfIcons,hasHalo:_f,tile:bn,labelPlaneMatrixInv:Xx}},ss=()=>{const Ko=zr&&pt.layout.get("symbol-placement")!=="point",Lo=[],yo=Ko||Tn||So;xt.terrainRenderModeElevated()&&Vr&&Lo.push("PITCH_WITH_MAP_TERRAIN"),zn&&(Lo.push("PROJECTION_GLOBE_VIEW"),yo&&Lo.push("PROJECTED_POS_ON_VIEWPORT")),Sn.text.zOffsetVertexBuffer&&Lo.push("Z_OFFSET"),ko(Lo);const As=Sn.text.programConfigurations.get(pt.id),Ps=xt.getOrCreateProgram(Sn.iconsInText?"symbolTextAndIcon":"symbolSDF",{config:As,defines:Lo});let Qs,yl=[0,0],Us=null;const xl=Sn.textSizeData;Sn.iconsInText&&(yl=bn.imageAtlasTexture?bn.imageAtlasTexture.size:[0,0],Us=bn.imageAtlasTexture?bn.imageAtlasTexture:null,Qs=Vr||Ar.pitch!==0||xt.options.rotating||xt.options.zooming||xl.kind==="composite"||xl.kind==="camera"?Tr.LINEAR:Tr.NEAREST);const Ns=bn.glyphAtlasTexture?bn.glyphAtlasTexture.size:[0,0],Gs=at.aE(xl,Ar.zoom),In=Om(Qn,bn.tileID.canonical,Vr,zr,Ar,Sn.getProjection(),Wn),to=zy(Qn,bn.tileID.canonical,Vr,zr,Ar,Sn.getProjection(),Wn),Tl=xt.translatePosMatrix(to,bn,Vt,Zt,!0),is=xt.translatePosMatrix(Qn,bn,Vt,Zt),tn=yo?qm:In,ku=zr&&!Vr&&!Ko;let su=hn;!_n&&!Ar.mercatorFromTransition||zr||(su=a_(Ar));const Ru=zn?su:hn;let Iu;Iu=Sn.iconsInText?bx(xl.kind,Gs,ku,Vr,xt,is,tn,Tl,Ns,yl,Ur,Un,Wr,fo,Ru,Sn.getProjection()):Zm(xl.kind,Gs,ku,Vr,xt,is,tn,Tl,!0,Ns,!0,Ur,Un,Wr,fo,Ru,Sn.getProjection());const E0=bn.glyphAtlasTexture?bn.glyphAtlasTexture:null,S0=Tr.LINEAR,_f=pt.paint.get("text-halo-width").constantOr(1)!==0,Xx=xt.terrain&&Vr&&Ko?at.ae.invert(at.ae.create(),In):qm;if(Ko&&Sn.text){const Tp=Ar.elevation,T0=Tp?Tp.getAtTileOffsetFunc(Ur,Ar.center.lat,Ar.worldSize,Sn.getProjection()):null,sm=By(Qn,bn.tileID.canonical,Vr,zr,Ar,Sn.getProjection(),Wn);Vp(Sn,Qn,xt,!0,sm,to,Vr,cr,T0,Ur)}return{program:Ps,buffers:Sn.text,uniformValues:Iu,atlasTexture:E0,atlasTextureIcon:Us,atlasInterpolation:S0,atlasInterpolationIcon:Qs,isSDF:!0,hasHalo:_f,tile:bn,labelPlaneMatrixInv:Xx}},rs=Sn.icon.segments.get().length,Uo=Sn.text.segments.get().length,ts=rs&&!Ot.onlyText?Vo():null,Oo=Uo&&!Ot.onlyIcons?ss():null,Do=pt.paint.get("icon-opacity").constantOr(1),To=pt.paint.get("text-opacity").constantOr(1);if(Ir&&Sn.canOverlap){nn=!0;const Ko=Do&&!Ot.onlyText?Sn.icon.segments.get():[],Lo=To&&!Ot.onlyIcons?Sn.text.segments.get():[];for(const yo of Ko)Xr.push({segments:new at.b([yo]),sortKey:yo.sortKey,state:ts});for(const yo of Lo)Xr.push({segments:new at.b([yo]),sortKey:yo.sortKey,state:Oo})}else Ot.onlyText||Xr.push({segments:Do?Sn.icon.segments:new at.b([]),sortKey:0,state:ts}),Ot.onlyIcons||Xr.push({segments:To?Sn.text.segments:new at.b([]),sortKey:0,state:Oo})}nn&&Xr.sort((Ur,bn)=>Ur.sortKey-bn.sortKey);for(const Ur of Xr){const bn=Ur.state;if(bn)if(xt.terrain?xt.terrain.setupElevationDraw(bn.tile,bn.program,{useDepthForOcclusion:Ar.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:bn.labelPlaneMatrixInv}):xt.setupDepthForOcclusion(Ar.depthOcclusionForSymbolsAndCircles,bn.program),$r.activeTexture.set(Tr.TEXTURE0),bn.atlasTexture&&bn.atlasTexture.bind(bn.atlasInterpolation,Tr.CLAMP_TO_EDGE,!0),bn.atlasTextureIcon&&($r.activeTexture.set(Tr.TEXTURE1),bn.atlasTextureIcon&&bn.atlasTextureIcon.bind(bn.atlasInterpolationIcon,Tr.CLAMP_TO_EDGE,!0)),xt.uploadCommonLightUniforms(xt.context,bn.program),bn.hasHalo){const Sn=bn.uniformValues;Sn.u_is_halo=1,Tx(bn.buffers,Ur.segments,pt,xt,bn.program,en,Tt,Pt,Sn,2),Sn.u_is_halo=0}else{if(bn.isSDF){const Sn=bn.uniformValues;bn.hasHalo&&(Sn.u_is_halo=1,Tx(bn.buffers,Ur.segments,pt,xt,bn.program,en,Tt,Pt,Sn,1)),Sn.u_is_halo=0}Tx(bn.buffers,Ur.segments,pt,xt,bn.program,en,Tt,Pt,bn.uniformValues,1)}}}function Tx(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt){const Zt=[xt.dynamicLayoutVertexBuffer,xt.opacityVertexBuffer,xt.iconTransitioningVertexBuffer,xt.globeExtVertexBuffer,xt.zOffsetVertexBuffer];Tt.draw(vt,vt.context.gl.TRIANGLES,Pt,Ot,Ft,at.ag.disabled,Vt,pt.id,xt.layoutVertexBuffer,xt.indexBuffer,ct,pt.paint,vt.transform.zoom,xt.programConfigurations.get(pt.id),Zt,Gt)}function Ym(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=xt.context.gl,Vt=pt.paint.get("fill-pattern"),Gt=Vt&&Vt.constantOr(1);let Zt,Yt,er,rr,sr;Ot?(Yt=Gt&&!pt.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Zt=Ft.LINES):(Yt=Gt?"fillPattern":"fill",Zt=Ft.TRIANGLES);for(const lr of vt){const cr=ct.getTile(lr);if(Gt&&!cr.patternsLoaded())continue;const ur=cr.getBucket(pt);if(!ur)continue;xt.prepareDrawTile();const br=ur.programConfigurations.get(pt.id),Er=xt.isTileAffectedByFog(lr),_r=xt.getOrCreateProgram(Yt,{config:br,overrideFog:Er});Gt&&(xt.context.activeTexture.set(Ft.TEXTURE0),cr.imageAtlasTexture&&cr.imageAtlasTexture.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),br.updatePaintBuffers());const $r=Vt.constantOr(null);if($r&&cr.imageAtlas){const Fr=cr.imageAtlas.patternPositions[$r.toString()];Fr&&br.setConstantPatternPositions(Fr)}const Tr=xt.translatePosMatrix(lr.projMatrix,cr,pt.paint.get("fill-translate"),pt.paint.get("fill-translate-anchor")),Ar=pt.paint.get("fill-emissive-strength");if(Ot){rr=ur.indexBuffer2,sr=ur.segments2;const Fr=xt.terrain&&xt.terrain.renderingToTexture?xt.terrain.drapeBufferSize:[Ft.drawingBufferWidth,Ft.drawingBufferHeight];er=Yt==="fillOutlinePattern"&&Gt?Gm(Tr,Ar,xt,cr,Fr):Ky(Tr,Ar,Fr)}else rr=ur.indexBuffer,sr=ur.segments,er=Gt?qy(Tr,Ar,xt,cr):Um(Tr,Ar);xt.uploadCommonUniforms(xt.context,_r,lr.toUnwrapped()),_r.draw(xt,Zt,Tt,xt.stencilModeForClipping(lr),Pt,at.ag.disabled,er,pt.id,ur.layoutVertexBuffer,rr,sr,pt.paint,xt.transform.zoom,br,void 0)}}function yp(xt,ct,pt,vt,Tt,Pt,Ot,Ft){pt.resetLayerRenderingStats(xt);const Vt=xt.context,Gt=Vt.gl,Zt=xt.transform,Yt=pt.paint.get("fill-extrusion-pattern"),er=Yt.constantOr(1),rr=pt.paint.get("fill-extrusion-opacity"),sr=xt.style.enable3dLights(),lr=pt.paint.get(sr&&!er?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),cr=[pt.paint.get("fill-extrusion-ambient-occlusion-intensity"),lr],ur=pt.layout.get("fill-extrusion-edge-radius"),br=ur>0&&!pt.paint.get("fill-extrusion-rounded-roof"),Er=br?0:ur,_r=Zt.projection.name==="globe"?at.b_():0,$r=Zt.projection.name==="globe",Tr=$r?at.a2(Zt.zoom):0,Ar=[at.ak(Zt.center.lng),at.al(Zt.center.lat)],Fr=pt.paint.get("fill-extrusion-flood-light-color").toRenderColor(pt.lut).toArray01().slice(0,3),zr=pt.paint.get("fill-extrusion-flood-light-intensity"),Yr=pt.paint.get("fill-extrusion-vertical-scale"),Vr=pt.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Ir=Rl(xt,pt.paint.get("fill-extrusion-cutoff-fade-range")),nn=pt.paint.get("fill-extrusion-emissive-strength"),en=[];$r&&en.push("PROJECTION_GLOBE_VIEW"),cr[0]>0&&en.push("FAUX_AO"),br&&en.push("ZERO_ROOF_RADIUS"),Ft&&en.push("HAS_CENTROID"),zr>0&&en.push("FLOOD_LIGHT"),Ir.shouldRenderCutoff&&en.push("RENDER_CUTOFF"),Vr&&en.push("RENDER_WALL_MODE");const Wr=(()=>{const zn=pt.paint.get("fill-extrusion-line-alignment");switch(zn){case"inside":return 1;case"outside":return-1;case"center":return 0;default:return at.w(`Unsupported value for fill-extrusion-line-alignment: ${zn}`),0}})();let Tn;const _n=xt.renderPass==="shadow",Xr=xt.shadowRenderer,hn=_n&&!!Xr;xt.shadowRenderer&&(xt.shadowRenderer.useNormalOffset=!0);let Ur=[0,0,0];if(Xr){const zn=xt.style.directionalLight,Un=xt.style.ambientLight;zn&&Un&&(Ur=Nm(xt.style,zn,Un)),Tn=en.concat(["SHADOWS_SINGLE_CASCADE"])}const bn=hn?"fillExtrusionDepth":er?"fillExtrusionPattern":"fillExtrusion",Sn=pt.getLayerRenderingStats();for(const zn of vt){const Un=ct.getTile(zn),Qn=Un.getBucket(pt);if(!Qn||Qn.projection.name!==Zt.projection.name)continue;let Wn=!1;Xr&&(Wn=Xr.getMaxCascadeForTile(zn.toUnwrapped())===0);const uo=xt.isTileAffectedByFog(zn),So=Qn.programConfigurations.get(pt.id),fo=xt.getOrCreateProgram(bn,{config:So,defines:Wn?Tn:en,overrideFog:uo});if(xt.terrain&&xt.terrain.setupElevationDraw(Un,fo,{useMeterToDem:!0}),!Qn.centroidVertexBuffer){const Oo=fo.attributes.a_centroid_pos;Oo!==void 0&&Gt.vertexAttrib2f(Oo,0,0)}!_n&&Xr&&Xr.setupShadows(Un.tileID.toUnwrapped(),fo,"vector-tile",Un.tileID.overscaledZ),er&&(xt.context.activeTexture.set(Gt.TEXTURE0),Un.imageAtlasTexture&&Un.imageAtlasTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),So.updatePaintBuffers());const ko=Yt.constantOr(null);if(ko&&Un.imageAtlas){const Oo=Un.imageAtlas.patternPositions[ko.toString()];Oo&&So.setConstantPatternPositions(Oo)}const Vo=pt.paint.get("fill-extrusion-vertical-gradient"),ss=1/Qn.tileToMeter;let rs;if(_n&&Xr){if(pu(Un.tileID,Qn,xt))continue;const Oo=Xr.calculateShadowPassMatrixFromTile(Un.tileID.toUnwrapped());rs=Zy(Oo,Er,Wr,ss,Yr)}else{const Oo=xt.translatePosMatrix(zn.expandedProjMatrix,Un,pt.paint.get("fill-extrusion-translate"),pt.paint.get("fill-extrusion-translate-anchor")),Do=Zt.projection.createInversionMatrix(Zt,zn.canonical);rs=er?Qv(Oo,xt,Vo,rr,cr,Er,Wr,ss,zn,Un,_r,Tr,Ar,Do,Fr,Yr):hu(Oo,xt,Vo,rr,cr,Er,Wr,ss,zn,_r,Tr,Ar,Do,Fr,Yr,zr,Ur,nn)}xt.uploadCommonUniforms(Vt,fo,zn.toUnwrapped(),null,Ir);let Uo=Qn.segments;if(Zt.projection.name==="mercator"&&!_n&&(Uo=Qn.getVisibleSegments(Un.tileID,xt.terrain,xt.transform.getFrustum(0)),!Uo.get().length))continue;if(Sn)if(_n)for(const Oo of Uo.get())Sn.numRenderedVerticesInShadowPass+=Oo.primitiveLength;else for(const Oo of Uo.get())Sn.numRenderedVerticesInTransparentPass+=Oo.primitiveLength;const ts=[];(xt.terrain||Ft)&&ts.push(Qn.centroidVertexBuffer),$r&&ts.push(Qn.layoutVertexExtBuffer),Vr&&ts.push(Qn.wallVertexBuffer),fo.draw(xt,Vt.gl.TRIANGLES,Tt,Pt,Ot,at.ag.backCCW,rs,pt.id,Qn.layoutVertexBuffer,Qn.indexBuffer,Uo,pt.paint,xt.transform.zoom,So,ts)}xt.shadowRenderer&&(xt.shadowRenderer.useNormalOffset=!1)}function Kp(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur,br){const Er=xt.context,_r=Er.gl,$r=xt.transform,Tr=xt.transform.zoom,Ar=[],Fr=Rl(xt,pt.paint.get("fill-extrusion-cutoff-fade-range"));Gt==="clear"?(Ar.push("CLEAR_SUBPASS"),br&&(Ar.push("CLEAR_FROM_TEXTURE"),Er.activeTexture.set(_r.TEXTURE0),br.bind(_r.LINEAR,_r.CLAMP_TO_EDGE))):Gt==="sdf"&&Ar.push("SDF_SUBPASS"),cr&&Ar.push("HAS_CENTROID"),Fr.shouldRenderCutoff&&Ar.push("RENDER_CUTOFF");const zr=pt.layout.get("fill-extrusion-edge-radius"),Yr=(Vr,Ir,nn,en,Wr)=>{const Tn=Ir.programConfigurations.get(pt.id),_n=xt.isTileAffectedByFog(Vr),Xr=xt.getOrCreateProgram("fillExtrusionGroundEffect",{config:Tn,defines:Ar,overrideFog:_n}),hn=((bn,Sn,zn,Un,Qn,Wn,uo,So,fo,ko,Vo)=>({u_matrix:Sn,u_opacity:zn,u_ao_pass:Un?1:0,u_meter_to_tile:Qn,u_ao:Wn,u_flood_light_intensity:uo,u_flood_light_color:So,u_attenuation:fo,u_edge_radius:ko,u_fb:0,u_fb_size:Vo}))(0,en,Zt,Vt,Wr,[Yt,er*Wr],rr,sr,lr,Tr>=17?0:zr*Wr,br?br.size[0]:0),Ur=[];cr&&Ur.push(Ir.hiddenByLandmarkVertexBuffer),xt.uploadCommonUniforms(Er,Xr,Vr.toUnwrapped(),null,Fr),Xr.draw(xt,Er.gl.TRIANGLES,Tt,Pt,Ot,Ft,hn,pt.id,Ir.vertexBuffer,Ir.indexBuffer,nn,pt.paint,Tr,Tn,Ur)};for(const Vr of vt){const Ir=ct.getTile(Vr),nn=Ir.getBucket(pt);if(!nn||nn.projection.name!==$r.projection.name||!nn.groundEffect||nn.groundEffect&&!nn.groundEffect.hasData())continue;const en=nn.groundEffect,Wr=1/nn.tileToMeter;{const Tn=xt.translatePosMatrix(Vr.projMatrix,Ir,pt.paint.get("fill-extrusion-translate"),pt.paint.get("fill-extrusion-translate-anchor")),_n=en.getDefaultSegment();Yr(Vr,en,_n,Tn,Wr)}if(ur)for(let Tn=0;Tn<4;Tn++){const _n=at.b$[Tn](Vr),Xr=ct.getTile(_n);if(!Xr)continue;const hn=Xr.getBucket(pt);if(!hn||hn.projection.name!==$r.projection.name||!hn.groundEffect||hn.groundEffect&&!hn.groundEffect.hasData())continue;const Ur=hn.groundEffect;let bn,Sn;Tn===0?(bn=[-at.a4,0,0],Sn=1):Tn===1?(bn=[at.a4,0,0],Sn=0):Tn===2?(bn=[0,-at.a4,0],Sn=3):(bn=[0,at.a4,0],Sn=2);const zn=Ur.regionSegments[Sn];if(!zn)continue;const Un=new Float32Array(16);at.ae.translate(Un,Vr.projMatrix,bn),Yr(Vr,Ur,zn,xt.translatePosMatrix(Un,Ir,pt.paint.get("fill-extrusion-translate"),pt.paint.get("fill-extrusion-translate-anchor")),Wr)}}}function J1(xt,ct,pt,vt,Tt,Pt,Ot){vt.centroidVertexArray.length===0&&vt.createCentroidsBuffer();const Ft=Pt?Pt.findDEMTileFor(pt):null;if(!(Ft&&Ft.dem||Ot))return;const Vt=ur=>new at.P(Math.ceil((ur+at.c2)*at.c3),0),Gt=ur=>{const br=ct.getSource().minzoom,Er=$r=>{const Tr=ct.getTileByID($r);if(Tr&&Tr.hasData())return Tr.getBucket(Tt)},_r=[0,-1,1];for(const $r of _r){if(ur.overscaledZ+$r<br)continue;const Tr=Er(ur.calculateScaledKey(ur.overscaledZ+$r));if(Tr)return Tr}},Zt=[0,0,0],Yt=(ur,br)=>(Zt[0]=Math.min(ur.min.y,br.min.y),Zt[1]=Math.max(ur.max.y,br.max.y),Zt[2]=at.a4-br.min.x>ur.max.x?br.min.x-at.a4:ur.max.x,Zt),er=(ur,br)=>(Zt[0]=Math.min(ur.min.x,br.min.x),Zt[1]=Math.max(ur.max.x,br.max.x),Zt[2]=at.a4-br.min.y>ur.max.y?br.min.y-at.a4:ur.max.y,Zt),rr=[(ur,br)=>Yt(ur,br),(ur,br)=>Yt(br,ur),(ur,br)=>er(ur,br),(ur,br)=>er(br,ur)],sr=(ur,br,Er,_r,$r,Tr,Ar)=>{if(!Pt)return 0;const Fr=[[Tr?Er:ur,Tr?ur:Er,0],[Tr?Er:br,Tr?br:Er,0]],zr=Ar<0?at.a4+Ar:Ar,Yr=[Tr?zr:(ur+br)/2,Tr?(ur+br)/2:zr,0];return Er===0&&Ar<0||Er!==0&&Ar>0?Pt.getForTilePoints($r,[Yr],!0,_r):Fr.push(Yr),Pt.getForTilePoints(pt,Fr,!0,Ft),Math.max(Fr[0][2],Fr[1][2],Yr[2])/Pt.exaggeration()};for(let ur=0;ur<4;ur++){const br=vt.borderFeatureIndices[ur];if(br.length===0)continue;const Er=at.b$[ur](pt),_r=Gt(Er);if(!(_r&&_r instanceof at.c0)||vt.borderDoneWithNeighborZ[ur]===_r.canonical.z)continue;_r.centroidVertexArray.length===0&&_r.createCentroidsBuffer();const $r=Pt?Pt.findDEMTileFor(Er):null;if(!($r&&$r.dem||Ot))continue;const Tr=(ur<2?1:5)-ur,Ar=_r.borderDoneWithNeighborZ[Tr]!==vt.canonical.z,Fr=_r.borderFeatureIndices[Tr];let zr=0;if(vt.canonical.z!==_r.canonical.z){for(const Yr of br)vt.showCentroid(vt.featuresOnBorder[Yr]);if(Ar)for(const Yr of Fr)_r.showCentroid(_r.featuresOnBorder[Yr]);vt.borderDoneWithNeighborZ[ur]=_r.canonical.z,_r.borderDoneWithNeighborZ[Tr]=vt.canonical.z}for(const Yr of br){const Vr=vt.featuresOnBorder[Yr],Ir=vt.centroidData[Vr.centroidDataIndex],nn=Vr.borders[ur];let en;for(;zr<Fr.length;){en=_r.featuresOnBorder[Fr[zr]];const Wr=en.borders[Tr];if(Wr[1]>nn[0]+3||Wr[0]>nn[0]-3)break;_r.showCentroid(en),zr++}if(en&&zr<Fr.length){const Wr=zr;let Tn=0;for(;!(en.borders[Tr][0]>nn[1]-3)&&(Tn++,++zr!==Fr.length);)en=_r.featuresOnBorder[Fr[zr]];if(en=_r.featuresOnBorder[Fr[Wr]],Tn>1){const hn=en.borders[Tr];Math.abs(nn[0]-hn[0])<3&&Math.abs(nn[1]-hn[1])<3&&(Tn=1,zr=Wr+1)}else if(Tn===0){vt.showCentroid(Vr);continue}const _n=_r.centroidData[en.centroidDataIndex];Ot&&Tn===1&&(((lr=Ir).flags|(cr=_n).flags)&at.c1?(lr.flags|=at.c1,cr.flags|=at.c1):(lr.flags&=~at.c1,cr.flags&=~at.c1));const Xr=Vr.intersectsCount()>1||en.intersectsCount()>1;if(Tn>1)zr=Wr,Ir.centroidXY=_n.centroidXY=new at.P(0,0);else if($r&&$r.dem&&!Xr){const hn=rr[ur](Ir,_n),Ur=ur%2?at.a4-1:0,bn=sr(hn[0],Math.min(at.a4-1,hn[1]),Ur,$r,Er,ur<2,hn[2]);Ir.centroidXY=_n.centroidXY=Vt(bn)}else Xr?Ir.centroidXY=_n.centroidXY=new at.P(0,0):(Ir.centroidXY=vt.encodeBorderCentroid(Vr),_n.centroidXY=_r.encodeBorderCentroid(en));vt.writeCentroidToBuffer(Ir),_r.writeCentroidToBuffer(_n)}else vt.showCentroid(Vr)}vt.borderDoneWithNeighborZ[ur]=_r.canonical.z,_r.borderDoneWithNeighborZ[Tr]=vt.canonical.z}var lr,cr;(vt.needsCentroidUpdate||!vt.centroidVertexBuffer&&vt.centroidVertexArray.length!==0)&&vt.uploadCentroid(xt)}const l_=[1,0,0],Q1=[0,1,0],Jy=[0,0,1];function pu(xt,ct,pt){const vt=pt.transform,Tt=pt.shadowRenderer;if(!Tt)return!0;const Pt=xt.toUnwrapped(),Ot=vt.tileSize*Tt._cascades[pt.currentShadowCascade].scale;let Ft=ct.maxHeight;if(vt.elevation){const lr=vt.elevation.getMinMaxForTile(xt);lr&&(Ft+=lr.max)}const Vt=[...Tt.shadowDirection];Vt[2]=-Vt[2];const Gt=Tt.computeSimplifiedTileShadowVolume(Pt,Ft,Ot,Vt);if(!Gt)return!1;const Zt=[l_,Q1,Jy,Vt,[Vt[0],0,Vt[2]],[0,Vt[1],Vt[2]]],Yt=vt.projection.name==="globe",er=vt.scaleZoom(Ot),rr=at.aM.fromInvProjectionMatrix(vt.invProjMatrix,vt.worldSize,er,!Yt),sr=Tt.getCurrentCascadeFrustum();return rr.intersectsPrecise(Gt.vertices,Gt.planes,Zt)===0||sr.intersectsPrecise(Gt.vertices,Gt.planes,Zt)===0}function Xm(xt){return[xt[0]*at.c4,xt[1]*at.c4,xt[2]*at.c4,0]}function Qy(xt,ct,pt,vt,Tt,Pt,Ot,Ft,Vt){const Gt=vt.getSource(),Zt=pt.globeSharedBuffers;if(!Zt)return;let Yt,er,rr;if(ct&&(Yt=vt.getTile(ct)),Gt instanceof at.bo?(er=Gt.texture,rr=at.bj(0,0,pt.transform)):Yt&&ct&&(er=Yt.texture,rr=at.bj(ct.canonical.z,ct.canonical.x,pt.transform)),!er||!rr)return;xt||(rr=at.ae.scale(at.ae.create(),rr,[1,-1,1]));const sr=pt.context,lr=sr.gl,cr=Tt.paint.get("raster-resampling")==="nearest"?lr.NEAREST:lr.LINEAR,ur=pt.colorModeForDrapableLayerRenderPass(Pt),br=Ot.defines;br.push("GLOBE_POLES");const Er=new at.af(lr.LEQUAL,at.af.ReadWrite,pt.depthRangeFor3D),_r=Float32Array.from(pt.transform.expandedFarZProjMatrix),$r=Float32Array.from(at.bh(at.bi(new at.aO(0,0,0))));pt.terrain&&pt.terrain.prepareDrawTile(),sr.activeTexture.set(lr.TEXTURE0),er.bind(cr,lr.CLAMP_TO_EDGE),sr.activeTexture.set(lr.TEXTURE1),er.bind(cr,lr.CLAMP_TO_EDGE),er.useMipmap&&sr.extTextureFilterAnisotropic&&pt.transform.pitch>20&&lr.texParameterf(lr.TEXTURE_2D,sr.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,sr.extTextureFilterAnisotropicMax);const[Tr,Ar,Fr,zr]=ct?Zt.getPoleBuffers(ct.canonical.z,!1):Zt.getPoleBuffers(0,!0),Yr=Tt.paint.get("raster-elevation");let Vr;xt?(Vr=Tr,pt.renderDefaultNorthPole=Yr!==0):(Vr=Ar,pt.renderDefaultSouthPole=Yr!==0);const Ir=Xm(Ot.mix),nn=((Wr,Tn,_n,Xr,hn,Ur,bn,Sn,zn,Un,Qn,Wn,uo)=>Xy(Wr,Tn,_n,new Float32Array(16),new Float32Array(9),[0,0],Xr,[0,0],[0,0,0,0],1,{opacity:1,mix:0},Ur,[0,0],Sn,2,Un,Qn,Wn,1,0,uo))(_r,$r,rr,at.a2(pt.transform.zoom),0,Tt,0,Yr,0,Ir,Ot.offset,Ot.range,Pt),en=pt.getOrCreateProgram("raster",{defines:br});pt.uploadCommonUniforms(sr,en,null),en.draw(pt,lr.TRIANGLES,Er,Vt,ur,Ft,nn,Tt.id,Vr,Fr,zr)}function Ax(xt){const ct=xt._nearZ,pt=xt.projection.farthestPixelDistance(xt),vt=pt-ct,Tt=.2*xt.height,Pt=ct+Tt;return[ct,pt,(Pt-Tt-ct)/vt,(Pt-ct)/vt]}function xp(xt,ct,pt,vt){if(xt)return ct instanceof Yu&&xt instanceof at.c5?ct.getTextureDescriptor(xt,pt,!0):{texture:xt.texture,mix:Xm(vt.mix),offset:vt.offset,buffer:0,tileSize:1}}function c_(xt,ct,pt){if(!xt)return null;const vt=ct.getTextureDescriptor(xt,pt,!0);if(!vt)return null;let{texture:Tt,mix:Pt,offset:Ot,tileSize:Ft,buffer:Vt,format:Gt}=vt;if(!Tt||!Gt)return null;let Zt=!1;return Gt==="uint32"&&(Zt=!0,Pt[3]=0,Pt=vx(at.c6,Pt,[0,pt.paint.get("raster-particle-max-speed")]),Ot=Wm(at.c6,Ot,[0,pt.paint.get("raster-particle-max-speed")])),{texture:Tt,textureOffset:[Vt/(Ft+2*Vt),Ft/(Ft+2*Vt)],tileSize:Ft,scalarData:Zt,scale:Pt,offset:Ot,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[Gt]]}}function e0(xt){const ct=xt._nearZ,pt=xt.projection.farthestPixelDistance(xt),vt=pt-ct,Tt=.2*xt.height,Pt=ct+Tt;return[ct,pt,(Pt-Tt-ct)/vt,(Pt-ct)/vt]}const Px=new at.C(1,0,0,1),r0=new at.C(0,1,0,1),Cx=new at.C(0,0,1,1),ga=new at.C(1,0,1,1),_b=new at.C(0,1,1,1);function ho(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=xt.context,Vt=xt.transform,Gt=Ft.gl,Zt=Vt.projection.name==="globe",Yt=Zt?["PROJECTION_GLOBE_VIEW"]:[];let er=at.ae.clone(pt.projMatrix);if(Zt&&at.a2(Vt.zoom)>0){const Ir=at.c7(pt.canonical,Vt),nn=at.c8(Ir);er=at.ae.multiply(new Float32Array(16),Vt.globeMatrix,nn),at.ae.multiply(er,Vt.projMatrix,er)}const rr=at.ae.create();rr[12]+=2*Tt/(at.e.devicePixelRatio*Vt.width),rr[13]+=2*Pt/(at.e.devicePixelRatio*Vt.height),at.ae.multiply(er,rr,er);const sr=xt.getOrCreateProgram("debug",{defines:Yt}),lr=ct.getTileByID(pt.key);xt.terrain&&xt.terrain.setupElevationDraw(lr,sr);const cr=at.af.disabled,ur=at.ah.disabled,br=xt.colorModeForRenderPass(),Er="$debug";Ft.activeTexture.set(Gt.TEXTURE0),xt.emptyTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Zt?lr._makeGlobeTileDebugBuffers(xt.context,Vt):lr._makeDebugTileBoundsBuffers(xt.context,Vt.projection);const _r=lr._tileDebugBuffer||xt.debugBuffer,$r=lr._tileDebugIndexBuffer||xt.debugIndexBuffer,Tr=lr._tileDebugSegments||xt.debugSegments;if(sr.draw(xt,Gt.LINE_STRIP,cr,ur,br,at.ag.disabled,Yy(er,vt),Er,_r,$r,Tr,null,null,null,[lr._globeTileDebugBorderBuffer]),Ot){const Ir=lr.latestRawTileData,nn=Math.floor((Ir&&Ir.byteLength||0)/1024);let en=pt.canonical.toString();pt.overscaledZ!==pt.canonical.z&&(en+=` => ${pt.overscaledZ}`),en+=` ${lr.state}`,en+=` ${nn}kb`,function(Wr,Tn){Wr.initDebugOverlayCanvas();const _n=Wr.debugOverlayCanvas,Xr=Wr.context.gl,hn=Wr.debugOverlayCanvas.getContext("2d");hn.clearRect(0,0,_n.width,_n.height),hn.shadowColor="white",hn.shadowBlur=2,hn.lineWidth=1.5,hn.strokeStyle="white",hn.textBaseline="top",hn.font="bold 36px Open Sans, sans-serif",hn.fillText(Tn,5,5),hn.strokeText(Tn,5,5),Wr.debugOverlayTexture.update(_n),Wr.debugOverlayTexture.bind(Xr.LINEAR,Xr.CLAMP_TO_EDGE)}(xt,en)}const Ar=ct.getTile(pt).tileSize,Fr=512/Math.min(Ar,512)*(pt.overscaledZ/Vt.zoom)*.5,zr=lr._tileDebugTextBuffer||xt.debugBuffer,Yr=lr._tileDebugTextIndexBuffer||xt.quadTriangleIndexBuffer,Vr=lr._tileDebugTextSegments||xt.debugSegments;sr.draw(xt,Gt.TRIANGLES,cr,ur,at.a.alphaBlended,at.ag.disabled,Yy(er,at.C.transparent,Fr),Er,zr,Yr,Vr,null,null,null,[lr._globeTileDebugTextBuffer])}function Rx(xt,ct,pt,vt){Yp(xt,0,ct+pt/2,xt.transform.width,pt,vt)}function Jm(xt,ct,pt,vt){Yp(xt,ct-pt/2,0,pt,xt.transform.height,vt)}function Yp(xt,ct,pt,vt,Tt,Pt){const Ot=xt.context,Ft=Ot.gl;Ft.enable(Ft.SCISSOR_TEST),Ft.scissor(ct*at.e.devicePixelRatio,pt*at.e.devicePixelRatio,vt*at.e.devicePixelRatio,Tt*at.e.devicePixelRatio),Ot.clear({color:Pt}),Ft.disable(Ft.SCISSOR_TEST)}const mu=at.c9([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ix}=mu;function Nl(xt,ct,pt,vt){xt.emplaceBack(ct,pt,vt)}class Jn{constructor(ct){this.vertexArray=new at.ca,this.indices=new at.bw,Nl(this.vertexArray,-1,-1,1),Nl(this.vertexArray,1,-1,1),Nl(this.vertexArray,-1,1,1),Nl(this.vertexArray,1,1,1),Nl(this.vertexArray,-1,-1,-1),Nl(this.vertexArray,1,-1,-1),Nl(this.vertexArray,-1,1,-1),Nl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=ct.createVertexBuffer(this.vertexArray,Ix),this.indexBuffer=ct.createIndexBuffer(this.indices),this.segment=at.b.simpleSegment(0,0,36,12)}}function Zo(xt,ct,pt,vt,Tt,Pt){const Ot=xt.context.gl,Ft=ct.paint.get("sky-atmosphere-color"),Vt=ct.paint.get("sky-atmosphere-halo-color"),Gt=ct.paint.get("sky-atmosphere-sun-intensity"),Zt=((Yt,er,rr,sr,lr)=>({u_matrix_3f:Yt,u_sun_direction:er,u_sun_intensity:rr,u_color_tint_r:[sr.r,sr.g,sr.b,sr.a],u_color_tint_m:[lr.r,lr.g,lr.b,lr.a],u_luminance:5e-5}))(at.bE.fromMat4(at.bE.create(),vt),Tt,Gt,Ft,Vt);Ot.framebufferTexture2D(Ot.FRAMEBUFFER,Ot.COLOR_ATTACHMENT0,Ot.TEXTURE_CUBE_MAP_POSITIVE_X+Pt,ct.skyboxTexture,0),pt.draw(xt,Ot.TRIANGLES,at.af.disabled,at.ah.disabled,at.a.unblended,at.ag.frontCW,Zt,"skyboxCapture",ct.skyboxGeometry.vertexBuffer,ct.skyboxGeometry.indexBuffer,ct.skyboxGeometry.segment)}const _a=at.c9([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ql{constructor(ct){const pt=new at.cb;pt.emplaceBack(-1,1,1,0,0),pt.emplaceBack(1,1,1,1,0),pt.emplaceBack(1,-1,1,1,1),pt.emplaceBack(-1,-1,1,0,1);const vt=new at.bw;vt.emplaceBack(0,1,2),vt.emplaceBack(2,3,0),this.vertexBuffer=ct.createVertexBuffer(pt,_a.members),this.indexBuffer=ct.createIndexBuffer(vt),this.segments=at.b.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Xp=at.c9([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Qo{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class n0{constructor(ct){this.colorModeAlphaBlendedWriteRGB=new at.a([at.cc,at.cd,at.cc,at.cd],at.C.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new at.a([at.cc,at.ce,at.cc,at.ce],at.C.transparent,[!1,!1,!1,!0]),this.params=new Qo,this.updateNeeded=!0,ct.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),ct.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),ct.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),ct.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(ct){const pt=ct.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Ql(pt);const vt=this.params.sizeRange,Tt=this.params.intensityRange,Pt=function(Zt){const Yt=at.ch(30),er=[];for(let rr=0;rr<Zt;++rr){const sr=2*Math.PI*Yt(),lr=Math.acos(1-2*Yt())-.5*Math.PI;er.push(at.$.fromValues(Math.cos(lr)*Math.cos(sr),Math.cos(lr)*Math.sin(sr),Math.sin(lr)))}return er}(this.params.starsCount),Ot=at.ch(300),Ft=new at.cf,Vt=new at.bw;let Gt=0;for(let Zt=0;Zt<Pt.length;++Zt){const Yt=at.$.scale([],Pt[Zt],200),er=Math.max(0,1+.01*vt*(1*Ot()-.5)),rr=Math.max(0,1+.01*Tt*(1*Ot()-.5));Ft.emplaceBack(Yt[0],Yt[1],Yt[2],-1,-1,er,rr),Ft.emplaceBack(Yt[0],Yt[1],Yt[2],1,-1,er,rr),Ft.emplaceBack(Yt[0],Yt[1],Yt[2],1,1,er,rr),Ft.emplaceBack(Yt[0],Yt[1],Yt[2],-1,1,er,rr),Vt.emplaceBack(Gt+0,Gt+1,Gt+2),Vt.emplaceBack(Gt+0,Gt+2,Gt+3),Gt+=4}this.starsVx=pt.createVertexBuffer(Ft,Xp.members),this.starsIdx=pt.createIndexBuffer(Vt),this.starsSegments=at.b.simpleSegment(0,0,Ft.length,Vt.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(ct,pt){const vt=ct.context,Tt=vt.gl,Pt=ct.transform,Ot=new at.af(Tt.LEQUAL,at.af.ReadOnly,[0,1]),Ft=at.a2(Pt.zoom),Vt=ct.style.getLut(pt.scope),Gt=pt.properties.get("color").toRenderColor(Vt).toArray01(),Zt=pt.properties.get("high-color").toRenderColor(Vt).toArray01(),Yt=pt.properties.get("space-color").toRenderColor(Vt).toArray01PremultipliedAlpha(),er=5e-4,rr=at.cg(pt.properties.get("horizon-blend"),0,1,er,.25),sr=at.bc(ct,vt,Pt)&&rr===er?Pt.worldSize/(2*Math.PI*1.025)-1:Pt.globeRadius,lr=ct.frameCounter/1e3%1,cr=at.$.length(Pt.globeCenterInViewSpace),ur=Math.sqrt(Math.pow(cr,2)-Math.pow(sr,2)),br=Math.acos(ur/cr),Er=_r=>{const $r=Pt.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];_r&&$r.push("ALPHA_PASS");const Tr=ct.getOrCreateProgram("globeAtmosphere",{defines:$r}),Ar=((zr,Yr,Vr,Ir,nn,en,Wr,Tn,_n,Xr,hn,Ur)=>({u_frustum_tl:zr,u_frustum_tr:Yr,u_frustum_br:Vr,u_frustum_bl:Ir,u_horizon:nn,u_transition:en,u_fadeout_range:Wr,u_color:Tn,u_high_color:_n,u_space_color:Xr,u_temporal_offset:hn,u_horizon_angle:Ur}))(Pt.frustumCorners.TL,Pt.frustumCorners.TR,Pt.frustumCorners.BR,Pt.frustumCorners.BL,Pt.frustumCorners.horizon,Ft,rr,Gt,Zt,Yt,lr,br);ct.uploadCommonUniforms(vt,Tr);const Fr=this.atmosphereBuffer;Fr&&Tr.draw(ct,Tt.TRIANGLES,Ot,at.ah.disabled,_r?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,at.ag.backCW,Ar,_r?"atmosphere_glow_alpha":"atmosphere_glow",Fr.vertexBuffer,Fr.indexBuffer,Fr.segments)};Er(!1),Er(!0)}drawStars(ct,pt){const vt=at.au(pt.properties.get("star-intensity"),0,1);if(vt===0)return;const Tt=ct.context,Pt=Tt.gl,Ot=ct.transform,Ft=ct.getOrCreateProgram("stars"),Vt=at.aw.identity([]);at.aw.rotateX(Vt,Vt,-Ot._pitch),at.aw.rotateZ(Vt,Vt,-Ot.angle),at.aw.rotateX(Vt,Vt,at.ac(Ot._center.lat)),at.aw.rotateY(Vt,Vt,-at.ac(Ot._center.lng));const Gt=at.ae.fromQuat(new Float32Array(16),Vt),Zt=at.ae.multiply([],Ot.starsProjMatrix,Gt),Yt=at.bE.fromMat4([],Gt),er=at.bE.invert([],Yt),rr=[0,1,0];at.$.transformMat3(rr,rr,er),at.$.scale(rr,rr,this.params.sizeMultiplier);const sr=[1,0,0];at.$.transformMat3(sr,sr,er),at.$.scale(sr,sr,this.params.sizeMultiplier);const lr=(cr=rr,ur=sr,br=vt,{u_matrix:Float32Array.from(Zt),u_up:cr,u_right:ur,u_intensity_multiplier:br});var cr,ur,br;ct.uploadCommonUniforms(Tt,Ft),this.starsVx&&this.starsIdx&&Ft.draw(ct,Pt.TRIANGLES,at.af.disabled,at.ah.disabled,this.colorModeAlphaBlendedWriteRGB,at.ag.disabled,lr,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Jp(xt,ct){const pt=[...xt],vt=ct.cameraWorldSizeForFog/ct.worldSize,Tt=at.ae.identity([]);return at.ae.scale(Tt,Tt,[vt,vt,1]),at.ae.multiply(pt,Tt,pt),at.ae.multiply(pt,ct.worldToFogMatrix,pt),pt}function vp(xt,ct,pt,vt,Tt){const Pt=pt.material,Ot=vt.context,{baseColorTexture:Ft,metallicRoughnessTexture:Vt}=Pt.pbrMetallicRoughness,{normalTexture:Gt,occlusionTexture:Zt,emissionTexture:Yt}=Pt;function er(rr,sr,lr){if(rr&&(xt.push(sr),Ot.activeTexture.set(Ot.gl.TEXTURE0+lr),rr.gfxTexture)){const{minFilter:cr,magFilter:ur,wrapS:br,wrapT:Er}=rr.sampler;rr.gfxTexture.bindExtraParam(cr,ur,br,Er)}}er(Ft,"HAS_TEXTURE_u_baseColorTexture",qs.BaseColor),er(Vt,"HAS_TEXTURE_u_metallicRoughnessTexture",qs.MetallicRoughness),er(Gt,"HAS_TEXTURE_u_normalTexture",qs.Normal),er(Zt,"HAS_TEXTURE_u_occlusionTexture",qs.Occlusion),er(Yt,"HAS_TEXTURE_u_emissionTexture",qs.Emission),Tt&&(Tt.texture||(Tt.texture=new at.cj(vt.context,Tt.image,[Tt.image.height,Tt.image.height,Tt.image.height],Ot.gl.RGBA)),Ot.activeTexture.set(Ot.gl.TEXTURE0+qs.LUT),Tt.texture&&Tt.texture.bind(Ot.gl.LINEAR,Ot.gl.CLAMP_TO_EDGE),xt.push("APPLY_LUT_ON_GPU")),pt.texcoordBuffer&&(xt.push("HAS_ATTRIBUTE_a_uv_2f"),ct.push(pt.texcoordBuffer)),pt.colorBuffer&&(xt.push(pt.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),ct.push(pt.colorBuffer)),pt.normalBuffer&&(xt.push("HAS_ATTRIBUTE_a_normal_3f"),ct.push(pt.normalBuffer)),pt.pbrBuffer&&(xt.push("HAS_ATTRIBUTE_a_pbr"),xt.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),ct.push(pt.pbrBuffer)),Pt.alphaMode!=="OPAQUE"&&Pt.alphaMode!=="MASK"||xt.push("UNPREMULT_TEXTURE_IN_SHADER"),Pt.defined||xt.push("DIFFUSE_SHADED"),xt.push("USE_STANDARD_DERIVATIVES")}function Xs(xt,ct,pt,vt,Tt,Pt){const Ot=pt.paint.get("model-opacity"),Ft=ct.context,Vt=new at.af(ct.context.gl.LEQUAL,at.af.ReadWrite,ct.depthRangeFor3D),Gt=ct.transform,Zt=xt.mesh,Yt=Zt.material,er=Yt.pbrMetallicRoughness,rr=ct.style.fog;let sr;sr=ct.transform.projection.zAxisUnit==="pixels"?[...xt.nodeModelMatrix]:at.ae.multiply([],vt.zScaleMatrix,xt.nodeModelMatrix),at.ae.multiply(sr,vt.negCameraPosMatrix,sr);const lr=at.ae.invert([],sr);at.ae.transpose(lr,lr);const cr=pt.paint.get("model-emissive-strength").constantOr(0),ur=mp(new Float32Array(xt.worldViewProjection),new Float32Array(sr),new Float32Array(lr),null,ct,Ot,er.baseColorFactor.toRenderColor(null),Yt.emissiveFactor,er.metallicFactor,er.roughnessFactor,Yt,cr,pt),br={defines:[]},Er=[];vp(br.defines,Er,Zt,ct,pt.lut);const _r=ct.shadowRenderer;_r&&(_r.useNormalOffset=!1);let $r=null;if(rr){const Fr=Jp(xt.nodeModelMatrix,ct.transform);if($r=new Float32Array(Fr),Gt.projection.name!=="globe"){const zr=Zt.aabb.min,Yr=Zt.aabb.max,[Vr,Ir]=rr.getOpacityForBounds(Fr,zr[0],zr[1],Yr[0],Yr[1]);br.overrideFog=Vr>=Jo||Ir>=Jo}}const Tr=Rl(ct,pt.paint.get("model-cutoff-fade-range"));Tr.shouldRenderCutoff&&br.defines.push("RENDER_CUTOFF");const Ar=ct.getOrCreateProgram("model",br);ct.uploadCommonUniforms(Ft,Ar,null,$r,Tr),ct.renderPass!=="shadow"&&_r&&_r.setupShadowsFromMatrix(xt.nodeModelMatrix,Ar),Ar.draw(ct,Ft.gl.TRIANGLES,Vt,Tt,Pt,Zt.material.doubleSided?at.ag.disabled:at.ag.backCCW,ur,pt.id,Zt.vertexBuffer,Zt.indexBuffer,Zt.segments,pt.paint,ct.transform.zoom,void 0,Er)}function xs(xt,ct,pt,vt,Tt,Pt,Ot){let Ft;Ft=xt.projection.name==="globe"?at.ck(pt,xt):[...pt],at.ae.multiply(Ft,Ft,ct.matrix);const Vt=at.ae.multiply([],vt,Ft);if(ct.meshes)for(const Gt of ct.meshes){if(Gt.material.alphaMode!=="BLEND"){Ot.push({mesh:Gt,depth:0,modelIndex:Tt,worldViewProjection:Vt,nodeModelMatrix:Ft});continue}const Zt=at.$.transformMat4([],Gt.centroid,Vt);Zt[2]>0&&Pt.push({mesh:Gt,depth:Zt[2],modelIndex:Tt,worldViewProjection:Vt,nodeModelMatrix:Ft})}if(ct.children)for(const Gt of ct.children)xs(xt,Gt,pt,vt,Tt,Pt,Ot)}function $x(xt,ct,pt,vt){const Tt=pt.shadowRenderer;if(!Tt)return;const Pt=Tt.getShadowPassDepthMode(),Ot=Tt.getShadowPassColorMode(),Ft=Tt.calculateShadowPassMatrixFromMatrix(ct),Vt=Ex(Ft);pt.getOrCreateProgram("modelDepth",{defines:pt._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(pt,pt.context.gl.TRIANGLES,Pt,at.ah.disabled,Ot,at.ag.backCCW,Vt,vt.id,xt.vertexBuffer,xt.indexBuffer,xt.segments,vt.paint,pt.transform.zoom,void 0,void 0)}function Qm(xt,ct,pt){const vt=ct.updateZoomBasedPaintProperties(),Tt=function(Pt,Ot,Ft){let Vt,Gt,Zt,Yt=Pt.terrain?Pt.terrain.exaggeration():0;if(Pt.terrain&&Yt>0){const er=Pt.terrain,rr=er.findDEMTileFor(Ft);rr&&rr.dem?Vt=at.cm.create(er,Ft,rr):Yt=0}if(Yt===0&&(Ot.terrainElevationMin=0,Ot.terrainElevationMax=0),Yt===Ot.validForExaggeration&&(Yt===0||Vt&&Vt._demTile&&Vt._demTile.tileID===Ot.validForDEMTile.id&&Vt._dem._timestamp===Ot.validForDEMTile.timestamp))return!1;for(const er in Ot.instancesPerModel){const rr=Ot.instancesPerModel[er];for(let sr=0;sr<rr.instancedDataArray.length;++sr){const lr=(Vt?Yt*Vt.getElevationAt(0|rr.instancedDataArray.float32[16*sr],0|rr.instancedDataArray.float32[16*sr+1],!0,!0):0)+rr.instancesEvaluatedElevation[sr];rr.instancedDataArray.float32[16*sr+6]=lr,Gt=Gt?Math.min(Ot.terrainElevationMin,lr):lr,Zt=Zt?Math.max(Ot.terrainElevationMax,lr):lr}}return Ot.terrainElevationMin=Gt||0,Ot.terrainElevationMax=Zt||0,Ot.validForExaggeration=Yt,Ot.validForDEMTile=Vt&&Vt._demTile?{id:Vt._demTile.tileID,timestamp:Vt._dem._timestamp}:{id:void 0,timestamp:0},!0}(xt,ct,pt);(vt||Tt)&&(ct.uploaded=!1,ct.upload(xt.context))}const _c={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new at.b8([0,0,0],[at.a4,at.a4,0])};function _g(xt,ct){const pt=1<<xt.canonical.z,vt=ct.getFreeCameraOptions().position,Tt=ct.elevation,Pt=xt.canonical.x/pt,Ot=(xt.canonical.x+1)/pt,Ft=xt.canonical.y/pt,Vt=(xt.canonical.y+1)/pt;let Gt=ct._centerAltitude;if(Tt){const rr=Tt.getMinMaxForTile(xt);rr&&rr.max>Gt&&(Gt=rr.max)}const Zt=at.au(vt.x,Pt,Ot)-vt.x,Yt=at.au(vt.y,Ft,Vt)-vt.y,er=at.ay(Gt,ct.center.lat)-vt.z;return ct._zoomFromMercatorZ(Math.sqrt(Zt*Zt+Yt*Yt+er*er))}function i0(xt,ct,pt,vt,Tt,Pt,Ot){const Ft=xt.context,Vt=xt.renderPass==="shadow",Gt=xt.shadowRenderer,Zt=Vt&&Gt?Gt.getShadowPassDepthMode():new at.af(Ft.gl.LEQUAL,at.af.ReadWrite,xt.depthRangeFor3D),Yt=xt.isTileAffectedByFog(Pt);if(pt.meshes)for(const er of pt.meshes){const rr=["MODEL_POSITION_ON_GPU"],sr=[];let lr,cr,ur;vt.instancedDataArray.length>20&&rr.push("INSTANCED_ARRAYS");const br=Rl(xt,ct.paint.get("model-cutoff-fade-range"));if(br.shouldRenderCutoff&&rr.push("RENDER_CUTOFF"),Vt&&Gt)lr=xt.getOrCreateProgram("modelDepth",{defines:rr}),cr=Ex(Ot.shadowTileMatrix,Ot.shadowTileMatrix,Float32Array.from(pt.matrix)),ur=Gt.getShadowPassColorMode();else{vp(rr,sr,er,xt,ct.lut),lr=xt.getOrCreateProgram("model",{defines:rr,overrideFog:Yt});const _r=er.material,$r=_r.pbrMetallicRoughness,Tr=ct.paint.get("model-opacity"),Ar=ct.paint.get("model-emissive-strength").constantOr(0);cr=mp(Pt.expandedProjMatrix,Float32Array.from(pt.matrix),new Float32Array(16),null,xt,Tr,$r.baseColorFactor.toRenderColor(null),_r.emissiveFactor,$r.metallicFactor,$r.roughnessFactor,_r,Ar,ct,Tt),Gt&&(Ot.shadowUniformsInitialized?lr.setShadowUniformValues(Ft,Gt.getShadowUniformValues()):(Gt.setupShadows(Pt.toUnwrapped(),lr,"model-tile",Pt.overscaledZ),Ot.shadowUniformsInitialized=!0)),ur=br.shouldRenderCutoff||Tr<1||_r.alphaMode!=="OPAQUE"?at.a.alphaBlended:at.a.unblended}xt.uploadCommonUniforms(Ft,lr,Pt.toUnwrapped(),null,br);const Er=er.material.doubleSided?at.ag.disabled:at.ag.backCCW;if(vt.instancedDataArray.length>20)sr.push(vt.instancedDataBuffer),lr.draw(xt,Ft.gl.TRIANGLES,Zt,at.ah.disabled,ur,Er,cr,ct.id,er.vertexBuffer,er.indexBuffer,er.segments,ct.paint,xt.transform.zoom,void 0,sr,vt.instancedDataArray.length);else{const _r=Vt?"u_instance":"u_normal_matrix";for(let $r=0;$r<vt.instancedDataArray.length;++$r)cr[_r]=new Float32Array(vt.instancedDataArray.arrayBuffer,64*$r,16),lr.draw(xt,Ft.gl.TRIANGLES,Zt,at.ah.disabled,ur,Er,cr,ct.id,er.vertexBuffer,er.indexBuffer,er.segments,ct.paint,xt.transform.zoom,void 0,sr)}}if(pt.children)for(const er of pt.children)i0(xt,ct,er,vt,Tt,Pt,Ot)}const o0=[1,-1,1];function Sl(xt,ct,pt,vt){if(!pt.modelManager)return!0;const Tt=pt.modelManager;if(!pt.shadowRenderer)return!0;const Pt=pt.shadowRenderer,Ot=ct.aabb;let Ft=!0,Vt=xt.maxHeight;if(Vt===0){let Zt=0;for(const Yt in xt.instancesPerModel){const er=Tt.getModel(Yt,vt);er?Zt=Math.max(Zt,Math.max(Math.max(er.aabb.max[0],er.aabb.max[1]),er.aabb.max[2])):Ft=!1}Vt=xt.maxScale*Zt*1.41+xt.maxVerticalOffset,Ft&&(xt.maxHeight=Vt)}Ot.max[2]=Vt,Ot.min[2]+=xt.terrainElevationMin,Ot.max[2]+=xt.terrainElevationMax,at.$.transformMat4(Ot.min,Ot.min,ct.tileMatrix),at.$.transformMat4(Ot.max,Ot.max,ct.tileMatrix);const Gt=Ot.intersects(Pt.getCurrentCascadeFrustum());return pt.currentShadowCascade===0&&(xt.isInsideFirstShadowMapFrustum=Gt===2),Gt===0}function Fl(xt,ct){const pt=xt.uniformValues.u_cutoff_params[0],vt=xt.uniformValues.u_cutoff_params[1],Tt=xt.uniformValues.u_cutoff_params[2],Pt=xt.uniformValues.u_cutoff_params[3];return vt===pt||Pt===Tt?1:at.au(((ct-pt)/(vt-pt)-Tt)/(Pt-Tt),0,1)}function u_(xt,ct,pt,vt){if(ct.pitch<20)return 1;const Tt=ct.getWorldToCameraMatrix(),Pt=at.ae.multiply([],Tt,xt),Ot=[...pt.min,1];let Ft=at.aB.transformMat4([],Ot,Pt),Vt=Ft,Gt=Ft;Ot[1]=pt.max[1],Ft=at.aB.transformMat4([],Ot,Pt),Vt=Ft[1]<Vt[1]?Ft:Vt,Gt=Ft[1]>Gt[1]?Ft:Gt,Ot[0]=pt.max[0],Ft=at.aB.transformMat4([],Ot,Pt),Vt=Ft[1]<Vt[1]?Ft:Vt,Gt=Ft[1]>Gt[1]?Ft:Gt,Ot[1]=pt.min[1],Ft=at.aB.transformMat4([],Ot,Pt),Vt=Ft[1]<Vt[1]?Ft:Vt,Gt=Ft[1]>Gt[1]?Ft:Gt;const Zt=at.au(vt[0],0,1),Yt=100*ct.pixelsPerMeter*at.au(vt[1],0,1),er=at.au(vt[2],0,1),rr=at.$.lerp([],Vt,Gt,Zt),sr=Math.tan(.5*ct.fovX),lr=-rr[2]*sr;if(Yt===0)return rr[1]<-Math.abs(lr)?er:1;const cr=(-Math.abs(lr)-rr[1])/Yt,ur=(Er,_r,$r)=>(1-$r)*Er+$r*_r,br=at.au(ur(1,er,cr),er,1);return ur(1,br,at.au((ct.pitch-20)/20,0,1))}class Qp{}class $s{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(ct,pt,vt){{const Yt=this._storage.get(pt.id);if(Yt)return Yt.lastUsedFrameIdx=ct,Yt.buf}const Tt=vt.gl,Pt=Tt.getBufferParameter(Tt.ELEMENT_ARRAY_BUFFER,Tt.BUFFER_SIZE),Ot=new ArrayBuffer(Pt),Ft=new Int16Array(Ot);Tt.getBufferSubData(Tt.ELEMENT_ARRAY_BUFFER,0,new Int16Array(Ot));const Vt=new at.co;for(let Yt=0;Yt<Pt/2;Yt+=3){const er=Ft[Yt],rr=Ft[Yt+1],sr=Ft[Yt+2];Vt.emplaceBack(er,rr),Vt.emplaceBack(rr,sr),Vt.emplaceBack(sr,er)}const Gt=vt.bindVertexArrayOES.current,Zt=new Qp;return Zt.buf=new at.I(vt,Vt),Zt.lastUsedFrameIdx=ct,this._storage.set(pt.id,Zt),vt.bindVertexArrayOES.set(Gt),Zt.buf}update(ct){for(const[pt,vt]of this._storage)ct-vt.lastUsedFrameIdx>30&&(vt.buf.destroy(),this._storage.delete(pt))}destroy(){for(const[ct,pt]of this._storage)pt.buf.destroy(),this._storage.delete(ct)}}class ou{constructor(ct){this.occluderSize=30,this.depthOffset=-1e-4,ct.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),ct.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const au={symbol:function(xt,ct,pt,vt,Tt){if(xt.renderPass!=="translucent")return;const Pt=at.ah.disabled,Ot=xt.colorModeForRenderPass();pt.layout.get("text-variable-anchor")&&function(Gt,Zt,Yt,er,rr,sr,lr){const cr=Zt.transform,ur=rr==="map",br=sr==="map";for(const Er of Gt){const _r=er.getTile(Er),$r=_r.getBucket(Yt);if(!$r||!$r.text||!$r.text.segments.get().length)continue;const Tr=at.aE($r.textSizeData,cr.zoom),Ar=Sx(Er,$r.getProjection(),cr),Fr=cr.calculatePixelsToTileUnitsMatrix(_r),zr=Om(Ar,_r.tileID.canonical,br,ur,cr,$r.getProjection(),Fr),Yr=$r.hasIconTextFit()&&$r.hasIconData();if(Tr){const Vr=Math.pow(2,cr.zoom-_r.tileID.overscaledZ);X1($r,ur,br,lr,at.bQ,cr,zr,Er,Vr,Tr,Yr)}}}(vt,xt,pt,ct,pt.layout.get("text-rotation-alignment"),pt.layout.get("text-pitch-alignment"),Tt);const Ft=pt.paint.get("icon-opacity").constantOr(1)!==0,Vt=pt.paint.get("text-opacity").constantOr(1)!==0;pt.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(Ft||Vt)?Km(xt,ct,pt,vt,Pt,Ot):(Ft&&Km(xt,ct,pt,vt,Pt,Ot,{onlyIcons:!0}),Vt&&Km(xt,ct,pt,vt,Pt,Ot,{onlyText:!0})),ct.map.showCollisionBoxes&&(o_(xt,ct,pt,vt,pt.paint.get("text-translate"),pt.paint.get("text-translate-anchor"),!0),o_(xt,ct,pt,vt,pt.paint.get("icon-translate"),pt.paint.get("icon-translate-anchor"),!1))},circle:function(xt,ct,pt,vt){if(xt.renderPass!=="translucent")return;const Tt=pt.paint.get("circle-opacity"),Pt=pt.paint.get("circle-stroke-width"),Ot=pt.paint.get("circle-stroke-opacity"),Ft=pt.layout.get("circle-sort-key").constantOr(1)!==void 0,Vt=pt.paint.get("circle-emissive-strength");if(Tt.constantOr(1)===0&&(Pt.constantOr(1)===0||Ot.constantOr(1)===0))return;const Gt=xt.context,Zt=Gt.gl,Yt=xt.transform,er=xt.depthModeForSublayer(0,at.af.ReadOnly),rr=at.ah.disabled,sr=xt.colorModeForDrapableLayerRenderPass(Vt),lr=Yt.projection.name==="globe",cr=[at.ak(Yt.center.lng),at.al(Yt.center.lat)],ur=[];for(let Er=0;Er<vt.length;Er++){const _r=vt[Er],$r=ct.getTile(_r),Tr=$r.getBucket(pt);if(!Tr||Tr.projection.name!==Yt.projection.name)continue;const Ar=Tr.programConfigurations.get(pt.id),Fr=at.bT(pt),zr=xt.isTileAffectedByFog(_r);lr&&Fr.push("PROJECTION_GLOBE_VIEW"),Fr.push("DEPTH_D24"),xt.terrain&&Yt.depthOcclusionForSymbolsAndCircles&&Fr.push("DEPTH_OCCLUSION");const Yr=xt.getOrCreateProgram("circle",{config:Ar,defines:Fr,overrideFog:zr}),Vr=Tr.layoutVertexBuffer,Ir=Tr.globeExtVertexBuffer,nn=Tr.indexBuffer,en=Yt.projection.createInversionMatrix(Yt,_r.canonical),Wr={programConfiguration:Ar,program:Yr,layoutVertexBuffer:Vr,globeExtVertexBuffer:Ir,indexBuffer:nn,uniformValues:at.bU(xt,_r,$r,en,cr,pt),tile:$r};if(Ft){const Tn=Tr.segments.get();for(const _n of Tn)ur.push({segments:new at.b([_n]),sortKey:_n.sortKey,state:Wr})}else ur.push({segments:Tr.segments,sortKey:0,state:Wr})}Ft&&ur.sort((Er,_r)=>Er.sortKey-_r.sortKey);const br={useDepthForOcclusion:Yt.depthOcclusionForSymbolsAndCircles};for(const Er of ur){const{programConfiguration:_r,program:$r,layoutVertexBuffer:Tr,globeExtVertexBuffer:Ar,indexBuffer:Fr,uniformValues:zr,tile:Yr}=Er.state,Vr=Er.segments;xt.terrain&&xt.terrain.setupElevationDraw(Yr,$r,br),xt.uploadCommonUniforms(Gt,$r,Yr.tileID.toUnwrapped()),$r.draw(xt,Zt.TRIANGLES,er,rr,sr,at.ag.disabled,zr,pt.id,Tr,Fr,Vr,pt.paint,Yt.zoom,_r,[Ar])}},heatmap:function(xt,ct,pt,vt){if(pt.paint.get("heatmap-opacity")!==0)if(xt.renderPass==="offscreen"){const Tt=xt.context,Pt=Tt.gl,Ot=at.ah.disabled,Ft=new at.a([Pt.ONE,Pt.ONE,Pt.ONE,Pt.ONE],at.C.transparent,[!0,!0,!0,!0]);(function(rr,sr,lr,cr){const ur=rr.gl,br=sr.width*cr,Er=sr.height*cr;rr.activeTexture.set(ur.TEXTURE1),rr.viewport.set([0,0,br,Er]);let _r=lr.heatmapFbo;if(!_r||_r&&(_r.width!==br||_r.height!==Er)){_r&&_r.destroy();const $r=ur.createTexture();ur.bindTexture(ur.TEXTURE_2D,$r),ur.texParameteri(ur.TEXTURE_2D,ur.TEXTURE_WRAP_S,ur.CLAMP_TO_EDGE),ur.texParameteri(ur.TEXTURE_2D,ur.TEXTURE_WRAP_T,ur.CLAMP_TO_EDGE),ur.texParameteri(ur.TEXTURE_2D,ur.TEXTURE_MIN_FILTER,ur.LINEAR),ur.texParameteri(ur.TEXTURE_2D,ur.TEXTURE_MAG_FILTER,ur.LINEAR),_r=lr.heatmapFbo=rr.createFramebuffer(br,Er,!0,null),function(Tr,Ar,Fr,zr,Yr,Vr){const Ir=Tr.gl;Ir.texImage2D(Ir.TEXTURE_2D,0,Tr.extRenderToTextureHalfFloat?Ir.RGBA16F:Ir.RGBA,Yr,Vr,0,Ir.RGBA,Tr.extRenderToTextureHalfFloat?Ir.HALF_FLOAT:Ir.UNSIGNED_BYTE,null),zr.colorAttachment.set(Fr)}(rr,0,$r,_r,br,Er)}else ur.bindTexture(ur.TEXTURE_2D,_r.colorAttachment.get()),rr.bindFramebuffer.set(_r.framebuffer)})(Tt,xt,pt,xt.transform.projection.name==="globe"?.5:.25),Tt.clear({color:at.C.transparent});const Vt=xt.transform,Gt=Vt.projection.name==="globe",Zt=Gt?["PROJECTION_GLOBE_VIEW"]:[],Yt=Gt?at.ag.frontCCW:at.ag.disabled,er=[at.ak(Vt.center.lng),at.al(Vt.center.lat)];for(let rr=0;rr<vt.length;rr++){const sr=vt[rr];if(ct.hasRenderableParent(sr))continue;const lr=ct.getTile(sr),cr=lr.getBucket(pt);if(!cr||cr.projection.name!==Vt.projection.name)continue;const ur=xt.isTileAffectedByFog(sr),br=cr.programConfigurations.get(pt.id),Er=xt.getOrCreateProgram("heatmap",{config:br,defines:Zt,overrideFog:ur}),{zoom:_r}=xt.transform;xt.terrain&&xt.terrain.setupElevationDraw(lr,Er),xt.uploadCommonUniforms(Tt,Er,sr.toUnwrapped());const $r=Vt.projection.createInversionMatrix(Vt,sr.canonical);Er.draw(xt,Pt.TRIANGLES,at.af.disabled,Ot,Ft,Yt,t_(xt,sr,lr,$r,er,_r,pt.paint.get("heatmap-intensity")),pt.id,cr.layoutVertexBuffer,cr.indexBuffer,cr.segments,pt.paint,xt.transform.zoom,br,Gt?[cr.globeExtVertexBuffer]:null)}Tt.viewport.set([0,0,xt.width,xt.height])}else xt.renderPass==="translucent"&&(xt.context.setColorMode(xt.colorModeForRenderPass()),function(Tt,Pt){const Ot=Tt.context,Ft=Ot.gl,Vt=Pt.heatmapFbo;if(!Vt)return;Ot.activeTexture.set(Ft.TEXTURE0),Ft.bindTexture(Ft.TEXTURE_2D,Vt.colorAttachment.get()),Ot.activeTexture.set(Ft.TEXTURE1);let Gt=Pt.colorRampTexture;Gt||(Gt=Pt.colorRampTexture=new at.T(Ot,Pt.colorRamp,Ft.RGBA)),Gt.bind(Ft.LINEAR,Ft.CLAMP_TO_EDGE),Tt.getOrCreateProgram("heatmapTexture").draw(Tt,Ft.TRIANGLES,at.af.disabled,at.ah.disabled,Tt.colorModeForRenderPass(),at.ag.disabled,((Zt,Yt,er,rr)=>({u_image:0,u_color_ramp:1,u_opacity:Yt.paint.get("heatmap-opacity")}))(0,Pt),Pt.id,Tt.viewportBuffer,Tt.quadTriangleIndexBuffer,Tt.viewportSegments,Pt.paint,Tt.transform.zoom)}(xt,pt))},line:function(xt,ct,pt,vt){if(xt.renderPass!=="translucent")return;const Tt=pt.paint.get("line-opacity"),Pt=pt.paint.get("line-width");if(Tt.constantOr(1)===0||Pt.constantOr(1)===0)return;const Ot=pt.paint.get("line-emissive-strength"),Ft=pt.paint.get("line-occlusion-opacity"),Vt=xt.context,Gt=Vt.gl,Zt=pt.layout.get("line-z-offset"),Yt=!Zt.isConstant()||!!Zt.constantOr(0),er=Yt?new at.af(xt.depthOcclusion?Gt.GREATER:Gt.LEQUAL,at.af.ReadOnly,xt.depthRangeFor3D):xt.depthModeForSublayer(0,at.af.ReadOnly),rr=xt.colorModeForDrapableLayerRenderPass(Ot),sr=xt.terrain&&xt.terrain.renderingToTexture,lr=sr?1:at.e.devicePixelRatio,cr=pt.paint.get("line-dasharray"),ur=cr.constantOr(1),br=pt.layout.get("line-cap"),Er=cr.constantOr(null),_r=br.constantOr(null),$r=pt.paint.get("line-pattern"),Tr=$r.constantOr(1),Ar=$r.constantOr(null),Fr=pt.paint.get("line-opacity").constantOr(1);let zr=!Tr&&Fr!==1||xt.depthOcclusion&&Ft>0&&Ft<1;const Yr=pt.paint.get("line-gradient"),Vr=Tr?"linePattern":"line",Ir=at.bV(pt);let nn;if(sr&&xt.terrain&&xt.terrain.clipOrMaskOverlapStencilType()&&(zr=!1),Ft!==0&&xt.depthOcclusion){const Wr=pt.paint._values["line-opacity"];Wr&&Wr.value&&Wr.value.kind==="constant"?nn=Wr.value:at.w(`Occlusion opacity for layer ${pt.id} is supported only when line-opacity isn't data-driven.`)}if(Yt&&(xt.forceTerrainMode=!0),!Yt&&Ft!==0&&xt.terrain&&!sr)return void at.w(`Occlusion opacity for layer ${pt.id} is supported on terrain only if the layer has non-zero line-z-offset.`);const en=zr&&Yt?xt.stencilModeFor3D():at.ah.disabled;for(const Wr of vt){const Tn=ct.getTile(Wr);if(Tr&&!Tn.patternsLoaded())continue;const _n=Tn.getBucket(pt);if(!_n)continue;xt.prepareDrawTile();const Xr=_n.programConfigurations.get(pt.id),hn=xt.isTileAffectedByFog(Wr),Ur=xt.getOrCreateProgram(Vr,{config:Xr,defines:Yt?[...Ir,"ELEVATED"]:Ir,overrideFog:hn});if(Ar&&Tn.imageAtlas){const Wn=Tn.imageAtlas.patternPositions[Ar.toString()];Wn&&Xr.setConstantPatternPositions(Wn)}if(!Tr&&Er&&_r&&Tn.lineAtlas){const Wn=Tn.lineAtlas.getDash(Er,_r);Wn&&Xr.setConstantPatternPositions(Wn)}let[bn,Sn]=pt.paint.get("line-trim-offset");(_r==="round"||_r==="square")&&bn!==Sn&&(bn===0&&(bn-=1),Sn===1&&(Sn+=1));const zn=sr?Wr.projMatrix:null,Un=Tr?at.bW(xt,Tn,pt,zn,lr,[bn,Sn]):at.bX(xt,Tn,pt,zn,_n.lineClipsArray.length,lr,[bn,Sn]);if(Yr){const Wn=_n.gradients[pt.id];let uo=Wn.texture;if(pt.gradientVersion!==Wn.version){let So=256;if(pt.stepInterpolant){const fo=ct.getSource().maxzoom,ko=Wr.canonical.z===fo?Math.ceil(1<<xt.transform.maxZoom-Wr.canonical.z):1;So=at.au(at.bY(_n.maxLineLength/at.a4*1024*ko),256,Vt.maxTextureSize)}Wn.gradient=at.bZ({expression:pt.gradientExpression(),evaluationKey:"lineProgress",resolution:So,image:Wn.gradient||void 0,clips:_n.lineClipsArray}),Wn.texture?Wn.texture.update(Wn.gradient):Wn.texture=new at.T(Vt,Wn.gradient,Gt.RGBA),Wn.version=pt.gradientVersion,uo=Wn.texture}Vt.activeTexture.set(Gt.TEXTURE1),uo.bind(pt.stepInterpolant?Gt.NEAREST:Gt.LINEAR,Gt.CLAMP_TO_EDGE)}ur&&(Vt.activeTexture.set(Gt.TEXTURE0),Tn.lineAtlasTexture&&Tn.lineAtlasTexture.bind(Gt.LINEAR,Gt.REPEAT),Xr.updatePaintBuffers()),Tr&&(Vt.activeTexture.set(Gt.TEXTURE0),Tn.imageAtlasTexture&&Tn.imageAtlasTexture.bind(Gt.LINEAR,Gt.CLAMP_TO_EDGE),Xr.updatePaintBuffers()),Yt&&xt.terrain.setupElevationDraw(Tn,Ur),xt.uploadCommonUniforms(Vt,Ur,Wr.toUnwrapped());const Qn=Wn=>{nn!=null&&(nn.value=Fr*Ft),Ur.draw(xt,Gt.TRIANGLES,er,Wn,rr,at.ag.disabled,Un,pt.id,_n.layoutVertexBuffer,_n.indexBuffer,_n.segments,pt.paint,xt.transform.zoom,Xr,[_n.layoutVertexBuffer2,_n.patternVertexBuffer,_n.zOffsetVertexBuffer]),nn!=null&&(nn.value=Fr)};if(zr&&!Yt){const Wn=xt.stencilModeForClipping(Wr).ref;Wn===0&&sr&&Vt.clear({stencil:0});const uo={func:Gt.EQUAL,mask:255};Un.u_alpha_discard_threshold=.8,Qn(new at.ah(uo,Wn,255,Gt.KEEP,Gt.KEEP,Gt.INVERT)),Un.u_alpha_discard_threshold=0,Qn(new at.ah(uo,Wn,255,Gt.KEEP,Gt.KEEP,Gt.KEEP))}else zr&&Yt&&(Un.u_alpha_discard_threshold=.001),Qn(Yt?en:xt.stencilModeForClipping(Wr))}zr&&(xt.resetStencilClippingMasks(),sr&&Vt.clear({stencil:0})),Ft===0||xt.depthOcclusion||sr||xt.layersWithOcclusionOpacity.push(xt.currentLayer),Yt&&(xt.forceTerrainMode=!1)},fill:function(xt,ct,pt,vt){const Tt=pt.paint.get("fill-color"),Pt=pt.paint.get("fill-opacity");if(Pt.constantOr(1)===0)return;const Ot=pt.paint.get("fill-emissive-strength"),Ft=xt.colorModeForDrapableLayerRenderPass(Ot),Vt=pt.paint.get("fill-pattern"),Gt=xt.opaquePassEnabledForLayer()&&!Vt.constantOr(1)&&Tt.constantOr(at.C.transparent).a===1&&Pt.constantOr(0)===1?"opaque":"translucent";if(xt.renderPass===Gt){const Zt=xt.depthModeForSublayer(1,xt.renderPass==="opaque"?at.af.ReadWrite:at.af.ReadOnly);Ym(xt,ct,pt,vt,Zt,Ft,!1)}if(xt.renderPass==="translucent"&&pt.paint.get("fill-antialias")){const Zt=xt.depthModeForSublayer(pt.getPaintProperty("fill-outline-color")?2:0,at.af.ReadOnly);Ym(xt,ct,pt,vt,Zt,Ft,!0)}},"fill-extrusion":function(xt,ct,pt,vt){const Tt=pt.paint.get("fill-extrusion-opacity"),Pt=xt.context,Ot=Pt.gl,Ft=xt.terrain,Vt=Ft&&Ft.renderingToTexture;if(Tt===0)return;const Gt=xt.conflationActive&&xt.style.isLayerClipped(pt,ct.getSource()),Zt=xt.style.order.indexOf(pt.fqid);if(Gt&&function(Yt,er,rr,sr,lr){for(const cr of sr){const ur=er.getTile(cr).getBucket(rr);ur&&(ur.updateReplacement(cr,Yt.replacementSource,lr),ur.uploadCentroid(Yt.context))}}(xt,ct,pt,vt,Zt),Ft||Gt)for(const Yt of vt){const er=ct.getTile(Yt).getBucket(pt);er&&J1(xt.context,ct,Yt,er,pt,Ft,Gt)}if(xt.renderPass==="shadow"&&xt.shadowRenderer){const Yt=xt.shadowRenderer;if(Ft&&Tt<.65&&pt._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof at.Z)return;const er=Yt.getShadowPassDepthMode(),rr=Yt.getShadowPassColorMode();yp(xt,ct,pt,vt,er,at.ah.disabled,rr,Gt)}else if(xt.renderPass==="translucent"){const Yt=!pt.paint.get("fill-extrusion-pattern").constantOr(1),er=pt.paint.get("fill-extrusion-color").constantOr(at.C.white);if(!Vt&&er.a!==0){const rr=new at.af(xt.context.gl.LEQUAL,at.af.ReadWrite,xt.depthRangeFor3D);Tt===1&&Yt?yp(xt,ct,pt,vt,rr,at.ah.disabled,at.a.unblended,Gt):(yp(xt,ct,pt,vt,rr,at.ah.disabled,at.a.disabled,Gt),yp(xt,ct,pt,vt,rr,xt.stencilModeFor3D(),xt.colorModeForRenderPass(),Gt),xt.resetStencilClippingMasks())}if(xt.style.enable3dLights()&&Yt&&(!Ft&&xt.transform.projection.name!=="globe"||Vt)){const rr=pt.paint.get("fill-extrusion-opacity"),sr=pt.paint.get("fill-extrusion-ambient-occlusion-intensity"),lr=pt.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),cr=pt.paint.get("fill-extrusion-flood-light-intensity"),ur=pt.paint.get("fill-extrusion-flood-light-color").toRenderColor(pt.lut).toArray01().slice(0,3),br=sr>0&&lr>0,Er=cr>0,_r=(Tr,Ar,Fr)=>(1-Fr)*Tr+Fr*Ar,$r=Tr=>{const Ar=xt.depthModeForSublayer(1,at.af.ReadOnly,Ot.LEQUAL,!0),Fr=pt.paint.get(Tr?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),zr=_r(.1,3,Fr),Yr=xt._showOverdrawInspector;if(!Yr){const Vr=new at.ah({func:Ot.ALWAYS,mask:255},255,255,Ot.KEEP,Ot.KEEP,Ot.REPLACE),Ir=new at.a([Ot.ONE,Ot.ONE,Ot.ONE,Ot.ONE],at.C.transparent,[!1,!1,!1,!0],Ot.MIN);Kp(xt,ct,pt,vt,Ar,Vr,Ir,at.ag.disabled,Tr,"sdf",rr,sr,lr,cr,ur,zr,Gt,!1)}{const Vr=Yr?at.ah.disabled:new at.ah({func:Ot.EQUAL,mask:255},255,255,Ot.KEEP,Ot.DECR,Ot.DECR),Ir=Yr?xt.colorModeForRenderPass():new at.a([Ot.ONE_MINUS_DST_ALPHA,Ot.DST_ALPHA,Ot.ONE,Ot.ONE],at.C.transparent,[!0,!0,!0,!0]);Kp(xt,ct,pt,vt,Ar,Vr,Ir,at.ag.disabled,Tr,"color",rr,sr,lr,cr,ur,zr,Gt,!1)}};if(Vt){const Tr=(Ar,Fr,zr)=>{const Yr=xt.depthModeForSublayer(1,at.af.ReadOnly,Ot.LEQUAL,!1),Vr=pt.paint.get(Ar?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ir=_r(.1,3,Vr);{const nn=new at.a([Ot.ONE,Ot.ONE,Ot.ONE,Ot.ONE],at.C.transparent,[!1,!1,!1,!0]);Kp(xt,ct,pt,vt,Yr,at.ah.disabled,nn,at.ag.disabled,Ar,"clear",rr,sr,lr,cr,ur,Ir,Gt,Fr)}{const nn=new at.ah({func:Ot.ALWAYS,mask:255},255,255,Ot.KEEP,Ot.KEEP,Ot.REPLACE),en=new at.a([Ot.ONE,Ot.ONE,Ot.ONE,Ot.ONE],at.C.transparent,[!1,!1,!1,!0],Ot.MIN);Kp(xt,ct,pt,vt,Yr,nn,en,at.ag.disabled,Ar,"sdf",rr,sr,lr,cr,ur,Ir,Gt,Fr)}{const nn=Ar?Ot.ZERO:Ot.ONE_MINUS_DST_ALPHA,en=new at.ah({func:Ot.EQUAL,mask:255},255,255,Ot.KEEP,Ot.DECR,Ot.DECR),Wr=new at.a([nn,Ot.DST_ALPHA,Ot.ONE_MINUS_DST_ALPHA,Ot.ZERO],at.C.transparent,[!0,!0,!0,!0]);Kp(xt,ct,pt,vt,Yr,en,Wr,at.ag.disabled,Ar,"color",rr,sr,lr,cr,ur,Ir,Gt,Fr)}{const nn=new at.a([Ot.ONE,Ot.ONE,Ot.ONE,Ar?Ot.ZERO:Ot.ONE],at.C.transparent,[!1,!1,!1,!0],Ar?Ot.FUNC_ADD:Ot.MAX);Kp(xt,ct,pt,vt,Yr,at.ah.disabled,nn,at.ag.disabled,Ar,"clear",rr,sr,lr,cr,ur,Ir,Gt,Fr,zr)}};if(br||Er){let Ar;if(xt.prepareDrawTile(),Ft){const Fr=Ft.drapeBufferSize[0],zr=Ft.drapeBufferSize[1];Ar=Ft.framebufferCopyTexture,Ar&&(!Ar||Ar.size[0]===Fr&&Ar.size[1]===zr)||(Ar&&Ar.destroy(),Ar=Ft.framebufferCopyTexture=new at.T(Pt,new at.j({width:Fr,height:zr}),Ot.RGBA)),Ar.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),Ot.copyTexImage2D(Ot.TEXTURE_2D,0,Ot.RGBA,0,0,Fr,zr,0)}br&&Tr(!0,!1,Ar),Er&&Tr(!1,!0,Ar)}}else br&&$r(!0),Er&&$r(!1),(br||Er)&&xt.resetStencilClippingMasks()}}},hillshade:function(xt,ct,pt,vt){if(xt.renderPass!=="offscreen"&&xt.renderPass!=="translucent"||xt.style.disableElevatedTerrain)return;const Tt=xt.context,Pt=xt.terrain&&xt.terrain.renderingToTexture,[Ot,Ft]=xt.renderPass!=="translucent"||Pt?[{},vt]:xt.stencilConfigForOverlap(vt);for(const Vt of Ft){const Gt=ct.getTile(Vt);if(Gt.needsHillshadePrepare&&xt.renderPass==="offscreen")Z1(xt,Gt,pt);else if(xt.renderPass==="translucent"){const Zt=xt.depthModeForSublayer(0,at.af.ReadOnly),Yt=pt.paint.get("hillshade-emissive-strength"),er=xt.colorModeForDrapableLayerRenderPass(Yt),rr=Pt&&xt.terrain?xt.terrain.stencilModeForRTTOverlap(Vt):Ot[Vt.overscaledZ];H1(xt,Vt,Gt,pt,Zt,rr,er)}}Tt.viewport.set([0,0,xt.width,xt.height]),xt.resetStencilClippingMasks()},raster:function(xt,ct,pt,vt,Tt,Pt){if(xt.renderPass!=="translucent"||pt.paint.get("raster-opacity")===0)return;const Ot=xt.transform.projection.name==="globe",Ft=pt.paint.get("raster-elevation")!==0,Vt=Ft&&Ot;if(xt.renderElevatedRasterBackface&&!Vt)return;const Gt=xt.context,Zt=Gt.gl,Yt=ct.getSource(),er=function(Tr,Ar,Fr,zr){const Yr=Ar.paint.get("raster-color"),Vr=Tr.type==="raster-array",Ir=[],nn=Ar.paint.get("raster-resampling"),en=Ar.paint.get("raster-color-mix");let Wr=Ar.paint.get("raster-color-range");const Tn=[en[0],en[1],en[2],0],_n=en[3];let Xr=nn==="nearest"?zr.NEAREST:zr.LINEAR;if(Vr&&(Ir.push("RASTER_ARRAY"),Yr||Ir.push("RASTER_COLOR"),nn==="linear"&&Ir.push("RASTER_ARRAY_LINEAR"),Xr=zr.NEAREST,!Wr&&Tr.rasterLayers)){const hn=Tr.rasterLayers.find(({id:Ur})=>Ur===Ar.sourceLayer);hn&&hn.fields&&hn.fields.range&&(Wr=hn.fields.range)}if(Wr=Wr||[0,1],Yr){Ir.push("RASTER_COLOR"),Fr.activeTexture.set(zr.TEXTURE2),Ar.updateColorRamp(Wr);let hn=Ar.colorRampTexture;hn||(hn=Ar.colorRampTexture=new at.T(Fr,Ar.colorRamp,zr.RGBA)),hn.bind(zr.LINEAR,zr.CLAMP_TO_EDGE)}return{mix:Tn,range:Wr,offset:_n,defines:Ir,resampling:Xr}}(Yt,pt,Gt,Zt);if(Yt instanceof at.bo&&!vt.length&&!Ot)return;const rr=pt.paint.get("raster-emissive-strength"),sr=xt.colorModeForDrapableLayerRenderPass(rr),lr=xt.terrain&&xt.terrain.renderingToTexture,cr=!xt.options.moving,ur=pt.paint.get("raster-resampling")==="nearest"?Zt.NEAREST:Zt.LINEAR;if(Yt instanceof at.bo&&!vt.length&&(Yt.onNorthPole||Yt.onSouthPole)){const Tr=Ft?xt.stencilModeFor3D():at.ah.disabled;return void Qy(!!Yt.onNorthPole,null,xt,ct,pt,rr,er,at.ag.disabled,Tr)}if(!vt.length)return;const[br,Er]=Yt instanceof at.bo||lr?[{},vt]:xt.stencilConfigForOverlap(vt),_r=Er[Er.length-1].overscaledZ;Vt&&er.defines.push("PROJECTION_GLOBE_VIEW"),Ft&&er.defines.push("RENDER_CUTOFF");const $r=(Tr,Ar,Fr)=>{for(const zr of Tr){const Yr=zr.toUnwrapped(),Vr=ct.getTile(zr);if(lr&&(!Vr||!Vr.hasData()))continue;Gt.activeTexture.set(Zt.TEXTURE0);const Ir=xp(Vr,Yt,pt,er);if(!Ir||!Ir.texture)continue;const{texture:nn,mix:en,offset:Wr,tileSize:Tn,buffer:_n}=Ir;let Xr,hn;lr?(Xr=at.af.disabled,hn=zr.projMatrix):Ft?(Xr=new at.af(Zt.LEQUAL,at.af.ReadWrite,xt.depthRangeFor3D),hn=Ot?Float32Array.from(xt.transform.expandedFarZProjMatrix):xt.transform.calculateProjMatrix(Yr,cr)):(Xr=xt.depthModeForSublayer(zr.overscaledZ-_r,pt.paint.get("raster-opacity")===1?at.af.ReadWrite:at.af.ReadOnly,Zt.LESS),hn=xt.transform.calculateProjMatrix(Yr,cr));const Ur=xt.terrain&&lr?xt.terrain.stencilModeForRTTOverlap(zr):br[zr.overscaledZ],bn=Pt?0:pt.paint.get("raster-fade-duration");Vr.registerFadeDuration(bn);const Sn=ct.findLoadedParent(zr,0),zn=Gy(Vr,Sn,ct,xt.transform,bn);let Un,Qn;xt.terrain&&xt.terrain.prepareDrawTile(),Gt.activeTexture.set(Zt.TEXTURE0),nn.bind(ur,Zt.CLAMP_TO_EDGE),Gt.activeTexture.set(Zt.TEXTURE1),Sn?(Sn.texture&&Sn.texture.bind(ur,Zt.CLAMP_TO_EDGE),Un=Math.pow(2,Sn.tileID.overscaledZ-Vr.tileID.overscaledZ),Qn=[Vr.tileID.canonical.x*Un%1,Vr.tileID.canonical.y*Un%1]):nn.bind(ur,Zt.CLAMP_TO_EDGE),nn.useMipmap&&Gt.extTextureFilterAnisotropic&&xt.transform.pitch>20&&Zt.texParameterf(Zt.TEXTURE_2D,Gt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Gt.extTextureFilterAnisotropicMax);const Wn=xt.transform;let uo;const So=Ft?Ax(Wn):[0,0,0,0];let fo,ko,Vo,ss,rs,Uo=0;if(Vt&&Yt instanceof at.bo&&Yt.coordinates.length>3)fo=Float32Array.from(at.bh(at.bi(new at.aO(0,0,0)))),ko=Float32Array.from(Wn.globeMatrix),Vo=Float32Array.from(at.bd(Wn)),ss=[at.ak(Wn.center.lng),at.al(Wn.center.lat)],uo=Yt.elevatedGlobePerspectiveTransform,rs=Yt.elevatedGlobeGridMatrix||new Float32Array(9);else if(Vt){const To=at.be(zr.canonical);Uo=at.bf(To.getCenter().lat),fo=Float32Array.from(at.bh(at.bi(zr.canonical))),ko=Float32Array.from(Wn.globeMatrix),Vo=Float32Array.from(at.bd(Wn)),ss=[at.ak(Wn.center.lng),at.al(Wn.center.lat)],uo=[0,0],rs=Float32Array.from(at.bg(zr.canonical,To,Uo,Wn.worldSize/Wn._pixelsPerMercatorPixel))}else uo=Yt instanceof at.bo?Yt.perspectiveTransform:[0,0],fo=new Float32Array(16),ko=new Float32Array(9),Vo=new Float32Array(16),ss=[0,0],rs=new Float32Array(9);const ts=Xy(hn,fo,ko,Vo,rs,Qn||[0,0],at.a2(xt.transform.zoom),ss,So,Un||1,zn,pt,uo,Ft?pt.paint.get("raster-elevation"):0,2,en,Wr,er.range,Tn,_n,rr),Oo=xt.isTileAffectedByFog(zr),Do=xt.getOrCreateProgram("raster",{defines:er.defines,overrideFog:Oo});if(xt.uploadCommonUniforms(Gt,Do,Yr),Yt instanceof at.bo){const To=Yt.elevatedGlobeVertexBuffer,Ko=Yt.elevatedGlobeIndexBuffer;if(lr||!Ot)Yt.boundsBuffer&&Yt.boundsSegments&&Do.draw(xt,Zt.TRIANGLES,Xr,at.ah.disabled,sr,at.ag.disabled,ts,pt.id,Yt.boundsBuffer,xt.quadTriangleIndexBuffer,Yt.boundsSegments);else if(To&&Ko){const Lo=Wn.zoom<=at.b3?Yt.elevatedGlobeSegments:Yt.getSegmentsForLongitude(Wn.center.lng);Lo&&Do.draw(xt,Zt.TRIANGLES,Xr,at.ah.disabled,sr,Ar,ts,pt.id,To,Ko,Lo)}}else if(Vt){Xr=new at.af(Zt.LEQUAL,at.af.ReadOnly,xt.depthRangeFor3D);const To=xt.globeSharedBuffers;if(To){const[Ko,Lo,yo]=To.getGridBuffers(Uo,!1);Do.draw(xt,Zt.TRIANGLES,Xr,Fr||Ur,xt.colorModeForRenderPass(),Ar,ts,pt.id,Ko,Lo,yo)}}else{const{tileBoundsBuffer:To,tileBoundsIndexBuffer:Ko,tileBoundsSegments:Lo}=xt.getTileBoundsBuffers(Vr);Do.draw(xt,Zt.TRIANGLES,Xr,Ur,sr,at.ag.disabled,ts,pt.id,To,Ko,Lo)}}if(!(Yt instanceof at.bo)&&Vt)for(const zr of Tr){const Yr=zr.canonical.y===(1<<zr.canonical.z)-1;zr.canonical.y===0&&Qy(!0,zr,xt,ct,pt,rr,er,Ar,Fr||at.ah.disabled),Yr&&Qy(!1,zr,xt,ct,pt,rr,er,Ar===at.ag.frontCW?at.ag.backCW:at.ag.frontCW,Fr||at.ah.disabled)}};Vt?$r(Er,xt.renderElevatedRasterBackface?at.ag.backCW:at.ag.frontCW,xt.stencilModeFor3D()):$r(Er,at.ag.disabled,void 0),xt.resetStencilClippingMasks()},"raster-particle":function(xt,ct,pt,vt,Tt,Pt){xt.renderPass==="offscreen"&&function(Ot,Ft,Vt,Gt){if(!Gt.length)return;const Zt=Ot.context,Yt=Zt.gl,er=Ft.getSource();if(!(er instanceof Yu))return;const rr=Math.ceil(Math.sqrt(Vt.paint.get("raster-particle-count")));let sr=Vt.particlePositionRGBAImage;if(!sr||sr.width!==rr){const Er=function(_r){const $r=_r*_r,Tr=new Uint8Array(4*$r),Ar=function(zr){return zr|=0,zr=Math.imul(2747636419^zr,2654435769),zr=Math.imul(zr^zr>>>16,2654435769),((zr=Math.imul(zr^zr>>>16,2654435769))>>>0)/4294967296},Fr=1/1.1;for(let zr=0;zr<$r;zr++){const Yr=Fr*(Ar(2*zr+0)+fu),Vr=Fr*(Ar(2*zr+1)+fu),Ir=255*Yr%1,nn=255*Vr%1,en=Ir,Wr=Vr-nn/255,Tn=nn;Tr[4*zr+0]=255*(Yr-Ir/255),Tr[4*zr+1]=255*en,Tr[4*zr+2]=255*Wr,Tr[4*zr+3]=255*Tn}return Tr}(rr);sr=Vt.particlePositionRGBAImage=new at.j({width:rr,height:rr},Er)}let lr=Vt.particleFramebuffer;lr?lr.width!==rr&&(lr.destroy(),lr=Vt.particleFramebuffer=Zt.createFramebuffer(rr,rr,!0,null)):lr=Vt.particleFramebuffer=Zt.createFramebuffer(rr,rr,!0,null);const cr=[];for(const Er of Gt){const _r=Ft.getTile(Er);if(!(_r instanceof at.c5))continue;const $r=c_(_r,er,Vt);if(!$r)continue;const Tr=[_r.tileSize,_r.tileSize];let Ar=Vt.tileFramebuffer;Ar||(Ar=Vt.tileFramebuffer=Zt.createFramebuffer(Tr[0],Tr[1],!0,null));let Fr=_r.rasterParticleState;Fr||(Fr=_r.rasterParticleState=new bs(Zt,Er,Tr,sr));const zr=Fr.update(Vt.lastInvalidatedAt);Fr.particleTextureDimension!==rr&&Fr.updateParticleTexture(Er,sr);const Yr=Fr.targetColorTexture;Fr.targetColorTexture=Fr.backgroundColorTexture,Fr.backgroundColorTexture=Yr;const Vr=Fr.particleTexture0;Fr.particleTexture0=Fr.particleTexture1,Fr.particleTexture1=Vr,cr.push([Er,$r,Fr,zr])}if(cr.length===0)return;const ur=at.e.now(),br=Vt.previousDrawTimestamp?.001*(ur-Vt.previousDrawTimestamp):.0167;if(Vt.previousDrawTimestamp=ur,Vt.hasColorMap()){Zt.activeTexture.set(Yt.TEXTURE0+2);let Er=Vt.colorRampTexture;Er||(Er=Vt.colorRampTexture=new at.T(Zt,Vt.colorRamp,Yt.RGBA)),Er.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE)}Zt.bindFramebuffer.set(Vt.tileFramebuffer.framebuffer),function(Er,_r,$r){const Tr=Er.context,Ar=Tr.gl,Fr=_r.tileFramebuffer;Tr.activeTexture.set(Ar.TEXTURE0);const zr={u_texture:0,u_opacity:1.05*(Vr=_r.paint.get("raster-particle-fade-opacity-factor"))/(Vr+.05)},Yr=Er.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var Vr;for(const Ir of $r){const[,,nn,en]=Ir;Fr.colorAttachment.set(nn.targetColorTexture.texture),Tr.viewport.set([0,0,Fr.width,Fr.height]),Tr.clear({color:at.C.transparent}),en&&(nn.backgroundColorTexture.bind(Ar.NEAREST,Ar.CLAMP_TO_EDGE),Yr.draw(Er,Ar.TRIANGLES,at.af.disabled,at.ah.disabled,at.a.alphaBlended,at.ag.disabled,zr,_r.id,Er.viewportBuffer,Er.quadTriangleIndexBuffer,Er.viewportSegments))}}(Ot,Vt,cr),function(Er,_r,$r,Tr){const Ar=Er.context,Fr=Ar.gl,zr=$r.tileFramebuffer,Yr=Er.transform.projection.name==="globe",Vr=$r.paint.get("raster-particle-max-speed");for(const Ir of Tr){const[nn,en,Wr]=Ir;Ar.activeTexture.set(Fr.TEXTURE0+0),en.texture.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE),zr.colorAttachment.set(Wr.targetColorTexture.texture);const Tn=Er.getOrCreateProgram("rasterParticleDraw",{defines:en.defines,overrideFog:!1});Ar.activeTexture.set(Fr.TEXTURE0+1);const _n=en.scalarData?[]:[0,1,2,3].map(Ur=>at.b$[Ur](nn));_n.push(nn);const Xr=nn.canonical.x,hn=nn.canonical.y;for(const Ur of _n){const bn=_r.getTile(Yr?Ur.wrapped():Ur);if(!bn)continue;const Sn=bn.rasterParticleState;if(!Sn)continue;const zn=Ur.canonical.x+(1<<Ur.canonical.z)*(Ur.wrap-nn.wrap),Un=Ur.canonical.y;Sn.particleTexture0.bind(Fr.NEAREST,Fr.CLAMP_TO_EDGE);const Qn=K1(1,Sn.particleTexture0.size[0],[zn-Xr,Un-hn],0,en.texture.size,2,Vr,en.textureOffset,en.scale,en.offset);Tn.draw(Er,Fr.POINTS,at.af.disabled,at.ah.disabled,at.a.alphaBlended,at.ag.disabled,Qn,$r.id,Sn.particleIndexBuffer,void 0,Sn.particleSegment)}}}(Ot,Ft,Vt,cr),Zt.bindFramebuffer.set(Vt.particleFramebuffer.framebuffer),function(Er,_r,$r,Tr){const Ar=Er.context,Fr=Ar.gl,zr=_r.paint.get("raster-particle-max-speed"),Yr=Tr*_r.paint.get("raster-particle-speed-factor")*.15,Vr=function(nn){return Math.pow(nn,6)}(.01+1*_r.paint.get("raster-particle-reset-rate-factor")),Ir=_r.particleFramebuffer;Ar.viewport.set([0,0,Ir.width,Ir.height]);for(const nn of $r){const[,en,Wr]=nn;Ar.activeTexture.set(Fr.TEXTURE0+0),en.texture.bind(Fr.LINEAR,Fr.CLAMP_TO_EDGE),Ar.activeTexture.set(Fr.TEXTURE0+1);const Tn=Wr.particleTexture0;Tn.bind(Fr.NEAREST,Fr.CLAMP_TO_EDGE);const _n=r_(1,Tn.size[0],0,en.texture.size,zr,Yr,Vr,en.textureOffset,en.scale,en.offset);Ir.colorAttachment.set(Wr.particleTexture1.texture),Ar.clear({color:at.C.transparent}),Er.getOrCreateProgram("rasterParticleUpdate",{defines:en.defines}).draw(Er,Fr.TRIANGLES,at.af.disabled,at.ah.disabled,at.a.unblended,at.ag.disabled,_n,_r.id,Er.viewportBuffer,Er.quadTriangleIndexBuffer,Er.viewportSegments)}}(Ot,Vt,cr,br)}(xt,ct,pt,vt),xt.renderPass==="translucent"&&(function(Ot,Ft,Vt,Gt,Zt){const Yt=Ot.context,er=Yt.gl,rr=Ft.getSource().tileSize,sr=5*(1-at.a0(at.aV,at.aV+1,Ot.transform.zoom))*rr+Vt.paint.get("raster-particle-elevation"),lr=!Ot.options.moving,cr=Ot.transform.projection.name==="globe";if(!Gt.length)return;const[ur,br]=Ot.stencilConfigForOverlap(Gt),Er=[];cr&&Er.push("PROJECTION_GLOBE_VIEW");const _r=Ot.stencilModeFor3D();for(const $r of br){const Tr=$r.toUnwrapped(),Ar=Ft.getTile($r);if(!Ar.rasterParticleState)continue;const Fr=Ar.rasterParticleState,zr=100;Ar.registerFadeDuration(zr);const Yr=Ft.findLoadedParent($r,0),Vr=Gy(Ar,Yr,Ft,Ot.transform,zr);let Ir,nn;Ot.terrain&&Ot.terrain.prepareDrawTile(),Yt.activeTexture.set(er.TEXTURE0),Fr.targetColorTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE),Yt.activeTexture.set(er.TEXTURE1),Yr&&Yr.rasterParticleState?(Yr.rasterParticleState.targetColorTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE),Ir=Math.pow(2,Yr.tileID.overscaledZ-Ar.tileID.overscaledZ),nn=[Ar.tileID.canonical.x*Ir%1,Ar.tileID.canonical.y*Ir%1]):Fr.targetColorTexture.bind(er.LINEAR,er.CLAMP_TO_EDGE);const en=cr?Float32Array.from(Ot.transform.expandedFarZProjMatrix):Ot.transform.calculateProjMatrix(Tr,lr),Wr=Ot.transform,Tn=e0(Wr),_n=at.be($r.canonical),Xr=at.bf(_n.getCenter().lat);let hn,Ur,bn,Sn,zn;cr?(hn=Float32Array.from(at.bh(at.bi($r.canonical))),Ur=Float32Array.from(Wr.globeMatrix),bn=Float32Array.from(at.bd(Wr)),Sn=[at.ak(Wr.center.lng),at.al(Wr.center.lat)],zn=Float32Array.from(at.bg($r.canonical,_n,Xr,Wr.worldSize/Wr._pixelsPerMercatorPixel))):(hn=new Float32Array(16),Ur=new Float32Array(9),bn=new Float32Array(16),Sn=[0,0],zn=new Float32Array(9));const Un=pp(en,hn,Ur,bn,zn,nn||[0,0],at.a2(Ot.transform.zoom),Sn,Tn,Ir||1,Vr,sr),Qn=Ot.isTileAffectedByFog($r),Wn=Ot.getOrCreateProgram("rasterParticle",{defines:Er,overrideFog:Qn});if(Ot.uploadCommonUniforms(Yt,Wn,Tr),cr){const uo=new at.af(er.LEQUAL,at.af.ReadOnly,Ot.depthRangeFor3D),So=0,fo=Ot.globeSharedBuffers;if(fo){const[ko,Vo,ss]=fo.getGridBuffers(Xr,So!==0);Wn.draw(Ot,er.TRIANGLES,uo,_r,at.a.alphaBlended,Ot.renderElevatedRasterBackface?at.ag.frontCCW:at.ag.backCCW,Un,Vt.id,ko,Vo,ss)}}else{const uo=Ot.depthModeForSublayer(0,at.af.ReadOnly),So=ur[$r.overscaledZ],{tileBoundsBuffer:fo,tileBoundsIndexBuffer:ko,tileBoundsSegments:Vo}=Ot.getTileBoundsBuffers(Ar);Wn.draw(Ot,er.TRIANGLES,uo,So,at.a.alphaBlended,at.ag.disabled,Un,Vt.id,fo,ko,Vo)}}Ot.resetStencilClippingMasks()}(xt,ct,pt,vt),xt.style.map.triggerRepaint())},background:function(xt,ct,pt,vt){const Tt=pt.paint.get("background-color"),Pt=pt.paint.get("background-opacity"),Ot=pt.paint.get("background-emissive-strength");if(Pt===0)return;const Ft=xt.context,Vt=Ft.gl,Gt=xt.transform,Zt=Gt.tileSize,Yt=pt.paint.get("background-pattern");let er;if(Yt!==void 0&&(Yt===null||(er=xt.imageManager.getPattern(Yt.toString(),pt.scope,xt.style.getLut(pt.scope)),!er)))return;const rr=!Yt&&Tt.a===1&&Pt===1&&xt.opaquePassEnabledForLayer()?"opaque":"translucent";if(xt.renderPass!==rr)return;const sr=at.ah.disabled,lr=xt.depthModeForSublayer(0,rr==="opaque"?at.af.ReadWrite:at.af.ReadOnly),cr=xt.colorModeForDrapableLayerRenderPass(Ot),ur=Yt?"backgroundPattern":"background";let br,Er=vt;Er||(br=xt.getBackgroundTiles(),Er=Object.values(br).map(_r=>_r.tileID)),Yt&&(Ft.activeTexture.set(Vt.TEXTURE0),xt.imageManager.bind(xt.context,pt.scope));for(const _r of Er){const $r=xt.isTileAffectedByFog(_r),Tr=xt.getOrCreateProgram(ur,{overrideFog:$r}),Ar=_r.toUnwrapped(),Fr=vt?_r.projMatrix:xt.transform.calculateProjMatrix(Ar);xt.prepareDrawTile();const zr=ct?ct.getTile(_r):br?br[_r.key]:new at.bA(_r,Zt,Gt.zoom,xt),Yr=Yt?Y1(Fr,Ot,Pt,xt,0,pt.scope,er,{tileID:_r,tileSize:Zt}):wx(Fr,Ot,Pt,Tt.toRenderColor(pt.lut));xt.uploadCommonUniforms(Ft,Tr,Ar);const{tileBoundsBuffer:Vr,tileBoundsIndexBuffer:Ir,tileBoundsSegments:nn}=xt.getTileBoundsBuffers(zr);Tr.draw(xt,Vt.TRIANGLES,lr,sr,cr,at.ag.disabled,Yr,pt.id,Vr,Ir,nn)}},sky:function(xt,ct,pt){const vt=xt._atmosphere?at.a2(xt.transform.zoom):1,Tt=pt.paint.get("sky-opacity")*vt;if(Tt===0)return;const Pt=xt.context,Ot=pt.paint.get("sky-type"),Ft=new at.af(Pt.gl.LEQUAL,at.af.ReadOnly,[0,1]),Vt=xt.frameCounter/1e3%1;Ot==="atmosphere"?xt.renderPass==="offscreen"?pt.needsSkyboxCapture(xt)&&(function(Gt,Zt,Yt,er){const rr=Gt.context,sr=rr.gl;let lr=Zt.skyboxFbo;if(!lr){lr=Zt.skyboxFbo=rr.createFramebuffer(32,32,!0,null),Zt.skyboxGeometry=new Jn(rr),Zt.skyboxTexture=rr.gl.createTexture(),sr.bindTexture(sr.TEXTURE_CUBE_MAP,Zt.skyboxTexture),sr.texParameteri(sr.TEXTURE_CUBE_MAP,sr.TEXTURE_WRAP_S,sr.CLAMP_TO_EDGE),sr.texParameteri(sr.TEXTURE_CUBE_MAP,sr.TEXTURE_WRAP_T,sr.CLAMP_TO_EDGE),sr.texParameteri(sr.TEXTURE_CUBE_MAP,sr.TEXTURE_MIN_FILTER,sr.LINEAR),sr.texParameteri(sr.TEXTURE_CUBE_MAP,sr.TEXTURE_MAG_FILTER,sr.LINEAR);for(let Er=0;Er<6;++Er)sr.texImage2D(sr.TEXTURE_CUBE_MAP_POSITIVE_X+Er,0,sr.RGBA,32,32,0,sr.RGBA,sr.UNSIGNED_BYTE,null)}rr.bindFramebuffer.set(lr.framebuffer),rr.viewport.set([0,0,32,32]);const cr=Zt.getCenter(Gt,!0),ur=Gt.getOrCreateProgram("skyboxCapture"),br=new Float64Array(16);at.ae.identity(br),at.ae.rotateY(br,br,.5*-Math.PI),Zo(Gt,Zt,ur,br,cr,0),at.ae.identity(br),at.ae.rotateY(br,br,.5*Math.PI),Zo(Gt,Zt,ur,br,cr,1),at.ae.identity(br),at.ae.rotateX(br,br,.5*-Math.PI),Zo(Gt,Zt,ur,br,cr,2),at.ae.identity(br),at.ae.rotateX(br,br,.5*Math.PI),Zo(Gt,Zt,ur,br,cr,3),at.ae.identity(br),Zo(Gt,Zt,ur,br,cr,4),at.ae.identity(br),at.ae.rotateY(br,br,Math.PI),Zo(Gt,Zt,ur,br,cr,5),rr.viewport.set([0,0,Gt.width,Gt.height])}(xt,pt),pt.markSkyboxValid(xt)):xt.renderPass==="sky"&&function(Gt,Zt,Yt,er,rr){const sr=Gt.context,lr=sr.gl,cr=Gt.transform,ur=Gt.getOrCreateProgram("skybox");sr.activeTexture.set(lr.TEXTURE0),lr.bindTexture(lr.TEXTURE_CUBE_MAP,Zt.skyboxTexture);const br=((Er,_r,$r,Tr,Ar)=>({u_matrix:Er,u_sun_direction:_r,u_cubemap:0,u_opacity:Tr,u_temporal_offset:Ar}))(cr.skyboxMatrix,Zt.getCenter(Gt,!1),0,er,rr);Gt.uploadCommonUniforms(sr,ur),ur.draw(Gt,lr.TRIANGLES,Yt,at.ah.disabled,Gt.colorModeForRenderPass(),at.ag.backCW,br,"skybox",Zt.skyboxGeometry.vertexBuffer,Zt.skyboxGeometry.indexBuffer,Zt.skyboxGeometry.segment)}(xt,pt,Ft,Tt,Vt):Ot==="gradient"&&xt.renderPass==="sky"&&function(Gt,Zt,Yt,er,rr){const sr=Gt.context,lr=sr.gl,cr=Gt.transform,ur=Gt.getOrCreateProgram("skyboxGradient");Zt.skyboxGeometry||(Zt.skyboxGeometry=new Jn(sr)),sr.activeTexture.set(lr.TEXTURE0);let br=Zt.colorRampTexture;br||(br=Zt.colorRampTexture=new at.T(sr,Zt.colorRamp,lr.RGBA)),br.bind(lr.LINEAR,lr.CLAMP_TO_EDGE);const Er=((_r,$r,Tr,Ar,Fr)=>({u_matrix:_r,u_color_ramp:0,u_center_direction:$r,u_radius:at.ac(Tr),u_opacity:Ar,u_temporal_offset:Fr}))(cr.skyboxMatrix,Zt.getCenter(Gt,!1),Zt.paint.get("sky-gradient-radius"),er,rr);Gt.uploadCommonUniforms(sr,ur),ur.draw(Gt,lr.TRIANGLES,Yt,at.ah.disabled,Gt.colorModeForRenderPass(),at.ag.backCW,Er,"skyboxGradient",Zt.skyboxGeometry.vertexBuffer,Zt.skyboxGeometry.indexBuffer,Zt.skyboxGeometry.segment)}(xt,pt,Ft,Tt,Vt)},debug:function(xt,ct,pt,vt,Tt,Pt){for(let Ot=0;Ot<pt.length;Ot++)if(Tt){const Gt=new at.C(vt.r*.8,vt.g*.8,vt.b*.8,1);ho(xt,ct,pt[Ot],vt,-1,-1,Pt),ho(xt,ct,pt[Ot],vt,-1,1,Pt),ho(xt,ct,pt[Ot],vt,1,1,Pt),ho(xt,ct,pt[Ot],vt,1,-1,Pt),ho(xt,ct,pt[Ot],Gt,0,0,Pt)}else ho(xt,ct,pt[Ot],vt,0,0,Pt)},custom:function(xt,ct,pt,vt){const Tt=xt.context,Pt=pt.implementation;if(!xt.transform.projection.unsupportedLayers||!xt.transform.projection.unsupportedLayers.includes("custom")||xt.terrain&&(xt.terrain.renderingToTexture||xt.renderPass==="offscreen")&&pt.isDraped(ct)){if(xt.renderPass==="offscreen"){const Ot=Pt.prerender;if(Ot){if(xt.setCustomLayerDefaults(),Tt.setColorMode(xt.colorModeForRenderPass()),xt.transform.projection.name==="globe"){const Ft=xt.transform.pointMerc;Ot.call(Pt,Tt.gl,xt.transform.customLayerMatrix(),xt.transform.getProjection(),xt.transform.globeToMercatorMatrix(),at.a2(xt.transform.zoom),[Ft.x,Ft.y],xt.transform.pixelsPerMeterRatio)}else Ot.call(Pt,Tt.gl,xt.transform.customLayerMatrix());Tt.setDirty(),xt.setBaseState()}}else if(xt.renderPass==="translucent"){if(xt.terrain&&xt.terrain.renderingToTexture){const Ft=Pt.renderToTile;if(Ft){const Vt=vt[0].canonical,Gt=new at._(Vt.x+vt[0].wrap*(1<<Vt.z),Vt.y,Vt.z);Tt.setDepthMode(at.af.disabled),Tt.setStencilMode(at.ah.disabled),Tt.setColorMode(xt.colorModeForRenderPass()),xt.setCustomLayerDefaults(),Ft.call(Pt,Tt.gl,Gt),Tt.setDirty(),xt.setBaseState()}return}xt.setCustomLayerDefaults(),Tt.setColorMode(xt.colorModeForRenderPass()),Tt.setStencilMode(at.ah.disabled);const Ot=Pt.renderingMode==="3d"?new at.af(xt.context.gl.LEQUAL,at.af.ReadWrite,xt.depthRangeFor3D):xt.depthModeForSublayer(0,at.af.ReadOnly);if(Tt.setDepthMode(Ot),xt.transform.projection.name==="globe"){const Ft=xt.transform.pointMerc;Pt.render(Tt.gl,xt.transform.customLayerMatrix(),xt.transform.getProjection(),xt.transform.globeToMercatorMatrix(),at.a2(xt.transform.zoom),[Ft.x,Ft.y],xt.transform.pixelsPerMeterRatio)}else Pt.render(Tt.gl,xt.transform.customLayerMatrix());Tt.setDirty(),xt.setBaseState(),Tt.bindFramebuffer.set(null)}}else at.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(xt,ct,pt,vt){if(xt.renderPass==="opaque")return;const Tt=pt.paint.get("model-opacity");if(Tt===0)return;const Pt=pt.paint.get("model-cast-shadows");if(xt.renderPass==="shadow"&&(!Pt||xt.terrain&&Tt<.65&&pt._transitionablePaint._values["model-opacity"].value.expression instanceof at.Z))return;const Ot=xt.shadowRenderer,Ft=pt.paint.get("model-receive-shadows");Ot&&(Ot.useNormalOffset=!0,Ft||(Ot.enabled=!1));const Vt=()=>{Ot&&(Ot.useNormalOffset=!0,Ft||(Ot.enabled=!0))},Gt=ct.getSource();if(xt.renderPass==="light-beam"&&Gt.type!=="batched-model")return;if(Gt.type==="vector"||Gt.type==="geojson")return function(ur,br,Er,_r,$r){const Tr=ur.transform;if(Tr.projection.name!=="mercator")return void at.w(`Drawing 3D models for ${Tr.projection.name} projection is not yet implemented`);const Ar=Tr.getFreeCameraOptions().position;if(!ur.modelManager)return;const Fr=ur.modelManager;Er.modelManager=Fr;const zr=ur.shadowRenderer;if(!Er._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Yr=Er._unevaluatedLayout._values["model-id"],Vr={...Er.layout.get("model-id").parameters},Ir=ur.style.order.indexOf(Er.fqid);for(const nn of _r){const en=br.getTile(nn).getBucket(Er);if(!en||en.projection.name!==Tr.projection.name)continue;const Wr=en.getModelUris();Wr&&!en.modelsRequested&&(Fr.addModelsFromBucket(Wr,$r),en.modelsRequested=!0);const Tn=_g(nn,Tr);Vr.zoom=Tn;const _n=Yr.possiblyEvaluate(Vr);if(Qm(ur,en,nn),_c.shadowUniformsInitialized=!1,_c.useSingleShadowCascade=!!zr&&zr.getMaxCascadeForTile(nn.toUnwrapped())===0,ur.renderPass==="shadow"&&zr){if(ur.currentShadowCascade===1&&en.isInsideFirstShadowMapFrustum)continue;const Ur=Tr.calculatePosMatrix(nn.toUnwrapped(),Tr.worldSize);if(_c.tileMatrix.set(Ur),_c.shadowTileMatrix=Float32Array.from(zr.calculateShadowPassMatrixFromMatrix(Ur)),_c.aabb.min.fill(0),_c.aabb.max[0]=_c.aabb.max[1]=at.a4,_c.aabb.max[2]=0,Sl(en,_c,ur,Er.scope))continue}const Xr=1<<nn.canonical.z,hn=[((Ar.x-nn.wrap)*Xr-nn.canonical.x)*at.a4,(Ar.y*Xr-nn.canonical.y)*at.a4,Ar.z*Xr*at.a4];ur.conflationActive&&Object.keys(en.instancesPerModel).length>0&&ur.style.isLayerClipped(Er,br.getSource())&&en.updateReplacement(nn,ur.replacementSource,Ir,$r)&&(en.uploaded=!1,en.upload(ur.context));for(let Ur in en.instancesPerModel){const bn=en.instancesPerModel[Ur];bn.features.length>0&&(Ur=_n.evaluate(bn.features[0].feature,{}));const Sn=Fr.getModel(Ur,$r);if(Sn&&Sn.uploaded)for(const zn of Sn.nodes)i0(ur,Er,zn,bn,hn,nn,_c)}}}(xt,ct,pt,vt,Gt.type==="vector"?pt.scope:""),void Vt();if(!Gt.loaded())return;if(Gt.type==="batched-model")return function(ur,br,Er,_r){Er.resetLayerRenderingStats(ur);const $r=ur.context,Tr=ur.transform,Ar=ur.style.fog,Fr=ur.shadowRenderer;if(Tr.projection.name!=="mercator")return void at.w(`Drawing 3D landmark models for ${Tr.projection.name} projection is not yet implemented`);const zr=ur.transform.getFreeCameraOptions().position,Yr=at.$.scale([],[zr.x,zr.y,zr.z],ur.transform.worldSize);at.$.negate(Yr,Yr);const Vr=at.ae.identity([]),Ir=at.ci(Tr.center.lat,Tr.zoom),nn=at.ae.fromScaling([],[1,1,1/Ir]);at.ae.translate(Vr,Vr,Yr);const en=Er.paint.get("model-opacity"),Wr=new at.af($r.gl.LEQUAL,at.af.ReadWrite,ur.depthRangeFor3D),Tn=new at.af($r.gl.LEQUAL,at.af.ReadOnly,ur.depthRangeFor3D),_n=new at.b8([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),Xr=ur.renderPass==="shadow",hn=Xr&&Fr?Fr.getCurrentCascadeFrustum():Tr.getFrustum(Tr.scaleZoom(Tr.worldSize)),Ur=Er.paint.get("model-front-cutoff"),bn=Ur[2]<1,Sn=Rl(ur,Er.paint.get("model-cutoff-fade-range")),zn=Er.getLayerRenderingStats();(function(Un,Qn,Wn,uo){const So=Un.terrain?Un.terrain.exaggeration():0,fo=Un.transform.zoom;for(const ko of uo){const Vo=Qn.getTile(ko).getBucket(Wn);Vo&&(Un.conflationActive&&Vo.updateReplacement(ko,Un.replacementSource),Vo.evaluateScale(Un,Wn),Un.terrain&&So>0&&Vo.elevationUpdate(Un.terrain,So,ko,Wn.source),Vo.needsReEvaluation(Un,fo,Wn)&&Vo.evaluate(Wn))}})(ur,br,Er,_r),function(){let Un,Qn,Wn;bn?(Un=_r.length-1,Qn=-1,Wn=-1):(Un=0,Qn=_r.length,Wn=1);for(let uo=Un;uo!==Qn;uo+=Wn){const So=_r[uo],fo=br.getTile(So).getBucket(Er);if(!fo||!fo.uploaded)continue;let ko=!1;Fr&&(ko=Fr.getMaxCascadeForTile(So.toUnwrapped())===0);const Vo=Tr.calculatePosMatrix(So.toUnwrapped(),Tr.worldSize),ss=fo.modelTraits,rs=[];for(const Uo of fo.getNodesInfo()){if(Uo.hiddenByReplacement||!Uo.node.meshes)continue;const ts=Uo.node;let Oo=0;ur.terrain&&ts.elevation&&(Oo=ts.elevation*ur.terrain.exaggeration());const Do=Uo.evaluatedScale;if(Do[0]<=1&&Do[1]<=1&&Do[2]<=1&&(()=>{const Us=Uo.aabb;return _n.min=[...Us.min],_n.max=[...Us.max],_n.min[2]+=Oo,_n.max[2]+=Oo,at.$.transformMat4(_n.min,_n.min,Vo),at.$.transformMat4(_n.max,_n.max,Vo),_n})().intersects(hn)===0)continue;const To=[...Vo],Ko=ts.anchor?ts.anchor[0]:0,Lo=ts.anchor?ts.anchor[1]:0;at.ae.translate(To,To,[Ko*(Do[0]-1),Lo*(Do[1]-1),Oo]),at.$.exactEquals(Do,at.cl)||at.ae.scale(To,To,Do);const yo=at.ae.multiply([],To,ts.matrix),As=at.ae.multiply([],Tr.expandedFarZProjMatrix,yo),Ps=at.ae.multiply([],Tr.expandedFarZProjMatrix,To),Qs=at.aB.transformMat4([],[Ko,Lo,Oo,1],As)[2];ts.hidden=!1;let yl=en;Xr||(bn&&(yl*=u_(To,Tr,Uo.aabb,Ur)),yl*=Fl(Sn,Qs)),yl!==0?rs.push({nodeInfo:Uo,depth:Qs,opacity:yl,wvpForNode:As,wvpForTile:Ps,nodeModelMatrix:yo,tileModelMatrix:To}):ts.hidden=!0}Xr||rs.sort((Uo,ts)=>!bn||Uo.opacity===1&&ts.opacity===1?Uo.depth<ts.depth?-1:1:Uo.opacity===1?-1:ts.opacity===1?1:Uo.depth>ts.depth?-1:1);for(const Uo of rs){const ts=Uo.nodeInfo,Oo=ts.node;let Do=at.ae.multiply([],nn,Uo.tileModelMatrix);at.ae.multiply(Do,Vr,Do);const To=at.ae.invert([],Do);at.ae.transpose(To,To),at.ae.scale(To,To,o0),Do=at.ae.multiply(Do,Do,Oo.matrix);const Ko=ur.renderPass==="light-beam",Lo=ss&at.cn.HasMapboxMeshFeatures,yo=Lo?0:ts.evaluatedRMEA[0][2];for(let As=0;As<Oo.meshes.length;++As){const Ps=Oo.meshes[As],Qs=As===Oo.lightMeshIndex;let yl=Uo.wvpForNode;if(Qs){if(!Ko&&!ur.terrain&&ur.shadowRenderer){ur.currentLayer<ur.firstLightBeamLayer&&(ur.firstLightBeamLayer=ur.currentLayer);continue}yl=Uo.wvpForTile}else if(Ko)continue;const Us={defines:[]},xl=[];if(vp(Us.defines,xl,Ps,ur,Er.lut),Lo||Us.defines.push("DIFFUSE_SHADED"),ko&&Us.defines.push("SHADOWS_SINGLE_CASCADE"),zn&&(Xr?zn.numRenderedVerticesInShadowPass+=Ps.vertexArray.length:zn.numRenderedVerticesInTransparentPass+=Ps.vertexArray.length),Xr){$x(Ps,Uo.nodeModelMatrix,ur,Er);continue}let Ns=null;if(Ar){const tn=Jp(Uo.nodeModelMatrix,ur.transform);if(Ns=new Float32Array(tn),Tr.projection.name!=="globe"){const ku=Ps.aabb.min,su=Ps.aabb.max,[Ru,Iu]=Ar.getOpacityForBounds(tn,ku[0],ku[1],su[0],su[1]);Us.overrideFog=Ru>=Jo||Iu>=Jo}}const Gs=Ps.material;let In;Gs.occlusionTexture&&Gs.occlusionTexture.offsetScale&&(In=Gs.occlusionTexture.offsetScale,Us.defines.push("OCCLUSION_TEXTURE_TRANSFORM")),!Xr&&Fr&&(Fr.useNormalOffset=!!Ps.normalBuffer);const to=ur.getOrCreateProgram("model",Us);!Xr&&Fr&&Fr.setupShadowsFromMatrix(Uo.tileModelMatrix,to,Fr.useNormalOffset),ur.uploadCommonUniforms($r,to,null,Ns);const Tl=Gs.pbrMetallicRoughness;Tl.metallicFactor=.9,Tl.roughnessFactor=.5;const is=mp(new Float32Array(yl),new Float32Array(Do),new Float32Array(To),new Float32Array(Oo.matrix),ur,Uo.opacity,Tl.baseColorFactor.toRenderColor(null),Gs.emissiveFactor,Tl.metallicFactor,Tl.roughnessFactor,Gs,yo,Er,[0,0,0],In);!Qs&&(ts.hasTranslucentParts||Uo.opacity<1)&&to.draw(ur,$r.gl.TRIANGLES,Wr,at.ah.disabled,at.a.disabled,at.ag.backCCW,is,Er.id,Ps.vertexBuffer,Ps.indexBuffer,Ps.segments,Er.paint,ur.transform.zoom,void 0,xl),to.draw(ur,$r.gl.TRIANGLES,Qs?Tn:Wr,at.ah.disabled,Qs||Uo.opacity<1||ts.hasTranslucentParts?at.a.alphaBlended:at.a.unblended,at.ag.backCCW,is,Er.id,Ps.vertexBuffer,Ps.indexBuffer,Ps.segments,Er.paint,ur.transform.zoom,void 0,xl)}}}}()}(xt,ct,pt,vt),void Vt();if(Gt.type!=="model")return;const Zt=Gt.getModels(),Yt=[],er=xt.transform.getFreeCameraOptions().position,rr=at.$.scale([],[er.x,er.y,er.z],xt.transform.worldSize);at.$.negate(rr,rr);const sr=[],lr=[];let cr=0;for(const ur of Zt){const br=pt.paint.get("model-rotation").constantOr(null),Er=pt.paint.get("model-scale").constantOr(null),_r=pt.paint.get("model-translation").constantOr(null);ur.computeModelMatrix(xt,br,Er,_r,!0,!0,!1);const $r=at.ae.identity([]),Tr=at.ci(ur.position.lat,xt.transform.zoom),Ar=at.ae.fromScaling([],[1,1,1/Tr]);at.ae.translate($r,$r,rr),Yt.push({zScaleMatrix:Ar,negCameraPosMatrix:$r});for(const Fr of ur.nodes)xs(xt.transform,Fr,ur.matrix,xt.transform.expandedFarZProjMatrix,cr,sr,lr);cr++}if(sr.sort((ur,br)=>br.depth-ur.depth),xt.renderPass!=="shadow"){if(Tt===1)for(const ur of lr)Xs(ur,xt,pt,Yt[ur.modelIndex],at.ah.disabled,xt.colorModeForRenderPass());else{for(const ur of lr)Xs(ur,xt,pt,Yt[ur.modelIndex],at.ah.disabled,at.a.disabled);for(const ur of lr)Xs(ur,xt,pt,Yt[ur.modelIndex],xt.stencilModeFor3D(),xt.colorModeForRenderPass());xt.resetStencilClippingMasks()}for(const ur of sr)Xs(ur,xt,pt,Yt[ur.modelIndex],at.ah.disabled,xt.colorModeForRenderPass());Vt()}else{for(const ur of lr)$x(ur.mesh,ur.nodeModelMatrix,xt,pt);for(const ur of sr)$x(ur.mesh,ur.nodeModelMatrix,xt,pt);Vt()}}},Os={model:function(xt,ct,pt){const vt=ct.getSource();if(!vt.loaded())return;if(vt.type==="vector"||vt.type==="geojson")return void(pt.modelManager&&pt.modelManager.upload(pt,vt.type==="vector"?xt.scope:""));if(vt.type==="batched-model"||vt.type!=="model")return;const Tt=vt.getModels();for(const Pt of Tt)Pt.upload(pt.context)},raster:function(xt,ct,pt){const vt=ct.getSource();if(!(vt instanceof Yu&&vt.loaded()))return;const Tt=xt.sourceLayer||vt.rasterLayerIds&&vt.rasterLayerIds[0];if(!Tt)return;const Pt=xt.paint.get("raster-array-band")||vt.getInitialBand(Tt);if(Pt==null)return;const Ot=ct.getIds().map(Ft=>ct.getTileByID(Ft));for(const Ft of Ot)Ft.updateNeeded(Tt,Pt)&&vt.prepareTile(Ft,Tt,Pt)},"raster-particle":function(xt,ct,pt){const vt=ct.getSource();if(!(vt instanceof Yu&&vt.loaded()))return;const Tt=xt.sourceLayer||vt.rasterLayerIds&&vt.rasterLayerIds[0];if(!Tt)return;const Pt=xt.paint.get("raster-particle-array-band")||vt.getInitialBand(Tt);if(Pt==null)return;const Ot=ct.getIds().map(Ft=>ct.getTileByID(Ft));for(const Ft of Ot)Ft.updateNeeded(Tt,Pt)&&vt.prepareTile(Ft,Tt,Pt)}};class Mx{constructor(ct,pt,vt,Tt){this.context=new ds(ct,pt),this.transform=vt,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=Tt,this._timeStamp=at.e.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const Pt=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const Ft of Pt)this._debugParams.enabledLayers[Ft]=!0;Tt.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),Tt.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),Tt.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),Tt.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),Tt.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const Ft of Pt)Tt.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],Ft);this.occlusionParams=new ou(Tt),this.setup(),this.numSublayers=at.bx.maxUnderzooming+at.bx.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new at.cp,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new q1(this),this._wireframeDebugCache=new $s,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const Ot=new at.j({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new at.T(this.context,Ot,ct.RGBA)}updateTerrain(ct,pt){const vt=!!ct&&!!ct.terrain&&this.transform.projection.supportsTerrain;if(!(vt||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new Ys(this,ct));const Tt=this._terrain;this.transform.elevation=vt?Tt:null,Tt.update(ct,this.transform,pt),this.transform.elevation&&!Tt.enabled&&(this.transform.elevation=null)}_updateFog(ct){const pt=ct.fog;if(!pt||this.transform.projection.name==="globe"||pt.getOpacity(this.transform.pitch)<1||pt.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[vt,Tt]=pt.getFovAdjustedRange(this.transform._fov);if(vt>Tt)return void(this.transform.fogCullDistSq=null);const Pt=vt+.78*(Tt-vt);this.transform.fogCullDistSq=Pt*Pt}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(ct){ct&&!this._terrain&&(this._terrain=new Ys(this,this.style)),this._forceTerrainMode=ct}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(ct,pt){if(this.width=ct*at.e.devicePixelRatio,this.height=pt*at.e.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const vt of this.style.order)this.style._mergedLayers[vt].resize()}setup(){const ct=this.context,pt=new at.bv;pt.emplaceBack(0,0),pt.emplaceBack(at.a4,0),pt.emplaceBack(0,at.a4),pt.emplaceBack(at.a4,at.a4),this.tileExtentBuffer=ct.createVertexBuffer(pt,at.bt.members),this.tileExtentSegments=at.b.simpleSegment(0,0,4,2);const vt=new at.bv;vt.emplaceBack(0,0),vt.emplaceBack(at.a4,0),vt.emplaceBack(0,at.a4),vt.emplaceBack(at.a4,at.a4),this.debugBuffer=ct.createVertexBuffer(vt,at.bt.members),this.debugSegments=at.b.simpleSegment(0,0,4,5);const Tt=new at.bv;Tt.emplaceBack(-1,-1),Tt.emplaceBack(1,-1),Tt.emplaceBack(-1,1),Tt.emplaceBack(1,1),this.viewportBuffer=ct.createVertexBuffer(Tt,at.bt.members),this.viewportSegments=at.b.simpleSegment(0,0,4,2);const Pt=new at.cq;Pt.emplaceBack(0,0,0,0),Pt.emplaceBack(at.a4,0,at.a4,0),Pt.emplaceBack(0,at.a4,0,at.a4),Pt.emplaceBack(at.a4,at.a4,at.a4,at.a4),this.mercatorBoundsBuffer=ct.createVertexBuffer(Pt,at.cr.members),this.mercatorBoundsSegments=at.b.simpleSegment(0,0,4,2);const Ot=new at.bw;Ot.emplaceBack(0,1,2),Ot.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=ct.createIndexBuffer(Ot);const Ft=new at.cs;for(const Gt of[0,1,3,2,0])Ft.emplaceBack(Gt);this.debugIndexBuffer=ct.createIndexBuffer(Ft),this.emptyTexture=new at.T(ct,new at.j({width:1,height:1},Uint8Array.of(0,0,0,0)),ct.gl.RGBA),this.identityMat=at.ae.create();const Vt=this.context.gl;this.stencilClearMode=new at.ah({func:Vt.ALWAYS,mask:0},0,255,Vt.ZERO,Vt.ZERO,Vt.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(ct){return ct._makeTileBoundsBuffers(this.context,this.transform.projection),ct._tileBoundsBuffer?{tileBoundsBuffer:ct._tileBoundsBuffer,tileBoundsIndexBuffer:ct._tileBoundsIndexBuffer,tileBoundsSegments:ct._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const ct=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,ct.TRIANGLES,at.af.disabled,this.stencilClearMode,at.a.disabled,at.ag.disabled,Vm(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(ct,pt,vt){if(!pt||this.currentStencilSource===pt.id||!ct.isTileClipped()||!vt||vt.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let Ft=!1;for(const Vt of vt)if(this._tileClippingMaskIDs[Vt.key]===void 0){Ft=!0;break}if(!Ft)return}this.currentStencilSource=pt.id;const Tt=this.context,Pt=Tt.gl;this.nextStencilID+vt.length>256&&this.clearStencil(),Tt.setColorMode(at.a.disabled),Tt.setDepthMode(at.af.disabled);const Ot=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const Ft of vt){const Vt=pt.getTile(Ft),Gt=this._tileClippingMaskIDs[Ft.key]=this.nextStencilID++,{tileBoundsBuffer:Zt,tileBoundsIndexBuffer:Yt,tileBoundsSegments:er}=this.getTileBoundsBuffers(Vt);Ot.draw(this,Pt.TRIANGLES,at.af.disabled,new at.ah({func:Pt.ALWAYS,mask:0},Gt,255,Pt.KEEP,Pt.KEEP,Pt.REPLACE),at.a.disabled,at.ag.disabled,Vm(Ft.projMatrix),"$clipping",Zt,Yt,er)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const ct=this.nextStencilID++,pt=this.context.gl;return new at.ah({func:pt.NOTEQUAL,mask:255},ct,255,pt.KEEP,pt.KEEP,pt.REPLACE)}stencilModeForClipping(ct){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(ct);const pt=this.context.gl;return new at.ah({func:pt.EQUAL,mask:255},this._tileClippingMaskIDs[ct.key],0,pt.KEEP,pt.KEEP,pt.REPLACE)}stencilConfigForOverlap(ct){const pt=this.context.gl,vt=ct.sort((Ot,Ft)=>Ft.overscaledZ-Ot.overscaledZ),Tt=vt[vt.length-1].overscaledZ,Pt=vt[0].overscaledZ-Tt+1;if(Pt>1){this.currentStencilSource=void 0,this.nextStencilID+Pt>256&&this.clearStencil();const Ot={};for(let Ft=0;Ft<Pt;Ft++)Ot[Ft+Tt]=new at.ah({func:pt.GEQUAL,mask:255},Ft+this.nextStencilID,255,pt.KEEP,pt.KEEP,pt.REPLACE);return this.nextStencilID+=Pt,[Ot,vt]}return[{[Tt]:at.ah.disabled},vt]}colorModeForRenderPass(){const ct=this.context.gl;return this._showOverdrawInspector?new at.a([ct.CONSTANT_COLOR,ct.ONE,ct.CONSTANT_COLOR,ct.ONE],new at.C(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?at.a.unblended:at.a.alphaBlended}colorModeForDrapableLayerRenderPass(ct){const pt=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new at.a([pt.ONE,pt.ONE_MINUS_SRC_ALPHA,pt.CONSTANT_ALPHA,pt.ONE_MINUS_SRC_ALPHA],new at.C(0,0,0,ct===void 0?0:ct),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(ct,pt,vt,Tt=!1){if(this.depthOcclusion)return new at.af(this.context.gl.GREATER,at.af.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!Tt)return at.af.disabled;const Pt=1-((1+this.currentLayer)*this.numSublayers+ct)*this.depthEpsilon;return new at.af(vt||this.context.gl.LEQUAL,pt,[Pt,Pt])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const ct=this.context.gl,pt=Math.ceil(this.width),vt=Math.ceil(this.height),Tt=this.context.bindFramebuffer.get(),Pt=ct.getParameter(ct.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===pt&&this.depthFBO.height===vt||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),pt!==0&&vt!==0&&(this.depthFBO=new Fo(this.context,pt,vt,!1,"texture"),this.depthTexture=new at.T(this.context,{width:pt,height:vt,data:null},ct.DEPTH_STENCIL),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(Tt),ct.bindTexture(ct.TEXTURE_2D,Pt),this.depthFBO&&(ct.bindFramebuffer(ct.READ_FRAMEBUFFER,null),ct.bindFramebuffer(ct.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),ct.blitFramebuffer(0,0,pt,vt,0,0,pt,vt,ct.DEPTH_BUFFER_BIT,ct.NEAREST),ct.bindFramebuffer(ct.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((ct,pt)=>ct+pt/this._fpsHistory.length,0))}render(ct,pt){const vt=at.e.now();this._dt=vt-this._timeStamp,this._timeStamp=vt,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=ct.map.repaint,this.style=ct,this.options=pt;const Tt=this.style._mergedLayers,Pt=this.style.order.filter(Vr=>{const Ir=Tt[Vr];return!(Ir.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Ir.type]});let Ot=!1,Ft=!1;for(const Vr of Pt){const Ir=Tt[Vr];Ir.type==="circle"&&(Ot=!0),Ir.type==="symbol"&&(Ir.hasInitialOcclusionOpacityProperties?Ft=!0:Ot=!0)}const Vt=Pt.map(Vr=>Tt[Vr]),Gt=this.style._mergedSourceCaches;this.imageManager=ct.imageManager,this.modelManager=ct.modelManager,this.symbolFadeChange=ct.placement.symbolFadeChange(at.e.now()),this.imageManager.beginFrame();let Zt=0,Yt=!1;for(const Vr in Gt){const Ir=Gt[Vr];Ir.used&&(Ir.prepare(this.context),Ir.getSource().usedInConflation&&++Zt)}let er=!1;for(const Vr of Vt)Vr.isHidden(this.transform.zoom)||(Vr.type==="clip"&&(er=!0),this.prepareLayer(Vr));const rr={},sr={},lr={},cr={},ur={};for(const Vr in Gt){const Ir=Gt[Vr];rr[Vr]=Ir.getVisibleCoordinates(),sr[Vr]=rr[Vr].slice().reverse(),lr[Vr]=Ir.getVisibleCoordinates(!0).reverse(),cr[Vr]=Ir.getShadowCasterCoordinates(),ur[Vr]=Ir.sortCoordinatesByDistance(rr[Vr])}const br=Vr=>{const Ir=this.style.getLayerSourceCache(Vr);return Ir&&Ir.used?Ir.getSource():null};if(Zt||er){const Vr=[],Ir=[];let nn=0;for(const en of Vt)this.isSourceForClippingOrConflation(en,br(en))&&(Vr.push(en),Ir.push(nn)),nn++;if(Vr&&(er||Vr.length>1)){const en=[];for(let Wr=0;Wr<Vr.length;Wr++){const Tn=Vr[Wr],_n=Ir[Wr],Xr=this.style.getLayerSourceCache(Tn);if(!Xr||!Xr.used||!Xr.getSource().usedInConflation&&Tn.type!=="clip")continue;let hn=at.cv,Ur=at.cw.None;const bn=[];if(Tn.type==="clip"){hn=_n;for(const Sn of Tn.layout.get("clip-layer-types"))Ur|=Sn==="model"?at.cw.Model:Sn==="symbol"?at.cw.Symbol:at.cw.FillExtrusion;for(const Sn of Tn.layout.get("clip-layer-scope"))bn.push(Sn)}en.push({layer:Tn.fqid,cache:Xr,order:hn,clipMask:Ur,clipScope:bn})}this.replacementSource.setSources(en),Yt=!0}}Yt||this.replacementSource.clear(),this.conflationActive=Yt,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Vr=0;Vr<Vt.length;Vr++){const Ir=Vt[Vr],nn=Ir.cutoffRange();if(this.longestCutoffRange=Math.max(nn,this.longestCutoffRange),nn>0){const en=br(Ir);en&&(this.minCutoffZoom=Math.max(en.minzoom,this.minCutoffZoom)),Ir.minzoom&&(this.minCutoffZoom=Math.max(Ir.minzoom,this.minCutoffZoom))}Ir.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Vr),this._lastOcclusionLayer=Vr)}const Er=this.style&&this.style.fog;Er?(this._fogVisible=Er.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=Er.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(lr),this.opaquePassCutoff=0);const _r=this._shadowRenderer;if(_r){_r.updateShadowParameters(this.transform,this.style.directionalLight);for(const Vr in Gt)for(const Ir of rr[Vr]){let nn={min:0,max:0};this.terrain&&(nn=this.terrain.getMinMaxForTile(Ir)||nn),_r.addShadowReceiver(Ir.toUnwrapped(),nn.min,nn.max)}}if(this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new at.ct(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new n0(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),!at.cu(this.context.gl))return;this.renderPass="offscreen";for(const Vr of Vt){const Ir=ct.getLayerSourceCache(Vr);if(!Vr.hasOffscreenPass()||Vr.isHidden(this.transform.zoom))continue;const nn=Ir?sr[Ir.id]:void 0;(Vr.type==="custom"||Vr.type==="raster"||Vr.type==="raster-particle"||Vr.isSky()||nn&&nn.length)&&this.renderLayer(this,Ir,Vr,nn)}this.depthRangeFor3D=[0,1-(Vt.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,cr)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const $r=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),Tr=(()=>{if(pt.showOverdrawInspector)return at.C.black;const Vr=this.style.fog;if(Vr&&this.transform.projection.supportsFog){const Ir=this.style.getLut(Vr.scope);if(!$r){const nn=Vr.properties.get("color").toRenderColor(Ir).toArray01();return new at.C(...nn)}if($r){const nn=Vr.properties.get("space-color").toRenderColor(Ir).toArray01();return new at.C(...nn)}}return at.C.transparent})();if(this.context.clear({color:Tr,depth:1}),this.clearStencil(),this._showOverdrawInspector=pt.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&$r&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=Pt.length-1;this.currentLayer>=0;this.currentLayer--){const Vr=Vt[this.currentLayer],Ir=ct.getLayerSourceCache(Vr);if(Vr.isSky())continue;const nn=Ir?(Vr.is3D()?ur:sr)[Ir.id]:void 0;this._renderTileClippingMasks(Vr,Ir,nn),this.renderLayer(this,Ir,Vr,nn)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&$r&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||at.a2(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<Pt.length;this.currentLayer++){const Vr=Vt[this.currentLayer],Ir=ct.getLayerSourceCache(Vr);Vr.isSky()&&this.renderLayer(this,Ir,Vr,Ir?sr[Ir.id]:void 0)}function Ar(Vr,Ir){let nn;return Ir&&(nn=(Vr.type==="symbol"?lr:Vr.is3D()?ur:sr)[Ir.id]),nn}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<Pt.length;){const Vr=Vt[this.currentLayer];if(Vr.type==="raster"||Vr.type==="raster-particle"){const Ir=ct.getLayerSourceCache(Vr);this.renderLayer(this,Ir,Vr,Ar(Vr,Ir))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Fr=0;_r&&(Fr=_r.getShadowCastingLayerCount());let zr=!1,Yr=-1;for(let Vr=0;Vr<Pt.length;++Vr){const Ir=Vt[Vr];Ir.isHidden(this.transform.zoom)||Ir.is3D()&&(Yr=Vr)}for(Ft&&Yr===-1&&(Ot=!0);this.currentLayer<Pt.length;){const Vr=Vt[this.currentLayer],Ir=ct.getLayerSourceCache(Vr);if(Vr.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Vr)){if(Vr.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(Ot&&!zr&&this.terrain&&!this.transform.isOrthographic&&(zr=!0,this.blitDepth()),Ft&&Yr!==-1&&this.currentLayer===Yr+1&&!this.transform.isOrthographic&&this.blitDepth(),Vr.is3D()||this.terrain||this._renderTileClippingMasks(Vr,Ir,Ir?rr[Ir.id]:void 0),this.renderLayer(this,Ir,Vr,Ar(Vr,Ir)),!this.terrain&&_r&&Fr>0&&Vr.hasShadowPass()&&--Fr==0&&(_r.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const nn=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=nn;this.currentLayer++){const en=Vt[this.currentLayer];if(!en.hasLightBeamPass())continue;const Wr=ct.getLayerSourceCache(en);this.renderLayer(this,Wr,en,Wr?sr[Wr.id]:void 0)}this.currentLayer=nn,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const nn=this.currentLayer;this.depthOcclusion=!0;for(const en of this.layersWithOcclusionOpacity){this.currentLayer=en;const Wr=Vt[this.currentLayer],Tn=ct.getLayerSourceCache(Wr),_n=Tn?sr[Tn.id]:void 0;Wr.is3D()||this.terrain||this._renderTileClippingMasks(Wr,Tn,Tn?rr[Tn.id]:void 0),this.renderLayer(this,Tn,Wr,_n)}this.depthOcclusion=!1,this.currentLayer=nn,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Vr=null;Vt.forEach(Ir=>{const nn=ct.getLayerSourceCache(Ir);nn&&!Ir.isHidden(this.transform.zoom)&&nn.getVisibleCoordinates().length&&(!Vr||Vr.getSource().maxzoom<nn.getSource().maxzoom)&&(Vr=nn)}),Vr&&this.options.showTileBoundaries&&au.debug(this,Vr,Vr.getVisibleCoordinates(),at.C.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&au.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new at.C(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Vr){const Ir=Vr.transform.padding;Rx(Vr,Vr.transform.height-(Ir.top||0),3,Px),Rx(Vr,Ir.bottom||0,3,r0),Jm(Vr,Ir.left||0,3,Cx),Jm(Vr,Vr.transform.width-(Ir.right||0),3,ga);const nn=Vr.transform.centerPoint;(function(en,Wr,Tn,_n){Yp(en,Wr-1,Tn-10,2,20,_n),Yp(en,Wr-10,Tn-1,20,2,_n)})(Vr,nn.x,Vr.transform.height-nn.y,_b)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),Yt||(this.conflationActive=!1)}prepareLayer(ct){this.gpuTimingStart(ct);const{unsupportedLayers:pt}=this.transform.projection,vt=!pt||!pt.includes(ct.type);if(Os[ct.type]&&(vt||this.terrain&&ct.type==="custom")){const Tt=this.style.getLayerSourceCache(ct);Os[ct.type](ct,Tt,this)}this.gpuTimingEnd()}renderLayer(ct,pt,vt,Tt){vt.isHidden(this.transform.zoom)||(vt.type==="background"||vt.type==="sky"||vt.type==="custom"||vt.type==="model"||vt.type==="raster"||vt.type==="raster-particle"||Tt&&Tt.length)&&(this.id=vt.id,this.gpuTimingStart(vt),ct.transform.projection.unsupportedLayers&&ct.transform.projection.unsupportedLayers.includes(vt.type)&&(!ct.terrain||vt.type!=="custom")||vt.type==="clip"||au[vt.type](ct,pt,vt,Tt,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(ct){if(!this.options.gpuTiming)return;const pt=this.context.extTimerQuery,vt=this.context.gl;let Tt=this.gpuTimers[ct.id];Tt||(Tt=this.gpuTimers[ct.id]={calls:0,cpuTime:0,query:vt.createQuery()}),Tt.calls++,vt.beginQuery(pt.TIME_ELAPSED_EXT,Tt.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const ct=this.context.extTimerQuery,pt=this.context.gl,vt=pt.createQuery();this.deferredRenderGpuTimeQueries.push(vt),pt.beginQuery(ct.TIME_ELAPSED_EXT,vt)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const ct=this.gpuTimers;return this.gpuTimers={},ct}collectDeferredRenderGpuQueries(){const ct=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],ct}queryGpuTimers(ct){const pt={};for(const vt in ct){const Tt=ct[vt],Pt=this.context.extTimerQuery,Ot=Pt.getQueryParameter(Tt.query,this.context.gl.QUERY_RESULT)/1e6;Pt.deleteQueryEXT(Tt.query),pt[vt]=Ot}return pt}queryGpuTimeDeferredRender(ct){if(!this.options.gpuTimingDeferredRender)return 0;const pt=this.context.extTimerQuery,vt=this.context.gl;let Tt=0;for(const Pt of ct)Tt+=pt.getQueryParameter(Pt,vt.QUERY_RESULT)/1e6,pt.deleteQueryEXT(Pt);return Tt}translatePosMatrix(ct,pt,vt,Tt,Pt){if(!vt[0]&&!vt[1])return ct;const Ot=Pt?Tt==="map"?this.transform.angle:0:Tt==="viewport"?-this.transform.angle:0;if(Ot){const Gt=Math.sin(Ot),Zt=Math.cos(Ot);vt=[vt[0]*Zt-vt[1]*Gt,vt[0]*Gt+vt[1]*Zt]}const Ft=[Pt?vt[0]:at.bD(pt,vt[0],this.transform.zoom),Pt?vt[1]:at.bD(pt,vt[1],this.transform.zoom),0],Vt=new Float32Array(16);return at.ae.translate(Vt,ct,Ft),Vt}saveTileTexture(ct){const pt=ct.size[0],vt=this._tileTextures[pt];vt?vt.push(ct):this._tileTextures[pt]=[ct]}getTileTexture(ct){const pt=this._tileTextures[ct];return pt&&pt.length>0?pt.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(ct,pt,vt){const Tt=vt===void 0?this.terrain&&this.terrain.renderingToTexture:vt,Pt=[];return this.style&&this.style.enable3dLights()&&(ct==="globeRaster"||ct==="terrainRaster"?(Pt.push("LIGHTING_3D_MODE"),Pt.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):Tt||Pt.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"?this._shadowMapDebug||Pt.push("DEPTH_TEXTURE"):this.shadowRenderer&&(this.shadowRenderer.useNormalOffset?Pt.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"):Pt.push("RENDER_SHADOWS","DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(Pt.push("TERRAIN"),this.linearFloatFilteringSupported()&&Pt.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&Pt.push("GLOBE"),!this._fogVisible||Tt||pt!==void 0&&!pt||Pt.push("FOG","FOG_DITHERING"),Tt&&Pt.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&Pt.push("OVERDRAW_INSPECTOR"),Pt}getOrCreateProgram(ct,pt){this.cache=this.cache||{};const vt=pt&&pt.defines||[],Tt=pt&&pt.config,Pt=this.currentGlobalDefines(ct,pt&&pt.overrideFog,pt&&pt.overrideRtt).concat(vt),Ot=yx.cacheKey(Vv[ct],ct,Pt,Tt);return this.cache[Ot]||(this.cache[Ot]=new yx(this.context,ct,Vv[ct],Tt,n_[ct],Pt)),this.cache[Ot]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const ct=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(ct.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new at.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(ct,pt){if(this.style.enable3dLights()){const vt=this.style.directionalLight,Tt=this.style.ambientLight;if(vt&&Tt){const Pt=((Ot,Ft,Vt)=>{const Gt=Ot.properties.get("direction"),Zt=Ot.properties.get("color").toRenderColor(Vt.getLut(Ot.scope)).toArray01(),Yt=Ot.properties.get("intensity"),er=Ft.properties.get("color").toRenderColor(Vt.getLut(Ft.scope)).toArray01(),rr=Ft.properties.get("intensity"),sr=[Gt.x,Gt.y,Gt.z],lr=at.bC(er,rr),cr=at.bC(Zt,Yt);return{u_lighting_ambient_color:lr,u_lighting_directional_dir:sr,u_lighting_directional_color:cr,u_ground_radiance:Yv(sr,cr,lr)}})(vt,Tt,this.style);pt.setLightsUniformValues(ct,Pt)}}}uploadCommonUniforms(ct,pt,vt,Tt,Pt){if(this.uploadCommonLightUniforms(ct,pt),this.terrain&&this.terrain.renderingToTexture)return;const Ot=this.style.fog;if(Ot){const Ft=Ot.getOpacity(this.transform.pitch),Vt=((Gt,Zt,Yt,er,rr,sr,lr,cr,ur,br,Er,_r)=>{const $r=Gt.transform,Tr=Zt.properties.get("color").toRenderColor(Gt.style.getLut(Zt.scope)).toArray01();Tr[3]=er;const Ar=Gt.frameCounter/1e3%1,[Fr,zr]=Zt.properties.get("vertical-range");return{u_fog_matrix:Yt?$r.calculateFogTileMatrix(Yt):_r||Gt.identityMat,u_fog_range:Zt.getFovAdjustedRange($r._fov),u_fog_color:Tr,u_fog_horizon_blend:Zt.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(Fr,zr),zr],u_fog_temporal_offset:Ar,u_frustum_tl:rr,u_frustum_tr:sr,u_frustum_br:lr,u_frustum_bl:cr,u_globe_pos:ur,u_globe_radius:br,u_viewport:Er,u_globe_transition:at.a2($r.zoom),u_is_globe:+($r.projection.name==="globe")}})(this,Ot,vt,Ft,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*at.e.devicePixelRatio,this.transform.height*at.e.devicePixelRatio],Tt);pt.setFogUniformValues(ct,Vt)}Pt&&pt.setCutoffUniformValues(ct,Pt.uniformValues)}setTileLoadedFlag(ct){this.tileLoaded=ct}saveCanvasCopy(){const ct=this.canvasCopy();ct&&(this.frameCopies.push(ct),this.tileLoaded=!1)}canvasCopy(){const ct=this.context.gl,pt=ct.createTexture();return ct.bindTexture(ct.TEXTURE_2D,pt),ct.copyTexImage2D(ct.TEXTURE_2D,0,ct.RGBA,0,0,ct.drawingBufferWidth,ct.drawingBufferHeight,0),pt}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const ct=this.style&&this.style.fog;return!!ct&&ct.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const ct=this._backgroundTiles,pt=this._backgroundTiles={},vt=this.transform.coveringTiles({tileSize:512});for(const Tt of vt)pt[Tt.key]=ct[Tt.key]||new at.bA(Tt,512,this.transform.tileZoom,this);return pt}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(ct,pt){return!(!ct.is3D()||ct.minzoom&&ct.minzoom>this.transform.zoom||(this.style._clipLayerIndices.length||ct.sourceLayer!=="building")&&ct.type!=="clip"&&(!pt||pt.type!=="batched-model"))}isTileAffectedByFog(ct){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let pt=this._cachedTileFogOpacities[ct.key];return pt||(this._cachedTileFogOpacities[ct.key]=pt=this.style.fog.getOpacityForTile(ct)),pt[0]>=Jo||pt[1]>=Jo}setupDepthForOcclusion(ct,pt,vt){const Tt=this.context,Pt=Tt.gl,Ot=!!vt;var Ft;vt||(vt={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),Tt.activeTexture.set(Pt.TEXTURE3),ct&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(Pt.NEAREST,Pt.CLAMP_TO_EDGE),vt.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],vt.u_depth_range_unpack=[2/((Ft=this.depthRangeFor3D)[1]-Ft[0]),-1-2*Ft[0]/(Ft[1]-Ft[0])],vt.u_occluder_half_size=.5*this.occlusionParams.occluderSize,vt.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(Pt.NEAREST,Pt.CLAMP_TO_EDGE),Tt.activeTexture.set(Pt.TEXTURE0),Ot||pt.setTerrainUniformValues(Tt,vt)}}class Bl{constructor(ct,pt,vt,Tt){this.screenBounds=ct,this.cameraPoint=pt,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=vt,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,Tt)}static createFromScreenPoints(ct,pt){let vt,Tt;if(ct instanceof at.P||typeof ct[0]=="number"){const Pt=at.P.convert(ct);vt=[Pt],Tt=pt.isPointAboveHorizon(Pt)}else{const Pt=at.P.convert(ct[0]),Ot=at.P.convert(ct[1]);vt=[Pt,Ot],Tt=at.cx(Pt,Ot).every(Ft=>pt.isPointAboveHorizon(Ft))}return new Bl(vt,pt.getCameraPoint(),Tt,pt)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(ct){return at.cx(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],ct)}bufferedCameraGeometry(ct){const pt=this.screenBounds[0],vt=this.screenBounds.length===1?this.screenBounds[0].add(new at.P(1,1)):this.screenBounds[1],Tt=at.cx(pt,vt,0,!1);return this.cameraPoint.y>vt.y&&(this.cameraPoint.x>pt.x&&this.cameraPoint.x<vt.x?Tt.splice(3,0,this.cameraPoint):this.cameraPoint.x>=vt.x?Tt[2]=this.cameraPoint:this.cameraPoint.x<=pt.x&&(Tt[3]=this.cameraPoint)),at.cy(Tt,ct)}bufferedCameraGeometryGlobe(ct){const pt=this.screenBounds[0],vt=this.screenBounds.length===1?this.screenBounds[0].add(new at.P(1,1)):this.screenBounds[1],Tt=at.cx(pt,vt,ct),Pt=this.cameraPoint.clone();switch(3*((Pt.y>pt.y)+(Pt.y>vt.y))+((Pt.x>pt.x)+(Pt.x>vt.x))){case 0:Tt[0]=Pt,Tt[4]=Pt.clone();break;case 1:Tt.splice(1,0,Pt);break;case 2:Tt[1]=Pt;break;case 3:Tt.splice(4,0,Pt);break;case 5:Tt.splice(2,0,Pt);break;case 6:Tt[3]=Pt;break;case 7:Tt.splice(3,0,Pt);break;case 8:Tt[2]=Pt}return Tt}containsTile(ct,pt,vt,Tt=0){const Pt=ct.queryPadding/pt._pixelsPerMercatorPixel+1,Ot=vt?this._bufferedCameraMercator(Pt,pt):this._bufferedScreenMercator(Pt,pt);let Ft=ct.tileID.wrap+(Ot.unwrapped?Tt:0);const Vt=Ot.polygon.map(cr=>at.cz(ct.tileTransform,cr,Ft));if(!at.cA(Vt,0,0,at.a4,at.a4))return;Ft=ct.tileID.wrap+(this.screenGeometryMercator.unwrapped?Tt:0);const Gt=this.screenGeometryMercator.polygon.map(cr=>at.cB(ct.tileTransform,cr,Ft)),Zt=Gt.map(cr=>new at.P(cr[0],cr[1])),Yt=pt.getFreeCameraOptions().position||new at._(0,0,0),er=at.cB(ct.tileTransform,Yt,Ft),rr=Gt.map(cr=>{const ur=at.$.sub(cr,cr,er);return at.$.normalize(ur,ur),new at.aU(er,ur)}),sr=at.bD(ct,1,pt.zoom)*pt._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:Zt,tilespaceRays:rr,bufferedTilespaceGeometry:Vt,bufferedTilespaceBounds:(lr=at.cC(Vt),lr.min.x=at.au(lr.min.x,0,at.a4),lr.min.y=at.au(lr.min.y,0,at.a4),lr.max.x=at.au(lr.max.x,0,at.a4),lr.max.y=at.au(lr.max.y,0,at.a4),lr),tile:ct,tileID:ct.tileID,pixelToTileUnitsFactor:sr};var lr}_bufferedScreenMercator(ct,pt){const vt=Xu(ct);if(this._screenRaycastCache[vt])return this._screenRaycastCache[vt];{let Tt;return Tt=pt.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(ct),pt):{polygon:this.bufferedScreenGeometry(ct).map(Pt=>pt.pointCoordinate3D(Pt)),unwrapped:!0},this._screenRaycastCache[vt]=Tt,Tt}}_bufferedCameraMercator(ct,pt){const vt=Xu(ct);if(this._cameraRaycastCache[vt])return this._cameraRaycastCache[vt];{let Tt;return Tt=pt.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(ct),pt):{polygon:this.bufferedCameraGeometry(ct).map(Pt=>pt.pointCoordinate3D(Pt)),unwrapped:!0},this._cameraRaycastCache[vt]=Tt,Tt}}_projectAndResample(ct,pt){const vt=function(Pt,Ot){const Ft=at.ae.multiply([],Ot.pixelMatrix,Ot.globeMatrix),Vt=[0,-at.cF,0,1],Gt=[0,at.cF,0,1],Zt=[0,0,0,1];at.aB.transformMat4(Vt,Vt,Ft),at.aB.transformMat4(Gt,Gt,Ft),at.aB.transformMat4(Zt,Zt,Ft);const Yt=new at.P(Vt[0]/Vt[3],Vt[1]/Vt[3]),er=new at.P(Gt[0]/Gt[3],Gt[1]/Gt[3]),rr=at.cD(Pt,Yt)&&Vt[3]<Zt[3],sr=at.cD(Pt,er)&&Gt[3]<Zt[3];if(!rr&&!sr)return null;const lr=function(Ar,Fr,zr){for(let Yr=1;Yr<Ar.length;Yr++){const Vr=Tu(Fr.pointCoordinate3D(Ar[Yr-1]).x),Ir=Tu(Fr.pointCoordinate3D(Ar[Yr]).x);if(zr<0){if(Vr<Ir)return{idx:Yr,t:-Vr/(Ir-1-Vr)}}else if(Ir<Vr)return{idx:Yr,t:(1-Vr)/(Ir+1-Vr)}}return null}(Pt,Ot,rr?-1:1);if(!lr)return null;const{idx:cr,t:ur}=lr;let br=cr>1?_p(Pt.slice(0,cr),Ot):[],Er=cr<Pt.length?_p(Pt.slice(cr),Ot):[];br=br.map(Ar=>new at.P(Tu(Ar.x),Ar.y)),Er=Er.map(Ar=>new at.P(Tu(Ar.x),Ar.y));const _r=[...br];_r.length===0&&_r.push(Er[Er.length-1]);const $r=at.a3(_r[_r.length-1].y,(Er.length===0?br[0]:Er[0]).y,ur);let Tr;return Tr=rr?[new at.P(0,$r),new at.P(0,0),new at.P(1,0),new at.P(1,$r)]:[new at.P(1,$r),new at.P(1,1),new at.P(0,1),new at.P(0,$r)],_r.push(...Tr),Er.length===0?_r.push(br[0]):_r.push(...Er),{polygon:_r.map(Ar=>new at._(Ar.x,Ar.y)),unwrapped:!1}}(ct,pt);if(vt)return vt;const Tt=function(Pt,Ot){let Ft=!1,Vt=-1/0,Gt=0;for(let Yt=0;Yt<Pt.length-1;Yt++)Pt[Yt].x>Vt&&(Vt=Pt[Yt].x,Gt=Yt);for(let Yt=0;Yt<Pt.length-1;Yt++){const er=(Gt+Yt)%(Pt.length-1),rr=Pt[er],sr=Pt[er+1];Math.abs(rr.x-sr.x)>.5&&(rr.x<sr.x?(rr.x+=1,er===0&&(Pt[Pt.length-1].x+=1)):(sr.x+=1,er+1===Pt.length-1&&(Pt[0].x+=1)),Ft=!0)}const Zt=at.ak(Ot.center.lng);return Ft&&Zt<Math.abs(Zt-1)&&Pt.forEach(Yt=>{Yt.x-=1}),{polygon:Pt,unwrapped:Ft}}(_p(ct,pt).map(Pt=>new at.P(Tu(Pt.x),Pt.y)),pt);return{polygon:Tt.polygon.map(Pt=>new at._(Pt.x,Pt.y)),unwrapped:Tt.unwrapped}}}function _p(xt,ct){return at.cE(xt,pt=>{const vt=ct.pointCoordinate3D(pt);pt.x=vt.x,pt.y=vt.y},1/256)}function Tu(xt){return xt<0?1+xt%1:xt%1}function Xu(xt){return 100*xt|0}function ew(xt,ct){const pt=at.ae.identity([]);return at.ae.scale(pt,pt,[.5*xt.width,.5*-xt.height,1]),at.ae.translate(pt,pt,[1,-1,0]),at.ae.multiply(pt,pt,xt.calculateProjMatrix(ct.toUnwrapped())),Float32Array.from(pt)}function Au(xt,ct,pt,vt,Tt,Pt,Ot,Ft=!1){const Vt=xt.tilesIn(vt,Ot,Ft);Vt.sort(Ox);const Gt=[];for(const Yt of Vt)Gt.push({wrappedTileID:Yt.tile.tileID.wrapped().key,queryResults:Yt.tile.queryRenderedFeatures(ct,pt,xt._state,Yt,Tt,Pt,ew(xt.transform,Yt.tile.tileID),Ft)});const Zt=function(Yt){const er={},rr={};for(const sr of Yt){const lr=sr.queryResults,cr=sr.wrappedTileID,ur=rr[cr]=rr[cr]||{};for(const br in lr){const Er=lr[br],_r=ur[br]=ur[br]||{},$r=er[br]=er[br]||[];for(const Tr of Er)_r[Tr.featureIndex]||(_r[Tr.featureIndex]=!0,$r.push(Tr))}}return er}(Gt);for(const Yt in Zt)Zt[Yt].forEach(er=>{const rr=er.feature,sr=rr.layer;sr&&sr.type!=="background"&&sr.type!=="sky"&&sr.type!=="slot"&&(rr.source=sr.source,sr["source-layer"]&&(rr.sourceLayer=sr["source-layer"]),rr.state=rr.id!==void 0?xt.getFeatureState(sr["source-layer"],rr.id):{})});return Zt}function tw(xt,ct){const pt=xt.getRenderableIds().map(Pt=>xt.getTileByID(Pt)),vt=[],Tt={};for(let Pt=0;Pt<pt.length;Pt++){const Ot=pt[Pt],Ft=Ot.tileID.canonical.key;Tt[Ft]||(Tt[Ft]=!0,Ot.querySourceFeatures(vt,ct))}return vt}function Ox(xt,ct){const pt=xt.tileID,vt=ct.tileID;return pt.overscaledZ-vt.overscaledZ||pt.canonical.y-vt.canonical.y||pt.wrap-vt.wrap||pt.canonical.x-vt.canonical.x}class $l{constructor(ct){this.style=ct,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const ct=!1,pt=!1;for(const vt in this.style._mergedLayers){const Tt=this.style._mergedLayers[vt];if(Tt.type==="fill-extrusion")this.layers.push({layer:Tt,visible:ct,visibilityChanged:pt});else if(Tt.type==="model"){const Pt=this.style.getLayerSource(Tt);Pt&&Pt.type==="batched-model"&&this.layers.push({layer:Tt,visible:ct,visibilityChanged:pt})}}}onNewFrame(ct){this.layersGotHidden=!1;for(const pt of this.layers){const vt=pt.layer;let Tt=!1;vt.type==="fill-extrusion"?Tt=!vt.isHidden(ct)&&vt.paint.get("fill-extrusion-opacity")>0:vt.type==="model"&&(Tt=!vt.isHidden(ct)&&vt.paint.get("model-opacity")>0),this.layersGotHidden=this.layersGotHidden||!Tt&&pt.visible,pt.visible=Tt}}updateZOffset(ct,pt){this.currentBuildingBuckets=[];for(const Tt of this.layers){const Pt=Tt.layer,Ot=this.style.getLayerSourceCache(Pt);let Ft=1;Pt.type==="fill-extrusion"&&(Ft=Tt.visible?Pt.paint.get("fill-extrusion-vertical-scale"):0);let Vt=Ot?Ot.getTile(pt):null;if(!Vt&&Ot&&pt.canonical.z>Ot.getSource().minzoom){let Gt=pt.scaledTo(Math.min(Ot.getSource().maxzoom,pt.overscaledZ-1));for(;Gt.overscaledZ>=Ot.getSource().minzoom&&(Vt=Ot.getTile(Gt),!Vt&&Gt.overscaledZ!==0);)Gt=Gt.scaledTo(Gt.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:Vt?Vt.getBucket(Pt):null,tileID:Vt?Vt.tileID:pt,verticalScale:Ft})}ct.hasAnyZOffset=!1;let vt=!1;for(let Tt=0;Tt<ct.symbolInstances.length;Tt++){const Pt=ct.symbolInstances.get(Tt),Ot=Pt.zOffset,Ft=this._getHeightAtTileOffset(pt,Pt.tileAnchorX,Pt.tileAnchorY);Pt.zOffset=Ft!==Number.NEGATIVE_INFINITY?Ft:Ot,vt||Ot===Pt.zOffset||(vt=!0),ct.hasAnyZOffset||Pt.zOffset===0||(ct.hasAnyZOffset=!0)}vt&&(ct.zOffsetBuffersNeedUpload=!0,ct.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(ct,pt,vt,Tt){let Pt=pt,Ot=vt;if(ct.canonical.z!==Tt.canonical.z){const Ft=Tt.canonical,Vt=1/(1<<ct.canonical.z-Ft.z);Pt=(pt+ct.canonical.x*at.a4)*Vt-Ft.x*at.a4|0,Ot=(vt+ct.canonical.y*at.a4)*Vt-Ft.y*at.a4|0}return{tileX:Pt,tileY:Ot}}_getHeightAtTileOffset(ct,pt,vt){let Tt,Pt;for(let Ot=0;Ot<this.layers.length;++Ot){if(this.layers[Ot].layer.type!=="fill-extrusion")continue;const{bucket:Ft,tileID:Vt,verticalScale:Gt}=this.currentBuildingBuckets[Ot];if(!Ft)continue;const{tileX:Zt,tileY:Yt}=this._mapCoordToOverlappingTile(ct,pt,vt,Vt),er=Ft.getHeightAtTileCoord(Zt,Yt);er&&er.height!==void 0&&(er.hidden?Tt=er.height:Pt=Math.max(er.height*Gt,Pt||0))}if(Pt!==void 0)return Pt;for(let Ot=0;Ot<this.layers.length;++Ot){const Ft=this.layers[Ot];if(Ft.layer.type!=="model"||!Ft.visible)continue;const{bucket:Vt,tileID:Gt}=this.currentBuildingBuckets[Ot];if(!Vt)continue;const{tileX:Zt,tileY:Yt}=this._mapCoordToOverlappingTile(ct,pt,vt,Gt),er=Vt.getHeightAtTileCoord(Zt,Yt);if(er&&!er.hidden)return er.height===void 0&&Tt!==void 0?Math.min(er.maxHeight,Tt)*er.verticalScale:er.height?er.height*er.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function rw(xt,ct){const pt={};for(const vt in xt)vt!=="ref"&&(pt[vt]=xt[vt]);return at.cG.forEach(vt=>{vt in ct&&(pt[vt]=ct[vt])}),pt}function ey(xt){xt=xt.slice();const ct=Object.create(null);for(let pt=0;pt<xt.length;pt++)ct[xt[pt].id]=xt[pt];for(let pt=0;pt<xt.length;pt++)"ref"in xt[pt]&&(xt[pt]=rw(xt[pt],ct[xt[pt].ref]));return xt}const xa={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function em(xt,ct,pt){pt.push({command:xa.addSource,args:[xt,ct[xt]]})}function d_(xt,ct,pt){ct.push({command:xa.removeSource,args:[xt]}),pt[xt]=!0}function nw(xt,ct,pt,vt){d_(xt,pt,vt),em(xt,ct,pt)}function ty(xt,ct,pt){let vt;for(vt in xt[pt])if(xt[pt].hasOwnProperty(vt)&&vt!=="data"&&!at.d(xt[pt][vt],ct[pt][vt]))return!1;for(vt in ct[pt])if(ct[pt].hasOwnProperty(vt)&&vt!=="data"&&!at.d(xt[pt][vt],ct[pt][vt]))return!1;return!0}function Ju(xt,ct,pt,vt,Tt,Pt){let Ot;for(Ot in ct=ct||{},xt=xt||{})xt.hasOwnProperty(Ot)&&(at.d(xt[Ot],ct[Ot])||pt.push({command:Pt,args:[vt,Ot,ct[Ot],Tt]}));for(Ot in ct)ct.hasOwnProperty(Ot)&&!xt.hasOwnProperty(Ot)&&(at.d(xt[Ot],ct[Ot])||pt.push({command:Pt,args:[vt,Ot,ct[Ot],Tt]}))}function a0(xt){return xt.id}function Pu(xt,ct){return xt[ct.id]=ct,xt}class h_{constructor(ct,pt){this.reset(ct,pt)}reset(ct,pt){this.points=ct||[],this._distances=[0];for(let vt=1;vt<this.points.length;vt++)this._distances[vt]=this._distances[vt-1]+this.points[vt].dist(this.points[vt-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(pt||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(ct){if(this.points.length===1)return this.points[0];ct=at.au(ct,0,1);let pt=1,vt=this._distances[pt];const Tt=ct*this.paddedLength+this.padding;for(;vt<Tt&&pt<this._distances.length;)vt=this._distances[++pt];const Pt=pt-1,Ot=this._distances[Pt],Ft=vt-Ot,Vt=Ft>0?(Tt-Ot)/Ft:0;return this.points[Pt].mult(1-Vt).add(this.points[pt].mult(Vt))}}class ry{constructor(ct,pt,vt){const Tt=this.boxCells=[],Pt=this.circleCells=[];this.xCellCount=Math.ceil(ct/vt),this.yCellCount=Math.ceil(pt/vt);for(let Ot=0;Ot<this.xCellCount*this.yCellCount;Ot++)Tt.push([]),Pt.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=ct,this.height=pt,this.xScale=this.xCellCount/ct,this.yScale=this.yCellCount/pt,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(ct,pt,vt,Tt,Pt){this._forEachCell(pt,vt,Tt,Pt,this._insertBoxCell,this.boxUid++),this.boxKeys.push(ct),this.bboxes.push(pt),this.bboxes.push(vt),this.bboxes.push(Tt),this.bboxes.push(Pt)}insertCircle(ct,pt,vt,Tt){this._forEachCell(pt-Tt,vt-Tt,pt+Tt,vt+Tt,this._insertCircleCell,this.circleUid++),this.circleKeys.push(ct),this.circles.push(pt),this.circles.push(vt),this.circles.push(Tt)}_insertBoxCell(ct,pt,vt,Tt,Pt,Ot){this.boxCells[Pt].push(Ot)}_insertCircleCell(ct,pt,vt,Tt,Pt,Ot){this.circleCells[Pt].push(Ot)}_query(ct,pt,vt,Tt,Pt,Ot){if(vt<0||ct>this.width||Tt<0||pt>this.height)return!Pt&&[];const Ft=[];if(ct<=0&&pt<=0&&this.width<=vt&&this.height<=Tt){if(Pt)return!0;for(let Vt=0;Vt<this.boxKeys.length;Vt++)Ft.push({key:this.boxKeys[Vt],x1:this.bboxes[4*Vt],y1:this.bboxes[4*Vt+1],x2:this.bboxes[4*Vt+2],y2:this.bboxes[4*Vt+3]});for(let Vt=0;Vt<this.circleKeys.length;Vt++){const Gt=this.circles[3*Vt],Zt=this.circles[3*Vt+1],Yt=this.circles[3*Vt+2];Ft.push({key:this.circleKeys[Vt],x1:Gt-Yt,y1:Zt-Yt,x2:Gt+Yt,y2:Zt+Yt})}return Ot?Ft.filter(Ot):Ft}return this._forEachCell(ct,pt,vt,Tt,this._queryCell,Ft,{hitTest:Pt,seenUids:{box:{},circle:{}}},Ot),Pt?Ft.length>0:Ft}_queryCircle(ct,pt,vt,Tt,Pt){const Ot=ct-vt,Ft=ct+vt,Vt=pt-vt,Gt=pt+vt;if(Ft<0||Ot>this.width||Gt<0||Vt>this.height)return!Tt&&[];const Zt=[];return this._forEachCell(Ot,Vt,Ft,Gt,this._queryCellCircle,Zt,{hitTest:Tt,circle:{x:ct,y:pt,radius:vt},seenUids:{box:{},circle:{}}},Pt),Tt?Zt.length>0:Zt}query(ct,pt,vt,Tt,Pt){return this._query(ct,pt,vt,Tt,!1,Pt)}hitTest(ct,pt,vt,Tt,Pt){return this._query(ct,pt,vt,Tt,!0,Pt)}hitTestCircle(ct,pt,vt,Tt){return this._queryCircle(ct,pt,vt,!0,Tt)}_queryCell(ct,pt,vt,Tt,Pt,Ot,Ft,Vt){const Gt=Ft.seenUids,Zt=this.boxCells[Pt];if(Zt!==null){const er=this.bboxes;for(const rr of Zt)if(!Gt.box[rr]){Gt.box[rr]=!0;const sr=4*rr;if(ct<=er[sr+2]&&pt<=er[sr+3]&&vt>=er[sr+0]&&Tt>=er[sr+1]&&(!Vt||Vt(this.boxKeys[rr]))){if(Ft.hitTest)return Ot.push(!0),!0;Ot.push({key:this.boxKeys[rr],x1:er[sr],y1:er[sr+1],x2:er[sr+2],y2:er[sr+3]})}}}const Yt=this.circleCells[Pt];if(Yt!==null){const er=this.circles;for(const rr of Yt)if(!Gt.circle[rr]){Gt.circle[rr]=!0;const sr=3*rr;if(this._circleAndRectCollide(er[sr],er[sr+1],er[sr+2],ct,pt,vt,Tt)&&(!Vt||Vt(this.circleKeys[rr]))){if(Ft.hitTest)return Ot.push(!0),!0;{const lr=er[sr],cr=er[sr+1],ur=er[sr+2];Ot.push({key:this.circleKeys[rr],x1:lr-ur,y1:cr-ur,x2:lr+ur,y2:cr+ur})}}}}}_queryCellCircle(ct,pt,vt,Tt,Pt,Ot,Ft,Vt){const Gt=Ft.circle,Zt=Ft.seenUids,Yt=this.boxCells[Pt];if(Yt!==null){const rr=this.bboxes;for(const sr of Yt)if(!Zt.box[sr]){Zt.box[sr]=!0;const lr=4*sr;if(this._circleAndRectCollide(Gt.x,Gt.y,Gt.radius,rr[lr+0],rr[lr+1],rr[lr+2],rr[lr+3])&&(!Vt||Vt(this.boxKeys[sr])))return Ot.push(!0),!0}}const er=this.circleCells[Pt];if(er!==null){const rr=this.circles;for(const sr of er)if(!Zt.circle[sr]){Zt.circle[sr]=!0;const lr=3*sr;if(this._circlesCollide(rr[lr],rr[lr+1],rr[lr+2],Gt.x,Gt.y,Gt.radius)&&(!Vt||Vt(this.circleKeys[sr])))return Ot.push(!0),!0}}}_forEachCell(ct,pt,vt,Tt,Pt,Ot,Ft,Vt){const Gt=this._convertToXCellCoord(ct),Zt=this._convertToYCellCoord(pt),Yt=this._convertToXCellCoord(vt),er=this._convertToYCellCoord(Tt);for(let rr=Gt;rr<=Yt;rr++)for(let sr=Zt;sr<=er;sr++)if(Pt.call(this,ct,pt,vt,Tt,this.xCellCount*sr+rr,Ot,Ft,Vt))return}_convertToXCellCoord(ct){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(ct*this.xScale)))}_convertToYCellCoord(ct){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(ct*this.yScale)))}_circlesCollide(ct,pt,vt,Tt,Pt,Ot){const Ft=Tt-ct,Vt=Pt-pt,Gt=vt+Ot;return Gt*Gt>Ft*Ft+Vt*Vt}_circleAndRectCollide(ct,pt,vt,Tt,Pt,Ot,Ft){const Vt=(Ot-Tt)/2,Gt=Math.abs(ct-(Tt+Vt));if(Gt>Vt+vt)return!1;const Zt=(Ft-Pt)/2,Yt=Math.abs(pt-(Pt+Zt));if(Yt>Zt+vt)return!1;if(Gt<=Vt||Yt<=Zt)return!0;const er=Gt-Vt,rr=Yt-Zt;return er*er+rr*rr<=vt*vt}}const Js=100;class iw{constructor(ct,pt,vt=new ry(ct.width+200,ct.height+200,25),Tt=new ry(ct.width+200,ct.height+200,25)){this.transform=ct,this.grid=vt,this.ignoredGrid=Tt,this.pitchfactor=Math.cos(ct._pitch)*ct.cameraToCenterDistance,this.screenRightBoundary=ct.width+Js,this.screenBottomBoundary=ct.height+Js,this.gridRightBoundary=ct.width+200,this.gridBottomBoundary=ct.height+200,this.fogState=pt}placeCollisionBox(ct,pt,vt,Tt,Pt,Ot,Ft,Vt){let Gt=vt.projectedAnchorX,Zt=vt.projectedAnchorY,Yt=vt.projectedAnchorZ;const er=vt.elevation,rr=vt.tileID,sr=ct.getProjection();if(er&&rr){const[Tr,Ar,Fr]=sr.upVector(rr.canonical,vt.tileAnchorX,vt.tileAnchorY),zr=sr.upVectorScale(rr.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;Gt+=Tr*er*zr,Zt+=Ar*er*zr,Yt+=Fr*er*zr}const lr=this.projectAndGetPerspectiveRatio(Ft,Gt,Zt,Yt,vt.tileID,sr.name==="globe"||!!er||this.transform.pitch>0,sr),cr=Ot*lr.perspectiveRatio,ur=(vt.x1*pt+Tt.x-vt.padding)*cr+lr.point.x,br=(vt.y1*pt+Tt.y-vt.padding)*cr+lr.point.y,Er=(vt.x2*pt+Tt.x+vt.padding)*cr+lr.point.x,_r=(vt.y2*pt+Tt.y+vt.padding)*cr+lr.point.y,$r=lr.perspectiveRatio<=.55||lr.occluded;return!this.isInsideGrid(ur,br,Er,_r)||!Pt&&this.grid.hitTest(ur,br,Er,_r,Vt)||$r?{box:[],offscreen:!1,occluded:lr.occluded}:{box:[ur,br,Er,_r],offscreen:this.isOffscreen(ur,br,Er,_r),occluded:!1}}placeCollisionCircles(ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr){const cr=[],ur=this.transform.elevation,br=ct.getProjection(),Er=ur?ur.getAtTileOffsetFunc(lr,this.transform.center.lat,this.transform.worldSize,br):null,_r=new at.P(vt.tileAnchorX,vt.tileAnchorY);let{x:$r,y:Tr,z:Ar}=br.projectTilePoint(_r.x,_r.y,lr.canonical);if(Er){const[_n,Xr,hn]=Er(_r);$r+=_n,Tr+=Xr,Ar+=hn}const Fr=br.name==="globe",zr=this.projectAndGetPerspectiveRatio(Ft,$r,Tr,Ar,lr,Fr||!!ur||this.transform.pitch>0,br),{perspectiveRatio:Yr}=zr,Vr=(Yt?Ot/Yr:Ot*Yr)/at.bP,Ir=iu($r,Tr,Ar,Vt),nn=zr.signedDistanceFromCamera>0?jm(Vr,Pt,vt.lineOffsetX*Vr,vt.lineOffsetY*Vr,!1,Ir,_r,vt,Tt,Vt,{},ur&&!Yt?Er:null,Yt&&!!ur,br,lr,Yt):null;let en=!1,Wr=!1,Tn=!0;if(nn&&!zr.occluded){const _n=.5*rr*Yr+sr,Xr=new at.P(-100,-100),hn=new at.P(this.screenRightBoundary,this.screenBottomBoundary),Ur=new h_,{first:bn,last:Sn}=nn,zn=bn.path.length;let Un=[];for(let uo=zn-1;uo>=1;uo--)Un.push(bn.path[uo]);for(let uo=1;uo<Sn.path.length;uo++)Un.push(Sn.path[uo]);const Qn=2.5*_n;Gt&&(Un=Un.map(([uo,So,fo],ko)=>(Er&&!Fr&&(fo=Er(ko<zn-1?bn.tilePath[zn-1-ko]:Sn.tilePath[ko-zn+2])[2]),iu(uo,So,fo,Gt))),Un.some(uo=>uo[3]<=0)&&(Un=[]));let Wn=[];if(Un.length>0){let uo=1/0,So=-1/0,fo=1/0,ko=-1/0;for(const Vo of Un)uo=Math.min(uo,Vo[0]),fo=Math.min(fo,Vo[1]),So=Math.max(So,Vo[0]),ko=Math.max(ko,Vo[1]);So>=Xr.x&&uo<=hn.x&&ko>=Xr.y&&fo<=hn.y&&(Wn=[Un.map(Vo=>new at.P(Vo[0],Vo[1]))],(uo<Xr.x||So>hn.x||fo<Xr.y||ko>hn.y)&&(Wn=at.cH(Wn,Xr.x,Xr.y,hn.x,hn.y)))}for(const uo of Wn){Ur.reset(uo,.25*_n);let So=0;So=Ur.length<=.5*_n?1:Math.ceil(Ur.paddedLength/Qn)+1;for(let fo=0;fo<So;fo++){const ko=fo/Math.max(So-1,1),Vo=Ur.lerp(ko),ss=Vo.x+Js,rs=Vo.y+Js;cr.push(ss,rs,_n,0);const Uo=ss-_n,ts=rs-_n,Oo=ss+_n,Do=rs+_n;if(Tn=Tn&&this.isOffscreen(Uo,ts,Oo,Do),Wr=Wr||this.isInsideGrid(Uo,ts,Oo,Do),!pt&&this.grid.hitTestCircle(ss,rs,_n,er)&&(en=!0,!Zt))return{circles:[],offscreen:!1,collisionDetected:en,occluded:!1}}}}return{circles:!Zt&&en||!Wr?[]:cr,offscreen:Tn,collisionDetected:en,occluded:zr.occluded}}queryRenderedSymbols(ct){if(ct.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const pt=[];let vt=1/0,Tt=1/0,Pt=-1/0,Ot=-1/0;for(const Zt of ct){const Yt=new at.P(Zt.x+Js,Zt.y+Js);vt=Math.min(vt,Yt.x),Tt=Math.min(Tt,Yt.y),Pt=Math.max(Pt,Yt.x),Ot=Math.max(Ot,Yt.y),pt.push(Yt)}const Ft=this.grid.query(vt,Tt,Pt,Ot).concat(this.ignoredGrid.query(vt,Tt,Pt,Ot)),Vt={},Gt={};for(const Zt of Ft){const Yt=Zt.key;if(Vt[Yt.bucketInstanceId]===void 0&&(Vt[Yt.bucketInstanceId]={}),Vt[Yt.bucketInstanceId][Yt.featureIndex])continue;const er=[new at.P(Zt.x1,Zt.y1),new at.P(Zt.x2,Zt.y1),new at.P(Zt.x2,Zt.y2),new at.P(Zt.x1,Zt.y2)];at.cI(pt,er)&&(Vt[Yt.bucketInstanceId][Yt.featureIndex]=!0,Gt[Yt.bucketInstanceId]===void 0&&(Gt[Yt.bucketInstanceId]=[]),Gt[Yt.bucketInstanceId].push(Yt.featureIndex))}return Gt}insertCollisionBox(ct,pt,vt,Tt,Pt){(pt?this.ignoredGrid:this.grid).insert({bucketInstanceId:vt,featureIndex:Tt,collisionGroupID:Pt},ct[0],ct[1],ct[2],ct[3])}insertCollisionCircles(ct,pt,vt,Tt,Pt){const Ot=pt?this.ignoredGrid:this.grid,Ft={bucketInstanceId:vt,featureIndex:Tt,collisionGroupID:Pt};for(let Vt=0;Vt<ct.length;Vt+=4)Ot.insertCircle(Ft,ct[Vt],ct[Vt+1],ct[Vt+2])}projectAndGetPerspectiveRatio(ct,pt,vt,Tt,Pt,Ot,Ft){const Vt=[pt,vt,Tt,1];let Gt=!1;Tt||this.transform.pitch>0?(at.aB.transformMat4(Vt,Vt,ct),this.fogState&&Pt&&Ft.name!=="globe"&&(Gt=function(er,rr,sr,lr,cr,ur){const br=ur.calculateFogTileMatrix(cr),Er=[rr,sr,lr];return at.$.transformMat4(Er,Er,br),Wo(er,at.$.length(Er),ur.pitch,ur._fov)}(this.fogState,pt,vt,Tt,Pt.toUnwrapped(),this.transform)>.9)):fx(Vt,Vt,ct);const Zt=Vt[3];return{point:new at.P((Vt[0]/Zt+1)/2*this.transform.width+Js,(-Vt[1]/Zt+1)/2*this.transform.height+Js),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(Ft)/Zt*.5,1.5),signedDistanceFromCamera:Zt,occluded:Ot&&Vt[2]>Zt||Gt}}isOffscreen(ct,pt,vt,Tt){return vt<Js||ct>=this.screenRightBoundary||Tt<Js||pt>this.screenBottomBoundary}isInsideGrid(ct,pt,vt,Tt){return vt>=0&&ct<this.gridRightBoundary&&Tt>=0&&pt<this.gridBottomBoundary}getViewportMatrix(){const ct=at.ae.identity([]);return at.ae.translate(ct,ct,[-100,-100,0]),ct}}class f_{constructor(ct,pt,vt,Tt){this.opacity=ct?Math.max(0,Math.min(1,ct.opacity+(ct.placed?pt:-pt))):Tt&&vt?1:0,this.placed=vt}isHidden(){return this.opacity===0&&!this.placed}}class ny{constructor(ct,pt,vt,Tt,Pt,Ot=!1){this.text=new f_(ct?ct.text:null,pt,vt,Pt),this.icon=new f_(ct?ct.icon:null,pt,Tt,Pt),this.clipped=Ot}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class s0{constructor(ct,pt,vt,Tt=!1){this.text=ct,this.icon=pt,this.skipFade=vt,this.clipped=Tt}}class ow{constructor(){this.invProjMatrix=at.ae.create(),this.viewportMatrix=at.ae.create(),this.circles=[]}}class jx{constructor(ct,pt,vt,Tt,Pt){this.bucketInstanceId=ct,this.featureIndex=pt,this.sourceLayerIndex=vt,this.bucketIndex=Tt,this.tileID=Pt}}class p_{constructor(ct){this.crossSourceCollisions=ct,this.maxGroupID=0,this.collisionGroups={}}get(ct){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[ct]){const pt=++this.maxGroupID;this.collisionGroups[ct]={ID:pt,predicate:vt=>vt.collisionGroupID===pt}}return this.collisionGroups[ct]}}function Dx(xt,ct,pt,vt,Tt){const{horizontalAlign:Pt,verticalAlign:Ot}=at.bS(xt),Ft=-(Pt-.5)*ct,Vt=-(Ot-.5)*pt,Gt=at.bR(xt,vt);return new at.P(Ft+Gt[0]*Tt,Vt+Gt[1]*Tt)}function l0(xt,ct,pt,vt,Tt){const Pt=new at.P(xt,ct);return pt&&Pt._rotate(vt?Tt:-Tt),Pt}class m_{constructor(ct,pt,vt,Tt,Pt,Ot){this.transform=ct.clone(),this.projection=ct.projection.name,this.collisionIndex=new iw(this.transform,Pt),this.buildingIndex=Ot,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=pt,this.retainedQueryData={},this.collisionGroups=new p_(vt),this.collisionCircleArrays={},this.prevPlacement=Tt,Tt&&(Tt.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(ct,pt,vt,Tt){const Pt=vt.getBucket(pt),Ot=vt.latestFeatureIndex;if(!Pt||!Ot||pt.fqid!==Pt.layerIds[0])return;const Ft=Pt.layers[0].layout,Vt=vt.collisionBoxArray,Gt=Math.pow(2,this.transform.zoom-vt.tileID.overscaledZ),Zt=vt.tileSize/at.a4,Yt=vt.tileID.toUnwrapped();this.transform.setProjection(Pt.projection);const er=(rr=vt.tileID,sr=Pt.getProjection(),lr=this.transform,sr.name===this.projection?lr.calculateProjMatrix(rr.toUnwrapped()):gp(lr,sr,rr));var rr,sr,lr;const cr=Ft.get("text-pitch-alignment")==="map",ur=Ft.get("text-rotation-alignment")==="map";pt.compileFilter();const br=pt.dynamicFilter(),Er=pt.dynamicFilterNeedsFeature(),_r=this.transform.calculatePixelsToTileUnitsMatrix(vt),$r=By(er,vt.tileID.canonical,cr,ur,this.transform,Pt.getProjection(),_r);let Tr=null;if(cr){const zr=zy(er,vt.tileID.canonical,cr,ur,this.transform,Pt.getProjection(),_r);Tr=at.ae.multiply([],this.transform.labelPlaneMatrix,zr)}let Ar=null;br&&vt.latestFeatureIndex&&(Ar={unwrappedTileID:Yt,dynamicFilter:br,dynamicFilterNeedsFeature:Er,featureIndex:vt.latestFeatureIndex}),this.retainedQueryData[Pt.bucketInstanceId]=new jx(Pt.bucketInstanceId,Ot,Pt.sourceLayerIndex,Pt.index,vt.tileID);const Fr={bucket:Pt,layout:Ft,posMatrix:er,textLabelPlaneMatrix:$r,labelToScreenMatrix:Tr,clippingData:Ar,scale:Gt,textPixelRatio:Zt,holdingForFade:vt.holdingForFade(),collisionBoxArray:Vt,partiallyEvaluatedTextSize:at.aE(Pt.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:at.aE(Pt.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Pt.sourceID)};if(Tt)for(const zr of Pt.sortKeyRanges){const{sortKey:Yr,symbolInstanceStart:Vr,symbolInstanceEnd:Ir}=zr;ct.push({sortKey:Yr,symbolInstanceStart:Vr,symbolInstanceEnd:Ir,parameters:Fr})}else ct.push({symbolInstanceStart:0,symbolInstanceEnd:Pt.symbolInstances.length,parameters:Fr})}attemptAnchorPlacement(ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt,Zt,Yt,er,rr,sr,lr,cr,ur,br){const{textOffset0:Er,textOffset1:_r,crossTileID:$r}=er,Tr=[Er,_r],Ar=Dx(ct,vt,Tt,Tr,Pt),Fr=this.collisionIndex.placeCollisionBox(sr,Pt,pt,l0(Ar.x,Ar.y,Ot,Ft,this.transform.angle),Yt,Vt,Gt,Zt.predicate);if(cr){const zr=sr.getSymbolInstanceIconSize(br,this.transform.zoom,er.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(sr,zr,cr,l0(Ar.x,Ar.y,Ot,Ft,this.transform.angle),Yt,Vt,Gt,Zt.predicate).box.length===0)return}if(Fr.box.length>0){let zr;return this.prevPlacement&&this.prevPlacement.variableOffsets[$r]&&this.prevPlacement.placements[$r]&&this.prevPlacement.placements[$r].text&&(zr=this.prevPlacement.variableOffsets[$r].anchor),this.variableOffsets[$r]={textOffset:Tr,width:vt,height:Tt,anchor:ct,textScale:Pt,prevAnchor:zr},this.markUsedJustification(sr,ct,er,lr),sr.allowVerticalPlacement&&(this.markUsedOrientation(sr,lr,er),this.placedOrientations[$r]=lr),{shift:Ar,placedGlyphBoxes:Fr}}}placeLayerBucketPart(ct,pt,vt,Tt){const{bucket:Pt,layout:Ot,posMatrix:Ft,textLabelPlaneMatrix:Vt,labelToScreenMatrix:Gt,clippingData:Zt,textPixelRatio:Yt,holdingForFade:er,collisionBoxArray:rr,partiallyEvaluatedTextSize:sr,partiallyEvaluatedIconSize:lr,collisionGroup:cr}=ct.parameters,ur=Ot.get("text-optional"),br=Ot.get("icon-optional"),Er=Ot.get("text-allow-overlap"),_r=Ot.get("icon-allow-overlap"),$r=Ot.get("text-rotation-alignment")==="map",Tr=Ot.get("text-pitch-alignment")==="map",Ar=Ot.get("symbol-z-order")==="viewport-y",Fr=Ot.get("symbol-z-elevate");this.transform.setProjection(Pt.projection);let zr=Er&&(_r||!Pt.hasIconData()||br),Yr=_r&&(Er||!Pt.hasTextData()||ur);!Pt.collisionArrays&&rr&&Pt.deserializeCollisionBoxes(rr),vt&&Tt&&Pt.updateCollisionDebugBuffers(this.transform.zoom,rr);const Vr=(Ir,nn,en)=>{const{crossTileID:Wr,numVerticalGlyphVertices:Tn}=Ir;if(Zt){const Oo={zoom:this.transform.zoom,pitch:this.transform.pitch};let Do=null;if(Zt.dynamicFilterNeedsFeature){const To=this.retainedQueryData[Pt.bucketInstanceId];Do=Zt.featureIndex.loadFeature({featureIndex:Ir.featureIndex,bucketIndex:To.bucketIndex,sourceLayerIndex:To.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,Zt.dynamicFilter)(Oo,Do,this.retainedQueryData[Pt.bucketInstanceId].tileID.canonical,new at.P(Ir.tileAnchorX,Ir.tileAnchorY),this.transform.calculateDistanceTileData(Zt.unwrappedTileID)))return this.placements[Wr]=new s0(!1,!1,!1,!0),void pt.add(Wr)}if(pt.has(Wr))return;if(er)return void(this.placements[Wr]=new s0(!1,!1,!1));let _n=!1,Xr=!1,hn=!0,Ur=!1,bn=!1,Sn=null,zn={box:null,offscreen:null,occluded:null},Un={box:null,offscreen:null,occluded:null},Qn=null,Wn=null,uo=null,So=0,fo=0,ko=0;en.textFeatureIndex?So=en.textFeatureIndex:Ir.useRuntimeCollisionCircles&&(So=Ir.featureIndex),en.verticalTextFeatureIndex&&(fo=en.verticalTextFeatureIndex);const Vo=Oo=>{Oo.tileID=this.retainedQueryData[Pt.bucketInstanceId].tileID;const Do=this.transform.elevation;Oo.elevation=Ir.zOffset+(Do?Do.getAtTileOffset(Oo.tileID,Oo.tileAnchorX,Oo.tileAnchorY):0)},ss=en.textBox;if(ss){Vo(ss);const Oo=To=>{let Ko=at.aF.horizontal;if(Pt.allowVerticalPlacement&&!To&&this.prevPlacement){const Lo=this.prevPlacement.placedOrientations[Wr];Lo&&(this.placedOrientations[Wr]=Lo,Ko=Lo,this.markUsedOrientation(Pt,Ko,Ir))}return Ko},Do=(To,Ko)=>{if(Pt.allowVerticalPlacement&&Tn>0&&en.verticalTextBox){for(const Lo of Pt.writingModes)if(Lo===at.aF.vertical?(zn=Ko(),Un=zn):zn=To(),zn&&zn.box&&zn.box.length)break}else zn=To()};if(Ot.get("text-variable-anchor")){let To=Ot.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Wr]){const yo=this.prevPlacement.variableOffsets[Wr];To.indexOf(yo.anchor)>0&&(To=To.filter(As=>As!==yo.anchor),To.unshift(yo.anchor))}const Ko=(yo,As,Ps)=>{const Qs=Pt.getSymbolInstanceTextSize(sr,Ir,this.transform.zoom,nn),yl=(yo.x2-yo.x1)*Qs+2*yo.padding,Us=(yo.y2-yo.y1)*Qs+2*yo.padding,xl=Ir.hasIconTextFit&&!_r?As:null;xl&&Vo(xl);let Ns={box:[],offscreen:!1,occluded:!1};const Gs=Er?2*To.length:To.length;for(let In=0;In<Gs;++In){const to=this.attemptAnchorPlacement(To[In%To.length],yo,yl,Us,Qs,$r,Tr,Yt,Ft,cr,In>=To.length,Ir,nn,Pt,Ps,xl,sr,lr);if(to&&(Ns=to.placedGlyphBoxes,Ns&&Ns.box&&Ns.box.length)){_n=!0,Sn=to.shift;break}}return Ns};Do(()=>Ko(ss,en.iconBox,at.aF.horizontal),()=>{const yo=en.verticalTextBox;return yo&&Vo(yo),Pt.allowVerticalPlacement&&!(zn&&zn.box&&zn.box.length)&&Tn>0&&yo?Ko(yo,en.verticalIconBox,at.aF.vertical):{box:null,offscreen:null,occluded:null}}),zn&&(_n=zn.box,hn=zn.offscreen,Ur=zn.occluded);const Lo=Oo(!(!zn||!zn.box));if(!_n&&this.prevPlacement){const yo=this.prevPlacement.variableOffsets[Wr];yo&&(this.variableOffsets[Wr]=yo,this.markUsedJustification(Pt,yo.anchor,Ir,Lo))}}else{const To=(Ko,Lo)=>{const yo=Pt.getSymbolInstanceTextSize(sr,Ir,this.transform.zoom,nn),As=this.collisionIndex.placeCollisionBox(Pt,yo,Ko,new at.P(0,0),Er,Yt,Ft,cr.predicate);return As&&As.box&&As.box.length&&(this.markUsedOrientation(Pt,Lo,Ir),this.placedOrientations[Wr]=Lo),As};Do(()=>To(ss,at.aF.horizontal),()=>{const Ko=en.verticalTextBox;return Pt.allowVerticalPlacement&&Tn>0&&Ko?(Vo(Ko),To(Ko,at.aF.vertical)):{box:null,offscreen:null,occluded:null}}),Oo(!!(zn&&zn.box&&zn.box.length))}}if(Qn=zn,_n=Qn&&Qn.box&&Qn.box.length>0,hn=Qn&&Qn.offscreen,Ur=Qn&&Qn.occluded,Ir.useRuntimeCollisionCircles){const Oo=Pt.text.placedSymbolArray.get(Ir.centerJustifiedTextSymbolIndex>=0?Ir.centerJustifiedTextSymbolIndex:Ir.verticalPlacedTextSymbolIndex),Do=at.aG(Pt.textSizeData,sr,Oo),To=Ot.get("text-padding");Wn=this.collisionIndex.placeCollisionCircles(Pt,Er,Oo,Pt.lineVertexArray,Pt.glyphOffsetArray,Do,Ft,Vt,Gt,vt,Tr,cr.predicate,Ir.collisionCircleDiameter*Do/at.bP,To,this.retainedQueryData[Pt.bucketInstanceId].tileID),_n=Er||Wn.circles.length>0&&!Wn.collisionDetected,hn=hn&&Wn.offscreen,Ur=Wn.occluded}if(en.iconFeatureIndex&&(ko=en.iconFeatureIndex),en.iconBox){const Oo=Do=>{Vo(Do);const To=Ir.hasIconTextFit&&Sn?l0(Sn.x,Sn.y,$r,Tr,this.transform.angle):new at.P(0,0),Ko=Pt.getSymbolInstanceIconSize(lr,this.transform.zoom,Ir.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(Pt,Ko,Do,To,_r,Yt,Ft,cr.predicate)};Un&&Un.box&&Un.box.length&&en.verticalIconBox?(uo=Oo(en.verticalIconBox),Xr=uo.box.length>0):(uo=Oo(en.iconBox),Xr=uo.box.length>0),hn=hn&&uo.offscreen,bn=uo.occluded}const rs=ur||Ir.numHorizontalGlyphVertices===0&&Tn===0,Uo=br||Ir.numIconVertices===0;if(rs||Uo?Uo?rs||(Xr=Xr&&_n):_n=Xr&&_n:Xr=_n=Xr&&_n,_n&&Qn&&Qn.box&&this.collisionIndex.insertCollisionBox(Qn.box,Ot.get("text-ignore-placement"),Pt.bucketInstanceId,Un&&Un.box&&fo?fo:So,cr.ID),Xr&&uo&&this.collisionIndex.insertCollisionBox(uo.box,Ot.get("icon-ignore-placement"),Pt.bucketInstanceId,ko,cr.ID),Wn&&(_n&&this.collisionIndex.insertCollisionCircles(Wn.circles,Ot.get("text-ignore-placement"),Pt.bucketInstanceId,So,cr.ID),vt)){const Oo=Pt.bucketInstanceId;let Do=this.collisionCircleArrays[Oo];Do===void 0&&(Do=this.collisionCircleArrays[Oo]=new ow);for(let To=0;To<Wn.circles.length;To+=4)Do.circles.push(Wn.circles[To+0]),Do.circles.push(Wn.circles[To+1]),Do.circles.push(Wn.circles[To+2]),Do.circles.push(Wn.collisionDetected?1:0)}const ts=Pt.projection.name!=="globe";zr=zr&&(ts||!Ur),Yr=Yr&&(ts||!bn),this.placements[Wr]=new s0(_n||zr,Xr||Yr,hn||Pt.justReloaded),pt.add(Wr)};if(Fr&&this.buildingIndex&&(this.buildingIndex.updateZOffset(Pt,this.retainedQueryData[Pt.bucketInstanceId].tileID),Pt.updateZOffset()),Ar){const Ir=Pt.getSortedSymbolIndexes(this.transform.angle);for(let nn=Ir.length-1;nn>=0;--nn){const en=Ir[nn];Vr(Pt.symbolInstances.get(en),en,Pt.collisionArrays[en])}Pt.hasAnyZOffset&&at.w(`${Pt.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(Pt.hasAnyZOffset){const Ir=Pt.getSortedIndexesByZOffset();for(let nn=0;nn<Ir.length;++nn){const en=Ir[nn];Vr(Pt.symbolInstances.get(en),en,Pt.collisionArrays[en])}}else for(let Ir=ct.symbolInstanceStart;Ir<ct.symbolInstanceEnd;Ir++)Vr(Pt.symbolInstances.get(Ir),Ir,Pt.collisionArrays[Ir]);if(vt&&Pt.bucketInstanceId in this.collisionCircleArrays){const Ir=this.collisionCircleArrays[Pt.bucketInstanceId];at.ae.invert(Ir.invProjMatrix,Ft),Ir.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pt.justReloaded=!1}markUsedJustification(ct,pt,vt,Tt){const{leftJustifiedTextSymbolIndex:Pt,centerJustifiedTextSymbolIndex:Ot,rightJustifiedTextSymbolIndex:Ft,verticalPlacedTextSymbolIndex:Vt,crossTileID:Gt}=vt,Zt=at.cM(pt),Yt=Tt===at.aF.vertical?Vt:Zt==="left"?Pt:Zt==="center"?Ot:Zt==="right"?Ft:-1;Pt>=0&&(ct.text.placedSymbolArray.get(Pt).crossTileID=Yt>=0&&Pt!==Yt?0:Gt),Ot>=0&&(ct.text.placedSymbolArray.get(Ot).crossTileID=Yt>=0&&Ot!==Yt?0:Gt),Ft>=0&&(ct.text.placedSymbolArray.get(Ft).crossTileID=Yt>=0&&Ft!==Yt?0:Gt),Vt>=0&&(ct.text.placedSymbolArray.get(Vt).crossTileID=Yt>=0&&Vt!==Yt?0:Gt)}markUsedOrientation(ct,pt,vt){const Tt=pt===at.aF.horizontal||pt===at.aF.horizontalOnly?pt:0,Pt=pt===at.aF.vertical?pt:0,{leftJustifiedTextSymbolIndex:Ot,centerJustifiedTextSymbolIndex:Ft,rightJustifiedTextSymbolIndex:Vt,verticalPlacedTextSymbolIndex:Gt}=vt,Zt=ct.text.placedSymbolArray;Ot>=0&&(Zt.get(Ot).placedOrientation=Tt),Ft>=0&&(Zt.get(Ft).placedOrientation=Tt),Vt>=0&&(Zt.get(Vt).placedOrientation=Tt),Gt>=0&&(Zt.get(Gt).placedOrientation=Pt)}commit(ct){this.commitTime=ct,this.zoomAtLastRecencyCheck=this.transform.zoom;const pt=this.prevPlacement;let vt=!1;this.prevZoomAdjustment=pt?pt.zoomAdjustment(this.transform.zoom):0;const Tt=pt?pt.symbolFadeChange(ct):1,Pt=pt?pt.opacities:{},Ot=pt?pt.variableOffsets:{},Ft=pt?pt.placedOrientations:{};for(const Vt in this.placements){const Gt=this.placements[Vt],Zt=Pt[Vt];Zt?(this.opacities[Vt]=new ny(Zt,Tt,Gt.text,Gt.icon,null,Gt.clipped),vt=vt||Gt.text!==Zt.text.placed||Gt.icon!==Zt.icon.placed):(this.opacities[Vt]=new ny(null,Tt,Gt.text,Gt.icon,Gt.skipFade,Gt.clipped),vt=vt||Gt.text||Gt.icon)}for(const Vt in Pt){const Gt=Pt[Vt];if(!this.opacities[Vt]){const Zt=new ny(Gt,Tt,!1,!1);Zt.isHidden()||(this.opacities[Vt]=Zt,vt=vt||Gt.text.placed||Gt.icon.placed)}}for(const Vt in Ot)this.variableOffsets[Vt]||!this.opacities[Vt]||this.opacities[Vt].isHidden()||(this.variableOffsets[Vt]=Ot[Vt]);for(const Vt in Ft)this.placedOrientations[Vt]||!this.opacities[Vt]||this.opacities[Vt].isHidden()||(this.placedOrientations[Vt]=Ft[Vt]);vt?this.lastPlacementChangeTime=ct:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=pt?pt.lastPlacementChangeTime:ct)}updateLayerOpacities(ct,pt,vt,Tt){const Pt=new Set;for(const Ot of pt){const Ft=Ot.getBucket(ct);Ft&&Ot.latestFeatureIndex&&ct.fqid===Ft.layerIds[0]&&(this.updateBucketOpacities(Ft,Pt,Ot.collisionBoxArray,vt,Tt,Ot.tileID,ct.scope),Ft.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(Ft,Ot.tileID),Ft.updateZOffset()))}}updateBucketOpacities(ct,pt,vt,Tt,Pt,Ot,Ft){ct.hasTextData()&&ct.text.opacityVertexArray.clear(),ct.hasIconData()&&ct.icon.opacityVertexArray.clear(),ct.hasIconCollisionBoxData()&&ct.iconCollisionBox.collisionVertexArray.clear(),ct.hasTextCollisionBoxData()&&ct.textCollisionBox.collisionVertexArray.clear();const Vt=ct.layers[0].layout,Gt=!!ct.layers[0].dynamicFilter(),Zt=new ny(null,0,!1,!1,!0),Yt=Vt.get("text-allow-overlap"),er=Vt.get("icon-allow-overlap"),rr=Vt.get("text-variable-anchor"),sr=Vt.get("text-rotation-alignment")==="map",lr=Vt.get("text-pitch-alignment")==="map",cr=new ny(null,0,Yt&&(er||!ct.hasIconData()||Vt.get("icon-optional")),er&&(Yt||!ct.hasTextData()||Vt.get("text-optional")),!0);!ct.collisionArrays&&vt&&(ct.hasIconCollisionBoxData()||ct.hasTextCollisionBoxData())&&ct.deserializeCollisionBoxes(vt);const ur=(Er,_r,$r)=>{for(let Tr=0;Tr<_r/4;Tr++)Er.opacityVertexArray.emplaceBack($r)};let br=0;Pt&&ct.updateReplacement(Ot,Pt);for(let Er=0;Er<ct.symbolInstances.length;Er++){const _r=ct.symbolInstances.get(Er),{numHorizontalGlyphVertices:$r,numVerticalGlyphVertices:Tr,crossTileID:Ar,numIconVertices:Fr,tileAnchorX:zr,tileAnchorY:Yr}=_r,Vr=pt.has(Ar);let Ir=this.opacities[Ar];Vr?Ir=Zt:Ir||(Ir=cr,this.opacities[Ar]=Ir),pt.add(Ar);const nn=$r>0||Tr>0,en=Fr>0,Wr=this.placedOrientations[Ar],Tn=Wr===at.aF.vertical,_n=Wr===at.aF.horizontal||Wr===at.aF.horizontalOnly;!nn&&!en||Ir.isHidden()||br++;let Xr=!1;if((nn||en)&&Pt)for(const hn of ct.activeReplacements){if(at.cJ(hn,Tt,at.cw.Symbol,Ft)||hn.min.x>zr||zr>hn.max.x||hn.min.y>Yr||Yr>hn.max.y)continue;const Ur=at.cK(zr,Yr,Ot.canonical,hn.footprintTileId.canonical);if(Xr=at.cL(Ur,hn),Xr)break}if(nn){const hn=Xr?Qu:zl(Ir.text);ur(ct.text,$r,Tn?Qu:hn),ur(ct.text,Tr,_n?Qu:hn);const Ur=Ir.text.isHidden(),{leftJustifiedTextSymbolIndex:bn,centerJustifiedTextSymbolIndex:Sn,rightJustifiedTextSymbolIndex:zn,verticalPlacedTextSymbolIndex:Un}=_r,Qn=ct.text.placedSymbolArray,Wn=Ur||Tn?1:0;bn>=0&&(Qn.get(bn).hidden=Wn),Sn>=0&&(Qn.get(Sn).hidden=Wn),zn>=0&&(Qn.get(zn).hidden=Wn),Un>=0&&(Qn.get(Un).hidden=Ur||_n?1:0);const uo=this.variableOffsets[Ar];uo&&this.markUsedJustification(ct,uo.anchor,_r,Wr);const So=this.placedOrientations[Ar];So&&(this.markUsedJustification(ct,"left",_r,So),this.markUsedOrientation(ct,So,_r))}if(en){const hn=Xr?Qu:zl(Ir.icon),{placedIconSymbolIndex:Ur,verticalPlacedIconSymbolIndex:bn}=_r,Sn=ct.icon.placedSymbolArray,zn=Ir.icon.isHidden()?1:0;Ur>=0&&(ur(ct.icon,Fr,Tn?Qu:hn),Sn.get(Ur).hidden=zn),bn>=0&&(ur(ct.icon,_r.numVerticalIconVertices,_n?Qu:hn),Sn.get(bn).hidden=zn)}if(ct.hasIconCollisionBoxData()||ct.hasTextCollisionBoxData()){const hn=ct.collisionArrays[Er];if(hn){let Ur=new at.P(0,0),bn=!0;if(hn.textBox||hn.verticalTextBox){if(rr){const zn=this.variableOffsets[Ar];zn?(Ur=Dx(zn.anchor,zn.width,zn.height,zn.textOffset,zn.textScale),sr&&Ur._rotate(lr?this.transform.angle:-this.transform.angle)):bn=!1}Gt&&(bn=!Ir.clipped),hn.textBox&&gu(ct.textCollisionBox.collisionVertexArray,Ir.text.placed,!bn||Tn,Ur.x,Ur.y),hn.verticalTextBox&&gu(ct.textCollisionBox.collisionVertexArray,Ir.text.placed,!bn||_n,Ur.x,Ur.y)}const Sn=bn&&!!(!_n&&hn.verticalIconBox);hn.iconBox&&gu(ct.iconCollisionBox.collisionVertexArray,Ir.icon.placed,Sn,_r.hasIconTextFit?Ur.x:0,_r.hasIconTextFit?Ur.y:0),hn.verticalIconBox&&gu(ct.iconCollisionBox.collisionVertexArray,Ir.icon.placed,!Sn,_r.hasIconTextFit?Ur.x:0,_r.hasIconTextFit?Ur.y:0)}}}if(ct.fullyClipped=br===0,ct.sortFeatures(this.transform.angle),this.retainedQueryData[ct.bucketInstanceId]&&(this.retainedQueryData[ct.bucketInstanceId].featureSortOrder=ct.featureSortOrder),ct.hasTextData()&&ct.text.opacityVertexBuffer&&ct.text.opacityVertexBuffer.updateData(ct.text.opacityVertexArray),ct.hasIconData()&&ct.icon.opacityVertexBuffer&&ct.icon.opacityVertexBuffer.updateData(ct.icon.opacityVertexArray),ct.hasIconCollisionBoxData()&&ct.iconCollisionBox.collisionVertexBuffer&&ct.iconCollisionBox.collisionVertexBuffer.updateData(ct.iconCollisionBox.collisionVertexArray),ct.hasTextCollisionBoxData()&&ct.textCollisionBox.collisionVertexBuffer&&ct.textCollisionBox.collisionVertexBuffer.updateData(ct.textCollisionBox.collisionVertexArray),ct.bucketInstanceId in this.collisionCircleArrays){const Er=this.collisionCircleArrays[ct.bucketInstanceId];ct.placementInvProjMatrix=Er.invProjMatrix,ct.placementViewportMatrix=Er.viewportMatrix,ct.collisionCircleArray=Er.circles,delete this.collisionCircleArrays[ct.bucketInstanceId]}}symbolFadeChange(ct){return this.fadeDuration===0?1:(ct-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(ct){return Math.max(0,(this.transform.zoom-ct)/1.5)}hasTransitions(ct){return this.stale||ct-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(ct,pt){const vt=this.zoomAtLastRecencyCheck===pt?1-this.zoomAdjustment(pt):1;return this.zoomAtLastRecencyCheck=pt,this.commitTime+this.fadeDuration*vt>ct}setStale(){this.stale=!0}}function gu(xt,ct,pt,vt,Tt){xt.emplaceBack(ct?1:0,pt?1:0,vt||0,Tt||0),xt.emplaceBack(ct?1:0,pt?1:0,vt||0,Tt||0),xt.emplaceBack(ct?1:0,pt?1:0,vt||0,Tt||0),xt.emplaceBack(ct?1:0,pt?1:0,vt||0,Tt||0)}const c0=Math.pow(2,25),g_=Math.pow(2,24),y_=Math.pow(2,17),iy=Math.pow(2,16),oy=Math.pow(2,9),x_=Math.pow(2,8),Lx=Math.pow(2,1);function zl(xt){if(xt.opacity===0&&!xt.placed)return 0;if(xt.opacity===1&&xt.placed)return 4294967295;const ct=xt.placed?1:0,pt=Math.floor(127*xt.opacity);return pt*c0+ct*g_+pt*y_+ct*iy+pt*oy+ct*x_+pt*Lx+ct}const Qu=0;class Ln{constructor(ct){this._sortAcrossTiles=ct.layout.get("symbol-z-order")!=="viewport-y"&&ct.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(ct,pt,vt,Tt,Pt){const Ot=this._bucketParts;for(;this._currentTileIndex<ct.length;)if(pt.getBucketParts(Ot,Tt,ct[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Pt())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ot.sort((Ft,Vt)=>Ft.sortKey-Vt.sortKey));this._currentPartIndex<Ot.length;){const Ft=Ot[this._currentPartIndex];if(pt.placeLayerBucketPart(Ft,this._seenCrossTileIDs,vt,Ft.symbolInstanceStart===0),this._currentPartIndex++,Pt())return!0}return!1}}class v_{constructor(ct,pt,vt,Tt,Pt,Ot,Ft,Vt,Gt){this.placement=new m_(ct,Pt,Ot,Ft,Vt,Gt),this._currentPlacementIndex=pt.length-1,this._forceFullPlacement=vt,this._showCollisionBoxes=Tt,this._done=!1}isDone(){return this._done}continuePlacement(ct,pt,vt,Tt){const Pt=at.e.now(),Ot=()=>{const Ft=at.e.now()-Pt;return!this._forceFullPlacement&&Ft>2};for(;this._currentPlacementIndex>=0;){const Ft=pt[ct[this._currentPlacementIndex]],Vt=this.placement.collisionIndex.transform.zoom;if(Ft.type==="symbol"&&(!Ft.minzoom||Ft.minzoom<=Vt)&&(!Ft.maxzoom||Ft.maxzoom>Vt)){const Gt=Ft,Zt=Gt.layout.get("symbol-z-elevate"),Yt=this._inProgressLayer=this._inProgressLayer||new Ln(Gt),er=at.am(Ft.source,Ft.scope);if(Yt.continuePlacement(Zt?Tt[er]:vt[er],this.placement,this._showCollisionBoxes,Ft,Ot))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(ct){return this.placement.commit(ct),this.placement}}const ay=512/at.a4/2;class Nx{constructor(ct,pt,vt){this.tileID=ct,this.bucketInstanceId=vt,this.index=new at.cN(pt.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const Tt=ct.canonical.x*at.a4,Pt=ct.canonical.y*at.a4;for(let Ot=0;Ot<pt.length;Ot++){const{key:Ft,crossTileID:Vt,tileAnchorX:Gt,tileAnchorY:Zt}=pt.get(Ot),Yt=Math.floor((Tt+Gt)*ay),er=Math.floor((Pt+Zt)*ay);this.index.add(Yt,er),this.keys.push(Ft),this.crossTileIDs.push(Vt)}this.index.finish()}findMatches(ct,pt,vt){const Tt=this.tileID.canonical.z<pt.canonical.z?1:Math.pow(2,this.tileID.canonical.z-pt.canonical.z),Pt=ay/Math.pow(2,pt.canonical.z-this.tileID.canonical.z),Ot=pt.canonical.x*at.a4,Ft=pt.canonical.y*at.a4;for(let Vt=0;Vt<ct.length;Vt++){const Gt=ct.get(Vt);if(Gt.crossTileID)continue;const{key:Zt,tileAnchorX:Yt,tileAnchorY:er}=Gt,rr=Math.floor((Ot+Yt)*Pt),sr=Math.floor((Ft+er)*Pt),lr=this.index.range(rr-Tt,sr-Tt,rr+Tt,sr+Tt);for(const cr of lr){const ur=this.crossTileIDs[cr];if(this.keys[cr]===Zt&&!vt.has(ur)){vt.add(ur),Gt.crossTileID=ur;break}}}}}class __{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class u0{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(ct){const pt=Math.round((ct-this.lng)/360);if(pt!==0)for(const vt in this.indexes){const Tt=this.indexes[vt],Pt={};for(const Ot in Tt){const Ft=Tt[Ot];Ft.tileID=Ft.tileID.unwrapTo(Ft.tileID.wrap+pt),Pt[Ft.tileID.key]=Ft}this.indexes[vt]=Pt}this.lng=ct}addBucket(ct,pt,vt){if(this.indexes[ct.overscaledZ]&&this.indexes[ct.overscaledZ][ct.key]){if(this.indexes[ct.overscaledZ][ct.key].bucketInstanceId===pt.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(ct.overscaledZ,this.indexes[ct.overscaledZ][ct.key])}for(let Pt=0;Pt<pt.symbolInstances.length;Pt++)pt.symbolInstances.get(Pt).crossTileID=0;this.usedCrossTileIDs[ct.overscaledZ]||(this.usedCrossTileIDs[ct.overscaledZ]=new Set);const Tt=this.usedCrossTileIDs[ct.overscaledZ];for(const Pt in this.indexes){const Ot=this.indexes[Pt];if(Number(Pt)>ct.overscaledZ)for(const Ft in Ot){const Vt=Ot[Ft];Vt.tileID.isChildOf(ct)&&Vt.findMatches(pt.symbolInstances,ct,Tt)}else{const Ft=Ot[ct.scaledTo(Number(Pt)).key];Ft&&Ft.findMatches(pt.symbolInstances,ct,Tt)}}for(let Pt=0;Pt<pt.symbolInstances.length;Pt++){const Ot=pt.symbolInstances.get(Pt);Ot.crossTileID||(Ot.crossTileID=vt.generate(),Tt.add(Ot.crossTileID))}return this.indexes[ct.overscaledZ]===void 0&&(this.indexes[ct.overscaledZ]={}),this.indexes[ct.overscaledZ][ct.key]=new Nx(ct,pt.symbolInstances,pt.bucketInstanceId),!0}removeBucketCrossTileIDs(ct,pt){for(const vt of pt.crossTileIDs)this.usedCrossTileIDs[ct].delete(vt)}removeStaleBuckets(ct){let pt=!1;for(const vt in this.indexes){const Tt=this.indexes[vt];for(const Pt in Tt)ct[Tt[Pt].bucketInstanceId]||(this.removeBucketCrossTileIDs(vt,Tt[Pt]),delete Tt[Pt],pt=!0)}return pt}}class Cu{constructor(){this.layerIndexes={},this.crossTileIDs=new __,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(ct,pt,vt,Tt){let Pt=this.layerIndexes[ct.fqid];Pt===void 0&&(Pt=this.layerIndexes[ct.fqid]=new u0);let Ot=!1;const Ft={};Tt.name!=="globe"&&Pt.handleWrapJump(vt);for(const Vt of pt){const Gt=Vt.getBucket(ct);Gt&&ct.fqid===Gt.layerIds[0]&&(Gt.bucketInstanceId||(Gt.bucketInstanceId=++this.maxBucketInstanceId),Pt.addBucket(Vt.tileID,Gt,this.crossTileIDs)&&(Ot=!0),Ft[Gt.bucketInstanceId]=!0)}return Pt.removeStaleBuckets(Ft)&&(Ot=!0),Ot}pruneUnusedLayers(ct){const pt={};ct.forEach(vt=>{pt[vt]=!0});for(const vt in this.layerIndexes)pt[vt]||delete this.layerIndexes[vt]}}const Fx=new at.U({data:new at.W(at.N.colorTheme.data)}),Vl=(xt,ct)=>so(xt,ct&&ct.filter(pt=>pt.identifier!=="source.canvas")),d0=at.ai(xa,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection","setCamera","addImport","removeImport","updateImport"]),tm=at.ai(xa,["setCenter","setZoom","setBearing","setPitch"]),b_={version:8,layers:[],sources:{}},w_={duration:300,delay:0};class Ul extends at.E{constructor(ct,pt={}){super(),this.map=ct,this.scope=pt.scope||"",this.globalId=null,this.fragments=[],this.importDepth=pt.importDepth||0,this.importsCache=pt.importsCache||new Map,this.resolvedImports=pt.resolvedImports||new Set,this.transition=at.Q({},w_),this._buildingIndex=new $l(this),this.crossTileSymbolIndex=new Cu,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerIndices=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=pt.styleChanges||new mr,this.dispatcher=pt.dispatcher?pt.dispatcher:new at.by(at.bz(),this),pt.imageManager?this.imageManager=pt.imageManager:(this.imageManager=new gs,this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=pt.glyphManager?pt.glyphManager:new at.cP(ct._requestManager,pt.localFontFamily?at.cQ.all:pt.localIdeographFontFamily?at.cQ.ideographs:at.cQ.none,pt.localFontFamily||pt.localIdeographFontFamily),pt.modelManager?this.modelManager=pt.modelManager:(this.modelManager=new Yo(ct._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null},this._styleColorThemeForScope={},this.options=pt.configOptions?pt.configOptions:new Map,this._configDependentLayers=pt.configDependentLayers?pt.configDependentLayers:new Set,this._config=pt.config,this._initialConfig=pt.initialConfig,this.dispatcher.broadcast("setReferrer",at.cR());const vt=this;this._rtlTextPluginCallback=Ul.registerForPluginStateChange(Tt=>{vt.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Tt.pluginStatus,pluginURL:Tt.pluginURL},(Pt,Ot)=>{if(at.cS(Pt),Ot&&Ot.every(Ft=>Ft))for(const Ft in vt._sourceCaches){const Vt=vt._sourceCaches[Ft],Gt=Vt.getSource().type;Gt!=="vector"&&Gt!=="geojson"||Vt.reload()}})}),this.on("data",Tt=>{if(Tt.dataType!=="source"||Tt.sourceDataType!=="metadata")return;const Pt=this.getOwnSource(Tt.sourceId);if(Pt&&Pt.vectorLayerIds)for(const Ot in this._layers){const Ft=this._layers[Ot];Ft.source===Pt.id&&this._validateLayer(Ft)}})}load(ct){return ct?(typeof ct=="string"?this.loadURL(ct):this.loadJSON(ct),this):this}_getGlobalId(ct){if(!ct)return null;if(typeof ct=="string"){if(at.cT(ct))return ct;const pt=at.cU(ct);if(!pt.startsWith("http"))try{return new URL(pt,location.href).toString()}catch{return pt}return pt}return`json://${at.cV(JSON.stringify(ct))}`}_diffStyle(ct,pt,vt){this.globalId=this._getGlobalId(ct);const Tt=(Pt,Ot)=>{try{Ot(null,this.setState(Pt,vt))}catch(Ft){Ot(Ft,!1)}};if(typeof ct=="string"){const Pt=this.map._requestManager.normalizeStyleURL(ct),Ot=this.map._requestManager.transformRequest(Pt,at.R.Style);at.h(Ot,(Ft,Vt)=>{Ft?this.fire(new at.f(Ft)):Vt&&Tt(Vt,pt)})}else typeof ct=="object"&&Tt(ct,pt)}loadURL(ct,pt={}){this.fire(new at.g("dataloading",{dataType:"style"}));const vt=typeof pt.validate=="boolean"?pt.validate:!at.cT(ct);this.globalId=this._getGlobalId(ct),ct=this.map._requestManager.normalizeStyleURL(ct,pt.accessToken),this.resolvedImports.add(ct);const Tt=this.importsCache.get(ct);if(Tt)return this._load(Tt,vt);const Pt=this.map._requestManager.transformRequest(ct,at.R.Style);this._request=at.h(Pt,(Ot,Ft)=>{if(this._request=null,Ot)this.fire(new at.f(Ot));else if(Ft)return this.importsCache.set(ct,Ft),this._load(Ft,vt)})}loadJSON(ct,pt={}){this.fire(new at.g("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(ct),this._request=at.e.frame(()=>{this._request=null,this._load(ct,pt.validate!==!1)})}loadEmpty(){this.fire(new at.g("dataloading",{dataType:"style"})),this._load(b_,!1)}_loadImports(ct,pt,vt){if(this.importDepth>=4)return at.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const Tt=[];for(const Pt of ct){const Ot=this._createFragmentStyle(Pt),Ft=new Promise(Zt=>{Ot.once("style.import.load",Zt),Ot.once("error",Zt)}).then(()=>this.mergeAll());if(Tt.push(Ft),this.resolvedImports.has(Pt.url)){Ot.loadEmpty();continue}const Vt=Pt.data||this.importsCache.get(Pt.url);Vt?(Ot.loadJSON(Vt,{validate:pt}),this._isInternalStyle(Vt)&&(Ot.globalId=null)):Pt.url?Ot.loadURL(Pt.url,{validate:pt}):Ot.loadEmpty();const Gt={style:Ot,id:Pt.id,config:Pt.config};if(vt){const Zt=this.fragments.findIndex(({id:Yt})=>Yt===vt);this.fragments=this.fragments.slice(0,Zt).concat(Gt).concat(this.fragments.slice(Zt))}else this.fragments.push(Gt)}return Promise.allSettled(Tt)}getImportGlobalIds(ct=this,pt=new Set){for(const vt of ct.fragments)vt.style.globalId&&pt.add(vt.style.globalId),this.getImportGlobalIds(vt.style,pt);return[...pt.values()]}_createFragmentStyle(ct){const pt=this.scope?at.am(ct.id,this.scope):ct.id;let vt;const Tt=this._initialConfig&&this._initialConfig[pt];(ct.config||Tt)&&(vt=at.Q({},ct.config,Tt));const Pt=new Ul(this.map,{scope:pt,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:vt,configOptions:this.options,configDependentLayers:this._configDependentLayers});return Pt.setEventedParent(this.map,{style:Pt}),Pt}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(ct){return this.isRootStyle()&&(ct.fragment||!!ct.schema&&ct.fragment!==!1)}_load(ct,pt){const vt=ct.schema;if(this._isInternalStyle(ct)){const Ot=at.Q({},b_,{imports:[{id:"basemap",data:ct,url:""}]});return void this._load(Ot,pt)}if(this.updateConfig(this._config,vt),pt&&Vl(this,or(ct)))return;this._loaded=!0,this.stylesheet=at.cW(ct);const Tt=()=>{for(const Gt in ct.sources)this.addSource(Gt,ct.sources[Gt],{validate:!1,isInitialLoad:!0});ct.sprite?this._loadSprite(ct.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(ct.glyphs,this.scope);const Ot=ey(this.stylesheet.layers);if(this._order=Ot.map(Gt=>Gt.id),this.stylesheet.light&&at.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const Gt=this.stylesheet.lights[0];this.light=new Xo(Gt.properties,Gt.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new Xo(this.stylesheet.light)),this._layers={},this._serializedLayers={};for(const Gt of Ot){const Zt=at.c$(Gt,this.scope,this._styleColorTheme.lut,this.options);Zt.configDependencies.size!==0&&this._configDependentLayers.add(Zt.fqid),Zt.setEventedParent(this,{layer:{id:Zt.id}}),this._layers[Zt.id]=Zt,this._serializedLayers[Zt.id]=Zt.serialize();const Yt=this.getOwnLayerSourceCache(Zt),er=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Yt&&Zt.canCastShadows()&&er&&(Yt.castsShadows=!0)}this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const Ft=this.stylesheet.terrain;Ft&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(Ft,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new at.g("data",{dataType:"style"}));const Vt=this.isRootStyle();ct.imports?this._loadImports(ct.imports,pt).then(()=>{this._reloadImports(),this.fire(new at.g(Vt?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new at.g(Vt?"style.load":"style.import.load")))},Pt=this.stylesheet["color-theme"];if(this._styleColorTheme.colorTheme=Pt,Pt){const Ot=this._evaluateColorThemeData(Pt);this._loadColorTheme(Ot).then(()=>{Tt()}).catch(Ft=>{at.w(`Couldn't load color theme from the stylesheet: ${Ft}`),Tt()})}else this._styleColorTheme.lut=null,Tt()}isRootStyle(){return this.importDepth===0}mergeAll(){let ct,pt,vt,Tt,Pt,Ot,Ft,Vt;const Gt={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(Zt=>{if(Zt.stylesheet){if(Zt.light!=null&&(ct=Zt.light),Zt.stylesheet.lights)for(const Yt of Zt.stylesheet.lights)Yt.type==="ambient"&&Zt.ambientLight!=null&&(pt=Zt.ambientLight),Yt.type==="directional"&&Zt.directionalLight!=null&&(vt=Zt.directionalLight);Tt=this._prioritizeTerrain(Tt,Zt.terrain,Zt.stylesheet.terrain),Zt.stylesheet.fog&&Zt.fog!=null&&(Pt=Zt.fog),Zt.stylesheet.camera!=null&&(Vt=Zt.stylesheet.camera),Zt.stylesheet.projection!=null&&(Ot=Zt.stylesheet.projection),Zt.stylesheet.transition!=null&&(Ft=Zt.stylesheet.transition),Gt[Zt.scope]=Zt._styleColorTheme}}),this.light=ct,this.ambientLight=pt,this.directionalLight=vt,this.fog=Pt,this._styleColorThemeForScope=Gt,Tt===null?delete this.terrain:this.terrain=Tt,this.camera=Vt||{"camera-projection":"perspective"},this.projection=Ot||{name:"mercator"},this.transition=at.Q({},w_,Ft),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(ct){const pt=vt=>{for(const Tt of vt.fragments)pt(Tt.style);ct(vt)};pt(this)}_prioritizeTerrain(ct,pt,vt){const Tt=ct&&ct.drapeRenderMode===0;return vt===null?pt&&pt.drapeRenderMode===0?pt:Tt?ct:null:pt!=null&&(!ct||Tt||pt&&pt.drapeRenderMode===1)?pt:ct}mergeTerrain(){let ct;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(pt=>{ct=this._prioritizeTerrain(ct,pt.terrain,pt.stylesheet.terrain)}),ct===null?delete this.terrain:this.terrain=ct}mergeProjection(){let ct;this.forEachFragmentStyle(pt=>{pt.stylesheet.projection!=null&&(ct=pt.stylesheet.projection)}),this.projection=ct||{name:"mercator"}}mergeSources(){const ct={},pt={},vt={};this.forEachFragmentStyle(Tt=>{for(const Pt in Tt._sourceCaches){const Ot=at.am(Pt,Tt.scope);ct[Ot]=Tt._sourceCaches[Pt]}for(const Pt in Tt._otherSourceCaches){const Ot=at.am(Pt,Tt.scope);pt[Ot]=Tt._otherSourceCaches[Pt]}for(const Pt in Tt._symbolSourceCaches){const Ot=at.am(Pt,Tt.scope);vt[Ot]=Tt._symbolSourceCaches[Pt]}}),this._mergedSourceCaches=ct,this._mergedOtherSourceCaches=pt,this._mergedSymbolSourceCaches=vt}mergeLayers(){const ct={},pt=[],vt={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(Ot=>{for(const Ft of Ot._order){const Vt=Ot._layers[Ft];if(Vt.type==="slot"){const Gt=at.cX(Ft);if(ct[Gt])continue;ct[Gt]=[]}Vt.slot&&ct[Vt.slot]?ct[Vt.slot].push(Vt):pt.push(Vt)}}),this._mergedOrder=[],this._clipLayerIndices=[];let Tt=0;const Pt=(Ot=[])=>{for(const Ft of Ot)if(Ft.type==="slot"){const Vt=at.cX(Ft.id);ct[Vt]&&Pt(ct[Vt]),this._mergedSlots.push(Vt)}else{const Vt=at.am(Ft.id,Ft.scope);this._mergedOrder.push(Vt),vt[Vt]=Ft,Ft.is3D()&&(this._has3DLayers=!0),Ft.type==="circle"&&(this._hasCircleLayers=!0),Ft.type==="symbol"&&(this._hasSymbolLayers=!0),Ft.type==="clip"&&this._clipLayerIndices.push(Tt),Tt++}};Pt(pt),this._mergedOrder.sort((Ot,Ft)=>{const Vt=vt[Ot],Gt=vt[Ft];return Vt.hasInitialOcclusionOpacityProperties?Gt.is3D()?1:0:Vt.is3D()&&Gt.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=vt,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(ct){return this.stylesheet.camera=at.Q({},this.stylesheet.camera,ct),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(ct){return ct.data?function(pt,vt,Tt){const Pt=at.Q({},vt);for(const Ft of Object.keys(at.N.colorTheme))Pt[Ft]===void 0&&(Pt[Ft]=at.N.colorTheme[Ft].default);const Ot=new at.O(Fx,pt,new Map(Tt));return Ot.setTransitionOrValue(Pt,Tt),Ot.untransitioned().possiblyEvaluate(new at.Y(0))}(this.scope,ct,this.options).get("data"):null}_loadColorTheme(ct){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const pt=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((vt,Tt)=>{const Pt="data:image/png;base64,";if(!ct||ct.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void vt();let Ot=ct;Ot.startsWith(Pt)||(Ot=Pt+Ot);const Ft="mapbox-reserved-lut",Vt=new Image;Vt.src=Ot,Vt.onerror=()=>{this._styleColorTheme.lutLoading=!1,Tt(new Error("Failed to load image data"))},Vt.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==pt)return void vt();this._styleColorTheme.lutLoading=!1;const{width:Gt,height:Zt,data:Yt}=at.e.getImageData(Vt);if(Zt>32)return void Tt(new Error("The height of the image must be less than or equal to 32 pixels."));if(Gt!==Zt*Zt)return void Tt(new Error("The width of the image must be equal to the height squared."));this.getImage(Ft)&&this.removeImage(Ft),this.addImage(Ft,{data:new at.j({width:Gt,height:Zt},Yt),pixelRatio:1,sdf:!1,version:0});const er=this.imageManager.getImage(Ft,this.scope);er?(this._styleColorTheme.lut={image:er.data,data:ct},vt()):Tt(new Error("Missing LUT image."))}})}getLut(ct){const pt=this._styleColorThemeForScope[ct];return pt?pt.lut:null}setProjection(ct){ct?this.stylesheet.projection=ct:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(ct){this._spriteRequest=function(pt,vt,Tt){let Pt,Ot,Ft;const Vt=at.e.devicePixelRatio>1?"@2x":"";let Gt=at.h(vt.transformRequest(vt.normalizeSpriteURL(pt,Vt,".json"),at.R.SpriteJSON),(er,rr)=>{Gt=null,Ft||(Ft=er,Pt=rr,Yt())}),Zt=at.i(vt.transformRequest(vt.normalizeSpriteURL(pt,Vt,".png"),at.R.SpriteImage),(er,rr)=>{Zt=null,Ft||(Ft=er,Ot=rr,Yt())});function Yt(){if(Ft)Tt(Ft);else if(Pt&&Ot){const er=at.e.getImageData(Ot),rr={};for(const sr in Pt){const{width:lr,height:cr,x:ur,y:br,sdf:Er,pixelRatio:_r,stretchX:$r,stretchY:Tr,content:Ar}=Pt[sr],Fr=new at.j({width:lr,height:cr});at.j.copy(er,Fr,{x:ur,y:br},{x:0,y:0},{width:lr,height:cr},null),rr[sr]={data:Fr,pixelRatio:_r,sdf:Er,stretchX:$r,stretchY:Tr,content:Ar}}Tt(null,rr)}}return{cancel(){Gt&&(Gt.cancel(),Gt=null),Zt&&(Zt.cancel(),Zt=null)}}}(ct,this.map._requestManager,(pt,vt)=>{if(this._spriteRequest=null,pt)this.fire(new at.f(pt));else if(vt)for(const Tt in vt)this.imageManager.addImage(Tt,this.scope,vt[Tt]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new at.g("data",{dataType:"style"}))})}_validateLayer(ct){const pt=this.getOwnSource(ct.source);if(!pt)return;const vt=ct.sourceLayer;vt&&(pt.type==="geojson"||pt.vectorLayerIds&&pt.vectorLayerIds.indexOf(vt)===-1)&&this.fire(new at.f(new Error(`Source layer "${vt}" does not exist on source "${pt.id}" as specified by style layer "${ct.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const ct in this._sourceCaches)if(!this._sourceCaches[ct].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:ct}of this.fragments)if(!ct.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((ct,pt)=>{const vt=this.fragments[pt];return vt&&vt.style&&(ct.data=vt.style.serialize()),ct})}_serializeSources(){const ct={};for(const pt in this._sourceCaches){const vt=this._sourceCaches[pt].getSource();ct[vt.id]||(ct[vt.id]=vt.serialize())}return ct}_serializeLayers(ct){const pt=[];for(const vt of ct){const Tt=this._layers[vt];Tt&&Tt.type!=="custom"&&pt.push(Tt.serialize())}return pt}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition())return!0;for(const ct in this._sourceCaches)if(this._sourceCaches[ct].hasTransition())return!0;for(const ct in this._layers)if(this._layers[ct].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}isLayerDraped(ct){return!!this.terrain&&ct.isDraped(this.getLayerSourceCache(ct))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(ct){const pt=this.getOwnLayer(ct);if(pt)return pt;this.fire(new at.f(new Error(`The layer '${ct}' does not exist in the map's style.`)))}_checkSource(ct){const pt=this.getOwnSource(ct);if(pt)return pt;this.fire(new at.f(new Error(`The source '${ct}' does not exist in the map's style.`)))}precompilePrograms(ct,pt){const vt=this.map.painter;if(vt)for(let Tt=ct.minzoom||0;Tt<(ct.maxzoom||25.5);Tt++){const Pt=ct.getProgramIds();if(Pt)for(const Ot of Pt){const Ft=ct.getDefaultProgramParams(Ot,pt.zoom,this._styleColorTheme.lut);Ft&&(vt.style=this,this.fog&&(vt._fogVisible=!0,Ft.overrideFog=!0,vt.getOrCreateProgram(Ot,Ft)),vt._fogVisible=!1,Ft.overrideFog=!1,vt.getOrCreateProgram(Ot,Ft),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(Ft.overrideRtt=!0,vt.getOrCreateProgram(Ot,Ft)))}}}update(ct){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(ct),this.directionalLight&&this.directionalLight.recalculate(ct);const pt=this.calculateLightsBrightness();ct.brightness=pt||0,pt!==this._brightness&&(this._brightness=pt,this.dispatcher.broadcast("setBrightness",pt));const vt=this._changes.isDirty();let Tt=!1;if(this._changes.isDirty()){const Ot=this._changes.getLayerUpdatesByScope();for(const Ft in Ot){const{updatedIds:Vt,removedIds:Gt}=Ot[Ft];(Vt||Gt)&&(this._updateWorkerLayers(Ft,Vt,Gt),Tt=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(ct),this.light&&this.light.updateTransitions(ct),this.ambientLight&&this.ambientLight.updateTransitions(ct),this.directionalLight&&this.directionalLight.updateTransitions(ct),this.fog&&this.fog.updateTransitions(ct),this._changes.reset()}const Pt={};for(const Ot in this._mergedSourceCaches){const Ft=this._mergedSourceCaches[Ot];Pt[Ot]=Ft.used,Ft.used=!1,Ft.tileCoverLift=0}for(const Ot of this._mergedOrder){const Ft=this._mergedLayers[Ot];if(Ft.recalculate(ct,this._availableImages),!Ft.isHidden(ct.zoom)){const Vt=this.getLayerSourceCache(Ft);Vt&&(Vt.used=!0,Vt.tileCoverLift=Math.max(Vt.tileCoverLift,Ft.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(Ft,ct)}):this.precompilePrograms(Ft,ct))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&Tt&&this.mergeLayers();for(const Ot in Pt){const Ft=this._mergedSourceCaches[Ot];Pt[Ot]!==Ft.used&&Ft.getSource().fire(new at.g("data",{sourceDataType:"visibility",dataType:"source",sourceId:Ft.getSource().id}))}this.light&&this.light.recalculate(ct),this.terrain&&this.terrain.recalculate(ct),this.fog&&this.fog.recalculate(ct),this.z=ct.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),vt&&this.fire(new at.g("data",{dataType:"style"}))}_updateTilesForChangedImages(){const ct=this._changes.getUpdatedImages();if(ct.length){for(const pt in this._sourceCaches)this._sourceCaches[pt].reloadTilesForDependencies(["icons","patterns"],ct);this._changes.resetUpdatedImages()}}_updateWorkerLayers(ct,pt,vt){const Tt=this.getFragmentStyle(ct);Tt&&this.dispatcher.broadcast("updateLayers",{layers:pt?Tt._serializeLayers(pt):[],scope:ct,removedIds:vt||[],options:Tt.options})}setState(ct,pt){if(this._checkLoaded(),Vl(this,or(ct)))return!1;(ct=at.cW(ct)).layers=ey(ct.layers);const vt=function(Ot,Ft){if(!Ot)return[{command:xa.setStyle,args:[Ft]}];let Vt=[];try{if(!at.d(Ot.version,Ft.version))return[{command:xa.setStyle,args:[Ft]}];if(at.d(Ot.center,Ft.center)||Vt.push({command:xa.setCenter,args:[Ft.center]}),at.d(Ot.zoom,Ft.zoom)||Vt.push({command:xa.setZoom,args:[Ft.zoom]}),at.d(Ot.bearing,Ft.bearing)||Vt.push({command:xa.setBearing,args:[Ft.bearing]}),at.d(Ot.pitch,Ft.pitch)||Vt.push({command:xa.setPitch,args:[Ft.pitch]}),at.d(Ot.sprite,Ft.sprite)||Vt.push({command:xa.setSprite,args:[Ft.sprite]}),at.d(Ot.glyphs,Ft.glyphs)||Vt.push({command:xa.setGlyphs,args:[Ft.glyphs]}),at.d(Ot.imports,Ft.imports)||function(rr=[],sr=[],lr){sr=sr||[];const cr=(rr=rr||[]).map(a0),ur=sr.map(a0),br=rr.reduce(Pu,{}),Er=sr.reduce(Pu,{}),_r=cr.slice();let $r,Tr,Ar,Fr;for($r=0,Tr=0;$r<cr.length;$r++)Ar=cr[$r],Er.hasOwnProperty(Ar)?Tr++:(lr.push({command:xa.removeImport,args:[Ar]}),_r.splice(_r.indexOf(Ar,Tr),1));for($r=0,Tr=0;$r<ur.length;$r++)Ar=ur[ur.length-1-$r],_r[_r.length-1-$r]!==Ar&&(br.hasOwnProperty(Ar)?(lr.push({command:xa.removeImport,args:[Ar]}),_r.splice(_r.lastIndexOf(Ar,_r.length-Tr),1)):Tr++,Fr=_r[_r.length-$r],lr.push({command:xa.addImport,args:[Er[Ar],Fr]}),_r.splice(_r.length-$r,0,Ar));for(const zr of sr){const Yr=br[zr.id];Yr&&!at.d(Yr,zr)&&lr.push({command:xa.updateImport,args:[zr.id,zr]})}}(Ot.imports,Ft.imports,Vt),at.d(Ot.transition,Ft.transition)||Vt.push({command:xa.setTransition,args:[Ft.transition]}),at.d(Ot.light,Ft.light)||Vt.push({command:xa.setLight,args:[Ft.light]}),at.d(Ot.fog,Ft.fog)||Vt.push({command:xa.setFog,args:[Ft.fog]}),at.d(Ot.projection,Ft.projection)||Vt.push({command:xa.setProjection,args:[Ft.projection]}),at.d(Ot.lights,Ft.lights)||Vt.push({command:xa.setLights,args:[Ft.lights]}),at.d(Ot.camera,Ft.camera)||Vt.push({command:xa.setCamera,args:[Ft.camera]}),!at.d(Ot["color-theme"],Ft["color-theme"]))return[{command:xa.setStyle,args:[Ft]}];const Gt={},Zt=[];(function(rr,sr,lr,cr){let ur;for(ur in sr=sr||{},rr=rr||{})rr.hasOwnProperty(ur)&&(sr.hasOwnProperty(ur)||d_(ur,lr,cr));for(ur in sr){if(!sr.hasOwnProperty(ur))continue;const br=sr[ur];rr.hasOwnProperty(ur)?at.d(rr[ur],br)||(rr[ur].type==="geojson"&&br.type==="geojson"&&ty(rr,sr,ur)?lr.push({command:xa.setGeoJSONSourceData,args:[ur,br.data]}):nw(ur,sr,lr,cr)):em(ur,sr,lr)}})(Ot.sources,Ft.sources,Zt,Gt);const Yt=[];Ot.layers&&Ot.layers.forEach(rr=>{rr.source&&Gt[rr.source]?Vt.push({command:xa.removeLayer,args:[rr.id]}):Yt.push(rr)});let er=Ot.terrain;er&&Gt[er.source]&&(Vt.push({command:xa.setTerrain,args:[void 0]}),er=void 0),Vt=Vt.concat(Zt),at.d(er,Ft.terrain)||Vt.push({command:xa.setTerrain,args:[Ft.terrain]}),function(rr,sr,lr){sr=sr||[];const cr=(rr=rr||[]).map(a0),ur=sr.map(a0),br=rr.reduce(Pu,{}),Er=sr.reduce(Pu,{}),_r=cr.slice(),$r=Object.create(null);let Tr,Ar,Fr,zr,Yr,Vr,Ir;for(Tr=0,Ar=0;Tr<cr.length;Tr++)Fr=cr[Tr],Er.hasOwnProperty(Fr)?Ar++:(lr.push({command:xa.removeLayer,args:[Fr]}),_r.splice(_r.indexOf(Fr,Ar),1));for(Tr=0,Ar=0;Tr<ur.length;Tr++)Fr=ur[ur.length-1-Tr],_r[_r.length-1-Tr]!==Fr&&(br.hasOwnProperty(Fr)?(lr.push({command:xa.removeLayer,args:[Fr]}),_r.splice(_r.lastIndexOf(Fr,_r.length-Ar),1)):Ar++,Vr=_r[_r.length-Tr],lr.push({command:xa.addLayer,args:[Er[Fr],Vr]}),_r.splice(_r.length-Tr,0,Fr),$r[Fr]=!0);for(Tr=0;Tr<ur.length;Tr++)if(Fr=ur[Tr],zr=br[Fr],Yr=Er[Fr],!$r[Fr]&&!at.d(zr,Yr))if(at.d(zr.source,Yr.source)&&at.d(zr["source-layer"],Yr["source-layer"])&&at.d(zr.type,Yr.type)){for(Ir in Ju(zr.layout,Yr.layout,lr,Fr,null,xa.setLayoutProperty),Ju(zr.paint,Yr.paint,lr,Fr,null,xa.setPaintProperty),at.d(zr.slot,Yr.slot)||lr.push({command:xa.setSlot,args:[Fr,Yr.slot]}),at.d(zr.filter,Yr.filter)||lr.push({command:xa.setFilter,args:[Fr,Yr.filter]}),at.d(zr.minzoom,Yr.minzoom)&&at.d(zr.maxzoom,Yr.maxzoom)||lr.push({command:xa.setLayerZoomRange,args:[Fr,Yr.minzoom,Yr.maxzoom]}),zr)zr.hasOwnProperty(Ir)&&Ir!=="layout"&&Ir!=="paint"&&Ir!=="filter"&&Ir!=="metadata"&&Ir!=="minzoom"&&Ir!=="maxzoom"&&Ir!=="slot"&&(Ir.indexOf("paint.")===0?Ju(zr[Ir],Yr[Ir],lr,Fr,Ir.slice(6),xa.setPaintProperty):at.d(zr[Ir],Yr[Ir])||lr.push({command:xa.setLayerProperty,args:[Fr,Ir,Yr[Ir]]}));for(Ir in Yr)Yr.hasOwnProperty(Ir)&&!zr.hasOwnProperty(Ir)&&Ir!=="layout"&&Ir!=="paint"&&Ir!=="filter"&&Ir!=="metadata"&&Ir!=="minzoom"&&Ir!=="maxzoom"&&Ir!=="slot"&&(Ir.indexOf("paint.")===0?Ju(zr[Ir],Yr[Ir],lr,Fr,Ir.slice(6),xa.setPaintProperty):at.d(zr[Ir],Yr[Ir])||lr.push({command:xa.setLayerProperty,args:[Fr,Ir,Yr[Ir]]}))}else lr.push({command:xa.removeLayer,args:[Fr]}),Vr=_r[_r.lastIndexOf(Fr)+1],lr.push({command:xa.addLayer,args:[Yr,Vr]})}(Yt,Ft.layers,Vt)}catch(Gt){console.warn("Unable to compute style diff:",Gt),Vt=[{command:xa.setStyle,args:[Ft]}]}return Vt}(this.serialize(),ct).filter(Ot=>!(Ot.command in tm));if(vt.length===0)return!1;const Tt=vt.filter(Ot=>!(Ot.command in d0));if(Tt.length>0)throw new Error(`Unimplemented: ${Tt.map(Ot=>Ot.command).join(", ")}.`);const Pt=[];return vt.forEach(Ot=>{Pt.push(this[Ot.command].apply(this,Ot.args))}),pt&&Promise.all(Pt).then(pt),this.stylesheet=ct,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(ct,pt){return this.getImage(ct)?this.fire(new at.f(new Error("An image with this name already exists."))):(this.imageManager.addImage(ct,this.scope,pt),this._afterImageUpdated(ct),this)}updateImage(ct,pt){this.imageManager.updateImage(ct,this.scope,pt)}getImage(ct){return this.imageManager.getImage(ct,this.scope)}removeImage(ct){return this.getImage(ct)?(this.imageManager.removeImage(ct,this.scope),this._afterImageUpdated(ct),this):this.fire(new at.f(new Error("No image with this name exists.")))}_afterImageUpdated(ct){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(ct),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new at.g("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(ct,pt,vt={}){return this._checkLoaded(),this._validate(An,`models.${ct}`,pt,null,vt)||(this.modelManager.addModel(ct,pt,this.scope),this._changes.setDirty()),this}hasModel(ct){return this.modelManager.hasModel(ct,this.scope)}removeModel(ct){return this.hasModel(ct)?(this.modelManager.removeModel(ct,this.scope),this):this.fire(new at.f(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(ct,pt,vt={}){if(this._checkLoaded(),this.getOwnSource(ct)!==void 0)throw new Error(`There is already a source with ID "${ct}".`);if(!pt.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(pt).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(pt.type)>=0&&this._validate(dr,`sources.${ct}`,pt,null,vt))return;this.map&&this.map._collectResourceTiming&&(pt.collectResourceTiming=!0);const Tt=Hy(ct,pt,this.dispatcher,this);Tt.scope=this.scope,Tt.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(Tt.id),source:Tt.serialize(),sourceId:Tt.id}));const Pt=Ot=>{const Ft=(Ot?"symbol:":"other:")+Tt.id,Vt=at.am(Ft,this.scope),Gt=this._sourceCaches[Ft]=new at.bx(Vt,Tt,Ot);(Ot?this._symbolSourceCaches:this._otherSourceCaches)[Tt.id]=Gt,Gt.onAdd(this.map)};Pt(!1),pt.type!=="vector"&&pt.type!=="geojson"||Pt(!0),Tt.onAdd&&Tt.onAdd(this.map),vt.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(ct){this._checkLoaded();const pt=this.getOwnSource(ct);if(!pt)throw new Error("There is no source with this ID");for(const Tt in this._layers)if(this._layers[Tt].source===ct)return this.fire(new at.f(new Error(`Source "${ct}" cannot be removed while layer "${Tt}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===ct)return this.fire(new at.f(new Error(`Source "${ct}" cannot be removed while terrain is using it.`)));const vt=this.getOwnSourceCaches(ct);for(const Tt of vt){const Pt=at.cX(Tt.id);delete this._sourceCaches[Pt],this._changes.discardSourceCacheUpdate(Tt.id),Tt.fire(new at.g("data",{sourceDataType:"metadata",dataType:"source",sourceId:Tt.getSource().id})),Tt.setEventedParent(null),Tt.clearTiles()}return delete this._otherSourceCaches[ct],delete this._symbolSourceCaches[ct],this.mergeSources(),pt.setEventedParent(null),pt.onRemove&&pt.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(ct,pt){this._checkLoaded(),this.getOwnSource(ct).setData(pt),this._changes.setDirty()}getOwnSource(ct){const pt=this.getOwnSourceCache(ct);return pt&&pt.getSource()}getOwnSources(){const ct=[];for(const pt in this._otherSourceCaches){const vt=this.getOwnSourceCache(pt);vt&&ct.push(vt.getSource())}return ct}areTilesLoaded(){const ct=this._mergedSourceCaches;for(const pt in ct){const vt=ct[pt]._tiles;for(const Tt in vt){const Pt=vt[Tt];if(Pt.state!=="loaded"&&Pt.state!=="errored")return!1}}return!0}setLights(ct){if(this._checkLoaded(),!ct)return delete this.ambientLight,void delete this.directionalLight;const pt=this._getTransitionParameters();for(const Tt of ct){if(this._validate(Br,"lights",Tt))return;switch(Tt.type){case"ambient":if(this.ambientLight){const Pt=this.ambientLight;Pt.set(Tt),Pt.updateTransitions(pt)}else this.ambientLight=new dp(Tt,Q0||(Q0=new at.U({color:new at.W(at.N.properties_light_ambient.color),intensity:new at.W(at.N.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const Pt=this.directionalLight;Pt.set(Tt),Pt.updateTransitions(pt)}else this.directionalLight=new dp(Tt,ex||(ex=new at.U({direction:new at.a6(at.N.properties_light_directional.direction),color:new at.W(at.N.properties_light_directional.color),intensity:new at.W(at.N.properties_light_directional.intensity),"cast-shadows":new at.W(at.N.properties_light_directional["cast-shadows"]),"shadow-intensity":new at.W(at.N.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const vt=new at.Y(this.z||0,pt);this.ambientLight&&this.ambientLight.recalculate(vt),this.directionalLight&&this.directionalLight.recalculate(vt),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const ct=this.directionalLight,pt=this.ambientLight;if(!ct||!pt)return;const vt=Yt=>.2126*(Yt[0]<=.03928?Yt[0]/12.92:Math.pow((Yt[0]+.055)/1.055,2.4))+.7152*(Yt[1]<=.03928?Yt[1]/12.92:Math.pow((Yt[1]+.055)/1.055,2.4))+.0722*(Yt[2]<=.03928?Yt[2]/12.92:Math.pow((Yt[2]+.055)/1.055,2.4)),Tt=ct.properties.get("color").toRenderColor(null).toArray01(),Pt=ct.properties.get("intensity"),Ot=ct.properties.get("direction"),Ft=1-at.ad(Ot.x,Ot.y,Ot.z)[2]/90,Vt=vt(Tt)*Pt*Ft,Gt=pt.properties.get("color").toRenderColor(null).toArray01(),Zt=pt.properties.get("intensity");return(Vt+vt(Gt)*Zt)/2}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const ct=[];return this.directionalLight&&ct.push(this.directionalLight.get()),this.ambientLight&&ct.push(this.ambientLight.get()),ct}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(ct){if(!ct)return this;if(at.cY(ct)){const pt=at.cZ(ct),vt=this.fragments.find(({id:Pt})=>Pt===pt);if(!vt)throw new Error(`Style import not found: ${ct}`);const Tt=at.cX(ct);return vt.style.getFragmentStyle(Tt)}{const pt=this.fragments.find(({id:vt})=>vt===ct);if(!pt)throw new Error(`Style import not found: ${ct}`);return pt.style}}getConfigProperty(ct,pt){const vt=this.getFragmentStyle(ct);if(!vt)return null;const Tt=at.am(pt,vt.scope),Pt=vt.options.get(Tt),Ot=Pt?Pt.value||Pt.default:null;return Ot?Ot.serialize():null}setConfigProperty(ct,pt,vt){const Tt=this.getFragmentStyle(ct);if(!Tt)return;const Pt=Tt.stylesheet.schema;if(!Pt||!Pt[pt])return;const Ot=at.z(vt);if(Ot.result!=="success")return void Vl(this,Ot.value);const Ft=Ot.value.expression,Vt=at.am(pt,Tt.scope),Gt=Tt.options.get(Vt);if(!Gt)return;let Zt;const{minValue:Yt,maxValue:er,stepValue:rr,type:sr,values:lr}=Pt[pt],cr=at.z(Pt[pt].default);cr.result==="success"&&(Zt=cr.value.expression),Zt?(this.options.set(Vt,{...Gt,value:Ft,default:Zt,minValue:Yt,maxValue:er,stepValue:rr,type:sr,values:lr}),this.updateConfigDependencies(pt)):this.fire(new at.f(new Error(`No schema defined for the config option "${pt}" in the "${ct}" fragment.`)))}getConfig(ct){const pt=this.getFragmentStyle(ct);if(!pt)return null;const vt=pt.stylesheet.schema;if(!vt)return null;const Tt={};for(const Pt in vt){const Ot=at.am(Pt,pt.scope),Ft=pt.options.get(Ot),Vt=Ft?Ft.value||Ft.default:null;Tt[Pt]=Vt?Vt.serialize():null}return Tt}setConfig(ct,pt){const vt=this.getFragmentStyle(ct);vt&&(vt.updateConfig(pt,vt.stylesheet.schema),this.updateConfigDependencies())}getSchema(ct){const pt=this.getFragmentStyle(ct);return pt?pt.stylesheet.schema:null}setSchema(ct,pt){const vt=this.getFragmentStyle(ct);vt&&(vt.stylesheet.schema=pt,vt.updateConfig(vt._config,pt),this.updateConfigDependencies())}updateConfig(ct,pt){if(this._config=ct,ct||pt)if(pt)for(const vt in pt){let Tt,Pt;const Ot=at.z(pt[vt].default);if(Ot.result==="success"&&(Tt=Ot.value.expression),ct&&ct[vt]!==void 0){const er=at.z(ct[vt]);er.result==="success"&&(Pt=er.value.expression)}const{minValue:Ft,maxValue:Vt,stepValue:Gt,type:Zt,values:Yt}=pt[vt];if(Tt){const er=at.am(vt,this.scope);this.options.set(er,{default:Tt,value:Pt,minValue:Ft,maxValue:Vt,stepValue:Gt,type:Zt,values:Yt})}else this.fire(new at.f(new Error(`No schema defined for config option "${vt}".`)))}else this.fire(new at.f(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(ct){for(const pt of this._configDependentLayers){const vt=this.getLayer(pt);if(vt){if(ct&&!vt.configDependencies.has(ct))continue;vt.possiblyEvaluateVisibility(),this._updateLayer(vt)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.forEachFragmentStyle(pt=>{if(pt._styleColorTheme.colorTheme){const vt=pt._evaluateColorThemeData(pt._styleColorTheme.colorTheme);(!pt._styleColorTheme.lut&&vt!==""||pt._styleColorTheme.lut&&vt!==pt._styleColorTheme.lut.data)&&pt.setColorTheme(pt._styleColorTheme.colorTheme)}}),this._changes.setDirty()}addLayer(ct,pt,vt={}){this._checkLoaded();const Tt=ct.id;if(this._layers[Tt])return void this.fire(new at.f(new Error(`Layer with id "${Tt}" already exists on this map`)));let Pt;if(ct.type==="custom"){if(Vl(this,at.c_(ct)))return;Pt=at.c$(ct,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof ct.source=="object"&&(this.addSource(Tt,ct.source),ct=at.cW(ct),ct=at.Q(ct,{source:Tt})),this._validate(un,`layers.${Tt}`,ct,{arrayIndex:-1},vt))return;Pt=at.c$(ct,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(Pt),Pt.setEventedParent(this,{layer:{id:Tt}}),this._serializedLayers[Pt.id]=Pt.serialize()}Pt.configDependencies.size!==0&&this._configDependentLayers.add(Pt.fqid);let Ot=this._order.length;if(pt){const Zt=this._order.indexOf(pt);if(Zt===-1)return void this.fire(new at.f(new Error(`Layer with id "${pt}" does not exist on this map.`)));Pt.slot===this._layers[pt].slot?Ot=Zt:at.w(`Layer with id "${pt}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(Ot,0,Tt),this._layerOrderChanged=!0,this._layers[Tt]=Pt;const Ft=this.getOwnLayerSourceCache(Pt),Vt=!!this.directionalLight&&this.directionalLight.shadowsEnabled();Ft&&Pt.canCastShadows()&&Vt&&(Ft.castsShadows=!0);const Gt=this._changes.getRemovedLayer(Pt);if(Gt&&Pt.source&&Ft&&Pt.type!=="custom"){this._changes.discardLayerRemoval(Pt);const Zt=at.am(Pt.source,Pt.scope);Gt.type!==Pt.type?this._changes.updateSourceCache(Zt,"clear"):(this._changes.updateSourceCache(Zt,"reload"),Ft.pause())}this._updateLayer(Pt),Pt.onAdd&&Pt.onAdd(this.map),Pt.scope=this.scope,this.mergeLayers()}moveLayer(ct,pt){this._checkLoaded();const vt=this._checkLayer(ct);if(!vt||ct===pt)return;const Tt=this._order.indexOf(ct);this._order.splice(Tt,1);let Pt=this._order.length;if(pt){const Ot=this._order.indexOf(pt);if(Ot===-1)return void this.fire(new at.f(new Error(`Layer with id "${pt}" does not exist on this map.`)));vt.slot===this._layers[pt].slot?Pt=Ot:at.w(`Layer with id "${pt}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(Pt,0,ct),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(ct){this._checkLoaded();const pt=this._checkLayer(ct);if(!pt)return;pt.setEventedParent(null);const vt=this._order.indexOf(ct);this._order.splice(vt,1),delete this._layers[ct],delete this._serializedLayers[ct],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(pt.fqid),this._changes.removeLayer(pt);const Tt=this.getOwnLayerSourceCache(pt);if(Tt&&Tt.castsShadows){let Pt=!1;for(const Ot in this._layers)if(this._layers[Ot].source===pt.source&&this._layers[Ot].canCastShadows()){Pt=!0;break}Tt.castsShadows=Pt}pt.onRemove&&pt.onRemove(this.map),this.mergeLayers()}getOwnLayer(ct){return this._layers[ct]}hasLayer(ct){return ct in this._mergedLayers}hasLayerType(ct){for(const pt in this._layers)if(this._layers[pt].type===ct)return!0;return!1}setLayerZoomRange(ct,pt,vt){this._checkLoaded();const Tt=this._checkLayer(ct);Tt&&(Tt.minzoom===pt&&Tt.maxzoom===vt||(pt!=null&&(Tt.minzoom=pt),vt!=null&&(Tt.maxzoom=vt),this._updateLayer(Tt)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(ct,pt){this._checkLoaded();const vt=this._checkLayer(ct);vt&&vt.slot!==pt&&(vt.slot=pt,this._updateLayer(vt))}setFilter(ct,pt,vt={}){this._checkLoaded();const Tt=this._checkLayer(ct);if(Tt&&!at.d(Tt.filter,pt))return pt==null?(Tt.filter=void 0,void this._updateLayer(Tt)):void(this._validate(qr,`layers.${Tt.id}.filter`,pt,{layerType:Tt.type},vt)||(Tt.filter=at.cW(pt),this._updateLayer(Tt)))}getFilter(ct){const pt=this._checkLayer(ct);if(pt)return at.cW(pt.filter)}setLayoutProperty(ct,pt,vt,Tt={}){this._checkLoaded();const Pt=this._checkLayer(ct);if(Pt&&!at.d(Pt.getLayoutProperty(pt),vt)){if(vt!=null&&(!Tt||Tt.validate!==!1)&&Vl(Pt,Pn.call(or,{key:`layers.${ct}.layout.${pt}`,layerType:Pt.type,objectKey:pt,value:vt,styleSpec:at.N,style:{glyphs:!0,sprite:!0}})))return;Pt.setLayoutProperty(pt,vt),Pt.configDependencies.size!==0&&this._configDependentLayers.add(Pt.fqid),this._updateLayer(Pt)}}getLayoutProperty(ct,pt){const vt=this._checkLayer(ct);if(vt)return vt.getLayoutProperty(pt)}setPaintProperty(ct,pt,vt,Tt={}){this._checkLoaded();const Pt=this._checkLayer(ct);if(!Pt||at.d(Pt.getPaintProperty(pt),vt)||vt!=null&&(!Tt||Tt.validate!==!1)&&Vl(Pt,on.call(or,{key:`layers.${ct}.paint.${pt}`,layerType:Pt.type,objectKey:pt,value:vt,styleSpec:at.N})))return;const Ot=Pt.setPaintProperty(pt,vt);Pt.configDependencies.size!==0&&this._configDependentLayers.add(Pt.fqid),Ot&&this._updateLayer(Pt),this._changes.updatePaintProperties(Pt)}getPaintProperty(ct,pt){const vt=this._checkLayer(ct);if(vt)return vt.getPaintProperty(pt)}setFeatureState(ct,pt){this._checkLoaded();const vt=ct.source,Tt=ct.sourceLayer,Pt=this._checkSource(vt);if(!Pt)return;const Ot=Pt.type;if(Ot==="geojson"&&Tt)return void this.fire(new at.f(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(Ot==="vector"&&!Tt)return void this.fire(new at.f(new Error("The sourceLayer parameter must be provided for vector source types.")));ct.id===void 0&&this.fire(new at.f(new Error("The feature id parameter must be provided.")));const Ft=this.getOwnSourceCaches(vt);for(const Vt of Ft)Vt.setFeatureState(Tt,ct.id,pt)}removeFeatureState(ct,pt){this._checkLoaded();const vt=ct.source,Tt=this._checkSource(vt);if(!Tt)return;const Pt=Tt.type,Ot=Pt==="vector"?ct.sourceLayer:void 0;if(Pt==="vector"&&!Ot)return void this.fire(new at.f(new Error("The sourceLayer parameter must be provided for vector source types.")));if(pt&&typeof ct.id!="string"&&typeof ct.id!="number")return void this.fire(new at.f(new Error("A feature id is required to remove its specific state property.")));const Ft=this.getOwnSourceCaches(vt);for(const Vt of Ft)Vt.removeFeatureState(Ot,ct.id,pt)}getFeatureState(ct){this._checkLoaded();const pt=ct.source,vt=ct.sourceLayer,Tt=this._checkSource(pt);if(Tt){if(Tt.type!=="vector"||vt)return ct.id===void 0&&this.fire(new at.f(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(pt)[0].getFeatureState(vt,ct.id);this.fire(new at.f(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(ct){return this.stylesheet.transition=at.Q({},this.stylesheet.transition,ct),this.transition=this.stylesheet.transition,this}getTransition(){return at.Q({},this.stylesheet.transition)}serialize(){this._checkLoaded();const ct=this.getTerrain(),pt=ct&&this.terrain&&this.terrain.scope===this.scope?ct:this.stylesheet.terrain;return at.d0({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:pt,fog:this.stylesheet.fog,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},vt=>vt!==void 0)}_updateLayer(ct){this._changes.updateLayer(ct);const pt=this.getLayerSourceCache(ct),vt=at.am(ct.source,ct.scope),Tt=this._changes.getUpdatedSourceCaches();ct.source&&!Tt[vt]&&pt&&pt.getSource().type!=="raster"&&(this._changes.updateSourceCache(vt,"reload"),pt.pause()),ct.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(ct){const pt=Ft=>this._mergedLayers[Ft].type==="fill-extrusion"||this._mergedLayers[Ft].type==="model",vt=this.order,Tt={},Pt=[];for(let Ft=vt.length-1;Ft>=0;Ft--){const Vt=vt[Ft];if(pt(Vt)){Tt[Vt]=Ft;for(const Gt of ct){const Zt=Gt[Vt];if(Zt)for(const Yt of Zt)Pt.push(Yt)}}}Pt.sort((Ft,Vt)=>Vt.intersectionZ-Ft.intersectionZ);const Ot=[];for(let Ft=vt.length-1;Ft>=0;Ft--){const Vt=vt[Ft];if(pt(Vt))for(let Gt=Pt.length-1;Gt>=0;Gt--){const Zt=Pt[Gt].feature;if(Zt.layer&&Tt[Zt.layer.id]<Ft)break;Ot.push(Zt),Pt.pop()}else for(const Gt of ct){const Zt=Gt[Vt];if(Zt)for(const Yt of Zt)Ot.push(Yt.feature)}}return Ot}queryRenderedFeatures(ct,pt,vt){pt&&pt.filter&&this._validate(qr,"queryRenderedFeatures.filter",pt.filter,null,pt),pt.scope=this.scope,pt.availableImages=this._availableImages,pt.serializedLayers=this._serializedLayers;const Tt={};if(pt&&pt.layers){if(!Array.isArray(pt.layers))return this.fire(new at.f(new Error("parameters.layers must be an Array."))),[];for(const Gt of pt.layers){const Zt=this._mergedLayers[Gt];if(!Zt)return this.fire(new at.f(new Error(`The layer '${Gt}' does not exist in the map's style and cannot be queried for features.`))),[];Tt[Zt.source]=!0}}const Pt=[],Ot=pt.serializedLayers||{},Ft=pt&&pt.layers?pt.layers.some(Gt=>{const Zt=this.getLayer(Gt);return Zt&&Zt.is3D()}):this.has3DLayers(),Vt=Bl.createFromScreenPoints(ct,vt);for(const Gt in this._mergedSourceCaches){const Zt=this._mergedSourceCaches[Gt].getSource();if(!Zt||Zt.scope!==pt.scope)continue;const Yt=this._mergedSourceCaches[Gt].getSource().id;pt.layers&&!Tt[Yt]||Pt.push(Au(this._mergedSourceCaches[Gt],this._mergedLayers,Ot,Vt,pt,vt,Ft,!!this.map._showQueryGeometry))}return this.placement&&Pt.push(function(Gt,Zt,Yt,er,rr,sr,lr){const cr={},ur=sr.queryRenderedSymbols(er),br=[];for(const Er of Object.keys(ur).map(Number))br.push(lr[Er]);br.sort(Ox);for(const Er of br){const _r=Er.featureIndex.lookupSymbolFeatures(ur[Er.bucketInstanceId],Zt,Er.bucketIndex,Er.sourceLayerIndex,rr.filter,rr.layers,rr.availableImages,Gt);for(const $r in _r){const Tr=cr[$r]=cr[$r]||[],Ar=_r[$r];Ar.sort((Fr,zr)=>{const Yr=Er.featureSortOrder;if(Yr){const Vr=Yr.indexOf(Fr.featureIndex);return Yr.indexOf(zr.featureIndex)-Vr}return zr.featureIndex-Fr.featureIndex});for(const Fr of Ar)Tr.push(Fr)}}for(const Er in cr)cr[Er].forEach(_r=>{const $r=_r.feature,Tr=Yt(Gt[Er]);if(!Tr)return;const Ar=Tr.getFeatureState($r.layer["source-layer"],$r.id);$r.source=$r.layer.source,$r.layer["source-layer"]&&($r.sourceLayer=$r.layer["source-layer"]),$r.state=Ar});return cr}(this._mergedLayers,Ot,this.getLayerSourceCache.bind(this),Vt.screenGeometry,pt,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(Pt)}querySourceFeatures(ct,pt){pt&&pt.filter&&this._validate(qr,"querySourceFeatures.filter",pt.filter,null,pt);const vt=this.getOwnSourceCaches(ct);let Tt=[];for(const Pt of vt)Tt=Tt.concat(tw(Pt,pt));return Tt}addSourceType(ct,pt,vt){return Ul.getSourceType(ct)?vt(new Error(`A source type called "${ct}" already exists.`)):(Ul.setSourceType(ct,pt),pt.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:ct,url:pt.workerSourceURL},vt):vt(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(ct,pt,vt={}){this._checkLoaded();const Tt=this.light.getLight();let Pt=!1;for(const Ft in ct)if(!at.d(ct[Ft],Tt[Ft])){Pt=!0;break}if(!Pt)return;const Ot=this._getTransitionParameters();this.light.setLight(ct,pt,vt),this.light.updateTransitions(Ot)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=at.e.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&at.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(ct,pt=1){if(this._checkLoaded(),!ct)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),pt===0&&delete this.terrain,ct===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let vt=ct;const Tt=ct.source==null;if(pt===1){if(this.disableElevatedTerrain)return;if(typeof vt.source=="object"){const Ft="terrain-dem-src";this.addSource(Ft,vt.source),vt=at.cW(vt),vt=at.Q(vt,{source:Ft})}const Pt=at.Q({},vt),Ot={};if(this.terrain&&Tt){Pt.source=this.terrain.get().source;const Ft=this.terrain?this.getFragmentStyle(this.terrain.scope):null;Ft&&(Ot.style=Ft.serialize())}if(this._validate(jr,"terrain",Pt,Ot))return}if(!this.terrain||this.terrain.scope!==this.scope&&!Tt||this.terrain&&pt!==this.terrain.drapeRenderMode){if(!vt)return;this._createTerrain(vt,pt),this.fire(new at.g("data",{dataType:"style"}))}else{const Pt=this.terrain,Ot=Pt.get();for(const Ft of Object.keys(at.N.terrain))!vt.hasOwnProperty(Ft)&&at.N.terrain[Ft].default&&(vt[Ft]=at.N.terrain[Ft].default);for(const Ft in ct)if(!at.d(ct[Ft],Ot[Ft])){Pt.set(ct,this.options),this.stylesheet.terrain=ct;const Vt=this._getTransitionParameters({duration:0});Pt.updateTransitions(Vt),this.fire(new at.g("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(ct){const pt=this.fog=new El(ct,this.map.transform,this.scope,this.options);this.stylesheet.fog=pt.get();const vt=this._getTransitionParameters({duration:0});pt.updateTransitions(vt)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const ct of this.map._markers)ct._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(ct){if(this._checkLoaded(),!ct)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const pt=this.fog;if(!at.d(pt.get(),ct)){pt.set(ct,this.options),this.stylesheet.fog=pt.get();const vt=this._getTransitionParameters({duration:0});pt.updateTransitions(vt)}}else this._createFog(ct);this._markersNeedUpdate=!0}setColorTheme(ct){this._checkLoaded();const pt=()=>{for(const Tt in this._layers)this._layers[Tt].lut=this._styleColorTheme.lut;for(const Tt in this._sourceCaches)this._sourceCaches[Tt].clearTiles()};if(this._styleColorTheme.colorTheme=ct,!ct)return this._styleColorTheme.lut=null,void pt();const vt=this._evaluateColorThemeData(ct);this._loadColorTheme(vt).then(()=>{this.fire(new at.g("colorthemeset")),pt()}).catch(Tt=>{at.w(`Couldn't set color theme: ${Tt}`)})}_getTransitionParameters(ct){return{now:at.e.now(),transition:at.Q(this.transition,ct)}}updateDrapeFirstLayers(){if(!this.terrain)return;const ct=[],pt=[];for(const vt of this._mergedOrder)this.isLayerDraped(this._mergedLayers[vt])?ct.push(vt):pt.push(vt);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...ct),this._drapedFirstOrder.push(...pt)}_createTerrain(ct,pt){const vt=this.terrain=new qo(ct,pt,this.scope,this.options);pt===1&&(this.stylesheet.terrain=ct),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const Tt=this._getTransitionParameters({duration:0});vt.updateTransitions(Tt)}_force3DLayerUpdate(){for(const ct in this._layers){const pt=this._layers[ct];pt.type==="fill-extrusion"&&this._updateLayer(pt)}}_forceSymbolLayerUpdate(){for(const ct in this._layers){const pt=this._layers[ct];pt.type==="symbol"&&this._updateLayer(pt)}}_validate(ct,pt,vt,Tt,Pt={}){if(Pt&&Pt.validate===!1)return!1;const Ot=at.Q({},this.serialize());return Vl(this,ct.call(or,at.Q({key:pt,style:Ot,value:vt,styleSpec:at.N},Tt)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),at.d1.off("pluginStateChange",this._rtlTextPluginCallback);for(const ct in this._mergedLayers)this._mergedLayers[ct].setEventedParent(null);for(const ct in this._mergedSourceCaches)this._mergedSourceCaches[ct].clearTiles(),this._mergedSourceCaches[ct].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(ct){const pt=this.getSourceCaches(ct);for(const vt of pt)vt.clearTiles()}clearSources(){for(const ct in this._mergedSourceCaches)this._mergedSourceCaches[ct].clearTiles()}reloadSource(ct){const pt=this.getSourceCaches(ct);for(const vt of pt)vt.resume(),vt.reload()}reloadSources(){for(const ct of this.getSources())ct.reload&&ct.reload()}updateSources(ct){let pt;this.directionalLight&&(pt=Wp(this.directionalLight));for(const vt in this._mergedSourceCaches)this._mergedSourceCaches[vt].update(ct,void 0,void 0,pt)}_generateCollisionBoxes(){for(const ct in this._sourceCaches){const pt=this._sourceCaches[ct];pt.resume(),pt.reload()}}_updatePlacement(ct,pt,vt,Tt,Pt,Ot,Ft=!1){let Vt=!1,Gt=!1;const Zt={},Yt={};for(const er of this._mergedOrder){const rr=this._mergedLayers[er];if(rr.type!=="symbol")continue;const sr=at.am(rr.source,rr.scope);let lr=Zt[sr];if(!lr){const ur=this.getLayerSourceCache(rr);if(!ur)continue;const br=ur.getRenderableIds(!0).map(Er=>ur.getTileByID(Er));Yt[sr]=br.slice(),lr=Zt[sr]=br.sort((Er,_r)=>_r.tileID.overscaledZ-Er.tileID.overscaledZ||(Er.tileID.isLessThan(_r.tileID)?-1:1))}const cr=this.crossTileSymbolIndex.addLayer(rr,lr,pt.center.lng,pt.projection);Vt=Vt||cr}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),Ft=Ft||this._layerOrderChanged||Tt===0,this._layerOrderChanged&&this.fire(new at.g("neworder")),(Ft||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(at.e.now(),pt.zoom))&&(this.pauseablePlacement=new v_(pt,this._mergedOrder,Ft,vt,Tt,Pt,this.placement,this.fog&&pt.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,Zt,Yt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(at.e.now()),Gt=!0),Vt&&this.pauseablePlacement.placement.setStale()),Gt||Vt){this._buildingIndex.onNewFrame(pt.zoom);for(let er=0;er<this._mergedOrder.length;er++){const rr=this._mergedLayers[this._mergedOrder[er]];if(rr.type!=="symbol")continue;const sr=this.isLayerClipped(rr)&&this._clipLayerIndices.some(lr=>er<lr);this.placement.updateLayerOpacities(rr,Zt[at.am(rr.source,rr.scope)],er,sr?Ot:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(at.e.now())}}_releaseSymbolFadeTiles(){for(const ct in this._sourceCaches)this._sourceCaches[ct].releaseSymbolFadeTiles()}addImport(ct,pt){this._checkLoaded();const vt=this.stylesheet.imports=this.stylesheet.imports||[];if(vt.findIndex(({id:Pt})=>Pt===ct.id)!==-1)return void this.fire(new at.f(new Error(`Import with id '${ct.id}' already exists in the map's style.`)));if(!pt)return vt.push(ct),this._loadImports([ct],!0);const Tt=vt.findIndex(({id:Pt})=>Pt===pt);return Tt===-1&&this.fire(new at.f(new Error(`Import with id "${pt}" does not exist on this map.`))),this.stylesheet.imports=vt.slice(0,Tt).concat(ct).concat(vt.slice(Tt)),this._loadImports([ct],!0,pt)}updateImport(ct,pt){this._checkLoaded();const vt=this.stylesheet.imports||[],Tt=this.getImportIndex(ct);return Tt===-1?this:typeof pt=="string"?(this.setImportUrl(ct,pt),this):(pt.url&&pt.url!==vt[Tt].url&&this.setImportUrl(ct,pt.url),at.d(pt.config,vt[Tt].config)||this.setImportConfig(ct,pt.config),at.d(pt.data,vt[Tt].data)||this.setImportData(ct,pt.data),this)}moveImport(ct,pt){this._checkLoaded();let vt=this.stylesheet.imports||[];const Tt=this.getImportIndex(ct);if(Tt===-1)return this;const Pt=this.getImportIndex(pt);if(Pt===-1)return this;const Ot=vt[Tt],Ft=this.fragments[Tt];return vt=vt.filter(({id:Vt})=>Vt!==ct),this.fragments=this.fragments.filter(({id:Vt})=>Vt!==ct),this.stylesheet.imports=vt.slice(0,Pt).concat(Ot).concat(vt.slice(Pt)),this.fragments=this.fragments.slice(0,Pt).concat(Ft).concat(this.fragments.slice(Pt)),this.mergeLayers(),this}setImportUrl(ct,pt){this._checkLoaded();const vt=this.stylesheet.imports||[],Tt=this.getImportIndex(ct);if(Tt===-1)return this;vt[Tt].url=pt;const Pt=this.fragments[Tt];return Pt.style=this._createFragmentStyle(vt[Tt]),Pt.style.on("style.import.load",()=>this.mergeAll()),Pt.style.loadURL(pt),this}setImportData(ct,pt){this._checkLoaded();const vt=this.getImportIndex(ct),Tt=this.stylesheet.imports||[];return vt===-1?this:pt?(this.fragments[vt].style.setState(pt),this._reloadImports(),this):(delete Tt[vt].data,this.setImportUrl(ct,Tt[vt].url))}setImportConfig(ct,pt){this._checkLoaded();const vt=this.getImportIndex(ct),Tt=this.stylesheet.imports||[];if(vt===-1)return this;pt?Tt[vt].config=pt:delete Tt[vt].config;const Pt=this.fragments[vt],Ot=Pt.style.stylesheet&&Pt.style.stylesheet.schema;return Pt.config=pt,Pt.style.updateConfig(pt,Ot),this.updateConfigDependencies(),this}removeImport(ct){this._checkLoaded();const pt=this.stylesheet.imports||[],vt=this.getImportIndex(ct);vt!==-1&&(pt.splice(vt,1),this.fragments[vt].style._remove(),this.fragments.splice(vt,1),this._reloadImports())}getImportIndex(ct){const pt=(this.stylesheet.imports||[]).findIndex(vt=>vt.id===ct);return pt===-1&&this.fire(new at.f(new Error(`Import '${ct}' does not exist in the map's style and cannot be updated.`))),pt}getLayer(ct){return this._mergedLayers[ct]}getSources(){const ct=[];for(const pt in this._mergedOtherSourceCaches){const vt=this._mergedOtherSourceCaches[pt];vt&&ct.push(vt.getSource())}return ct}getSource(ct,pt){const vt=this.getSourceCache(ct,pt);return vt&&vt.getSource()}getLayerSource(ct){const pt=this.getLayerSourceCache(ct);return pt&&pt.getSource()}getSourceCache(ct,pt){const vt=at.am(ct,pt);return this._mergedOtherSourceCaches[vt]}getLayerSourceCache(ct){const pt=at.am(ct.source,ct.scope);return ct.type==="symbol"?this._mergedSymbolSourceCaches[pt]:this._mergedOtherSourceCaches[pt]}getSourceCaches(ct){if(ct==null)return Object.values(this._mergedSourceCaches);const pt=[];return this._mergedOtherSourceCaches[ct]&&pt.push(this._mergedOtherSourceCaches[ct]),this._mergedSymbolSourceCaches[ct]&&pt.push(this._mergedSymbolSourceCaches[ct]),pt}updateSourceCaches(){const ct=this._changes.getUpdatedSourceCaches();for(const pt in ct){const vt=ct[pt];vt==="reload"?this.reloadSource(pt):vt==="clear"&&this.clearSource(pt)}}updateLayers(ct){const pt=this._changes.getUpdatedPaintProperties();for(const vt of pt){const Tt=this.getLayer(vt);Tt&&Tt.updateTransitions(ct)}}getImages(ct,pt,vt){this.imageManager.getImages(pt.icons,pt.scope,vt),this._updateTilesForChangedImages();const Tt=Pt=>{Pt&&Pt.setDependencies(pt.tileID.key,pt.type,pt.icons)};Tt(this._otherSourceCaches[pt.source]),Tt(this._symbolSourceCaches[pt.source])}getGlyphs(ct,pt,vt){this.glyphManager.getGlyphs(pt.stacks,pt.scope,vt)}getResource(ct,pt,vt){return at.d2(pt,vt)}getOwnSourceCache(ct){return this._otherSourceCaches[ct]}getOwnLayerSourceCache(ct){return ct.type==="symbol"?this._symbolSourceCaches[ct.source]:this._otherSourceCaches[ct.source]}getOwnSourceCaches(ct){const pt=[];return this._otherSourceCaches[ct]&&pt.push(this._otherSourceCaches[ct]),this._symbolSourceCaches[ct]&&pt.push(this._symbolSourceCaches[ct]),pt}_isSourceCacheLoaded(ct){const pt=this.getOwnSourceCaches(ct);return pt.length===0?(this.fire(new at.f(new Error(`There is no source with ID '${ct}'`))),!1):pt.every(vt=>vt.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(ct,pt){if(this._clipLayerIndices.length===0&&ct.type!=="fill-extrusion")return!1;const vt=ct.type==="fill-extrusion"&&ct.sourceLayer==="building";let Tt=0;if(ct.is3D()){if(vt||pt&&pt.type==="batched-model")return!0;ct.type==="model"&&(Tt=at.cw.Model)}else ct.type==="symbol"&&(Tt=at.cw.Symbol);for(const Pt of this._clipLayerIndices){const Ot=this._mergedLayers[this._mergedOrder[Pt]];if(!Ot)continue;const Ft=[];for(const Vt of Ot.layout.get("clip-layer-types"))Ft.push(Vt==="model"?at.cw.Model:Vt==="symbol"?at.cw.Symbol:at.cw.FillExtrusion);for(const Vt of Ft)if(Tt&Vt)return!0}return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(ct=>{ct.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}function E_(xt,ct){let pt=!1,vt=null;const Tt=()=>{vt=null,pt&&(xt(),vt=setTimeout(Tt,ct),pt=!1)};return()=>(pt=!0,vt||Tt(),vt)}Ul.getSourceType=function(xt){return Wy[xt]},Ul.setSourceType=function(xt,ct){Wy[xt]=ct},Ul.registerForPluginStateChange=at.cO;class S_{constructor(ct){this._hashName=ct&&encodeURIComponent(ct),at.br(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=E_(this._updateHashUnthrottled.bind(this),300)}addTo(ct){return this._map=ct,window.addEventListener("hashchange",this._onHashChange,!1),ct.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const ct=this._map;if(!ct)return"";const pt=Bx(ct);if(this._hashName){const vt=this._hashName;let Tt=!1;const Pt=location.hash.slice(1).split("&").map(Ot=>{const Ft=Ot.split("=")[0];return Ft===vt?(Tt=!0,`${Ft}=${pt}`):Ot}).filter(Ot=>Ot);return Tt||Pt.push(`${vt}=${pt}`),`#${Pt.join("&")}`}return`#${pt}`}_getCurrentHash(){const ct=location.hash.replace("#","");if(this._hashName){let pt;return ct.split("&").map(vt=>vt.split("=")).forEach(vt=>{vt[0]===this._hashName&&(pt=vt)}),(pt&&pt[1]||"").split("/")}return ct.split("/")}_onHashChange(){const ct=this._map;if(!ct)return!1;const pt=this._getCurrentHash();if(pt.length>=3&&!pt.some(vt=>isNaN(vt))){const vt=ct.dragRotate.isEnabled()&&ct.touchZoomRotate.isEnabled()?+(pt[3]||0):ct.getBearing();return ct.jumpTo({center:[+pt[2],+pt[1]],zoom:+pt[0],bearing:vt,pitch:+(pt[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function Bx(xt,ct){const pt=xt.getCenter(),vt=Math.round(100*xt.getZoom())/100,Tt=Math.ceil((vt*Math.LN2+Math.log(512/360/.5))/Math.LN10),Pt=Math.pow(10,Tt),Ot=Math.round(pt.lng*Pt)/Pt,Ft=Math.round(pt.lat*Pt)/Pt,Vt=xt.getBearing(),Gt=xt.getPitch();let Zt=ct?`/${Ot}/${Ft}/${vt}`:`${vt}/${Ft}/${Ot}`;return(Vt||Gt)&&(Zt+="/"+Math.round(10*Vt)/10),Gt&&(Zt+=`/${Math.round(Gt)}`),Zt}const rm={linearity:.3,easing:at.d3(0,0,.3,1)},aw=at.Q({deceleration:2500,maxSpeed:1400},rm),sw=at.Q({deceleration:20,maxSpeed:1400},rm),lw=at.Q({deceleration:1e3,maxSpeed:360},rm),cw=at.Q({deceleration:1e3,maxSpeed:90},rm);class T_{constructor(ct){this._map=ct,this.clear()}clear(){this._inertiaBuffer=[]}record(ct){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:at.e.now(),settings:ct})}_drainInertiaBuffer(){const ct=this._inertiaBuffer,pt=at.e.now();for(;ct.length>0&&pt-ct[0].time>160;)ct.shift()}_onMoveEnd(ct){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const pt={zoom:0,bearing:0,pitch:0,pan:new at.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:Pt}of this._inertiaBuffer)pt.zoom+=Pt.zoomDelta||0,pt.bearing+=Pt.bearingDelta||0,pt.pitch+=Pt.pitchDelta||0,Pt.panDelta&&pt.pan._add(Pt.panDelta),Pt.around&&(pt.around=Pt.around),Pt.pinchAround&&(pt.pinchAround=Pt.pinchAround);const vt=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Tt={};if(pt.pan.mag()){const Pt=bp(pt.pan.mag(),vt,at.Q({},aw,ct||{}));Tt.offset=pt.pan.mult(Pt.amount/pt.pan.mag()),Tt.center=this._map.transform.center,h0(Tt,Pt)}if(pt.zoom){const Pt=bp(pt.zoom,vt,sw);Tt.zoom=this._map.transform.zoom+Pt.amount,h0(Tt,Pt)}if(pt.bearing){const Pt=bp(pt.bearing,vt,lw);Tt.bearing=this._map.transform.bearing+at.au(Pt.amount,-179,179),h0(Tt,Pt)}if(pt.pitch){const Pt=bp(pt.pitch,vt,cw);Tt.pitch=this._map.transform.pitch+Pt.amount,h0(Tt,Pt)}if(Tt.zoom||Tt.bearing){const Pt=pt.pinchAround===void 0?pt.around:pt.pinchAround;Tt.around=Pt?this._map.unproject(Pt):this._map.getCenter()}return this.clear(),Tt.noMoveStart=!0,Tt}}function h0(xt,ct){(!xt.duration||xt.duration<ct.duration)&&(xt.duration=ct.duration,xt.easing=ct.easing)}function bp(xt,ct,pt){const{maxSpeed:vt,linearity:Tt,deceleration:Pt}=pt,Ot=at.au(xt*Tt/(ct/1e3),-vt,vt),Ft=Math.abs(Ot)/(Pt*Tt);return{easing:pt.easing,duration:1e3*Ft,amount:Ot*(Ft/2)}}class Gl extends at.g{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ct,pt,vt,Tt={}){const Pt=Ut(pt.getCanvasContainer(),vt),Ot=pt.unproject(Pt);super(ct,at.Q({point:Pt,lngLat:Ot,originalEvent:vt},Tt)),this._defaultPrevented=!1,this.target=pt}}class sy extends at.g{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ct,pt,vt){const Tt=ct==="touchend"?vt.changedTouches:vt.touches,Pt=Ht(pt.getCanvasContainer(),Tt),Ot=Pt.map(Vt=>pt.unproject(Vt)),Ft=Pt.reduce((Vt,Gt,Zt,Yt)=>Vt.add(Gt.div(Yt.length)),new at.P(0,0));super(ct,{points:Pt,point:Ft,lngLats:Ot,lngLat:pt.unproject(Ft),originalEvent:vt}),this._defaultPrevented=!1}}class zx extends at.g{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(ct,pt){super("wheel",{originalEvent:pt}),this._defaultPrevented=!1}}class f0{constructor(ct,pt){this._map=ct,this._clickTolerance=pt.clickTolerance}reset(){this._mousedownPos=void 0}wheel(ct){return this._firePreventable(new zx(this._map,ct))}mousedown(ct,pt){return this._mousedownPos=pt,this._firePreventable(new Gl(ct.type,this._map,ct))}mouseup(ct){this._map.fire(new Gl(ct.type,this._map,ct))}preclick(ct){const pt=at.Q({},ct);pt.type="preclick",this._map.fire(new Gl(pt.type,this._map,pt))}click(ct,pt){this._mousedownPos&&this._mousedownPos.dist(pt)>=this._clickTolerance||(this.preclick(ct),this._map.fire(new Gl(ct.type,this._map,ct)))}dblclick(ct){return this._firePreventable(new Gl(ct.type,this._map,ct))}mouseover(ct){this._map.fire(new Gl(ct.type,this._map,ct))}mouseout(ct){this._map.fire(new Gl(ct.type,this._map,ct))}touchstart(ct){return this._firePreventable(new sy(ct.type,this._map,ct))}touchmove(ct){this._map.fire(new sy(ct.type,this._map,ct))}touchend(ct){this._map.fire(new sy(ct.type,this._map,ct))}touchcancel(ct){this._map.fire(new sy(ct.type,this._map,ct))}_firePreventable(ct){if(this._map.fire(ct),ct.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vx{constructor(ct){this._map=ct}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(ct){this._map.fire(new Gl(ct.type,this._map,ct))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gl("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(ct){this._delayContextMenu?this._contextMenuEvent=ct:this._map.fire(new Gl(ct.type,this._map,ct)),this._map.listens("contextmenu")&&ct.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class wp{constructor(ct,pt){this._map=ct,this._el=ct.getCanvasContainer(),this._container=ct.getContainer(),this._clickTolerance=pt.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(ct,pt){this.isEnabled()&&ct.shiftKey&&ct.button===0&&(Mt(),this._startPos=this._lastPos=pt,this._active=!0)}mousemoveWindow(ct,pt){if(!this._active)return;const vt=pt,Tt=this._startPos,Pt=this._lastPos;if(!Tt||!Pt||Pt.equals(vt)||!this._box&&vt.dist(Tt)<this._clickTolerance)return;this._lastPos=vt,this._box||(this._box=St("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",ct));const Ot=Math.min(Tt.x,vt.x),Ft=Math.max(Tt.x,vt.x),Vt=Math.min(Tt.y,vt.y),Gt=Math.max(Tt.y,vt.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${Ot}px,${Vt}px)`,this._box.style.width=Ft-Ot+"px",this._box.style.height=Gt-Vt+"px")})}mouseupWindow(ct,pt){if(!this._active)return;const vt=this._startPos,Tt=pt;if(vt&&ct.button===0){if(this.reset(),Nt(),vt.x!==Tt.x||vt.y!==Tt.y)return this._map.fire(new at.g("boxzoomend",{originalEvent:ct})),{cameraAnimation:Pt=>Pt.fitScreenCoordinates(vt,Tt,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",ct)}}keydown(ct){this._active&&ct.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",ct))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),$t(),delete this._startPos,delete this._lastPos}_fireEvent(ct,pt){return this._map.fire(new at.g(ct,{originalEvent:pt}))}}function ly(xt,ct){const pt={};for(let vt=0;vt<xt.length;vt++)pt[xt[vt].identifier]=ct[vt];return pt}class A_{constructor(ct){this.reset(),this.numTouches=ct.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(ct,pt,vt){(this.centroid||vt.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=ct.timeStamp),vt.length===this.numTouches&&(this.centroid=function(Tt){const Pt=new at.P(0,0);for(const Ot of Tt)Pt._add(Ot);return Pt.div(Tt.length)}(pt),this.touches=ly(vt,pt)))}touchmove(ct,pt,vt){if(this.aborted||!this.centroid)return;const Tt=ly(vt,pt);for(const Pt in this.touches){const Ot=Tt[Pt];(!Ot||Ot.dist(this.touches[Pt])>30)&&(this.aborted=!0)}}touchend(ct,pt,vt){if((!this.centroid||ct.timeStamp-this.startTime>500)&&(this.aborted=!0),vt.length===0){const Tt=!this.aborted&&this.centroid;if(this.reset(),Tt)return Tt}}}class _d{constructor(ct){this.singleTap=new A_(ct),this.numTaps=ct.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(ct,pt,vt){this.singleTap.touchstart(ct,pt,vt)}touchmove(ct,pt,vt){this.singleTap.touchmove(ct,pt,vt)}touchend(ct,pt,vt){const Tt=this.singleTap.touchend(ct,pt,vt);if(Tt){const Pt=ct.timeStamp-this.lastTime<500,Ot=!this.lastTap||this.lastTap.dist(Tt)<30;if(Pt&&Ot||this.reset(),this.count++,this.lastTime=ct.timeStamp,this.lastTap=Tt,this.count===this.numTaps)return this.reset(),Tt}}}class cy{constructor(){this._zoomIn=new _d({numTouches:1,numTaps:2}),this._zoomOut=new _d({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(ct,pt,vt){this._zoomIn.touchstart(ct,pt,vt),this._zoomOut.touchstart(ct,pt,vt)}touchmove(ct,pt,vt){this._zoomIn.touchmove(ct,pt,vt),this._zoomOut.touchmove(ct,pt,vt)}touchend(ct,pt,vt){const Tt=this._zoomIn.touchend(ct,pt,vt),Pt=this._zoomOut.touchend(ct,pt,vt);return Tt?(this._active=!0,ct.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Ot=>Ot.easeTo({duration:300,zoom:Ot.getZoom()+1,around:Ot.unproject(Tt)},{originalEvent:ct})}):Pt?(this._active=!0,ct.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:Ot=>Ot.easeTo({duration:300,zoom:Ot.getZoom()-1,around:Ot.unproject(Pt)},{originalEvent:ct})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const p0={0:1,2:2};class uy{constructor(ct){this.reset(),this._clickTolerance=ct.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(ct,pt){return!1}_move(ct,pt){return{}}mousedown(ct,pt){if(this._lastPoint)return;const vt=Kt(ct);this._correctButton(ct,vt)&&(this._lastPoint=pt,this._eventButton=vt)}mousemoveWindow(ct,pt){const vt=this._lastPoint;if(vt){if(ct.preventDefault(),this._eventButton!=null&&function(Tt,Pt){const Ot=p0[Pt];return Tt.buttons===void 0||(Tt.buttons&Ot)!==Ot}(ct,this._eventButton))this.reset();else if(this._moved||!(pt.dist(vt)<this._clickTolerance))return this._moved=!0,this._lastPoint=pt,this._move(vt,pt)}}mouseupWindow(ct){this._lastPoint&&Kt(ct)===this._eventButton&&(this._moved&&Nt(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dy extends uy{mousedown(ct,pt){super.mousedown(ct,pt),this._lastPoint&&(this._active=!0)}_correctButton(ct,pt){return pt===0&&!ct.ctrlKey}_move(ct,pt){return{around:pt,panDelta:pt.sub(ct)}}}class hy extends uy{_correctButton(ct,pt){return pt===0&&ct.ctrlKey||pt===2}_move(ct,pt){const vt=.8*(pt.x-ct.x);if(vt)return this._active=!0,{bearingDelta:vt}}contextmenu(ct){ct.preventDefault()}}class m0 extends uy{_correctButton(ct,pt){return pt===0&&ct.ctrlKey||pt===2}_move(ct,pt){const vt=-.5*(pt.y-ct.y);if(vt)return this._active=!0,{pitchDelta:vt}}contextmenu(ct){ct.preventDefault()}}class P_{constructor(ct,pt){this._map=ct,this._el=ct.getCanvasContainer(),this._minTouches=1,this._clickTolerance=pt.clickTolerance||1,this.reset(),at.br(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new at.P(0,0)}touchstart(ct,pt,vt){return this._calculateTransform(ct,pt,vt)}touchmove(ct,pt,vt){if(this._active&&!(vt.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(vt.length===1&&!at.d4())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return ct.cancelable&&ct.preventDefault(),this._calculateTransform(ct,pt,vt)}}touchend(ct,pt,vt){this._calculateTransform(ct,pt,vt),this._active&&vt.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(ct,pt,vt){vt.length>0&&(this._active=!0);const Tt=ly(vt,pt),Pt=new at.P(0,0),Ot=new at.P(0,0);let Ft=0;for(const Gt in Tt){const Zt=Tt[Gt],Yt=this._touches[Gt];Yt&&(Pt._add(Zt),Ot._add(Zt.sub(Yt)),Ft++,Tt[Gt]=Zt)}if(this._touches=Tt,Ft<this._minTouches||!Ot.mag())return;const Vt=Ot.div(Ft);return this._sum._add(Vt),this._sum.mag()<this._clickTolerance?void 0:{around:Pt.div(Ft),panDelta:Vt}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=St("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class fy{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(ct){}_move(ct,pt,vt){return{}}touchstart(ct,pt,vt){this._firstTwoTouches||vt.length<2||(this._firstTwoTouches=[vt[0].identifier,vt[1].identifier],this._start([pt[0],pt[1]]))}touchmove(ct,pt,vt){const Tt=this._firstTwoTouches;if(!Tt)return;ct.preventDefault();const[Pt,Ot]=Tt,Ft=Ep(vt,pt,Pt),Vt=Ep(vt,pt,Ot);if(!Ft||!Vt)return;const Gt=this._aroundCenter?null:Ft.add(Vt).div(2);return this._move([Ft,Vt],Gt,ct)}touchend(ct,pt,vt){if(!this._firstTwoTouches)return;const[Tt,Pt]=this._firstTwoTouches,Ot=Ep(vt,pt,Tt),Ft=Ep(vt,pt,Pt);Ot&&Ft||(this._active&&Nt(),this.reset())}touchcancel(){this.reset()}enable(ct){this._enabled=!0,this._aroundCenter=!!ct&&ct.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ep(xt,ct,pt){for(let vt=0;vt<xt.length;vt++)if(xt[vt].identifier===pt)return ct[vt]}function im(xt,ct){return Math.log(xt/ct)/Math.LN2}class C_ extends fy{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(ct){this._startDistance=this._distance=ct[0].dist(ct[1])}_move(ct,pt){const vt=this._distance;if(this._distance=ct[0].dist(ct[1]),this._active||!(Math.abs(im(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:im(this._distance,vt),pinchAround:pt}}}function Ux(xt,ct){return 180*xt.angleWith(ct)/Math.PI}class k_ extends fy{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(ct){this._startVector=this._vector=ct[0].sub(ct[1]),this._minDiameter=ct[0].dist(ct[1])}_move(ct,pt){const vt=this._vector;if(this._vector=ct[0].sub(ct[1]),vt&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ux(this._vector,vt),pinchAround:pt}}_isBelowThreshold(ct){this._minDiameter=Math.min(this._minDiameter,ct.mag());const pt=25/(Math.PI*this._minDiameter)*360,vt=this._startVector;if(!vt)return!1;const Tt=Ux(ct,vt);return Math.abs(Tt)<pt}}function _h(xt){return Math.abs(xt.y)>Math.abs(xt.x)}class R_ extends fy{constructor(ct){super(),this._map=ct}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(ct){this._lastPoints=ct,_h(ct[0].sub(ct[1]))&&(this._valid=!1)}_move(ct,pt,vt){const Tt=this._lastPoints;if(!Tt)return;const Pt=ct[0].sub(Tt[0]),Ot=ct[1].sub(Tt[1]);return this._map._cooperativeGestures&&!at.d4()&&vt.touches.length<3||(this._valid=this.gestureBeginsVertically(Pt,Ot,vt.timeStamp),!this._valid)?void 0:(this._lastPoints=ct,this._active=!0,{pitchDelta:(Pt.y+Ot.y)/2*-.5})}gestureBeginsVertically(ct,pt,vt){if(this._valid!==void 0)return this._valid;const Tt=ct.mag()>=2,Pt=pt.mag()>=2;if(!Tt&&!Pt)return;if(!Tt||!Pt)return this._firstMove==null&&(this._firstMove=vt),vt-this._firstMove<100&&void 0;const Ot=ct.y>0==pt.y>0;return _h(ct)&&_h(pt)&&Ot}}const uw={panStep:100,bearingStep:15,pitchStep:10};class dw{constructor(){const ct=uw;this._panStep=ct.panStep,this._bearingStep=ct.bearingStep,this._pitchStep=ct.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(ct){if(ct.altKey||ct.ctrlKey||ct.metaKey)return;let pt=0,vt=0,Tt=0,Pt=0,Ot=0;switch(ct.keyCode){case 61:case 107:case 171:case 187:pt=1;break;case 189:case 109:case 173:pt=-1;break;case 37:ct.shiftKey?vt=-1:(ct.preventDefault(),Pt=-1);break;case 39:ct.shiftKey?vt=1:(ct.preventDefault(),Pt=1);break;case 38:ct.shiftKey?Tt=1:(ct.preventDefault(),Ot=-1);break;case 40:ct.shiftKey?Tt=-1:(ct.preventDefault(),Ot=1);break;default:return}return this._rotationDisabled&&(vt=0,Tt=0),{cameraAnimation:Ft=>{const Vt=Ft.getZoom();Ft.easeTo({duration:300,easeId:"keyboardHandler",easing:hw,zoom:pt?Math.round(Vt)+pt*(ct.shiftKey?2:1):Vt,bearing:Ft.getBearing()+vt*this._bearingStep,pitch:Ft.getPitch()+Tt*this._pitchStep,offset:[-Pt*this._panStep,-Ot*this._panStep],center:Ft.getCenter()},{originalEvent:ct})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function hw(xt){return xt*(2-xt)}const g0=4.000244140625,Gx=1/450;class Wx{constructor(ct,pt){this._map=ct,this._el=ct.getCanvasContainer(),this._handler=pt,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Gx,at.br(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(ct){this._defaultZoomRate=ct}setWheelZoomRate(ct){this._wheelZoomRate=ct}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(ct){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!ct&&ct.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(ct){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(ct.ctrlKey||ct.metaKey||this.isZooming()||at.d4()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let pt=ct.deltaMode===WheelEvent.DOM_DELTA_LINE?40*ct.deltaY:ct.deltaY;const vt=at.e.now(),Tt=vt-(this._lastWheelEventTime||0);this._lastWheelEventTime=vt,pt!==0&&pt%g0==0?this._type="wheel":pt!==0&&Math.abs(pt)<4?this._type="trackpad":Tt>400?(this._type=null,this._lastValue=pt,this._timeout=window.setTimeout(this._onTimeout,40,ct)):this._type||(this._type=Math.abs(Tt*pt)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,pt+=this._lastValue)),ct.shiftKey&&pt&&(pt/=4),this._type&&(this._lastWheelEvent=ct,this._delta-=pt,this._active||this._start(ct)),ct.preventDefault()}_onTimeout(ct){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(ct)}_start(ct){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const pt=Ut(this._el,ct);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:pt,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const ct=this._map.transform;this._type==="wheel"&&ct.projection.wrap&&(ct._center.lng>=180||ct._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const pt=()=>ct._terrainEnabled()&&this._aroundCoord?ct.computeZoomRelativeTo(this._aroundCoord):ct.zoom;if(this._delta!==0){const Gt=this._type==="wheel"&&Math.abs(this._delta)>g0?this._wheelZoomRate:this._defaultZoomRate;let Zt=2/(1+Math.exp(-Math.abs(this._delta*Gt)));this._delta<0&&Zt!==0&&(Zt=1/Zt);const Yt=pt(),er=Math.pow(2,Yt),rr=typeof this._targetZoom=="number"?ct.zoomScale(this._targetZoom):er;this._targetZoom=Math.min(ct.maxZoom,Math.max(ct.minZoom,ct.scaleZoom(rr*Zt))),this._type==="wheel"&&(this._startZoom=Yt,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const vt=typeof this._targetZoom=="number"?this._targetZoom:pt(),Tt=this._startZoom,Pt=this._easing;let Ot,Ft=!1;if(this._type==="wheel"&&Tt&&Pt){const Gt=Math.min((at.e.now()-this._lastWheelEventTime)/200,1),Zt=Pt(Gt);Ot=at.a3(Tt,vt,Zt),Gt<1?this._frameId||(this._frameId=!0):Ft=!0}else Ot=vt,Ft=!0;this._active=!0,Ft&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let Vt=Ot-pt();return Vt*this._lastDelta<0&&(Vt=0),{noInertia:!0,needsRenderFrame:!Ft,zoomDelta:Vt,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(ct){let pt=at.d5;if(this._prevEase){const vt=this._prevEase,Tt=(at.e.now()-vt.start)/vt.duration,Pt=vt.easing(Tt+.01)-vt.easing(Tt),Ot=.27/Math.sqrt(Pt*Pt+1e-4)*.01,Ft=Math.sqrt(.0729-Ot*Ot);pt=at.d3(Ot,Ft,.25,1)}return this._prevEase={start:at.e.now(),duration:ct,easing:pt},pt}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=St("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Hx{constructor(ct,pt){this._clickZoom=ct,this._tapZoom=pt}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class I_{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(ct,pt){return ct.preventDefault(),{cameraAnimation:vt=>{vt.easeTo({duration:300,zoom:vt.getZoom()+(ct.shiftKey?-1:1),around:vt.unproject(pt)},{originalEvent:ct})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $_{constructor(){this._tap=new _d({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(ct,pt,vt){this._swipePoint||(this._tapTime&&ct.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?vt.length>0&&(this._swipePoint=pt[0],this._swipeTouch=vt[0].identifier):this._tap.touchstart(ct,pt,vt))}touchmove(ct,pt,vt){if(this._tapTime){if(this._swipePoint){if(vt[0].identifier!==this._swipeTouch)return;const Tt=pt[0],Pt=Tt.y-this._swipePoint.y;return this._swipePoint=Tt,ct.preventDefault(),this._active=!0,{zoomDelta:Pt/128}}}else this._tap.touchmove(ct,pt,vt)}touchend(ct,pt,vt){this._tapTime?this._swipePoint&&vt.length===0&&this.reset():this._tap.touchend(ct,pt,vt)&&(this._tapTime=ct.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class fw{constructor(ct,pt,vt){this._el=ct,this._mousePan=pt,this._touchPan=vt}enable(ct){this._inertiaOptions=ct||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class py{constructor(ct,pt,vt){this._pitchWithRotate=ct.pitchWithRotate,this._mouseRotate=pt,this._mousePitch=vt}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class my{constructor(ct,pt,vt,Tt){this._el=ct,this._touchZoom=pt,this._touchRotate=vt,this._tapDragZoom=Tt,this._rotationDisabled=!1,this._enabled=!0}enable(ct){this._touchZoom.enable(ct),this._rotationDisabled||this._touchRotate.enable(ct),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const gy=xt=>xt.zoom||xt.drag||xt.pitch||xt.rotate;class Wl extends at.g{}class Zx{constructor(){this.constants=[1,1,.01],this.radius=0}setup(ct,pt){const vt=at.$.sub([],pt,ct);this.radius=at.$.length(vt[2]<0?at.$.div([],vt,this.constants):[vt[0],vt[1],0])}projectRay(ct){at.$.div(ct,ct,this.constants),at.$.normalize(ct,ct),at.$.mul(ct,ct,this.constants);const pt=at.$.scale([],ct,this.radius);if(pt[2]>0){const vt=at.$.scale([],[0,0,1],at.$.dot(pt,[0,0,1])),Tt=at.$.scale([],at.$.normalize([],[pt[0],pt[1],0]),this.radius),Pt=at.$.add([],pt,at.$.scale([],at.$.sub([],at.$.add([],Tt,vt),pt),2));pt[0]=Pt[0],pt[1]=Pt[1]}return pt}}function Sp(xt){return xt.panDelta&&xt.panDelta.mag()||xt.zoomDelta||xt.bearingDelta||xt.pitchDelta}class y0{constructor(ct,pt){this._map=ct,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new T_(ct),this._bearingSnap=pt.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Zx,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(pt),at.br(["handleEvent","handleWindowEvent"],this);const vt=this._el;this._listeners=[[vt,"touchstart",{passive:!0}],[vt,"touchmove",{passive:!1}],[vt,"touchend",void 0],[vt,"touchcancel",void 0],[vt,"mousedown",void 0],[vt,"mousemove",void 0],[vt,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[vt,"mouseover",void 0],[vt,"mouseout",void 0],[vt,"dblclick",void 0],[vt,"click",void 0],[vt,"keydown",{capture:!1}],[vt,"keyup",void 0],[vt,"wheel",{passive:!1}],[vt,"contextmenu",void 0],[window,"blur",void 0]];for(const[Tt,Pt,Ot]of this._listeners){const Ft=Tt===document?this.handleWindowEvent:this.handleEvent;Tt.addEventListener(Pt,Ft,Ot)}}destroy(){for(const[ct,pt,vt]of this._listeners){const Tt=ct===document?this.handleWindowEvent:this.handleEvent;ct.removeEventListener(pt,Tt,vt)}}_addDefaultHandlers(ct){const pt=this._map,vt=pt.getCanvasContainer();this._add("mapEvent",new f0(pt,ct));const Tt=pt.boxZoom=new wp(pt,ct);this._add("boxZoom",Tt);const Pt=new cy,Ot=new I_;pt.doubleClickZoom=new Hx(Ot,Pt),this._add("tapZoom",Pt),this._add("clickZoom",Ot);const Ft=new $_;this._add("tapDragZoom",Ft);const Vt=pt.touchPitch=new R_(pt);this._add("touchPitch",Vt);const Gt=new hy(ct),Zt=new m0(ct);pt.dragRotate=new py(ct,Gt,Zt),this._add("mouseRotate",Gt,["mousePitch"]),this._add("mousePitch",Zt,["mouseRotate"]);const Yt=new dy(ct),er=new P_(pt,ct);pt.dragPan=new fw(vt,Yt,er),this._add("mousePan",Yt),this._add("touchPan",er,["touchZoom","touchRotate"]);const rr=new k_,sr=new C_;pt.touchZoomRotate=new my(vt,sr,rr,Ft),this._add("touchRotate",rr,["touchPan","touchZoom"]),this._add("touchZoom",sr,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Vx(pt));const lr=pt.scrollZoom=new Wx(pt,this);this._add("scrollZoom",lr,["mousePan"]);const cr=pt.keyboard=new dw;this._add("keyboard",cr);for(const ur of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])ct.interactive&&ct[ur]&&pt[ur].enable(ct[ur])}_add(ct,pt,vt){this._handlers.push({handlerName:ct,handler:pt,allowed:vt}),this._handlersById[ct]=pt}stop(ct){if(!this._updatingCamera){for(const{handler:pt}of this._handlers)pt.reset();this._inertia.clear(),this._fireEvents({},{},ct),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:ct}of this._handlers)if(ct.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gy(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(ct,pt,vt){for(const Tt in ct)if(Tt!==vt&&(!pt||pt.indexOf(Tt)<0))return!0;return!1}handleWindowEvent(ct){this.handleEvent(ct,`${ct.type}Window`)}_getMapTouches(ct){const pt=[];for(const vt of ct)this._el.contains(vt.target)&&pt.push(vt);return pt}handleEvent(ct,pt){this._updatingCamera=!0;const vt=ct.type==="renderFrame",Tt=vt?void 0:ct,Pt={needsRenderFrame:!1},Ot={},Ft={},Vt=ct.touches?this._getMapTouches(ct.touches):void 0,Gt=Vt?Ht(this._el,Vt):vt?void 0:Ut(this._el,ct);for(const{handlerName:er,handler:rr,allowed:sr}of this._handlers){if(!rr.isEnabled())continue;let lr;this._blockedByActive(Ft,sr,er)?rr.reset():rr[pt||ct.type]&&(lr=rr[pt||ct.type](ct,Gt,Vt),this.mergeHandlerResult(Pt,Ot,lr,er,Tt),lr&&lr.needsRenderFrame&&this._triggerRenderFrame()),(lr||rr.isActive())&&(Ft[er]=rr)}const Zt={};for(const er in this._previousActiveHandlers)Ft[er]||(Zt[er]=Tt);this._previousActiveHandlers=Ft,(Object.keys(Zt).length||Sp(Pt))&&(this._changes.push([Pt,Ot,Zt]),this._triggerRenderFrame()),(Object.keys(Ft).length||Sp(Pt))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Yt}=Pt;Yt&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Yt(this._map))}mergeHandlerResult(ct,pt,vt,Tt,Pt){if(!vt)return;at.Q(ct,vt);const Ot={handlerName:Tt,originalEvent:vt.originalEvent||Pt};vt.zoomDelta!==void 0&&(pt.zoom=Ot),vt.panDelta!==void 0&&(pt.drag=Ot),vt.pitchDelta!==void 0&&(pt.pitch=Ot),vt.bearingDelta!==void 0&&(pt.rotate=Ot)}_applyChanges(){const ct={},pt={},vt={};for(const[Tt,Pt,Ot]of this._changes)Tt.panDelta&&(ct.panDelta=(ct.panDelta||new at.P(0,0))._add(Tt.panDelta)),Tt.zoomDelta&&(ct.zoomDelta=(ct.zoomDelta||0)+Tt.zoomDelta),Tt.bearingDelta&&(ct.bearingDelta=(ct.bearingDelta||0)+Tt.bearingDelta),Tt.pitchDelta&&(ct.pitchDelta=(ct.pitchDelta||0)+Tt.pitchDelta),Tt.around!==void 0&&(ct.around=Tt.around),Tt.aroundCoord!==void 0&&(ct.aroundCoord=Tt.aroundCoord),Tt.pinchAround!==void 0&&(ct.pinchAround=Tt.pinchAround),Tt.noInertia&&(ct.noInertia=Tt.noInertia),at.Q(pt,Pt),at.Q(vt,Ot);this._updateMapTransform(ct,pt,vt),this._changes=[]}_updateMapTransform(ct,pt,vt){const Tt=this._map,Pt=Tt.transform,Ot=br=>[br.x,br.y,br.z];if((br=>{const Er=this._eventsInProgress.drag;return Er&&!this._handlersById[Er.handlerName].isActive()})()&&!Sp(ct)){const br=Pt.zoom;Pt.cameraElevationReference="sea",this._originalZoom!=null&&Pt._orthographicProjectionAtLowPitch&&Pt.projection.name!=="globe"&&Pt.pitch===0?(Pt.cameraElevationReference="ground",Pt.zoom=this._originalZoom):(Pt.recenterOnTerrain(),Pt.cameraElevationReference="ground"),br!==Pt.zoom&&this._map._update(!0)}if(Pt._isCameraConstrained&&Tt._stop(!0),!Sp(ct))return void this._fireEvents(pt,vt,!0);let{panDelta:Ft,zoomDelta:Vt,bearingDelta:Gt,pitchDelta:Zt,around:Yt,aroundCoord:er,pinchAround:rr}=ct;Pt._isCameraConstrained&&(Vt>0&&(Vt=0),Pt._isCameraConstrained=!1),rr!==void 0&&(Yt=rr),(Vt||(br=>pt[br]&&!this._eventsInProgress[br])("drag"))&&Yt&&(this._dragOrigin=Ot(Pt.pointCoordinate3D(Yt)),this._originalZoom=Pt.zoom,this._trackingEllipsoid.setup(Pt._camera.position,this._dragOrigin)),Pt.cameraElevationReference="sea",Tt._stop(!0),Yt=Yt||Tt.transform.centerPoint,Gt&&(Pt.bearing+=Gt),Zt&&(Pt.pitch+=Zt),Pt._updateCameraState();const sr=[0,0,0];if(Ft)if(Pt.projection.name==="mercator"){const br=this._trackingEllipsoid.projectRay(Pt.screenPointToMercatorRay(Yt).dir),Er=this._trackingEllipsoid.projectRay(Pt.screenPointToMercatorRay(Yt.sub(Ft)).dir);sr[0]=Er[0]-br[0],sr[1]=Er[1]-br[1]}else{const br=Pt.pointCoordinate(Yt);if(Pt.projection.name==="globe"){Ft=Ft.rotate(-Pt.angle);const Er=Pt._pixelsPerMercatorPixel/Pt.worldSize;sr[0]=-Ft.x*at.d6(at.az(br.y))*Er,sr[1]=-Ft.y*at.d6(Pt.center.lat)*Er}else{const Er=Pt.pointCoordinate(Yt.sub(Ft));br&&Er&&(sr[0]=Er.x-br.x,sr[1]=Er.y-br.y)}}const lr=Pt.zoom,cr=[0,0,0];if(Vt){const br=Ot(er||Pt.pointCoordinate3D(Yt)),Er={dir:at.$.normalize([],at.$.sub([],br,Pt._camera.position))};if(Er.dir[2]<0){const _r=Pt.zoomDeltaToMovement(br,Vt);at.$.scale(cr,Er.dir,_r)}}const ur=at.$.add(sr,sr,cr);Pt._translateCameraConstrained(ur),Vt&&Math.abs(Pt.zoom-lr)>1e-4&&Pt.recenterOnTerrain(),Pt.cameraElevationReference="ground",this._map._update(),ct.noInertia||this._inertia.record(ct),this._fireEvents(pt,vt,!0)}_fireEvents(ct,pt,vt){const Tt=gy(this._eventsInProgress),Pt=gy(ct),Ot={};for(const Zt in ct){const{originalEvent:Yt}=ct[Zt];this._eventsInProgress[Zt]||(Ot[`${Zt}start`]=Yt),this._eventsInProgress[Zt]=ct[Zt]}!Tt&&Pt&&this._fireEvent("movestart",Pt.originalEvent);for(const Zt in Ot)this._fireEvent(Zt,Ot[Zt]);Pt&&this._fireEvent("move",Pt.originalEvent);for(const Zt in ct){const{originalEvent:Yt}=ct[Zt];this._fireEvent(Zt,Yt)}const Ft={};let Vt;for(const Zt in this._eventsInProgress){const{handlerName:Yt,originalEvent:er}=this._eventsInProgress[Zt];this._handlersById[Yt].isActive()||(delete this._eventsInProgress[Zt],Vt=pt[Yt]||er,Ft[`${Zt}end`]=Vt)}for(const Zt in Ft)this._fireEvent(Zt,Ft[Zt]);const Gt=gy(this._eventsInProgress);if(vt&&(Tt||Pt)&&!Gt){this._updatingCamera=!0;const Zt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Yt=er=>er!==0&&-this._bearingSnap<er&&er<this._bearingSnap;Zt?(Yt(Zt.bearing||this._map.getBearing())&&(Zt.bearing=0),this._map.easeTo(Zt,{originalEvent:Vt})):(this._map.fire(new at.g("moveend",{originalEvent:Vt})),Yt(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(ct,pt){this._map.fire(new at.g(ct,pt?{originalEvent:pt}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(ct=>{this._frameId=void 0,this.handleEvent(new Wl("renderFrame",{timeStamp:ct})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const x0="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class qx extends at.E{constructor(ct,pt){super(),this._moving=!1,this._zooming=!1,this.transform=ct,this._bearingSnap=pt.bearingSnap,this._respectPrefersReducedMotion=pt.respectPrefersReducedMotion!==!1,at.br(["_renderFrameCallback"],this)}getCenter(){return new at.aJ(this.transform.center.lng,this.transform.center.lat)}setCenter(ct,pt){return this.jumpTo({center:ct},pt)}panBy(ct,pt,vt){return ct=at.P.convert(ct).mult(-1),this.panTo(this.transform.center,at.Q({offset:ct},pt),vt)}panTo(ct,pt,vt){return this.easeTo(at.Q({center:ct},pt),vt)}getZoom(){return this.transform.zoom}setZoom(ct,pt){return this.jumpTo({zoom:ct},pt),this}zoomTo(ct,pt,vt){return this.easeTo(at.Q({zoom:ct},pt),vt)}zoomIn(ct,pt){return this.zoomTo(this.getZoom()+1,ct,pt),this}zoomOut(ct,pt){return this.zoomTo(this.getZoom()-1,ct,pt),this}getBearing(){return this.transform.bearing}setBearing(ct,pt){return this.jumpTo({bearing:ct},pt),this}getPadding(){return this.transform.padding}setPadding(ct,pt){return this.jumpTo({padding:ct},pt),this}rotateTo(ct,pt,vt){return this.easeTo(at.Q({bearing:ct},pt),vt)}resetNorth(ct,pt){return this.rotateTo(0,at.Q({duration:1e3},ct),pt),this}resetNorthPitch(ct,pt){return this.easeTo(at.Q({bearing:0,pitch:0,duration:1e3},ct),pt),this}snapToNorth(ct,pt){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(ct,pt):this}getPitch(){return this.transform.pitch}setPitch(ct,pt){return this.jumpTo({pitch:ct},pt),this}cameraForBounds(ct,pt){ct=at.aj.convert(ct);const vt=pt&&pt.bearing||0,Tt=pt&&pt.pitch||0,Pt=ct.getNorthWest(),Ot=ct.getSouthEast();return this._cameraForBounds(this.transform,Pt,Ot,vt,Tt,pt)}_extendPadding(ct){const pt={top:0,right:0,bottom:0,left:0};return ct==null?at.Q({},pt,this.transform.padding):typeof ct=="number"?{top:ct,bottom:ct,right:ct,left:ct}:at.Q({},pt,ct)}_extendCameraOptions(ct){return(ct=at.Q({offset:[0,0],maxZoom:this.transform.maxZoom},ct)).padding=this._extendPadding(ct.padding),ct}_minimumAABBFrustumDistance(ct,pt){const vt=pt.max[0]-pt.min[0],Tt=pt.max[1]-pt.min[1];return vt/Tt>ct.aspect?vt/(2*Math.tan(.5*ct.fovX)*ct.aspect):Tt/(2*Math.tan(.5*ct.fovY)*ct.aspect)}_cameraForBoundsOnGlobe(ct,pt,vt,Tt,Pt,Ot){const Ft=ct.clone(),Vt=this._extendCameraOptions(Ot);Ft.bearing=Tt,Ft.pitch=Pt;const Gt=at.aJ.convert(pt),Zt=at.aJ.convert(vt),Yt=.5*(Gt.lat+Zt.lat),er=.5*(Gt.lng+Zt.lng),rr=at.d7(Yt,er),sr=at.$.normalize([],rr),lr=at.$.normalize([],at.$.cross([],sr,[0,1,0])),cr=at.$.cross([],lr,sr),ur=[lr[0],lr[1],lr[2],0,cr[0],cr[1],cr[2],0,sr[0],sr[1],sr[2],0,0,0,0,1],br=[rr,at.d7(Gt.lat,Gt.lng),at.d7(Zt.lat,Gt.lng),at.d7(Zt.lat,Zt.lng),at.d7(Gt.lat,Zt.lng),at.d7(Yt,Gt.lng),at.d7(Yt,Zt.lng),at.d7(Gt.lat,er),at.d7(Zt.lat,er)];let Er=at.b8.fromPoints(br.map(Ur=>[at.$.dot(lr,Ur),at.$.dot(cr,Ur),at.$.dot(sr,Ur)]));const _r=at.$.transformMat4([],Er.center,ur);at.$.squaredLength(_r)===0&&at.$.set(_r,0,0,1),at.$.normalize(_r,_r),at.$.scale(_r,_r,at.cF),Ft.center=at.d8(_r);const $r=Ft.getWorldToCameraMatrix(),Tr=at.ae.invert(new Float64Array(16),$r);Er=at.b8.applyTransform(Er,at.ae.multiply([],$r,ur));const Ar=this._extendAABB(Er,Ft,Vt,Tt);if(!Ar)return void at.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");Er=Ar,at.$.transformMat4(_r,_r,$r);const Fr=.5*(Er.max[2]-Er.min[2]),zr=this._minimumAABBFrustumDistance(Ft,Er),Yr=at.$.scale([],[0,0,1],Fr),Vr=at.$.add(Yr,_r,Yr),Ir=zr+(Ft.pitch===0?0:at.$.distance(_r,Vr)),nn=Ft.globeCenterInViewSpace,en=at.$.sub([],_r,[nn[0],nn[1],nn[2]]);at.$.normalize(en,en),at.$.scale(en,en,Ir);const Wr=at.$.add([],_r,en);at.$.transformMat4(Wr,Wr,Tr);const Tn=at.da/at.cF,_n=at.$.length(Wr),Xr=at.ay(Math.max(_n*Tn-at.da,Number.EPSILON),0),hn=Math.min(Ft.zoomFromMercatorZAdjusted(Xr),Vt.maxZoom);return hn>.5*(at.b3+at.aV)?(Ft.setProjection({name:"mercator"}),Ft.zoom=hn,this._cameraForBounds(Ft,pt,vt,Tt,Pt,Ot)):{center:Ft.center,zoom:hn,bearing:Tt,pitch:Pt}}_extendAABB(ct,pt,vt,Tt){const Pt=.5*((vt.padding.left||0)+(vt.padding.right||0)),Ot=.5*((vt.padding.top||0)+(vt.padding.bottom||0)),Ft=Ot,Vt=Pt,Gt=Pt,Zt=Ot,Yt=pt.width-(Vt+Gt),er=pt.height-(Ft+Zt),rr=at.$.sub([],ct.max,ct.min),sr=Math.min(Yt/rr[0],er/rr[1]),lr=Math.min(pt.scaleZoom(pt.scale*sr),vt.maxZoom);if(isNaN(lr))return null;const cr=pt.scale/pt.zoomScale(lr),ur=new at.b8([ct.min[0]-Vt*cr,ct.min[1]-Zt*cr,ct.min[2]],[ct.max[0]+Gt*cr,ct.max[1]+Ft*cr,ct.max[2]]),br=(typeof vt.offset.x=="number"&&typeof vt.offset.y=="number"?new at.P(vt.offset.x,vt.offset.y):at.P.convert(vt.offset)).rotate(-at.ac(Tt));return ur.center[0]-=br.x*cr,ur.center[1]+=br.y*cr,ur}queryTerrainElevation(ct,pt){const vt=this.transform.elevation;return vt?(pt=at.Q({},{exaggerated:!0},pt),vt.getAtPoint(at._.fromLngLat(ct),null,pt.exaggerated)):null}_cameraForBounds(ct,pt,vt,Tt,Pt,Ot){if(ct.projection.name==="globe")return this._cameraForBoundsOnGlobe(ct,pt,vt,Tt,Pt,Ot);const Ft=ct.clone(),Vt=this._extendCameraOptions(Ot);Ft.bearing=Tt,Ft.pitch=Pt;const Gt=at.aJ.convert(pt),Zt=at.aJ.convert(vt),Yt=new at.aJ(Gt.lng,Zt.lat),er=new at.aJ(Zt.lng,Gt.lat),rr=Ft.project(Gt),sr=Ft.project(Zt),lr=this.queryTerrainElevation(Gt),cr=this.queryTerrainElevation(Zt),ur=this.queryTerrainElevation(Yt),br=this.queryTerrainElevation(er),Er=[[rr.x,rr.y,Math.min(lr||0,cr||0,ur||0,br||0)],[sr.x,sr.y,Math.max(lr||0,cr||0,ur||0,br||0)]];let _r=at.b8.fromPoints(Er);const $r=Ft.getWorldToCameraMatrix(),Tr=at.ae.invert(new Float64Array(16),$r);_r=at.b8.applyTransform(_r,$r);const Ar=this._extendAABB(_r,Ft,Vt,Tt);if(!Ar)return void at.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");_r=Ar;const Fr=.5*at.$.sub([],_r.max,_r.min)[2],zr=this._minimumAABBFrustumDistance(Ft,_r),Yr=[0,0,1,0];at.aB.transformMat4(Yr,Yr,$r),at.aB.normalize(Yr,Yr);const Vr=at.$.scale([],Yr,zr+Fr),Ir=at.$.add([],_r.center,Vr);at.$.transformMat4(_r.center,_r.center,Tr),at.$.transformMat4(Ir,Ir,Tr);const nn=[_r.center[0],_r.center[1],Ir[2]*Ft.pixelsPerMeter];at.$.scale(nn,nn,1/Ft.worldSize);const en=at.d9(nn[0]),Wr=at.az(nn[1]),Tn=Math.min(Ft._zoomFromMercatorZ(nn[2]),Vt.maxZoom),_n=new at.aJ(en,Wr);return Ft.mercatorFromTransition&&Tn<.5*(at.b3+at.aV)?(Ft.setProjection({name:"globe"}),Ft.zoom=Tn,this._cameraForBounds(Ft,pt,vt,Tt,Pt,Ot)):{center:_n,zoom:Tn,bearing:Tt,pitch:Pt}}fitBounds(ct,pt,vt){const Tt=this.cameraForBounds(ct,pt);return this._fitInternal(Tt,pt,vt)}fitScreenCoordinates(ct,pt,vt,Tt,Pt){const Ot=at.P.convert(ct),Ft=at.P.convert(pt),Vt=new at.P(Math.min(Ot.x,Ft.x),Math.min(Ot.y,Ft.y)),Gt=new at.P(Math.max(Ot.x,Ft.x),Math.max(Ot.y,Ft.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(Ot,Ft))return this;const Zt=this.transform.pointLocation3D(Vt),Yt=this.transform.pointLocation3D(Gt),er=this.transform.pointLocation3D(new at.P(Vt.x,Gt.y)),rr=this.transform.pointLocation3D(new at.P(Gt.x,Vt.y)),sr=[Math.min(Zt.lng,Yt.lng,er.lng,rr.lng),Math.min(Zt.lat,Yt.lat,er.lat,rr.lat)],lr=[Math.max(Zt.lng,Yt.lng,er.lng,rr.lng),Math.max(Zt.lat,Yt.lat,er.lat,rr.lat)],cr=Tt&&Tt.pitch?Tt.pitch:this.getPitch(),ur=this._cameraForBounds(this.transform,sr,lr,vt,cr,Tt);return this._fitInternal(ur,Tt,Pt)}_fitInternal(ct,pt,vt){return ct?(pt=at.Q(ct,pt)).linear?this.easeTo(pt,vt):this.flyTo(pt,vt):this}jumpTo(ct,pt){this.stop();const vt=ct.preloadOnly?this.transform.clone():this.transform;let Tt=!1,Pt=!1,Ot=!1;if("zoom"in ct&&vt.zoom!==+ct.zoom&&(Tt=!0,vt.zoom=+ct.zoom),ct.center!==void 0&&(vt.center=at.aJ.convert(ct.center)),"bearing"in ct&&vt.bearing!==+ct.bearing&&(Pt=!0,vt.bearing=+ct.bearing),"pitch"in ct&&vt.pitch!==+ct.pitch&&(Ot=!0,vt.pitch=+ct.pitch),ct.padding!=null){const Ft=typeof ct.padding=="number"?this._extendPadding(ct.padding):ct.padding;vt.isPaddingEqual(Ft)||(vt.padding=Ft)}return ct.preloadOnly?(this._preloadTiles(vt),this):(this.fire(new at.g("movestart",pt)).fire(new at.g("move",pt)),Tt&&this.fire(new at.g("zoomstart",pt)).fire(new at.g("zoom",pt)).fire(new at.g("zoomend",pt)),Pt&&this.fire(new at.g("rotatestart",pt)).fire(new at.g("rotate",pt)).fire(new at.g("rotateend",pt)),Ot&&this.fire(new at.g("pitchstart",pt)).fire(new at.g("pitch",pt)).fire(new at.g("pitchend",pt)),this.fire(new at.g("moveend",pt)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||at.w(x0),this.transform.getFreeCameraOptions()}setFreeCameraOptions(ct,pt){const vt=this.transform;if(!vt.projection.supportsFreeCamera)return at.w(x0),this;this.stop();const Tt=vt.zoom,Pt=vt.pitch,Ot=vt.bearing;vt.setFreeCameraOptions(ct);const Ft=Tt!==vt.zoom,Vt=Pt!==vt.pitch,Gt=Ot!==vt.bearing;return this.fire(new at.g("movestart",pt)).fire(new at.g("move",pt)),Ft&&this.fire(new at.g("zoomstart",pt)).fire(new at.g("zoom",pt)).fire(new at.g("zoomend",pt)),Gt&&this.fire(new at.g("rotatestart",pt)).fire(new at.g("rotate",pt)).fire(new at.g("rotateend",pt)),Vt&&this.fire(new at.g("pitchstart",pt)).fire(new at.g("pitch",pt)).fire(new at.g("pitchend",pt)),this.fire(new at.g("moveend",pt)),this}easeTo(ct,pt){this._stop(!1,ct.easeId),((ct=at.Q({offset:[0,0],duration:500,easing:at.d5},ct)).animate===!1||this._prefersReducedMotion(ct))&&(ct.duration=0);const vt=this.transform,Tt=this.getZoom(),Pt=this.getBearing(),Ot=this.getPitch(),Ft=this.getPadding(),Vt="zoom"in ct?+ct.zoom:Tt,Gt="bearing"in ct?this._normalizeBearing(ct.bearing,Pt):Pt,Zt="pitch"in ct?+ct.pitch:Ot,Yt=this._extendPadding(ct.padding),er=at.P.convert(ct.offset);let rr,sr,lr;if(vt.projection.name==="globe"){const zr=at._.fromLngLat(vt.center),Yr=er.rotate(-vt.angle);zr.x+=Yr.x/vt.worldSize,zr.y+=Yr.y/vt.worldSize;const Vr=zr.toLngLat(),Ir=at.aJ.convert(ct.center||Vr);this._normalizeCenter(Ir),rr=vt.centerPoint.add(Yr),sr=new at.P(zr.x,zr.y).mult(vt.worldSize),lr=new at.P(at.ak(Ir.lng),at.al(Ir.lat)).mult(vt.worldSize).sub(sr)}else{rr=vt.centerPoint.add(er);const zr=vt.pointLocation(rr),Yr=at.aJ.convert(ct.center||zr);this._normalizeCenter(Yr),sr=vt.project(zr),lr=vt.project(Yr).sub(sr)}const cr=vt.zoomScale(Vt-Tt);let ur,br;ct.around&&(ur=at.aJ.convert(ct.around),br=vt.locationPoint(ur));const Er=this._zooming||Vt!==Tt,_r=this._rotating||Pt!==Gt,$r=this._pitching||Zt!==Ot,Tr=!vt.isPaddingEqual(Yt),Ar=zr=>Yr=>{if(Er&&(zr.zoom=at.a3(Tt,Vt,Yr)),_r&&(zr.bearing=at.a3(Pt,Gt,Yr)),$r&&(zr.pitch=at.a3(Ot,Zt,Yr)),Tr&&(zr.interpolatePadding(Ft,Yt,Yr),rr=zr.centerPoint.add(er)),ur)zr.setLocationAtPoint(ur,br);else{const Vr=zr.zoomScale(zr.zoom-Tt),Ir=Vt>Tt?Math.min(2,cr):Math.max(.5,cr),nn=Math.pow(Ir,1-Yr),en=zr.unproject(sr.add(lr.mult(Yr*nn)).mult(Vr));zr.setLocationAtPoint(zr.renderWorldCopies?en.wrap():en,rr)}return ct.preloadOnly||this._fireMoveEvents(pt),zr};if(ct.preloadOnly){const zr=this._emulate(Ar,ct.duration,vt);return this._preloadTiles(zr),this}const Fr={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=Er,this._rotating=_r,this._pitching=$r,this._padding=Tr,this._easeId=ct.easeId,this._prepareEase(pt,ct.noMoveStart,Fr),this._ease(Ar(vt),zr=>{vt.cameraElevationReference==="sea"&&vt.recenterOnTerrain(),this._afterEase(pt,zr)},ct),this}_prepareEase(ct,pt,vt={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),pt||vt.moving||this.fire(new at.g("movestart",ct)),this._zooming&&!vt.zooming&&this.fire(new at.g("zoomstart",ct)),this._rotating&&!vt.rotating&&this.fire(new at.g("rotatestart",ct)),this._pitching&&!vt.pitching&&this.fire(new at.g("pitchstart",ct))}_fireMoveEvents(ct){this.fire(new at.g("move",ct)),this._zooming&&this.fire(new at.g("zoom",ct)),this._rotating&&this.fire(new at.g("rotate",ct)),this._pitching&&this.fire(new at.g("pitch",ct))}_afterEase(ct,pt){if(this._easeId&&pt&&this._easeId===pt)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const vt=this._zooming,Tt=this._rotating,Pt=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,vt&&this.fire(new at.g("zoomend",ct)),Tt&&this.fire(new at.g("rotateend",ct)),Pt&&this.fire(new at.g("pitchend",ct)),this.fire(new at.g("moveend",ct))}flyTo(ct,pt){if(this._prefersReducedMotion(ct)){const hn=at.ai(ct,["center","zoom","bearing","pitch","around","padding"]);return this.jumpTo(hn,pt)}this.stop(),ct=at.Q({offset:[0,0],speed:1.2,curve:1.42,easing:at.d5},ct);const vt=this.transform,Tt=this.getZoom(),Pt=this.getBearing(),Ot=this.getPitch(),Ft=this.getPadding(),Vt="zoom"in ct?at.au(+ct.zoom,vt.minZoom,vt.maxZoom):Tt,Gt="bearing"in ct?this._normalizeBearing(ct.bearing,Pt):Pt,Zt="pitch"in ct?+ct.pitch:Ot,Yt=this._extendPadding(ct.padding),er=vt.zoomScale(Vt-Tt),rr=at.P.convert(ct.offset);let sr=vt.centerPoint.add(rr);const lr=vt.pointLocation(sr),cr=at.aJ.convert(ct.center||lr);this._normalizeCenter(cr);const ur=vt.project(lr),br=vt.project(cr).sub(ur);let Er=ct.curve;const _r=Math.max(vt.width,vt.height),$r=_r/er,Tr=br.mag();if("minZoom"in ct){const hn=at.au(Math.min(ct.minZoom,Tt,Vt),vt.minZoom,vt.maxZoom),Ur=_r/vt.zoomScale(hn-Tt);Er=Math.sqrt(Ur/Tr*2)}const Ar=Er*Er;function Fr(hn){const Ur=($r*$r-_r*_r+(hn?-1:1)*Ar*Ar*Tr*Tr)/(2*(hn?$r:_r)*Ar*Tr);return Math.log(Math.sqrt(Ur*Ur+1)-Ur)}function zr(hn){return(Math.exp(hn)-Math.exp(-hn))/2}function Yr(hn){return(Math.exp(hn)+Math.exp(-hn))/2}const Vr=Fr(0);let Ir=function(hn){return Yr(Vr)/Yr(Vr+Er*hn)},nn=function(hn){return _r*((Yr(Vr)*(zr(Ur=Vr+Er*hn)/Yr(Ur))-zr(Vr))/Ar)/Tr;var Ur},en=(Fr(1)-Vr)/Er;if(Math.abs(Tr)<1e-6||!isFinite(en)){if(Math.abs(_r-$r)<1e-6)return this.easeTo(ct,pt);const hn=$r<_r?-1:1;en=Math.abs(Math.log($r/_r))/Er,nn=function(){return 0},Ir=function(Ur){return Math.exp(hn*Er*Ur)}}ct.duration="duration"in ct?+ct.duration:1e3*en/("screenSpeed"in ct?+ct.screenSpeed/Er:+ct.speed),ct.maxDuration&&ct.duration>ct.maxDuration&&(ct.duration=0);const Wr=Pt!==Gt,Tn=Zt!==Ot,_n=!vt.isPaddingEqual(Yt),Xr=hn=>Ur=>{const bn=Ur*en,Sn=1/Ir(bn);hn.zoom=Ur===1?Vt:Tt+hn.scaleZoom(Sn),Wr&&(hn.bearing=at.a3(Pt,Gt,Ur)),Tn&&(hn.pitch=at.a3(Ot,Zt,Ur)),_n&&(hn.interpolatePadding(Ft,Yt,Ur),sr=hn.centerPoint.add(rr));const zn=Ur===1?cr:hn.unproject(ur.add(br.mult(nn(bn))).mult(Sn));return hn.setLocationAtPoint(hn.renderWorldCopies?zn.wrap():zn,sr),hn._updateCameraOnTerrain(),ct.preloadOnly||this._fireMoveEvents(pt),hn};if(ct.preloadOnly){const hn=this._emulate(Xr,ct.duration,vt);return this._preloadTiles(hn),this}return this._zooming=!0,this._rotating=Wr,this._pitching=Tn,this._padding=_n,this._prepareEase(pt,!1),this._ease(Xr(vt),()=>this._afterEase(pt),ct),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(ct){}_cancelRenderFrame(ct){}_stop(ct,pt){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const vt=this._onEaseEnd;this._onEaseEnd=void 0,vt.call(this,pt)}if(!ct){const vt=this.handlers;vt&&vt.stop(!1)}return this}_ease(ct,pt,vt){vt.animate===!1||vt.duration===0?(ct(1),pt()):(this._easeStart=at.e.now(),this._easeOptions=vt,this._onEaseFrame=ct,this._onEaseEnd=pt,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const ct=Math.min((at.e.now()-this._easeStart)/this._easeOptions.duration,1),pt=this._onEaseFrame;pt&&pt(this._easeOptions.easing(ct)),ct<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(ct,pt){ct=at.av(ct,-180,180);const vt=Math.abs(ct-pt);return Math.abs(ct-360-pt)<vt&&(ct-=360),Math.abs(ct+360-pt)<vt&&(ct+=360),ct}_normalizeCenter(ct){const pt=this.transform;if(pt.maxBounds||pt.projection.name!=="globe"&&!pt.renderWorldCopies)return;const vt=ct.lng-pt.center.lng;ct.lng+=vt>180?-360:vt<-180?360:0}_prefersReducedMotion(ct){return this._respectPrefersReducedMotion&&at.e.prefersReducedMotion&&!(ct&&ct.essential)}_emulate(ct,pt,vt){const Tt=Math.ceil(15*pt/1e3),Pt=[],Ot=ct(vt.clone());for(let Ft=0;Ft<=Tt;Ft++){const Vt=Ot(Ft/Tt);Pt.push(Vt.clone())}return Pt}_preloadTiles(ct,pt){}}class yy{constructor(ct={}){this.options=ct,at.br(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(ct){const pt=this.options&&this.options.compact,vt=ct._getUIString("AttributionControl.ToggleAttribution");this._map=ct,this._container=St("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=St("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",vt);const Tt=St("span","mapboxgl-ctrl-icon",this._compactButton);return Tt.setAttribute("aria-hidden","true"),Tt.setAttribute("title",vt),this._innerContainer=St("div","mapboxgl-ctrl-attrib-inner",this._container),pt&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),pt===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let ct=this._editLink;ct||(ct=this._editLink=this._container.querySelector(".mapbox-improve-map"));const pt=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||at.db.ACCESS_TOKEN}];if(ct){const vt=pt.reduce((Tt,Pt,Ot)=>(Pt.value&&(Tt+=`${Pt.key}=${Pt.value}${Ot<pt.length-1?"&":""}`),Tt),"?");ct.href=`${at.db.FEEDBACK_URL}/${vt}#${Bx(this._map,!0)}`,ct.rel="noopener nofollow"}}_updateData(ct){!ct||ct.sourceDataType!=="metadata"&&ct.sourceDataType!=="visibility"&&ct.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let ct=[];if(this._map.style.stylesheet){const Tt=this._map.style.stylesheet;this.styleOwner=Tt.owner,this.styleId=Tt.id}const pt=this._map.style._mergedSourceCaches;for(const Tt in pt){const Pt=pt[Tt];if(Pt.used){const Ot=Pt.getSource();Ot.attribution&&ct.indexOf(Ot.attribution)<0&&ct.push(Ot.attribution)}}ct.sort((Tt,Pt)=>Tt.length-Pt.length),ct=ct.filter((Tt,Pt)=>{for(let Ot=Pt+1;Ot<ct.length;Ot++)if(ct[Ot].indexOf(Tt)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?ct=[...this.options.customAttribution,...ct]:ct.unshift(this.options.customAttribution));const vt=ct.join(" | ");vt!==this._attribHTML&&(this._attribHTML=vt,ct.length?(this._innerContainer.innerHTML=vt,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class v0{constructor(){at.br(["_updateLogo","_updateCompact"],this)}onAdd(ct){this._map=ct,this._container=St("div","mapboxgl-ctrl");const pt=St("a","mapboxgl-ctrl-logo");return pt.target="_blank",pt.rel="noopener nofollow",pt.href="https://www.mapbox.com/",pt.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),pt.setAttribute("rel","noopener nofollow"),this._container.appendChild(pt),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(ct){ct&&ct.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const ct=this._map.style._sourceCaches;if(Object.entries(ct).length===0)return!0;for(const pt in ct){const vt=ct[pt].getSource();if(vt.hasOwnProperty("mapbox_logo")&&!vt.mapbox_logo)return!1}return!0}_updateCompact(){const ct=this._container.children;if(ct.length){const pt=ct[0];this._map.getCanvasContainer().offsetWidth<250?pt.classList.add("mapboxgl-compact"):pt.classList.remove("mapboxgl-compact")}}}class _0{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(ct){const pt=++this._id;return this._queue.push({callback:ct,id:pt,cancelled:!1}),pt}remove(ct){const pt=this._currentlyRunning,vt=pt?this._queue.concat(pt):this._queue;for(const Tt of vt)if(Tt.id===ct)return void(Tt.cancelled=!0)}run(ct=0){const pt=this._currentlyRunning=this._queue;this._queue=[];for(const vt of pt)if(!vt.cancelled&&(vt.callback(ct),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function xy(xt,ct,pt){if(xt=new at.aJ(xt.lng,xt.lat),ct){const vt=new at.aJ(xt.lng-360,xt.lat),Tt=new at.aJ(xt.lng+360,xt.lat),Pt=360*Math.ceil(Math.abs(xt.lng-pt.center.lng)/360),Ot=pt.locationPoint(xt).distSqr(ct),Ft=ct.x<0||ct.y<0||ct.x>pt.width||ct.y>pt.height;pt.locationPoint(vt).distSqr(ct)<Ot&&(Ft||Math.abs(vt.lng-pt.center.lng)<Pt)?xt=vt:pt.locationPoint(Tt).distSqr(ct)<Ot&&(Ft||Math.abs(Tt.lng-pt.center.lng)<Pt)&&(xt=Tt)}for(;Math.abs(xt.lng-pt.center.lng)>180;){const vt=pt.locationPoint(xt);if(vt.x>=0&&vt.y>=0&&vt.x<=pt.width&&vt.y<=pt.height)break;xt.lng>pt.center.lng?xt.lng-=360:xt.lng+=360}return xt}const b0={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class w0 extends at.E{constructor(ct,pt){if(super(),(ct instanceof HTMLElement||pt)&&(ct=at.Q({element:ct},pt)),at.br(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=ct&&ct.anchor||"center",this._color=ct&&ct.color||"#3FB1CE",this._scale=ct&&ct.scale||1,this._draggable=ct&&ct.draggable||!1,this._clickTolerance=ct&&ct.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=ct&&ct.rotation||0,this._rotationAlignment=ct&&ct.rotationAlignment||"auto",this._pitchAlignment=ct&&ct.pitchAlignment&&ct.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=ct&&ct.occludedOpacity||.2,ct&&ct.element)this._element=ct.element,this._offset=at.P.convert(ct&&ct.offset||[0,0]);else{this._defaultMarker=!0,this._element=St("div");const Pt=41,Ot=27,Ft=kt("svg",{display:"block",height:Pt*this._scale+"px",width:Ot*this._scale+"px",viewBox:`0 0 ${Ot} ${Pt}`},this._element),Vt=kt("radialGradient",{id:"shadowGradient"},kt("defs",{},Ft));kt("stop",{offset:"10%","stop-opacity":.4},Vt),kt("stop",{offset:"100%","stop-opacity":.05},Vt),kt("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},Ft),kt("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},Ft),kt("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},Ft),kt("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},Ft),this._offset=at.P.convert(ct&&ct.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",Pt=>{Pt.preventDefault()}),this._element.addEventListener("mousedown",Pt=>{Pt.preventDefault()});const vt=this._element.classList;for(const Pt in b0)vt.remove(`mapboxgl-marker-anchor-${Pt}`);vt.add(`mapboxgl-marker-anchor-${this._anchor}`);const Tt=ct&&ct.className?ct.className.trim().split(/\s+/):[];vt.add(...Tt),this._popup=null}addTo(ct){return ct===this._map||(this.remove(),this._map=ct,ct.getCanvasContainer().appendChild(this._element),ct.on("move",this._updateMoving),ct.on("moveend",this._update),ct.on("remove",this._clearFadeTimer),ct._addMarker(this),this.setDraggable(this._draggable),this._update(),ct.on("click",this._onMapClick)),this}remove(){const ct=this._map;return ct&&(ct.off("click",this._onMapClick),ct.off("move",this._updateMoving),ct.off("moveend",this._update),ct.off("mousedown",this._addDragHandler),ct.off("touchstart",this._addDragHandler),ct.off("mouseup",this._onUp),ct.off("touchend",this._onUp),ct.off("mousemove",this._onMove),ct.off("touchmove",this._onMove),ct.off("remove",this._clearFadeTimer),ct._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(ct){return this._lngLat=at.aJ.convert(ct),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(ct){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),ct){if(!("offset"in ct.options)){const Tt=Math.sqrt(Math.pow(13.5,2)/2);ct.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[Tt,-1*(38.1-13.5+Tt)],"bottom-right":[-Tt,-1*(38.1-13.5+Tt)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=ct,ct._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(ct){const pt=ct.code,vt=ct.charCode||ct.keyCode;pt!=="Space"&&pt!=="Enter"&&vt!==32&&vt!==13||this.togglePopup()}_onMapClick(ct){const pt=ct.originalEvent.target,vt=this._element;this._popup&&(pt===vt||vt.contains(pt))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const ct=this._popup;return ct?(ct.isOpen()?(ct.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(ct.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const ct=this._map,pt=this._pos;if(!ct||!pt)return!1;const vt=ct.unproject(pt),Tt=ct.getFreeCameraOptions();if(!Tt.position)return!1;const Pt=Tt.position.toLngLat();return Pt.distanceTo(vt)<.9*Pt.distanceTo(this._lngLat)}_evaluateOpacity(){const ct=this._map;if(!ct)return;const pt=this._pos;if(!pt||pt.x<0||pt.x>ct.transform.width||pt.y<0||pt.y>ct.transform.height)return void this._clearFadeTimer();const vt=ct.unproject(pt);let Tt;ct._showingGlobe()&&at.dc(ct.transform,this._lngLat)?Tt=0:(Tt=1-ct._queryFogOpacity(vt),ct.transform._terrainEnabled()&&ct.getTerrain()&&this._behindTerrain()&&(Tt*=this._occludedOpacity)),this._element.style.opacity=`${Tt}`,this._element.style.pointerEvents=Tt>0?"auto":"none",this._popup&&this._popup._setOpacity(Tt),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const ct=this._pos;if(!ct||!this._map)return;const pt=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${ct.x}px,${ct.y}px)
            ${b0[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${pt.x}px,${pt.y}px)
        `}_calculateXYTransform(){const ct=this._pos,pt=this._map,vt=this.getPitchAlignment();if(!pt||!ct||vt!=="map")return"";if(!pt._showingGlobe()){const Vt=pt.getPitch();return Vt?`rotateX(${Vt}deg)`:""}const Tt=at.b1(at.dd(pt.transform,this._lngLat)),Pt=ct.sub(at.de(pt.transform)),Ot=Math.abs(Pt.x)+Math.abs(Pt.y);if(Ot===0)return"";const Ft=Tt/Ot;return`rotateX(${-Pt.y*Ft}deg) rotateY(${Pt.x*Ft}deg)`}_calculateZTransform(){const ct=this._pos,pt=this._map;if(!pt||!ct)return"";let vt=0;const Tt=this.getRotationAlignment();if(Tt==="map")if(pt._showingGlobe()){const Pt=pt.project(new at.aJ(this._lngLat.lng,this._lngLat.lat+.001)),Ot=pt.project(new at.aJ(this._lngLat.lng,this._lngLat.lat-.001)).sub(Pt);vt=at.b1(Math.atan2(Ot.y,Ot.x))-90}else vt=-pt.getBearing();else if(Tt==="horizon"){const Pt=at.a0(4,6,pt.getZoom()),Ot=at.de(pt.transform);Ot.y+=Pt*pt.transform.height;const Ft=ct.sub(Ot),Vt=at.b1(Math.atan2(Ft.y,Ft.x));vt=(Vt>90?Vt-270:Vt+90)*(1-Pt)}return vt+=this._rotation,vt?`rotateZ(${vt}deg)`:""}_update(ct){cancelAnimationFrame(this._updateFrameId);const pt=this._map;pt&&(pt.transform.renderWorldCopies&&(this._lngLat=xy(this._lngLat,this._pos,pt.transform)),this._pos=pt.project(this._lngLat),ct===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),pt._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(pt._showingGlobe()||pt.getTerrain()||pt.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(ct){return this._offset=at.P.convert(ct),this._update(),this}addClassName(ct){return this._element.classList.add(ct),this}removeClassName(ct){return this._element.classList.remove(ct),this}toggleClassName(ct){return this._element.classList.toggle(ct)}_onMove(ct){const pt=this._map;if(!pt)return;const vt=this._pointerdownPos,Tt=this._positionDelta;if(vt&&Tt){if(!this._isDragging){const Pt=this._clickTolerance||pt._clickTolerance;if(ct.point.dist(vt)<Pt)return;this._isDragging=!0}this._pos=ct.point.sub(Tt),this._lngLat=pt.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new at.g("dragstart"))),this.fire(new at.g("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const ct=this._map;ct&&(ct.off("mousemove",this._onMove),ct.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new at.g("dragend")),this._state="inactive"}_addDragHandler(ct){const pt=this._map,vt=this._pos;pt&&vt&&this._element.contains(ct.originalEvent.target)&&(ct.preventDefault(),this._positionDelta=ct.point.sub(vt),this._pointerdownPos=ct.point,this._state="pending",pt.on("mousemove",this._onMove),pt.on("touchmove",this._onMove),pt.once("mouseup",this._onUp),pt.once("touchend",this._onUp))}setDraggable(ct){this._draggable=!!ct;const pt=this._map;return pt&&(ct?(pt.on("mousedown",this._addDragHandler),pt.on("touchstart",this._addDragHandler)):(pt.off("mousedown",this._addDragHandler),pt.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(ct){return this._rotation=ct||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(ct){return this._rotationAlignment=ct||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(ct){return this._pitchAlignment=ct||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(ct){return this._occludedOpacity=ct||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const om={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pw=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function M_(xt=new at.P(0,0),ct="bottom"){if(typeof xt=="number"){const pt=Math.round(Math.sqrt(.5*Math.pow(xt,2)));switch(ct){case"top":return new at.P(0,xt);case"top-left":return new at.P(pt,pt);case"top-right":return new at.P(-pt,pt);case"bottom":return new at.P(0,-xt);case"bottom-left":return new at.P(pt,-pt);case"bottom-right":return new at.P(-pt,-pt);case"left":return new at.P(xt,0);case"right":return new at.P(-xt,0)}return new at.P(0,0)}return xt instanceof at.P||Array.isArray(xt)?at.P.convert(xt):at.P.convert(xt[ct]||[0,0])}class mw{constructor(ct){this.jumpTo(ct)}getValue(ct){if(ct<=this._startTime)return this._start;if(ct>=this._endTime)return this._end;const pt=at.bb((ct-this._startTime)/(this._endTime-this._startTime));return this._start*(1-pt)+this._end*pt}isEasing(ct){return ct>=this._startTime&&ct<=this._endTime}jumpTo(ct){this._startTime=-1/0,this._endTime=-1/0,this._start=ct,this._end=ct}easeTo(ct,pt,vt){this._start=this.getValue(pt),this._end=ct,this._startTime=pt,this._endTime=pt+vt}}const gw={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class yw{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}const xw={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0},Kx={showCompass:!0,showZoom:!0,visualizePitch:!1};class Yx{constructor(ct,pt,vt=!1){this._clickTolerance=10,this.element=pt,this.mouseRotate=new hy({clickTolerance:ct.dragRotate._mouseRotate._clickTolerance}),this.map=ct,vt&&(this.mousePitch=new m0({clickTolerance:ct.dragRotate._mousePitch._clickTolerance})),at.br(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),pt.addEventListener("mousedown",this.mousedown),pt.addEventListener("touchstart",this.touchstart,{passive:!1}),pt.addEventListener("touchmove",this.touchmove),pt.addEventListener("touchend",this.touchend),pt.addEventListener("touchcancel",this.reset)}down(ct,pt){this.mouseRotate.mousedown(ct,pt),this.mousePitch&&this.mousePitch.mousedown(ct,pt),Mt()}move(ct,pt){const vt=this.map,Tt=this.mouseRotate.mousemoveWindow(ct,pt),Pt=Tt&&Tt.bearingDelta;if(Pt&&vt.setBearing(vt.getBearing()+Pt),this.mousePitch){const Ot=this.mousePitch.mousemoveWindow(ct,pt),Ft=Ot&&Ot.pitchDelta;Ft&&vt.setPitch(vt.getPitch()+Ft)}}off(){const ct=this.element;ct.removeEventListener("mousedown",this.mousedown),ct.removeEventListener("touchstart",this.touchstart,{passive:!1}),ct.removeEventListener("touchmove",this.touchmove),ct.removeEventListener("touchend",this.touchend),ct.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){$t(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(ct){this.down(at.Q({},ct,{ctrlKey:!0,preventDefault:()=>ct.preventDefault()}),Ut(this.element,ct)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(ct){this.move(ct,Ut(this.element,ct))}mouseup(ct){this.mouseRotate.mouseupWindow(ct),this.mousePitch&&this.mousePitch.mouseupWindow(ct),this.offTemp()}touchstart(ct){ct.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Ht(this.element,ct.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>ct.preventDefault()},this._startPos))}touchmove(ct){ct.targetTouches.length!==1?this.reset():(this._lastPos=Ht(this.element,ct.targetTouches)[0],this.move({preventDefault:()=>ct.preventDefault()},this._lastPos))}touchend(ct){ct.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const O_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},am={maxWidth:100,unit:"metric"},j_={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"};return{version:at.dw,supported:gt,setRTLTextPlugin:at.dy,getRTLTextPluginStatus:at.dz,Map:class extends qx{constructor(xt){at.df.mark(at.dg.create);const ct=xt;if((xt=at.Q({},xw,xt)).minZoom!=null&&xt.maxZoom!=null&&xt.minZoom>xt.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(xt.minPitch!=null&&xt.maxPitch!=null&&xt.minPitch>xt.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(xt.minPitch!=null&&xt.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(xt.maxPitch!=null&&xt.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(xt.antialias&&at.dh(window)&&(xt.antialias=!1,at.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Lm(xt.minZoom,xt.maxZoom,xt.minPitch,xt.maxPitch,xt.renderWorldCopies),xt),this._repaint=!!xt.repaint,this._interactive=xt.interactive,this._minTileCacheSize=xt.minTileCacheSize,this._maxTileCacheSize=xt.maxTileCacheSize,this._failIfMajorPerformanceCaveat=xt.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=xt.preserveDrawingBuffer,this._antialias=xt.antialias,this._trackResize=xt.trackResize,this._bearingSnap=xt.bearingSnap,this._refreshExpiredTiles=xt.refreshExpiredTiles,this._fadeDuration=xt.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=xt.crossSourceCollisions,this._collectResourceTiming=xt.collectResourceTiming,this._language=this._parseLanguage(xt.language),this._worldview=xt.worldview,this._renderTaskQueue=new _0,this._domRenderTaskQueue=new _0,this._controls=[],this._markers=[],this._popups=[],this._mapId=at.di(),this._locale=at.Q({},gw,xt.locale),this._clickTolerance=xt.clickTolerance,this._cooperativeGestures=xt.cooperativeGestures,this._performanceMetricsCollection=xt.performanceMetricsCollection,this._tessellationStep=xt.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=xt.precompilePrograms,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new mw(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._requestManager=new at.dj(xt.transformRequest,xt.accessToken,xt.testMode),this._silenceAuthErrors=!!xt.testMode,this._contextCreateOptions=xt.contextCreateOptions?{...xt.contextCreateOptions}:{},typeof xt.container=="string"){const pt=document.getElementById(xt.container);if(!pt)throw new Error(`Container '${xt.container.toString()}' not found.`);this._container=pt}else{if(!(xt.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=xt.container}if(this._container.childNodes.length>0&&at.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),xt.maxBounds&&this.setMaxBounds(xt.maxBounds),at.br(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new yw),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new y0(this,xt),this._localFontFamily=xt.localFontFamily,this._localIdeographFontFamily=xt.localIdeographFontFamily,(xt.style||!xt.testMode)&&this.setStyle(xt.style||at.db.DEFAULT_STYLE,{config:xt.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),xt.projection&&this.setProjection(xt.projection),xt.hash&&(this._hash=new S_(typeof xt.hash=="string"&&xt.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){ct.center==null&&ct.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:xt.center,zoom:xt.zoom,bearing:xt.bearing,pitch:xt.pitch});const pt=xt.bounds;pt&&(this.resize(),this.fitBounds(pt,at.Q({},xt.fitBoundsOptions,{duration:0})))}this.resize(),xt.attributionControl&&this.addControl(new yy({customAttribution:xt.customAttribution})),this._logoControl=new v0,this.addControl(this._logoControl,xt.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",pt=>{this._update(pt.dataType==="style"),this.fire(new at.g(`${pt.dataType}data`,pt))}),this.on("dataloading",pt=>{this.fire(new at.g(`${pt.dataType}dataloading`,pt))})}_getMapId(){return this._mapId}addControl(xt,ct){if(ct===void 0&&(ct=xt.getDefaultPosition?xt.getDefaultPosition():"top-right"),!xt||!xt.onAdd)return this.fire(new at.f(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const pt=xt.onAdd(this);this._controls.push(xt);const vt=this._controlPositions[ct];return ct.indexOf("bottom")!==-1?vt.insertBefore(pt,vt.firstChild):vt.appendChild(pt),this}removeControl(xt){if(!xt||!xt.onRemove)return this.fire(new at.f(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ct=this._controls.indexOf(xt);return ct>-1&&this._controls.splice(ct,1),xt.onRemove(this),this}hasControl(xt){return this._controls.indexOf(xt)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(xt){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const ct=!this._moving;return ct&&this.fire(new at.g("movestart",xt)).fire(new at.g("move",xt)),this.fire(new at.g("resize",xt)),ct&&this.fire(new at.g("moveend",xt)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(xt){return this.transform.setMaxBounds(at.aj.convert(xt)),this._update()}setMinZoom(xt){if((xt=xt??-2)>=-2&&xt<=this.transform.maxZoom)return this.transform.minZoom=xt,this._update(),this.getZoom()<xt?this.setZoom(xt):this.fire(new at.g("zoomstart")).fire(new at.g("zoom")).fire(new at.g("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(xt){if((xt=xt??22)>=this.transform.minZoom)return this.transform.maxZoom=xt,this._update(),this.getZoom()>xt?this.setZoom(xt):this.fire(new at.g("zoomstart")).fire(new at.g("zoom")).fire(new at.g("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(xt){if((xt=xt??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(xt>=0&&xt<=this.transform.maxPitch)return this.transform.minPitch=xt,this._update(),this.getPitch()<xt?this.setPitch(xt):this.fire(new at.g("pitchstart")).fire(new at.g("pitch")).fire(new at.g("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(xt){if((xt=xt??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(xt>=this.transform.minPitch)return this.transform.maxPitch=xt,this._update(),this.getPitch()>xt?this.setPitch(xt):this.fire(new at.g("pitchstart")).fire(new at.g("pitch")).fire(new at.g("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(xt){return this.transform.renderWorldCopies=xt,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(xt){return xt==="auto"?navigator.language:Array.isArray(xt)?xt.length===0?void 0:xt.map(ct=>ct==="auto"?navigator.language:ct):xt}setLanguage(xt){const ct=this._parseLanguage(xt);if(!this.style||ct===this._language)return this;this._language=ct,this.style.reloadSources();for(const pt of this._controls)pt._setLanguage&&pt._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(xt){return this.style&&xt!==this._worldview?(this._worldview=xt,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(xt){return this._lazyInitEmptyStyle(),xt?typeof xt=="string"&&(xt={name:xt}):xt=null,this._useExplicitProjection=!!xt,this._prioritizeAndUpdateProjection(xt,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const xt=this.transform,ct=xt.projection.name;let pt;ct==="globe"&&xt.zoom>=at.aV?(xt.setMercatorFromTransition(),pt=!0):ct==="mercator"&&xt.zoom<at.aV&&(xt.setProjection({name:"globe"}),pt=!0),pt&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(xt,ct){return this._updateProjection(xt||ct||{name:"mercator"})}_updateProjection(xt){let ct;return ct=xt.name==="globe"&&this.transform.zoom>=at.aV?this.transform.setMercatorFromTransition():this.transform.setProjection(xt),this.style.applyProjectionUpdate(),ct&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(xt){return this.transform.locationPoint3D(at.aJ.convert(xt))}unproject(xt){return this.transform.pointLocation3D(at.P.convert(xt))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(xt,ct,pt){if(xt==="mouseenter"||xt==="mouseover"){let vt=!1;const Tt=Ot=>{const Ft=ct.filter(Gt=>this.getLayer(Gt)),Vt=Ft.length?this.queryRenderedFeatures(Ot.point,{layers:Ft}):[];Vt.length?vt||(vt=!0,pt.call(this,new Gl(xt,this,Ot.originalEvent,{features:Vt}))):vt=!1},Pt=()=>{vt=!1};return{layers:new Set(ct),listener:pt,delegates:{mousemove:Tt,mouseout:Pt}}}if(xt==="mouseleave"||xt==="mouseout"){let vt=!1;const Tt=Ot=>{const Ft=ct.filter(Vt=>this.getLayer(Vt));(Ft.length?this.queryRenderedFeatures(Ot.point,{layers:Ft}):[]).length?vt=!0:vt&&(vt=!1,pt.call(this,new Gl(xt,this,Ot.originalEvent)))},Pt=Ot=>{vt&&(vt=!1,pt.call(this,new Gl(xt,this,Ot.originalEvent)))};return{layers:new Set(ct),listener:pt,delegates:{mousemove:Tt,mouseout:Pt}}}{const vt=Tt=>{const Pt=ct.filter(Ft=>this.getLayer(Ft)),Ot=Pt.length?this.queryRenderedFeatures(Tt.point,{layers:Pt}):[];Ot.length&&(Tt.features=Ot,pt.call(this,Tt),delete Tt.features)};return{layers:new Set(ct),listener:pt,delegates:{[xt]:vt}}}}on(xt,ct,pt){if(typeof ct=="function"||pt===void 0)return super.on(xt,ct);if(Array.isArray(ct)||(ct=[ct]),ct){for(const Tt of ct)if(!this._isValidId(Tt))return this}const vt=this._createDelegatedListener(xt,ct,pt);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[xt]=this._delegatedListeners[xt]||[],this._delegatedListeners[xt].push(vt);for(const Tt in vt.delegates)this.on(Tt,vt.delegates[Tt]);return this}once(xt,ct,pt){if(typeof ct=="function"||pt===void 0)return super.once(xt,ct);if(Array.isArray(ct)||(ct=[ct]),ct){for(const Tt of ct)if(!this._isValidId(Tt))return this}const vt=this._createDelegatedListener(xt,ct,pt);for(const Tt in vt.delegates)this.once(Tt,vt.delegates[Tt]);return this}off(xt,ct,pt){if(typeof ct=="function"||pt===void 0)return super.off(xt,ct);const vt=new Set(Array.isArray(ct)?ct:[ct]);for(const Ot of vt)if(!this._isValidId(Ot))return this;const Tt=(Ot,Ft)=>{if(Ot.size!==Ft.size)return!1;for(const Vt of Ot)if(!Ft.has(Vt))return!1;return!0},Pt=this._delegatedListeners?this._delegatedListeners[xt]:void 0;return Pt&&(Ot=>{for(let Ft=0;Ft<Ot.length;Ft++){const Vt=Ot[Ft];if(Vt.listener===pt&&Tt(Vt.layers,vt)){for(const Gt in Vt.delegates)this.off(Gt,Vt.delegates[Gt]);return Ot.splice(Ft,1),this}}})(Pt),this}queryRenderedFeatures(xt,ct){if(!this.style)return[];if(ct!==void 0||xt===void 0||xt instanceof at.P||Array.isArray(xt)||(ct=xt,xt=void 0),xt=xt||[[0,0],[this.transform.width,this.transform.height]],(ct=ct||{}).layers&&Array.isArray(ct.layers)){for(const pt of ct.layers)if(!this._isValidId(pt))return[]}return this.style.queryRenderedFeatures(xt,ct,this.transform)}querySourceFeatures(xt,ct){return this._isValidId(xt)?this.style.querySourceFeatures(xt,ct):[]}isPointOnSurface(xt){const{name:ct}=this.transform.projection;return ct!=="globe"&&ct!=="mercator"&&at.w(`${ct} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(at.P.convert(xt))}setStyle(xt,ct){return ct=at.Q({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},ct),this.style&&xt&&ct.diff!==!1&&ct.localFontFamily===this._localFontFamily&&ct.localIdeographFontFamily===this._localIdeographFontFamily&&!ct.config?(this.style._diffStyle(xt,(pt,vt)=>{pt?(at.w(`Unable to perform style diff: ${String(pt.message||pt.error||pt)}. Rebuilding the style from scratch.`),this._updateStyle(xt,ct)):vt&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=ct.localIdeographFontFamily,this._localFontFamily=ct.localFontFamily,this._updateStyle(xt,ct))}_getUIString(xt){const ct=this._locale[xt];if(ct==null)throw new Error(`Missing UI string '${xt}'`);return ct}_updateStyle(xt,ct){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),xt){const pt=at.Q({},ct);ct&&ct.config&&(pt.initialConfig=ct.config,delete pt.config),this.style=new Ul(this,pt).load(xt),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ul(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(at.w("There is no style added to the map."),!1)}_isValidId(xt){return xt==null?(this.fire(new at.f(new Error("IDs can't be empty."))),!1):!at.cY(xt)||(this.fire(new at.f(new Error(`IDs can't contain special symbols: "${xt}".`))),!1)}addSource(xt,ct){return this._isValidId(xt)?(this._lazyInitEmptyStyle(),this.style.addSource(xt,ct),this._update(!0)):this}isSourceLoaded(xt){return!!this._isValidId(xt)&&!!this.style&&this.style._isSourceCacheLoaded(xt)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(xt,ct,pt){this._lazyInitEmptyStyle(),this.style.addSourceType(xt,ct,pt)}removeSource(xt){return this._isValidId(xt)?(this.style.removeSource(xt),this._updateTerrain(),this._update(!0)):this}getSource(xt){return this._isValidId(xt)?this.style.getOwnSource(xt):null}addImage(xt,ct,{pixelRatio:pt=1,sdf:vt=!1,stretchX:Tt,stretchY:Pt,content:Ot}={}){if(this._lazyInitEmptyStyle(),ct instanceof HTMLImageElement||ImageBitmap&&ct instanceof ImageBitmap){const{width:Ft,height:Vt,data:Gt}=at.e.getImageData(ct);this.style.addImage(xt,{data:new at.j({width:Ft,height:Vt},Gt),pixelRatio:pt,stretchX:Tt,stretchY:Pt,content:Ot,sdf:vt,version:0})}else if(ct.width===void 0||ct.height===void 0)this.fire(new at.f(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:Ft,height:Vt}=ct,Gt=ct;this.style.addImage(xt,{data:new at.j({width:Ft,height:Vt},new Uint8Array(Gt.data)),pixelRatio:pt,stretchX:Tt,stretchY:Pt,content:Ot,sdf:vt,version:0,userImage:Gt}),Gt.onAdd&&Gt.onAdd(this,xt)}}updateImage(xt,ct){this._lazyInitEmptyStyle();const pt=this.style.getImage(xt);if(!pt)return void this.fire(new at.f(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const vt=ct instanceof HTMLImageElement||ImageBitmap&&ct instanceof ImageBitmap?at.e.getImageData(ct):ct,{width:Tt,height:Pt,data:Ot}=vt;if(Tt===void 0||Pt===void 0)return void this.fire(new at.f(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(Tt!==pt.data.width||Pt!==pt.data.height)return void this.fire(new at.f(new Error(`The width and height of the updated image (${Tt}, ${Pt})
                must be that same as the previous version of the image
                (${pt.data.width}, ${pt.data.height})`)));const Ft=!(ct instanceof HTMLImageElement||ImageBitmap&&ct instanceof ImageBitmap);pt.data.replace(Ot,Ft),this.style.updateImage(xt,pt)}hasImage(xt){return xt?!!this.style&&!!this.style.getImage(xt):(this.fire(new at.f(new Error("Missing required image id"))),!1)}removeImage(xt){this.style.removeImage(xt)}loadImage(xt,ct){at.i(this._requestManager.transformRequest(xt,at.R.Image),(pt,vt)=>{ct(pt,vt instanceof HTMLImageElement?at.e.getImageData(vt):vt)})}listImages(){return this.style.listImages()}addModel(xt,ct){this._lazyInitEmptyStyle(),this.style.addModel(xt,ct)}hasModel(xt){return xt?this.style.hasModel(xt):(this.fire(new at.f(new Error("Missing required model id"))),!1)}removeModel(xt){this.style.removeModel(xt)}listModels(){return this.style.listModels()}addLayer(xt,ct){return this._isValidId(xt.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(xt,ct),this._update(!0)):this}getSlot(xt){const ct=this.getLayer(xt);return ct&&ct.slot||null}setSlot(xt,ct){return this.style.setSlot(xt,ct),this.style.mergeLayers(),this._update(!0)}addImport(xt,ct){return this.style.addImport(xt,ct),this}updateImport(xt,ct){return typeof ct!="string"&&ct.id!==xt?(this.removeImport(xt),this.addImport(ct)):(this.style.updateImport(xt,ct),this._update(!0))}removeImport(xt){return this.style.removeImport(xt),this}moveImport(xt,ct){return this.style.moveImport(xt,ct),this._update(!0)}moveLayer(xt,ct){return this._isValidId(xt)?(this.style.moveLayer(xt,ct),this._update(!0)):this}removeLayer(xt){return this._isValidId(xt)?(this.style.removeLayer(xt),this._update(!0)):this}getLayer(xt){if(!this._isValidId(xt))return null;const ct=this.style.getOwnLayer(xt);return ct?ct.type==="custom"?ct.implementation:ct.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(xt,ct,pt){return this._isValidId(xt)?(this.style.setLayerZoomRange(xt,ct,pt),this._update(!0)):this}setFilter(xt,ct,pt={}){return this._isValidId(xt)?(this.style.setFilter(xt,ct,pt),this._update(!0)):this}getFilter(xt){return this._isValidId(xt)?this.style.getFilter(xt):null}setPaintProperty(xt,ct,pt,vt={}){return this._isValidId(xt)?(this.style.setPaintProperty(xt,ct,pt,vt),this._update(!0)):this}getPaintProperty(xt,ct){return this._isValidId(xt)?this.style.getPaintProperty(xt,ct):null}setLayoutProperty(xt,ct,pt,vt={}){return this._isValidId(xt)?(this.style.setLayoutProperty(xt,ct,pt,vt),this._update(!0)):this}getLayoutProperty(xt,ct){return this._isValidId(xt)?this.style.getLayoutProperty(xt,ct):null}getSchema(xt){return this.style.getSchema(xt)}setSchema(xt,ct){return this.style.setSchema(xt,ct),this._update(!0)}getConfig(xt){return this.style.getConfig(xt)}setConfig(xt,ct){return this.style.setConfig(xt,ct),this._update(!0)}getConfigProperty(xt,ct){return this.style.getConfigProperty(xt,ct)}setConfigProperty(xt,ct,pt){return this.style.setConfigProperty(xt,ct,pt),this._update(!0)}setLights(xt){if(this._lazyInitEmptyStyle(),xt&&xt.length===1&&xt[0].type==="flat"){const ct=xt[0];ct.properties?this.style.setFlatLight(ct.properties,ct.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(xt),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const xt=this.style.getLights()||[];return xt.length===0&&xt.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),xt}setLight(xt,ct={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:xt}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(xt){return this._lazyInitEmptyStyle(),!xt&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(xt),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(xt){return this._lazyInitEmptyStyle(),this.style.setFog(xt),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setColorTheme(xt){return this._lazyInitEmptyStyle(),this.style.setColorTheme(xt),this._update(!0)}setCamera(xt){return this.style.setCamera(xt),this._triggerCameraUpdate(xt)}_triggerCameraUpdate(xt){return this._update(this.transform.setOrthographicProjectionAtLowPitch(xt["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(xt){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(at.aJ.convert(xt),this.transform):0}setFeatureState(xt,ct){return this._isValidId(xt.source)?(this.style.setFeatureState(xt,ct),this._update()):this}removeFeatureState(xt,ct){return this._isValidId(xt.source)?(this.style.removeFeatureState(xt,ct),this._update()):this}getFeatureState(xt){return this._isValidId(xt.source)?this.style.getFeatureState(xt):null}_updateContainerDimensions(){if(!this._container)return;const xt=this._container.getBoundingClientRect().width||400,ct=this._container.getBoundingClientRect().height||300;let pt,vt,Tt,Pt=this._container;for(;Pt&&(!vt||!Tt);){const Ot=window.getComputedStyle(Pt).transform;Ot&&Ot!=="none"&&(pt=Ot.match(/matrix.*\((.+)\)/)[1].split(", "),pt[0]&&pt[0]!=="0"&&pt[0]!=="1"&&(vt=pt[0]),pt[3]&&pt[3]!=="0"&&pt[3]!=="1"&&(Tt=pt[3])),Pt=Pt.parentElement}this._containerWidth=vt?Math.abs(xt/vt):xt,this._containerHeight=Tt?Math.abs(ct/Tt):ct}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&at.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const xt=this._container;xt.classList.add("mapboxgl-map"),(this._missingCSSCanary=St("div","mapboxgl-canary",xt)).style.visibility="hidden",this._detectMissingCSS();const ct=this._canvasContainer=St("div","mapboxgl-canvas-container",xt);this._canvas=St("canvas","mapboxgl-canvas",ct),this._interactive&&(ct.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const pt=this._controlContainer=St("div","mapboxgl-control-container",xt),vt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(Tt=>{vt[Tt]=St("div",`mapboxgl-ctrl-${Tt}`,pt)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(xt,ct){const pt=at.e.devicePixelRatio||1;this._canvas.width=pt*Math.ceil(xt),this._canvas.height=pt*Math.ceil(ct),this._canvas.style.width=`${xt}px`,this._canvas.style.height=`${ct}px`}_addMarker(xt){this._markers.push(xt)}_removeMarker(xt){const ct=this._markers.indexOf(xt);ct!==-1&&this._markers.splice(ct,1)}_addPopup(xt){this._popups.push(xt)}_removePopup(xt){const ct=this._popups.indexOf(xt);ct!==-1&&this._popups.splice(ct,1)}_setupPainter(){const xt=at.Q({},gt.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),ct=this._canvas.getContext("webgl2",xt);ct?(at.dk(ct,!0),this.painter=new Mx(ct,this._contextCreateOptions,this.transform,this._tp),this.on("data",pt=>{pt.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),at.dl.testSupport(ct)):this.fire(new at.f(new Error("Failed to initialize WebGL")))}_contextLost(xt){xt.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new at.g("webglcontextlost",{originalEvent:xt}))}_contextRestored(xt){this._setupPainter(),this.resize(),this._update(),this.fire(new at.g("webglcontextrestored",{originalEvent:xt}))}_onMapScroll(xt){if(xt.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(xt){return this.style?(this._styleDirty=this._styleDirty||xt,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(xt){return this._update(),this._renderTaskQueue.add(xt)}_cancelRenderFrame(xt){this._renderTaskQueue.remove(xt)}_requestDomTask(xt){!this.loaded()||this.loaded()&&!this.isMoving()?xt():this._domRenderTaskQueue.add(xt)}_render(xt){let ct;this.fire(new at.g("renderstart")),++this._frameId;const pt=this.painter.context.extTimerQuery,vt=at.e.now(),Tt=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(ct=Tt.createQuery(),Tt.beginQuery(pt.TIME_ELAPSED_EXT,ct)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(xt),this._domRenderTaskQueue.run(xt),this._removed)return;this._updateProjectionTransition();const Pt=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const Gt=this.transform.zoom,Zt=this.transform.pitch,Yt=at.e.now(),er=new at.Y(Gt,{now:Yt,fadeDuration:Pt,pitch:Zt,transition:this.style.transition});this.style.update(er)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let Ot=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),Ot=this._updateAverageElevation(vt),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):Ot=this._updateAverageElevation(vt);const Ft=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,Pt,this._crossSourceCollisions,this.painter.replacementSource);if(Ft&&(this._placementDirty=Ft.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:Pt,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new at.g("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,at.df.mark(at.dg.load),this.fire(new at.g("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),ct){const Gt=at.e.now()-vt;Tt.endQuery(pt.TIME_ELAPSED_EXT),setTimeout(()=>{const Zt=Tt.getQueryParameter(ct,Tt.QUERY_RESULT)/1e6;Tt.deleteQuery(ct),this.fire(new at.g("gpu-timing-frame",{cpuTime:Gt,gpuTime:Zt}))},50)}if(this.listens("gpu-timing-layer")){const Gt=this.painter.collectGpuTimers();setTimeout(()=>{const Zt=this.painter.queryGpuTimers(Gt);this.fire(new at.g("gpu-timing-layer",{layerTimes:Zt}))},50)}if(this.listens("gpu-timing-deferred-render")){const Gt=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const Zt=this.painter.queryGpuTimeDeferredRender(Gt);this.fire(new at.g("gpu-timing-deferred-render",{gpuTime:Zt}))},50)}const Vt=this._sourcesDirty||this._styleDirty||this._placementDirty||Ot;if(Vt||this._repaint)this.triggerRepaint();else{const Gt=this.idle();if(Gt&&(Ot=this._updateAverageElevation(vt,!0)),Ot)this.triggerRepaint();else if(this._triggerFrame(!1),Gt&&(this.fire(new at.g("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const Zt=this._calculateSpeedIndex();this.fire(new at.g("speedindexcompleted",{speedIndex:Zt})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||Vt||(this._fullyLoaded=!0,at.df.mark(at.dg.fullLoad),this._performanceMetricsCollection&&at.dm(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(xt){for(const ct of this._markers)xt&&!this.getRenderWorldCopies()&&(ct._lngLat=ct._lngLat.wrap()),ct._update();for(const ct of this._popups)!xt||this.getRenderWorldCopies()||ct._trackPointer||(ct._lngLat=ct._lngLat.wrap()),ct._update()}_updateAverageElevation(xt,ct=!1){const pt=Tt=>(this.transform.averageElevation=Tt,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&pt(0);const vt=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(vt||(ct||xt-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(xt)){const Tt=this.transform.averageElevation;let Pt=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(Pt)?Pt=0:this._averageElevationLastSampledAt=xt;const Ot=Math.abs(Tt-Pt);if(Ot>1){if(this._isInitialLoad||vt)return this._averageElevation.jumpTo(Pt),pt(Pt);this._averageElevation.easeTo(Pt,xt,300)}else if(Ot>1e-4)return this._averageElevation.jumpTo(Pt),pt(Pt)}return!!this._averageElevation.isEasing(xt)&&pt(this._averageElevation.getValue(xt))}_authenticate(){at.dn(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,xt=>{if(xt&&(xt.message===at.dp||xt.status===401)){const ct=this.painter.context.gl;at.dk(ct,!1),this._logoControl instanceof v0&&this._logoControl._updateLogo(),ct&&ct.clear(ct.DEPTH_BUFFER_BIT|ct.COLOR_BUFFER_BIT|ct.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new at.f(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),at.dq(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&at.dr(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const xt=this._isDragging();this.painter.updateTerrain(this.style,xt)}_calculateSpeedIndex(){const xt=this.painter.canvasCopy(),ct=this.painter.getCanvasCopiesAndTimestamps();ct.timeStamps.push(performance.now());const pt=this.painter.context.gl,vt=pt.createFramebuffer();function Tt(Pt){pt.framebufferTexture2D(pt.FRAMEBUFFER,pt.COLOR_ATTACHMENT0,pt.TEXTURE_2D,Pt,0);const Ot=new Uint8Array(pt.drawingBufferWidth*pt.drawingBufferHeight*4);return pt.readPixels(0,0,pt.drawingBufferWidth,pt.drawingBufferHeight,pt.RGBA,pt.UNSIGNED_BYTE,Ot),Ot}return pt.bindFramebuffer(pt.FRAMEBUFFER,vt),this._canvasPixelComparison(Tt(xt),ct.canvasCopies.map(Tt),ct.timeStamps)}_canvasPixelComparison(xt,ct,pt){let vt=pt[1]-pt[0];const Tt=xt.length/4;for(let Pt=0;Pt<ct.length;Pt++){const Ot=ct[Pt];let Ft=0;for(let Vt=0;Vt<Ot.length;Vt+=4)Ot[Vt]===xt[Vt]&&Ot[Vt+1]===xt[Vt+1]&&Ot[Vt+2]===xt[Vt+2]&&Ot[Vt+3]===xt[Vt+3]&&(Ft+=1);vt+=(pt[Pt+2]-pt[Pt+1])*(1-Ft/Tt)}return vt}remove(){this._hash&&this._hash.remove();for(const ct of this._controls)ct.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const xt=this.painter.context.gl.getExtension("WEBGL_lose_context");xt&&xt.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),at.ds(this.painter.context.gl),at.dt.remove(),at.du.remove(),this._removed=!0,this.fire(new at.g("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(xt){this._renderNextFrame=this._renderNextFrame||xt,this.style&&!this._frame&&(this._frame=at.e.frame(ct=>{const pt=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,pt&&this._render(ct)}))}_preloadTiles(xt){const ct=this.style?this.style.getSourceCaches():[];return at.dv(ct,(pt,vt)=>pt._preloadTiles(xt,vt),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(xt){this._trackResize&&this.resize({originalEvent:xt})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(xt){this._showTileBoundaries!==xt&&(this._showTileBoundaries=xt,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(xt){this._showParseStatus!==xt&&(this._showParseStatus=xt,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(xt){this._showTerrainWireframe!==xt&&(this._showTerrainWireframe=xt,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(xt){this._showLayers2DWireframe!==xt&&(this._showLayers2DWireframe=xt,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(xt){this._showLayers3DWireframe!==xt&&(this._showLayers3DWireframe=xt,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(xt){this._speedIndexTiming!==xt&&(this._speedIndexTiming=xt,this._update())}get showPadding(){return!!this._showPadding}set showPadding(xt){this._showPadding!==xt&&(this._showPadding=xt,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(xt){this._showCollisionBoxes!==xt&&(this._showCollisionBoxes=xt,this._tp.refreshUI(),xt?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(xt){this._showOverdrawInspector!==xt&&(this._showOverdrawInspector=xt,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(xt){this._repaint!==xt&&(this._repaint=xt,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(xt){this._vertices=xt,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(xt){this._showTileAABBs!==xt&&(this._showTileAABBs=xt,this._tp.refreshUI(),xt&&this._update())}_setCacheLimits(xt,ct){at.dx(xt,ct)}get version(){return at.dw}},NavigationControl:class{constructor(xt={}){this.options=at.Q({},Kx,xt),this._container=St("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",ct=>ct.preventDefault()),this.options.showZoom&&(at.br(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",ct=>{this._map&&this._map.zoomIn({},{originalEvent:ct})}),St("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",ct=>{this._map&&this._map.zoomOut({},{originalEvent:ct})}),St("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(at.br(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",ct=>{const pt=this._map;pt&&(this.options.visualizePitch?pt.resetNorthPitch({},{originalEvent:ct}):pt.resetNorth({},{originalEvent:ct}))}),this._compassIcon=St("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const xt=this._map;if(!xt)return;const ct=xt.getZoom(),pt=ct===xt.getMaxZoom(),vt=ct===xt.getMinZoom();this._zoomInButton.disabled=pt,this._zoomOutButton.disabled=vt,this._zoomInButton.setAttribute("aria-disabled",pt.toString()),this._zoomOutButton.setAttribute("aria-disabled",vt.toString())}_rotateCompassArrow(){const xt=this._map;if(!xt)return;const ct=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(xt.transform.pitch*(Math.PI/180)),.5)}) rotateX(${xt.transform.pitch}deg) rotateZ(${xt.transform.angle*(180/Math.PI)}deg)`:`rotate(${xt.transform.angle*(180/Math.PI)}deg)`;xt._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=ct)})}onAdd(xt){return this._map=xt,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),xt.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&xt.on("pitch",this._rotateCompassArrow),xt.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Yx(xt,this._compass,this.options.visualizePitch)),this._container}onRemove(){const xt=this._map;xt&&(this._container.remove(),this.options.showZoom&&xt.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&xt.off("pitch",this._rotateCompassArrow),xt.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(xt,ct){const pt=St("button",xt,this._container);return pt.type="button",pt.addEventListener("click",ct),pt}_setButtonTitle(xt,ct){if(!this._map)return;const pt=this._map._getUIString(`NavigationControl.${ct}`);xt.setAttribute("aria-label",pt),xt.firstElementChild&&xt.firstElementChild.setAttribute("title",pt)}},GeolocateControl:class extends at.E{constructor(xt={}){super();const ct=navigator.geolocation;this.options=at.Q({geolocation:ct},O_,xt),at.br(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=E_(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(xt){return this._map=xt,this._container=St("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(xt){const ct=(pt=!!this.options.geolocation)=>{this._supportsGeolocation=pt,xt(pt)};this._supportsGeolocation!==void 0?xt(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(pt=>ct(pt.state!=="denied")).catch(()=>ct()):ct()}_isOutOfMapMaxBounds(xt){const ct=this._map.getMaxBounds(),pt=xt.coords;return!!ct&&(pt.longitude<ct.getWest()||pt.longitude>ct.getEast()||pt.latitude<ct.getSouth()||pt.latitude>ct.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(xt){if(this._map){if(this._isOutOfMapMaxBounds(xt))return this._setErrorState(),this.fire(new at.g("outofmaxbounds",xt)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=xt,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(xt),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(xt),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new at.g("geolocate",xt)),this._finish()}}_updateCamera(xt){const ct=new at.aJ(xt.coords.longitude,xt.coords.latitude),pt=xt.coords.accuracy,vt=this._map.getBearing(),Tt=at.Q({bearing:vt},this.options.fitBoundsOptions);this._map.fitBounds(ct.toBounds(pt),Tt,{geolocateSource:!0})}_updateMarker(xt){if(xt){const ct=new at.aJ(xt.coords.longitude,xt.coords.latitude);this._accuracyCircleMarker.setLngLat(ct).addTo(this._map),this._userLocationDotMarker.setLngLat(ct).addTo(this._map),this._accuracy=xt.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const xt=this._map.transform,ct=at.ay(1,xt._center.lat)*xt.worldSize,pt=Math.ceil(2*this._accuracy*ct);this._circleElement.style.width=`${pt}px`,this._circleElement.style.height=`${pt}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(xt){if(this._map){if(this.options.trackUserLocation)if(xt.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const ct=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",ct),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ct),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(xt.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new at.g("error",xt)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(xt){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",ct=>ct.preventDefault()),this._geolocateButton=St("button","mapboxgl-ctrl-geolocate",this._container),St("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",xt===!1){at.w("Geolocation support is not available so the GeolocateControl will be disabled.");const ct=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",ct),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ct)}else{const ct=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",ct),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",ct)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=St("div","mapboxgl-user-location"),this._dotElement.appendChild(St("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(St("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new w0({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=St("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new w0({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",ct=>{ct.geolocateSource||this._watchState!=="ACTIVE_LOCK"||ct.originalEvent&&ct.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new at.g("trackuserlocationend")))})}}_onDeviceOrientation(xt){this._userLocationDotMarker&&(xt.webkitCompassHeading?this._heading=xt.webkitCompassHeading:xt.absolute===!0&&(this._heading=-1*xt.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return at.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new at.g("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new at.g("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new at.g("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let xt;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(xt={maximumAge:6e5,timeout:0},this._noTimeout=!0):(xt=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,xt),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const xt=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(ct=>{ct==="granted"&&xt()}).catch(console.error):xt()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:yy,ScaleControl:class{constructor(xt={}){this.options=at.Q({},am,xt),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),at.br(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const xt=this.options.maxWidth||100,ct=this._map,pt=ct._containerHeight/2,vt=ct._containerWidth/2-xt/2,Tt=ct.unproject([vt,pt]),Pt=ct.unproject([vt+xt,pt]),Ot=Tt.distanceTo(Pt);if(this.options.unit==="imperial"){const Ft=3.2808*Ot;Ft>5280?this._setScale(xt,Ft/5280,"mile"):this._setScale(xt,Ft,"foot")}else this.options.unit==="nautical"?this._setScale(xt,Ot/1852,"nautical-mile"):Ot>=1e3?this._setScale(xt,Ot/1e3,"kilometer"):this._setScale(xt,Ot,"meter")}_setScale(xt,ct,pt){this._map._requestDomTask(()=>{const vt=function(Pt){const Ot=Math.pow(10,`${Math.floor(Pt)}`.length-1);let Ft=Pt/Ot;return Ft=Ft>=10?10:Ft>=5?5:Ft>=3?3:Ft>=2?2:Ft>=1?1:function(Vt){const Gt=Math.pow(10,Math.ceil(-Math.log(Vt)/Math.LN10));return Math.round(Vt*Gt)/Gt}(Ft),Ot*Ft}(ct),Tt=vt/ct;this._container.innerHTML=this._isNumberFormatSupported&&pt!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:pt}).format(vt):`${vt}&nbsp;${j_[pt]}`,this._container.style.width=xt*Tt+"px"})}onAdd(xt){return this._map=xt,this._language=xt.getLanguage(),this._container=St("div","mapboxgl-ctrl mapboxgl-ctrl-scale",xt.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(xt){this._language=xt,this._update()}setUnit(xt){this.options.unit=xt,this._update()}},FullscreenControl:class{constructor(xt={}){this._fullscreen=!1,xt&&xt.container&&(xt.container instanceof HTMLElement?this._container=xt.container:at.w("Full screen control 'container' must be a DOM element.")),at.br(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(xt){return this._map=xt,this._container||(this._container=this._map.getContainer()),this._controlContainer=St("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",at.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const xt=this._fullscreenButton=St("button","mapboxgl-ctrl-fullscreen",this._controlContainer);St("span","mapboxgl-ctrl-icon",xt).setAttribute("aria-hidden","true"),xt.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const xt=this._getTitle();this._fullscreenButton.setAttribute("aria-label",xt),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",xt)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends at.E{constructor(xt){super(),this.options=at.Q(Object.create(om),xt),at.br(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(xt&&xt.className?xt.className.trim().split(/\s+/):[])}addTo(xt){return this._map&&this.remove(),this._map=xt,this.options.closeOnClick&&xt.on("preclick",this._onClose),this.options.closeOnMove&&xt.on("move",this._onClose),xt.on("remove",this.remove),this._update(),xt._addPopup(this),this._focusFirstElement(),this._trackPointer?(xt.on("mousemove",this._onMouseEvent),xt.on("mouseup",this._onMouseEvent),xt._canvasContainer.classList.add("mapboxgl-track-pointer")):xt.on("move",this._update),this.fire(new at.g("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const xt=this._map;return xt&&(xt.off("move",this._update),xt.off("move",this._onClose),xt.off("preclick",this._onClose),xt.off("click",this._onClose),xt.off("remove",this.remove),xt.off("mousemove",this._onMouseEvent),xt.off("mouseup",this._onMouseEvent),xt.off("drag",this._onMouseEvent),xt._canvasContainer&&xt._canvasContainer.classList.remove("mapboxgl-track-pointer"),xt._removePopup(this),this._map=void 0),this.fire(new at.g("close")),this}getLngLat(){return this._lngLat}setLngLat(xt){this._lngLat=at.aJ.convert(xt),this._pos=null,this._trackPointer=!1,this._update();const ct=this._map;return ct&&(ct.on("move",this._update),ct.off("mousemove",this._onMouseEvent),ct._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const xt=this._map;return xt&&(xt.off("move",this._update),xt.on("mousemove",this._onMouseEvent),xt.on("drag",this._onMouseEvent),xt._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(xt){return this.setDOMContent(document.createTextNode(xt))}setHTML(xt){const ct=document.createDocumentFragment(),pt=document.createElement("body");let vt;for(pt.innerHTML=xt;vt=pt.firstChild,vt;)ct.appendChild(vt);return this.setDOMContent(ct)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(xt){return this.options.maxWidth=xt,this._update(),this}setDOMContent(xt){let ct=this._content;if(ct)for(;ct.hasChildNodes();)ct.firstChild&&ct.removeChild(ct.firstChild);else ct=this._content=St("div","mapboxgl-popup-content",this._container||void 0);if(ct.appendChild(xt),this.options.closeButton){const pt=this._closeButton=St("button","mapboxgl-popup-close-button",ct);pt.type="button",pt.setAttribute("aria-label","Close popup"),pt.setAttribute("aria-hidden","true"),pt.innerHTML="&#215;",pt.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(xt){return this._classList.add(xt),this._updateClassList(),this}removeClassName(xt){return this._classList.delete(xt),this._updateClassList(),this}setOffset(xt){return this.options.offset=xt,this._update(),this}toggleClassName(xt){let ct;return this._classList.delete(xt)?ct=!1:(this._classList.add(xt),ct=!0),this._updateClassList(),ct}_onMouseEvent(xt){this._update(xt.point)}_getAnchor(xt){if(this.options.anchor)return this.options.anchor;const ct=this._map,pt=this._container,vt=this._pos;if(!ct||!pt||!vt)return"bottom";const Tt=pt.offsetWidth,Pt=pt.offsetHeight,Ot=vt.x<Tt/2,Ft=vt.x>ct.transform.width-Tt/2;if(vt.y+xt<Pt)return Ot?"top-left":Ft?"top-right":"top";if(vt.y>ct.transform.height-Pt){if(Ot)return"bottom-left";if(Ft)return"bottom-right"}return Ot?"left":Ft?"right":"bottom"}_updateClassList(){const xt=this._container;if(!xt)return;const ct=[...this._classList];ct.push("mapboxgl-popup"),this._anchor&&ct.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&ct.push("mapboxgl-popup-track-pointer"),xt.className=ct.join(" ")}_update(xt){const ct=this._map,pt=this._content;if(!ct||!this._lngLat&&!this._trackPointer||!pt)return;let vt=this._container;if(vt||(vt=this._container=St("div","mapboxgl-popup",ct.getContainer()),this._tip=St("div","mapboxgl-popup-tip",vt),vt.appendChild(pt)),this.options.maxWidth&&vt.style.maxWidth!==this.options.maxWidth&&(vt.style.maxWidth=this.options.maxWidth),ct.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xy(this._lngLat,this._pos,ct.transform)),!this._trackPointer||xt){const Tt=this._pos=this._trackPointer&&xt instanceof at.P?xt:ct.project(this._lngLat),Pt=M_(this.options.offset),Ot=this._anchor=this._getAnchor(Pt.y),Ft=M_(this.options.offset,Ot),Vt=Tt.add(Ft).round();ct._requestDomTask(()=>{this._container&&Ot&&(this._container.style.transform=`${b0[Ot]} translate(${Vt.x}px,${Vt.y}px)`)})}if(!this._marker&&ct._showingGlobe()){const Tt=at.dc(ct.transform,this._lngLat)?0:1;this._setOpacity(Tt)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const xt=this._container.querySelector(pw);xt&&xt.focus()}_onClose(){this.remove()}_setOpacity(xt){this._container&&(this._container.style.opacity=`${xt}`),this._content&&(this._content.style.pointerEvents=xt?"auto":"none")}},Marker:w0,Style:Ul,LngLat:at.aJ,LngLatBounds:at.aj,Point:at.P,MercatorCoordinate:at._,FreeCameraOptions:Hv,Evented:at.E,config:at.db,prewarm:at.dA,clearPrewarmedResources:at.dB,get accessToken(){return at.db.ACCESS_TOKEN},set accessToken(xt){at.db.ACCESS_TOKEN=xt},get baseApiUrl(){return at.db.API_URL},set baseApiUrl(xt){at.db.API_URL=xt},get workerCount(){return at.dC.workerCount},set workerCount(xt){at.dC.workerCount=xt},get maxParallelImageRequests(){return at.db.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(xt){at.db.MAX_PARALLEL_IMAGE_REQUESTS=xt},clearStorage(xt){at.dD(xt)},get workerUrl(){return at.dE.workerUrl},set workerUrl(xt){at.dE.workerUrl=xt},get workerClass(){return at.dE.workerClass},set workerClass(xt){at.dE.workerClass=xt},get workerParams(){return at.dE.workerParams},set workerParams(xt){at.dE.workerParams=xt},get dracoUrl(){return at.dF()},set dracoUrl(xt){at.dG(xt)},get meshoptUrl(){return at.dH()},set meshoptUrl(xt){at.dI(xt)},setNow:at.e.setNow,restoreNow:at.e.restoreNow}});var ht=st;return ht})})(mapboxGl$2);var mapboxGlExports=mapboxGl$2.exports;const mapboxGl=getDefaultExportFromCjs(mapboxGlExports),mapboxGl$1=_mergeNamespaces({__proto__:null,default:mapboxGl},[mapboxGlExports]),MAP_API="pk.eyJ1IjoiaGlldXNlcnZpY2VzIiwiYSI6ImNsdmlidHppNzA5cjAya3M0N3c1NTRtY3IifQ.ne-z1KUE3g8g2HeKyVrtuw",MAP_STYLE="mapbox://styles/hieuservices/cm0y0ezhf012101pmg9f01txf",MapCustom=({order:_e})=>{var gt,bt,wt,St;const[et,tt]=reactExports.useState(null),[rt,it]=reactExports.useState({type:"Feature",geometry:{type:"LineString"}}),st=new mapboxGlExports.LngLat(Number.parseFloat(((gt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:gt.longPickUp)??"0"),Number.parseFloat(((bt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:bt.latPickUp)??"0")),ut=new mapboxGlExports.LngLat(Number.parseFloat(((wt=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:wt.longDelivery)??"0"),Number.parseFloat(((St=_e==null?void 0:_e.deliveryInfoDetail)==null?void 0:St.latDelivery)??"0")),ht=async kt=>{const Rt=kt.target;tt(Rt),await at()},at=async()=>{const Rt=(await getDirection({source:st,destination:ut})).routes[0].overview_polyline.points,It=polyline.toGeoJSON(Rt);it({type:"Feature",geometry:It})};return jsxRuntimeExports.jsx("div",{className:"w-full h-full flex justify-center items-center p-4",children:jsxRuntimeExports.jsx(Map$1,{mapboxAccessToken:MAP_API,initialViewState:{longitude:st.lng,latitude:st.lat,zoom:12},style:{width:1200,height:550,borderRadius:10},mapStyle:MAP_STYLE,boxZoom:!0,antialias:!0,optimizeForTerrain:!0,trackResize:!0,attributionControl:!1,onLoad:ht,children:et&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Source,{id:"LineString",type:"geojson",data:rt}),jsxRuntimeExports.jsx(Layer,{id:"LineString",type:"line",source:"LineString",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f35d2f","line-width":4}}),jsxRuntimeExports.jsx(Marker,{longitude:st.lng,latitude:st.lat,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(MapPin,{strokeWidth:3,className:"text-orangeTheme animate-bounce",size:24})})}),jsxRuntimeExports.jsx(Marker,{longitude:ut.lng,latitude:ut.lat,children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(FlagTriangleLeft,{strokeWidth:3,className:"text-orangeTheme animate-bounce",size:24})})}),jsxRuntimeExports.jsx(ScaleControl,{unit:"metric",position:"bottom-right"}),jsxRuntimeExports.jsx(GeolocateControl,{positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,position:"bottom-right"}),jsxRuntimeExports.jsx(NavigationControl,{showCompass:!0,showZoom:!0,position:"top-right"}),jsxRuntimeExports.jsx(FullscreenControl,{})]})})})},OrderDetailPage=()=>{var Dt,Mt,$t;const[_e,et]=reactExports.useState(!1),[tt,rt]=reactExports.useState(!1),{id:it}=useParams(),st=useNavigate(),[ut,ht]=reactExports.useState(null),[at,gt]=reactExports.useState(0),[bt,wt]=reactExports.useState(null),St=async()=>{var Nt,Ut;if(it===""||it===void 0){_t.loading("Something went wrong. Please try again."),st(ROUTES.MY_ORDER);return}et(!0);const jt=await getOrderByOrderId({id:it});if(et(!1),jt.success){const Ht=(Nt=jt==null?void 0:jt.result)==null?void 0:Nt.data.orderDriver;ht(Ht)}else _t.error((Ut=jt==null?void 0:jt.result)==null?void 0:Ut.message)},kt=async()=>{var Nt,Ut;if(it===""||it===void 0){_t.loading("Something went wrong. Please try again."),st(ROUTES.MY_ORDER);return}et(!0);const jt=await getOrderDetailByOrderId({id:it});if(et(!1),jt.success){const Ht=(Nt=jt==null?void 0:jt.result)==null?void 0:Nt.data[0];console.log(at,Ht),wt(Ht);const Kt=Ht==null?void 0:Ht.status;gt(processStateEnum[Kt])}else _t.error((Ut=jt==null?void 0:jt.result)==null?void 0:Ut.message)};reactExports.useEffect(()=>{kt(),St()},[it,tt]);const Rt=()=>{rt(!tt)},It=async()=>{var Ut,Ht,Kt;et(!0);const jt={orderDetailId:(bt==null?void 0:bt.orderDetailId)??0,totalAmount:Math.floor((bt==null?void 0:bt.totalPrice)??0).toString()??"0",request:{returnUrl:`undefined${ROUTES.ORDER_DETAIL}/${bt==null?void 0:bt.orderDetailId}`,cancelUrl:`undefined${ROUTES.ORDER_DETAIL}/${bt==null?void 0:bt.orderDetailId}`}};console.log(jt);const Nt=await confirmOrder({data:jt});et(!1),Nt.success?(console.log((Ut=Nt.result)==null?void 0:Ut.data),window.location.href=(Ht=Nt.result)==null?void 0:Ht.data):_t.error((Kt=Nt==null?void 0:Nt.result)==null?void 0:Kt.message)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[_e&&jsxRuntimeExports.jsx(Loading,{}),jsxRuntimeExports.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[jsxRuntimeExports.jsx(ProcessHeader,{status:at}),at===1&&jsxRuntimeExports.jsx(WaitingConfirm,{}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 mx-14 gap-8",children:[jsxRuntimeExports.jsx("div",{className:"col-span-2 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"flex gap-2 overflow-ellipsis",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(MapPin,{strokeWidth:2,className:"text-orangeTheme"}),jsxRuntimeExports.jsx("p",{children:(Dt=bt==null?void 0:bt.deliveryInfoDetail)==null?void 0:Dt.pickUpLocation})]}),jsxRuntimeExports.jsx(MoveRight,{strokeWidth:1}),jsxRuntimeExports.jsxs("div",{className:"flex gap-1",children:[jsxRuntimeExports.jsx(FlagTriangleRight,{strokeWidth:2,className:"text-orangeTheme"}),jsxRuntimeExports.jsx("p",{children:(Mt=bt==null?void 0:bt.deliveryInfoDetail)==null?void 0:Mt.deliveryLocaTion})]})]})}),jsxRuntimeExports.jsxs("div",{className:"col-span-1 flex gap-2 max-sm:text-md  max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium text-lg",children:"Cost:"}),jsxRuntimeExports.jsx("p",{className:"text-orangeTheme text-lg font-semibold",children:formatCurrency((bt==null?void 0:bt.totalPrice)??0)})]}),jsxRuntimeExports.jsxs("div",{className:"col-span-1  flex gap-2 text-lg max-sm:text-md max-sm:col-span-2",children:[jsxRuntimeExports.jsx("span",{className:"font-medium ",children:"Date Intend:"}),jsxRuntimeExports.jsx("p",{className:"text-orangeTheme  font-semibold",children:formatDate((($t=bt==null?void 0:bt.deliveryInfoDetail)==null?void 0:$t.orderDate)??"")})]})]}),jsxRuntimeExports.jsxs(Accordion,{type:"multiple",className:"mx-14 max-sm:mx-4 ",defaultValue:["item-0","item-1","item-2"],children:[at>=1&&jsxRuntimeExports.jsxs(AccordionItem,{value:"item-0",children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:jsxRuntimeExports.jsx("p",{className:"font-medium text-md ",children:"Delivery information"})}),jsxRuntimeExports.jsx(AccordionContent,{children:jsxRuntimeExports.jsx(UpdateCustomerInformation,{order:bt,setIsUpdatedOrder:Rt})})]}),at>=1&&jsxRuntimeExports.jsxs(AccordionItem,{value:"item-2",children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:jsxRuntimeExports.jsx("p",{className:"font-medium text-md ",children:"Product information"})}),jsxRuntimeExports.jsx(AccordionContent,{children:jsxRuntimeExports.jsx(ProductInformation,{order:bt,setIsUpdatedOrder:Rt})})]}),at>=2&&jsxRuntimeExports.jsxs(AccordionItem,{value:"item-1",children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:jsxRuntimeExports.jsx("p",{className:"font-medium text-md ",children:"Driver & Truck information"})}),jsxRuntimeExports.jsx(AccordionContent,{children:jsxRuntimeExports.jsx(TruckInformation,{driver:ut})})]}),at>=2&&jsxRuntimeExports.jsxs(AccordionItem,{value:"item-1",children:[jsxRuntimeExports.jsx(AccordionTrigger,{children:jsxRuntimeExports.jsx("p",{className:"font-medium text-md ",children:"Map Tracking"})}),jsxRuntimeExports.jsx(AccordionContent,{children:jsxRuntimeExports.jsx(MapCustom,{order:bt})})]})]}),at===2&&jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme hover:bg-orangeTheme/90 cursor-pointer mx-20 ",onClick:It,children:"Paid for service"})]})]})},navAdmin=[{id:2,title:"Trucks",path:"truck",icon:jsxRuntimeExports.jsx(Truck,{})},{id:3,title:"Customers",path:"customer",icon:jsxRuntimeExports.jsx(UsersRound,{})},{id:4,title:"Orders",path:"order",icon:jsxRuntimeExports.jsx(Store,{})}],SidebarContext=reactExports.createContext(null),Sidebar=()=>{const{setAuth:_e}=useAuth(),et=useNavigate(),tt=useLocation(),[rt,it]=reactExports.useState(tt.pathname),[st,ut]=reactExports.useState(!0),ht=()=>{localStorage.removeItem("accessToken"),_e({user:void 0}),et(ROUTES.ROOT)};return jsxRuntimeExports.jsx("aside",{className:"h-screen",children:jsxRuntimeExports.jsxs("div",{className:"h-full flex flex-col bg-white border-r",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 flex justify-between items-center",children:[jsxRuntimeExports.jsx("button",{className:cn("p-2 rounded-lg bg-gray-50 hover:bg-gray-100 text-orange-600 font-black overflow-hidden transition-all duration-1000",st?"w-40 opacity-100":"w-0 opacity-0"),style:{transition:"width 0.5s ease, opacity 0.5s ease"},children:"L&L Dashboard"}),jsxRuntimeExports.jsx("button",{onClick:()=>ut(at=>!at),className:"flex justify-center items-center transition-all duration-1000 bg-transparent",children:st?jsxRuntimeExports.jsx(Minimize2,{size:20}):jsxRuntimeExports.jsx("span",{className:"py-2 px-2",children:jsxRuntimeExports.jsx(Maximize2,{size:20})})})]}),jsxRuntimeExports.jsx(SidebarContext.Provider,{value:{expanded:st,setActiveItem:it},children:jsxRuntimeExports.jsx("ul",{className:"flex-1 px-3",children:navAdmin.map(at=>jsxRuntimeExports.jsx(SidebarItem,{title:at.title,path:at.path,icon:at.icon,active:rt===at.path},at.id))})}),jsxRuntimeExports.jsxs("div",{onClick:ht,className:cn(" leading-4 transition-all duration-1000 cursor-pointer bg-rose-500 p-2 rounded-md flex items-center text-slate-700 justify-start mx-3"),children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(LogOut,{})}),jsxRuntimeExports.jsx("span",{className:cn("overflow-hidden  transition-all",st?"w-53 mx-3 opacity-100":"hidden"),children:"Logout"})]}),jsxRuntimeExports.jsx("div",{className:"flex justify-center items-center py-4 px-2 w-full",children:jsxRuntimeExports.jsxs("div",{className:cn("flex items-center justify-start cursor-pointer text-slate-700 leading-4 transition-all duration-1000 bg-rose-500 p-2 rounded-md  w-full mx-1"),children:[jsxRuntimeExports.jsx("span",{children:jsxRuntimeExports.jsx(UserRound,{})}),jsxRuntimeExports.jsx("span",{className:cn("overflow-hidden  transition-all",st?"w-53 mx-3 opacity-100":"hidden"),children:" Admin Info"})]})})]})})},SidebarItem=({title:_e,active:et,icon:tt,path:rt})=>{const{expanded:it,setActiveItem:st}=reactExports.useContext(SidebarContext);return jsxRuntimeExports.jsx(Link,{to:rt,children:jsxRuntimeExports.jsxs("li",{className:cn("relative flex items-center py-2 px-3 my-1 font-normal rounded-md cursor-pointer transition-colors group",et?"bg-rose-500 0 text-slate-700 ":"hover:border-indigo-50 text-black"),onClick:()=>st(rt),children:[tt,jsxRuntimeExports.jsx("span",{className:cn("overflow-hidden  transition-all",it?"w-52 ml-3 ":"hidden"),children:_e}),!it&&jsxRuntimeExports.jsx("div",{className:"absolute left-full rounded-md px-2 py-1 ml-6 bg-indigo-100 text-indigo-800 text-sm invisible opacity-20 -translate-x-3 transition-all duration-1000 group-hover:visible group-hover:opacity-100 group-hover:translate-x-0",children:_e})]})})},AdminLayout=()=>jsxRuntimeExports.jsxs("div",{className:"flex h-screen overflow-hidden",children:[jsxRuntimeExports.jsx(Sidebar,{}),jsxRuntimeExports.jsx("div",{className:"flex-1 w-full h-full bg-gradient-to-r from-orange-200 to-rose-200  overflow-auto",children:jsxRuntimeExports.jsx(Outlet,{})})]}),DeleteAccountForm=({checkAccountDone:_e})=>{const[et,tt]=reactExports.useState(!1),rt=useForm({resolver:t(UserLoginSchema),defaultValues:{email:"",password:""}}),it=async st=>{var ht,at,gt;tt(!0);const ut=await authService.login(st);tt(!1),ut.success?(localStorage.setItem("accessToken",(ht=ut==null?void 0:ut.result)==null?void 0:ht.data),(await authService.getUserInfo()).success&&_e(),_t.success((at=ut==null?void 0:ut.result)==null?void 0:at.message)):_t.error((gt=ut==null?void 0:ut.result)==null?void 0:gt.message)};return jsxRuntimeExports.jsxs(Form,{...rt,children:[jsxRuntimeExports.jsxs("form",{onSubmit:rt.handleSubmit(it),className:"w-full flex flex-col gap-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2  gap-x-2 gap-y-4",children:[jsxRuntimeExports.jsx(FormInput,{name:"email",form:rt,placeholder:"Ex:customer@gmail.com",classContent:"col-span-2",autoFocus:!0}),jsxRuntimeExports.jsx(FormInput,{name:"password",form:rt,classContent:"col-span-2",type:"password"}),jsxRuntimeExports.jsx("div",{className:"justify-end flex text-orangeTheme text-sm col-span-2 -mt-4 font-semibold",children:jsxRuntimeExports.jsx(Link,{to:"/forgot-password",children:"Forgot password"})})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col gap-2",children:jsxRuntimeExports.jsx(Button$1,{className:"bg-orangeTheme w-full hover:bg-orangeTheme/90",type:"submit",disabled:rt.formState.isSubmitting,children:"Login"})})]}),et&&jsxRuntimeExports.jsx(Loading,{})]})},DeleteConfirm=({open:_e,setOpen:et})=>{const[tt,rt]=reactExports.useState(!1),it=async()=>{var ut,ht;rt(!0);const st=await authService.deleteAccount();rt(!1),et(!1),st.success?_t.success((ut=st==null?void 0:st.result)==null?void 0:ut.message):_t.error((ht=st==null?void 0:st.result)==null?void 0:ht.message)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(AlertDialog,{open:_e,children:jsxRuntimeExports.jsxs(AlertDialogContent,{className:"max-sm:w-9/12 ",children:[jsxRuntimeExports.jsxs(AlertDialogHeader,{children:[jsxRuntimeExports.jsx(AlertDialogTitle,{className:"flex justify-center text-orangeTheme font-bold text-2xl ",children:"DELETE ACCOUNT"}),jsxRuntimeExports.jsx(AlertDialogDescription,{className:"text-black",children:"Confirm to delete account?"})]}),jsxRuntimeExports.jsx(AlertDialogFooter,{children:jsxRuntimeExports.jsxs("div",{className:"flex justify-end gap-4 items-center ",children:[jsxRuntimeExports.jsx(AlertDialogCancel,{className:"hover:bg-orangeTheme/10 text-orangeTheme hover:text-orangeTheme items-center ",children:"Cancel"}),jsxRuntimeExports.jsx(AlertDialogAction,{className:"bg-orangeTheme  hover:bg-orangeTheme/90 items-center ",onClick:it,children:"Confirm"})]})})]})}),tt&&jsxRuntimeExports.jsx(Loading,{})]})},DeleteAccountPage=()=>{const[_e,et]=reactExports.useState(!1),tt=()=>{et(!0)};return jsxRuntimeExports.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center",children:_e?jsxRuntimeExports.jsx(DeleteConfirm,{open:_e,setOpen:et}):jsxRuntimeExports.jsxs("div",{className:"md:w-2/3 max-sm:w-full flex flex-col items-center justify-center gap-4",children:[jsxRuntimeExports.jsx("p",{className:"font-medium text-4xl",children:"LOGIN FORM"}),jsxRuntimeExports.jsx("p",{children:"You need login to confirm account before you delete"}),jsxRuntimeExports.jsx(DeleteAccountForm,{checkAccountDone:tt})]})})},AppRoutes=()=>{var et;const{auth:_e}=useAuth();return jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Loading,{}),children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/auth-callback",element:jsxRuntimeExports.jsx(AuthCallbackPage,{})}),jsxRuntimeExports.jsx(Route,{path:ROUTES.DELETE_ACCOUT,element:jsxRuntimeExports.jsx(DeleteAccountPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.SIGN_UP,element:jsxRuntimeExports.jsx(SignupPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.LOGIN,element:jsxRuntimeExports.jsx(LoginPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.FORGOT_PASSWORD,element:jsxRuntimeExports.jsx(ForgotPasswordPage$2,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.VERIFY_CODE,element:jsxRuntimeExports.jsx(ForgotPasswordPage$1,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.SET_PASSWORD,element:jsxRuntimeExports.jsx(ForgotPasswordPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.ROOT,element:jsxRuntimeExports.jsx(HomeLayout,{})}),",",jsxRuntimeExports.jsxs(Route,{path:ROUTES.ROOT,element:jsxRuntimeExports.jsx(MainLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:ROUTES.CREATE_ORDER,element:jsxRuntimeExports.jsx(ServicePage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.COST,element:jsxRuntimeExports.jsx(CostPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.BLOG,element:jsxRuntimeExports.jsx(BlogPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.ABOUT_US,element:jsxRuntimeExports.jsx(AboutUsPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.PROFILE,element:jsxRuntimeExports.jsx(ProfilePage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.BLOG_DETAIL,element:jsxRuntimeExports.jsx(BlogDetailPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.MY_ORDER,element:jsxRuntimeExports.jsx(MyOrderPage,{})}),",",jsxRuntimeExports.jsx(Route,{path:ROUTES.ORDER_DETAIL_ID,element:jsxRuntimeExports.jsx(OrderDetailPage,{})}),","]}),",",((et=_e.user)==null?void 0:et.roleID)==1?jsxRuntimeExports.jsxs(Route,{path:ROUTES.DASH_BOARD,element:jsxRuntimeExports.jsx(AdminLayout,{}),children:[jsxRuntimeExports.jsx(Route,{path:ROUTES.TRUCK,element:jsxRuntimeExports.jsx(AdminTruckPage,{})}),jsxRuntimeExports.jsx(Route,{path:ROUTES.CUSTOMER,element:jsxRuntimeExports.jsx(AdminCustomerPage,{})}),jsxRuntimeExports.jsx(Route,{path:ROUTES.ORDER,element:jsxRuntimeExports.jsx(AdminOrderPage,{})})]}):jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})}),jsxRuntimeExports.jsx(Route,{path:"*",element:jsxRuntimeExports.jsx(Navigate,{to:"/"})})]})})};function App(){return jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(Auth0ProviderWithNavigate,{children:jsxRuntimeExports.jsxs(AuthProvider,{children:[jsxRuntimeExports.jsx(AppRoutes,{}),jsxRuntimeExports.jsx(Ie,{position:"top-right",reverseOrder:!1,toastOptions:{duration:5e3},containerClassName:"text-sm"})]})})})}client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(App,{}));
